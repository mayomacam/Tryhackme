<?xml version="1.0"?>
<!DOCTYPE items [
<!ELEMENT items (item*)>
<!ATTLIST items burpVersion CDATA "">
<!ATTLIST items exportTime CDATA "">
<!ELEMENT item (time, url, host, port, protocol, method, path, extension, request, status, responselength, mimetype, response, comment)>
<!ELEMENT time (#PCDATA)>
<!ELEMENT url (#PCDATA)>
<!ELEMENT host (#PCDATA)>
<!ATTLIST host ip CDATA "">
<!ELEMENT port (#PCDATA)>
<!ELEMENT protocol (#PCDATA)>
<!ELEMENT method (#PCDATA)>
<!ELEMENT path (#PCDATA)>
<!ELEMENT extension (#PCDATA)>
<!ELEMENT request (#PCDATA)>
<!ATTLIST request base64 (true|false) "false">
<!ELEMENT status (#PCDATA)>
<!ELEMENT responselength (#PCDATA)>
<!ELEMENT mimetype (#PCDATA)>
<!ELEMENT response (#PCDATA)>
<!ATTLIST response base64 (true|false) "false">
<!ELEMENT comment (#PCDATA)>
]>
<items burpVersion="2020.4" exportTime="Thu May 28 11:15:00 IST 2020">
  <item>
    <time>Thu May 28 10:46:08 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/]]></path>
    <extension>null</extension>
    <request base64="true"><![CDATA[R0VUIC8gSFRUUC8xLjENCkhvc3Q6IDEwLjEwLjEwLjE4DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBydjo2OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzY4LjANCkFjY2VwdDogdGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCwqLyo7cT0wLjgNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KRE5UOiAxDQpDb25uZWN0aW9uOiBjbG9zZQ0KQ29va2llOiBzX2NjPXRydWU7IHNfZmlkPTFEODdDNEM1RjFGREQ1MTktMjE4OUY3QUQwOEI4NUMyRTsgc19ucj0xNTkwNjM3MTM5MDAwOyBzX3NxPW5iY3VnbG9iYWwlMkNuYmN1dXNhbmV0d29ya2QlM0QlMjUyNnBpZCUyNTNETXIuJTI1MjUyMFJvYm90JTI1MjUyMCUyNTI1M0ElMjUyNTIwV2hvJTI1MjUyMElzJTI1MjUyME1yLiUyNTI1MjBSb2JvdCUyNTI1MjAlMjUyNTNBJTI1MjUyMEluZm9ybSUyNTI1MjBHYWxsZXJ5JTI1MjUyMCUyNTI1M0ElMjUyNTIwUGhvdG8lMjUyNTIwMSUyNTI2cGlkdCUyNTNEMSUyNTI2b2lkJTI1M0QlMjUyNTBBJTI1MjUwOSUyNTI1MEElMjUyNTA5JTI1MjUwOSUyNTI1MEElMjUyNTA5JTI1MjUwOSUyNTI1MEElMjUyNTA5JTI1MjUwQSUyNTI2b2lkdCUyNTNEMyUyNTI2b3QlMjUzRFNVQk1JVDsgd29yZHByZXNzX3Rlc3RfY29va2llPVdQK0Nvb2tpZStjaGVjaw0KVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0czogMQ0KQ2FjaGUtQ29udHJvbDogbWF4LWFnZT0wDQoNCg==]]></request>
    <status>200</status>
    <responselength>1384</responselength>
    <mimetype>HTML</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA1OjE2OjA3IEdNVA0KU2VydmVyOiBBcGFjaGUNClgtRnJhbWUtT3B0aW9uczogU0FNRU9SSUdJTg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KWC1Nb2QtUGFnZXNwZWVkOiAxLjkuMzIuMy00NTIzDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTAsIG5vLWNhY2hlDQpDb250ZW50LUxlbmd0aDogMTEwNA0KQ29ubmVjdGlvbjogY2xvc2UNCkNvbnRlbnQtVHlwZTogdGV4dC9odG1sDQoNCjwhZG9jdHlwZSBodG1sPgo8IS0tClwgICAvL35+XCB8ICAgfCAgICAvXCAgfH5+XHx+fiAgfFwgIHwgL35+XH5+fH5+ICAgIC9cICB8ICAvfn5cIHxcICB8fH5+CiBcIC98ICAgIHx8ICAgfCAgIC9fX1wgfF9fL3wtLSAgfCBcIHx8ICAgIHwgfCAgICAgL19fXCB8IHwgICAgfHwgXCB8fC0tCiAgfCAgXF9fLyAgXF8vICAgLyAgICBcfCAgXHxfXyAgfCAgXHwgXF9fLyAgfCAgICAvICAgIFx8X19cX18vIHwgIFx8fF9fCi0tPgo8aHRtbCBjbGFzcz0ibm8tanMiIGxhbmc9IiI+CiAgPGhlYWQ+CiAgICAKCiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9ImNzcy9tYWluLTYwMGE5NzkxLmNzcyI+CgogICAgPHNjcmlwdCBzcmM9ImpzL3ZlbmRvci92ZW5kb3ItNDhjYTQ1NWMuanMucGFnZXNwZWVkLmptLlY3UWZ3NmJkNUMuanMiPjwvc2NyaXB0PgoKICAgIDxzY3JpcHQ+dmFyIFVTRVJfSVA9JzIwOC4xODUuMTE1LjYnO3ZhciBCQVNFX1VSTD0naW5kZXguaHRtbCc7dmFyIFJFVFVSTl9VUkw9J2luZGV4Lmh0bWwnO3ZhciBSRURJUkVDVD1mYWxzZTt3aW5kb3cubG9nPWZ1bmN0aW9uKCl7bG9nLmhpc3Rvcnk9bG9nLmhpc3Rvcnl8fFtdO2xvZy5oaXN0b3J5LnB1c2goYXJndW1lbnRzKTtpZih0aGlzLmNvbnNvbGUpe2NvbnNvbGUubG9nKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO319Ozwvc2NyaXB0PgoKICA8L2hlYWQ+CiAgPGJvZHk+CiAgICA8IS0tW2lmIGx0IElFIDldPgogICAgICA8cCBjbGFzcz0iYnJvd3NlcnVwZ3JhZGUiPllvdSBhcmUgdXNpbmcgYW4gPHN0cm9uZz5vdXRkYXRlZDwvc3Ryb25nPiBicm93c2VyLiBQbGVhc2UgPGEgaHJlZj0iaHR0cDovL2Jyb3dzZWhhcHB5LmNvbS8iPnVwZ3JhZGUgeW91ciBicm93c2VyPC9hPiB0byBpbXByb3ZlIHlvdXIgZXhwZXJpZW5jZS48L3A+CiAgICAKCiAgICA8IS0tIEdvb2dsZSBQbHVzIGNvbmZpcm1hdGlvbiAtLT4KICAgIDxkaXYgaWQ9ImFwcCI+PC9kaXY+CgogICAgCiAgICA8c2NyaXB0IHNyYz0ianMvc19jb2RlLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJqcy9tYWluLWFjYmEwNmE1LmpzIj48L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg==]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 10:46:17 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/audio/hum_loop.ogg]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/audio/hum_loop.ogg]]></path>
    <extension>ogg</extension>
    <request base64="true"><![CDATA[R0VUIC9hdWRpby9odW1fbG9vcC5vZ2cgSFRUUC8xLjENCkhvc3Q6IDEwLjEwLjEwLjE4DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBydjo2OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzY4LjANCkFjY2VwdDogKi8qDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC41DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNClgtUmVxdWVzdGVkLVdpdGg6IFhNTEh0dHBSZXF1ZXN0DQpETlQ6IDENCkNvbm5lY3Rpb246IGNsb3NlDQpSZWZlcmVyOiBodHRwOi8vMTAuMTAuMTAuMTgvDQpDb29raWU6IHNfY2M9dHJ1ZTsgc19maWQ9MUQ4N0M0QzVGMUZERDUxOS0yMTg5RjdBRDA4Qjg1QzJFOyBzX25yPTE1OTA2MzcxMzkwMDA7IHNfc3E9bmJjdWdsb2JhbCUyQ25iY3V1c2FuZXR3b3JrZCUzRCUyNTI2cGlkJTI1M0RNci4lMjUyNTIwUm9ib3QlMjUyNTIwJTI1MjUzQSUyNTI1MjBXaG8lMjUyNTIwSXMlMjUyNTIwTXIuJTI1MjUyMFJvYm90JTI1MjUyMCUyNTI1M0ElMjUyNTIwSW5mb3JtJTI1MjUyMEdhbGxlcnklMjUyNTIwJTI1MjUzQSUyNTI1MjBQaG90byUyNTI1MjAxJTI1MjZwaWR0JTI1M0QxJTI1MjZvaWQlMjUzRCUyNTI1MEElMjUyNTA5JTI1MjUwQSUyNTI1MDklMjUyNTA5JTI1MjUwQSUyNTI1MDklMjUyNTA5JTI1MjUwQSUyNTI1MDklMjUyNTBBJTI1MjZvaWR0JTI1M0QzJTI1MjZvdCUyNTNEU1VCTUlUOyB3b3JkcHJlc3NfdGVzdF9jb29raWU9V1ArQ29va2llK2NoZWNrDQpJZi1Nb2RpZmllZC1TaW5jZTogTW9uLCAyOCBTZXAgMjAxNSAyMDoyOTozMyBHTVQNCklmLU5vbmUtTWF0Y2g6ICI0MmZlMS01MjBkNDhlMWQ2NTQwIg0KQ2FjaGUtQ29udHJvbDogbWF4LWFnZT0wDQoNCg==]]></request>
    <status>304</status>
    <responselength>130</responselength>
    <mimetype></mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMzA0IE5vdCBNb2RpZmllZA0KRGF0ZTogVGh1LCAyOCBNYXkgMjAyMCAwNToxNjoxNyBHTVQNClNlcnZlcjogQXBhY2hlDQpDb25uZWN0aW9uOiBjbG9zZQ0KRVRhZzogIjQyZmUxLTUyMGQ0OGUxZDY1NDAiDQoNCg==]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 10:46:12 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/js/main-acba06a5.js]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/js/main-acba06a5.js]]></path>
    <extension>js</extension>
    <request base64="true"><![CDATA[R0VUIC9qcy9tYWluLWFjYmEwNmE1LmpzIEhUVFAvMS4xDQpIb3N0OiAxMC4xMC4xMC4xOA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgcnY6NjguMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC82OC4wDQpBY2NlcHQ6ICovKg0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuNQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpETlQ6IDENCkNvbm5lY3Rpb246IGNsb3NlDQpSZWZlcmVyOiBodHRwOi8vMTAuMTAuMTAuMTgvDQpDb29raWU6IHNfY2M9dHJ1ZTsgc19maWQ9MUQ4N0M0QzVGMUZERDUxOS0yMTg5RjdBRDA4Qjg1QzJFOyBzX25yPTE1OTA2MzcxMzkwMDA7IHNfc3E9bmJjdWdsb2JhbCUyQ25iY3V1c2FuZXR3b3JrZCUzRCUyNTI2cGlkJTI1M0RNci4lMjUyNTIwUm9ib3QlMjUyNTIwJTI1MjUzQSUyNTI1MjBXaG8lMjUyNTIwSXMlMjUyNTIwTXIuJTI1MjUyMFJvYm90JTI1MjUyMCUyNTI1M0ElMjUyNTIwSW5mb3JtJTI1MjUyMEdhbGxlcnklMjUyNTIwJTI1MjUzQSUyNTI1MjBQaG90byUyNTI1MjAxJTI1MjZwaWR0JTI1M0QxJTI1MjZvaWQlMjUzRCUyNTI1MEElMjUyNTA5JTI1MjUwQSUyNTI1MDklMjUyNTA5JTI1MjUwQSUyNTI1MDklMjUyNTA5JTI1MjUwQSUyNTI1MDklMjUyNTBBJTI1MjZvaWR0JTI1M0QzJTI1MjZvdCUyNTNEU1VCTUlUOyB3b3JkcHJlc3NfdGVzdF9jb29raWU9V1ArQ29va2llK2NoZWNrDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTANCg0K]]></request>
    <status>200</status>
    <responselength>496400</responselength>
    <mimetype>script</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA1OjE2OjA4IEdNVA0KU2VydmVyOiBBcGFjaGUNClgtRnJhbWUtT3B0aW9uczogU0FNRU9SSUdJTg0KRVRhZzogIjc5MTc4LTUyNDg2N2U4ZGU3YzAtZ3ppcCINCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNCkNhY2hlLUNvbnRyb2w6IG1heC1hZ2U9MzAwDQpFeHBpcmVzOiBUaHUsIDI4IE1heSAyMDIwIDA1OjIxOjA3IEdNVA0KTGFzdC1Nb2RpZmllZDogVGh1LCAyOCBNYXkgMjAyMCAwNToxNjowOCBHTVQNClgtQ29udGVudC1UeXBlLU9wdGlvbnM6IG5vc25pZmYNCkNvbm5lY3Rpb246IGNsb3NlDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCkNvbnRlbnQtTGVuZ3RoOiA0OTU5OTINCg0KISBmdW5jdGlvbiB0KGUsIG4sIHIpIHsKICAgIGZ1bmN0aW9uIGkoYSwgcykgewogICAgICAgIGlmICghblthXSkgewogICAgICAgICAgICBpZiAoIWVbYV0pIHsKICAgICAgICAgICAgICAgIHZhciB1ID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgcmVxdWlyZSAmJiByZXF1aXJlOwogICAgICAgICAgICAgICAgaWYgKCFzICYmIHUpIHJldHVybiB1KGEsICEwKTsKICAgICAgICAgICAgICAgIGlmIChvKSByZXR1cm4gbyhhLCAhMCk7CiAgICAgICAgICAgICAgICB2YXIgYyA9IG5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciICsgYSArICInIik7CiAgICAgICAgICAgICAgICB0aHJvdyBjLmNvZGUgPSAiTU9EVUxFX05PVF9GT1VORCIsIGMKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgbCA9IG5bYV0gPSB7CiAgICAgICAgICAgICAgICBleHBvcnRzOiB7fQogICAgICAgICAgICB9OwogICAgICAgICAgICBlW2FdWzBdLmNhbGwobC5leHBvcnRzLCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IGVbYV1bMV1bdF07CiAgICAgICAgICAgICAgICByZXR1cm4gaShuID8gbiA6IHQpCiAgICAgICAgICAgIH0sIGwsIGwuZXhwb3J0cywgdCwgZSwgbiwgcikKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5bYV0uZXhwb3J0cwogICAgfQogICAgZm9yICh2YXIgbyA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHJlcXVpcmUgJiYgcmVxdWlyZSwgYSA9IDA7IGEgPCByLmxlbmd0aDsgYSsrKSBpKHJbYV0pOwogICAgcmV0dXJuIGkKfSh7CiAgICAxOiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICB2YXIgciA9IHQoIi4vdmlld3MvQXBwVmlldyIpOwogICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbUZyYW1lID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh0LCAxZTMgLyA2MCkKICAgICAgICAgICAgfQogICAgICAgIH0oKSwgJChmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIHQgPSAkKCIjYXBwIik7CiAgICAgICAgICAgIG5ldyByKHsKICAgICAgICAgICAgICAgIGVsOiB0CiAgICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0sIHsKICAgICAgICAiLi92aWV3cy9BcHBWaWV3IjogNgogICAgfV0sCiAgICAyOiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICB2YXIgciA9IFt7CiAgICAgICAgICAgICAgICBkaXNwbGF5OiAhMSwKICAgICAgICAgICAgICAgIG5hdmlnYXRlOiAhMSwKICAgICAgICAgICAgICAgIHJlZ2V4OiAvXmhlbHAkL2ksCiAgICAgICAgICAgICAgICBsYWJlbDogImhlbHAiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJTaG93IGNvbW1hbmRzIiwKICAgICAgICAgICAgICAgIG9uc2VsZWN0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlNZW51KCksIHRoaXMucnVuKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgZGlzcGxheTogITEsCiAgICAgICAgICAgICAgICBuYXZpZ2F0ZTogITAsCiAgICAgICAgICAgICAgICByZWdleDogL140MjAkL2ksCiAgICAgICAgICAgICAgICBsYWJlbDogIjQyMCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgIG9uc2VsZWN0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoImluc3RydWN0aW9uczpjaGFuZ2UiLCAiNDIwIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgZGlzcGxheTogITAsCiAgICAgICAgICAgICAgICBuYXZpZ2F0ZTogITEsCiAgICAgICAgICAgICAgICByZWdleDogL15wcmVwYXJlJC9pLAogICAgICAgICAgICAgICAgbGFiZWw6ICJwcmVwYXJlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgb25zZWxlY3Q6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigiaW5zdHJ1Y3Rpb25zOmNoYW5nZSIsICJwcmVwYXJlIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgZGlzcGxheTogITAsCiAgICAgICAgICAgICAgICBuYXZpZ2F0ZTogITAsCiAgICAgICAgICAgICAgICByZWdleDogL15mc29jaWV0eSQvaSwKICAgICAgICAgICAgICAgIGxhYmVsOiAiZnNvY2lldHkiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICBvbnNlbGVjdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCJpbnN0cnVjdGlvbnM6Y2hhbmdlIiwgImZzb2NpZXR5IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgZGlzcGxheTogITAsCiAgICAgICAgICAgICAgICBuYXZpZ2F0ZTogITAsCiAgICAgICAgICAgICAgICByZWdleDogL15pbmZvcm0kL2ksCiAgICAgICAgICAgICAgICBsYWJlbDogImluZm9ybSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgIG9uc2VsZWN0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoImluc3RydWN0aW9uczpjaGFuZ2UiLCAiaW5mb3JtIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgZGlzcGxheTogITAsCiAgICAgICAgICAgICAgICBuYXZpZ2F0ZTogITAsCiAgICAgICAgICAgICAgICByZWdleDogL15xdWVzdGlvbiQvaSwKICAgICAgICAgICAgICAgIGxhYmVsOiAicXVlc3Rpb24iLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICBvbnNlbGVjdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCJpbnN0cnVjdGlvbnM6Y2hhbmdlIiwgInF1ZXN0aW9uIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgZGlzcGxheTogITAsCiAgICAgICAgICAgICAgICBuYXZpZ2F0ZTogITAsCiAgICAgICAgICAgICAgICByZWdleDogL153YWtldXAkL2ksCiAgICAgICAgICAgICAgICBsYWJlbDogIndha2V1cCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgIG9uc2VsZWN0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoImluc3RydWN0aW9uczpjaGFuZ2UiLCAid2FrZXVwIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgZGlzcGxheTogITAsCiAgICAgICAgICAgICAgICBuYXZpZ2F0ZTogITAsCiAgICAgICAgICAgICAgICByZWdleDogL15qb2luJC9pLAogICAgICAgICAgICAgICAgbGFiZWw6ICJqb2luIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgb25zZWxlY3Q6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudHJhY2sub21uaSgiRW1haWwgU2lnbi1VcCIsICJJbnRybyBUZXh0IiksIHRoaXMudHJpZ2dlcigiaW5zdHJ1Y3Rpb25zOmNoYW5nZSIsICJqb2luIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIGkgPSB7CiAgICAgICAgICAgICAgICBkaXNwbGF5TWVudTogITAsCiAgICAgICAgICAgICAgICBwcmVmaXg6ICJyb290QGZzb2NpZXR5On4jICIsCiAgICAgICAgICAgICAgICB0eXBlOiAidXNlclByb21wdCIsCiAgICAgICAgICAgICAgICBkZWxheTogMTAwLAogICAgICAgICAgICAgICAgcHJlZml4V2VpZ2h0OiA3MDAsCiAgICAgICAgICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgY29tbWFuZHM6IHIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgbyA9IHsKICAgICAgICAgICAgICAgIGluaXRpYWw6IFt7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgcGxheVNvdW5kOiAiaW5pdCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIkdSVUIgbG9hZGluZy4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxZTMKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiV2VsY29tZSB0byBHUlVCISIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDJlMwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIGNsZWFyOiAhMCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMjUwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIGNsZWFyOiAhMCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiTG9hZGluZyBMaW51eCAzLjIuMC00LWFtZDY0IC4uLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDYwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJMb2FkaW5nIGluaXRpYWwgcmFtZGlzayAgLi4uIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMWUzCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXI6ICEwLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICIiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA2MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICBjbGVhcjogITAsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIkxvYWRpbmcsIHBsZWFzZSB3YWl0IC4uLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDEyMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiWyAgICAyLjE5NDc4NV0gc2QgMDowOjA6MDogW3NkYV0gQXNzdW1pbmcgZHJpdmUgY2FjaGU6IHdyaXRlIHRocm91Z2giLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiWyAgICAyLjE5NTI4NF0gc2QgMDowOjA6MDogW3NkYV0gQXNzdW1pbmcgZHJpdmUgY2FjaGU6IHdyaXRlIHRocm91Z2giLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiWyAgICAyLjE5NjE2M10gc2QgMDowOjA6MDogW3NkYV0gQXNzdW1pbmcgZHJpdmUgY2FjaGU6IHdyaXRlIHRocm91Z2giLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiSU5JVDogdmVyc2lvbiAyLjg4IGJvb3RpbmciLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA4MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWzxzcGFuIGNsYXNzPSJibCI+aW5mbzwvc3Bhbj5dIFVzaW5nIG1ha2VmaWxlLXN0eWxlIGNvbmN1cnJlbnQgYm9vdCBpbiBydW5sZXZlbCBTLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIFN0YXJ0aW5nIHRoZSBob3QgcGx1ZyBldmVudHMgZGlzcGF0Y2hlcjogdWRldmQuJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogNDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiLi4uLl0gU3ludGhlc2l6aW5nIHRoZSBpbml0aWFsIGhvdHBsdWcgZXZlbnRzLi4uWyAgICAyLjcwMDYwOV0gcGlpeF9zbWJ1cyAwMDAwOjAwOjA3LjM6IEhvc3QgU01CdXMgY29udHJvbGxlciBub3QgZW5hYmxlZCEiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiZG9uZS4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA0MAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJbIDxzcGFuIGNsYXNzPVwiZ25cIj5vazwvc3Bhbj4gXSBXYWl0aW5nIGZvciAvZGV2IHRvIGJlIGZ1bGx5IHBvcHVsYXRlZC4uLlsgICAgMy4wNjE0ODRdIEVycm9yOiBEcml2ZXIgJ3BjIHNwa3InIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCwgYWJvcnRpbmcuLi4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA0MAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJkb25lLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gU2V0dGluZyBwcmVsaW1pbmFyeSBrZXltYXAuLi5kb25lLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gQWN0aXZhdGluZyBzd2FwLi4uZG9uZS4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiWy4uLi5dIENoZWNraW5nIHJvb3QgZmlsZSBzeXN0ZW0uLi5mc2NrIGZyb20gdXRpbC1saW51eCAyLjIwLjEgL2Rldi9zZGExOiBjbGVhbiwgMzgxOTAvMTI1NjY0MCBmaWxlcywgMzQxOTkzLzUwMTY4MzIgYmxvY2tzIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiZG9uZS4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA0MAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbPHNwYW4gY2xhc3M9ImJsIj5pbmZvPC9zcGFuPl0gTG9hZGluZyBrZXJuZWwgbW9kdWxlIGxvb3AuJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogNDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIENsZWFuaW5nIHVwIHRlbXBvcmFyeSBmaWxlcy4uLiAvdG1wLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDQwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1sgPHNwYW4gY2xhc3M9ImduIj5vazwvc3Bhbj4gXSBBY3RpdmF0aW5nIGx2bSBhbmQgbWQgc3dhcC4uLmRvbmUuJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogNDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiWy4uLi5dIENoZWNraW5nIGZpbGUgc3lzdGVtcy4uLmZzY2sgZnJvbSB1dGlsLWxpbnV4IDIuMjAuMSIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDgwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJkb25lLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJbLi4uLl0gTW91bnRpbmcgbG9jYWwgZmlsZXN5c3RlbXMuLi5kb25lLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gQWN0aXZhdGluZyBzd2FwZmlsZSBzd2FwLi4uZG9uZS4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIENsZWFuaW5nIHVwIHRlbXBvcmFyeSBmaWxlcy4uLi4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gU2V0dGluZyBrZXJuZWwgdmFyaWFibGVzIC4uLmRvbmUuJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogMTAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1sgPHNwYW4gY2xhc3M9ImduIj5vazwvc3Bhbj4gXSBDb25maWd1cmluZyBuZXR3b3JrIGludGVyZmFjZXMuLi5kb25lLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gU3RhcnRpbmcgcnBjYmluZCBkYWVtb24uLi4uJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1sgPHNwYW4gY2xhc3M9ImduIj5vazwvc3Bhbj4gXSBTdGFydGluZyBORlMgY29tbW9uIHV0aWxpdGllczogc3RhdGQgaWRtYXBkLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gQ2xlYW5pbmcgdXAgdGVtcG9yYXJ5IGZpbGVzLi4uLmRvbmUuJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1s8c3BhbiBjbGFzcz0iYmwiPmluZm88L3NwYW4+XSBTZXR0aW5nIGNvbnNvbGUgc2NyZWVuIG1vZGVzLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDQwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1s8c3BhbiBjbGFzcz0iYmwiPmluZm88L3NwYW4+XSBTa2lwcGluZyBmb250IGFuZCBrZXltYXAgc2V0dXAgKGhhbmRsZWQgYnkgY29uc29sZS1zZXR1cCkuJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogMTAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiWy4uLi5dIFNldHRpbmcgdXAgY29uc29sZSBmb250IGFuZCBrZXltYXAuLi5kb25lLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDQwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJJTklUOiBFbnRlcmluZyBydW5sZXZlbDogMiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDFlMwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbPHNwYW4gY2xhc3M9ImJsIj5pbmZvPC9zcGFuPl0gVXNpbmcgbWFrZWZpbGUtc3R5bGUgY29uY3VycmVudCBib290IGluIHJ1bmxldmVsIDIuJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogOTAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIFN0YXJ0aW5nIE5GUyBjb21tb24gdXRsaXRpZXM6IHN0YXRkIGlkbWFwZC4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gU3RhcnRpbmcgcnBjYmluZCBkYWVtb24uLi5bLi4uLl0gQWxyZWFkeSBydW5uaW5nLi4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gU3RhcnRpbmcgZW5oYW5jZWQgc3lzbG9nZDogcnN5c2xvZ2QuJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogMzAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1sgPHNwYW4gY2xhc3M9ImduIj5vazwvc3Bhbj4gXSBTdGFydGluZyBkZWZlcnJlZCBleGVjdXRpb24gc2NoZWR1bGVyOiBhdGQuJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogMzAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1sgPHNwYW4gY2xhc3M9ImduIj5vazwvc3Bhbj4gXSBTdGFydGluZyBBQ1BJIHNlcnZpY2VzLi4uLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDEwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gU3RhcnRpbmcgcGVyaW9kaWMgY29tbWFuZCBzY2hlZHVsZXI6IGNyb24nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA4MAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gU3RhcnRpbmcgc3lzdGVtIG1lc3NhZ2UgYnVzOiBkYnVzJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogMWUzCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1sgPHNwYW4gY2xhc3M9ImduIj5vazwvc3Bhbj4gXSBTdGFydGluZyBBdmFoaSBtRE5TL0ROUy1TRCBEYWVtb246IGF2YWhpLWRhZW1vbi4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA0MAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gU3RhcnRpbmcgQ29tbW9uIFVuaXggUHJpbnRpbmcgU3lzdGVtOiBjdXBzZCcsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDkwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1sgPHNwYW4gY2xhc3M9ImduIj5vazwvc3Bhbj4gXSBTdGFydGluZyBNVEE6IGV4aW00LicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXI6ICEwLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJEZWJpYW4gR05VL0xpbnV4IDcgbXJyb2JvdCB0dHlsIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMWUzCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIiZuYnNwIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAidHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAicm9vdCIsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAibXJyb2JvdCBsb2dpbjogIiwKICAgICAgICAgICAgICAgICAgICBwbGF5U291bmQ6ICJpbml0IiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMTUwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ0eXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICLigKLigKLigKLigKLigKLigKLigKLigKLigKLigKLigKIiLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogInBhc3N3b3JkOiAiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA1MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICBjbGVhcjogITAsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDI1MAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIGNsZWFyOiAhMCwKICAgICAgICAgICAgICAgICAgICB0aW1lOiAhMCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogIiMwMDhjMjMiLAogICAgICAgICAgICAgICAgICAgIHByZWZpeENvbG9yOiAiIzAwOGMyMyIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIi0hLSBmcmllbmRfIFtmcmllbmRfQCIgKyBVU0VSX0lQICsgIl0gaGFzIGpvaW5lZCAjZnNvY2lldHkuIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMWUzCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIiZuYnNwOyIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHRpbWU6ICEwLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ0eXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJIZWxsbyBmcmllbmQuIiwKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICI8bXIuIHJvYm90PiIsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4Q29sb3I6ICIjMDA4YzIzIiwKICAgICAgICAgICAgICAgICAgICBwcmVmaXhXZWlnaHQ6IDcwMCwKICAgICAgICAgICAgICAgICAgICBkZWxheTogODAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiSWYgeW91J3ZlIGNvbWUsIHlvdSd2ZSBjb21lIGZvciBhIHJlYXNvbi4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxZTMKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY29udGludWVUeXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJZb3UgbWF5IG5vdCBiZSBhYmxlIHRvIGV4cGxhaW4gaXQgeWV0LCIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDEyMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY29udGludWVUeXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJidXQgdGhlcmUncyBhIHBhcnQgb2YgeW91IHRoYXQncyBleGhhdXN0ZWQgd2l0aCB0aGlzIHdvcmxkLi4uIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiYSB3b3JsZCB0aGF0IGRlY2lkZXMgd2hlcmUgeW91IHdvcmssIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMWUzCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAid2hvIHlvdSBzZWUsIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNTAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiYW5kIGhvdyB5b3UgZW1wdHkgYW5kIGZpbGwgeW91ciBkZXByZXNzaW5nIGJhbmsgYWNjb3VudC4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA4MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY29udGludWVUeXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJFdmVuIHRoZSBJbnRlcm5ldCBjb25uZWN0aW9uIHlvdSdyZSB1c2luZyB0byByZWFkIHRoaXMgaXMgY29zdGluZyB5b3UsIHNsb3dseSBjaGlwcGluZyBhd2F5IGF0IHlvdXIgZXhpc3RlbmNlLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDFlMwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjb250aW51ZVR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIlRoZXJlIGFyZSB0aGluZ3MgeW91IHdhbnQgdG8gc2F5LiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDYwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjb250aW51ZVR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIlNvb24gSSB3aWxsIGdpdmUgeW91IGEgdm9pY2UuIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiVG9kYXkgeW91ciBlZHVjYXRpb24gYmVnaW5zLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDYwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJtZW51T3B0aW9ucyIsCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogewogICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kczogcgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfSwgaV0sCiAgICAgICAgICAgICAgICBqb2luOiBbewogICAgICAgICAgICAgICAgICAgIGNsZWFyOiAhMCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXI6ICEwLAogICAgICAgICAgICAgICAgICAgIHRpbWU6ICEwLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ0eXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogIjxtci4gcm9ib3Q+IiwKICAgICAgICAgICAgICAgICAgICBwcmVmaXhDb2xvcjogIiMwMDhjMjMiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJoZWxsbyBmcmllbmQiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdGltZTogITAsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogInR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAiPG1yLiByb2JvdD4iLAogICAgICAgICAgICAgICAgICAgIHByZWZpeENvbG9yOiAiIzAwOGMyMyIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogInlvdSBkb24ndCBrbm93IG1lLCBidXQgSSd2ZSBiZWVuIHdhdGNoaW5nIHlvdS4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiaSBrbm93IHlvdSBmZWVsIGxpa2UgeW91IGhhdmUgbm8gdm9pY2UuIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMmUzCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiaSBrbm93IHlvdSBmZWVsIHRyYXBwZWQuIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMWUzCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiaSBrbm93IHlvdSBmZWVsIGNvbnRyb2xsZWQuIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMTIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjb250aW51ZVR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogImJ1dCBp4oCZdmUgYmVlbiBmaWdodGluZyBmb3IgeW91LiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDEyMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY29udGludWVUeXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJhbGwgb2YgeW91LiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDEyMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY29udGludWVUeXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJpdCdzIHRpbWUgdG8gYnJlYWsgZnJlZSBmcm9tIG91ciBjb3Jwb3JhdGUgbWFzdGVycy4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAieW91J3ZlIGJlZW4gYSBzbGF2ZSB0byB0aGVpciBkZWJ0IGZhciB0b28gbG9uZy4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdGltZTogITAsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogInR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAiPG1yLiByb2JvdD4iLAogICAgICAgICAgICAgICAgICAgIHByZWZpeENvbG9yOiAiIzAwOGMyMyIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogImlmIHlvdSdyZSByZWFkeSB0byBqb2luIG1lLCBlbnRlciB5b3VyIGVtYWlsIGFkZHJlc3MuIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMWUzCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIiZuYnNwOyIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHRpbWU6ICEwLAogICAgICAgICAgICAgICAgICAgIHByZWZpeENvbG9yOiAiIzAwOGMyMyIsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAiPGZyaWVuZF9fPiIsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImVtYWlsUHJvbXB0IiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNTAwCiAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgIGVtYWlsRXJyb3I6IFt7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgcGxheVNvdW5kOiAiaW5jb3JyZWN0IiwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogInJlZCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIkVycm9yOiBJbnZhbGlkIGVtYWlsLiBUcnkgYWdhaW4uIgogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHRpbWU6ICEwLAogICAgICAgICAgICAgICAgICAgIHByZWZpeENvbG9yOiAiIzAwOGMyMyIsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAiPGZyaWVuZF9fPiIsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImVtYWlsUHJvbXB0IiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNTAwCiAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgIGVtYWlsU3VjY2VzczogW3sKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiJm5ic3A7IiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdGltZTogITAsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogInR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAiPG1yLiByb2JvdD4iLAogICAgICAgICAgICAgICAgICAgIHByZWZpeENvbG9yOiAiIzAwOGMyMyIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIndlIHdpbGwgYmUgaW4gdG91Y2guIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMWUzCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXI6ICEwLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICImbmJzcDsiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAzZTMKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAidHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnRW50ZXIgY29tbWFuZC4gVHlwZSAiaGVscCIgdG8gc2VlIGEgbGlzdCBvZiBjb21tYW5kcy4nLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogInJvb3RAZnNvY2lldHk6fiMgIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNTAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIiZuYnNwOyIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwMAogICAgICAgICAgICAgICAgfSwgaV0sCiAgICAgICAgICAgICAgICBxdWVzdGlvbjogW3sKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiaW1hZ2VHYWxsZXJ5IiwKICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5TmFtZTogIkZTb2NpZXR5IEdhbGxlcnkiLAogICAgICAgICAgICAgICAgICAgIHRyYWNrOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AzOiAiR2FsbGVyeSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHByb3A1OiAiTXIuIFJvYm90IDogV2hvIElzIE1yLiBSb2JvdCA6IEZTb2NpZXR5IEdhbGxlcnkiLAogICAgICAgICAgICAgICAgICAgICAgICBwYWdlTmFtZTogIk1yLiBSb2JvdCA6IFdobyBpcyBNci4gUm9ib3QgOiBGU29jaWV0eSBHYWxsZXJ5IDogUGhvdG8gMSIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGltYWdlczogW3sKICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiAiaW1hZ2VzL3F1ZXN0aW9uL2plZmZlcnNvbi5qcGciCiAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICBzcmM6ICJpbWFnZXMvcXVlc3Rpb24vc3RlYWxzLmpwZyIKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogImltYWdlcy9xdWVzdGlvbi9tYWRvZmYuanBnIgogICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiAiaW1hZ2VzL3F1ZXN0aW9uL293bmVkLmpwZyIKICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICBkZWxheTogODAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ0VudGVyIGNvbW1hbmQuIFR5cGUgImhlbHAiIHRvIHNlZSBhIGxpc3Qgb2YgY29tbWFuZHMuJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICJyb290QGZzb2NpZXR5On4jICIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfSwgaV0sCiAgICAgICAgICAgICAgICBmc29jaWV0eTogW3sKICAgICAgICAgICAgICAgICAgICB2aWRlb05hbWU6ICJmc29jaWV0eSIsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImZ1bGxzY3JlZW5WaWRlbyIsCiAgICAgICAgICAgICAgICAgICAgY292ZXI6ICEwLAogICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogInZpZGVvL2Zzb2NpZXR5LndlYm0iLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAidmlkZW8vd2VibSIKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogInZpZGVvL2Zzb2NpZXR5Lm1wNCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ2aWRlby9tcDQiCiAgICAgICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICAgICAgdHJhY2s6IHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvcDM6ICJWaWRlbyIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA0MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAidHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnRW50ZXIgY29tbWFuZC4gVHlwZSAiaGVscCIgdG8gc2VlIGEgbGlzdCBvZiBjb21tYW5kcy4nLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogInJvb3RAZnNvY2lldHk6fiMgIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNTAwCiAgICAgICAgICAgICAgICB9LCBpXSwKICAgICAgICAgICAgICAgIHByZXBhcmU6IFt7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9OYW1lOiAicHJlcGFyZSIsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImZ1bGxzY3JlZW5WaWRlbyIsCiAgICAgICAgICAgICAgICAgICAgY292ZXI6ICEwLAogICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogInZpZGVvL3ByZXBhcmUud2VibSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ2aWRlby93ZWJtIgogICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiAidmlkZW8vcHJlcGFyZS5tcDQiLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAidmlkZW8vbXA0IgogICAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICAgIHRyYWNrOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AzOiAiVmlkZW8iCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNDAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ0VudGVyIGNvbW1hbmQuIFR5cGUgImhlbHAiIHRvIHNlZSBhIGxpc3Qgb2YgY29tbWFuZHMuJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICJyb290QGZzb2NpZXR5On4jICIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfSwgaV0sCiAgICAgICAgICAgICAgICB3YWtldXA6IFt7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9OYW1lOiAid2FrZXVwIiwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZnVsbHNjcmVlblZpZGVvIiwKICAgICAgICAgICAgICAgICAgICBjb3ZlcjogITAsCiAgICAgICAgICAgICAgICAgICAgc291cmNlczogW3sKICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiAidmlkZW8vd2FrZXVwLndlYm0iLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAidmlkZW8vd2VibSIKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogInZpZGVvL3dha2V1cC5tcDQiLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAidmlkZW8vbXA0IgogICAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICAgIHRyYWNrOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AzOiAiVmlkZW8iCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWxheTogODAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ0VudGVyIGNvbW1hbmQuIFR5cGUgImhlbHAiIHRvIHNlZSBhIGxpc3Qgb2YgY29tbWFuZHMuJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICJyb290QGZzb2NpZXR5On4jICIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfSwgaV0sCiAgICAgICAgICAgICAgICA0MjA6IFt7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImltYWdlR2FsbGVyeSIsCiAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeU5hbWU6ICI0MjAgSGlkZGVuIEltYWdlIiwKICAgICAgICAgICAgICAgICAgICB0cmFjazogewogICAgICAgICAgICAgICAgICAgICAgICBwcm9wMzogIkdhbGxlcnkiLAogICAgICAgICAgICAgICAgICAgICAgICBwcm9wNTogIk1yLiBSb2JvdCA6IFdobyBpcyBNci4gUm9ib3QgOiA0MjAgSGlkZGVuIEltYWdlIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGFnZU5hbWU6ICJNci4gUm9ib3QgOiBXaG8gaXMgTXIuIFJvYm90IDogNDIwIEhpZGRlbiBJbWFnZSIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGltYWdlczogW3sKICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiAiaW1hZ2VzLzQyMC80MjAuanBnIgogICAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA0MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAidHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnRW50ZXIgY29tbWFuZC4gVHlwZSAiaGVscCIgdG8gc2VlIGEgbGlzdCBvZiBjb21tYW5kcy4nLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogInJvb3RAZnNvY2lldHk6fiMgIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNTAwCiAgICAgICAgICAgICAgICB9LCBpXSwKICAgICAgICAgICAgICAgIGluZm9ybTogW3sKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiaW1hZ2VHYWxsZXJ5IiwKICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5TmFtZTogIkluZm9ybSBHYWxsZXJ5IiwKICAgICAgICAgICAgICAgICAgICB0cmFjazogewogICAgICAgICAgICAgICAgICAgICAgICBwcm9wMzogIkdhbGxlcnkiLAogICAgICAgICAgICAgICAgICAgICAgICBwcm9wNTogIk1yLiBSb2JvdCA6IFdobyBJcyBNci4gUm9ib3QgOiBJbmZvcm0gR2FsbGVyeSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VOYW1lOiAiTXIuIFJvYm90IDogV2hvIGlzIE1yLiBSb2JvdCA6IEluZm9ybSBHYWxsZXJ5IDogUGhvdG8gMSIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGltYWdlczogW3sKICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiAiaW1hZ2VzL2hlYWRsaW5lcy9kZWZsYXRlZ2F0ZS5qcGciCiAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICBzcmM6ICJpbWFnZXMvaGVhZGxpbmVzL2JpbGxpb25haXJlLmpwZyIKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogImltYWdlcy9oZWFkbGluZXMvY3JlZGl0Y2FyZHMyLmpwZyIKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogImltYWdlcy9oZWFkbGluZXMvbWV0Z2FsYS5qcGciCiAgICAgICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAidHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnRW50ZXIgY29tbWFuZC4gVHlwZSAiaGVscCIgdG8gc2VlIGEgbGlzdCBvZiBjb21tYW5kcy4nLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogInJvb3RAZnNvY2lldHk6fiMgIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNTAwCiAgICAgICAgICAgICAgICB9LCBpXSwKICAgICAgICAgICAgICAgIG1lbnVQcm9tcHQ6IFt7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ0VudGVyIGNvbW1hbmQuIFR5cGUgImhlbHAiIHRvIHNlZSBhIGxpc3Qgb2YgY29tbWFuZHMuJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICJyb290QGZzb2NpZXR5On4jICIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfSwgaV0sCiAgICAgICAgICAgICAgICBsaXZlOiBbewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYWNrYm9uZVZpZXciLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDQwMCwKICAgICAgICAgICAgICAgICAgICB2aWV3OiAiTGl2ZSIKICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgIH07CiAgICAgICAgZS5leHBvcnRzID0gbwogICAgfSwge31dLAogICAgMzogW2Z1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIGUgPSB0KCJob2dhbi5qcyIpLAogICAgICAgICAgICAgICAgbiA9IHt9OwogICAgICAgICAgICByZXR1cm4gbi5hcHAgPSBuZXcgZS5UZW1wbGF0ZSh7CiAgICAgICAgICAgICAgICBjb2RlOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByLmIobiA9IG4gfHwgIiIpLCByLmIoJzxkaXYgY2xhc3M9InRlcm1pbmFsLXdyYXBwZXIiPicpLCByLmIoIlxuIiArIG4pLCByLmIoJyAgPGRpdiBjbGFzcz0idGVybWluYWwtY29udGVudCI+PC9kaXY+JyksIHIuYigiXG4iICsgbiksIHIuYignICA8dGV4dGFyZWEgYXV0b2NhcGl0YWxpemU9Im9mZiIgaWQ9ImhpZGRlbi10ZXh0YXJlYSI+PC90ZXh0YXJlYT4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCI8L2Rpdj4iKSwgci5iKCJcbiIgKyBuKSwgci5iKCc8Zm9vdGVyPjxkaXYgY2xhc3M9ImZvb3Rlci1saW5rcyI+PHNwYW4+PGEgaHJlZj0iIiB0YXJnZXQ9Il9ibGFuayI+PC9hPjwvc3Bhbj48c3Bhbj48YSBocmVmPSIiIHRhcmdldD0iX2JsYW5rIj48L2E+PC9zcGFuPjwvZGl2PjwvZm9vdGVyPicpLCByLmZsKCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwYXJ0aWFsczoge30sCiAgICAgICAgICAgICAgICBzdWJzOiB7fQogICAgICAgICAgICB9KSwgbi5hcnJvdyA9IG5ldyBlLlRlbXBsYXRlKHsKICAgICAgICAgICAgICAgIGNvZGU6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuYihuID0gbiB8fCAiIiksIHIuYignPGJ1dHRvbiBjbGFzcz0iJyksIHIuYihyLnYoci5mKCJidXR0b25DbGFzcyIsIHQsIGUsIDApKSksIHIuYignIj4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCcJPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDE1IDIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIj4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCcJICA8cG9seWdvbiBwb2ludHM9IicpLCByLmIoci52KHIuZigicG9seWdvblBvaW50cyIsIHQsIGUsIDApKSksIHIuYignIiAvPicpLCByLmIoIlxuIiArIG4pLCByLmIoIgk8L3N2Zz4iKSwgci5iKCJcbiIgKyBuKSwgci5iKCI8L2J1dHRvbj4iKSwgci5mbCgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFydGlhbHM6IHt9LAogICAgICAgICAgICAgICAgc3Viczoge30KICAgICAgICAgICAgfSksIG4uY2xvc2UgPSBuZXcgZS5UZW1wbGF0ZSh7CiAgICAgICAgICAgICAgICBjb2RlOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByLmIobiA9IG4gfHwgIiIpLCByLmIoJzxidXR0b24gY2xhc3M9ImJ0bi1jbG9zZSI+JyksIHIuYigiXG4iICsgbiksIHIuYignCTxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNSAyMCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSI+JyksIHIuYigiXG4iICsgbiksIHIuYignCSAgPHBvbHlnb24gcG9pbnRzPSIwLDQgNCwwIDE5LDE1IDE1LDE5ICIvPicpLCByLmIoIlxuIiArIG4pLCByLmIoJwkJPHBvbHlnb24gcG9pbnRzPSIxNSwwIDE5LDQgNCwxOSAwLDE1ICIvPicpLCByLmIoIlxuIiArIG4pLCByLmIoIgk8L3N2Zz4iKSwgci5iKCJcbiIgKyBuKSwgci5iKCI8L2J1dHRvbj4iKSwgci5mbCgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFydGlhbHM6IHt9LAogICAgICAgICAgICAgICAgc3Viczoge30KICAgICAgICAgICAgfSksIG4uaW1hZ2VnYWxsZXJ5ID0gbmV3IGUuVGVtcGxhdGUoewogICAgICAgICAgICAgICAgY29kZTogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciByID0gdGhpczsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5iKG4gPSBuIHx8ICIiKSwgci5iKCc8YnV0dG9uIGNsYXNzPSJidG4tY2xvc2UiPicpLCByLmIoIlxuIiArIG4pLCByLmIoJwk8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgMTUgMjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPicpLCByLmIoIlxuIiArIG4pLCByLmIoJwkJPHBvbHlnb24gcG9pbnRzPSIwLDMgMywwIDE4LDE0IDE0LDE4ICIvPicpLCByLmIoIlxuIiArIG4pLCByLmIoJwkJPHBvbHlnb24gcG9pbnRzPSIxNCwwIDE4LDMgMywxOCAwLDE0ICIvPicpLCByLmIoIlxuIiArIG4pLCByLmIoIgk8L3N2Zz4iKSwgci5iKCJcbiIgKyBuKSwgci5iKCI8L2J1dHRvbj4iKSwgci5iKCJcbiIgKyBuKSwgci5iKCc8ZGl2IGNsYXNzPSJpbWFnZS1nYWxsZXJ5Ij4nKSwgci5iKCJcbiIgKyBuKSwgci5zKHIuZigiaW1hZ2VzIiwgdCwgZSwgMSksIHQsIGUsIDAsIDI3NCwgNDEyLCAie3sgfX0iKSAmJiAoci5ycyh0LCBlLCBmdW5jdGlvbih0LCBlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHIuYignCTxkaXYgY2xhc3M9ImltYWdlLWl0ZW0iPicpLCByLmIoIlxuIiArIG4pLCByLmIoJwkJPGltZyBzcmM9IicpLCByLmIoci52KHIuZigic3JjIiwgdCwgZSwgMCkpKSwgci5iKCciIC8+JyksIHIuYigiXG4iICsgbiksIHIucyhyLmYoImNhcHRpb24iLCB0LCBlLCAxKSwgdCwgZSwgMCwgMzM5LCAzOTAsICJ7eyB9fSIpICYmIChyLnJzKHQsIGUsIGZ1bmN0aW9uKHQsIGUsIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuYignCQkJPGRpdiBjbGFzcz0iaW1hZ2UtY2FwdGlvbiI+JyksIHIuYihyLnYoci5mKCJjYXB0aW9uIiwgdCwgZSwgMCkpKSwgci5iKCI8L2Rpdj4iKSwgci5iKCJcbiIgKyBuKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdC5wb3AoKSksIHIuYigiCTwvZGl2PiIpLCByLmIoIlxuIiArIG4pCiAgICAgICAgICAgICAgICAgICAgfSksIHQucG9wKCkpLCByLmIoIjwvZGl2PiIpLCByLmZsKCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwYXJ0aWFsczoge30sCiAgICAgICAgICAgICAgICBzdWJzOiB7fQogICAgICAgICAgICB9KSwgbi5pbmxpbmVpbWFnZSA9IG5ldyBlLlRlbXBsYXRlKHsKICAgICAgICAgICAgICAgIGNvZGU6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuYihuID0gbiB8fCAiIiksIHIuYignPGRpdiBjbGFzcz0iaW5saW5lLWltYWdlIj48aW1nIHNyYz0iJyksIHIuYihyLnYoci5mKCJpbWFnZSIsIHQsIGUsIDApKSksIHIuYignIiAvPjwvZGl2PicpLCByLmZsKCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwYXJ0aWFsczoge30sCiAgICAgICAgICAgICAgICBzdWJzOiB7fQogICAgICAgICAgICB9KSwgbi5tZW51ID0gbmV3IGUuVGVtcGxhdGUoewogICAgICAgICAgICAgICAgY29kZTogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciByID0gdGhpczsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5iKG4gPSBuIHx8ICIiKSwgci5iKCc8ZGl2IGNsYXNzPSJsaW5lIj4mbmJzcDs8L2Rpdj4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCc8ZGl2IGNsYXNzPSJsaW5lIj4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCI8c3Ryb25nPkNvbW1hbmRzOjwvc3Ryb25nPiIpLCByLmIoIlxuIiArIG4pLCByLmIoIjwvZGl2PiIpLCByLmIoIlxuIiArIG4pLCByLmIoJzxkaXYgY2xhc3M9ImxpbmUiPicpLCByLmIoIlxuIiArIG4pLCByLmIoJwk8ZGl2IGNsYXNzPSJtZW51Ij4nKSwgci5iKCJcbiIgKyBuKSwgci5zKHIuZigiY29tbWFuZHMiLCB0LCBlLCAxKSwgdCwgZSwgMCwgMTM3LCAyMDYsICJ7eyB9fSIpICYmIChyLnJzKHQsIGUsIGZ1bmN0aW9uKHQsIGUsIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgci5zKHIuZigiZGlzcGxheSIsIHQsIGUsIDEpLCB0LCBlLCAwLCAxNTIsIDE5MiwgInt7IH19IikgJiYgKHIucnModCwgZSwgZnVuY3Rpb24odCwgZSwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgci5iKCcJCQk8ZGl2IGNsYXNzPSJsaW5lIj4nKSwgci5iKHIudihyLmYoImxhYmVsIiwgdCwgZSwgMCkpKSwgci5iKCI8L2Rpdj4iKSwgci5iKCJcbiIgKyBuKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdC5wb3AoKSkKICAgICAgICAgICAgICAgICAgICB9KSwgdC5wb3AoKSksIHIuYigiCTwvZGl2PiIpLCByLmIoIlxuIiArIG4pLCByLmIoIjwvZGl2PiIpLCByLmIoIlxuIiArIG4pLCByLmIoJzxkaXYgY2xhc3M9ImxpbmUiPiZuYnNwOzwvZGl2PicpLCByLmZsKCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwYXJ0aWFsczoge30sCiAgICAgICAgICAgICAgICBzdWJzOiB7fQogICAgICAgICAgICB9KSwgbi52aWRlbyA9IG5ldyBlLlRlbXBsYXRlKHsKICAgICAgICAgICAgICAgIGNvZGU6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuYihuID0gbiB8fCAiIiksIHIuYignPGJ1dHRvbiBjbGFzcz0iYnRuLXBsYXkiPjwvYnV0dG9uPicpLCByLmIoIlxuIiArIG4pLCByLmIoJzx2aWRlbyBpZD0icm9ib3QtdmlkZW8iIHdpZHRoPSIxNjAwIiBoZWlnaHQ9IjkwMCIgcHJlbG9hZD0iYXV0byIgYXV0b3BsYXk+JyksIHIuYigiXG4iICsgbiksIHIucyhyLmYoInNvdXJjZXMiLCB0LCBlLCAxKSwgdCwgZSwgMCwgMTIzLCAxNjYsICJ7eyB9fSIpICYmIChyLnJzKHQsIGUsIGZ1bmN0aW9uKHQsIGUsIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgci5iKCcJCTxzb3VyY2Ugc3JjPSInKSwgci5iKHIudihyLmYoInNyYyIsIHQsIGUsIDApKSksIHIuYignIiB0eXBlPSInKSwgci5iKHIudihyLmYoInR5cGUiLCB0LCBlLCAwKSkpLCByLmIoJyI+JyksIHIuYigiXG4iICsgbikKICAgICAgICAgICAgICAgICAgICB9KSwgdC5wb3AoKSksIHIuYigiCVlvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSB2aWRlbyB0YWcuIiksIHIuYigiXG4iICsgbiksIHIuYigiPC92aWRlbz4iKSwgci5mbCgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFydGlhbHM6IHt9LAogICAgICAgICAgICAgICAgc3Viczoge30KICAgICAgICAgICAgfSksIG4KICAgICAgICB9KCkKICAgIH0sIHsKICAgICAgICAiaG9nYW4uanMiOiAxMwogICAgfV0sCiAgICA0OiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICB2YXIgciA9IHQoInEiKSwKICAgICAgICAgICAgaSA9IHQoImxvZGFzaCIpLAogICAgICAgICAgICBvID0gdCgiLi90ZW1wbGF0ZXMiKSwKICAgICAgICAgICAgYSA9IHQoImJhY2tib25lIikuRXZlbnRzLAogICAgICAgICAgICBzID0gdCgiLi9pbnN0cnVjdGlvbnMiKSwKICAgICAgICAgICAgdSA9IHQoIi4vdHJhY2siKSwKICAgICAgICAgICAgYyA9IHQoIi4vdmlld3MvSW1hZ2VHYWxsZXJ5IiksCiAgICAgICAgICAgIGwgPSB0KCIuL3ZpZXdzL0Z1bGxTY3JlZW5WaWRlbyIpLAogICAgICAgICAgICBmID0ge30sCiAgICAgICAgICAgIHAgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBuKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQodCAqIFQsIDEwKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHAodCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gci5kZWZlcigpOwogICAgICAgICAgICAgICAgICAgIHEuaHRtbCh0KSwgZS5yZXNvbHZlKCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBoKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHIuZGVmZXIoKTsKICAgICAgICAgICAgICAgICAgICB0ICYmICIiICE9PSB0ICYmIFAuaHRtbCh0KSwgZS5yZXNvbHZlKCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICIiOwogICAgICAgICAgICAgICAgICAgIHQudGltZSAmJiAoZSArPSBiKCkgKyAiICIpLCB0LnByZWZpeCAmJiAoZSArPSB0LnByZWZpeCArICIgIiksIHQucHJlZml4Q29sb3IgJiYgUC5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdC5wcmVmaXhDb2xvcgogICAgICAgICAgICAgICAgICAgIH0pLCB0LnByZWZpeFdlaWdodCAmJiBQLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6IHQucHJlZml4V2VpZ2h0CiAgICAgICAgICAgICAgICAgICAgfSksIFAudGV4dChlKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGcoKSB7CiAgICAgICAgICAgICAgICAgICAgTi5mb2N1cygpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gdih0KSB7CiAgICAgICAgICAgICAgICAgICAgSSAmJiAodC5wcmV2ZW50RGVmYXVsdCgpLCBnKCkpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24geSh0KSB7CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltRnJhbWUoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuKG8pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBvKysKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG4obikgewogICAgICAgICAgICAgICAgICAgICAgICBxLnRleHQoYSArIHQuc3Vic3RyKDAsIG4rKykpLCB0Lmxlbmd0aCA8PSBuIC0gMSA/IGkucmVzb2x2ZSgpIDogZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBpID0gci5kZWZlcigpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gMSwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHEudGV4dCgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlKCksIGkucHJvbWlzZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG0oKSB7CiAgICAgICAgICAgICAgICAgICAgQS5zY3JvbGxUb3AoUy5vdXRlckhlaWdodCgpIC0gQS5vdXRlckhlaWdodCgpKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGIoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBuZXcgRGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgZSA9ICh0LmdldEhvdXJzKCkgPCAxMCA/ICIwIiA6ICIiKSArIHQuZ2V0SG91cnMoKSwKICAgICAgICAgICAgICAgICAgICAgICAgbiA9ICh0LmdldE1pbnV0ZXMoKSA8IDEwID8gIjAiIDogIiIpICsgdC5nZXRNaW51dGVzKCksCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlICsgIjoiICsgbjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHgoKSB7CiAgICAgICAgICAgICAgICAgICAgbSgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgdyA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIgPSBlLCB0aGlzLmhhc0luaXRpYWxpemVkID0gITEsIHRoaXMuZmlyc3RCb290ID0gITA7CiAgICAgICAgICAgICAgICB2YXIgXyA9IFJFRElSRUNUID8gIi9tZW51IiA6ICIvIiwKICAgICAgICAgICAgICAgICAgICBrID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGVhclRpbWVvdXRzKCksIHRoaXMuY2xlYXIoKSwgdGhpcy5jbGVhclBvcHVwcygpLCBsb2coIlJPVVRFOiIsIHQpLCBSRURJUkVDVCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCIiID09PSB0IHx8ICJsaXZlIiA9PT0gdCkgcmV0dXJuIHZvaWQod2luZG93LmxvY2F0aW9uLmhyZWYgPSBCQVNFX1VSTCArICIvbGl2ZS8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgibWVudSIgIT09IHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIHNbdF0pIHJldHVybiB2b2lkKHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gQkFTRV9VUkwgKyAiL2xpdmUvIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydChzW3RdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHRoaXMuZmlyc3RCb290ID8gKHRoaXMuZmlyc3RCb290ID0gITEsIHRoaXMudHJhY2sub21uaSgiRW1haWwgU2lnbi1VcCIsICJMb2FkaW5nIFNlcXVlbmNlIiksIHRoaXMuc3RhcnQocy5pbml0aWFsKSkgOiB0aGlzLnN0YXJ0KHMubWVudVByb21wdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgiIiAhPT0gdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJ1bmRlZmluZWQiID09IHR5cGVvZiBzW3RdKSByZXR1cm4gdm9pZCh3aW5kb3cubG9jYXRpb24uaHJlZiA9IEJBU0VfVVJMKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQoc1t0XSkKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgibGl2ZSIgPT09IHQpIHJldHVybiB2b2lkKHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gQkFTRV9VUkwgKyAiL2xpdmUvIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcnN0Qm9vdCA/ICh0aGlzLmZpcnN0Qm9vdCA9ICExLCB0aGlzLnRyYWNrLm9tbmkoIkVtYWlsIFNpZ24tVXAiLCAiTG9hZGluZyBTZXF1ZW5jZSIpLCB0aGlzLnN0YXJ0KHMuaW5pdGlhbCkpIDogdGhpcy5zdGFydChzLm1lbnVQcm9tcHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZ2EoInNlbmQiLCAicGFnZXZpZXciLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiAiLyIgKyB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLAogICAgICAgICAgICAgICAgICAgIFQgPSAuMzsKICAgICAgICAgICAgICAgIGkuZXh0ZW5kKHRoaXMsIGEpOwogICAgICAgICAgICAgICAgdmFyIEUsIGogPSAkKHdpbmRvdyksCiAgICAgICAgICAgICAgICAgICAgQyA9ICQoZG9jdW1lbnQpLAogICAgICAgICAgICAgICAgICAgIFMgPSB0LAogICAgICAgICAgICAgICAgICAgIEEgPSAkKCIudGVybWluYWwtd3JhcHBlciIpLAogICAgICAgICAgICAgICAgICAgIE4gPSAkKCIjaGlkZGVuLXRleHRhcmVhIiksCiAgICAgICAgICAgICAgICAgICAgUiA9IDAsCiAgICAgICAgICAgICAgICAgICAgSSA9ICExLAogICAgICAgICAgICAgICAgICAgIE8gPSB7fSwKICAgICAgICAgICAgICAgICAgICBMID0gW107CiAgICAgICAgICAgICAgICB0aGlzLnRyYWNrID0gbmV3IHU7CiAgICAgICAgICAgICAgICB2YXIgRCA9ICQoIjxzcGFuIC8+IikuYWRkQ2xhc3MoInByb21wdCIpLmh0bWwoIiZuYnNwOyIpLAogICAgICAgICAgICAgICAgICAgIFAgPSAkKCI8c3BhbiAvPiIpLmFkZENsYXNzKCJwcmVmaXgiKSwKICAgICAgICAgICAgICAgICAgICBxID0gJCgiPHNwYW4gLz4iKS5hZGRDbGFzcygiaW5wdXQiKSwKICAgICAgICAgICAgICAgICAgICBIID0gJCgiPGRpdiAvPiIpLmFkZENsYXNzKCJsaW5lIik7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ydW5FeGl0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhcigpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmFwcGVuZCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBTLmFwcGVuZCh0KQogICAgICAgICAgICAgICAgfSwgdGhpcy5jbGVhclRpbWVvdXRzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclRpbWVvdXQodGhpcy5pdGVtVGltZW91dCksIHRoaXMuY2xlYXJUaW1lb3V0KHRoaXMudHlwZVRpbWVvdXQpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmNsZWFyVGltZW91dCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAibnVtYmVyIiA9PSB0eXBlb2YgdCAmJiB3aW5kb3cuY2xlYXJUaW1lb3V0KHQpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmNoYW5nZUluc3RydWN0aW9ucyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyVGltZW91dHMoKSwgdGhpcy5jbGVhcigpLCB0aGlzLmNsZWFyUG9wdXBzKCksIHRoaXMuc3RhcnQoc1t0XSkKICAgICAgICAgICAgICAgIH0sIHRoaXMub24oImV4aXQiLCB0aGlzLnJ1bkV4aXQuYmluZCh0aGlzKSksIHRoaXMub24oImluc3RydWN0aW9uczpjaGFuZ2UiLCB0aGlzLmNoYW5nZUluc3RydWN0aW9ucyksIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTGlzdGVuZXJzKCksIHRoaXMuY2xlYXIoKSwgdGhpcy5oYXNJbml0aWFsaXplZCA9ICEwCiAgICAgICAgICAgICAgICB9LCB0aGlzLnN0YXJ0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIFIgPSAwLCBFID0gdCwgdGhpcy5ydW4oKQogICAgICAgICAgICAgICAgfSwgdGhpcy5ydW4gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IEVbUl07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ydW5JdGVtKHQpCiAgICAgICAgICAgICAgICB9LCB0aGlzLnJ1bkl0ZW0gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIHQgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgdGhpc1t0LnR5cGVdICYmICh0aGlzLml0ZW1UaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbdC50eXBlXSh0KQogICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgbih0LmRlbGF5KSkpCiAgICAgICAgICAgICAgICB9LCB0aGlzLm1lbnVPcHRpb25zID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIE8gPSB0Lm9wdGlvbnMsIHRoaXMuZGlzcGxheU1lbnUoKSwgdGhpcy5uZXh0SXRlbSgpCiAgICAgICAgICAgICAgICB9LCB0aGlzLnR5cGVkVGV4dCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB0LmNsZWFyICYmIHRoaXMuY2xlYXIoKSwgdC5wbGF5U291bmQgJiYgY3JlYXRlanMuU291bmQucGxheSh0LnBsYXlTb3VuZCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAwOwogICAgICAgICAgICAgICAgICAgIHQucHJlZml4ICYmIChoKGQodCkpLCBlID0gMTIwMCksIHRoaXMudHlwZVRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgeSh0LmNvbnRlbnQpLnRoZW4odGhpcy5oYW5kbGVUeXBpbmcuYmluZCh0aGlzKSkKICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIGUpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmltYWdlR2FsbGVyeSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBELnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IGMoewogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZXM6IHQuaW1hZ2VzLAogICAgICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5TmFtZTogdC5nYWxsZXJ5TmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2s6IHQudHJhY2sKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB3LnB1c2goZSksIGUuJGVsLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAKICAgICAgICAgICAgICAgICAgICB9KSwgZS5vbigibG9hZGVkIiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUuJGVsLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSksIGUub24oImNsb3NlZCIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU5ld0xpbmUoKSwgdGhpcy5uZXh0SXRlbSgpLCB0aGlzLnJvdXRlci5uYXZpZ2F0ZShfLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAhMAogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSksICQoIiNhcHAiKS5hcHBlbmQoZS5yZW5kZXIoKS5hZGRMaXN0ZW5lcnMoKS4kZWwpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmhhbmRsZVR5cGluZyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICJjb250aW51ZVR5cGVkVGV4dCIgPT09IEVbUiArIDFdLnR5cGUgPyB0aGlzLm5leHRJdGVtKCkgOiAodGhpcy5oYW5kbGVOZXdMaW5lKCksIHRoaXMubmV4dEl0ZW0oKSkKICAgICAgICAgICAgICAgIH0sIHRoaXMuY2xlYXJQb3B1cHMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMCwgZSA9IHcubGVuZ3RoOyBlID4gdDsgdCsrKSB3W3RdLnJlbW92ZUVsKCkKICAgICAgICAgICAgICAgIH0sIHRoaXMuYmFja2JvbmVWaWV3ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IGZbdC52aWV3XSh0Lm9wdGlvbnMpOwogICAgICAgICAgICAgICAgICAgIHcucHVzaChlKSwgZS5vbigiY2xvc2VkIiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTmV3TGluZSgpLCB0aGlzLm5leHRJdGVtKCksIHRoaXMucm91dGVyLm5hdmlnYXRlKF8sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKSwgJCgiI2FwcCIpLmFwcGVuZChlLnJlbmRlcigpLmFkZExpc3RlbmVycygpLiRlbCkKICAgICAgICAgICAgICAgIH0sIHRoaXMuZnVsbHNjcmVlblZpZGVvID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIEQucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBuZXcgbCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvTmFtZTogdC52aWRlb05hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IHQuc291cmNlcywKICAgICAgICAgICAgICAgICAgICAgICAgY292ZXI6IHQuY292ZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrOiB0LnRyYWNrCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdy5wdXNoKGUpLCBlLm9uKCJlbmRlZCIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU5ld0xpbmUoKSwgdGhpcy5uZXh0SXRlbSgpCiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKSwgJCgiI2FwcCIpLmFwcGVuZChlLnJlbmRlcigpLmFkZExpc3RlbmVycygpLiRlbCksIGUucGxheSgpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmNvbnRpbnVlVHlwZWRUZXh0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHQubmV3bGluZSAmJiB0aGlzLmhhbmRsZU5ld0xpbmUoKSwgeSgiICIgKyB0LmNvbnRlbnQpLnRoZW4odGhpcy5oYW5kbGVUeXBpbmcuYmluZCh0aGlzKSkKICAgICAgICAgICAgICAgIH0sIHRoaXMuYmFzaWNUZXh0ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHQuY2xlYXIgJiYgdGhpcy5jbGVhcigpLCB0LnRyYWNrICYmIHRoaXMudHJhY2sub21uaSh2b2lkIDAsIHZvaWQgMCwgdC50cmFjayksIGgoZCh0KSksIHAodC5jb250ZW50KSwgdC5jbGFzc05hbWUgJiYgcS5hZGRDbGFzcyh0LmNsYXNzTmFtZSksIHQuY29sb3IgJiYgcS5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdC5jb2xvcgogICAgICAgICAgICAgICAgICAgIH0pLCB0LnBsYXlTb3VuZCAmJiBjcmVhdGVqcy5Tb3VuZC5wbGF5KHQucGxheVNvdW5kKSwgdGhpcy5oYW5kbGVOZXdMaW5lKCksIHEucmVtb3ZlQ2xhc3ModC5jbGFzc05hbWUpLCBlIHx8IHRoaXMubmV4dEl0ZW0oKQogICAgICAgICAgICAgICAgfSwgdGhpcy5pbmxpbmVJbWFnZSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB0LmNsZWFyICYmIHRoaXMuY2xlYXIoKSwgdC50cmFjayAmJiB0aGlzLnRyYWNrLm9tbmkodm9pZCAwLCB2b2lkIDAsIHQudHJhY2spOwogICAgICAgICAgICAgICAgICAgIHZhciBuID0gbmV3IEltYWdlOwogICAgICAgICAgICAgICAgICAgIG4ub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG0oKQogICAgICAgICAgICAgICAgICAgIH0sIG4uc3JjID0gdC5jb250ZW50LCBwKG8uaW5saW5laW1hZ2UucmVuZGVyKHsKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IHQuY29udGVudAogICAgICAgICAgICAgICAgICAgIH0pKSwgdC5jbGFzc05hbWUgJiYgcS5hZGRDbGFzcyh0LmNsYXNzTmFtZSksIHQuY29sb3IgJiYgcS5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdC5jb2xvcgogICAgICAgICAgICAgICAgICAgIH0pLCB0LnBsYXlTb3VuZCAmJiBjcmVhdGVqcy5Tb3VuZC5wbGF5KHQucGxheVNvdW5kKSwgdGhpcy5oYW5kbGVOZXdMaW5lKCksIHEucmVtb3ZlQ2xhc3ModC5jbGFzc05hbWUpLCBtKCksIGUgfHwgdGhpcy5uZXh0SXRlbSgpCiAgICAgICAgICAgICAgICB9LCB0aGlzLnVzZXJQcm9tcHQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgaChkKHQpKSwgdGhpcy5wcm9tcHQodC5vcHRpb25zKQogICAgICAgICAgICAgICAgfSwgdGhpcy5lbWFpbFByb21wdCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBoKGQodCkpLCBnKCksIEkgPSAhMAogICAgICAgICAgICAgICAgfSwgdGhpcy5uZXh0SXRlbSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIFIrKywgdGhpcy5ydW4oKQogICAgICAgICAgICAgICAgfSwgdGhpcy5jbGVhciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIFMuZW1wdHkoKSwgdGhpcy5zdGFydExpbmUoKQogICAgICAgICAgICAgICAgfSwgdGhpcy5zdGFydExpbmUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBILmFwcGVuZChQKS5hcHBlbmQocSkuYXBwZW5kKEQpLCBTLmFwcGVuZChIKQogICAgICAgICAgICAgICAgfSwgdGhpcy5wcm9tcHQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgTyA9IHQsIEkgPSAhMCwgZygpCiAgICAgICAgICAgICAgICB9LCB0aGlzLnN1Ym1pdCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIEkgPSAhMSwgdGhpcy5oYW5kbGVOZXdMaW5lKCksIE4uYmx1cigpLCAiZW1haWxQcm9tcHQiID09PSBFW1JdLnR5cGUgPyB0aGlzLmludGVycHJldEVtYWlsKExbTC5sZW5ndGggLSAxXS5pbnB1dCkgOiB0aGlzLmludGVycHJldChMW0wubGVuZ3RoIC0gMV0uaW5wdXQpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmhhbmRsZU5ld0xpbmUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlQ29tbWFuZCgpLCBxLmVtcHR5KCkuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICJpbmhlcml0IgogICAgICAgICAgICAgICAgICAgIH0pLCBQLmVtcHR5KCkuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICJpbmhlcml0IgogICAgICAgICAgICAgICAgICAgIH0pLCBOLnZhbCgiIiksIHRoaXMuc3RhcnRMaW5lKCksIG0oKQogICAgICAgICAgICAgICAgfSwgdGhpcy5pbnRlcnByZXQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IDAsIG4gPSBPLmNvbW1hbmRzLmxlbmd0aDsgbiA+IGU7IGUrKykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQubWF0Y2goTy5jb21tYW5kc1tlXS5yZWdleCkpIHJldHVybiBjcmVhdGVqcy5Tb3VuZC5wbGF5KCJpbml0IiksIE8uY29tbWFuZHNbZV0ubmF2aWdhdGUgJiYgdGhpcy5yb3V0ZXIubmF2aWdhdGUoIi8iICsgdCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSksIE8uY29tbWFuZHNbZV0ub25zZWxlY3QuY2FsbCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5RXJyb3IoKQogICAgICAgICAgICAgICAgfSwgdGhpcy5pbnRlcnByZXRFbWFpbCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoImVtYWlsOnN1Ym1pdCIsIHQpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmRpc3BsYXlNZW51ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgRC5yZW1vdmUoKSwgdGhpcy5zdG9yZUNvbW1hbmQoKSwgdGhpcy5iYXNpY1RleHQoewogICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBvLm1lbnUucmVuZGVyKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmRzOiBPLmNvbW1hbmRzCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSwgITApCiAgICAgICAgICAgICAgICB9LCB0aGlzLmRpc3BsYXlFcnJvciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTmV3TGluZSgpLCBjcmVhdGVqcy5Tb3VuZC5wbGF5KCJpbmNvcnJlY3QiKSwgcS50ZXh0KCJFcnJvcjogQ29tbWFuZCBub3QgcmVjb2duaXplZC4gVHlwZSBoZWxwIGZvciBhIGxpc3Qgb2YgY29tbWFuZHMuIikuYWRkQ2xhc3MoImVycm9yIiksIHRoaXMuaGFuZGxlTmV3TGluZSgpLCB0aGlzLnJ1bigpCiAgICAgICAgICAgICAgICB9LCB0aGlzLnN0b3JlQ29tbWFuZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIEQucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBILmNsb25lKCk7CiAgICAgICAgICAgICAgICAgICAgUy5hcHBlbmQodCksIEwucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBxLnRleHQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgZWw6IHQKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgdGhpcy5hZGRMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBDLm9uKCJrZXlkb3duIiwgdGhpcy5rZXlkb3duSGFuZGxlci5iaW5kKHRoaXMpKSwgQy5vbigia2V5dXAiLCB0aGlzLmtleXVwSGFuZGxlci5iaW5kKHRoaXMpKSwgQy5vbigiY2xpY2siLCB2KSwgQy5vbigidG91Y2hzdGFydCIsICIubGluZTpsYXN0IiwgdiksIGoub24oInJlc2l6ZSIsIHgpLCBOLm9uKCJpbnB1dCIsIHRoaXMuaGFuZGxlVGV4dElucHV0KQogICAgICAgICAgICAgICAgfSwgdGhpcy5rZXlkb3duSGFuZGxlciA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQua2V5Q29kZSA/IHQua2V5Q29kZSA6IHQud2hpY2g7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEzID09PSBlID8gKHQucHJldmVudERlZmF1bHQoKSwgdm9pZCB0aGlzLnN1Ym1pdCgpKSA6IHZvaWQgMAogICAgICAgICAgICAgICAgfSwgdGhpcy5rZXl1cEhhbmRsZXIgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0LmtleUNvZGUgPyB0LmtleUNvZGUgOiB0LndoaWNoOwogICAgICAgICAgICAgICAgICAgICg4ID09PSBlIHx8IDQ2ID09PSBlKSAmJiB0aGlzLmhhbmRsZVRleHRJbnB1dCgpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmhhbmRsZVRleHRJbnB1dCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIEkgJiYgcS50ZXh0KE4udmFsKCkpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmJhY2tzcGFjZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGlmIChJKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gcS50ZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHEudGV4dCh0LnN1YnN0cmluZygwLCB0Lmxlbmd0aCAtIDEpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIHRoaXMuaW5pdCgpLCB0aGlzLnJvdXRlci5vbigicm91dGUiLCBrKSwgdGhpcwogICAgICAgICAgICB9OwogICAgICAgIGUuZXhwb3J0cyA9IHAKICAgIH0sIHsKICAgICAgICAiLi9pbnN0cnVjdGlvbnMiOiAyLAogICAgICAgICIuL3RlbXBsYXRlcyI6IDMsCiAgICAgICAgIi4vdHJhY2siOiA1LAogICAgICAgICIuL3ZpZXdzL0Z1bGxTY3JlZW5WaWRlbyI6IDcsCiAgICAgICAgIi4vdmlld3MvSW1hZ2VHYWxsZXJ5IjogOCwKICAgICAgICBiYWNrYm9uZTogOSwKICAgICAgICBsb2Rhc2g6IDE2LAogICAgICAgIHE6IDE3CiAgICB9XSwKICAgIDU6IFtmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgInVzZSBzdHJpY3QiOwogICAgICAgIHZhciByID0gdCgibG9kYXNoIiksCiAgICAgICAgICAgIGkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHRoaXMub21uaSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm51bGxpZnkoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9ICJNci4gUm9ib3QiLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gIldobyBJcyBNci4gUm9ib3QiLAogICAgICAgICAgICAgICAgICAgICAgICBhID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCwgZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IChpICsgIiA6ICIgKyBvICsgIiA6ICIgKyBlLmpvaW4oIiA6ICIpKS5yZXBsYWNlKC9cIDogJC8sICIiKQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHMucGFnZU5hbWUgPSBhKHQsIGUpLCBzLnByb3AyID0gIkRyYW1hIiwgcy5wcm9wMyA9ICJGZWF0dXJlcyIsIHMucHJvcDQgPSBpICsgIiA6ICIgKyBvLCBzLnByb3A1ID0gaSArICIgOiAiICsgbyArICIgOiAiICsgdCwgcy5wcm9wOCA9ICJDYWJsZSIsIHMucHJvcDkgPSAiVVNBIE5ldHdvcmsiLCBzLnByb3AxMCA9IGksIHMucHJvcDMyID0gIk5ldyBTaXRlIiwgcy5wcm9wNjAgPSAiTm90IFNwb25zb3JlZCIsICgiRlNvY2lldHkgR2FsbGVyeSIgPT09IHQgfHwgIjQyMCBIaWRkZW4gSW1hZ2UiID09PSB0KSAmJiAocy5wcm9wMyA9ICJHYWxsZXJ5IiksICJ1bmRlZmluZWQiICE9IHR5cGVvZiBuICYmIHIuZXh0ZW5kKHMsIG4pLCBlID8gKCJWaWRlbyIgPT09IGUuc3ViU2VjdGlvbiAmJiAocy5wcm9wMyA9ICJWaWRlbyIpLCAtMSAhPT0gZS5pbmRleE9mKCJBbnN3ZXIiKSA/IChzLmxpbmtUcmFja1ZhcnMgPSAiZXZlbnRzLGV2ZW50Nixwcm9wNTksZVZhcjU5Iiwgcy5saW5rVHJhY2tFdmVudHMgPSAiZXZlbnQ2LGV2ZW50ODkiLCBzLmV2ZW50cyA9ICJldmVudDYsZXZlbnQ4OSIsIHMucHJvcDU5ID0gcy5lVmFyNTkgPSB0ICsgIiA6ICIgKyBlLCBzLnQocywgIm8iLCAiQW5zd2VyIikpIDogLTEgIT09IGUuaW5kZXhPZigiUXVlc3Rpb24iKSA/IChzLmxpbmtUcmFja1ZhcnMgPSAiZXZlbnRzLGV2ZW50Nixwcm9wNTgsZVZhcjU4Iiwgcy5saW5rVHJhY2tFdmVudHMgPSAiZXZlbnQ2LGV2ZW50ODgiLCBzLmV2ZW50cyA9ICJldmVudDYsZXZlbnQ4OCIsIHMucHJvcDU4ID0gcy5lVmFyNTggPSB0ICsgIiA6ICIgKyBlLCBzLnQocywgIm8iLCAiUG9sbCIpKSA6IC0xICE9PSBlLmluZGV4T2YoIlZpZXcgUHJvZ3Jlc3MiKSA/IChzLnBhZ2VOYW1lID0gaSArICIgOiAiICsgbyArICIgOiBWaWV3IFByb2dyZXNzIiwgcy50cmFjayhzLCAibyIsIHMucGFnZU5hbWUpKSA6IHMudHJhY2socywgIm8iLCBzLnBhZ2VOYW1lKSkgOiBzLnRyYWNrKHMsICJvIiwgcy5wYWdlTmFtZSksIGxvZyhzLCBzLnBhZ2VOYW1lLCBzLnByb3AzLCBzLnByb3A0LCBzLnByb3A1KQogICAgICAgICAgICAgICAgfSwgdGhpcy5jbGljayA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm51bGxpZnkoKSwgcy5saW5rVHJhY2tWYXJzID0gImV2ZW50cyxlVmFyNjUscHJvcDY1Iiwgcy5saW5rVHJhY2tFdmVudHMgPSAiZXZlbnQ2NSIsIHMuZXZlbnRzID0gImV2ZW50NjUiLCBzLmVWYXI2NSA9IHMucHJvcDY1ID0gdCwgcy50bCh0aGlzLCAibyIsICJQYWdlIEl0ZW0gQ2xpY2siKSwgcy5tYW5hZ2VWYXJzKCJjbGVhclZhcnMiLCBzLmxpbmtUcmFja1ZhcnMsIDEpCiAgICAgICAgICAgICAgICB9LCB0aGlzLm51bGxpZnkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBzLnBhZ2VOYW1lID0gIiIsIHMucHJvcDIgPSAiIiwgcy5wcm9wMyA9ICIiLCBzLnByb3A0ID0gIiIsIHMucHJvcDUgPSAiIiwgcy5wcm9wOCA9ICIiLCBzLnByb3A5ID0gIiIsIHMucHJvcDEwID0gIiIsIHMucHJvcDMxID0gIiIsIHMucHJvcDMyID0gIiIsIHMucHJvcDU4ID0gIiIsIHMucHJvcDU5ID0gIiIsIHMucHJvcDYwID0gIiIsIHMuZVZhcjU4ID0gIiIsIHMuZVZhcjU5ID0gIiIsIHMuZVZhcjczID0gIiIsIHMuZVZhcjc0ID0gIiIsIHMuZXZlbnRzID0gIiIsIHMubGlua1RyYWNrVmFycyA9ICJOb25lIiwgcy5saW5rVHJhY2tFdmVudHMgPSAiTm9uZSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICBlLmV4cG9ydHMgPSBpCiAgICB9LCB7CiAgICAgICAgbG9kYXNoOiAxNgogICAgfV0sCiAgICA2OiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICB2YXIgciA9IHQoImxvZGFzaCIpLAogICAgICAgICAgICBpID0gdCgiYmFja2JvbmUiKSwKICAgICAgICAgICAgbyA9IHQoIi4uL3RlbXBsYXRlcyIpLAogICAgICAgICAgICBhID0gdCgiLi4vdGVybWluYWwiKSwKICAgICAgICAgICAgcyA9IHQoIi4uL2luc3RydWN0aW9ucyIpLAogICAgICAgICAgICB1ID0gdCgic3VwZXJhZ2VudCIpOwogICAgICAgIGkuJCA9ICQ7CiAgICAgICAgdmFyIGMgPSBpLlJvdXRlci5leHRlbmQoewogICAgICAgICAgICAgICAgcm91dGVzOiB7CiAgICAgICAgICAgICAgICAgICAgIiI6ICIiLAogICAgICAgICAgICAgICAgICAgIGluZm9ybTogImluZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgNDIwOiAiNDIwIiwKICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbjogInF1ZXN0aW9uIiwKICAgICAgICAgICAgICAgICAgICB3YWtldXA6ICJ3YWtldXAiLAogICAgICAgICAgICAgICAgICAgIGpvaW46ICJqb2luIiwKICAgICAgICAgICAgICAgICAgICBwcmVwYXJlOiAicHJlcGFyZSIsCiAgICAgICAgICAgICAgICAgICAgZnNvY2lldHk6ICJmc29jaWV0eSIsCiAgICAgICAgICAgICAgICAgICAgbWVudTogIm1lbnUiLAogICAgICAgICAgICAgICAgICAgICIqcGF0aCI6ICJkZWZhdWx0IgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgbCA9IGkuVmlldy5leHRlbmQoewogICAgICAgICAgICAgICAgdGVtcGxhdGU6IG8uYXBwLAogICAgICAgICAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgci5iaW5kQWxsKHRoaXMpLCB0aGlzLnJvdXRlciA9IG5ldyBjLCB0aGlzLnJlbmRlcigpLCB0aGlzLnByZXBhcmVTb3VuZHMoKSwgdGhpcy50ZXJtaW5hbCA9IG5ldyBhKHRoaXMuJCgiLnRlcm1pbmFsLWNvbnRlbnQiKSwgdGhpcy5yb3V0ZXIpLCB0aGlzLmFkZEhhbmRsZXJzKCksIGkuaGlzdG9yeS5zdGFydCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hTdGF0ZTogITAKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHByZXBhcmVTb3VuZHM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNyZWF0ZWpzLlNvdW5kLmluaXRpYWxpemVEZWZhdWx0UGx1Z2lucygpIHx8IGxvZygibm8gc291bmRzIik7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAiL2F1ZGlvLyIsCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBbewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiAiaHVtX2xvb3Aub2dnIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiaHVtIgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM6ICJiZWVwMi5vZ2ciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICJpbmNvcnJlY3QiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogImJlZXAub2dnIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiaW5pdCIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiAidHlwZS5vZ2ciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICJ0eXBlIgogICAgICAgICAgICAgICAgICAgICAgICB9XTsKICAgICAgICAgICAgICAgICAgICBjcmVhdGVqcy5Tb3VuZC5hbHRlcm5hdGVFeHRlbnNpb25zID0gWyJtcDMiXSwgY3JlYXRlanMuU291bmQucmVnaXN0ZXJTb3VuZHMoZSwgdCksIGNyZWF0ZWpzLlNvdW5kLnNldFZvbHVtZSguNCksICQod2luZG93KS5vbigiY2xpY2sgdG91Y2hzdGFydCBrZXlkb3duIGtleXByZXNzIiwgdGhpcy5pbml0QXVkaW8pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdEF1ZGlvOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGNyZWF0ZWpzLlNvdW5kLnBsYXkoImh1bSIpOwogICAgICAgICAgICAgICAgICAgIHQucGF1c2UoKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFkZEhhbmRsZXJzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRlcm1pbmFsLm9uKCJ2aWRlbzpwbGF5IiwgdGhpcy5zdGFydFZpZGVvKSwgdGhpcy50ZXJtaW5hbC5vbigiZW1haWw6c3VibWl0IiwgdGhpcy5zdWJtaXRFbWFpbCksIHRoaXMudGVybWluYWwuY2xlYXIoKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHN1Ym1pdEVtYWlsOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gL14oKFtePD4oKVtcXVxcLiw7OlxzQFwiXSsoXC5bXjw+KClbXF1cXC4sOzpcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxbWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfVxdKXwoKFthLXpBLVpcLTAtOV0rXC4pK1thLXpBLVpdezIsfSkpJC87CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnRlc3QodCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZSh0KSA/IHRoaXMucG9zdEVtYWlsKHQpIDogdGhpcy5oYW5kbGVFbWFpbEVycm9yKCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBoYW5kbGVFbWFpbEVycm9yOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRlcm1pbmFsLnN0YXJ0KHMuZW1haWxFcnJvcikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwb3N0RW1haWw6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB1LnBvc3QoIiIpLnR5cGUoImZvcm0iKS5zZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHQKICAgICAgICAgICAgICAgICAgICB9KS5lbmQodGhpcy5oYW5kbGVFbWFpbFJlc3BvbnNlKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGhhbmRsZUVtYWlsUmVzcG9uc2U6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAvLyJlcnJvciIgPT09IHQuYm9keS50eXBlID8gdGhpcy5oYW5kbGVFbWFpbEVycm9yKCkgOiB0aGlzLmhhbmRsZUVtYWlsU3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXJtaW5hbC5zdGFydChzLmVtYWlsU3VjY2VzcykKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBoYW5kbGVFbWFpbFN1Y2Nlc3M6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudGVybWluYWwuc3RhcnQocy5lbWFpbFN1Y2Nlc3MpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUucmVuZGVyKCkpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIGUuZXhwb3J0cyA9IGwKICAgIH0sIHsKICAgICAgICAiLi4vaW5zdHJ1Y3Rpb25zIjogMiwKICAgICAgICAiLi4vdGVtcGxhdGVzIjogMywKICAgICAgICAiLi4vdGVybWluYWwiOiA0LAogICAgICAgIGJhY2tib25lOiA5LAogICAgICAgIGxvZGFzaDogMTYsCiAgICAgICAgc3VwZXJhZ2VudDogMTgKICAgIH1dLAogICAgNzogW2Z1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgdmFyIHIgPSB0KCJsb2Rhc2giKSwKICAgICAgICAgICAgaSA9IHQoImJhY2tib25lIiksCiAgICAgICAgICAgIG8gPSB0KCIuLi90ZW1wbGF0ZXMiKSwKICAgICAgICAgICAgYSA9IHQoIi4uL3RyYWNrIiksCiAgICAgICAgICAgIHMgPSBuZXcgYTsKICAgICAgICBpLiQgPSAkOwogICAgICAgIHZhciB1ID0gJCh3aW5kb3cpLAogICAgICAgICAgICBjID0gaS5WaWV3LmV4dGVuZCh7CiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJ2aWRlby1jb250YWluZXIiLAogICAgICAgICAgICAgICAgdGVtcGxhdGU6IG8udmlkZW8sCiAgICAgICAgICAgICAgICBldmVudHM6IHsKICAgICAgICAgICAgICAgICAgICAiY2xpY2sgdmlkZW8iOiAicGxheSIsCiAgICAgICAgICAgICAgICAgICAgImNsaWNrIC5idG4tcGxheSI6ICJwbGF5IgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByLmJpbmRBbGwodGhpcyksIHIuZXh0ZW5kKHRoaXMsIHQpLCByLmV4dGVuZCh0aGlzLCBpLkV2ZW50cyksIHMub21uaSh0aGlzLnZpZGVvTmFtZSwgdm9pZCAwLCB0aGlzLnRyYWNrKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uVmlkZW9FbmQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXJzKCksIHRoaXMudHJpZ2dlcigiZW5kZWQiKSwgdGhpcy5yZW1vdmVFbCgpLCBzLm9tbmkoIkhlbHAiKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlbW92ZUVsOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVycygpLCB0aGlzLnVuYmluZCgpLCB0aGlzLnJlbW92ZSgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXJzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiQoInZpZGVvIikub2ZmKCJlbmRlZCIsIHRoaXMub25WaWRlb0VuZCksIHUub2ZmKCJyZXNpemUiLCB0aGlzLmhhbmRsZVJlc2l6ZSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwbGF5OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kKCJ2aWRlbyIpWzBdLnBsYXkoKSwgdGhpcwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFkZExpc3RlbmVyczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJCgidmlkZW8iKS5vbigiZW5kZWQiLCB0aGlzLm9uVmlkZW9FbmQpLCB0aGlzLiQoInZpZGVvIikub24oInBsYXkiLCB0aGlzLnJlbW92ZVBsYXlCdXR0b24pLCB1Lm9uKCJyZXNpemUiLCB0aGlzLmhhbmRsZVJlc2l6ZSksIHRoaXMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZW1vdmVQbGF5QnV0dG9uOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiQoImJ1dHRvbi5idG4tcGxheSIpLnJlbW92ZSgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaGFuZGxlUmVzaXplOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHUud2lkdGgoKSwKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHUuaGVpZ2h0KCksCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0LAogICAgICAgICAgICAgICAgICAgICAgICByID0gZSwKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHQgLyBlLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gdGhpcy5hc3BlY3RSYXRpbyB8fCAxNiAvIDk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3ZlciA/IGkgPiBvID8gKHIgPSB0ICogKDEgLyBvKSwgdGhpcy4kZWwuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogciwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAtKChyIC0gZSkgLyAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMAogICAgICAgICAgICAgICAgICAgIH0pKSA6IChuID0gZSAqIG8sIHRoaXMuJGVsLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBuLAogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IC0oKG4gLSB0KSAvIDIpLAogICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDAKICAgICAgICAgICAgICAgICAgICB9KSkgOiBpID4gbyA/IHRoaXMuJGVsLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogZSwKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGUgKiBvLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAiNTAlIiwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAiNTAlIiwKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogLShlICogbyAvIDIpLAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6IC0oZSAvIDIpCiAgICAgICAgICAgICAgICAgICAgfSkgOiB0aGlzLiRlbC5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogdCwKICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0ICogKDEgLyBvKSwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogIjUwJSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogIjUwJSIsCiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IC0odCAvIDIpLAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6IC0odCAqICgxIC8gbykgLyAyKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlLnJlbmRlcih7CiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IHRoaXMuc291cmNlcwogICAgICAgICAgICAgICAgICAgIH0pKSwgdGhpcy5oYW5kbGVSZXNpemUoKSwgdGhpcy4kZWwuZmFkZUluKCksIHRoaXMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgZS5leHBvcnRzID0gYwogICAgfSwgewogICAgICAgICIuLi90ZW1wbGF0ZXMiOiAzLAogICAgICAgICIuLi90cmFjayI6IDUsCiAgICAgICAgYmFja2JvbmU6IDksCiAgICAgICAgbG9kYXNoOiAxNgogICAgfV0sCiAgICA4OiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICB2YXIgciA9IHQoImxvZGFzaCIpLAogICAgICAgICAgICBpID0gdCgiYmFja2JvbmUiKSwKICAgICAgICAgICAgbyA9IHQoIi4uL3RlbXBsYXRlcyIpLAogICAgICAgICAgICBhID0gdCgiLi4vdHJhY2siKSwKICAgICAgICAgICAgcyA9IG5ldyBhOwogICAgICAgICQuZm4uY29udGFpbmlmeSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgdCA9IHRoaXMucGFyZW50KCksCiAgICAgICAgICAgICAgICBlID0gdGhpcywKICAgICAgICAgICAgICAgIG4gPSB0LndpZHRoKCkgLyB0LmhlaWdodCgpLAogICAgICAgICAgICAgICAgciA9IGUuZ2V0KDApLm5hdHVyYWxXaWR0aCAvIGUuZ2V0KDApLm5hdHVyYWxIZWlnaHQ7CiAgICAgICAgICAgIG4gPiByID8gZS5jc3MoewogICAgICAgICAgICAgICAgbGVmdDogKHQud2lkdGgoKSAtIHQuaGVpZ2h0KCkgKiByKSAvIDIsCiAgICAgICAgICAgICAgICB0b3A6IDAsCiAgICAgICAgICAgICAgICBoZWlnaHQ6IHQuaGVpZ2h0KCksCiAgICAgICAgICAgICAgICB3aWR0aDogdC5oZWlnaHQoKSAqIHIKICAgICAgICAgICAgfSkgOiBlLmNzcyh7CiAgICAgICAgICAgICAgICB0b3A6ICh0LmhlaWdodCgpIC0gdC53aWR0aCgpICogKDEgLyByKSkgLyAyLAogICAgICAgICAgICAgICAgbGVmdDogMCwKICAgICAgICAgICAgICAgIGhlaWdodDogdC53aWR0aCgpICogKDEgLyByKSwKICAgICAgICAgICAgICAgIHdpZHRoOiB0LndpZHRoKCkKICAgICAgICAgICAgfSkKICAgICAgICB9LCBpLiQgPSAkOwogICAgICAgIHZhciB1ID0gaS5WaWV3LmV4dGVuZCh7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImltYWdlLWNvbnRhaW5lciIsCiAgICAgICAgICAgIHRlbXBsYXRlOiBvLmltYWdlZ2FsbGVyeSwKICAgICAgICAgICAgZXZlbnRzOiB7CiAgICAgICAgICAgICAgICAiY2xpY2sgLmJ0bi1jbG9zZSI6ICJjbG9zZUdhbGxlcnkiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHIuYmluZEFsbCh0aGlzKSwgci5leHRlbmQodGhpcywgdCksIHIuZXh0ZW5kKHRoaXMsIGkuRXZlbnRzKSwgdGhpcy5pbWFnZXNMb2FkZWQgPSAwLCB0aGlzLnByZWxvYWRJbWFnZXMoKQogICAgICAgICAgICB9LAogICAgICAgICAgICBjbG9zZUdhbGxlcnk6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCJjbG9zZWQiKSwgdGhpcy4kKCIuaW1hZ2UtZ2FsbGVyeSIpLnNsaWNrKCJ1bnNsaWNrIiksIHRoaXMucmVtb3ZlRWwoKSwgcy5vbW5pKCJIZWxwIikKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWRkTGlzdGVuZXJzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlc2l6ZUltYWdlczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRpbWFnZXMuZWFjaChmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgJChlKS5jb250YWluaWZ5KCkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVyczogZnVuY3Rpb24oKSB7fSwKICAgICAgICAgICAgcHJlbG9hZEltYWdlczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMCwgZSA9IHRoaXMuaW1hZ2VzLmxlbmd0aDsgZSA+IHQ7IHQrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gbmV3IEltYWdlOwogICAgICAgICAgICAgICAgICAgIG4ub25sb2FkID0gdGhpcy5vbkltYWdlTG9hZCwgbi5zcmMgPSB0aGlzLmltYWdlc1t0XS5zcmMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2xpZGVDaGFuZ2U6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHMub21uaSh0aGlzLmdhbGxlcnlOYW1lLCAiUGhvdG8gIiArIChuICsgMSksIHsKICAgICAgICAgICAgICAgICAgICBwcm9wMzogIkdhbGxlcnkiCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICBpbml0Q2Fyb3VzZWw6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLiQoIi5pbWFnZS1nYWxsZXJ5Iik7CiAgICAgICAgICAgICAgICByZXR1cm4gdC5zbGljayh7CiAgICAgICAgICAgICAgICAgICAgZG90czogITAsCiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLAogICAgICAgICAgICAgICAgICAgIHByZXZBcnJvdzogby5hcnJvdy5yZW5kZXIoewogICAgICAgICAgICAgICAgICAgICAgICBidXR0b25DbGFzczogInNsaWNrLXByZXYiLAogICAgICAgICAgICAgICAgICAgICAgICBwb2x5Z29uUG9pbnRzOiAiMTUsMCAxNSwyMCwgMCAxMCIKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBuZXh0QXJyb3c6IG8uYXJyb3cucmVuZGVyKHsKICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uQ2xhc3M6ICJzbGljay1uZXh0IiwKICAgICAgICAgICAgICAgICAgICAgICAgcG9seWdvblBvaW50czogIjAsMCAwLDIwLCAxNSAxMCIKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSksIHRoaXMuJGltYWdlcyA9IHRoaXMuJCgiLmltYWdlLWl0ZW0gaW1nIiksIHQub24oInNldFBvc2l0aW9uIiwgdGhpcy5yZXNpemVJbWFnZXMpLCB0Lm9uKCJhZnRlckNoYW5nZSIsIHRoaXMuc2xpZGVDaGFuZ2UpLCB0aGlzLnJlc2l6ZUltYWdlcygpLCB0aGlzLmltYWdlcy5sZW5ndGggPiAxID8gcy5vbW5pKHRoaXMuZ2FsbGVyeU5hbWUsICJQaG90byAxIiwgdGhpcy50cmFjaykgOiBzLm9tbmkodGhpcy5nYWxsZXJ5TmFtZSwgdm9pZCAwLCB0aGlzLnRyYWNrKSwgdGhpcwogICAgICAgICAgICB9LAogICAgICAgICAgICBvbkltYWdlTG9hZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc0xvYWRlZCsrLCB0aGlzLmltYWdlc0xvYWRlZCA9PT0gdGhpcy5pbWFnZXMubGVuZ3RoICYmICh0aGlzLmluaXRDYXJvdXNlbCgpLCB0aGlzLnRyaWdnZXIoImxvYWRlZCIpKQogICAgICAgICAgICB9LAogICAgICAgICAgICByZW1vdmVFbDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVycygpLCB0aGlzLnVuYmluZCgpLCB0aGlzLnJlbW92ZSgpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlLnJlbmRlcih7CiAgICAgICAgICAgICAgICAgICAgaW1hZ2VzOiB0aGlzLmltYWdlcwogICAgICAgICAgICAgICAgfSkpLCB0aGlzCiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBlLmV4cG9ydHMgPSB1CiAgICB9LCB7CiAgICAgICAgIi4uL3RlbXBsYXRlcyI6IDMsCiAgICAgICAgIi4uL3RyYWNrIjogNSwKICAgICAgICBiYWNrYm9uZTogOSwKICAgICAgICBsb2Rhc2g6IDE2CiAgICB9XSwKICAgIDk6IFtmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgISBmdW5jdGlvbihyKSB7CiAgICAgICAgICAgICAgICB2YXIgaSA9ICJvYmplY3QiID09IHR5cGVvZiBzZWxmICYmIHNlbGYuc2VsZiA9PSBzZWxmICYmIHNlbGYgfHwgIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgZS5nbG9iYWwgPT0gZSAmJiBlOwogICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kKSBkZWZpbmUoWyJ1bmRlcnNjb3JlIiwgImpxdWVyeSIsICJleHBvcnRzIl0sIGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICBpLkJhY2tib25lID0gcihpLCBuLCB0LCBlKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBlbHNlIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgbikgewogICAgICAgICAgICAgICAgICAgIHZhciBvLCBhID0gdCgidW5kZXJzY29yZSIpOwogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0KCJqcXVlcnkiKQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHMpIHt9CiAgICAgICAgICAgICAgICAgICAgcihpLCBuLCBhLCBvKQogICAgICAgICAgICAgICAgfSBlbHNlIGkuQmFja2JvbmUgPSByKGksIHt9LCBpLl8sIGkualF1ZXJ5IHx8IGkuWmVwdG8gfHwgaS5lbmRlciB8fCBpLiQpCiAgICAgICAgICAgIH0oZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgdmFyIGkgPSB0LkJhY2tib25lLAogICAgICAgICAgICAgICAgICAgIG8gPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7CiAgICAgICAgICAgICAgICBlLlZFUlNJT04gPSAiMS4yLjMiLCBlLiQgPSByLCBlLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5CYWNrYm9uZSA9IGksIHRoaXMKICAgICAgICAgICAgICAgIH0sIGUuZW11bGF0ZUhUVFAgPSAhMSwgZS5lbXVsYXRlSlNPTiA9ICExOwogICAgICAgICAgICAgICAgdmFyIGEgPSBmdW5jdGlvbih0LCBlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5bZV0odGhpc1tyXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuW2VdKHRoaXNbcl0sIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbltlXSh0aGlzW3JdLCB1KHQsIHRoaXMpLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGksIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5bZV0odGhpc1tyXSwgdSh0LCB0aGlzKSwgaSwgbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gby5jYWxsKGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnVuc2hpZnQodGhpc1tyXSksIG5bZV0uYXBwbHkobiwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHMgPSBmdW5jdGlvbih0LCBlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4uZWFjaChlLCBmdW5jdGlvbihlLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuW2ldICYmICh0LnByb3RvdHlwZVtpXSA9IGEoZSwgaSwgcikpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB1ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5pc0Z1bmN0aW9uKHQpID8gdCA6IG4uaXNPYmplY3QodCkgJiYgIWUuX2lzTW9kZWwodCkgPyBjKHQpIDogbi5pc1N0cmluZyh0KSA/IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmdldCh0KQogICAgICAgICAgICAgICAgICAgICAgICB9IDogdAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBuLm1hdGNoZXModCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSh0LmF0dHJpYnV0ZXMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGwgPSBlLkV2ZW50cyA9IHt9LAogICAgICAgICAgICAgICAgICAgIGYgPSAvXHMrLywKICAgICAgICAgICAgICAgICAgICBwID0gZnVuY3Rpb24odCwgZSwgciwgaSwgbykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSwgcyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyICYmICJvYmplY3QiID09IHR5cGVvZiByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGkgJiYgImNvbnRleHQiIGluIG8gJiYgdm9pZCAwID09PSBvLmNvbnRleHQgJiYgKG8uY29udGV4dCA9IGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChhID0gbi5rZXlzKHIpOyBzIDwgYS5sZW5ndGg7IHMrKykgZSA9IHAodCwgZSwgYVtzXSwgclthW3NdXSwgbykKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyICYmIGYudGVzdChyKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYSA9IHIuc3BsaXQoZik7IHMgPCBhLmxlbmd0aDsgcysrKSBlID0gdChlLCBhW3NdLCBpLCBvKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBlID0gdChlLCByLCBpLCBvKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbC5vbiA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaCh0aGlzLCB0LCBlLCBuKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBoID0gZnVuY3Rpb24odCwgZSwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgIGlmICh0Ll9ldmVudHMgPSBwKGQsIHQuX2V2ZW50cyB8fCB7fSwgZSwgbiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eDogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZzogaQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHQuX2xpc3RlbmVycyB8fCAodC5fbGlzdGVuZXJzID0ge30pOwogICAgICAgICAgICAgICAgICAgICAgICBvW2kuaWRdID0gaQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGwubGlzdGVuVG8gPSBmdW5jdGlvbih0LCBlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0KSByZXR1cm4gdGhpczsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHQuX2xpc3RlbklkIHx8ICh0Ll9saXN0ZW5JZCA9IG4udW5pcXVlSWQoImwiKSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0aGlzLl9saXN0ZW5pbmdUbyB8fCAodGhpcy5fbGlzdGVuaW5nVG8gPSB7fSksCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBvW2ldOwogICAgICAgICAgICAgICAgICAgIGlmICghYSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXMuX2xpc3RlbklkIHx8ICh0aGlzLl9saXN0ZW5JZCA9IG4udW5pcXVlSWQoImwiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBvW2ldID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqOiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqSWQ6IGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZ1RvOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IDAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gaCh0LCBlLCByLCB0aGlzLCBhKSwgdGhpcwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBkID0gZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIGlmIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdFtlXSB8fCAodFtlXSA9IFtdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByLmNvbnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gci5jdHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gci5saXN0ZW5pbmc7CiAgICAgICAgICAgICAgICAgICAgICAgIHMgJiYgcy5jb3VudCsrLCBpLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4OiBvIHx8IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc6IHMKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBsLm9mZiA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXZlbnRzID8gKHRoaXMuX2V2ZW50cyA9IHAoZywgdGhpcy5fZXZlbnRzLCB0LCBlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyczogdGhpcy5fbGlzdGVuZXJzCiAgICAgICAgICAgICAgICAgICAgfSksIHRoaXMpIDogdGhpcwogICAgICAgICAgICAgICAgfSwgbC5zdG9wTGlzdGVuaW5nID0gZnVuY3Rpb24odCwgZSwgcikgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5fbGlzdGVuaW5nVG87CiAgICAgICAgICAgICAgICAgICAgaWYgKCFpKSByZXR1cm4gdGhpczsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBvID0gdCA/IFt0Ll9saXN0ZW5JZF0gOiBuLmtleXMoaSksIGEgPSAwOyBhIDwgby5sZW5ndGg7IGErKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGlbb1thXV07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcykgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIHMub2JqLm9mZihlLCByLCB0aGlzKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5pc0VtcHR5KGkpICYmICh0aGlzLl9saXN0ZW5pbmdUbyA9IHZvaWQgMCksIHRoaXMKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgZyA9IGZ1bmN0aW9uKHQsIGUsIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbywgYSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gaS5jb250ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGkubGlzdGVuZXJzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSB8fCByIHx8IHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSBlID8gW2VdIDogbi5rZXlzKHQpOyBhIDwgYy5sZW5ndGg7IGErKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBjW2FdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gdFtlXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWwpIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGYgPSBbXSwgcCA9IDA7IHAgPCBsLmxlbmd0aDsgcCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gbFtwXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciAmJiByICE9PSBoLmNhbGxiYWNrICYmIHIgIT09IGguY2FsbGJhY2suX2NhbGxiYWNrIHx8IHMgJiYgcyAhPT0gaC5jb250ZXh0ID8gZi5wdXNoKGgpIDogKG8gPSBoLmxpc3RlbmluZywgbyAmJiAwID09PSAtLW8uY291bnQgJiYgKGRlbGV0ZSB1W28uaWRdLCBkZWxldGUgby5saXN0ZW5pbmdUb1tvLm9iaklkXSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYubGVuZ3RoID8gdFtlXSA9IGYgOiBkZWxldGUgdFtlXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uc2l6ZSh0KSA/IHQgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBkID0gbi5rZXlzKHUpOyBhIDwgZC5sZW5ndGg7IGErKykgbyA9IHVbZFthXV0sIGRlbGV0ZSB1W28uaWRdLCBkZWxldGUgby5saXN0ZW5pbmdUb1tvLm9iaklkXQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBsLm9uY2UgPSBmdW5jdGlvbih0LCBlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBwKHYsIHt9LCB0LCBlLCBuLmJpbmQodGhpcy5vZmYsIHRoaXMpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vbihpLCB2b2lkIDAsIHIpCiAgICAgICAgICAgICAgICB9LCBsLmxpc3RlblRvT25jZSA9IGZ1bmN0aW9uKHQsIGUsIHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHAodiwge30sIGUsIHIsIG4uYmluZCh0aGlzLnN0b3BMaXN0ZW5pbmcsIHRoaXMsIHQpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5Ubyh0LCBpKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciB2ID0gZnVuY3Rpb24odCwgZSwgciwgaSkgewogICAgICAgICAgICAgICAgICAgIGlmIChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdFtlXSA9IG4ub25jZShmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkoZSwgbyksIHIuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgby5fY2FsbGJhY2sgPSByCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbC50cmlnZ2VyID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fZXZlbnRzKSByZXR1cm4gdGhpczsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gTWF0aC5tYXgoMCwgYXJndW1lbnRzLmxlbmd0aCAtIDEpLCBuID0gQXJyYXkoZSksIHIgPSAwOyBlID4gcjsgcisrKSBuW3JdID0gYXJndW1lbnRzW3IgKyAxXTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcCh5LCB0aGlzLl9ldmVudHMsIHQsIHZvaWQgMCwgbiksIHRoaXMKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgeSA9IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdFtlXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5hbGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmIG8gJiYgKG8gPSBvLnNsaWNlKCkpLCBpICYmIG0oaSwgciksIG8gJiYgbShvLCBbZV0uY29uY2F0KHIpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBtID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciA9IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHQubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGVbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlWzJdOwogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ICsrciA8IGk7KShuID0gdFtyXSkuY2FsbGJhY2suY2FsbChuLmN0eCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyArK3IgPCBpOykobiA9IHRbcl0pLmNhbGxiYWNrLmNhbGwobi5jdHgsIG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgKytyIDwgaTspKG4gPSB0W3JdKS5jYWxsYmFjay5jYWxsKG4uY3R4LCBvLCBhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ICsrciA8IGk7KShuID0gdFtyXSkuY2FsbGJhY2suY2FsbChuLmN0eCwgbywgYSwgcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgKytyIDwgaTspKG4gPSB0W3JdKS5jYWxsYmFjay5hcHBseShuLmN0eCwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbC5iaW5kID0gbC5vbiwgbC51bmJpbmQgPSBsLm9mZiwgbi5leHRlbmQoZSwgbCk7CiAgICAgICAgICAgICAgICB2YXIgYiA9IGUuTW9kZWwgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0IHx8IHt9OwogICAgICAgICAgICAgICAgICAgIGUgfHwgKGUgPSB7fSksIHRoaXMuY2lkID0gbi51bmlxdWVJZCh0aGlzLmNpZFByZWZpeCksIHRoaXMuYXR0cmlidXRlcyA9IHt9LCBlLmNvbGxlY3Rpb24gJiYgKHRoaXMuY29sbGVjdGlvbiA9IGUuY29sbGVjdGlvbiksIGUucGFyc2UgJiYgKHIgPSB0aGlzLnBhcnNlKHIsIGUpIHx8IHt9KSwgciA9IG4uZGVmYXVsdHMoe30sIHIsIG4ucmVzdWx0KHRoaXMsICJkZWZhdWx0cyIpKSwgdGhpcy5zZXQociwgZSksIHRoaXMuY2hhbmdlZCA9IHt9LCB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIG4uZXh0ZW5kKGIucHJvdG90eXBlLCBsLCB7CiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZDogbnVsbCwKICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgaWRBdHRyaWJ1dGU6ICJpZCIsCiAgICAgICAgICAgICAgICAgICAgY2lkUHJlZml4OiAiYyIsCiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7fSwKICAgICAgICAgICAgICAgICAgICB0b0pTT046IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc3luYzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbdF0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGVzY2FwZTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5lc2NhcGUodGhpcy5nZXQodCkpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBoYXM6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5nZXQodCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG1hdGNoZXM6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhbi5pdGVyYXRlZSh0LCB0aGlzKSh0aGlzLmF0dHJpYnV0ZXMpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHQsIGUsIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIm9iamVjdCIgPT0gdHlwZW9mIHQgPyAoaSA9IHQsIHIgPSBlKSA6IChpID0ge30pW3RdID0gZSwgciB8fCAociA9IHt9KSwgIXRoaXMuX3ZhbGlkYXRlKGksIHIpKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gci51bnNldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSByLnNpbGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB0aGlzLl9jaGFuZ2luZzsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hhbmdpbmcgPSAhMCwgdSB8fCAodGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzID0gbi5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpLCB0aGlzLmNoYW5nZWQgPSB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gdGhpcy5hdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHRoaXMuY2hhbmdlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHAgaW4gaSkgZSA9IGlbcF0sIG4uaXNFcXVhbChjW3BdLCBlKSB8fCBzLnB1c2gocCksIG4uaXNFcXVhbChmW3BdLCBlKSA/IGRlbGV0ZSBsW3BdIDogbFtwXSA9IGUsIG8gPyBkZWxldGUgY1twXSA6IGNbcF0gPSBlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pZCA9IHRoaXMuZ2V0KHRoaXMuaWRBdHRyaWJ1dGUpLCAhYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5sZW5ndGggJiYgKHRoaXMuX3BlbmRpbmcgPSByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGggPSAwOyBoIDwgcy5sZW5ndGg7IGgrKykgdGhpcy50cmlnZ2VyKCJjaGFuZ2U6IiArIHNbaF0sIHRoaXMsIGNbc1toXV0sIHIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUpIHJldHVybiB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgdGhpcy5fcGVuZGluZzspIHIgPSB0aGlzLl9wZW5kaW5nLCB0aGlzLl9wZW5kaW5nID0gITEsIHRoaXMudHJpZ2dlcigiY2hhbmdlIiwgdGhpcywgcik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9wZW5kaW5nID0gITEsIHRoaXMuX2NoYW5naW5nID0gITEsIHRoaXMKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHVuc2V0OiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldCh0LCB2b2lkIDAsIG4uZXh0ZW5kKHt9LCBlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNldDogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByIGluIHRoaXMuYXR0cmlidXRlcykgZVtyXSA9IHZvaWQgMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0KGUsIG4uZXh0ZW5kKHt9LCB0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNldDogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2VkOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyAhbi5pc0VtcHR5KHRoaXMuY2hhbmdlZCkgOiBuLmhhcyh0aGlzLmNoYW5nZWQsIHQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkQXR0cmlidXRlczogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXQpIHJldHVybiB0aGlzLmhhc0NoYW5nZWQoKSA/IG4uY2xvbmUodGhpcy5jaGFuZ2VkKSA6ICExOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuX2NoYW5naW5nID8gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzIDogdGhpcy5hdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdFtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uaXNFcXVhbChlW2ldLCBvKSB8fCAocltpXSA9IG8pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uc2l6ZShyKSA/IHIgOiAhMQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXM6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdCAmJiB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMgPyB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXNbdF0gOiBudWxsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0F0dHJpYnV0ZXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5jbG9uZSh0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBmZXRjaDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB0ID0gbi5leHRlbmQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2U6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdC5zdWNjZXNzOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5zdWNjZXNzID0gZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0LnBhcnNlID8gZS5wYXJzZShuLCB0KSA6IG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zZXQoaSwgdCkgPyAociAmJiByLmNhbGwodC5jb250ZXh0LCBlLCBuLCB0KSwgdm9pZCBlLnRyaWdnZXIoInN5bmMiLCBlLCBuLCB0KSkgOiAhMQogICAgICAgICAgICAgICAgICAgICAgICB9LCBGKHRoaXMsIHQpLCB0aGlzLnN5bmMoInJlYWQiLCB0aGlzLCB0KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2F2ZTogZnVuY3Rpb24odCwgZSwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaTsKICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PSB0IHx8ICJvYmplY3QiID09IHR5cGVvZiB0ID8gKGkgPSB0LCByID0gZSkgOiAoaSA9IHt9KVt0XSA9IGUsIHIgPSBuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZTogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZTogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSwgcik7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gci53YWl0OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAmJiAhbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNldChpLCByKSkgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX3ZhbGlkYXRlKGksIHIpKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSByLnN1Y2Nlc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gdGhpcy5hdHRyaWJ1dGVzOwogICAgICAgICAgICAgICAgICAgICAgICByLnN1Y2Nlc3MgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmF0dHJpYnV0ZXMgPSB1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSByLnBhcnNlID8gYS5wYXJzZSh0LCByKSA6IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyAmJiAoZSA9IG4uZXh0ZW5kKHt9LCBpLCBlKSksIGUgJiYgIWEuc2V0KGUsIHIpID8gITEgOiAocyAmJiBzLmNhbGwoci5jb250ZXh0LCBhLCB0LCByKSwgdm9pZCBhLnRyaWdnZXIoInN5bmMiLCBhLCB0LCByKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgRih0aGlzLCByKSwgaSAmJiBvICYmICh0aGlzLmF0dHJpYnV0ZXMgPSBuLmV4dGVuZCh7fSwgdSwgaSkpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHRoaXMuaXNOZXcoKSA/ICJjcmVhdGUiIDogci5wYXRjaCA/ICJwYXRjaCIgOiAidXBkYXRlIjsKICAgICAgICAgICAgICAgICAgICAgICAgInBhdGNoIiAhPT0gYyB8fCByLmF0dHJzIHx8IChyLmF0dHJzID0gaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gdGhpcy5zeW5jKGMsIHRoaXMsIHIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzID0gdSwgbAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB0ID0gdCA/IG4uY2xvbmUodCkgOiB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQuc3VjY2VzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0LndhaXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wTGlzdGVuaW5nKCksIGUudHJpZ2dlcigiZGVzdHJveSIsIGUsIGUuY29sbGVjdGlvbiwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHQuc3VjY2VzcyA9IGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgbygpLCByICYmIHIuY2FsbCh0LmNvbnRleHQsIGUsIG4sIHQpLCBlLmlzTmV3KCkgfHwgZS50cmlnZ2VyKCJzeW5jIiwgZSwgbiwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNOZXcoKSA/IG4uZGVmZXIodC5zdWNjZXNzKSA6IChGKHRoaXMsIHQpLCBhID0gdGhpcy5zeW5jKCJkZWxldGUiLCB0aGlzLCB0KSksIGkgfHwgbygpLCBhCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB1cmw6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IG4ucmVzdWx0KHRoaXMsICJ1cmxSb290IikgfHwgbi5yZXN1bHQodGhpcy5jb2xsZWN0aW9uLCAidXJsIikgfHwgTSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc05ldygpKSByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmdldCh0aGlzLmlkQXR0cmlidXRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQucmVwbGFjZSgvW15cL10kLywgIiQmLyIpICsgZW5jb2RlVVJJQ29tcG9uZW50KGUpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwYXJzZTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgY2xvbmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5hdHRyaWJ1dGVzKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgaXNOZXc6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuaGFzKHRoaXMuaWRBdHRyaWJ1dGUpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWxpZGF0ZSh7fSwgbi5kZWZhdWx0cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZTogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdCkpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfdmFsaWRhdGU6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlLnZhbGlkYXRlIHx8ICF0aGlzLnZhbGlkYXRlKSByZXR1cm4gITA7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBuLmV4dGVuZCh7fSwgdGhpcy5hdHRyaWJ1dGVzLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzLnZhbGlkYXRpb25FcnJvciA9IHRoaXMudmFsaWRhdGUodCwgZSkgfHwgbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPyAodGhpcy50cmlnZ2VyKCJpbnZhbGlkIiwgdGhpcywgciwgbi5leHRlbmQoZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yOiByCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgITEpIDogITAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHZhciB4ID0gewogICAgICAgICAgICAgICAgICAgIGtleXM6IDEsCiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiAxLAogICAgICAgICAgICAgICAgICAgIHBhaXJzOiAxLAogICAgICAgICAgICAgICAgICAgIGludmVydDogMSwKICAgICAgICAgICAgICAgICAgICBwaWNrOiAwLAogICAgICAgICAgICAgICAgICAgIG9taXQ6IDAsCiAgICAgICAgICAgICAgICAgICAgY2hhaW46IDEsCiAgICAgICAgICAgICAgICAgICAgaXNFbXB0eTogMQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHMoYiwgeCwgImF0dHJpYnV0ZXMiKTsKICAgICAgICAgICAgICAgIHZhciB3ID0gZS5Db2xsZWN0aW9uID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlIHx8IChlID0ge30pLCBlLm1vZGVsICYmICh0aGlzLm1vZGVsID0gZS5tb2RlbCksIHZvaWQgMCAhPT0gZS5jb21wYXJhdG9yICYmICh0aGlzLmNvbXBhcmF0b3IgPSBlLmNvbXBhcmF0b3IpLCB0aGlzLl9yZXNldCgpLCB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdCAmJiB0aGlzLnJlc2V0KHQsIG4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbGVudDogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZSkpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfID0gewogICAgICAgICAgICAgICAgICAgICAgICBhZGQ6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICByZW1vdmU6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBtZXJnZTogITAKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGsgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZDogITAsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZTogITEKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIFQgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBNYXRoLm1pbihNYXRoLm1heChuLCAwKSwgdC5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gQXJyYXkodC5sZW5ndGggLSBuKSwgaSA9IGUubGVuZ3RoLCBvID0gMDsgbyA8IHIubGVuZ3RoOyBvKyspIHJbb10gPSB0W28gKyBuXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gMDsgaSA+IG87IG8rKykgdFtvICsgbl0gPSBlW29dOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG8gPSAwOyBvIDwgci5sZW5ndGg7IG8rKykgdFtvICsgaSArIG5dID0gcltvXQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBuLmV4dGVuZCh3LnByb3RvdHlwZSwgbCwgewogICAgICAgICAgICAgICAgICAgIG1vZGVsOiBiLAogICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgICAgICAgICAgICAgdG9KU09OOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS50b0pTT04odCkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHN5bmM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zeW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGFkZDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXQodCwgbi5leHRlbmQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2U6ICExCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUsIGspKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBuLmV4dGVuZCh7fSwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gIW4uaXNBcnJheSh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHIgPyBbdF0gOiBuLmNsb25lKHQpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuX3JlbW92ZU1vZGVscyh0LCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFlLnNpbGVudCAmJiBpICYmIHRoaXMudHJpZ2dlcigidXBkYXRlIiwgdGhpcywgZSksIHIgPyBpWzBdIDogaQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBuLmRlZmF1bHRzKHt9LCBlLCBfKSwgZS5wYXJzZSAmJiAhdGhpcy5faXNNb2RlbCh0KSAmJiAodCA9IHRoaXMucGFyc2UodCwgZSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAhbi5pc0FycmF5KHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHIgPyBbdF0gOiB0LnNsaWNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGUuYXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IGkgJiYgKGkgPSAraSksIDAgPiBpICYmIChpICs9IHRoaXMubGVuZ3RoICsgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBvLCBhID0gW10sIHMgPSBbXSwgdSA9IFtdLCBjID0ge30sIGwgPSBlLmFkZCwgZiA9IGUubWVyZ2UsIHAgPSBlLnJlbW92ZSwgaCA9ICExLCBkID0gdGhpcy5jb21wYXJhdG9yICYmIG51bGwgPT0gaSAmJiBlLnNvcnQgIT09ICExLCBnID0gbi5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpID8gdGhpcy5jb21wYXJhdG9yIDogbnVsbCwgdiA9IDA7IHYgPCB0Lmxlbmd0aDsgdisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHRbdl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSB0aGlzLmdldChvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZiAmJiBvICE9PSB5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IHRoaXMuX2lzTW9kZWwobykgPyBvLmF0dHJpYnV0ZXMgOiBvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wYXJzZSAmJiAobSA9IHkucGFyc2UobSwgZSkpLCB5LnNldChtLCBlKSwgZCAmJiAhaCAmJiAoaCA9IHkuaGFzQ2hhbmdlZChnKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjW3kuY2lkXSB8fCAoY1t5LmNpZF0gPSAhMCwgYS5wdXNoKHkpKSwgdFt2XSA9IHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbCAmJiAobyA9IHRbdl0gPSB0aGlzLl9wcmVwYXJlTW9kZWwobywgZSksIG8gJiYgKHMucHVzaChvKSwgdGhpcy5fYWRkUmVmZXJlbmNlKG8sIGUpLCBjW28uY2lkXSA9ICEwLCBhLnB1c2gobykpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHYgPSAwOyB2IDwgdGhpcy5sZW5ndGg7IHYrKykgbyA9IHRoaXMubW9kZWxzW3ZdLCBjW28uY2lkXSB8fCB1LnB1c2gobyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5sZW5ndGggJiYgdGhpcy5fcmVtb3ZlTW9kZWxzKHUsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSAhZCAmJiBsICYmIHA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5sZW5ndGggJiYgeCA/IChiID0gdGhpcy5sZW5ndGggIT0gYS5sZW5ndGggfHwgbi5zb21lKHRoaXMubW9kZWxzLCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ICE9PSBhW2VdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHRoaXMubW9kZWxzLmxlbmd0aCA9IDAsIFQodGhpcy5tb2RlbHMsIGEsIDApLCB0aGlzLmxlbmd0aCA9IHRoaXMubW9kZWxzLmxlbmd0aCkgOiBzLmxlbmd0aCAmJiAoZCAmJiAoaCA9ICEwKSwgVCh0aGlzLm1vZGVscywgcywgbnVsbCA9PSBpID8gdGhpcy5sZW5ndGggOiBpKSwgdGhpcy5sZW5ndGggPSB0aGlzLm1vZGVscy5sZW5ndGgpLCBoICYmIHRoaXMuc29ydCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbGVudDogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgIWUuc2lsZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2ID0gMDsgdiA8IHMubGVuZ3RoOyB2KyspIG51bGwgIT0gaSAmJiAoZS5pbmRleCA9IGkgKyB2KSwgbyA9IHNbdl0sIG8udHJpZ2dlcigiYWRkIiwgbywgdGhpcywgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGggfHwgYikgJiYgdGhpcy50cmlnZ2VyKCJzb3J0IiwgdGhpcywgZSksIChzLmxlbmd0aCB8fCB1Lmxlbmd0aCkgJiYgdGhpcy50cmlnZ2VyKCJ1cGRhdGUiLCB0aGlzLCBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPyB0WzBdIDogdAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNldDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlID0gZSA/IG4uY2xvbmUoZSkgOiB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCB0aGlzLm1vZGVscy5sZW5ndGg7IHIrKykgdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKHRoaXMubW9kZWxzW3JdLCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucHJldmlvdXNNb2RlbHMgPSB0aGlzLm1vZGVscywgdGhpcy5fcmVzZXQoKSwgdCA9IHRoaXMuYWRkKHQsIG4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbGVudDogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZSkpLCBlLnNpbGVudCB8fCB0aGlzLnRyaWdnZXIoInJlc2V0IiwgdGhpcywgZSksIHQKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHB1c2g6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkKHQsIG4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0OiB0aGlzLmxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICB9LCBlKSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHBvcDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuYXQodGhpcy5sZW5ndGggLSAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlKGUsIHQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB1bnNoaWZ0OiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZCh0LCBuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdDogMAogICAgICAgICAgICAgICAgICAgICAgICB9LCBlKSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHNoaWZ0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5hdCgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlKGUsIHQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzbGljZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvLmFwcGx5KHRoaXMubW9kZWxzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuIHZvaWQgMDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLm1vZGVsSWQodGhpcy5faXNNb2RlbCh0KSA/IHQuYXR0cmlidXRlcyA6IHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYnlJZFt0XSB8fCB0aGlzLl9ieUlkW2VdIHx8IHRoaXMuX2J5SWRbdC5jaWRdCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBhdDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA+IHQgJiYgKHQgKz0gdGhpcy5sZW5ndGgpLCB0aGlzLm1vZGVsc1t0XQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbZSA/ICJmaW5kIiA6ICJmaWx0ZXIiXSh0KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZmluZFdoZXJlOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndoZXJlKHQsICEwKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc29ydDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuY29tcGFyYXRvcjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlKSB0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBzb3J0IGEgc2V0IHdpdGhvdXQgYSBjb21wYXJhdG9yIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgfHwgKHQgPSB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmlzRnVuY3Rpb24oZSkgJiYgKGUgPSBuLmJpbmQoZSwgdGhpcykpLCAxID09PSByIHx8IG4uaXNTdHJpbmcoZSkgPyB0aGlzLm1vZGVscyA9IHRoaXMuc29ydEJ5KGUpIDogdGhpcy5tb2RlbHMuc29ydChlKSwgdC5zaWxlbnQgfHwgdGhpcy50cmlnZ2VyKCJzb3J0IiwgdGhpcywgdCksIHRoaXMKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHBsdWNrOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmludm9rZSh0aGlzLm1vZGVscywgImdldCIsIHQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBmZXRjaDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB0ID0gbi5leHRlbmQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2U6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQuc3VjY2VzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5zdWNjZXNzID0gZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0LnJlc2V0ID8gInJlc2V0IiA6ICJzZXQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcltpXShuLCB0KSwgZSAmJiBlLmNhbGwodC5jb250ZXh0LCByLCBuLCB0KSwgci50cmlnZ2VyKCJzeW5jIiwgciwgbiwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgRih0aGlzLCB0KSwgdGhpcy5zeW5jKCJyZWFkIiwgdGhpcywgdCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNyZWF0ZTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlID0gZSA/IG4uY2xvbmUoZSkgOiB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlLndhaXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID0gdGhpcy5fcHJlcGFyZU1vZGVsKHQsIGUpLCAhdCkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICByIHx8IHRoaXMuYWRkKHQsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5zdWNjZXNzOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zdWNjZXNzID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgciAmJiBpLmFkZCh0LCBuKSwgbyAmJiBvLmNhbGwobi5jb250ZXh0LCB0LCBlLCBuKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0LnNhdmUobnVsbCwgZSksIHQKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHBhcnNlOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLm1vZGVscywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJhdG9yOiB0aGlzLmNvbXBhcmF0b3IKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG1vZGVsSWQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRbdGhpcy5tb2RlbC5wcm90b3R5cGUuaWRBdHRyaWJ1dGUgfHwgImlkIl0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9yZXNldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gMCwgdGhpcy5tb2RlbHMgPSBbXSwgdGhpcy5fYnlJZCA9IHt9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfcHJlcGFyZU1vZGVsOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc01vZGVsKHQpKSByZXR1cm4gdC5jb2xsZWN0aW9uIHx8ICh0LmNvbGxlY3Rpb24gPSB0aGlzKSwgdDsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGUgPyBuLmNsb25lKGUpIDoge30sIGUuY29sbGVjdGlvbiA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbmV3IHRoaXMubW9kZWwodCwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLnZhbGlkYXRpb25FcnJvciA/ICh0aGlzLnRyaWdnZXIoImludmFsaWQiLCB0aGlzLCByLnZhbGlkYXRpb25FcnJvciwgZSksICExKSA6IHIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9yZW1vdmVNb2RlbHM6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IFtdLCByID0gMDsgciA8IHQubGVuZ3RoOyByKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5nZXQodFtyXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdGhpcy5pbmRleE9mKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWxzLnNwbGljZShvLCAxKSwgdGhpcy5sZW5ndGgtLSwgZS5zaWxlbnQgfHwgKGUuaW5kZXggPSBvLCBpLnRyaWdnZXIoInJlbW92ZSIsIGksIHRoaXMsIGUpKSwgbi5wdXNoKGkpLCB0aGlzLl9yZW1vdmVSZWZlcmVuY2UoaSwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5sZW5ndGggPyBuIDogITEKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9pc01vZGVsOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgYgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX2FkZFJlZmVyZW5jZTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9ieUlkW3QuY2lkXSA9IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5tb2RlbElkKHQuYXR0cmlidXRlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gbiAmJiAodGhpcy5fYnlJZFtuXSA9IHQpLCB0Lm9uKCJhbGwiLCB0aGlzLl9vbk1vZGVsRXZlbnQsIHRoaXMpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfcmVtb3ZlUmVmZXJlbmNlOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9ieUlkW3QuY2lkXTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLm1vZGVsSWQodC5hdHRyaWJ1dGVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBuICYmIGRlbGV0ZSB0aGlzLl9ieUlkW25dLCB0aGlzID09PSB0LmNvbGxlY3Rpb24gJiYgZGVsZXRlIHQuY29sbGVjdGlvbiwgdC5vZmYoImFsbCIsIHRoaXMuX29uTW9kZWxFdmVudCwgdGhpcykKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9vbk1vZGVsRXZlbnQ6IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJhZGQiICE9PSB0ICYmICJyZW1vdmUiICE9PSB0IHx8IG4gPT09IHRoaXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZGVzdHJveSIgPT09IHQgJiYgdGhpcy5yZW1vdmUoZSwgciksICJjaGFuZ2UiID09PSB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLm1vZGVsSWQoZS5wcmV2aW91c0F0dHJpYnV0ZXMoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0aGlzLm1vZGVsSWQoZS5hdHRyaWJ1dGVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICE9PSBvICYmIChudWxsICE9IGkgJiYgZGVsZXRlIHRoaXMuX2J5SWRbaV0sIG51bGwgIT0gbyAmJiAodGhpcy5fYnlJZFtvXSA9IGUpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdmFyIEUgPSB7CiAgICAgICAgICAgICAgICAgICAgZm9yRWFjaDogMywKICAgICAgICAgICAgICAgICAgICBlYWNoOiAzLAogICAgICAgICAgICAgICAgICAgIG1hcDogMywKICAgICAgICAgICAgICAgICAgICBjb2xsZWN0OiAzLAogICAgICAgICAgICAgICAgICAgIHJlZHVjZTogNCwKICAgICAgICAgICAgICAgICAgICBmb2xkbDogNCwKICAgICAgICAgICAgICAgICAgICBpbmplY3Q6IDQsCiAgICAgICAgICAgICAgICAgICAgcmVkdWNlUmlnaHQ6IDQsCiAgICAgICAgICAgICAgICAgICAgZm9sZHI6IDQsCiAgICAgICAgICAgICAgICAgICAgZmluZDogMywKICAgICAgICAgICAgICAgICAgICBkZXRlY3Q6IDMsCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiAzLAogICAgICAgICAgICAgICAgICAgIHNlbGVjdDogMywKICAgICAgICAgICAgICAgICAgICByZWplY3Q6IDMsCiAgICAgICAgICAgICAgICAgICAgZXZlcnk6IDMsCiAgICAgICAgICAgICAgICAgICAgYWxsOiAzLAogICAgICAgICAgICAgICAgICAgIHNvbWU6IDMsCiAgICAgICAgICAgICAgICAgICAgYW55OiAzLAogICAgICAgICAgICAgICAgICAgIGluY2x1ZGU6IDMsCiAgICAgICAgICAgICAgICAgICAgaW5jbHVkZXM6IDMsCiAgICAgICAgICAgICAgICAgICAgY29udGFpbnM6IDMsCiAgICAgICAgICAgICAgICAgICAgaW52b2tlOiAwLAogICAgICAgICAgICAgICAgICAgIG1heDogMywKICAgICAgICAgICAgICAgICAgICBtaW46IDMsCiAgICAgICAgICAgICAgICAgICAgdG9BcnJheTogMSwKICAgICAgICAgICAgICAgICAgICBzaXplOiAxLAogICAgICAgICAgICAgICAgICAgIGZpcnN0OiAzLAogICAgICAgICAgICAgICAgICAgIGhlYWQ6IDMsCiAgICAgICAgICAgICAgICAgICAgdGFrZTogMywKICAgICAgICAgICAgICAgICAgICBpbml0aWFsOiAzLAogICAgICAgICAgICAgICAgICAgIHJlc3Q6IDMsCiAgICAgICAgICAgICAgICAgICAgdGFpbDogMywKICAgICAgICAgICAgICAgICAgICBkcm9wOiAzLAogICAgICAgICAgICAgICAgICAgIGxhc3Q6IDMsCiAgICAgICAgICAgICAgICAgICAgd2l0aG91dDogMCwKICAgICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlOiAwLAogICAgICAgICAgICAgICAgICAgIGluZGV4T2Y6IDMsCiAgICAgICAgICAgICAgICAgICAgc2h1ZmZsZTogMSwKICAgICAgICAgICAgICAgICAgICBsYXN0SW5kZXhPZjogMywKICAgICAgICAgICAgICAgICAgICBpc0VtcHR5OiAxLAogICAgICAgICAgICAgICAgICAgIGNoYWluOiAxLAogICAgICAgICAgICAgICAgICAgIHNhbXBsZTogMywKICAgICAgICAgICAgICAgICAgICBwYXJ0aXRpb246IDMsCiAgICAgICAgICAgICAgICAgICAgZ3JvdXBCeTogMywKICAgICAgICAgICAgICAgICAgICBjb3VudEJ5OiAzLAogICAgICAgICAgICAgICAgICAgIHNvcnRCeTogMywKICAgICAgICAgICAgICAgICAgICBpbmRleEJ5OiAzCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcyh3LCBFLCAibW9kZWxzIik7CiAgICAgICAgICAgICAgICB2YXIgaiA9IGUuVmlldyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaWQgPSBuLnVuaXF1ZUlkKCJ2aWV3IiksIG4uZXh0ZW5kKHRoaXMsIG4ucGljayh0LCBTKSksIHRoaXMuX2Vuc3VyZUVsZW1lbnQoKSwgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIEMgPSAvXihcUyspXHMqKC4qKSQvLAogICAgICAgICAgICAgICAgICAgIFMgPSBbIm1vZGVsIiwgImNvbGxlY3Rpb24iLCAiZWwiLCAiaWQiLCAiYXR0cmlidXRlcyIsICJjbGFzc05hbWUiLCAidGFnTmFtZSIsICJldmVudHMiXTsKICAgICAgICAgICAgICAgIG4uZXh0ZW5kKGoucHJvdG90eXBlLCBsLCB7CiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZTogImRpdiIsCiAgICAgICAgICAgICAgICAgICAgJDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZWwuZmluZCh0KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7fSwKICAgICAgICAgICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlbW92ZUVsZW1lbnQoKSwgdGhpcy5zdG9wTGlzdGVuaW5nKCksIHRoaXMKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9yZW1vdmVFbGVtZW50OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWwucmVtb3ZlKCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudW5kZWxlZ2F0ZUV2ZW50cygpLCB0aGlzLl9zZXRFbGVtZW50KHQpLCB0aGlzLmRlbGVnYXRlRXZlbnRzKCksIHRoaXMKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9zZXRFbGVtZW50OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsID0gdCBpbnN0YW5jZW9mIGUuJCA/IHQgOiBlLiQodCksIHRoaXMuZWwgPSB0aGlzLiRlbFswXQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVsZWdhdGVFdmVudHM6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgfHwgKHQgPSBuLnJlc3VsdCh0aGlzLCAiZXZlbnRzIikpLCAhdCkgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5kZWxlZ2F0ZUV2ZW50cygpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlIGluIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdFtlXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmlzRnVuY3Rpb24ocikgfHwgKHIgPSB0aGlzW3JdKSwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZS5tYXRjaChDKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlKGlbMV0sIGlbMl0sIG4uYmluZChyLCB0aGlzKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVsZWdhdGU6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGVsLm9uKHQgKyAiLmRlbGVnYXRlRXZlbnRzIiArIHRoaXMuY2lkLCBlLCBuKSwgdGhpcwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdW5kZWxlZ2F0ZUV2ZW50czogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRlbCAmJiB0aGlzLiRlbC5vZmYoIi5kZWxlZ2F0ZUV2ZW50cyIgKyB0aGlzLmNpZCksIHRoaXMKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHVuZGVsZWdhdGU6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGVsLm9mZih0ICsgIi5kZWxlZ2F0ZUV2ZW50cyIgKyB0aGlzLmNpZCwgZSwgbiksIHRoaXMKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9jcmVhdGVFbGVtZW50OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfZW5zdXJlRWxlbWVudDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsKSB0aGlzLnNldEVsZW1lbnQobi5yZXN1bHQodGhpcywgImVsIikpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbi5leHRlbmQoe30sIG4ucmVzdWx0KHRoaXMsICJhdHRyaWJ1dGVzIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pZCAmJiAodC5pZCA9IG4ucmVzdWx0KHRoaXMsICJpZCIpKSwgdGhpcy5jbGFzc05hbWUgJiYgKHRbImNsYXNzIl0gPSBuLnJlc3VsdCh0aGlzLCAiY2xhc3NOYW1lIikpLCB0aGlzLnNldEVsZW1lbnQodGhpcy5fY3JlYXRlRWxlbWVudChuLnJlc3VsdCh0aGlzLCAidGFnTmFtZSIpKSksIHRoaXMuX3NldEF0dHJpYnV0ZXModCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX3NldEF0dHJpYnV0ZXM6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWwuYXR0cih0KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLCBlLnN5bmMgPSBmdW5jdGlvbih0LCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBBW3RdOwogICAgICAgICAgICAgICAgICAgIG4uZGVmYXVsdHMoaSB8fCAoaSA9IHt9KSwgewogICAgICAgICAgICAgICAgICAgICAgICBlbXVsYXRlSFRUUDogZS5lbXVsYXRlSFRUUCwKICAgICAgICAgICAgICAgICAgICAgICAgZW11bGF0ZUpTT046IGUuZW11bGF0ZUpTT04KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogbywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICJqc29uIgogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgaWYgKGkudXJsIHx8IChhLnVybCA9IG4ucmVzdWx0KHIsICJ1cmwiKSB8fCBNKCkpLCBudWxsICE9IGkuZGF0YSB8fCAhciB8fCAiY3JlYXRlIiAhPT0gdCAmJiAidXBkYXRlIiAhPT0gdCAmJiAicGF0Y2giICE9PSB0IHx8IChhLmNvbnRlbnRUeXBlID0gImFwcGxpY2F0aW9uL2pzb24iLCBhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShpLmF0dHJzIHx8IHIudG9KU09OKGkpKSksIGkuZW11bGF0ZUpTT04gJiYgKGEuY29udGVudFR5cGUgPSAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwgYS5kYXRhID0gYS5kYXRhID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IGEuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICB9IDoge30pLCBpLmVtdWxhdGVIVFRQICYmICgiUFVUIiA9PT0gbyB8fCAiREVMRVRFIiA9PT0gbyB8fCAiUEFUQ0giID09PSBvKSkgewogICAgICAgICAgICAgICAgICAgICAgICBhLnR5cGUgPSAiUE9TVCIsIGkuZW11bGF0ZUpTT04gJiYgKGEuZGF0YS5fbWV0aG9kID0gbyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gaS5iZWZvcmVTZW5kOwogICAgICAgICAgICAgICAgICAgICAgICBpLmJlZm9yZVNlbmQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5zZXRSZXF1ZXN0SGVhZGVyKCJYLUhUVFAtTWV0aG9kLU92ZXJyaWRlIiwgbyksIHMgPyBzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAiR0VUIiA9PT0gYS50eXBlIHx8IGkuZW11bGF0ZUpTT04gfHwgKGEucHJvY2Vzc0RhdGEgPSAhMSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBpLmVycm9yOwogICAgICAgICAgICAgICAgICAgIGkuZXJyb3IgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGkudGV4dFN0YXR1cyA9IGUsIGkuZXJyb3JUaHJvd24gPSBuLCB1ICYmIHUuY2FsbChpLmNvbnRleHQsIHQsIGUsIG4pCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGkueGhyID0gZS5hamF4KG4uZXh0ZW5kKGEsIGkpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gci50cmlnZ2VyKCJyZXF1ZXN0IiwgciwgYywgaSksIGMKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgQSA9IHsKICAgICAgICAgICAgICAgICAgICBjcmVhdGU6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICB1cGRhdGU6ICJQVVQiLAogICAgICAgICAgICAgICAgICAgIHBhdGNoOiAiUEFUQ0giLAogICAgICAgICAgICAgICAgICAgICJkZWxldGUiOiAiREVMRVRFIiwKICAgICAgICAgICAgICAgICAgICByZWFkOiAiR0VUIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGUuYWpheCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLiQuYWpheC5hcHBseShlLiQsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgTiA9IGUuUm91dGVyID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB0IHx8ICh0ID0ge30pLCB0LnJvdXRlcyAmJiAodGhpcy5yb3V0ZXMgPSB0LnJvdXRlcyksIHRoaXMuX2JpbmRSb3V0ZXMoKSwgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIFIgPSAvXCgoLio/KVwpL2csCiAgICAgICAgICAgICAgICAgICAgSSA9IC8oXChcPyk/Olx3Ky9nLAogICAgICAgICAgICAgICAgICAgIE8gPSAvXCpcdysvZywKICAgICAgICAgICAgICAgICAgICBMID0gL1tcLXt9XFtcXSs/LixcXFxeJHwjXHNdL2c7CiAgICAgICAgICAgICAgICBuLmV4dGVuZChOLnByb3RvdHlwZSwgbCwgewogICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgICAgICAgICAgICAgcm91dGU6IGZ1bmN0aW9uKHQsIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbi5pc1JlZ0V4cCh0KSB8fCAodCA9IHRoaXMuX3JvdXRlVG9SZWdFeHAodCkpLCBuLmlzRnVuY3Rpb24ocikgJiYgKGkgPSByLCByID0gIiIpLCBpIHx8IChpID0gdGhpc1tyXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuaGlzdG9yeS5yb3V0ZSh0LCBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG8uX2V4dHJhY3RQYXJhbWV0ZXJzKHQsIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgby5leGVjdXRlKGksIGEsIHIpICE9PSAhMSAmJiAoby50cmlnZ2VyLmFwcGx5KG8sIFsicm91dGU6IiArIHJdLmNvbmNhdChhKSksIG8udHJpZ2dlcigicm91dGUiLCByLCBhKSwgZS5oaXN0b3J5LnRyaWdnZXIoInJvdXRlIiwgbywgciwgYSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBleGVjdXRlOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgdC5hcHBseSh0aGlzLCBlKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGU6IGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuaGlzdG9yeS5uYXZpZ2F0ZSh0LCBuKSwgdGhpcwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX2JpbmRSb3V0ZXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yb3V0ZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm91dGVzID0gbi5yZXN1bHQodGhpcywgInJvdXRlcyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCwgZSA9IG4ua2V5cyh0aGlzLnJvdXRlcyk7IG51bGwgIT0gKHQgPSBlLnBvcCgpKTspIHRoaXMucm91dGUodCwgdGhpcy5yb3V0ZXNbdF0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9yb3V0ZVRvUmVnRXhwOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gdC5yZXBsYWNlKEwsICJcXCQmIikucmVwbGFjZShSLCAiKD86JDEpPyIpLnJlcGxhY2UoSSwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPyB0IDogIihbXi8/XSspIgogICAgICAgICAgICAgICAgICAgICAgICB9KS5yZXBsYWNlKE8sICIoW14/XSo/KSIpLCBuZXcgUmVnRXhwKCJeIiArIHQgKyAiKD86XFw/KFtcXHNcXFNdKikpPyQiKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX2V4dHJhY3RQYXJhbWV0ZXJzOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdC5leGVjKGUpLnNsaWNlKDEpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5tYXAociwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPT09IHIubGVuZ3RoIC0gMSA/IHQgfHwgbnVsbCA6IHQgPyBkZWNvZGVVUklDb21wb25lbnQodCkgOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2YXIgRCA9IGUuSGlzdG9yeSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJzID0gW10sIHRoaXMuY2hlY2tVcmwgPSBuLmJpbmQodGhpcy5jaGVja1VybCwgdGhpcyksICJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cgJiYgKHRoaXMubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24sIHRoaXMuaGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgUCA9IC9eWyNcL118XHMrJC9nLAogICAgICAgICAgICAgICAgICAgICQgPSAvXlwvK3xcLyskL2csCiAgICAgICAgICAgICAgICAgICAgcSA9IC8jLiokLzsKICAgICAgICAgICAgICAgIEQuc3RhcnRlZCA9ICExLCBuLmV4dGVuZChELnByb3RvdHlwZSwgbCwgewogICAgICAgICAgICAgICAgICAgIGludGVydmFsOiA1MCwKICAgICAgICAgICAgICAgICAgICBhdFJvb3Q6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvW15cL10kLywgIiQmLyIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gdGhpcy5yb290ICYmICF0aGlzLmdldFNlYXJjaCgpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBtYXRjaFJvb3Q6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuZGVjb2RlRnJhZ21lbnQodGhpcy5sb2NhdGlvbi5wYXRobmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gdC5zbGljZSgwLCB0aGlzLnJvb3QubGVuZ3RoIC0gMSkgKyAiLyI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID09PSB0aGlzLnJvb3QKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlY29kZUZyYWdtZW50OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUkkodC5yZXBsYWNlKC8lMjUvZywgIiUyNTI1IikpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBnZXRTZWFyY2g6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMubG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiovLCAiIikubWF0Y2goL1w/LisvKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPyB0WzBdIDogIiIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGdldEhhc2g6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAodCB8fCB0aGlzKS5sb2NhdGlvbi5ocmVmLm1hdGNoKC8jKC4qKSQvKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPyBlWzFdIDogIiIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGdldFBhdGg6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuZGVjb2RlRnJhZ21lbnQodGhpcy5sb2NhdGlvbi5wYXRobmFtZSArIHRoaXMuZ2V0U2VhcmNoKCkpLnNsaWNlKHRoaXMucm9vdC5sZW5ndGggLSAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIvIiA9PT0gdC5jaGFyQXQoMCkgPyB0LnNsaWNlKDEpIDogdAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZ2V0RnJhZ21lbnQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCAmJiAodCA9IHRoaXMuX3VzZVB1c2hTdGF0ZSB8fCAhdGhpcy5fd2FudHNIYXNoQ2hhbmdlID8gdGhpcy5nZXRQYXRoKCkgOiB0aGlzLmdldEhhc2goKSksIHQucmVwbGFjZShQLCAiIikKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChELnN0YXJ0ZWQpIHRocm93IG5ldyBFcnJvcigiQmFja2JvbmUuaGlzdG9yeSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEQuc3RhcnRlZCA9ICEwLCB0aGlzLm9wdGlvbnMgPSBuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdDogIi8iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMsIHQpLCB0aGlzLnJvb3QgPSB0aGlzLm9wdGlvbnMucm9vdCwgdGhpcy5fd2FudHNIYXNoQ2hhbmdlID0gdGhpcy5vcHRpb25zLmhhc2hDaGFuZ2UgIT09ICExLCB0aGlzLl9oYXNIYXNoQ2hhbmdlID0gIm9uaGFzaGNoYW5nZSIgaW4gd2luZG93ICYmICh2b2lkIDAgPT09IGRvY3VtZW50LmRvY3VtZW50TW9kZSB8fCBkb2N1bWVudC5kb2N1bWVudE1vZGUgPiA3KSwgdGhpcy5fdXNlSGFzaENoYW5nZSA9IHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiB0aGlzLl9oYXNIYXNoQ2hhbmdlLCB0aGlzLl93YW50c1B1c2hTdGF0ZSA9ICEhdGhpcy5vcHRpb25zLnB1c2hTdGF0ZSwgdGhpcy5faGFzUHVzaFN0YXRlID0gISghdGhpcy5oaXN0b3J5IHx8ICF0aGlzLmhpc3RvcnkucHVzaFN0YXRlKSwgdGhpcy5fdXNlUHVzaFN0YXRlID0gdGhpcy5fd2FudHNQdXNoU3RhdGUgJiYgdGhpcy5faGFzUHVzaFN0YXRlLCB0aGlzLmZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudCgpLCB0aGlzLnJvb3QgPSAoIi8iICsgdGhpcy5yb290ICsgIi8iKS5yZXBsYWNlKCQsICIvIiksIHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiB0aGlzLl93YW50c1B1c2hTdGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9oYXNQdXNoU3RhdGUgJiYgIXRoaXMuYXRSb290KCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMucm9vdC5zbGljZSgwLCAtMSkgfHwgIi8iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uLnJlcGxhY2UoZSArICIjIiArIHRoaXMuZ2V0UGF0aCgpKSwgITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhc1B1c2hTdGF0ZSAmJiB0aGlzLmF0Um9vdCgpICYmIHRoaXMubmF2aWdhdGUodGhpcy5nZXRIYXNoKCksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2hhc0hhc2hDaGFuZ2UgJiYgdGhpcy5fd2FudHNIYXNoQ2hhbmdlICYmICF0aGlzLl91c2VQdXNoU3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIiksIHRoaXMuaWZyYW1lLnNyYyA9ICJqYXZhc2NyaXB0OjAiLCB0aGlzLmlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiLCB0aGlzLmlmcmFtZS50YWJJbmRleCA9IC0xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBkb2N1bWVudC5ib2R5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByLmluc2VydEJlZm9yZSh0aGlzLmlmcmFtZSwgci5maXJzdENoaWxkKS5jb250ZW50V2luZG93OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5kb2N1bWVudC5vcGVuKCksIGkuZG9jdW1lbnQuY2xvc2UoKSwgaS5sb2NhdGlvbi5oYXNoID0gIiMiICsgdGhpcy5mcmFnbWVudAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgfHwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dGFjaEV2ZW50KCJvbiIgKyB0LCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlUHVzaFN0YXRlID8gbygicG9wc3RhdGUiLCB0aGlzLmNoZWNrVXJsLCAhMSkgOiB0aGlzLl91c2VIYXNoQ2hhbmdlICYmICF0aGlzLmlmcmFtZSA/IG8oImhhc2hjaGFuZ2UiLCB0aGlzLmNoZWNrVXJsLCAhMSkgOiB0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLmNoZWNrVXJsLCB0aGlzLmludGVydmFsKSksIHRoaXMub3B0aW9ucy5zaWxlbnQgPyB2b2lkIDAgOiB0aGlzLmxvYWRVcmwoKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIgfHwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRldGFjaEV2ZW50KCJvbiIgKyB0LCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91c2VQdXNoU3RhdGUgPyB0KCJwb3BzdGF0ZSIsIHRoaXMuY2hlY2tVcmwsICExKSA6IHRoaXMuX3VzZUhhc2hDaGFuZ2UgJiYgIXRoaXMuaWZyYW1lICYmIHQoImhhc2hjaGFuZ2UiLCB0aGlzLmNoZWNrVXJsLCAhMSksIHRoaXMuaWZyYW1lICYmIChkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuaWZyYW1lKSwgdGhpcy5pZnJhbWUgPSBudWxsKSwgdGhpcy5fY2hlY2tVcmxJbnRlcnZhbCAmJiBjbGVhckludGVydmFsKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpLCBELnN0YXJ0ZWQgPSAhMQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcm91dGU6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVycy51bnNoaWZ0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlOiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNoZWNrVXJsOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5nZXRGcmFnbWVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9PT0gdGhpcy5mcmFnbWVudCAmJiB0aGlzLmlmcmFtZSAmJiAoZSA9IHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZS5jb250ZW50V2luZG93KSksIGUgPT09IHRoaXMuZnJhZ21lbnQgPyAhMSA6ICh0aGlzLmlmcmFtZSAmJiB0aGlzLm5hdmlnYXRlKGUpLCB2b2lkIHRoaXMubG9hZFVybCgpKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgbG9hZFVybDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXRjaFJvb3QoKSA/ICh0ID0gdGhpcy5mcmFnbWVudCA9IHRoaXMuZ2V0RnJhZ21lbnQodCksIG4uc29tZSh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5yb3V0ZS50ZXN0KHQpID8gKGUuY2FsbGJhY2sodCksICEwKSA6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgICAgICB9KSkgOiAhMQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGU6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFELnN0YXJ0ZWQpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgZSAmJiBlICE9PSAhMCB8fCAoZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICEhZQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdCA9IHRoaXMuZ2V0RnJhZ21lbnQodCB8fCAiIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5yb290OwogICAgICAgICAgICAgICAgICAgICAgICAoIiIgPT09IHQgfHwgIj8iID09PSB0LmNoYXJBdCgwKSkgJiYgKG4gPSBuLnNsaWNlKDAsIC0xKSB8fCAiLyIpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4gKyB0OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA9IHRoaXMuZGVjb2RlRnJhZ21lbnQodC5yZXBsYWNlKHEsICIiKSksIHRoaXMuZnJhZ21lbnQgIT09IHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyYWdtZW50ID0gdCwgdGhpcy5fdXNlUHVzaFN0YXRlKSB0aGlzLmhpc3RvcnlbZS5yZXBsYWNlID8gInJlcGxhY2VTdGF0ZSIgOiAicHVzaFN0YXRlIl0oe30sIGRvY3VtZW50LnRpdGxlLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fd2FudHNIYXNoQ2hhbmdlKSByZXR1cm4gdGhpcy5sb2NhdGlvbi5hc3NpZ24ocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3VwZGF0ZUhhc2godGhpcy5sb2NhdGlvbiwgdCwgZS5yZXBsYWNlKSwgdGhpcy5pZnJhbWUgJiYgdCAhPT0gdGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5pZnJhbWUuY29udGVudFdpbmRvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZXBsYWNlIHx8IChpLmRvY3VtZW50Lm9wZW4oKSwgaS5kb2N1bWVudC5jbG9zZSgpKSwgdGhpcy5fdXBkYXRlSGFzaChpLmxvY2F0aW9uLCB0LCBlLnJlcGxhY2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUudHJpZ2dlciA/IHRoaXMubG9hZFVybCh0KSA6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfdXBkYXRlSGFzaDogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0LmhyZWYucmVwbGFjZSgvKGphdmFzY3JpcHQ6fCMpLiokLywgIiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5yZXBsYWNlKHIgKyAiIyIgKyBlKQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgdC5oYXNoID0gIiMiICsgZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLCBlLmhpc3RvcnkgPSBuZXcgRDsKICAgICAgICAgICAgICAgIHZhciBIID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciByLCBpID0gdGhpczsKICAgICAgICAgICAgICAgICAgICByID0gdCAmJiBuLmhhcyh0LCAiY29uc3RydWN0b3IiKSA/IHQuY29uc3RydWN0b3IgOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgIH0sIG4uZXh0ZW5kKHIsIGksIGUpOwogICAgICAgICAgICAgICAgICAgIHZhciBvID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSByCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5wcm90b3R5cGUgPSBpLnByb3RvdHlwZSwgci5wcm90b3R5cGUgPSBuZXcgbywgdCAmJiBuLmV4dGVuZChyLnByb3RvdHlwZSwgdCksIHIuX19zdXBlcl9fID0gaS5wcm90b3R5cGUsIHIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBiLmV4dGVuZCA9IHcuZXh0ZW5kID0gTi5leHRlbmQgPSBqLmV4dGVuZCA9IEQuZXh0ZW5kID0gSDsKICAgICAgICAgICAgICAgIHZhciBNID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQSAidXJsIiBwcm9wZXJ0eSBvciBmdW5jdGlvbiBtdXN0IGJlIHNwZWNpZmllZCcpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBGID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGUuZXJyb3I7CiAgICAgICAgICAgICAgICAgICAgICAgIGUuZXJyb3IgPSBmdW5jdGlvbihyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICYmIG4uY2FsbChlLmNvbnRleHQsIHQsIHIsIGUpLCB0LnRyaWdnZXIoImVycm9yIiwgdCwgciwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICB9KQogICAgICAgIH0pLmNhbGwodGhpcywgInVuZGVmaW5lZCIgIT0gdHlwZW9mIGdsb2JhbCA/IGdsb2JhbCA6ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBzZWxmID8gc2VsZiA6ICJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cgOiB7fSkKICAgIH0sIHsKICAgICAgICBqcXVlcnk6IDE1LAogICAgICAgIHVuZGVyc2NvcmU6IDEwCiAgICB9XSwKICAgIDEwOiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgZnVuY3Rpb24gdCh0KSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlKGUsIG4sIHIsIGksIG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKDsgbyA+PSAwICYmIGEgPiBvOyBvICs9IHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBpID8gaVtvXSA6IG87CiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBuKHIsIGVbc10sIHMsIGUpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obiwgciwgaSwgbykgewogICAgICAgICAgICAgICAgICAgIHIgPSB3KHIsIG8sIDQpOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gIVMobikgJiYgeC5rZXlzKG4pLAogICAgICAgICAgICAgICAgICAgICAgICBzID0gKGEgfHwgbikubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICB1ID0gdCA+IDAgPyAwIDogcyAtIDE7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPCAzICYmIChpID0gblthID8gYVt1XSA6IHVdLCB1ICs9IHQpLCBlKG4sIHIsIGksIGEsIHUsIHMpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHIodCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICBuID0gXyhuLCByKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gQyhlKSwgbyA9IHQgPiAwID8gMCA6IGkgLSAxOyBvID49IDAgJiYgaSA+IG87IG8gKz0gdCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4oZVtvXSwgbywgZSkpIHJldHVybiBvOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyLCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICBzID0gQyhyKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIm51bWJlciIgPT0gdHlwZW9mIG8pIHQgPiAwID8gYSA9IG8gPj0gMCA/IG8gOiBNYXRoLm1heChvICsgcywgYSkgOiBzID0gbyA+PSAwID8gTWF0aC5taW4obyArIDEsIHMpIDogbyArIHMgKyAxOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG4gJiYgbyAmJiBzKSByZXR1cm4gbyA9IG4ociwgaSksIHJbb10gPT09IGkgPyBvIDogLTE7CiAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGkpIHJldHVybiBvID0gZShwLmNhbGwociwgYSwgcyksIHguaXNOYU4pLCBvID49IDAgPyBvICsgYSA6IC0xOwogICAgICAgICAgICAgICAgICAgIGZvciAobyA9IHQgPiAwID8gYSA6IHMgLSAxOyBvID49IDAgJiYgcyA+IG87IG8gKz0gdCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJbb10gPT09IGkpIHJldHVybiBvOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBvKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gTy5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgciA9IHQuY29uc3RydWN0b3IsCiAgICAgICAgICAgICAgICAgICAgaSA9IHguaXNGdW5jdGlvbihyKSAmJiByLnByb3RvdHlwZSB8fCBjLAogICAgICAgICAgICAgICAgICAgIG8gPSAiY29uc3RydWN0b3IiOwogICAgICAgICAgICAgICAgZm9yICh4Lmhhcyh0LCBvKSAmJiAheC5jb250YWlucyhlLCBvKSAmJiBlLnB1c2gobyk7IG4tLTspIG8gPSBPW25dLCBvIGluIHQgJiYgdFtvXSAhPT0gaVtvXSAmJiAheC5jb250YWlucyhlLCBvKSAmJiBlLnB1c2gobykKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgYSA9IHRoaXMsCiAgICAgICAgICAgICAgICBzID0gYS5fLAogICAgICAgICAgICAgICAgdSA9IEFycmF5LnByb3RvdHlwZSwKICAgICAgICAgICAgICAgIGMgPSBPYmplY3QucHJvdG90eXBlLAogICAgICAgICAgICAgICAgbCA9IEZ1bmN0aW9uLnByb3RvdHlwZSwKICAgICAgICAgICAgICAgIGYgPSB1LnB1c2gsCiAgICAgICAgICAgICAgICBwID0gdS5zbGljZSwKICAgICAgICAgICAgICAgIGggPSBjLnRvU3RyaW5nLAogICAgICAgICAgICAgICAgZCA9IGMuaGFzT3duUHJvcGVydHksCiAgICAgICAgICAgICAgICBnID0gQXJyYXkuaXNBcnJheSwKICAgICAgICAgICAgICAgIHYgPSBPYmplY3Qua2V5cywKICAgICAgICAgICAgICAgIHkgPSBsLmJpbmQsCiAgICAgICAgICAgICAgICBtID0gT2JqZWN0LmNyZWF0ZSwKICAgICAgICAgICAgICAgIGIgPSBmdW5jdGlvbigpIHt9LAogICAgICAgICAgICAgICAgeCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHggPyB0IDogdGhpcyBpbnN0YW5jZW9mIHggPyB2b2lkKHRoaXMuX3dyYXBwZWQgPSB0KSA6IG5ldyB4KHQpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAidW5kZWZpbmVkIiAhPSB0eXBlb2YgbiA/ICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgZSAmJiBlLmV4cG9ydHMgJiYgKG4gPSBlLmV4cG9ydHMgPSB4KSwgbi5fID0geCkgOiBhLl8gPSB4LCB4LlZFUlNJT04gPSAiMS44LjMiOwogICAgICAgICAgICB2YXIgdyA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBlKSByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG51bGwgPT0gbiA/IDMgOiBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuY2FsbChlLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5jYWxsKGUsIG4sIHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNhbGwoZSwgbiwgciwgaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuLCByLCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuY2FsbChlLCBuLCByLCBpLCBvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmFwcGx5KGUsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgXyA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0ID8geC5pZGVudGl0eSA6IHguaXNGdW5jdGlvbih0KSA/IHcodCwgZSwgbikgOiB4LmlzT2JqZWN0KHQpID8geC5tYXRjaGVyKHQpIDogeC5wcm9wZXJ0eSh0KQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgeC5pdGVyYXRlZSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfKHQsIGUsIDEgLyAwKQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgayA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGFyZ3VtZW50cy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgyID4gciB8fCBudWxsID09IG4pIHJldHVybiBuOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgciA+IGk7IGkrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG8gPSBhcmd1bWVudHNbaV0sIGEgPSB0KG8pLCBzID0gYS5sZW5ndGgsIHUgPSAwOyBzID4gdTsgdSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBhW3VdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgJiYgdm9pZCAwICE9PSBuW2NdIHx8IChuW2NdID0gb1tjXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgVCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXguaXNPYmplY3QodCkpIHJldHVybiB7fTsKICAgICAgICAgICAgICAgICAgICBpZiAobSkgcmV0dXJuIG0odCk7CiAgICAgICAgICAgICAgICAgICAgYi5wcm90b3R5cGUgPSB0OwogICAgICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IGI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIucHJvdG90eXBlID0gbnVsbCwgZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIEUgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gZSA/IHZvaWQgMCA6IGVbdF0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaiA9IE1hdGgucG93KDIsIDUzKSAtIDEsCiAgICAgICAgICAgICAgICBDID0gRSgibGVuZ3RoIiksCiAgICAgICAgICAgICAgICBTID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gQyh0KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIm51bWJlciIgPT0gdHlwZW9mIGUgJiYgZSA+PSAwICYmIGogPj0gZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgeC5lYWNoID0geC5mb3JFYWNoID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgZSA9IHcoZSwgbik7CiAgICAgICAgICAgICAgICB2YXIgciwgaTsKICAgICAgICAgICAgICAgIGlmIChTKHQpKQogICAgICAgICAgICAgICAgICAgIGZvciAociA9IDAsIGkgPSB0Lmxlbmd0aDsgaSA+IHI7IHIrKykgZSh0W3JdLCByLCB0KTsKICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciBvID0geC5rZXlzKHQpOwogICAgICAgICAgICAgICAgICAgIGZvciAociA9IDAsIGkgPSBvLmxlbmd0aDsgaSA+IHI7IHIrKykgZSh0W29bcl1dLCBvW3JdLCB0KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgfSwgeC5tYXAgPSB4LmNvbGxlY3QgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICBlID0gXyhlLCBuKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAhUyh0KSAmJiB4LmtleXModCksIGkgPSAociB8fCB0KS5sZW5ndGgsIG8gPSBBcnJheShpKSwgYSA9IDA7IGkgPiBhOyBhKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHIgPyByW2FdIDogYTsKICAgICAgICAgICAgICAgICAgICBvW2FdID0gZSh0W3NdLCBzLCB0KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgfSwgeC5yZWR1Y2UgPSB4LmZvbGRsID0geC5pbmplY3QgPSB0KDEpLCB4LnJlZHVjZVJpZ2h0ID0geC5mb2xkciA9IHQoLTEpLCB4LmZpbmQgPSB4LmRldGVjdCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByOwogICAgICAgICAgICAgICAgcmV0dXJuIHIgPSBTKHQpID8geC5maW5kSW5kZXgodCwgZSwgbikgOiB4LmZpbmRLZXkodCwgZSwgbiksIHZvaWQgMCAhPT0gciAmJiAtMSAhPT0gciA/IHRbcl0gOiB2b2lkIDAKICAgICAgICAgICAgfSwgeC5maWx0ZXIgPSB4LnNlbGVjdCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByID0gW107CiAgICAgICAgICAgICAgICByZXR1cm4gZSA9IF8oZSwgbiksIHguZWFjaCh0LCBmdW5jdGlvbih0LCBuLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgZSh0LCBuLCBpKSAmJiByLnB1c2godCkKICAgICAgICAgICAgICAgIH0pLCByCiAgICAgICAgICAgIH0sIHgucmVqZWN0ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgcmV0dXJuIHguZmlsdGVyKHQsIHgubmVnYXRlKF8oZSkpLCBuKQogICAgICAgICAgICB9LCB4LmV2ZXJ5ID0geC5hbGwgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICBlID0gXyhlLCBuKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAhUyh0KSAmJiB4LmtleXModCksIGkgPSAociB8fCB0KS5sZW5ndGgsIG8gPSAwOyBpID4gbzsgbysrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSByID8gcltvXSA6IG87CiAgICAgICAgICAgICAgICAgICAgaWYgKCFlKHRbYV0sIGEsIHQpKSByZXR1cm4gITEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiAhMAogICAgICAgICAgICB9LCB4LnNvbWUgPSB4LmFueSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIGUgPSBfKGUsIG4pOwogICAgICAgICAgICAgICAgZm9yICh2YXIgciA9ICFTKHQpICYmIHgua2V5cyh0KSwgaSA9IChyIHx8IHQpLmxlbmd0aCwgbyA9IDA7IGkgPiBvOyBvKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHIgPyByW29dIDogbzsKICAgICAgICAgICAgICAgICAgICBpZiAoZSh0W2FdLCBhLCB0KSkgcmV0dXJuICEwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgfSwgeC5jb250YWlucyA9IHguaW5jbHVkZXMgPSB4LmluY2x1ZGUgPSBmdW5jdGlvbih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUyh0KSB8fCAodCA9IHgudmFsdWVzKHQpKSwgKCJudW1iZXIiICE9IHR5cGVvZiBuIHx8IHIpICYmIChuID0gMCksIHguaW5kZXhPZih0LCBlLCBuKSA+PSAwCiAgICAgICAgICAgIH0sIHguaW52b2tlID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBwLmNhbGwoYXJndW1lbnRzLCAyKSwKICAgICAgICAgICAgICAgICAgICByID0geC5pc0Z1bmN0aW9uKGUpOwogICAgICAgICAgICAgICAgcmV0dXJuIHgubWFwKHQsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHIgPyBlIDogdFtlXTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBpID8gaSA6IGkuYXBwbHkodCwgbikKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sIHgucGx1Y2sgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4geC5tYXAodCwgeC5wcm9wZXJ0eShlKSkKICAgICAgICAgICAgfSwgeC53aGVyZSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB4LmZpbHRlcih0LCB4Lm1hdGNoZXIoZSkpCiAgICAgICAgICAgIH0sIHguZmluZFdoZXJlID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHguZmluZCh0LCB4Lm1hdGNoZXIoZSkpCiAgICAgICAgICAgIH0sIHgubWF4ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHIsIGksIG8gPSAtKDEgLyAwKSwKICAgICAgICAgICAgICAgICAgICBhID0gLSgxIC8gMCk7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBlICYmIG51bGwgIT0gdCkgewogICAgICAgICAgICAgICAgICAgIHQgPSBTKHQpID8gdCA6IHgudmFsdWVzKHQpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwLCB1ID0gdC5sZW5ndGg7IHUgPiBzOyBzKyspIHIgPSB0W3NdLCByID4gbyAmJiAobyA9IHIpCiAgICAgICAgICAgICAgICB9IGVsc2UgZSA9IF8oZSwgbiksIHguZWFjaCh0LCBmdW5jdGlvbih0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgaSA9IGUodCwgbiwgciksIChpID4gYSB8fCBpID09PSAtKDEgLyAwKSAmJiBvID09PSAtKDEgLyAwKSkgJiYgKG8gPSB0LCBhID0gaSkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgfSwgeC5taW4gPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciwgaSwgbyA9IDEgLyAwLAogICAgICAgICAgICAgICAgICAgIGEgPSAxIC8gMDsKICAgICAgICAgICAgICAgIGlmIChudWxsID09IGUgJiYgbnVsbCAhPSB0KSB7CiAgICAgICAgICAgICAgICAgICAgdCA9IFModCkgPyB0IDogeC52YWx1ZXModCk7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDAsIHUgPSB0Lmxlbmd0aDsgdSA+IHM7IHMrKykgciA9IHRbc10sIG8gPiByICYmIChvID0gcikKICAgICAgICAgICAgICAgIH0gZWxzZSBlID0gXyhlLCBuKSwgeC5lYWNoKHQsIGZ1bmN0aW9uKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICBpID0gZSh0LCBuLCByKSwgKGEgPiBpIHx8IGkgPT09IDEgLyAwICYmIG8gPT09IDEgLyAwKSAmJiAobyA9IHQsIGEgPSBpKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gbwogICAgICAgICAgICB9LCB4LnNodWZmbGUgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBlLCBuID0gUyh0KSA/IHQgOiB4LnZhbHVlcyh0KSwgciA9IG4ubGVuZ3RoLCBpID0gQXJyYXkociksIG8gPSAwOyByID4gbzsgbysrKSBlID0geC5yYW5kb20oMCwgbyksIGUgIT09IG8gJiYgKGlbb10gPSBpW2VdKSwgaVtlXSA9IG5bb107CiAgICAgICAgICAgICAgICByZXR1cm4gaQogICAgICAgICAgICB9LCB4LnNhbXBsZSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IGUgfHwgbiA/IChTKHQpIHx8ICh0ID0geC52YWx1ZXModCkpLCB0W3gucmFuZG9tKHQubGVuZ3RoIC0gMSldKSA6IHguc2h1ZmZsZSh0KS5zbGljZSgwLCBNYXRoLm1heCgwLCBlKSkKICAgICAgICAgICAgfSwgeC5zb3J0QnkgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZSA9IF8oZSwgbiksIHgucGx1Y2soeC5tYXAodCwgZnVuY3Rpb24odCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0LAogICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogbiwKICAgICAgICAgICAgICAgICAgICAgICAgY3JpdGVyaWE6IGUodCwgbiwgcikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS5zb3J0KGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQuY3JpdGVyaWEsCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLmNyaXRlcmlhOwogICAgICAgICAgICAgICAgICAgIGlmIChuICE9PSByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID4gciB8fCB2b2lkIDAgPT09IG4pIHJldHVybiAxOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAociA+IG4gfHwgdm9pZCAwID09PSByKSByZXR1cm4gLTEKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaW5kZXggLSBlLmluZGV4CiAgICAgICAgICAgICAgICB9KSwgInZhbHVlIikKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIEEgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0ge307CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPSBfKG4sIHIpLCB4LmVhY2goZSwgZnVuY3Rpb24ociwgbykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG4ociwgbywgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHQoaSwgciwgYSkKICAgICAgICAgICAgICAgICAgICB9KSwgaQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICB4Lmdyb3VwQnkgPSBBKGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHguaGFzKHQsIG4pID8gdFtuXS5wdXNoKGUpIDogdFtuXSA9IFtlXQogICAgICAgICAgICB9KSwgeC5pbmRleEJ5ID0gQShmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB0W25dID0gZQogICAgICAgICAgICB9KSwgeC5jb3VudEJ5ID0gQShmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB4Lmhhcyh0LCBuKSA/IHRbbl0rKyA6IHRbbl0gPSAxCiAgICAgICAgICAgIH0pLCB4LnRvQXJyYXkgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdCA/IHguaXNBcnJheSh0KSA/IHAuY2FsbCh0KSA6IFModCkgPyB4Lm1hcCh0LCB4LmlkZW50aXR5KSA6IHgudmFsdWVzKHQpIDogW10KICAgICAgICAgICAgfSwgeC5zaXplID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCA/IDAgOiBTKHQpID8gdC5sZW5ndGggOiB4LmtleXModCkubGVuZ3RoCiAgICAgICAgICAgIH0sIHgucGFydGl0aW9uID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgZSA9IF8oZSwgbik7CiAgICAgICAgICAgICAgICB2YXIgciA9IFtdLAogICAgICAgICAgICAgICAgICAgIGkgPSBbXTsKICAgICAgICAgICAgICAgIHJldHVybiB4LmVhY2godCwgZnVuY3Rpb24odCwgbiwgbykgewogICAgICAgICAgICAgICAgICAgIChlKHQsIG4sIG8pID8gciA6IGkpLnB1c2godCkKICAgICAgICAgICAgICAgIH0pLCBbciwgaV0KICAgICAgICAgICAgfSwgeC5maXJzdCA9IHguaGVhZCA9IHgudGFrZSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyB2b2lkIDAgOiBudWxsID09IGUgfHwgbiA/IHRbMF0gOiB4LmluaXRpYWwodCwgdC5sZW5ndGggLSBlKQogICAgICAgICAgICB9LCB4LmluaXRpYWwgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcC5jYWxsKHQsIDAsIE1hdGgubWF4KDAsIHQubGVuZ3RoIC0gKG51bGwgPT0gZSB8fCBuID8gMSA6IGUpKSkKICAgICAgICAgICAgfSwgeC5sYXN0ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCA/IHZvaWQgMCA6IG51bGwgPT0gZSB8fCBuID8gdFt0Lmxlbmd0aCAtIDFdIDogeC5yZXN0KHQsIE1hdGgubWF4KDAsIHQubGVuZ3RoIC0gZSkpCiAgICAgICAgICAgIH0sIHgucmVzdCA9IHgudGFpbCA9IHguZHJvcCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBwLmNhbGwodCwgbnVsbCA9PSBlIHx8IG4gPyAxIDogZSkKICAgICAgICAgICAgfSwgeC5jb21wYWN0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHguZmlsdGVyKHQsIHguaWRlbnRpdHkpCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBOID0gZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IFtdLCBvID0gMCwgYSA9IHIgfHwgMCwgcyA9IEModCk7IHMgPiBhOyBhKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IHRbYV07CiAgICAgICAgICAgICAgICAgICAgaWYgKFModSkgJiYgKHguaXNBcnJheSh1KSB8fCB4LmlzQXJndW1lbnRzKHUpKSkgewogICAgICAgICAgICAgICAgICAgICAgICBlIHx8ICh1ID0gTih1LCBlLCBuKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB1Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpLmxlbmd0aCArPSBsOyBsID4gYzspIGlbbysrXSA9IHVbYysrXQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBuIHx8IChpW28rK10gPSB1KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgeC5mbGF0dGVuID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIE4odCwgZSwgITEpCiAgICAgICAgICAgIH0sIHgud2l0aG91dCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB4LmRpZmZlcmVuY2UodCwgcC5jYWxsKGFyZ3VtZW50cywgMSkpCiAgICAgICAgICAgIH0sIHgudW5pcSA9IHgudW5pcXVlID0gZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgeC5pc0Jvb2xlYW4oZSkgfHwgKHIgPSBuLCBuID0gZSwgZSA9ICExKSwgbnVsbCAhPSBuICYmIChuID0gXyhuLCByKSk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gW10sIG8gPSBbXSwgYSA9IDAsIHMgPSBDKHQpOyBzID4gYTsgYSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSB0W2FdLAogICAgICAgICAgICAgICAgICAgICAgICBjID0gbiA/IG4odSwgYSwgdCkgOiB1OwogICAgICAgICAgICAgICAgICAgIGUgPyAoYSAmJiBvID09PSBjIHx8IGkucHVzaCh1KSwgbyA9IGMpIDogbiA/IHguY29udGFpbnMobywgYykgfHwgKG8ucHVzaChjKSwgaS5wdXNoKHUpKSA6IHguY29udGFpbnMoaSwgdSkgfHwgaS5wdXNoKHUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaQogICAgICAgICAgICB9LCB4LnVuaW9uID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4geC51bmlxKE4oYXJndW1lbnRzLCAhMCwgITApKQogICAgICAgICAgICB9LCB4LmludGVyc2VjdGlvbiA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSAwLCBpID0gQyh0KTsgaSA+IHI7IHIrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBvID0gdFtyXTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXguY29udGFpbnMoZSwgbykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSA9IDE7IG4gPiBhICYmIHguY29udGFpbnMoYXJndW1lbnRzW2FdLCBvKTsgYSsrKTsKICAgICAgICAgICAgICAgICAgICAgICAgYSA9PT0gbiAmJiBlLnB1c2gobykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICB9LCB4LmRpZmZlcmVuY2UgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IE4oYXJndW1lbnRzLCAhMCwgITAsIDEpOwogICAgICAgICAgICAgICAgcmV0dXJuIHguZmlsdGVyKHQsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXguY29udGFpbnMoZSwgdCkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sIHguemlwID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4geC51bnppcChhcmd1bWVudHMpCiAgICAgICAgICAgIH0sIHgudW56aXAgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gdCAmJiB4Lm1heCh0LCBDKS5sZW5ndGggfHwgMCwgbiA9IEFycmF5KGUpLCByID0gMDsgZSA+IHI7IHIrKykgbltyXSA9IHgucGx1Y2sodCwgcik7CiAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICB9LCB4Lm9iamVjdCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSB7fSwgciA9IDAsIGkgPSBDKHQpOyBpID4gcjsgcisrKSBlID8gblt0W3JdXSA9IGVbcl0gOiBuW3Rbcl1bMF1dID0gdFtyXVsxXTsKICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgIH0sIHguZmluZEluZGV4ID0gcigxKSwgeC5maW5kTGFzdEluZGV4ID0gcigtMSksIHguc29ydGVkSW5kZXggPSBmdW5jdGlvbih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICBuID0gXyhuLCByLCAxKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBuKGUpLCBvID0gMCwgYSA9IEModCk7IGEgPiBvOykgewogICAgICAgICAgICAgICAgICAgIHZhciBzID0gTWF0aC5mbG9vcigobyArIGEpIC8gMik7CiAgICAgICAgICAgICAgICAgICAgbih0W3NdKSA8IGkgPyBvID0gcyArIDEgOiBhID0gcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgfSwgeC5pbmRleE9mID0gaSgxLCB4LmZpbmRJbmRleCwgeC5zb3J0ZWRJbmRleCksIHgubGFzdEluZGV4T2YgPSBpKC0xLCB4LmZpbmRMYXN0SW5kZXgpLCB4LnJhbmdlID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgbnVsbCA9PSBlICYmIChlID0gdCB8fCAwLCB0ID0gMCksIG4gPSBuIHx8IDE7CiAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gTWF0aC5tYXgoTWF0aC5jZWlsKChlIC0gdCkgLyBuKSwgMCksIGkgPSBBcnJheShyKSwgbyA9IDA7IHIgPiBvOyBvKyssIHQgKz0gbikgaVtvXSA9IHQ7CiAgICAgICAgICAgICAgICByZXR1cm4gaQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgUiA9IGZ1bmN0aW9uKHQsIGUsIG4sIHIsIGkpIHsKICAgICAgICAgICAgICAgIGlmICghKHIgaW5zdGFuY2VvZiBlKSkgcmV0dXJuIHQuYXBwbHkobiwgaSk7CiAgICAgICAgICAgICAgICB2YXIgbyA9IFQodC5wcm90b3R5cGUpLAogICAgICAgICAgICAgICAgICAgIGEgPSB0LmFwcGx5KG8sIGkpOwogICAgICAgICAgICAgICAgcmV0dXJuIHguaXNPYmplY3QoYSkgPyBhIDogbwogICAgICAgICAgICB9OwogICAgICAgICAgICB4LmJpbmQgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICBpZiAoeSAmJiB0LmJpbmQgPT09IHkpIHJldHVybiB5LmFwcGx5KHQsIHAuY2FsbChhcmd1bWVudHMsIDEpKTsKICAgICAgICAgICAgICAgIGlmICgheC5pc0Z1bmN0aW9uKHQpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJCaW5kIG11c3QgYmUgY2FsbGVkIG9uIGEgZnVuY3Rpb24iKTsKICAgICAgICAgICAgICAgIHZhciBuID0gcC5jYWxsKGFyZ3VtZW50cywgMiksCiAgICAgICAgICAgICAgICAgICAgciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUih0LCByLCBlLCB0aGlzLCBuLmNvbmNhdChwLmNhbGwoYXJndW1lbnRzKSkpCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgIH0sIHgucGFydGlhbCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gcC5jYWxsKGFyZ3VtZW50cywgMSksCiAgICAgICAgICAgICAgICAgICAgbiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gMCwgaSA9IGUubGVuZ3RoLCBvID0gQXJyYXkoaSksIGEgPSAwOyBpID4gYTsgYSsrKSBvW2FdID0gZVthXSA9PT0geCA/IGFyZ3VtZW50c1tyKytdIDogZVthXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IHIgPCBhcmd1bWVudHMubGVuZ3RoOykgby5wdXNoKGFyZ3VtZW50c1tyKytdKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFIodCwgbiwgdGhpcywgdGhpcywgbykKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgfSwgeC5iaW5kQWxsID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIGUsIG4sIHIgPSBhcmd1bWVudHMubGVuZ3RoOwogICAgICAgICAgICAgICAgaWYgKDEgPj0gcikgdGhyb3cgbmV3IEVycm9yKCJiaW5kQWxsIG11c3QgYmUgcGFzc2VkIGZ1bmN0aW9uIG5hbWVzIik7CiAgICAgICAgICAgICAgICBmb3IgKGUgPSAxOyByID4gZTsgZSsrKSBuID0gYXJndW1lbnRzW2VdLCB0W25dID0geC5iaW5kKHRbbl0sIHQpOwogICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgfSwgeC5tZW1vaXplID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBmdW5jdGlvbihyKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBuLmNhY2hlLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gIiIgKyAoZSA/IGUuYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IHIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB4LmhhcyhpLCBvKSB8fCAoaVtvXSA9IHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSksIGlbb10KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gbi5jYWNoZSA9IHt9LCBuCiAgICAgICAgICAgIH0sIHguZGVsYXkgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHAuY2FsbChhcmd1bWVudHMsIDIpOwogICAgICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYXBwbHkobnVsbCwgbikKICAgICAgICAgICAgICAgIH0sIGUpCiAgICAgICAgICAgIH0sIHguZGVmZXIgPSB4LnBhcnRpYWwoeC5kZWxheSwgeCwgMSksIHgudGhyb3R0bGUgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciwgaSwgbywgYSA9IG51bGwsCiAgICAgICAgICAgICAgICAgICAgcyA9IDA7CiAgICAgICAgICAgICAgICBuIHx8IChuID0ge30pOwogICAgICAgICAgICAgICAgdmFyIHUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBzID0gbi5sZWFkaW5nID09PSAhMSA/IDAgOiB4Lm5vdygpLCBhID0gbnVsbCwgbyA9IHQuYXBwbHkociwgaSksIGEgfHwgKHIgPSBpID0gbnVsbCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB4Lm5vdygpOwogICAgICAgICAgICAgICAgICAgIHMgfHwgbi5sZWFkaW5nICE9PSAhMSB8fCAocyA9IGMpOwogICAgICAgICAgICAgICAgICAgIHZhciBsID0gZSAtIChjIC0gcyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPSB0aGlzLCBpID0gYXJndW1lbnRzLCAwID49IGwgfHwgbCA+IGUgPyAoYSAmJiAoY2xlYXJUaW1lb3V0KGEpLCBhID0gbnVsbCksIHMgPSBjLCBvID0gdC5hcHBseShyLCBpKSwgYSB8fCAociA9IGkgPSBudWxsKSkgOiBhIHx8IG4udHJhaWxpbmcgPT09ICExIHx8IChhID0gc2V0VGltZW91dCh1LCBsKSksIG8KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgeC5kZWJvdW5jZSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByLCBpLCBvLCBhLCBzLCB1ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB4Lm5vdygpIC0gYTsKICAgICAgICAgICAgICAgICAgICBlID4gYyAmJiBjID49IDAgPyByID0gc2V0VGltZW91dCh1LCBlIC0gYykgOiAociA9IG51bGwsIG4gfHwgKHMgPSB0LmFwcGx5KG8sIGkpLCByIHx8IChvID0gaSA9IG51bGwpKSkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgbyA9IHRoaXMsIGkgPSBhcmd1bWVudHMsIGEgPSB4Lm5vdygpOwogICAgICAgICAgICAgICAgICAgIHZhciBjID0gbiAmJiAhcjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciB8fCAociA9IHNldFRpbWVvdXQodSwgZSkpLCBjICYmIChzID0gdC5hcHBseShvLCBpKSwgbyA9IGkgPSBudWxsKSwgcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB4LndyYXAgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4geC5wYXJ0aWFsKGUsIHQpCiAgICAgICAgICAgIH0sIHgubmVnYXRlID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHguY29tcG9zZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIHQgPSBhcmd1bWVudHMsCiAgICAgICAgICAgICAgICAgICAgZSA9IHQubGVuZ3RoIC0gMTsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gZSwgciA9IHRbZV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTsgbi0tOykgciA9IHRbbl0uY2FsbCh0aGlzLCByKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB4LmFmdGVyID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAtLXQgPCAxID8gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogdm9pZCAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHguYmVmb3JlID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0tdCA+IDAgJiYgKG4gPSBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpLCAxID49IHQgJiYgKGUgPSBudWxsKSwgbgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB4Lm9uY2UgPSB4LnBhcnRpYWwoeC5iZWZvcmUsIDIpOwogICAgICAgICAgICB2YXIgSSA9ICF7CiAgICAgICAgICAgICAgICAgICAgdG9TdHJpbmc6IG51bGwKICAgICAgICAgICAgICAgIH0ucHJvcGVydHlJc0VudW1lcmFibGUoInRvU3RyaW5nIiksCiAgICAgICAgICAgICAgICBPID0gWyJ2YWx1ZU9mIiwgImlzUHJvdG90eXBlT2YiLCAidG9TdHJpbmciLCAicHJvcGVydHlJc0VudW1lcmFibGUiLCAiaGFzT3duUHJvcGVydHkiLCAidG9Mb2NhbGVTdHJpbmciXTsKICAgICAgICAgICAgeC5rZXlzID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgaWYgKCF4LmlzT2JqZWN0KHQpKSByZXR1cm4gW107CiAgICAgICAgICAgICAgICBpZiAodikgcmV0dXJuIHYodCk7CiAgICAgICAgICAgICAgICB2YXIgZSA9IFtdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiB0KSB4Lmhhcyh0LCBuKSAmJiBlLnB1c2gobik7CiAgICAgICAgICAgICAgICByZXR1cm4gSSAmJiBvKHQsIGUpLCBlCiAgICAgICAgICAgIH0sIHguYWxsS2V5cyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIGlmICgheC5pc09iamVjdCh0KSkgcmV0dXJuIFtdOwogICAgICAgICAgICAgICAgdmFyIGUgPSBbXTsKICAgICAgICAgICAgICAgIGZvciAodmFyIG4gaW4gdCkgZS5wdXNoKG4pOwogICAgICAgICAgICAgICAgcmV0dXJuIEkgJiYgbyh0LCBlKSwgZQogICAgICAgICAgICB9LCB4LnZhbHVlcyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSB4LmtleXModCksIG4gPSBlLmxlbmd0aCwgciA9IEFycmF5KG4pLCBpID0gMDsgbiA+IGk7IGkrKykgcltpXSA9IHRbZVtpXV07CiAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICB9LCB4Lm1hcE9iamVjdCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIGUgPSBfKGUsIG4pOwogICAgICAgICAgICAgICAgZm9yICh2YXIgciwgaSA9IHgua2V5cyh0KSwgbyA9IGkubGVuZ3RoLCBhID0ge30sIHMgPSAwOyBvID4gczsgcysrKSByID0gaVtzXSwgYVtyXSA9IGUodFtyXSwgciwgdCk7CiAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgICAgICB9LCB4LnBhaXJzID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IHgua2V5cyh0KSwgbiA9IGUubGVuZ3RoLCByID0gQXJyYXkobiksIGkgPSAwOyBuID4gaTsgaSsrKSByW2ldID0gW2VbaV0sIHRbZVtpXV1dOwogICAgICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAgICAgfSwgeC5pbnZlcnQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0ge30sIG4gPSB4LmtleXModCksIHIgPSAwLCBpID0gbi5sZW5ndGg7IGkgPiByOyByKyspIGVbdFtuW3JdXV0gPSBuW3JdOwogICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgfSwgeC5mdW5jdGlvbnMgPSB4Lm1ldGhvZHMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IFtdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiB0KSB4LmlzRnVuY3Rpb24odFtuXSkgJiYgZS5wdXNoKG4pOwogICAgICAgICAgICAgICAgcmV0dXJuIGUuc29ydCgpCiAgICAgICAgICAgIH0sIHguZXh0ZW5kID0gayh4LmFsbEtleXMpLCB4LmV4dGVuZE93biA9IHguYXNzaWduID0gayh4LmtleXMpLCB4LmZpbmRLZXkgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICBlID0gXyhlLCBuKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIsIGkgPSB4LmtleXModCksIG8gPSAwLCBhID0gaS5sZW5ndGg7IGEgPiBvOyBvKyspCiAgICAgICAgICAgICAgICAgICAgaWYgKHIgPSBpW29dLCBlKHRbcl0sIHIsIHQpKSByZXR1cm4gcgogICAgICAgICAgICB9LCB4LnBpY2sgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciwgaSwgbyA9IHt9LAogICAgICAgICAgICAgICAgICAgIGEgPSB0OwogICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gYSkgcmV0dXJuIG87CiAgICAgICAgICAgICAgICB4LmlzRnVuY3Rpb24oZSkgPyAoaSA9IHguYWxsS2V5cyhhKSwgciA9IHcoZSwgbikpIDogKGkgPSBOKGFyZ3VtZW50cywgITEsICExLCAxKSwgciA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSBpbiBuCiAgICAgICAgICAgICAgICB9LCBhID0gT2JqZWN0KGEpKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwLCB1ID0gaS5sZW5ndGg7IHUgPiBzOyBzKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGlbc10sCiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBhW2NdOwogICAgICAgICAgICAgICAgICAgIHIobCwgYywgYSkgJiYgKG9bY10gPSBsKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgfSwgeC5vbWl0ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgaWYgKHguaXNGdW5jdGlvbihlKSkgZSA9IHgubmVnYXRlKGUpOwogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB4Lm1hcChOKGFyZ3VtZW50cywgITEsICExLCAxKSwgU3RyaW5nKTsKICAgICAgICAgICAgICAgICAgICBlID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXguY29udGFpbnMociwgZSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4geC5waWNrKHQsIGUsIG4pCiAgICAgICAgICAgIH0sIHguZGVmYXVsdHMgPSBrKHguYWxsS2V5cywgITApLCB4LmNyZWF0ZSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gVCh0KTsKICAgICAgICAgICAgICAgIHJldHVybiBlICYmIHguZXh0ZW5kT3duKG4sIGUpLCBuCiAgICAgICAgICAgIH0sIHguY2xvbmUgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4geC5pc09iamVjdCh0KSA/IHguaXNBcnJheSh0KSA/IHQuc2xpY2UoKSA6IHguZXh0ZW5kKHt9LCB0KSA6IHQKICAgICAgICAgICAgfSwgeC50YXAgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZSh0KSwgdAogICAgICAgICAgICB9LCB4LmlzTWF0Y2ggPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHgua2V5cyhlKSwKICAgICAgICAgICAgICAgICAgICByID0gbi5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0KSByZXR1cm4gIXI7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gT2JqZWN0KHQpLCBvID0gMDsgciA+IG87IG8rKykgewogICAgICAgICAgICAgICAgICAgIHZhciBhID0gbltvXTsKICAgICAgICAgICAgICAgICAgICBpZiAoZVthXSAhPT0gaVthXSB8fCAhKGEgaW4gaSkpIHJldHVybiAhMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuICEwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBMID0gZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgaWYgKHQgPT09IGUpIHJldHVybiAwICE9PSB0IHx8IDEgLyB0ID09PSAxIC8gZTsKICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQgfHwgbnVsbCA9PSBlKSByZXR1cm4gdCA9PT0gZTsKICAgICAgICAgICAgICAgIHQgaW5zdGFuY2VvZiB4ICYmICh0ID0gdC5fd3JhcHBlZCksIGUgaW5zdGFuY2VvZiB4ICYmIChlID0gZS5fd3JhcHBlZCk7CiAgICAgICAgICAgICAgICB2YXIgaSA9IGguY2FsbCh0KTsKICAgICAgICAgICAgICAgIGlmIChpICE9PSBoLmNhbGwoZSkpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgIHN3aXRjaCAoaSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgIltvYmplY3QgUmVnRXhwXSI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiW29iamVjdCBTdHJpbmddIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIiICsgdCA9PSAiIiArIGU7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiW29iamVjdCBOdW1iZXJdIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICt0ICE9PSArdCA/ICtlICE9PSArZSA6IDAgPT09ICt0ID8gMSAvICt0ID09PSAxIC8gZSA6ICt0ID09PSArZTsKICAgICAgICAgICAgICAgICAgICBjYXNlICJbb2JqZWN0IERhdGVdIjoKICAgICAgICAgICAgICAgICAgICBjYXNlICJbb2JqZWN0IEJvb2xlYW5dIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICt0ID09PSArZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG8gPSAiW29iamVjdCBBcnJheV0iID09PSBpOwogICAgICAgICAgICAgICAgaWYgKCFvKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJvYmplY3QiICE9IHR5cGVvZiB0IHx8ICJvYmplY3QiICE9IHR5cGVvZiBlKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB0LmNvbnN0cnVjdG9yLAogICAgICAgICAgICAgICAgICAgICAgICBzID0gZS5jb25zdHJ1Y3RvcjsKICAgICAgICAgICAgICAgICAgICBpZiAoYSAhPT0gcyAmJiAhKHguaXNGdW5jdGlvbihhKSAmJiBhIGluc3RhbmNlb2YgYSAmJiB4LmlzRnVuY3Rpb24ocykgJiYgcyBpbnN0YW5jZW9mIHMpICYmICJjb25zdHJ1Y3RvciIgaW4gdCAmJiAiY29uc3RydWN0b3IiIGluIGUpIHJldHVybiAhMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbiA9IG4gfHwgW10sIHIgPSByIHx8IFtdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgdSA9IG4ubGVuZ3RoOyB1LS07KQogICAgICAgICAgICAgICAgICAgIGlmIChuW3VdID09PSB0KSByZXR1cm4gclt1XSA9PT0gZTsKICAgICAgICAgICAgICAgIGlmIChuLnB1c2godCksIHIucHVzaChlKSwgbykgewogICAgICAgICAgICAgICAgICAgIGlmICh1ID0gdC5sZW5ndGgsIHUgIT09IGUubGVuZ3RoKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgZm9yICg7IHUtLTspCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghTCh0W3VdLCBlW3VdLCBuLCByKSkgcmV0dXJuICExCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciBjLCBsID0geC5rZXlzKHQpOwogICAgICAgICAgICAgICAgICAgIGlmICh1ID0gbC5sZW5ndGgsIHgua2V5cyhlKS5sZW5ndGggIT09IHUpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICBmb3IgKDsgdS0tOykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPSBsW3VdLCAheC5oYXMoZSwgYykgfHwgIUwodFtjXSwgZVtjXSwgbiwgcikpIHJldHVybiAhMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG4ucG9wKCksIHIucG9wKCksICEwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHguaXNFcXVhbCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBMKHQsIGUpCiAgICAgICAgICAgIH0sIHguaXNFbXB0eSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyAhMCA6IFModCkgJiYgKHguaXNBcnJheSh0KSB8fCB4LmlzU3RyaW5nKHQpIHx8IHguaXNBcmd1bWVudHModCkpID8gMCA9PT0gdC5sZW5ndGggOiAwID09PSB4LmtleXModCkubGVuZ3RoCiAgICAgICAgICAgIH0sIHguaXNFbGVtZW50ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuICEoIXQgfHwgMSAhPT0gdC5ub2RlVHlwZSkKICAgICAgICAgICAgfSwgeC5pc0FycmF5ID0gZyB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIltvYmplY3QgQXJyYXldIiA9PT0gaC5jYWxsKHQpCiAgICAgICAgICAgIH0sIHguaXNPYmplY3QgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IHR5cGVvZiB0OwogICAgICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT09IGUgfHwgIm9iamVjdCIgPT09IGUgJiYgISF0CiAgICAgICAgICAgIH0sIHguZWFjaChbIkFyZ3VtZW50cyIsICJGdW5jdGlvbiIsICJTdHJpbmciLCAiTnVtYmVyIiwgIkRhdGUiLCAiUmVnRXhwIiwgIkVycm9yIl0sIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHhbImlzIiArIHRdID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBoLmNhbGwoZSkgPT09ICJbb2JqZWN0ICIgKyB0ICsgIl0iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCB4LmlzQXJndW1lbnRzKGFyZ3VtZW50cykgfHwgKHguaXNBcmd1bWVudHMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4geC5oYXModCwgImNhbGxlZSIpCiAgICAgICAgICAgIH0pLCAiZnVuY3Rpb24iICE9IHR5cGVvZiAvLi8gJiYgIm9iamVjdCIgIT0gdHlwZW9mIEludDhBcnJheSAmJiAoeC5pc0Z1bmN0aW9uID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIHQgfHwgITEKICAgICAgICAgICAgfSksIHguaXNGaW5pdGUgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXNGaW5pdGUodCkgJiYgIWlzTmFOKHBhcnNlRmxvYXQodCkpCiAgICAgICAgICAgIH0sIHguaXNOYU4gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4geC5pc051bWJlcih0KSAmJiB0ICE9PSArdAogICAgICAgICAgICB9LCB4LmlzQm9vbGVhbiA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSAhMCB8fCB0ID09PSAhMSB8fCAiW29iamVjdCBCb29sZWFuXSIgPT09IGguY2FsbCh0KQogICAgICAgICAgICB9LCB4LmlzTnVsbCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09PSB0CiAgICAgICAgICAgIH0sIHguaXNVbmRlZmluZWQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0CiAgICAgICAgICAgIH0sIHguaGFzID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdCAmJiBkLmNhbGwodCwgZSkKICAgICAgICAgICAgfSwgeC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYS5fID0gcywgdGhpcwogICAgICAgICAgICB9LCB4LmlkZW50aXR5ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgfSwgeC5jb25zdGFudCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB4Lm5vb3AgPSBmdW5jdGlvbigpIHt9LCB4LnByb3BlcnR5ID0gRSwgeC5wcm9wZXJ0eU9mID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCA/IGZ1bmN0aW9uKCkge30gOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRbZV0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgeC5tYXRjaGVyID0geC5tYXRjaGVzID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQgPSB4LmV4dGVuZE93bih7fSwgdCksCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5pc01hdGNoKGUsIHQpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB4LnRpbWVzID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHIgPSBBcnJheShNYXRoLm1heCgwLCB0KSk7CiAgICAgICAgICAgICAgICBlID0gdyhlLCBuLCAxKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyB0ID4gaTsgaSsrKSByW2ldID0gZShpKTsKICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgIH0sIHgucmFuZG9tID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gZSAmJiAoZSA9IHQsIHQgPSAwKSwgdCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChlIC0gdCArIDEpKQogICAgICAgICAgICB9LCB4Lm5vdyA9IERhdGUubm93IHx8IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIChuZXcgRGF0ZSkuZ2V0VGltZSgpCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBEID0gewogICAgICAgICAgICAgICAgICAgICImIjogIiZhbXA7IiwKICAgICAgICAgICAgICAgICAgICAiPCI6ICImbHQ7IiwKICAgICAgICAgICAgICAgICAgICAiPiI6ICImZ3Q7IiwKICAgICAgICAgICAgICAgICAgICAnIic6ICImcXVvdDsiLAogICAgICAgICAgICAgICAgICAgICInIjogIiYjeDI3OyIsCiAgICAgICAgICAgICAgICAgICAgImAiOiAiJiN4NjA7IgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFAgPSB4LmludmVydChEKSwKICAgICAgICAgICAgICAgICQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdFtlXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBuID0gIig/OiIgKyB4LmtleXModCkuam9pbigifCIpICsgIikiLAogICAgICAgICAgICAgICAgICAgICAgICByID0gUmVnRXhwKG4pLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gUmVnRXhwKG4sICJnIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBudWxsID09IHQgPyAiIiA6ICIiICsgdCwgci50ZXN0KHQpID8gdC5yZXBsYWNlKGksIGUpIDogdAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIHguZXNjYXBlID0gJChEKSwgeC51bmVzY2FwZSA9ICQoUCksIHgucmVzdWx0ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHIgPSBudWxsID09IHQgPyB2b2lkIDAgOiB0W2VdOwogICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gciAmJiAociA9IG4pLCB4LmlzRnVuY3Rpb24ocikgPyByLmNhbGwodCkgOiByCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBxID0gMDsKICAgICAgICAgICAgeC51bmlxdWVJZCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gKytxICsgIiI7CiAgICAgICAgICAgICAgICByZXR1cm4gdCA/IHQgKyBlIDogZQogICAgICAgICAgICB9LCB4LnRlbXBsYXRlU2V0dGluZ3MgPSB7CiAgICAgICAgICAgICAgICBldmFsdWF0ZTogLzwlKFtcc1xTXSs/KSU+L2csCiAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZTogLzwlPShbXHNcU10rPyklPi9nLAogICAgICAgICAgICAgICAgZXNjYXBlOiAvPCUtKFtcc1xTXSs/KSU+L2cKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIEggPSAvKC4pXi8sCiAgICAgICAgICAgICAgICBNID0gewogICAgICAgICAgICAgICAgICAgICInIjogIiciLAogICAgICAgICAgICAgICAgICAgICJcXCI6ICJcXCIsCiAgICAgICAgICAgICAgICAgICAgIlxyIjogInIiLAogICAgICAgICAgICAgICAgICAgICJcbiI6ICJuIiwKICAgICAgICAgICAgICAgICAgICAiXHUyMDI4IjogInUyMDI4IiwKICAgICAgICAgICAgICAgICAgICAiXHUyMDI5IjogInUyMDI5IgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIEYgPSAvXFx8J3xccnxcbnxcdTIwMjh8XHUyMDI5L2csCiAgICAgICAgICAgICAgICBCID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAiXFwiICsgTVt0XQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgeC50ZW1wbGF0ZSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICFlICYmIG4gJiYgKGUgPSBuKSwgZSA9IHguZGVmYXVsdHMoe30sIGUsIHgudGVtcGxhdGVTZXR0aW5ncyk7CiAgICAgICAgICAgICAgICB2YXIgciA9IFJlZ0V4cChbKGUuZXNjYXBlIHx8IEgpLnNvdXJjZSwgKGUuaW50ZXJwb2xhdGUgfHwgSCkuc291cmNlLCAoZS5ldmFsdWF0ZSB8fCBIKS5zb3VyY2VdLmpvaW4oInwiKSArICJ8JCIsICJnIiksCiAgICAgICAgICAgICAgICAgICAgaSA9IDAsCiAgICAgICAgICAgICAgICAgICAgbyA9ICJfX3ArPSciOwogICAgICAgICAgICAgICAgdC5yZXBsYWNlKHIsIGZ1bmN0aW9uKGUsIG4sIHIsIGEsIHMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyArPSB0LnNsaWNlKGksIHMpLnJlcGxhY2UoRiwgQiksIGkgPSBzICsgZS5sZW5ndGgsIG4gPyBvICs9ICInK1xuKChfX3Q9KCIgKyBuICsgIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xuJyIgOiByID8gbyArPSAiJytcbigoX190PSgiICsgciArICIpKT09bnVsbD8nJzpfX3QpK1xuJyIgOiBhICYmIChvICs9ICInO1xuIiArIGEgKyAiXG5fX3ArPSciKSwgZQogICAgICAgICAgICAgICAgfSksIG8gKz0gIic7XG4iLCBlLnZhcmlhYmxlIHx8IChvID0gIndpdGgob2JqfHx7fSl7XG4iICsgbyArICJ9XG4iKSwgbyA9ICJ2YXIgX190LF9fcD0nJyxfX2o9QXJyYXkucHJvdG90eXBlLmpvaW4scHJpbnQ9ZnVuY3Rpb24oKXtfX3ArPV9fai5jYWxsKGFyZ3VtZW50cywnJyk7fTtcbiIgKyBvICsgInJldHVybiBfX3A7XG4iOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG5ldyBGdW5jdGlvbihlLnZhcmlhYmxlIHx8ICJvYmoiLCAiXyIsIG8pCiAgICAgICAgICAgICAgICB9IGNhdGNoIChzKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgcy5zb3VyY2UgPSBvLCBzCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgdSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuY2FsbCh0aGlzLCB0LCB4KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYyA9IGUudmFyaWFibGUgfHwgIm9iaiI7CiAgICAgICAgICAgICAgICByZXR1cm4gdS5zb3VyY2UgPSAiZnVuY3Rpb24oIiArIGMgKyAiKXtcbiIgKyBvICsgIn0iLCB1CiAgICAgICAgICAgIH0sIHguY2hhaW4gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IHgodCk7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5fY2hhaW4gPSAhMCwgZQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgVSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0Ll9jaGFpbiA/IHgoZSkuY2hhaW4oKSA6IGUKICAgICAgICAgICAgfTsKICAgICAgICAgICAgeC5taXhpbiA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHguZWFjaCh4LmZ1bmN0aW9ucyh0KSwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0geFtlXSA9IHRbZV07CiAgICAgICAgICAgICAgICAgICAgeC5wcm90b3R5cGVbZV0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBbdGhpcy5fd3JhcHBlZF07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmLmFwcGx5KHQsIGFyZ3VtZW50cyksIFUodGhpcywgbi5hcHBseSh4LCB0KSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LCB4Lm1peGluKHgpLCB4LmVhY2goWyJwb3AiLCAicHVzaCIsICJyZXZlcnNlIiwgInNoaWZ0IiwgInNvcnQiLCAic3BsaWNlIiwgInVuc2hpZnQiXSwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSB1W3RdOwogICAgICAgICAgICAgICAgeC5wcm90b3R5cGVbdF0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMuX3dyYXBwZWQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuYXBwbHkobiwgYXJndW1lbnRzKSwgInNoaWZ0IiAhPT0gdCAmJiAic3BsaWNlIiAhPT0gdCB8fCAwICE9PSBuLmxlbmd0aCB8fCBkZWxldGUgblswXSwgVSh0aGlzLCBuKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgeC5lYWNoKFsiY29uY2F0IiwgImpvaW4iLCAic2xpY2UiXSwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSB1W3RdOwogICAgICAgICAgICAgICAgeC5wcm90b3R5cGVbdF0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gVSh0aGlzLCBlLmFwcGx5KHRoaXMuX3dyYXBwZWQsIGFyZ3VtZW50cykpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCB4LnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dyYXBwZWQKICAgICAgICAgICAgfSwgeC5wcm90b3R5cGUudmFsdWVPZiA9IHgucHJvdG90eXBlLnRvSlNPTiA9IHgucHJvdG90eXBlLnZhbHVlLCB4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuICIiICsgdGhpcy5fd3JhcHBlZAogICAgICAgICAgICB9LCAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCAmJiBkZWZpbmUoInVuZGVyc2NvcmUiLCBbXSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4geAogICAgICAgICAgICB9KQogICAgICAgIH0pLmNhbGwodGhpcykKICAgIH0sIHt9XSwKICAgIDExOiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgIGZ1bmN0aW9uIHIoKSB7CiAgICAgICAgICAgIGlmICghcykgewogICAgICAgICAgICAgICAgcyA9ICEwOwogICAgICAgICAgICAgICAgZm9yICh2YXIgdCwgZSA9IGEubGVuZ3RoOyBlOykgewogICAgICAgICAgICAgICAgICAgIHQgPSBhLCBhID0gW107CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IC0xOyArK24gPCBlOykgdFtuXSgpOwogICAgICAgICAgICAgICAgICAgIGUgPSBhLmxlbmd0aAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcyA9ICExCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGkoKSB7fQogICAgICAgIHZhciBvID0gZS5leHBvcnRzID0ge30sCiAgICAgICAgICAgIGEgPSBbXSwKICAgICAgICAgICAgcyA9ICExOwogICAgICAgIG8ubmV4dFRpY2sgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIGEucHVzaCh0KSwgcyB8fCBzZXRUaW1lb3V0KHIsIDApCiAgICAgICAgfSwgby50aXRsZSA9ICJicm93c2VyIiwgby5icm93c2VyID0gITAsIG8uZW52ID0ge30sIG8uYXJndiA9IFtdLCBvLnZlcnNpb24gPSAiIiwgby52ZXJzaW9ucyA9IHt9LCBvLm9uID0gaSwgby5hZGRMaXN0ZW5lciA9IGksIG8ub25jZSA9IGksIG8ub2ZmID0gaSwgby5yZW1vdmVMaXN0ZW5lciA9IGksIG8ucmVtb3ZlQWxsTGlzdGVuZXJzID0gaSwgby5lbWl0ID0gaSwgby5iaW5kaW5nID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkIikKICAgICAgICB9LCBvLmN3ZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gIi8iCiAgICAgICAgfSwgby5jaGRpciA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKQogICAgICAgIH0sIG8udW1hc2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICB9CiAgICB9LCB7fV0sCiAgICAxMjogW2Z1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAhIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgZnVuY3Rpb24gZSh0KSB7CiAgICAgICAgICAgICAgICAifSIgPT09IHQubi5zdWJzdHIodC5uLmxlbmd0aCAtIDEpICYmICh0Lm4gPSB0Lm4uc3Vic3RyaW5nKDAsIHQubi5sZW5ndGggLSAxKSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdC50cmltID8gdC50cmltKCkgOiB0LnJlcGxhY2UoL15ccyp8XHMqJC9nLCAiIikKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICBpZiAoZS5jaGFyQXQobikgIT0gdC5jaGFyQXQoMCkpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAxLCBpID0gdC5sZW5ndGg7IGkgPiByOyByKyspCiAgICAgICAgICAgICAgICAgICAgaWYgKGUuY2hhckF0KG4gKyByKSAhPSB0LmNoYXJBdChyKSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgcmV0dXJuICEwCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGkoZSwgbiwgciwgcykgewogICAgICAgICAgICAgICAgdmFyIHUgPSBbXSwKICAgICAgICAgICAgICAgICAgICBjID0gbnVsbCwKICAgICAgICAgICAgICAgICAgICBsID0gbnVsbCwKICAgICAgICAgICAgICAgICAgICBmID0gbnVsbDsKICAgICAgICAgICAgICAgIGZvciAobCA9IHJbci5sZW5ndGggLSAxXTsgZS5sZW5ndGggPiAwOykgewogICAgICAgICAgICAgICAgICAgIGlmIChmID0gZS5zaGlmdCgpLCBsICYmICI8IiA9PSBsLnRhZyAmJiAhKGYudGFnIGluIHcpKSB0aHJvdyBuZXcgRXJyb3IoIklsbGVnYWwgY29udGVudCBpbiA8IHN1cGVyIHRhZy4iKTsKICAgICAgICAgICAgICAgICAgICBpZiAodC50YWdzW2YudGFnXSA8PSB0LnRhZ3MuJCB8fCBvKGYsIHMpKSByLnB1c2goZiksIGYubm9kZXMgPSBpKGUsIGYudGFnLCByLCBzKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCIvIiA9PSBmLnRhZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IHIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoIkNsb3NpbmcgdGFnIHdpdGhvdXQgb3BlbmVyOiAvIiArIGYubik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9IHIucG9wKCksIGYubiAhPSBjLm4gJiYgIWEoZi5uLCBjLm4sIHMpKSB0aHJvdyBuZXcgRXJyb3IoIk5lc3RpbmcgZXJyb3I6ICIgKyBjLm4gKyAiIHZzLiAiICsgZi5uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjLmVuZCA9IGYuaSwgdQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICJcbiIgPT0gZi50YWcgJiYgKGYubGFzdCA9IDAgPT0gZS5sZW5ndGggfHwgIlxuIiA9PSBlWzBdLnRhZykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdS5wdXNoKGYpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoci5sZW5ndGggPiAwKSB0aHJvdyBuZXcgRXJyb3IoIm1pc3NpbmcgY2xvc2luZyB0YWc6ICIgKyByLnBvcCgpLm4pOwogICAgICAgICAgICAgICAgcmV0dXJuIHUKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gbyh0LCBlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgciA9IGUubGVuZ3RoOyByID4gbjsgbisrKQogICAgICAgICAgICAgICAgICAgIGlmIChlW25dLm8gPT0gdC5uKSByZXR1cm4gdC50YWcgPSAiIyIsICEwCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGEodCwgZSwgbikgewogICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDAsIGkgPSBuLmxlbmd0aDsgaSA+IHI7IHIrKykKICAgICAgICAgICAgICAgICAgICBpZiAobltyXS5jID09IHQgJiYgbltyXS5vID09IGUpIHJldHVybiAhMAogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBzKHQpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gW107CiAgICAgICAgICAgICAgICBmb3IgKHZhciBuIGluIHQpIGUucHVzaCgnIicgKyBjKG4pICsgJyI6IGZ1bmN0aW9uKGMscCx0LGkpIHsnICsgdFtuXSArICJ9Iik7CiAgICAgICAgICAgICAgICByZXR1cm4gInsgIiArIGUuam9pbigiLCIpICsgIiB9IgogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiB1KHQpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gW107CiAgICAgICAgICAgICAgICBmb3IgKHZhciBuIGluIHQucGFydGlhbHMpIGUucHVzaCgnIicgKyBjKG4pICsgJyI6e25hbWU6IicgKyBjKHQucGFydGlhbHNbbl0ubmFtZSkgKyAnIiwgJyArIHUodC5wYXJ0aWFsc1tuXSkgKyAifSIpOwogICAgICAgICAgICAgICAgcmV0dXJuICJwYXJ0aWFsczogeyIgKyBlLmpvaW4oIiwiKSArICJ9LCBzdWJzOiAiICsgcyh0LnN1YnMpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGModCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQucmVwbGFjZShtLCAiXFxcXCIpLnJlcGxhY2UoZywgJ1xcIicpLnJlcGxhY2UodiwgIlxcbiIpLnJlcGxhY2UoeSwgIlxcciIpLnJlcGxhY2UoYiwgIlxcdTIwMjgiKS5yZXBsYWNlKHgsICJcXHUyMDI5IikKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gbCh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gfnQuaW5kZXhPZigiLiIpID8gImQiIDogImYiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGYodCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSAiPCIgKyAoZS5wcmVmaXggfHwgIiIpLAogICAgICAgICAgICAgICAgICAgIHIgPSBuICsgdC5uICsgXysrOwogICAgICAgICAgICAgICAgcmV0dXJuIGUucGFydGlhbHNbcl0gPSB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogdC5uLAogICAgICAgICAgICAgICAgICAgIHBhcnRpYWxzOiB7fQogICAgICAgICAgICAgICAgfSwgZS5jb2RlICs9ICd0LmIodC5ycCgiJyArIGMocikgKyAnIixjLHAsIicgKyAodC5pbmRlbnQgfHwgIiIpICsgJyIpKTsnLCByCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHAodCwgZSkgewogICAgICAgICAgICAgICAgZS5jb2RlICs9ICJ0LmIodC50KHQuIiArIGwodC5uKSArICcoIicgKyBjKHQubikgKyAnIixjLHAsMCkpKTsnCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGgodCkgewogICAgICAgICAgICAgICAgcmV0dXJuICJ0LmIoIiArIHQgKyAiKTsiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGQgPSAvXFMvLAogICAgICAgICAgICAgICAgZyA9IC9cIi9nLAogICAgICAgICAgICAgICAgdiA9IC9cbi9nLAogICAgICAgICAgICAgICAgeSA9IC9cci9nLAogICAgICAgICAgICAgICAgbSA9IC9cXC9nLAogICAgICAgICAgICAgICAgYiA9IC9cdTIwMjgvLAogICAgICAgICAgICAgICAgeCA9IC9cdTIwMjkvOwogICAgICAgICAgICB0LnRhZ3MgPSB7CiAgICAgICAgICAgICAgICAiIyI6IDEsCiAgICAgICAgICAgICAgICAiXiI6IDIsCiAgICAgICAgICAgICAgICAiPCI6IDMsCiAgICAgICAgICAgICAgICAkOiA0LAogICAgICAgICAgICAgICAgIi8iOiA1LAogICAgICAgICAgICAgICAgIiEiOiA2LAogICAgICAgICAgICAgICAgIj4iOiA3LAogICAgICAgICAgICAgICAgIj0iOiA4LAogICAgICAgICAgICAgICAgX3Y6IDksCiAgICAgICAgICAgICAgICAieyI6IDEwLAogICAgICAgICAgICAgICAgIiYiOiAxMSwKICAgICAgICAgICAgICAgIF90OiAxMgogICAgICAgICAgICB9LCB0LnNjYW4gPSBmdW5jdGlvbihpLCBvKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhKCkgewogICAgICAgICAgICAgICAgICAgIG0ubGVuZ3RoID4gMCAmJiAoYi5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAiX3QiLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBuZXcgU3RyaW5nKG0pCiAgICAgICAgICAgICAgICAgICAgfSksIG0gPSAiIikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzKCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAhMCwgbiA9IF87IG4gPCBiLmxlbmd0aDsgbisrKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9IHQudGFnc1tiW25dLnRhZ10gPCB0LnRhZ3MuX3YgfHwgIl90IiA9PSBiW25dLnRhZyAmJiBudWxsID09PSBiW25dLnRleHQubWF0Y2goZCksICFlKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB1KHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYSgpLCB0ICYmIHMoKSkKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiwgciA9IF87IHIgPCBiLmxlbmd0aDsgcisrKSBiW3JdLnRleHQgJiYgKChuID0gYltyICsgMV0pICYmICI+IiA9PSBuLnRhZyAmJiAobi5pbmRlbnQgPSBiW3JdLnRleHQudG9TdHJpbmcoKSksIGIuc3BsaWNlKHIsIDEpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGUgfHwgYi5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAiXG4iCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgeCA9ICExLCBfID0gYi5sZW5ndGgKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9ICI9IiArIFQsCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0LmluZGV4T2YociwgZSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuKHQuc3Vic3RyaW5nKHQuaW5kZXhPZigiPSIsIGUpICsgMSwgaSkpLnNwbGl0KCIgIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGsgPSBvWzBdLCBUID0gb1tvLmxlbmd0aCAtIDFdLCBpICsgci5sZW5ndGggLSAxCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgbCA9IGkubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgIGYgPSAwLAogICAgICAgICAgICAgICAgICAgIHAgPSAxLAogICAgICAgICAgICAgICAgICAgIGggPSAyLAogICAgICAgICAgICAgICAgICAgIGcgPSBmLAogICAgICAgICAgICAgICAgICAgIHYgPSBudWxsLAogICAgICAgICAgICAgICAgICAgIHkgPSBudWxsLAogICAgICAgICAgICAgICAgICAgIG0gPSAiIiwKICAgICAgICAgICAgICAgICAgICBiID0gW10sCiAgICAgICAgICAgICAgICAgICAgeCA9ICExLAogICAgICAgICAgICAgICAgICAgIHcgPSAwLAogICAgICAgICAgICAgICAgICAgIF8gPSAwLAogICAgICAgICAgICAgICAgICAgIGsgPSAie3siLAogICAgICAgICAgICAgICAgICAgIFQgPSAifX0iOwogICAgICAgICAgICAgICAgZm9yIChvICYmIChvID0gby5zcGxpdCgiICIpLCBrID0gb1swXSwgVCA9IG9bMV0pLCB3ID0gMDsgbCA+IHc7IHcrKykgZyA9PSBmID8gcihrLCBpLCB3KSA/ICgtLXcsIGEoKSwgZyA9IHApIDogIlxuIiA9PSBpLmNoYXJBdCh3KSA/IHUoeCkgOiBtICs9IGkuY2hhckF0KHcpIDogZyA9PSBwID8gKHcgKz0gay5sZW5ndGggLSAxLCB5ID0gdC50YWdzW2kuY2hhckF0KHcgKyAxKV0sIHYgPSB5ID8gaS5jaGFyQXQodyArIDEpIDogIl92IiwgIj0iID09IHYgPyAodyA9IGMoaSwgdyksIGcgPSBmKSA6ICh5ICYmIHcrKywgZyA9IGgpLCB4ID0gdykgOiByKFQsIGksIHcpID8gKGIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdGFnOiB2LAogICAgICAgICAgICAgICAgICAgIG46IG4obSksCiAgICAgICAgICAgICAgICAgICAgb3RhZzogaywKICAgICAgICAgICAgICAgICAgICBjdGFnOiBULAogICAgICAgICAgICAgICAgICAgIGk6ICIvIiA9PSB2ID8geCAtIGsubGVuZ3RoIDogdyArIFQubGVuZ3RoCiAgICAgICAgICAgICAgICB9KSwgbSA9ICIiLCB3ICs9IFQubGVuZ3RoIC0gMSwgZyA9IGYsICJ7IiA9PSB2ICYmICgifX0iID09IFQgPyB3KysgOiBlKGJbYi5sZW5ndGggLSAxXSkpKSA6IG0gKz0gaS5jaGFyQXQodyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdSh4LCAhMCksIGIKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIHcgPSB7CiAgICAgICAgICAgICAgICBfdDogITAsCiAgICAgICAgICAgICAgICAiXG4iOiAhMCwKICAgICAgICAgICAgICAgICQ6ICEwLAogICAgICAgICAgICAgICAgIi8iOiAhMAogICAgICAgICAgICB9OwogICAgICAgICAgICB0LnN0cmluZ2lmeSA9IGZ1bmN0aW9uKGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgIHJldHVybiAie2NvZGU6IGZ1bmN0aW9uIChjLHAsaSkgeyAiICsgdC53cmFwTWFpbihlLmNvZGUpICsgIiB9LCIgKyB1KGUpICsgIn0iCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBfID0gMDsKICAgICAgICAgICAgdC5nZW5lcmF0ZSA9IGZ1bmN0aW9uKGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgIF8gPSAwOwogICAgICAgICAgICAgICAgdmFyIGkgPSB7CiAgICAgICAgICAgICAgICAgICAgY29kZTogIiIsCiAgICAgICAgICAgICAgICAgICAgc3Viczoge30sCiAgICAgICAgICAgICAgICAgICAgcGFydGlhbHM6IHt9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIHQud2FsayhlLCBpKSwgci5hc1N0cmluZyA/IHRoaXMuc3RyaW5naWZ5KGksIG4sIHIpIDogdGhpcy5tYWtlVGVtcGxhdGUoaSwgbiwgcikKICAgICAgICAgICAgfSwgdC53cmFwTWFpbiA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAndmFyIHQ9dGhpczt0LmIoaT1pfHwiIik7JyArIHQgKyAicmV0dXJuIHQuZmwoKTsiCiAgICAgICAgICAgIH0sIHQudGVtcGxhdGUgPSB0LlRlbXBsYXRlLCB0Lm1ha2VUZW1wbGF0ZSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByID0gdGhpcy5tYWtlUGFydGlhbHModCk7CiAgICAgICAgICAgICAgICByZXR1cm4gci5jb2RlID0gbmV3IEZ1bmN0aW9uKCJjIiwgInAiLCAiaSIsIHRoaXMud3JhcE1haW4odC5jb2RlKSksIG5ldyB0aGlzLnRlbXBsYXRlKHIsIGUsIHRoaXMsIG4pCiAgICAgICAgICAgIH0sIHQubWFrZVBhcnRpYWxzID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIGUsIG4gPSB7CiAgICAgICAgICAgICAgICAgICAgc3Viczoge30sCiAgICAgICAgICAgICAgICAgICAgcGFydGlhbHM6IHQucGFydGlhbHMsCiAgICAgICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZm9yIChlIGluIG4ucGFydGlhbHMpIG4ucGFydGlhbHNbZV0gPSB0aGlzLm1ha2VQYXJ0aWFscyhuLnBhcnRpYWxzW2VdKTsKICAgICAgICAgICAgICAgIGZvciAoZSBpbiB0LnN1YnMpIG4uc3Vic1tlXSA9IG5ldyBGdW5jdGlvbigiYyIsICJwIiwgInQiLCAiaSIsIHQuc3Vic1tlXSk7CiAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICB9LCB0LmNvZGVnZW4gPSB7CiAgICAgICAgICAgICAgICAiIyI6IGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICBuLmNvZGUgKz0gImlmKHQucyh0LiIgKyBsKGUubikgKyAnKCInICsgYyhlLm4pICsgJyIsYyxwLDEpLGMscCwwLCcgKyBlLmkgKyAiLCIgKyBlLmVuZCArICcsIicgKyBlLm90YWcgKyAiICIgKyBlLmN0YWcgKyAnIikpe3QucnMoYyxwLGZ1bmN0aW9uKGMscCx0KXsnLCB0LndhbGsoZS5ub2RlcywgbiksIG4uY29kZSArPSAifSk7Yy5wb3AoKTt9IgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICJeIjogZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgIG4uY29kZSArPSAiaWYoIXQucyh0LiIgKyBsKGUubikgKyAnKCInICsgYyhlLm4pICsgJyIsYyxwLDEpLGMscCwxLDAsMCwiIikpeycsIHQud2FsayhlLm5vZGVzLCBuKSwgbi5jb2RlICs9ICJ9OyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAiPiI6IGYsCiAgICAgICAgICAgICAgICAiPCI6IGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFydGlhbHM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgc3Viczoge30sCiAgICAgICAgICAgICAgICAgICAgICAgIGluUGFydGlhbDogITAKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHQud2FsayhlLm5vZGVzLCByKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG4ucGFydGlhbHNbZihlLCBuKV07CiAgICAgICAgICAgICAgICAgICAgaS5zdWJzID0gci5zdWJzLCBpLnBhcnRpYWxzID0gci5wYXJ0aWFscwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICQ6IGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgc3Viczoge30sCiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsczogbi5wYXJ0aWFscywKICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4OiBlLm4KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHQud2FsayhlLm5vZGVzLCByKSwgbi5zdWJzW2Uubl0gPSByLmNvZGUsIG4uaW5QYXJ0aWFsIHx8IChuLmNvZGUgKz0gJ3Quc3ViKCInICsgYyhlLm4pICsgJyIsYyxwLGkpOycpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgIlxuIjogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIGUuY29kZSArPSBoKCciXFxuIicgKyAodC5sYXN0ID8gIiIgOiAiICsgaSIpKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF92OiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5jb2RlICs9ICJ0LmIodC52KHQuIiArIGwodC5uKSArICcoIicgKyBjKHQubikgKyAnIixjLHAsMCkpKTsnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgX3Q6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBlLmNvZGUgKz0gaCgnIicgKyBjKHQudGV4dCkgKyAnIicpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgInsiOiBwLAogICAgICAgICAgICAgICAgIiYiOiBwCiAgICAgICAgICAgIH0sIHQud2FsayA9IGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIsIGkgPSAwLCBvID0gZS5sZW5ndGg7IG8gPiBpOyBpKyspIHIgPSB0LmNvZGVnZW5bZVtpXS50YWddLCByICYmIHIoZVtpXSwgbik7CiAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICB9LCB0LnBhcnNlID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgcmV0dXJuIG4gPSBuIHx8IHt9LCBpKHQsICIiLCBbXSwgbi5zZWN0aW9uVGFncyB8fCBbXSkKICAgICAgICAgICAgfSwgdC5jYWNoZSA9IHt9LCB0LmNhY2hlS2V5ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIFt0LCAhIWUuYXNTdHJpbmcsICEhZS5kaXNhYmxlTGFtYmRhLCBlLmRlbGltaXRlcnMsICEhZS5tb2RlbEdldF0uam9pbigifHwiKQogICAgICAgICAgICB9LCB0LmNvbXBpbGUgPSBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICBuID0gbiB8fCB7fTsKICAgICAgICAgICAgICAgIHZhciByID0gdC5jYWNoZUtleShlLCBuKSwKICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5jYWNoZVtyXTsKICAgICAgICAgICAgICAgIGlmIChpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBpLnBhcnRpYWxzOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGEgaW4gbykgZGVsZXRlIG9bYV0uaW5zdGFuY2U7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBpID0gdGhpcy5nZW5lcmF0ZSh0aGlzLnBhcnNlKHRoaXMuc2NhbihlLCBuLmRlbGltaXRlcnMpLCBlLCBuKSwgZSwgbiksIHRoaXMuY2FjaGVbcl0gPSBpCiAgICAgICAgICAgIH0KICAgICAgICB9KCJ1bmRlZmluZWQiICE9IHR5cGVvZiBuID8gbiA6IEhvZ2FuKQogICAgfSwge31dLAogICAgMTM6IFtmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgdmFyIHIgPSB0KCIuL2NvbXBpbGVyIik7CiAgICAgICAgci5UZW1wbGF0ZSA9IHQoIi4vdGVtcGxhdGUiKS5UZW1wbGF0ZSwgci50ZW1wbGF0ZSA9IHIuVGVtcGxhdGUsIGUuZXhwb3J0cyA9IHIKICAgIH0sIHsKICAgICAgICAiLi9jb21waWxlciI6IDEyLAogICAgICAgICIuL3RlbXBsYXRlIjogMTQKICAgIH1dLAogICAgMTQ6IFtmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgdmFyIHIgPSB7fTsKICAgICAgICAhIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgZnVuY3Rpb24gZSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgICAgIHJldHVybiBlICYmICJvYmplY3QiID09IHR5cGVvZiBlICYmICh2b2lkIDAgIT09IGVbdF0gPyByID0gZVt0XSA6IG4gJiYgZS5nZXQgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZS5nZXQgJiYgKHIgPSBlLmdldCh0KSkpLCByCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIG4odCwgZSwgbiwgciwgaSwgbykgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gYSgpIHt9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcygpIHt9CiAgICAgICAgICAgICAgICBhLnByb3RvdHlwZSA9IHQsIHMucHJvdG90eXBlID0gdC5zdWJzOwogICAgICAgICAgICAgICAgdmFyIHUsIGMgPSBuZXcgYTsKICAgICAgICAgICAgICAgIGMuc3VicyA9IG5ldyBzLCBjLnN1YnNUZXh0ID0ge30sIGMuYnVmID0gIiIsIHIgPSByIHx8IHt9LCBjLnN0YWNrU3VicyA9IHIsIGMuc3Vic1RleHQgPSBvOwogICAgICAgICAgICAgICAgZm9yICh1IGluIGUpIHJbdV0gfHwgKHJbdV0gPSBlW3VdKTsKICAgICAgICAgICAgICAgIGZvciAodSBpbiByKSBjLnN1YnNbdV0gPSByW3VdOwogICAgICAgICAgICAgICAgaSA9IGkgfHwge30sIGMuc3RhY2tQYXJ0aWFscyA9IGk7CiAgICAgICAgICAgICAgICBmb3IgKHUgaW4gbikgaVt1XSB8fCAoaVt1XSA9IG5bdV0pOwogICAgICAgICAgICAgICAgZm9yICh1IGluIGkpIGMucGFydGlhbHNbdV0gPSBpW3VdOwogICAgICAgICAgICAgICAgcmV0dXJuIGMKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKG51bGwgPT09IHQgfHwgdm9pZCAwID09PSB0ID8gIiIgOiB0KQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0ID0gcih0KSwgbC50ZXN0KHQpID8gdC5yZXBsYWNlKG8sICImYW1wOyIpLnJlcGxhY2UoYSwgIiZsdDsiKS5yZXBsYWNlKHMsICImZ3Q7IikucmVwbGFjZSh1LCAiJiMzOTsiKS5yZXBsYWNlKGMsICImcXVvdDsiKSA6IHQKICAgICAgICAgICAgfQogICAgICAgICAgICB0LlRlbXBsYXRlID0gZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgdCA9IHQgfHwge30sIHRoaXMuciA9IHQuY29kZSB8fCB0aGlzLnIsIHRoaXMuYyA9IG4sIHRoaXMub3B0aW9ucyA9IHIgfHwge30sIHRoaXMudGV4dCA9IGUgfHwgIiIsIHRoaXMucGFydGlhbHMgPSB0LnBhcnRpYWxzIHx8IHt9LCB0aGlzLnN1YnMgPSB0LnN1YnMgfHwge30sIHRoaXMuYnVmID0gIiIKICAgICAgICAgICAgfSwgdC5UZW1wbGF0ZS5wcm90b3R5cGUgPSB7CiAgICAgICAgICAgICAgICByOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdjogaSwKICAgICAgICAgICAgICAgIHQ6IHIsCiAgICAgICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yaShbdF0sIGUgfHwge30sIG4pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmk6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yKHQsIGUsIG4pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZXA6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXMucGFydGlhbHNbdF0sCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlW3IubmFtZV07CiAgICAgICAgICAgICAgICAgICAgaWYgKHIuaW5zdGFuY2UgJiYgci5iYXNlID09IGkpIHJldHVybiByLmluc3RhbmNlOwogICAgICAgICAgICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgaSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYykgdGhyb3cgbmV3IEVycm9yKCJObyBjb21waWxlciBhdmFpbGFibGUuIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0aGlzLmMuY29tcGlsZShpLCB0aGlzLm9wdGlvbnMpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFydGlhbHNbdF0uYmFzZSA9IGksIHIuc3VicykgewogICAgICAgICAgICAgICAgICAgICAgICBlLnN0YWNrVGV4dCB8fCAoZS5zdGFja1RleHQgPSB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIHIuc3VicykgZS5zdGFja1RleHRba2V5XSB8fCAoZS5zdGFja1RleHRba2V5XSA9IHZvaWQgMCAhPT0gdGhpcy5hY3RpdmVTdWIgJiYgZS5zdGFja1RleHRbdGhpcy5hY3RpdmVTdWJdID8gZS5zdGFja1RleHRbdGhpcy5hY3RpdmVTdWJdIDogdGhpcy50ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG4oaSwgci5zdWJzLCByLnBhcnRpYWxzLCB0aGlzLnN0YWNrU3VicywgdGhpcy5zdGFja1BhcnRpYWxzLCBlLnN0YWNrVGV4dCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFydGlhbHNbdF0uaW5zdGFuY2UgPSBpLCBpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcnA6IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuZXAodCwgbik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgPyBpLnJpKGUsIG4sIHIpIDogIiIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByczogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciByID0gdFt0Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgIGlmICghZihyKSkgcmV0dXJuIHZvaWQgbih0LCBlLCB0aGlzKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHIubGVuZ3RoOyBpKyspIHQucHVzaChyW2ldKSwgbih0LCBlLCB0aGlzKSwgdC5wb3AoKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHM6IGZ1bmN0aW9uKHQsIGUsIG4sIHIsIGksIG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgczsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KSAmJiAwID09PSB0Lmxlbmd0aCA/ICExIDogKCJmdW5jdGlvbiIgPT0gdHlwZW9mIHQgJiYgKHQgPSB0aGlzLm1zKHQsIGUsIG4sIHIsIGksIG8sIGEpKSwgcyA9ICEhdCwgIXIgJiYgcyAmJiBlICYmIGUucHVzaCgib2JqZWN0IiA9PSB0eXBlb2YgdCA/IHQgOiBlW2UubGVuZ3RoIC0gMV0pLCBzKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGQ6IGZ1bmN0aW9uKHQsIG4sIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbywgYSA9IHQuc3BsaXQoIi4iKSwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHRoaXMuZihhWzBdLCBuLCByLCBpKSwKICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHRoaXMub3B0aW9ucy5tb2RlbEdldCwKICAgICAgICAgICAgICAgICAgICAgICAgYyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgaWYgKCIuIiA9PT0gdCAmJiBmKG5bbi5sZW5ndGggLSAyXSkpIHMgPSBuW24ubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gMTsgbCA8IGEubGVuZ3RoOyBsKyspIG8gPSBlKGFbbF0sIHMsIHUpLCB2b2lkIDAgIT09IG8gPyAoYyA9IHMsIHMgPSBvKSA6IHMgPSAiIjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSAmJiAhcyA/ICExIDogKGkgfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgcyB8fCAobi5wdXNoKGMpLCBzID0gdGhpcy5tdihzLCBuLCByKSwgbi5wb3AoKSksIHMpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZjogZnVuY3Rpb24odCwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG8gPSAhMSwgYSA9IG51bGwsIHMgPSAhMSwgdSA9IHRoaXMub3B0aW9ucy5tb2RlbEdldCwgYyA9IG4ubGVuZ3RoIC0gMTsgYyA+PSAwOyBjLS0pCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhID0gbltjXSwgbyA9IGUodCwgYSwgdSksIHZvaWQgMCAhPT0gbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9ICEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBzID8gKGkgfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgbyB8fCAobyA9IHRoaXMubXYobywgbiwgcikpLCBvKSA6IGkgPyAhMSA6ICIiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbHM6IGZ1bmN0aW9uKHQsIGUsIG4sIGksIG8pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHRoaXMub3B0aW9ucy5kZWxpbWl0ZXJzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZGVsaW1pdGVycyA9IG8sIHRoaXMuYih0aGlzLmN0KHIodC5jYWxsKGUsIGkpKSwgZSwgbikpLCB0aGlzLm9wdGlvbnMuZGVsaW1pdGVycyA9IGEsICExCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY3Q6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVMYW1iZGEpIHRocm93IG5ldyBFcnJvcigiTGFtYmRhIGZlYXR1cmVzIGRpc2FibGVkLiIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmMuY29tcGlsZSh0LCB0aGlzLm9wdGlvbnMpLnJlbmRlcihlLCBuKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGI6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZiArPSB0CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZmw6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5idWY7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmID0gIiIsIHQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBtczogZnVuY3Rpb24odCwgZSwgbiwgciwgaSwgbywgYSkgewogICAgICAgICAgICAgICAgICAgIHZhciBzLCB1ID0gZVtlLmxlbmd0aCAtIDFdLAogICAgICAgICAgICAgICAgICAgICAgICBjID0gdC5jYWxsKHUpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBjID8gciA/ICEwIDogKHMgPSB0aGlzLmFjdGl2ZVN1YiAmJiB0aGlzLnN1YnNUZXh0ICYmIHRoaXMuc3Vic1RleHRbdGhpcy5hY3RpdmVTdWJdID8gdGhpcy5zdWJzVGV4dFt0aGlzLmFjdGl2ZVN1Yl0gOiB0aGlzLnRleHQsIHRoaXMubHMoYywgdSwgbiwgcy5zdWJzdHJpbmcoaSwgbyksIGEpKSA6IGMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBtdjogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gZVtlLmxlbmd0aCAtIDFdLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5jYWxsKGkpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBvID8gdGhpcy5jdChyKG8uY2FsbChpKSksIGksIG4pIDogbwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHN1YjogZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5zdWJzW3RdOwogICAgICAgICAgICAgICAgICAgIGkgJiYgKHRoaXMuYWN0aXZlU3ViID0gdCwgaShlLCBuLCB0aGlzLCByKSwgdGhpcy5hY3RpdmVTdWIgPSAhMSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIG8gPSAvJi9nLAogICAgICAgICAgICAgICAgYSA9IC88L2csCiAgICAgICAgICAgICAgICBzID0gLz4vZywKICAgICAgICAgICAgICAgIHUgPSAvXCcvZywKICAgICAgICAgICAgICAgIGMgPSAvXCIvZywKICAgICAgICAgICAgICAgIGwgPSAvWyY8PlwiXCddLywKICAgICAgICAgICAgICAgIGYgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIltvYmplY3QgQXJyYXldIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfSgidW5kZWZpbmVkIiAhPSB0eXBlb2YgbiA/IG4gOiByKQogICAgfSwge31dLAogICAgMTU6IFtmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgISBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICJvYmplY3QiID09IHR5cGVvZiBlICYmICJvYmplY3QiID09IHR5cGVvZiBlLmV4cG9ydHMgPyBlLmV4cG9ydHMgPSB0LmRvY3VtZW50ID8gbih0LCAhMCkgOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBpZiAoIXQuZG9jdW1lbnQpIHRocm93IG5ldyBFcnJvcigialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudCIpOwogICAgICAgICAgICAgICAgcmV0dXJuIG4odCkKICAgICAgICAgICAgfSA6IG4odCkKICAgICAgICB9KCJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIG4odCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSAibGVuZ3RoIiBpbiB0ICYmIHQubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgIG4gPSBaLnR5cGUodCk7CiAgICAgICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PT0gbiB8fCBaLmlzV2luZG93KHQpID8gITEgOiAxID09PSB0Lm5vZGVUeXBlICYmIGUgPyAhMCA6ICJhcnJheSIgPT09IG4gfHwgMCA9PT0gZSB8fCAibnVtYmVyIiA9PSB0eXBlb2YgZSAmJiBlID4gMCAmJiBlIC0gMSBpbiB0CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHIodCwgZSwgbikgewogICAgICAgICAgICAgICAgaWYgKFouaXNGdW5jdGlvbihlKSkgcmV0dXJuIFouZ3JlcCh0LCBmdW5jdGlvbih0LCByKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhZS5jYWxsKHQsIHIsIHQpICE9PSBuCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChlLm5vZGVUeXBlKSByZXR1cm4gWi5ncmVwKHQsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gZSAhPT0gbgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc3QudGVzdChlKSkgcmV0dXJuIFouZmlsdGVyKGUsIHQsIG4pOwogICAgICAgICAgICAgICAgICAgIGUgPSBaLmZpbHRlcihlLCB0KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIFouZ3JlcCh0LCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFYuY2FsbChlLCB0KSA+PSAwICE9PSBuCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpKHQsIGUpIHsKICAgICAgICAgICAgICAgIGZvciAoOwogICAgICAgICAgICAgICAgICAgICh0ID0gdFtlXSkgJiYgMSAhPT0gdC5ub2RlVHlwZTspOwogICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gbyh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IGR0W3RdID0ge307CiAgICAgICAgICAgICAgICByZXR1cm4gWi5lYWNoKHQubWF0Y2goaHQpIHx8IFtdLCBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgZVtuXSA9ICEwCiAgICAgICAgICAgICAgICB9KSwgZQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBhKCkgewogICAgICAgICAgICAgICAgUS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgYSwgITEpLCB0LnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLCBhLCAhMSksIFoucmVhZHkoKQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBzKCkgewogICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuY2FjaGUgPSB7fSwgMCwgewogICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7fQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLCB0aGlzLmV4cGFuZG8gPSBaLmV4cGFuZG8gKyBzLnVpZCsrCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHUodCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHI7CiAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBuICYmIDEgPT09IHQubm9kZVR5cGUpCiAgICAgICAgICAgICAgICAgICAgaWYgKHIgPSAiZGF0YS0iICsgZS5yZXBsYWNlKHh0LCAiLSQxIikudG9Mb3dlckNhc2UoKSwgbiA9IHQuZ2V0QXR0cmlidXRlKHIpLCAic3RyaW5nIiA9PSB0eXBlb2YgbikgewogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9ICJ0cnVlIiA9PT0gbiA/ICEwIDogImZhbHNlIiA9PT0gbiA/ICExIDogIm51bGwiID09PSBuID8gbnVsbCA6ICtuICsgIiIgPT09IG4gPyArbiA6IGJ0LnRlc3QobikgPyBaLnBhcnNlSlNPTihuKSA6IG4KICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoaSkge30KICAgICAgICAgICAgICAgICAgICAgICAgbXQuc2V0KHQsIGUsIG4pCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIG4gPSB2b2lkIDA7CiAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBjKCkgewogICAgICAgICAgICAgICAgcmV0dXJuICEwCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGwoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZigpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFEuYWN0aXZlRWxlbWVudAogICAgICAgICAgICAgICAgfSBjYXRjaCAodCkge30KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcCh0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gWi5ub2RlTmFtZSh0LCAidGFibGUiKSAmJiBaLm5vZGVOYW1lKDExICE9PSBlLm5vZGVUeXBlID8gZSA6IGUuZmlyc3RDaGlsZCwgInRyIikgPyB0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdIHx8IHQuYXBwZW5kQ2hpbGQodC5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRib2R5IikpIDogdAogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBoKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0LnR5cGUgPSAobnVsbCAhPT0gdC5nZXRBdHRyaWJ1dGUoInR5cGUiKSkgKyAiLyIgKyB0LnR5cGUsIHQKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZCh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IFB0LmV4ZWModC50eXBlKTsKICAgICAgICAgICAgICAgIHJldHVybiBlID8gdC50eXBlID0gZVsxXSA6IHQucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksIHQKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZyh0LCBlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgciA9IHQubGVuZ3RoOyByID4gbjsgbisrKSB5dC5zZXQodFtuXSwgImdsb2JhbEV2YWwiLCAhZSB8fCB5dC5nZXQoZVtuXSwgImdsb2JhbEV2YWwiKSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gdih0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiwgciwgaSwgbywgYSwgcywgdSwgYzsKICAgICAgICAgICAgICAgIGlmICgxID09PSBlLm5vZGVUeXBlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHl0Lmhhc0RhdGEodCkgJiYgKG8gPSB5dC5hY2Nlc3ModCksIGEgPSB5dC5zZXQoZSwgbyksIGMgPSBvLmV2ZW50cykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGEuaGFuZGxlLCBhLmV2ZW50cyA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgaW4gYykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobiA9IDAsIHIgPSBjW2ldLmxlbmd0aDsgciA+IG47IG4rKykgWi5ldmVudC5hZGQoZSwgaSwgY1tpXVtuXSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbXQuaGFzRGF0YSh0KSAmJiAocyA9IG10LmFjY2Vzcyh0KSwgdSA9IFouZXh0ZW5kKHt9LCBzKSwgbXQuc2V0KGUsIHUpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiB5KHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gdC5nZXRFbGVtZW50c0J5VGFnTmFtZSA/IHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSB8fCAiKiIpIDogdC5xdWVyeVNlbGVjdG9yQWxsID8gdC5xdWVyeVNlbGVjdG9yQWxsKGUgfHwgIioiKSA6IFtdOwogICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZSB8fCBlICYmIFoubm9kZU5hbWUodCwgZSkgPyBaLm1lcmdlKFt0XSwgbikgOiBuCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIG0odCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAiaW5wdXQiID09PSBuICYmIFR0LnRlc3QodC50eXBlKSA/IGUuY2hlY2tlZCA9IHQuY2hlY2tlZCA6ICgiaW5wdXQiID09PSBuIHx8ICJ0ZXh0YXJlYSIgPT09IG4pICYmIChlLmRlZmF1bHRWYWx1ZSA9IHQuZGVmYXVsdFZhbHVlKQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBiKGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByLCBpID0gWihuLmNyZWF0ZUVsZW1lbnQoZSkpLmFwcGVuZFRvKG4uYm9keSksCiAgICAgICAgICAgICAgICAgICAgbyA9IHQuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUgJiYgKHIgPSB0LmdldERlZmF1bHRDb21wdXRlZFN0eWxlKGlbMF0pKSA/IHIuZGlzcGxheSA6IFouY3NzKGlbMF0sICJkaXNwbGF5Iik7CiAgICAgICAgICAgICAgICByZXR1cm4gaS5kZXRhY2goKSwgbwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiB4KHQpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gUSwKICAgICAgICAgICAgICAgICAgICBuID0gTXRbdF07CiAgICAgICAgICAgICAgICByZXR1cm4gbiB8fCAobiA9IGIodCwgZSksICJub25lIiAhPT0gbiAmJiBuIHx8IChIdCA9IChIdCB8fCBaKCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikpLmFwcGVuZFRvKGUuZG9jdW1lbnRFbGVtZW50KSwgZSA9IEh0WzBdLmNvbnRlbnREb2N1bWVudCwgZS53cml0ZSgpLCBlLmNsb3NlKCksIG4gPSBiKHQsIGUpLCBIdC5kZXRhY2goKSksIE10W3RdID0gbiksIG4KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gdyh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciwgaSwgbywgYSwgcyA9IHQuc3R5bGU7CiAgICAgICAgICAgICAgICByZXR1cm4gbiA9IG4gfHwgVXQodCksIG4gJiYgKGEgPSBuLmdldFByb3BlcnR5VmFsdWUoZSkgfHwgbltlXSksIG4gJiYgKCIiICE9PSBhIHx8IFouY29udGFpbnModC5vd25lckRvY3VtZW50LCB0KSB8fCAoYSA9IFouc3R5bGUodCwgZSkpLCBCdC50ZXN0KGEpICYmIEZ0LnRlc3QoZSkgJiYgKHIgPSBzLndpZHRoLCBpID0gcy5taW5XaWR0aCwgbyA9IHMubWF4V2lkdGgsIHMubWluV2lkdGggPSBzLm1heFdpZHRoID0gcy53aWR0aCA9IGEsIGEgPSBuLndpZHRoLCBzLndpZHRoID0gciwgcy5taW5XaWR0aCA9IGksIHMubWF4V2lkdGggPSBvKSksIHZvaWQgMCAhPT0gYSA/IGEgKyAiIiA6IGEKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gXyh0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0KCkgPyB2b2lkIGRlbGV0ZSB0aGlzLmdldCA6ICh0aGlzLmdldCA9IGUpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGsodCwgZSkgewogICAgICAgICAgICAgICAgaWYgKGUgaW4gdCkgcmV0dXJuIGU7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gZVswXS50b1VwcGVyQ2FzZSgpICsgZS5zbGljZSgxKSwgciA9IGUsIGkgPSBKdC5sZW5ndGg7IGktLTspCiAgICAgICAgICAgICAgICAgICAgaWYgKGUgPSBKdFtpXSArIG4sIGUgaW4gdCkgcmV0dXJuIGU7CiAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBUKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByID0genQuZXhlYyhlKTsKICAgICAgICAgICAgICAgIHJldHVybiByID8gTWF0aC5tYXgoMCwgclsxXSAtIChuIHx8IDApKSArIChyWzJdIHx8ICJweCIpIDogZQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBFKHQsIGUsIG4sIHIsIGkpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIG8gPSBuID09PSAociA/ICJib3JkZXIiIDogImNvbnRlbnQiKSA/IDQgOiAid2lkdGgiID09PSBlID8gMSA6IDAsIGEgPSAwOyA0ID4gbzsgbyArPSAyKSAibWFyZ2luIiA9PT0gbiAmJiAoYSArPSBaLmNzcyh0LCBuICsgX3Rbb10sICEwLCBpKSksIHIgPyAoImNvbnRlbnQiID09PSBuICYmIChhIC09IFouY3NzKHQsICJwYWRkaW5nIiArIF90W29dLCAhMCwgaSkpLCAibWFyZ2luIiAhPT0gbiAmJiAoYSAtPSBaLmNzcyh0LCAiYm9yZGVyIiArIF90W29dICsgIldpZHRoIiwgITAsIGkpKSkgOiAoYSArPSBaLmNzcyh0LCAicGFkZGluZyIgKyBfdFtvXSwgITAsIGkpLCAicGFkZGluZyIgIT09IG4gJiYgKGEgKz0gWi5jc3ModCwgImJvcmRlciIgKyBfdFtvXSArICJXaWR0aCIsICEwLCBpKSkpOwogICAgICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9ICEwLAogICAgICAgICAgICAgICAgICAgIGkgPSAid2lkdGgiID09PSBlID8gdC5vZmZzZXRXaWR0aCA6IHQub2Zmc2V0SGVpZ2h0LAogICAgICAgICAgICAgICAgICAgIG8gPSBVdCh0KSwKICAgICAgICAgICAgICAgICAgICBhID0gImJvcmRlci1ib3giID09PSBaLmNzcyh0LCAiYm94U2l6aW5nIiwgITEsIG8pOwogICAgICAgICAgICAgICAgaWYgKDAgPj0gaSB8fCBudWxsID09IGkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaSA9IHcodCwgZSwgbyksICgwID4gaSB8fCBudWxsID09IGkpICYmIChpID0gdC5zdHlsZVtlXSksIEJ0LnRlc3QoaSkpIHJldHVybiBpOwogICAgICAgICAgICAgICAgICAgIHIgPSBhICYmIChZLmJveFNpemluZ1JlbGlhYmxlKCkgfHwgaSA9PT0gdC5zdHlsZVtlXSksIGkgPSBwYXJzZUZsb2F0KGkpIHx8IDAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBpICsgRSh0LCBlLCBuIHx8IChhID8gImJvcmRlciIgOiAiY29udGVudCIpLCByLCBvKSArICJweCIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gQyh0LCBlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBuLCByLCBpLCBvID0gW10sIGEgPSAwLCBzID0gdC5sZW5ndGg7IHMgPiBhOyBhKyspIHIgPSB0W2FdLCByLnN0eWxlICYmIChvW2FdID0geXQuZ2V0KHIsICJvbGRkaXNwbGF5IiksIG4gPSByLnN0eWxlLmRpc3BsYXksIGUgPyAob1thXSB8fCAibm9uZSIgIT09IG4gfHwgKHIuc3R5bGUuZGlzcGxheSA9ICIiKSwgIiIgPT09IHIuc3R5bGUuZGlzcGxheSAmJiBrdChyKSAmJiAob1thXSA9IHl0LmFjY2VzcyhyLCAib2xkZGlzcGxheSIsIHgoci5ub2RlTmFtZSkpKSkgOiAoaSA9IGt0KHIpLCAibm9uZSIgPT09IG4gJiYgaSB8fCB5dC5zZXQociwgIm9sZGRpc3BsYXkiLCBpID8gbiA6IFouY3NzKHIsICJkaXNwbGF5IikpKSk7CiAgICAgICAgICAgICAgICBmb3IgKGEgPSAwOyBzID4gYTsgYSsrKSByID0gdFthXSwgci5zdHlsZSAmJiAoZSAmJiAibm9uZSIgIT09IHIuc3R5bGUuZGlzcGxheSAmJiAiIiAhPT0gci5zdHlsZS5kaXNwbGF5IHx8IChyLnN0eWxlLmRpc3BsYXkgPSBlID8gb1thXSB8fCAiIiA6ICJub25lIikpOwogICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gUyh0LCBlLCBuLCByLCBpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFMucHJvdG90eXBlLmluaXQodCwgZSwgbiwgciwgaSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gQSgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIFl0ID0gdm9pZCAwCiAgICAgICAgICAgICAgICB9KSwgWXQgPSBaLm5vdygpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIE4odCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG4sIHIgPSAwLAogICAgICAgICAgICAgICAgICAgIGkgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogdAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBmb3IgKGUgPSBlID8gMSA6IDA7IDQgPiByOyByICs9IDIgLSBlKSBuID0gX3Rbcl0sIGlbIm1hcmdpbiIgKyBuXSA9IGlbInBhZGRpbmciICsgbl0gPSB0OwogICAgICAgICAgICAgICAgcmV0dXJuIGUgJiYgKGkub3BhY2l0eSA9IGkud2lkdGggPSB0KSwgaQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBSKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIsIGkgPSAobmVbZV0gfHwgW10pLmNvbmNhdChuZVsiKiJdKSwgbyA9IDAsIGEgPSBpLmxlbmd0aDsgYSA+IG87IG8rKykKICAgICAgICAgICAgICAgICAgICBpZiAociA9IGlbb10uY2FsbChuLCBlLCB0KSkgcmV0dXJuIHIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gSSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciwgaSwgbywgYSwgcywgdSwgYywgbCwgZiA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgcCA9IHt9LAogICAgICAgICAgICAgICAgICAgIGggPSB0LnN0eWxlLAogICAgICAgICAgICAgICAgICAgIGQgPSB0Lm5vZGVUeXBlICYmIGt0KHQpLAogICAgICAgICAgICAgICAgICAgIGcgPSB5dC5nZXQodCwgImZ4c2hvdyIpOwogICAgICAgICAgICAgICAgbi5xdWV1ZSB8fCAocyA9IFouX3F1ZXVlSG9va3ModCwgImZ4IiksIG51bGwgPT0gcy51bnF1ZXVlZCAmJiAocy51bnF1ZXVlZCA9IDAsIHUgPSBzLmVtcHR5LmZpcmUsIHMuZW1wdHkuZmlyZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHMudW5xdWV1ZWQgfHwgdSgpCiAgICAgICAgICAgICAgICB9KSwgcy51bnF1ZXVlZCsrLCBmLmFsd2F5cyhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBmLmFsd2F5cyhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcy51bnF1ZXVlZC0tLCBaLnF1ZXVlKHQsICJmeCIpLmxlbmd0aCB8fCBzLmVtcHR5LmZpcmUoKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KSksIDEgPT09IHQubm9kZVR5cGUgJiYgKCJoZWlnaHQiIGluIGUgfHwgIndpZHRoIiBpbiBlKSAmJiAobi5vdmVyZmxvdyA9IFtoLm92ZXJmbG93LCBoLm92ZXJmbG93WCwgaC5vdmVyZmxvd1ldLCBjID0gWi5jc3ModCwgImRpc3BsYXkiKSwgbCA9ICJub25lIiA9PT0gYyA/IHl0LmdldCh0LCAib2xkZGlzcGxheSIpIHx8IHgodC5ub2RlTmFtZSkgOiBjLCAiaW5saW5lIiA9PT0gbCAmJiAibm9uZSIgPT09IFouY3NzKHQsICJmbG9hdCIpICYmIChoLmRpc3BsYXkgPSAiaW5saW5lLWJsb2NrIikpLCBuLm92ZXJmbG93ICYmIChoLm92ZXJmbG93ID0gImhpZGRlbiIsIGYuYWx3YXlzKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGgub3ZlcmZsb3cgPSBuLm92ZXJmbG93WzBdLCBoLm92ZXJmbG93WCA9IG4ub3ZlcmZsb3dbMV0sIGgub3ZlcmZsb3dZID0gbi5vdmVyZmxvd1syXQogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgZm9yIChyIGluIGUpCiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPSBlW3JdLCBLdC5leGVjKGkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWxldGUgZVtyXSwgbyA9IG8gfHwgInRvZ2dsZSIgPT09IGksIGkgPT09IChkID8gImhpZGUiIDogInNob3ciKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJzaG93IiAhPT0gaSB8fCAhZyB8fCB2b2lkIDAgPT09IGdbcl0pIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcFtyXSA9IGcgJiYgZ1tyXSB8fCBaLnN0eWxlKHQsIHIpCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGMgPSB2b2lkIDA7CiAgICAgICAgICAgICAgICBpZiAoWi5pc0VtcHR5T2JqZWN0KHApKSAiaW5saW5lIiA9PT0gKCJub25lIiA9PT0gYyA/IHgodC5ub2RlTmFtZSkgOiBjKSAmJiAoaC5kaXNwbGF5ID0gYyk7CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBnID8gImhpZGRlbiIgaW4gZyAmJiAoZCA9IGcuaGlkZGVuKSA6IGcgPSB5dC5hY2Nlc3ModCwgImZ4c2hvdyIsIHt9KSwgbyAmJiAoZy5oaWRkZW4gPSAhZCksIGQgPyBaKHQpLnNob3coKSA6IGYuZG9uZShmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgWih0KS5oaWRlKCkKICAgICAgICAgICAgICAgICAgICB9KSwgZi5kb25lKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgICAgICAgICAgeXQucmVtb3ZlKHQsICJmeHNob3ciKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChlIGluIHApIFouc3R5bGUodCwgZSwgcFtlXSkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHIgaW4gcCkgYSA9IFIoZCA/IGdbcl0gOiAwLCByLCBmKSwgciBpbiBnIHx8IChnW3JdID0gYS5zdGFydCwgZCAmJiAoYS5lbmQgPSBhLnN0YXJ0LCBhLnN0YXJ0ID0gIndpZHRoIiA9PT0gciB8fCAiaGVpZ2h0IiA9PT0gciA/IDEgOiAwKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gTyh0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiwgciwgaSwgbywgYTsKICAgICAgICAgICAgICAgIGZvciAobiBpbiB0KQogICAgICAgICAgICAgICAgICAgIGlmIChyID0gWi5jYW1lbENhc2UobiksIGkgPSBlW3JdLCBvID0gdFtuXSwgWi5pc0FycmF5KG8pICYmIChpID0gb1sxXSwgbyA9IHRbbl0gPSBvWzBdKSwgbiAhPT0gciAmJiAodFtyXSA9IG8sIGRlbGV0ZSB0W25dKSwgYSA9IFouY3NzSG9va3Nbcl0sIGEgJiYgImV4cGFuZCIgaW4gYSkgewogICAgICAgICAgICAgICAgICAgICAgICBvID0gYS5leHBhbmQobyksIGRlbGV0ZSB0W3JdOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG4gaW4gbykgbiBpbiB0IHx8ICh0W25dID0gb1tuXSwgZVtuXSA9IGkpCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGVbcl0gPSBpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIEwodCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHIsIGksIG8gPSAwLAogICAgICAgICAgICAgICAgICAgIGEgPSBlZS5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgcyA9IFouRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB1LmVsZW0KICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICB1ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSBZdCB8fCBBKCksIG4gPSBNYXRoLm1heCgwLCBjLnN0YXJ0VGltZSArIGMuZHVyYXRpb24gLSBlKSwgciA9IG4gLyBjLmR1cmF0aW9uIHx8IDAsIG8gPSAxIC0gciwgYSA9IDAsIHUgPSBjLnR3ZWVucy5sZW5ndGg7IHUgPiBhOyBhKyspIGMudHdlZW5zW2FdLnJ1bihvKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMubm90aWZ5V2l0aCh0LCBbYywgbywgbl0pLCAxID4gbyAmJiB1ID8gbiA6IChzLnJlc29sdmVXaXRoKHQsIFtjXSksICExKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYyA9IHMucHJvbWlzZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW06IHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzOiBaLmV4dGVuZCh7fSwgZSksCiAgICAgICAgICAgICAgICAgICAgICAgIG9wdHM6IFouZXh0ZW5kKCEwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVjaWFsRWFzaW5nOiB7fQogICAgICAgICAgICAgICAgICAgICAgICB9LCBuKSwKICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxQcm9wZXJ0aWVzOiBlLAogICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE9wdGlvbnM6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogWXQgfHwgQSgpLAogICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogbi5kdXJhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW5zOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlVHdlZW46IGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gWi5Ud2Vlbih0LCBjLm9wdHMsIGUsIG4sIGMub3B0cy5zcGVjaWFsRWFzaW5nW2VdIHx8IGMub3B0cy5lYXNpbmcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMudHdlZW5zLnB1c2gociksIHIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlID8gYy50d2VlbnMubGVuZ3RoIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpKSByZXR1cm4gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9ICEwOyByID4gbjsgbisrKSBjLnR3ZWVuc1tuXS5ydW4oMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA/IHMucmVzb2x2ZVdpdGgodCwgW2MsIGVdKSA6IHMucmVqZWN0V2l0aCh0LCBbYywgZV0pLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBsID0gYy5wcm9wczsKICAgICAgICAgICAgICAgIGZvciAoTyhsLCBjLm9wdHMuc3BlY2lhbEVhc2luZyk7IGEgPiBvOyBvKyspCiAgICAgICAgICAgICAgICAgICAgaWYgKHIgPSBlZVtvXS5jYWxsKGMsIHQsIGwsIGMub3B0cykpIHJldHVybiByOwogICAgICAgICAgICAgICAgcmV0dXJuIFoubWFwKGwsIFIsIGMpLCBaLmlzRnVuY3Rpb24oYy5vcHRzLnN0YXJ0KSAmJiBjLm9wdHMuc3RhcnQuY2FsbCh0LCBjKSwgWi5meC50aW1lcihaLmV4dGVuZCh1LCB7CiAgICAgICAgICAgICAgICAgICAgZWxlbTogdCwKICAgICAgICAgICAgICAgICAgICBhbmltOiBjLAogICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBjLm9wdHMucXVldWUKICAgICAgICAgICAgICAgIH0pKSwgYy5wcm9ncmVzcyhjLm9wdHMucHJvZ3Jlc3MpLmRvbmUoYy5vcHRzLmRvbmUsIGMub3B0cy5jb21wbGV0ZSkuZmFpbChjLm9wdHMuZmFpbCkuYWx3YXlzKGMub3B0cy5hbHdheXMpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIEQodCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAic3RyaW5nIiAhPSB0eXBlb2YgZSAmJiAobiA9IGUsIGUgPSAiKiIpOwogICAgICAgICAgICAgICAgICAgIHZhciByLCBpID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUudG9Mb3dlckNhc2UoKS5tYXRjaChodCkgfHwgW107CiAgICAgICAgICAgICAgICAgICAgaWYgKFouaXNGdW5jdGlvbihuKSkKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IHIgPSBvW2krK107KSAiKyIgPT09IHJbMF0gPyAociA9IHIuc2xpY2UoMSkgfHwgIioiLCAodFtyXSA9IHRbcl0gfHwgW10pLnVuc2hpZnQobikpIDogKHRbcl0gPSB0W3JdIHx8IFtdKS5wdXNoKG4pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIFAodCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gaShzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9bc10gPSAhMCwgWi5lYWNoKHRbc10gfHwgW10sIGZ1bmN0aW9uKHQsIHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzKGUsIG4sIHIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gInN0cmluZyIgIT0gdHlwZW9mIGMgfHwgYSB8fCBvW2NdID8gYSA/ICEodSA9IGMpIDogdm9pZCAwIDogKGUuZGF0YVR5cGVzLnVuc2hpZnQoYyksIGkoYyksICExKQogICAgICAgICAgICAgICAgICAgIH0pLCB1CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgbyA9IHt9LAogICAgICAgICAgICAgICAgICAgIGEgPSB0ID09PSBiZTsKICAgICAgICAgICAgICAgIHJldHVybiBpKGUuZGF0YVR5cGVzWzBdKSB8fCAhb1siKiJdICYmIGkoIioiKQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiAkKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuLCByLCBpID0gWi5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnMgfHwge307CiAgICAgICAgICAgICAgICBmb3IgKG4gaW4gZSkgdm9pZCAwICE9PSBlW25dICYmICgoaVtuXSA/IHQgOiByIHx8IChyID0ge30pKVtuXSA9IGVbbl0pOwogICAgICAgICAgICAgICAgcmV0dXJuIHIgJiYgWi5leHRlbmQoITAsIHQsIHIpLCB0CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHEodCwgZSwgbikgewogICAgICAgICAgICAgICAgZm9yICh2YXIgciwgaSwgbywgYSwgcyA9IHQuY29udGVudHMsIHUgPSB0LmRhdGFUeXBlczsKICAgICAgICAgICAgICAgICAgICAiKiIgPT09IHVbMF07KSB1LnNoaWZ0KCksIHZvaWQgMCA9PT0gciAmJiAociA9IHQubWltZVR5cGUgfHwgZS5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIikpOwogICAgICAgICAgICAgICAgaWYgKHIpCiAgICAgICAgICAgICAgICAgICAgZm9yIChpIGluIHMpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzW2ldICYmIHNbaV0udGVzdChyKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdS51bnNoaWZ0KGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHVbMF0gaW4gbikgbyA9IHVbMF07CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKGkgaW4gbikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVbMF0gfHwgdC5jb252ZXJ0ZXJzW2kgKyAiICIgKyB1WzBdXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGEgfHwgKGEgPSBpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBvID0gbyB8fCBhCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbyA/IChvICE9PSB1WzBdICYmIHUudW5zaGlmdChvKSwgbltvXSkgOiB2b2lkIDAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gSCh0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICB2YXIgaSwgbywgYSwgcywgdSwgYyA9IHt9LAogICAgICAgICAgICAgICAgICAgIGwgPSB0LmRhdGFUeXBlcy5zbGljZSgpOwogICAgICAgICAgICAgICAgaWYgKGxbMV0pCiAgICAgICAgICAgICAgICAgICAgZm9yIChhIGluIHQuY29udmVydGVycykgY1thLnRvTG93ZXJDYXNlKCldID0gdC5jb252ZXJ0ZXJzW2FdOwogICAgICAgICAgICAgICAgZm9yIChvID0gbC5zaGlmdCgpOyBvOykKICAgICAgICAgICAgICAgICAgICBpZiAodC5yZXNwb25zZUZpZWxkc1tvXSAmJiAoblt0LnJlc3BvbnNlRmllbGRzW29dXSA9IGUpLCAhdSAmJiByICYmIHQuZGF0YUZpbHRlciAmJiAoZSA9IHQuZGF0YUZpbHRlcihlLCB0LmRhdGFUeXBlKSksIHUgPSBvLCBvID0gbC5zaGlmdCgpKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIioiID09PSBvKSBvID0gdTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIioiICE9PSB1ICYmIHUgIT09IG8pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYSA9IGNbdSArICIgIiArIG9dIHx8IGNbIiogIiArIG9dLCAhYSkKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpIGluIGMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyA9IGkuc3BsaXQoIiAiKSwgc1sxXSA9PT0gbyAmJiAoYSA9IGNbdSArICIgIiArIHNbMF1dIHx8IGNbIiogIiArIHNbMF1dKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPT09ICEwID8gYSA9IGNbaV0gOiBjW2ldICE9PSAhMCAmJiAobyA9IHNbMF0sIGwudW5zaGlmdChzWzFdKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoYSAhPT0gITApCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhICYmIHRbInRocm93cyJdKSBlID0gYShlKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGEoZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogInBhcnNlcmVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYSA/IGYgOiAiTm8gY29udmVyc2lvbiBmcm9tICIgKyB1ICsgIiB0byAiICsgbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHN0YXRlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgZGF0YTogZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBNKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICAgICAgaWYgKFouaXNBcnJheShlKSkgWi5lYWNoKGUsIGZ1bmN0aW9uKGUsIGkpIHsKICAgICAgICAgICAgICAgICAgICBuIHx8IFRlLnRlc3QodCkgPyByKHQsIGkpIDogTSh0ICsgIlsiICsgKCJvYmplY3QiID09IHR5cGVvZiBpID8gZSA6ICIiKSArICJdIiwgaSwgbiwgcikKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZWxzZSBpZiAobiB8fCAib2JqZWN0IiAhPT0gWi50eXBlKGUpKSByKHQsIGUpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGZvciAoaSBpbiBlKSBNKHQgKyAiWyIgKyBpICsgIl0iLCBlW2ldLCBuLCByKQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBGKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBaLmlzV2luZG93KHQpID8gdCA6IDkgPT09IHQubm9kZVR5cGUgJiYgdC5kZWZhdWx0VmlldwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBCID0gW10sCiAgICAgICAgICAgICAgICBVID0gQi5zbGljZSwKICAgICAgICAgICAgICAgIFcgPSBCLmNvbmNhdCwKICAgICAgICAgICAgICAgIHogPSBCLnB1c2gsCiAgICAgICAgICAgICAgICBWID0gQi5pbmRleE9mLAogICAgICAgICAgICAgICAgRyA9IHt9LAogICAgICAgICAgICAgICAgWCA9IEcudG9TdHJpbmcsCiAgICAgICAgICAgICAgICBKID0gRy5oYXNPd25Qcm9wZXJ0eSwKICAgICAgICAgICAgICAgIFkgPSB7fSwKICAgICAgICAgICAgICAgIFEgPSB0LmRvY3VtZW50LAogICAgICAgICAgICAgICAgSyA9ICIyLjEuNCIsCiAgICAgICAgICAgICAgICBaID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWi5mbi5pbml0KHQsIGUpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdHQgPSAvXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csCiAgICAgICAgICAgICAgICBldCA9IC9eLW1zLS8sCiAgICAgICAgICAgICAgICBudCA9IC8tKFtcZGEtel0pL2dpLAogICAgICAgICAgICAgICAgcnQgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUudG9VcHBlckNhc2UoKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgWi5mbiA9IFoucHJvdG90eXBlID0gewogICAgICAgICAgICAgICAganF1ZXJ5OiBLLAogICAgICAgICAgICAgICAgY29uc3RydWN0b3I6IFosCiAgICAgICAgICAgICAgICBzZWxlY3RvcjogIiIsCiAgICAgICAgICAgICAgICBsZW5ndGg6IDAsCiAgICAgICAgICAgICAgICB0b0FycmF5OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gVS5jYWxsKHRoaXMpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdCA/IDAgPiB0ID8gdGhpc1t0ICsgdGhpcy5sZW5ndGhdIDogdGhpc1t0XSA6IFUuY2FsbCh0aGlzKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHB1c2hTdGFjazogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gWi5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksIHQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnByZXZPYmplY3QgPSB0aGlzLCBlLmNvbnRleHQgPSB0aGlzLmNvbnRleHQsIGUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBlYWNoOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouZWFjaCh0aGlzLCB0LCBlKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG1hcDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2hTdGFjayhaLm1hcCh0aGlzLCBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNhbGwoZSwgbiwgZSkKICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzbGljZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKFUuYXBwbHkodGhpcywgYXJndW1lbnRzKSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmaXJzdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXEoMCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBsYXN0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lcSgtMSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBlcTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSArdCArICgwID4gdCA/IGUgOiAwKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoU3RhY2sobiA+PSAwICYmIGUgPiBuID8gW3RoaXNbbl1dIDogW10pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZW5kOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcmV2T2JqZWN0IHx8IHRoaXMuY29uc3RydWN0b3IobnVsbCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwdXNoOiB6LAogICAgICAgICAgICAgICAgc29ydDogQi5zb3J0LAogICAgICAgICAgICAgICAgc3BsaWNlOiBCLnNwbGljZQogICAgICAgICAgICB9LCBaLmV4dGVuZCA9IFouZm4uZXh0ZW5kID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgdCwgZSwgbiwgciwgaSwgbywgYSA9IGFyZ3VtZW50c1swXSB8fCB7fSwKICAgICAgICAgICAgICAgICAgICBzID0gMSwKICAgICAgICAgICAgICAgICAgICB1ID0gYXJndW1lbnRzLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICBjID0gITE7CiAgICAgICAgICAgICAgICBmb3IgKCJib29sZWFuIiA9PSB0eXBlb2YgYSAmJiAoYyA9IGEsIGEgPSBhcmd1bWVudHNbc10gfHwge30sIHMrKyksICJvYmplY3QiID09IHR5cGVvZiBhIHx8IFouaXNGdW5jdGlvbihhKSB8fCAoYSA9IHt9KSwgcyA9PT0gdSAmJiAoYSA9IHRoaXMsIHMtLSk7IHUgPiBzOyBzKyspCiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gKHQgPSBhcmd1bWVudHNbc10pKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgaW4gdCkgbiA9IGFbZV0sIHIgPSB0W2VdLCBhICE9PSByICYmIChjICYmIHIgJiYgKFouaXNQbGFpbk9iamVjdChyKSB8fCAoaSA9IFouaXNBcnJheShyKSkpID8gKGkgPyAoaSA9ICExLCBvID0gbiAmJiBaLmlzQXJyYXkobikgPyBuIDogW10pIDogbyA9IG4gJiYgWi5pc1BsYWluT2JqZWN0KG4pID8gbiA6IHt9LCBhW2VdID0gWi5leHRlbmQoYywgbywgcikpIDogdm9pZCAwICE9PSByICYmIChhW2VdID0gcikpOwogICAgICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICAgICAgfSwgWi5leHRlbmQoewogICAgICAgICAgICAgICAgZXhwYW5kbzogImpRdWVyeSIgKyAoSyArIE1hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csICIiKSwKICAgICAgICAgICAgICAgIGlzUmVhZHk6ICEwLAogICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBub29wOiBmdW5jdGlvbigpIHt9LAogICAgICAgICAgICAgICAgaXNGdW5jdGlvbjogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09PSBaLnR5cGUodCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5LAogICAgICAgICAgICAgICAgaXNXaW5kb3c6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPSB0ICYmIHQgPT09IHQud2luZG93CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaXNOdW1lcmljOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFaLmlzQXJyYXkodCkgJiYgdCAtIHBhcnNlRmxvYXQodCkgKyAxID49IDAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpc1BsYWluT2JqZWN0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJvYmplY3QiICE9PSBaLnR5cGUodCkgfHwgdC5ub2RlVHlwZSB8fCBaLmlzV2luZG93KHQpID8gITEgOiB0LmNvbnN0cnVjdG9yICYmICFKLmNhbGwodC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsICJpc1Byb3RvdHlwZU9mIikgPyAhMSA6ICEwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaXNFbXB0eU9iamVjdDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlOwogICAgICAgICAgICAgICAgICAgIGZvciAoZSBpbiB0KSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyB0ICsgIiIgOiAib2JqZWN0IiA9PSB0eXBlb2YgdCB8fCAiZnVuY3Rpb24iID09IHR5cGVvZiB0ID8gR1tYLmNhbGwodCldIHx8ICJvYmplY3QiIDogdHlwZW9mIHQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBnbG9iYWxFdmFsOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG4gPSBldmFsOwogICAgICAgICAgICAgICAgICAgIHQgPSBaLnRyaW0odCksIHQgJiYgKDEgPT09IHQuaW5kZXhPZigidXNlIHN0cmljdCIpID8gKGUgPSBRLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLCBlLnRleHQgPSB0LCBRLmhlYWQuYXBwZW5kQ2hpbGQoZSkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKSkgOiBuKHQpKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNhbWVsQ2FzZTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnJlcGxhY2UoZXQsICJtcy0iKS5yZXBsYWNlKG50LCBydCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBub2RlTmFtZTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0Lm5vZGVOYW1lICYmIHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gZS50b0xvd2VyQ2FzZSgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZWFjaDogZnVuY3Rpb24odCwgZSwgcikgewogICAgICAgICAgICAgICAgICAgIHZhciBpLCBvID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHQubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICBzID0gbih0KTsKICAgICAgICAgICAgICAgICAgICBpZiAocikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBhID4gbyAmJiAoaSA9IGUuYXBwbHkodFtvXSwgciksIGkgIT09ICExKTsgbysrKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvIGluIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPSBlLmFwcGx5KHRbb10sIHIpLCBpID09PSAhMSkgYnJlYWsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBhID4gbyAmJiAoaSA9IGUuY2FsbCh0W29dLCBvLCB0W29dKSwgaSAhPT0gITEpOyBvKyspOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvIGluIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9IGUuY2FsbCh0W29dLCBvLCB0W29dKSwgaSA9PT0gITEpIGJyZWFrOyByZXR1cm4gdAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHRyaW06IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0ID8gIiIgOiAodCArICIiKS5yZXBsYWNlKHR0LCAiIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBtYWtlQXJyYXk6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUgfHwgW107CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdCAmJiAobihPYmplY3QodCkpID8gWi5tZXJnZShyLCAic3RyaW5nIiA9PSB0eXBlb2YgdCA/IFt0XSA6IHQpIDogei5jYWxsKHIsIHQpKSwgcgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluQXJyYXk6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBlID8gLTEgOiBWLmNhbGwoZSwgdCwgbikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBtZXJnZTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSArZS5sZW5ndGgsIHIgPSAwLCBpID0gdC5sZW5ndGg7IG4gPiByOyByKyspIHRbaSsrXSA9IGVbcl07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQubGVuZ3RoID0gaSwgdAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGdyZXA6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByLCBpID0gW10sIG8gPSAwLCBhID0gdC5sZW5ndGgsIHMgPSAhbjsgYSA+IG87IG8rKykgciA9ICFlKHRbb10sIG8pLCByICE9PSBzICYmIGkucHVzaCh0W29dKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG1hcDogZnVuY3Rpb24odCwgZSwgcikgewogICAgICAgICAgICAgICAgICAgIHZhciBpLCBvID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHQubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICBzID0gbih0KSwKICAgICAgICAgICAgICAgICAgICAgICAgdSA9IFtdOwogICAgICAgICAgICAgICAgICAgIGlmIChzKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgYSA+IG87IG8rKykgaSA9IGUodFtvXSwgbywgciksIG51bGwgIT0gaSAmJiB1LnB1c2goaSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG8gaW4gdCkgaSA9IGUodFtvXSwgbywgciksIG51bGwgIT0gaSAmJiB1LnB1c2goaSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFcuYXBwbHkoW10sIHUpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ3VpZDogMSwKICAgICAgICAgICAgICAgIHByb3h5OiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIsIGk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiBlICYmIChuID0gdFtlXSwgZSA9IHQsIHQgPSBuKSwgWi5pc0Z1bmN0aW9uKHQpID8gKHIgPSBVLmNhbGwoYXJndW1lbnRzLCAyKSwgaSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseShlIHx8IHRoaXMsIHIuY29uY2F0KFUuY2FsbChhcmd1bWVudHMpKSkKICAgICAgICAgICAgICAgICAgICB9LCBpLmd1aWQgPSB0Lmd1aWQgPSB0Lmd1aWQgfHwgWi5ndWlkKyssIGkpIDogdm9pZCAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbm93OiBEYXRlLm5vdywKICAgICAgICAgICAgICAgIHN1cHBvcnQ6IFkKICAgICAgICAgICAgfSksIFouZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgR1siW29iamVjdCAiICsgZSArICJdIl0gPSBlLnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBpdCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUodCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIHZhciBpLCBvLCBhLCBzLCB1LCBjLCBmLCBoLCBkLCBnOwogICAgICAgICAgICAgICAgICAgIGlmICgoZSA/IGUub3duZXJEb2N1bWVudCB8fCBlIDogTSkgIT09IEkgJiYgUihlKSwgZSA9IGUgfHwgSSwgbiA9IG4gfHwgW10sIHMgPSBlLm5vZGVUeXBlLCAic3RyaW5nIiAhPSB0eXBlb2YgdCB8fCAhdCB8fCAxICE9PSBzICYmIDkgIT09IHMgJiYgMTEgIT09IHMpIHJldHVybiBuOwogICAgICAgICAgICAgICAgICAgIGlmICghciAmJiBMKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxMSAhPT0gcyAmJiAoaSA9IG10LmV4ZWModCkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgPSBpWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDkgPT09IHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPSBlLmdldEVsZW1lbnRCeUlkKGEpLCAhbyB8fCAhby5wYXJlbnROb2RlKSByZXR1cm4gbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uaWQgPT09IGEpIHJldHVybiBuLnB1c2gobyksIG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUub3duZXJEb2N1bWVudCAmJiAobyA9IGUub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKSkgJiYgcShlLCBvKSAmJiBvLmlkID09PSBhKSByZXR1cm4gbi5wdXNoKG8pLCBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpWzJdKSByZXR1cm4gSy5hcHBseShuLCBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHQpKSwgbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGEgPSBpWzNdKSAmJiB3LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpIHJldHVybiBLLmFwcGx5KG4sIGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKSksIG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHcucXNhICYmICghRCB8fCAhRC50ZXN0KHQpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGggPSBmID0gSCwgZCA9IGUsIGcgPSAxICE9PSBzICYmIHQsIDEgPT09IHMgJiYgIm9iamVjdCIgIT09IGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYyA9IEUodCksIChmID0gZS5nZXRBdHRyaWJ1dGUoImlkIikpID8gaCA9IGYucmVwbGFjZSh4dCwgIlxcJCYiKSA6IGUuc2V0QXR0cmlidXRlKCJpZCIsIGgpLCBoID0gIltpZD0nIiArIGggKyAiJ10gIiwgdSA9IGMubGVuZ3RoOyB1LS07KSBjW3VdID0gaCArIHAoY1t1XSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGJ0LnRlc3QodCkgJiYgbChlLnBhcmVudE5vZGUpIHx8IGUsIGcgPSBjLmpvaW4oIiwiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGcpIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEsuYXBwbHkobiwgZC5xdWVyeVNlbGVjdG9yQWxsKGcpKSwgbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodikge30gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiB8fCBlLnJlbW92ZUF0dHJpYnV0ZSgiaWQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBDKHQucmVwbGFjZSh1dCwgIiQxIiksIGUsIG4sIHIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gbigpIHsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB0KG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucHVzaChuICsgIiAiKSA+IF8uY2FjaGVMZW5ndGggJiYgZGVsZXRlIHRbZS5zaGlmdCgpXSwgdFtuICsgIiAiXSA9IHIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBbXTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0W0hdID0gITAsIHQKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IEkuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhdChlKQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICAgICAgZS5wYXJlbnROb2RlICYmIGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKSwgZSA9IG51bGwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gbyh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IHQuc3BsaXQoInwiKSwgciA9IHQubGVuZ3RoOyByLS07KSBfLmF0dHJIYW5kbGVbbltyXV0gPSBlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gYSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlICYmIHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBuICYmIDEgPT09IHQubm9kZVR5cGUgJiYgMSA9PT0gZS5ub2RlVHlwZSAmJiAofmUuc291cmNlSW5kZXggfHwgRykgLSAofnQuc291cmNlSW5kZXggfHwgRyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHIpIHJldHVybiByOwogICAgICAgICAgICAgICAgICAgIGlmIChuKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgbiA9IG4ubmV4dFNpYmxpbmc7KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPT09IGUpIHJldHVybiAtMTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA/IDEgOiAtMQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHModCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImlucHV0IiA9PT0gbiAmJiBlLnR5cGUgPT09IHQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gdSh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoImlucHV0IiA9PT0gbiB8fCAiYnV0dG9uIiA9PT0gbikgJiYgZS50eXBlID09PSB0CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGModCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPSArZSwgcihmdW5jdGlvbihuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpLCBvID0gdChbXSwgbi5sZW5ndGgsIGUpLCBhID0gby5sZW5ndGg7IGEtLTspIG5baSA9IG9bYV1dICYmIChuW2ldID0gIShyW2ldID0gbltpXSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBsKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCAmJiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgdC5nZXRFbGVtZW50c0J5VGFnTmFtZSAmJiB0CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZigpIHt9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcCh0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IDAsIG4gPSB0Lmxlbmd0aCwgciA9ICIiOyBuID4gZTsgZSsrKSByICs9IHRbZV0udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBoKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUuZGlyLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gbiAmJiAicGFyZW50Tm9kZSIgPT09IHIsCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBCKys7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZmlyc3QgPyBmdW5jdGlvbihlLCBuLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBlID0gZVtyXTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gZS5ub2RlVHlwZSB8fCBpKSByZXR1cm4gdChlLCBuLCBvKQogICAgICAgICAgICAgICAgICAgIH0gOiBmdW5jdGlvbihlLCBuLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzLCB1LCBjID0gW0YsIG9dOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGUgPSBlW3JdOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKDEgPT09IGUubm9kZVR5cGUgfHwgaSkgJiYgdChlLCBuLCBhKSkgcmV0dXJuICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGUgPSBlW3JdOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gZS5ub2RlVHlwZSB8fCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1ID0gZVtIXSB8fCAoZVtIXSA9IHt9KSwgKHMgPSB1W3JdKSAmJiBzWzBdID09PSBGICYmIHNbMV0gPT09IG8pIHJldHVybiBjWzJdID0gc1syXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVbcl0gPSBjLCBjWzJdID0gdChlLCBuLCBhKSkgcmV0dXJuICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5sZW5ndGggPiAxID8gZnVuY3Rpb24oZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gdC5sZW5ndGg7IGktLTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRbaV0oZSwgbiwgcikpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwCiAgICAgICAgICAgICAgICAgICAgfSA6IHRbMF0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbyA9IG4ubGVuZ3RoOyBvID4gaTsgaSsrKSBlKHQsIG5baV0sIHIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gdih0LCBlLCBuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbywgYSA9IFtdLCBzID0gMCwgdSA9IHQubGVuZ3RoLCBjID0gbnVsbCAhPSBlOyB1ID4gczsgcysrKShvID0gdFtzXSkgJiYgKCFuIHx8IG4obywgciwgaSkpICYmIChhLnB1c2gobyksIGMgJiYgZS5wdXNoKHMpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHkodCwgZSwgbiwgaSwgbywgYSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpICYmICFpW0hdICYmIChpID0geShpKSksIG8gJiYgIW9bSF0gJiYgKG8gPSB5KG8sIGEpKSwgcihmdW5jdGlvbihyLCBhLCBzLCB1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjLCBsLCBmLCBwID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gYS5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gciB8fCBnKGUgfHwgIioiLCBzLm5vZGVUeXBlID8gW3NdIDogcywgW10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9ICF0IHx8ICFyICYmIGUgPyB5IDogdih5LCBwLCB0LCBzLCB1KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBuID8gbyB8fCAociA/IHQgOiBkIHx8IGkpID8gW10gOiBhIDogbTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gJiYgbihtLCBiLCBzLCB1KSwgaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYyA9IHYoYiwgaCksIGkoYywgW10sIHMsIHUpLCBsID0gYy5sZW5ndGg7IGwtLTspKGYgPSBjW2xdKSAmJiAoYltoW2xdXSA9ICEobVtoW2xdXSA9IGYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvIHx8IHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGMgPSBbXSwgbCA9IGIubGVuZ3RoOyBsLS07KShmID0gYltsXSkgJiYgYy5wdXNoKG1bbF0gPSBmKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyhudWxsLCBiID0gW10sIGMsIHUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobCA9IGIubGVuZ3RoOyBsLS07KShmID0gYltsXSkgJiYgKGMgPSBvID8gdHQociwgZikgOiBwW2xdKSA+IC0xICYmIChyW2NdID0gIShhW2NdID0gZikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBiID0gdihiID09PSBhID8gYi5zcGxpY2UoZCwgYi5sZW5ndGgpIDogYiksIG8gPyBvKG51bGwsIGEsIGIsIHUpIDogSy5hcHBseShhLCBiKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gbSh0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSwgbiwgciwgaSA9IHQubGVuZ3RoLCBvID0gXy5yZWxhdGl2ZVt0WzBdLnR5cGVdLCBhID0gbyB8fCBfLnJlbGF0aXZlWyIgIl0sIHMgPSBvID8gMSA6IDAsIHUgPSBoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGEsICEwKSwgYyA9IGgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR0KGUsIHQpID4gLTEKICAgICAgICAgICAgICAgICAgICAgICAgfSwgYSwgITApLCBsID0gW2Z1bmN0aW9uKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gIW8gJiYgKHIgfHwgbiAhPT0gUykgfHwgKChlID0gbikubm9kZVR5cGUgPyB1KHQsIG4sIHIpIDogYyh0LCBuLCByKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9IG51bGwsIGkKICAgICAgICAgICAgICAgICAgICAgICAgfV07IGkgPiBzOyBzKyspCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gXy5yZWxhdGl2ZVt0W3NdLnR5cGVdKSBsID0gW2goZChsKSwgbildOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gXy5maWx0ZXJbdFtzXS50eXBlXS5hcHBseShudWxsLCB0W3NdLm1hdGNoZXMpLCBuW0hdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyID0gKytzOyBpID4gciAmJiAhXy5yZWxhdGl2ZVt0W3JdLnR5cGVdOyByKyspOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KHMgPiAxICYmIGQobCksIHMgPiAxICYmIHAodC5zbGljZSgwLCBzIC0gMSkuY29uY2F0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICIgIiA9PT0gdFtzIC0gMl0udHlwZSA/ICIqIiA6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLnJlcGxhY2UodXQsICIkMSIpLCBuLCByID4gcyAmJiBtKHQuc2xpY2UocywgcikpLCBpID4gciAmJiBtKHQgPSB0LnNsaWNlKHIpKSwgaSA+IHIgJiYgcCh0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChuKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQobCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBiKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG4ubGVuZ3RoID4gMCwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHQubGVuZ3RoID4gMCwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGZ1bmN0aW9uKHIsIGEsIHMsIHUsIGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsLCBmLCBwLCBoID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSByICYmIFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gUywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gciB8fCBvICYmIF8uZmluZC5UQUcoIioiLCBjKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gRiArPSBudWxsID09IG0gPyAxIDogTWF0aC5yYW5kb20oKSB8fCAuMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gYi5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGMgJiYgKFMgPSBhICE9PSBJICYmIGEpOyBkICE9PSB3ICYmIG51bGwgIT0gKGwgPSBiW2RdKTsgZCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gJiYgbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGYgPSAwOyBwID0gdFtmKytdOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwKGwsIGEsIHMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5wdXNoKGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgJiYgKEYgPSB4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmICgobCA9ICFwICYmIGwpICYmIGgtLSwgciAmJiBnLnB1c2gobCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaCArPSBkLCBpICYmIGQgIT09IGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGYgPSAwOyBwID0gbltmKytdOykgcChnLCB5LCBhLCBzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaCA+IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgZC0tOykgZ1tkXSB8fCB5W2RdIHx8ICh5W2RdID0gWS5jYWxsKHUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHYoeSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSy5hcHBseSh1LCB5KSwgYyAmJiAhciAmJiB5Lmxlbmd0aCA+IDAgJiYgaCArIG4ubGVuZ3RoID4gMSAmJiBlLnVuaXF1ZVNvcnQodSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjICYmIChGID0geCwgUyA9IG0pLCBnCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgPyByKGEpIDogYQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHgsIHcsIF8sIGssIFQsIEUsIGosIEMsIFMsIEEsIE4sIFIsIEksIE8sIEwsIEQsIFAsICQsIHEsIEggPSAic2l6emxlIiArIDEgKiBuZXcgRGF0ZSwKICAgICAgICAgICAgICAgICAgICBNID0gdC5kb2N1bWVudCwKICAgICAgICAgICAgICAgICAgICBGID0gMCwKICAgICAgICAgICAgICAgICAgICBCID0gMCwKICAgICAgICAgICAgICAgICAgICBVID0gbigpLAogICAgICAgICAgICAgICAgICAgIFcgPSBuKCksCiAgICAgICAgICAgICAgICAgICAgeiA9IG4oKSwKICAgICAgICAgICAgICAgICAgICBWID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gZSAmJiAoTiA9ICEwKSwgMAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgRyA9IDEgPDwgMzEsCiAgICAgICAgICAgICAgICAgICAgWCA9IHt9Lmhhc093blByb3BlcnR5LAogICAgICAgICAgICAgICAgICAgIEogPSBbXSwKICAgICAgICAgICAgICAgICAgICBZID0gSi5wb3AsCiAgICAgICAgICAgICAgICAgICAgUSA9IEoucHVzaCwKICAgICAgICAgICAgICAgICAgICBLID0gSi5wdXNoLAogICAgICAgICAgICAgICAgICAgIFogPSBKLnNsaWNlLAogICAgICAgICAgICAgICAgICAgIHR0ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgciA9IHQubGVuZ3RoOyByID4gbjsgbisrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRbbl0gPT09IGUpIHJldHVybiBuOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGV0ID0gImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIiwKICAgICAgICAgICAgICAgICAgICBudCA9ICJbXFx4MjBcXHRcXHJcXG5cXGZdIiwKICAgICAgICAgICAgICAgICAgICBydCA9ICIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0pKyIsCiAgICAgICAgICAgICAgICAgICAgaXQgPSBydC5yZXBsYWNlKCJ3IiwgIncjIiksCiAgICAgICAgICAgICAgICAgICAgb3QgPSAiXFxbIiArIG50ICsgIiooIiArIHJ0ICsgIikoPzoiICsgbnQgKyAiKihbKl4kfCF+XT89KSIgKyBudCArICIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIgKyBpdCArICIpKXwpIiArIG50ICsgIipcXF0iLAogICAgICAgICAgICAgICAgICAgIGF0ID0gIjooIiArIHJ0ICsgIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiICsgb3QgKyAiKSopfC4qKVxcKXwpIiwKICAgICAgICAgICAgICAgICAgICBzdCA9IG5ldyBSZWdFeHAobnQgKyAiKyIsICJnIiksCiAgICAgICAgICAgICAgICAgICAgdXQgPSBuZXcgUmVnRXhwKCJeIiArIG50ICsgIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIgKyBudCArICIrJCIsICJnIiksCiAgICAgICAgICAgICAgICAgICAgY3QgPSBuZXcgUmVnRXhwKCJeIiArIG50ICsgIiosIiArIG50ICsgIioiKSwKICAgICAgICAgICAgICAgICAgICBsdCA9IG5ldyBSZWdFeHAoIl4iICsgbnQgKyAiKihbPit+XXwiICsgbnQgKyAiKSIgKyBudCArICIqIiksCiAgICAgICAgICAgICAgICAgICAgZnQgPSBuZXcgUmVnRXhwKCI9IiArIG50ICsgIiooW15cXF0nXCJdKj8pIiArIG50ICsgIipcXF0iLCAiZyIpLAogICAgICAgICAgICAgICAgICAgIHB0ID0gbmV3IFJlZ0V4cChhdCksCiAgICAgICAgICAgICAgICAgICAgaHQgPSBuZXcgUmVnRXhwKCJeIiArIGl0ICsgIiQiKSwKICAgICAgICAgICAgICAgICAgICBkdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgSUQ6IG5ldyBSZWdFeHAoIl4jKCIgKyBydCArICIpIiksCiAgICAgICAgICAgICAgICAgICAgICAgIENMQVNTOiBuZXcgUmVnRXhwKCJeXFwuKCIgKyBydCArICIpIiksCiAgICAgICAgICAgICAgICAgICAgICAgIFRBRzogbmV3IFJlZ0V4cCgiXigiICsgcnQucmVwbGFjZSgidyIsICJ3KiIpICsgIikiKSwKICAgICAgICAgICAgICAgICAgICAgICAgQVRUUjogbmV3IFJlZ0V4cCgiXiIgKyBvdCksCiAgICAgICAgICAgICAgICAgICAgICAgIFBTRVVETzogbmV3IFJlZ0V4cCgiXiIgKyBhdCksCiAgICAgICAgICAgICAgICAgICAgICAgIENISUxEOiBuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiICsgbnQgKyAiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIgKyBudCArICIqKD86KFsrLV18KSIgKyBudCArICIqKFxcZCspfCkpIiArIG50ICsgIipcXCl8KSIsICJpIiksCiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2w6IG5ldyBSZWdFeHAoIl4oPzoiICsgZXQgKyAiKSQiLCAiaSIpLAogICAgICAgICAgICAgICAgICAgICAgICBuZWVkc0NvbnRleHQ6IG5ldyBSZWdFeHAoIl4iICsgbnQgKyAiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIiArIG50ICsgIiooKD86LVxcZCk/XFxkKikiICsgbnQgKyAiKlxcKXwpKD89W14tXXwkKSIsICJpIikKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGd0ID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSwKICAgICAgICAgICAgICAgICAgICB2dCA9IC9eaFxkJC9pLAogICAgICAgICAgICAgICAgICAgIHl0ID0gL15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLAogICAgICAgICAgICAgICAgICAgIG10ID0gL14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLywKICAgICAgICAgICAgICAgICAgICBidCA9IC9bK35dLywKICAgICAgICAgICAgICAgICAgICB4dCA9IC8nfFxcL2csCiAgICAgICAgICAgICAgICAgICAgd3QgPSBuZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iICsgbnQgKyAiP3woIiArIG50ICsgIil8LikiLCAiaWciKSwKICAgICAgICAgICAgICAgICAgICBfdCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAiMHgiICsgZSAtIDY1NTM2OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAhPT0gciB8fCBuID8gZSA6IDAgPiByID8gU3RyaW5nLmZyb21DaGFyQ29kZShyICsgNjU1MzYpIDogU3RyaW5nLmZyb21DaGFyQ29kZShyID4+IDEwIHwgNTUyOTYsIDEwMjMgJiByIHwgNTYzMjApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBrdCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBSKCkKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBLLmFwcGx5KEogPSBaLmNhbGwoTS5jaGlsZE5vZGVzKSwgTS5jaGlsZE5vZGVzKSwgSltNLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZQogICAgICAgICAgICAgICAgfSBjYXRjaCAoVHQpIHsKICAgICAgICAgICAgICAgICAgICBLID0gewogICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogSi5sZW5ndGggPyBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBRLmFwcGx5KHQsIFouY2FsbChlKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSA6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSB0Lmxlbmd0aCwgciA9IDA7IHRbbisrXSA9IGVbcisrXTspOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5sZW5ndGggPSBuIC0gMQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdyA9IGUuc3VwcG9ydCA9IHt9LCBUID0gZS5pc1hNTCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQgJiYgKHQub3duZXJEb2N1bWVudCB8fCB0KS5kb2N1bWVudEVsZW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPyAiSFRNTCIgIT09IGUubm9kZU5hbWUgOiAhMQogICAgICAgICAgICAgICAgfSwgUiA9IGUuc2V0RG9jdW1lbnQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG4sIHIgPSB0ID8gdC5vd25lckRvY3VtZW50IHx8IHQgOiBNOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByICE9PSBJICYmIDkgPT09IHIubm9kZVR5cGUgJiYgci5kb2N1bWVudEVsZW1lbnQgPyAoSSA9IHIsIE8gPSByLmRvY3VtZW50RWxlbWVudCwgbiA9IHIuZGVmYXVsdFZpZXcsIG4gJiYgbiAhPT0gbi50b3AgJiYgKG4uYWRkRXZlbnRMaXN0ZW5lciA/IG4uYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIiwga3QsICExKSA6IG4uYXR0YWNoRXZlbnQgJiYgbi5hdHRhY2hFdmVudCgib251bmxvYWQiLCBrdCkpLCBMID0gIVQociksIHcuYXR0cmlidXRlcyA9IGkoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5jbGFzc05hbWUgPSAiaSIsICF0LmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIikKICAgICAgICAgICAgICAgICAgICB9KSwgdy5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IGkoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBlbmRDaGlsZChyLmNyZWF0ZUNvbW1lbnQoIiIpKSwgIXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGgKICAgICAgICAgICAgICAgICAgICB9KSwgdy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0geXQudGVzdChyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLCB3LmdldEJ5SWQgPSBpKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE8uYXBwZW5kQ2hpbGQodCkuaWQgPSBILCAhci5nZXRFbGVtZW50c0J5TmFtZSB8fCAhci5nZXRFbGVtZW50c0J5TmFtZShIKS5sZW5ndGgKICAgICAgICAgICAgICAgICAgICB9KSwgdy5nZXRCeUlkID8gKF8uZmluZC5JRCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBlLmdldEVsZW1lbnRCeUlkICYmIEwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS5nZXRFbGVtZW50QnlJZCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuICYmIG4ucGFyZW50Tm9kZSA/IFtuXSA6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfLmZpbHRlci5JRCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0LnJlcGxhY2Uod3QsIF90KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmdldEF0dHJpYnV0ZSgiaWQiKSA9PT0gZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkgOiAoZGVsZXRlIF8uZmluZC5JRCwgXy5maWx0ZXIuSUQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdC5yZXBsYWNlKHd0LCBfdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiB0LmdldEF0dHJpYnV0ZU5vZGUgJiYgdC5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gJiYgbi52YWx1ZSA9PT0gZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksIF8uZmluZC5UQUcgPSB3LmdldEVsZW1lbnRzQnlUYWdOYW1lID8gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gInVuZGVmaW5lZCIgIT0gdHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPyBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHQpIDogdy5xc2EgPyBlLnF1ZXJ5U2VsZWN0b3JBbGwodCkgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICB9IDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCIqIiA9PT0gdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IG4gPSBvW2krK107KSAxID09PSBuLm5vZGVUeXBlICYmIHIucHVzaChuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgICAgICAgICB9LCBfLmZpbmQuQ0xBU1MgPSB3LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiYgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTCA/IGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSh0KSA6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgIH0sIFAgPSBbXSwgRCA9IFtdLCAody5xc2EgPSB5dC50ZXN0KHIucXVlcnlTZWxlY3RvckFsbCkpICYmIChpKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgTy5hcHBlbmRDaGlsZCh0KS5pbm5lckhUTUwgPSAiPGEgaWQ9JyIgKyBIICsgIic+PC9hPjxzZWxlY3QgaWQ9JyIgKyBIICsgIi1cZl0nIG1zYWxsb3djYXB0dXJlPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IiwgdC5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCAmJiBELnB1c2goIlsqXiRdPSIgKyBudCArICIqKD86Jyd8XCJcIikiKSwgdC5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RoIHx8IEQucHVzaCgiXFxbIiArIG50ICsgIiooPzp2YWx1ZXwiICsgZXQgKyAiKSIpLCB0LnF1ZXJ5U2VsZWN0b3JBbGwoIltpZH49IiArIEggKyAiLV0iKS5sZW5ndGggfHwgRC5wdXNoKCJ+PSIpLCB0LnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RoIHx8IEQucHVzaCgiOmNoZWNrZWQiKSwgdC5xdWVyeVNlbGVjdG9yQWxsKCJhIyIgKyBIICsgIisqIikubGVuZ3RoIHx8IEQucHVzaCgiLiMuK1srfl0iKQogICAgICAgICAgICAgICAgICAgIH0pLCBpKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSByLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIGUuc2V0QXR0cmlidXRlKCJ0eXBlIiwgImhpZGRlbiIpLCB0LmFwcGVuZENoaWxkKGUpLnNldEF0dHJpYnV0ZSgibmFtZSIsICJEIiksIHQucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGggJiYgRC5wdXNoKCJuYW1lIiArIG50ICsgIipbKl4kfCF+XT89IiksIHQucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGggfHwgRC5wdXNoKCI6ZW5hYmxlZCIsICI6ZGlzYWJsZWQiKSwgdC5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IiksIEQucHVzaCgiLC4qOiIpCiAgICAgICAgICAgICAgICAgICAgfSkpLCAody5tYXRjaGVzU2VsZWN0b3IgPSB5dC50ZXN0KCQgPSBPLm1hdGNoZXMgfHwgTy53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHwgTy5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgTy5vTWF0Y2hlc1NlbGVjdG9yIHx8IE8ubXNNYXRjaGVzU2VsZWN0b3IpKSAmJiBpKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdy5kaXNjb25uZWN0ZWRNYXRjaCA9ICQuY2FsbCh0LCAiZGl2IiksICQuY2FsbCh0LCAiW3MhPScnXTp4IiksIFAucHVzaCgiIT0iLCBhdCkKICAgICAgICAgICAgICAgICAgICB9KSwgRCA9IEQubGVuZ3RoICYmIG5ldyBSZWdFeHAoRC5qb2luKCJ8IikpLCBQID0gUC5sZW5ndGggJiYgbmV3IFJlZ0V4cChQLmpvaW4oInwiKSksIGUgPSB5dC50ZXN0KE8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLCBxID0gZSB8fCB5dC50ZXN0KE8uY29udGFpbnMpID8gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IDkgPT09IHQubm9kZVR5cGUgPyB0LmRvY3VtZW50RWxlbWVudCA6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZSAmJiBlLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSByIHx8ICEoIXIgfHwgMSAhPT0gci5ub2RlVHlwZSB8fCAhKG4uY29udGFpbnMgPyBuLmNvbnRhaW5zKHIpIDogdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiAxNiAmIHQuY29tcGFyZURvY3VtZW50UG9zaXRpb24ocikpKQogICAgICAgICAgICAgICAgICAgIH0gOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGUgPSBlLnBhcmVudE5vZGU7KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlID09PSB0KSByZXR1cm4gITA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgIH0sIFYgPSBlID8gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA9PT0gZSkgcmV0dXJuIE4gPSAhMCwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSAhdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAtICFlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA/IG4gOiAobiA9ICh0Lm93bmVyRG9jdW1lbnQgfHwgdCkgPT09IChlLm93bmVyRG9jdW1lbnQgfHwgZSkgPyB0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGUpIDogMSwgMSAmIG4gfHwgIXcuc29ydERldGFjaGVkICYmIGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odCkgPT09IG4gPyB0ID09PSByIHx8IHQub3duZXJEb2N1bWVudCA9PT0gTSAmJiBxKE0sIHQpID8gLTEgOiBlID09PSByIHx8IGUub3duZXJEb2N1bWVudCA9PT0gTSAmJiBxKE0sIGUpID8gMSA6IEEgPyB0dChBLCB0KSAtIHR0KEEsIGUpIDogMCA6IDQgJiBuID8gLTEgOiAxKQogICAgICAgICAgICAgICAgICAgIH0gOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID09PSBlKSByZXR1cm4gTiA9ICEwLCAwOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgaSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5wYXJlbnROb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGUucGFyZW50Tm9kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBbdF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gW2VdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW8gfHwgIXMpIHJldHVybiB0ID09PSByID8gLTEgOiBlID09PSByID8gMSA6IG8gPyAtMSA6IHMgPyAxIDogQSA/IHR0KEEsIHQpIC0gdHQoQSwgZSkgOiAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9PT0gcykgcmV0dXJuIGEodCwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobiA9IHQ7IG4gPSBuLnBhcmVudE5vZGU7KSB1LnVuc2hpZnQobik7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobiA9IGU7IG4gPSBuLnBhcmVudE5vZGU7KSBjLnVuc2hpZnQobik7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyB1W2ldID09PSBjW2ldOykgaSsrOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSA/IGEodVtpXSwgY1tpXSkgOiB1W2ldID09PSBNID8gLTEgOiBjW2ldID09PSBNID8gMSA6IDAKICAgICAgICAgICAgICAgICAgICB9LCByKSA6IEkKICAgICAgICAgICAgICAgIH0sIGUubWF0Y2hlcyA9IGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSh0LCBudWxsLCBudWxsLCBuKQogICAgICAgICAgICAgICAgfSwgZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCh0Lm93bmVyRG9jdW1lbnQgfHwgdCkgIT09IEkgJiYgUih0KSwgbiA9IG4ucmVwbGFjZShmdCwgIj0nJDEnXSIpLCB3Lm1hdGNoZXNTZWxlY3RvciAmJiBMICYmICghUCB8fCAhUC50ZXN0KG4pKSAmJiAoIUQgfHwgIUQudGVzdChuKSkpIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gJC5jYWxsKHQsIG4pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAociB8fCB3LmRpc2Nvbm5lY3RlZE1hdGNoIHx8IHQuZG9jdW1lbnQgJiYgMTEgIT09IHQuZG9jdW1lbnQubm9kZVR5cGUpIHJldHVybiByCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoaSkge30KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZShuLCBJLCBudWxsLCBbdF0pLmxlbmd0aCA+IDAKICAgICAgICAgICAgICAgIH0sIGUuY29udGFpbnMgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0Lm93bmVyRG9jdW1lbnQgfHwgdCkgIT09IEkgJiYgUih0KSwgcSh0LCBlKQogICAgICAgICAgICAgICAgfSwgZS5hdHRyID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICh0Lm93bmVyRG9jdW1lbnQgfHwgdCkgIT09IEkgJiYgUih0KTsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IF8uYXR0ckhhbmRsZVtlLnRvTG93ZXJDYXNlKCldLAogICAgICAgICAgICAgICAgICAgICAgICByID0gbiAmJiBYLmNhbGwoXy5hdHRySGFuZGxlLCBlLnRvTG93ZXJDYXNlKCkpID8gbih0LCBlLCAhTCkgOiB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gciA/IHIgOiB3LmF0dHJpYnV0ZXMgfHwgIUwgPyB0LmdldEF0dHJpYnV0ZShlKSA6IChyID0gdC5nZXRBdHRyaWJ1dGVOb2RlKGUpKSAmJiByLnNwZWNpZmllZCA/IHIudmFsdWUgOiBudWxsCiAgICAgICAgICAgICAgICB9LCBlLmVycm9yID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIiArIHQpCiAgICAgICAgICAgICAgICB9LCBlLnVuaXF1ZVNvcnQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG4gPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICAgIGlmIChOID0gIXcuZGV0ZWN0RHVwbGljYXRlcywgQSA9ICF3LnNvcnRTdGFibGUgJiYgdC5zbGljZSgwKSwgdC5zb3J0KFYpLCBOKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBlID0gdFtpKytdOykgZSA9PT0gdFtpXSAmJiAociA9IG4ucHVzaChpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyByLS07KSB0LnNwbGljZShuW3JdLCAxKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gQSA9IG51bGwsIHQKICAgICAgICAgICAgICAgIH0sIGsgPSBlLmdldFRleHQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG4gPSAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0Lm5vZGVUeXBlOwogICAgICAgICAgICAgICAgICAgIGlmIChpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxID09PSBpIHx8IDkgPT09IGkgfHwgMTEgPT09IGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgdC50ZXh0Q29udGVudCkgcmV0dXJuIHQudGV4dENvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHQgPSB0LmZpcnN0Q2hpbGQ7IHQ7IHQgPSB0Lm5leHRTaWJsaW5nKSBuICs9IGsodCkKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgzID09PSBpIHx8IDQgPT09IGkpIHJldHVybiB0Lm5vZGVWYWx1ZQogICAgICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgZSA9IHRbcisrXTspIG4gKz0gayhlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgfSwgXyA9IGUuc2VsZWN0b3JzID0gewogICAgICAgICAgICAgICAgICAgIGNhY2hlTGVuZ3RoOiA1MCwKICAgICAgICAgICAgICAgICAgICBjcmVhdGVQc2V1ZG86IHIsCiAgICAgICAgICAgICAgICAgICAgbWF0Y2g6IGR0LAogICAgICAgICAgICAgICAgICAgIGF0dHJIYW5kbGU6IHt9LAogICAgICAgICAgICAgICAgICAgIGZpbmQ6IHt9LAogICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICI+IjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyOiAicGFyZW50Tm9kZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdDogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgIiAiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXI6ICJwYXJlbnROb2RlIgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAiKyI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcjogInByZXZpb3VzU2libGluZyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdDogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgIn4iOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXI6ICJwcmV2aW91c1NpYmxpbmciCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHByZUZpbHRlcjogewogICAgICAgICAgICAgICAgICAgICAgICBBVFRSOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdFsxXSA9IHRbMV0ucmVwbGFjZSh3dCwgX3QpLCB0WzNdID0gKHRbM10gfHwgdFs0XSB8fCB0WzVdIHx8ICIiKS5yZXBsYWNlKHd0LCBfdCksICJ+PSIgPT09IHRbMl0gJiYgKHRbM10gPSAiICIgKyB0WzNdICsgIiAiKSwgdC5zbGljZSgwLCA0KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBDSElMRDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRbMV0gPSB0WzFdLnRvTG93ZXJDYXNlKCksICJudGgiID09PSB0WzFdLnNsaWNlKDAsIDMpID8gKHRbM10gfHwgZS5lcnJvcih0WzBdKSwgdFs0XSA9ICsodFs0XSA/IHRbNV0gKyAodFs2XSB8fCAxKSA6IDIgKiAoImV2ZW4iID09PSB0WzNdIHx8ICJvZGQiID09PSB0WzNdKSksIHRbNV0gPSArKHRbN10gKyB0WzhdIHx8ICJvZGQiID09PSB0WzNdKSkgOiB0WzNdICYmIGUuZXJyb3IodFswXSksIHQKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUFNFVURPOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSwgbiA9ICF0WzZdICYmIHRbMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZHQuQ0hJTEQudGVzdCh0WzBdKSA/IG51bGwgOiAodFszXSA/IHRbMl0gPSB0WzRdIHx8IHRbNV0gfHwgIiIgOiBuICYmIHB0LnRlc3QobikgJiYgKGUgPSBFKG4sICEwKSkgJiYgKGUgPSBuLmluZGV4T2YoIikiLCBuLmxlbmd0aCAtIGUpIC0gbi5sZW5ndGgpICYmICh0WzBdID0gdFswXS5zbGljZSgwLCBlKSwgdFsyXSA9IG4uc2xpY2UoMCwgZSkpLCB0LnNsaWNlKDAsIDMpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBmaWx0ZXI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgVEFHOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQucmVwbGFjZSh3dCwgX3QpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIioiID09PSB0ID8gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0Lm5vZGVOYW1lICYmIHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBDTEFTUzogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBVW3QgKyAiICJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcgUmVnRXhwKCIoXnwiICsgbnQgKyAiKSIgKyB0ICsgIigiICsgbnQgKyAifCQpIikpICYmIFUodCwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnRlc3QoInN0cmluZyIgPT0gdHlwZW9mIHQuY2xhc3NOYW1lICYmIHQuY2xhc3NOYW1lIHx8ICJ1bmRlZmluZWQiICE9IHR5cGVvZiB0LmdldEF0dHJpYnV0ZSAmJiB0LmdldEF0dHJpYnV0ZSgiY2xhc3MiKSB8fCAiIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIEFUVFI6IGZ1bmN0aW9uKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBlLmF0dHIoaSwgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gbyA/ICIhPSIgPT09IG4gOiBuID8gKG8gKz0gIiIsICI9IiA9PT0gbiA/IG8gPT09IHIgOiAiIT0iID09PSBuID8gbyAhPT0gciA6ICJePSIgPT09IG4gPyByICYmIDAgPT09IG8uaW5kZXhPZihyKSA6ICIqPSIgPT09IG4gPyByICYmIG8uaW5kZXhPZihyKSA+IC0xIDogIiQ9IiA9PT0gbiA/IHIgJiYgby5zbGljZSgtci5sZW5ndGgpID09PSByIDogIn49IiA9PT0gbiA/ICgiICIgKyBvLnJlcGxhY2Uoc3QsICIgIikgKyAiICIpLmluZGV4T2YocikgPiAtMSA6ICJ8PSIgPT09IG4gPyBvID09PSByIHx8IG8uc2xpY2UoMCwgci5sZW5ndGggKyAxKSA9PT0gciArICItIiA6ICExKSA6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIENISUxEOiBmdW5jdGlvbih0LCBlLCBuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9ICJudGgiICE9PSB0LnNsaWNlKDAsIDMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAibGFzdCIgIT09IHQuc2xpY2UoLTQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAib2YtdHlwZSIgPT09IGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSA9PT0gciAmJiAwID09PSBpID8gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhIXQucGFyZW50Tm9kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IGZ1bmN0aW9uKGUsIG4sIHUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYywgbCwgZiwgcCwgaCwgZCwgZyA9IG8gIT09IGEgPyAibmV4dFNpYmxpbmciIDogInByZXZpb3VzU2libGluZyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBlLnBhcmVudE5vZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBzICYmIGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9ICF1ICYmICFzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgZzspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGYgPSBlOyBmID0gZltnXTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzID8gZi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSB5IDogMSA9PT0gZi5ub2RlVHlwZSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBnID0gIm9ubHkiID09PSB0ICYmICFkICYmICJuZXh0U2libGluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkID0gW2EgPyB2LmZpcnN0Q2hpbGQgOiB2Lmxhc3RDaGlsZF0sIGEgJiYgbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsID0gdltIXSB8fCAodltIXSA9IHt9KSwgYyA9IGxbdF0gfHwgW10sIGggPSBjWzBdID09PSBGICYmIGNbMV0sIHAgPSBjWzBdID09PSBGICYmIGNbMl0sIGYgPSBoICYmIHYuY2hpbGROb2Rlc1toXTsgZiA9ICsraCAmJiBmICYmIGZbZ10gfHwgKHAgPSBoID0gMCkgfHwgZC5wb3AoKTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IGYubm9kZVR5cGUgJiYgKytwICYmIGYgPT09IGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFt0XSA9IFtGLCBoLCBwXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobSAmJiAoYyA9IChlW0hdIHx8IChlW0hdID0ge30pKVt0XSkgJiYgY1swXSA9PT0gRikgcCA9IGNbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmID0gKytoICYmIGYgJiYgZltnXSB8fCAocCA9IGggPSAwKSB8fCBkLnBvcCgpKSAmJiAoKHMgPyBmLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IHkgOiAxICE9PSBmLm5vZGVUeXBlKSB8fCAhKytwIHx8IChtICYmICgoZltIXSB8fCAoZltIXSA9IHt9KSlbdF0gPSBbRiwgcF0pLCBmICE9PSBlKSk7KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHAgLT0gaSwgcCA9PT0gciB8fCBwICUgciA9PT0gMCAmJiBwIC8gciA+PSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBQU0VVRE86IGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpLCBvID0gXy5wc2V1ZG9zW3RdIHx8IF8uc2V0RmlsdGVyc1t0LnRvTG93ZXJDYXNlKCldIHx8IGUuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIiArIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9bSF0gPyBvKG4pIDogby5sZW5ndGggPiAxID8gKGkgPSBbdCwgdCwgIiIsIG5dLCBfLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkodC50b0xvd2VyQ2FzZSgpKSA/IHIoZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIsIGkgPSBvKHQsIG4pLCBhID0gaS5sZW5ndGg7IGEtLTspIHIgPSB0dCh0LCBpW2FdKSwgdFtyXSA9ICEoZVtyXSA9IGlbYV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyh0LCAwLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBvCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHBzZXVkb3M6IHsKICAgICAgICAgICAgICAgICAgICAgICAgbm90OiByKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBqKHQucmVwbGFjZSh1dCwgIiQxIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlbSF0gPyByKGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBvLCBhID0gaSh0LCBudWxsLCByLCBbXSksIHMgPSB0Lmxlbmd0aDsgcy0tOykobyA9IGFbc10pICYmICh0W3NdID0gIShlW3NdID0gbykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IGZ1bmN0aW9uKHQsIHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVswXSA9IHQsIGkoZSwgbnVsbCwgbywgbiksIGVbMF0gPSBudWxsLCAhbi5wb3AoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgaGFzOiByKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUodCwgbikubGVuZ3RoID4gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbnM6IHIoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSB0LnJlcGxhY2Uod3QsIF90KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZS50ZXh0Q29udGVudCB8fCBlLmlubmVyVGV4dCB8fCBrKGUpKS5pbmRleE9mKHQpID4gLTEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBsYW5nOiByKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBodC50ZXN0KHQgfHwgIiIpIHx8IGUuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIgKyB0KSwgdCA9IHQucmVwbGFjZSh3dCwgX3QpLnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gTCA/IGUubGFuZyA6IGUuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpIHx8IGUuZ2V0QXR0cmlidXRlKCJsYW5nIikpIHJldHVybiBuID0gbi50b0xvd2VyQ2FzZSgpLCBuID09PSB0IHx8IDAgPT09IG4uaW5kZXhPZih0ICsgIi0iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChlID0gZS5wYXJlbnROb2RlKSAmJiAxID09PSBlLm5vZGVUeXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQubG9jYXRpb24gJiYgdC5sb2NhdGlvbi5oYXNoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gJiYgbi5zbGljZSgxKSA9PT0gZS5pZAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICByb290OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gTwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBmb2N1czogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IEkuYWN0aXZlRWxlbWVudCAmJiAoIUkuaGFzRm9jdXMgfHwgSS5oYXNGb2N1cygpKSAmJiAhISh0LnR5cGUgfHwgdC5ocmVmIHx8IH50LnRhYkluZGV4KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5kaXNhYmxlZCA9PT0gITEKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmRpc2FibGVkID09PSAhMAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiaW5wdXQiID09PSBlICYmICEhdC5jaGVja2VkIHx8ICJvcHRpb24iID09PSBlICYmICEhdC5zZWxlY3RlZAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQucGFyZW50Tm9kZSAmJiB0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCwgdC5zZWxlY3RlZCA9PT0gITAKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHk6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodCA9IHQuZmlyc3RDaGlsZDsgdDsgdCA9IHQubmV4dFNpYmxpbmcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQubm9kZVR5cGUgPCA2KSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITAKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIV8ucHNldWRvcy5lbXB0eSh0KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2dC50ZXN0KHQubm9kZU5hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ3QudGVzdCh0Lm5vZGVOYW1lKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBidXR0b246IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJpbnB1dCIgPT09IGUgJiYgImJ1dHRvbiIgPT09IHQudHlwZSB8fCAiYnV0dG9uIiA9PT0gZQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiaW5wdXQiID09PSB0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgJiYgInRleHQiID09PSB0LnR5cGUgJiYgKG51bGwgPT0gKGUgPSB0LmdldEF0dHJpYnV0ZSgidHlwZSIpKSB8fCAidGV4dCIgPT09IGUudG9Mb3dlckNhc2UoKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3Q6IGMoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBsYXN0OiBjKGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZSAtIDFdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBlcTogYyhmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzAgPiBuID8gbiArIGUgOiBuXQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbjogYyhmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMDsgZSA+IG47IG4gKz0gMikgdC5wdXNoKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIG9kZDogYyhmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMTsgZSA+IG47IG4gKz0gMikgdC5wdXNoKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGx0OiBjKGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAwID4gbiA/IG4gKyBlIDogbjsgLS1yID49IDA7KSB0LnB1c2gocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgZ3Q6IGMoZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDAgPiBuID8gbiArIGUgOiBuOyArK3IgPCBlOykgdC5wdXNoKHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBfLnBzZXVkb3MubnRoID0gXy5wc2V1ZG9zLmVxOwogICAgICAgICAgICAgICAgZm9yICh4IGluIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmFkaW86ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBjaGVja2JveDogITAsCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogITAsCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiAhMAogICAgICAgICAgICAgICAgICAgIH0pIF8ucHNldWRvc1t4XSA9IHMoeCk7CiAgICAgICAgICAgICAgICBmb3IgKHggaW4gewogICAgICAgICAgICAgICAgICAgICAgICBzdWJtaXQ6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICByZXNldDogITAKICAgICAgICAgICAgICAgICAgICB9KSBfLnBzZXVkb3NbeF0gPSB1KHgpOwogICAgICAgICAgICAgICAgcmV0dXJuIGYucHJvdG90eXBlID0gXy5maWx0ZXJzID0gXy5wc2V1ZG9zLCBfLnNldEZpbHRlcnMgPSBuZXcgZiwgRSA9IGUudG9rZW5pemUgPSBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIsIGksIG8sIGEsIHMsIHUsIGMsIGwgPSBXW3QgKyAiICJdOwogICAgICAgICAgICAgICAgICAgIGlmIChsKSByZXR1cm4gbiA/IDAgOiBsLnNsaWNlKDApOwogICAgICAgICAgICAgICAgICAgIGZvciAocyA9IHQsIHUgPSBbXSwgYyA9IF8ucHJlRmlsdGVyOyBzOykgewogICAgICAgICAgICAgICAgICAgICAgICAoIXIgfHwgKGkgPSBjdC5leGVjKHMpKSkgJiYgKGkgJiYgKHMgPSBzLnNsaWNlKGlbMF0ubGVuZ3RoKSB8fCBzKSwgdS5wdXNoKG8gPSBbXSkpLCByID0gITEsIChpID0gbHQuZXhlYyhzKSkgJiYgKHIgPSBpLnNoaWZ0KCksIG8ucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGlbMF0ucmVwbGFjZSh1dCwgIiAiKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgcyA9IHMuc2xpY2Uoci5sZW5ndGgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChhIGluIF8uZmlsdGVyKSAhKGkgPSBkdFthXS5leGVjKHMpKSB8fCBjW2FdICYmICEoaSA9IGNbYV0oaSkpIHx8IChyID0gaS5zaGlmdCgpLCBvLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlczogaQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgcyA9IHMuc2xpY2Uoci5sZW5ndGgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyKSBicmVhawogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA/IHMubGVuZ3RoIDogcyA/IGUuZXJyb3IodCkgOiBXKHQsIHUpLnNsaWNlKDApCiAgICAgICAgICAgICAgICB9LCBqID0gZS5jb21waWxlID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuLCByID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHpbdCArICIgIl07CiAgICAgICAgICAgICAgICAgICAgaWYgKCFvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZSB8fCAoZSA9IEUodCkpLCBuID0gZS5sZW5ndGg7IG4tLTspIG8gPSBtKGVbbl0pLCBvW0hdID8gci5wdXNoKG8pIDogaS5wdXNoKG8pOwogICAgICAgICAgICAgICAgICAgICAgICBvID0geih0LCBiKGksIHIpKSwgby5zZWxlY3RvciA9IHQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgICAgIH0sIEMgPSBlLnNlbGVjdCA9IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSwgbywgYSwgcywgdSwgYyA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHQgJiYgdCwKICAgICAgICAgICAgICAgICAgICAgICAgZiA9ICFyICYmIEUodCA9IGMuc2VsZWN0b3IgfHwgdCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG4gPSBuIHx8IFtdLCAxID09PSBmLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9IGZbMF0gPSBmWzBdLnNsaWNlKDApLCBvLmxlbmd0aCA+IDIgJiYgIklEIiA9PT0gKGEgPSBvWzBdKS50eXBlICYmIHcuZ2V0QnlJZCAmJiA5ID09PSBlLm5vZGVUeXBlICYmIEwgJiYgXy5yZWxhdGl2ZVtvWzFdLnR5cGVdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9IChfLmZpbmQuSUQoYS5tYXRjaGVzWzBdLnJlcGxhY2Uod3QsIF90KSwgZSkgfHwgW10pWzBdLCAhZSkgcmV0dXJuIG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjICYmIChlID0gZS5wYXJlbnROb2RlKSwgdCA9IHQuc2xpY2Uoby5zaGlmdCgpLnZhbHVlLmxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBkdC5uZWVkc0NvbnRleHQudGVzdCh0KSA/IDAgOiBvLmxlbmd0aDsgaS0tICYmIChhID0gb1tpXSwgIV8ucmVsYXRpdmVbcyA9IGEudHlwZV0pOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodSA9IF8uZmluZFtzXSkgJiYgKHIgPSB1KGEubWF0Y2hlc1swXS5yZXBsYWNlKHd0LCBfdCksIGJ0LnRlc3Qob1swXS50eXBlKSAmJiBsKGUucGFyZW50Tm9kZSkgfHwgZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uc3BsaWNlKGksIDEpLCB0ID0gci5sZW5ndGggJiYgcChvKSwgIXQpIHJldHVybiBLLmFwcGx5KG4sIHIpLCBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiAoYyB8fCBqKHQsIGYpKShyLCBlLCAhTCwgbiwgYnQudGVzdCh0KSAmJiBsKGUucGFyZW50Tm9kZSkgfHwgZSksIG4KICAgICAgICAgICAgICAgIH0sIHcuc29ydFN0YWJsZSA9IEguc3BsaXQoIiIpLnNvcnQoVikuam9pbigiIikgPT09IEgsIHcuZGV0ZWN0RHVwbGljYXRlcyA9ICEhTiwgUigpLCB3LnNvcnREZXRhY2hlZCA9IGkoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAxICYgdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihJLmNyZWF0ZUVsZW1lbnQoImRpdiIpKQogICAgICAgICAgICAgICAgfSksIGkoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmlubmVySFRNTCA9ICI8YSBocmVmPScjJz48L2E+IiwgIiMiID09PSB0LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIikKICAgICAgICAgICAgICAgIH0pIHx8IG8oInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLCBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPyB2b2lkIDAgOiB0LmdldEF0dHJpYnV0ZShlLCAidHlwZSIgPT09IGUudG9Mb3dlckNhc2UoKSA/IDEgOiAyKQogICAgICAgICAgICAgICAgfSksIHcuYXR0cmlidXRlcyAmJiBpKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pbm5lckhUTUwgPSAiPGlucHV0Lz4iLCB0LmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsICIiKSwgIiIgPT09IHQuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIikKICAgICAgICAgICAgICAgIH0pIHx8IG8oInZhbHVlIiwgZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuIHx8ICJpbnB1dCIgIT09IHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA/IHZvaWQgMCA6IHQuZGVmYXVsdFZhbHVlCiAgICAgICAgICAgICAgICB9KSwgaShmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdC5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikKICAgICAgICAgICAgICAgIH0pIHx8IG8oZXQsIGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA/IHZvaWQgMCA6IHRbZV0gPT09ICEwID8gZS50b0xvd2VyQ2FzZSgpIDogKHIgPSB0LmdldEF0dHJpYnV0ZU5vZGUoZSkpICYmIHIuc3BlY2lmaWVkID8gci52YWx1ZSA6IG51bGwKICAgICAgICAgICAgICAgIH0pLCBlCiAgICAgICAgICAgIH0odCk7CiAgICAgICAgICAgIFouZmluZCA9IGl0LCBaLmV4cHIgPSBpdC5zZWxlY3RvcnMsIFouZXhwclsiOiJdID0gWi5leHByLnBzZXVkb3MsIFoudW5pcXVlID0gaXQudW5pcXVlU29ydCwgWi50ZXh0ID0gaXQuZ2V0VGV4dCwgWi5pc1hNTERvYyA9IGl0LmlzWE1MLCBaLmNvbnRhaW5zID0gaXQuY29udGFpbnM7CiAgICAgICAgICAgIHZhciBvdCA9IFouZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsCiAgICAgICAgICAgICAgICBhdCA9IC9ePChcdyspXHMqXC8/Pig/OjxcL1wxPnwpJC8sCiAgICAgICAgICAgICAgICBzdCA9IC9eLlteOiNcW1wuLF0qJC87CiAgICAgICAgICAgIFouZmlsdGVyID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHIgPSBlWzBdOwogICAgICAgICAgICAgICAgcmV0dXJuIG4gJiYgKHQgPSAiOm5vdCgiICsgdCArICIpIiksIDEgPT09IGUubGVuZ3RoICYmIDEgPT09IHIubm9kZVR5cGUgPyBaLmZpbmQubWF0Y2hlc1NlbGVjdG9yKHIsIHQpID8gW3JdIDogW10gOiBaLmZpbmQubWF0Y2hlcyh0LCBaLmdyZXAoZSwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAxID09PSB0Lm5vZGVUeXBlCiAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgfSwgWi5mbi5leHRlbmQoewogICAgICAgICAgICAgICAgZmluZDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlLCBuID0gdGhpcy5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJzdHJpbmciICE9IHR5cGVvZiB0KSByZXR1cm4gdGhpcy5wdXNoU3RhY2soWih0KS5maWx0ZXIoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZSA9IDA7IG4gPiBlOyBlKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoWi5jb250YWlucyhpW2VdLCB0aGlzKSkgcmV0dXJuICEwCiAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIGZvciAoZSA9IDA7IG4gPiBlOyBlKyspIFouZmluZCh0LCBpW2VdLCByKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciA9IHRoaXMucHVzaFN0YWNrKG4gPiAxID8gWi51bmlxdWUocikgOiByKSwgci5zZWxlY3RvciA9IHRoaXMuc2VsZWN0b3IgPyB0aGlzLnNlbGVjdG9yICsgIiAiICsgdCA6IHQsIHIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmaWx0ZXI6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoU3RhY2socih0aGlzLCB0IHx8IFtdLCAhMSkpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbm90OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKHIodGhpcywgdCB8fCBbXSwgITApKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGlzOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhcih0aGlzLCAic3RyaW5nIiA9PSB0eXBlb2YgdCAmJiBvdC50ZXN0KHQpID8gWih0KSA6IHQgfHwgW10sICExKS5sZW5ndGgKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciB1dCwgY3QgPSAvXig/OlxzKig8W1x3XFddKz4pW14+XSp8IyhbXHctXSopKSQvLAogICAgICAgICAgICAgICAgbHQgPSBaLmZuLmluaXQgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHI7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0KSByZXR1cm4gdGhpczsKICAgICAgICAgICAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPSAiPCIgPT09IHRbMF0gJiYgIj4iID09PSB0W3QubGVuZ3RoIC0gMV0gJiYgdC5sZW5ndGggPj0gMyA/IFtudWxsLCB0LCBudWxsXSA6IGN0LmV4ZWModCksICFuIHx8ICFuWzFdICYmIGUpIHJldHVybiAhZSB8fCBlLmpxdWVyeSA/IChlIHx8IHV0KS5maW5kKHQpIDogdGhpcy5jb25zdHJ1Y3RvcihlKS5maW5kKHQpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoblsxXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPSBlIGluc3RhbmNlb2YgWiA/IGVbMF0gOiBlLCBaLm1lcmdlKHRoaXMsIFoucGFyc2VIVE1MKG5bMV0sIGUgJiYgZS5ub2RlVHlwZSA/IGUub3duZXJEb2N1bWVudCB8fCBlIDogUSwgITApKSwgYXQudGVzdChuWzFdKSAmJiBaLmlzUGxhaW5PYmplY3QoZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChuIGluIGUpIFouaXNGdW5jdGlvbih0aGlzW25dKSA/IHRoaXNbbl0oZVtuXSkgOiB0aGlzLmF0dHIobiwgZVtuXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID0gUS5nZXRFbGVtZW50QnlJZChuWzJdKSwgciAmJiByLnBhcmVudE5vZGUgJiYgKHRoaXMubGVuZ3RoID0gMSwgdGhpc1swXSA9IHIpLCB0aGlzLmNvbnRleHQgPSBRLCB0aGlzLnNlbGVjdG9yID0gdCwgdGhpcwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5ub2RlVHlwZSA/ICh0aGlzLmNvbnRleHQgPSB0aGlzWzBdID0gdCwgdGhpcy5sZW5ndGggPSAxLCB0aGlzKSA6IFouaXNGdW5jdGlvbih0KSA/ICJ1bmRlZmluZWQiICE9IHR5cGVvZiB1dC5yZWFkeSA/IHV0LnJlYWR5KHQpIDogdChaKSA6ICh2b2lkIDAgIT09IHQuc2VsZWN0b3IgJiYgKHRoaXMuc2VsZWN0b3IgPSB0LnNlbGVjdG9yLCB0aGlzLmNvbnRleHQgPSB0LmNvbnRleHQpLCBaLm1ha2VBcnJheSh0LCB0aGlzKSkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIGx0LnByb3RvdHlwZSA9IFouZm4sIHV0ID0gWihRKTsKICAgICAgICAgICAgdmFyIGZ0ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sCiAgICAgICAgICAgICAgICBwdCA9IHsKICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogITAsCiAgICAgICAgICAgICAgICAgICAgY29udGVudHM6ICEwLAogICAgICAgICAgICAgICAgICAgIG5leHQ6ICEwLAogICAgICAgICAgICAgICAgICAgIHByZXY6ICEwCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICBaLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBkaXI6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gW10sIGkgPSB2b2lkIDAgIT09IG47CiAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gdFtlXSkgJiYgOSAhPT0gdC5ub2RlVHlwZTspCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxID09PSB0Lm5vZGVUeXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAmJiBaKHQpLmlzKG4pKSBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIucHVzaCh0KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzaWJsaW5nOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IFtdOyB0OyB0ID0gdC5uZXh0U2libGluZykgMSA9PT0gdC5ub2RlVHlwZSAmJiB0ICE9PSBlICYmIG4ucHVzaCh0KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5mbi5leHRlbmQoewogICAgICAgICAgICAgICAgaGFzOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBaKHQsIHRoaXMpLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMDsgbiA+IHQ7IHQrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChaLmNvbnRhaW5zKHRoaXMsIGVbdF0pKSByZXR1cm4gITAKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNsb3Nlc3Q6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuLCByID0gMCwgaSA9IHRoaXMubGVuZ3RoLCBvID0gW10sIGEgPSBvdC50ZXN0KHQpIHx8ICJzdHJpbmciICE9IHR5cGVvZiB0ID8gWih0LCBlIHx8IHRoaXMuY29udGV4dCkgOiAwOyBpID4gcjsgcisrKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG4gPSB0aGlzW3JdOyBuICYmIG4gIT09IGU7IG4gPSBuLnBhcmVudE5vZGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5ub2RlVHlwZSA8IDExICYmIChhID8gYS5pbmRleChuKSA+IC0xIDogMSA9PT0gbi5ub2RlVHlwZSAmJiBaLmZpbmQubWF0Y2hlc1NlbGVjdG9yKG4sIHQpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2hTdGFjayhvLmxlbmd0aCA+IDEgPyBaLnVuaXF1ZShvKSA6IG8pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5kZXg6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA/ICJzdHJpbmciID09IHR5cGVvZiB0ID8gVi5jYWxsKFoodCksIHRoaXNbMF0pIDogVi5jYWxsKHRoaXMsIHQuanF1ZXJ5ID8gdFswXSA6IHQpIDogdGhpc1swXSAmJiB0aGlzWzBdLnBhcmVudE5vZGUgPyB0aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aCA6IC0xCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYWRkOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKFoudW5pcXVlKFoubWVyZ2UodGhpcy5nZXQoKSwgWih0LCBlKSkpKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFkZEJhY2s6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGQobnVsbCA9PSB0ID8gdGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlcih0KSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZWFjaCh7CiAgICAgICAgICAgICAgICBwYXJlbnQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSAmJiAxMSAhPT0gZS5ub2RlVHlwZSA/IGUgOiBudWxsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFyZW50czogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBaLmRpcih0LCAicGFyZW50Tm9kZSIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFyZW50c1VudGlsOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouZGlyKHQsICJwYXJlbnROb2RlIiwgbikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBuZXh0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkodCwgIm5leHRTaWJsaW5nIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwcmV2OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkodCwgInByZXZpb3VzU2libGluZyIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbmV4dEFsbDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBaLmRpcih0LCAibmV4dFNpYmxpbmciKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHByZXZBbGw6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWi5kaXIodCwgInByZXZpb3VzU2libGluZyIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbmV4dFVudGlsOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouZGlyKHQsICJuZXh0U2libGluZyIsIG4pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcHJldlVudGlsOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouZGlyKHQsICJwcmV2aW91c1NpYmxpbmciLCBuKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNpYmxpbmdzOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouc2libGluZygodC5wYXJlbnROb2RlIHx8IHt9KS5maXJzdENoaWxkLCB0KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouc2libGluZyh0LmZpcnN0Q2hpbGQpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY29udGVudHM6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5jb250ZW50RG9jdW1lbnQgfHwgWi5tZXJnZShbXSwgdC5jaGlsZE5vZGVzKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICBaLmZuW3RdID0gZnVuY3Rpb24obiwgcikgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gWi5tYXAodGhpcywgZSwgbik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJVbnRpbCIgIT09IHQuc2xpY2UoLTUpICYmIChyID0gbiksIHIgJiYgInN0cmluZyIgPT0gdHlwZW9mIHIgJiYgKGkgPSBaLmZpbHRlcihyLCBpKSksIHRoaXMubGVuZ3RoID4gMSAmJiAocHRbdF0gfHwgWi51bmlxdWUoaSksIGZ0LnRlc3QodCkgJiYgaS5yZXZlcnNlKCkpLCB0aGlzLnB1c2hTdGFjayhpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIGh0ID0gL1xTKy9nLAogICAgICAgICAgICAgICAgZHQgPSB7fTsKICAgICAgICAgICAgWi5DYWxsYmFja3MgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB0ID0gInN0cmluZyIgPT0gdHlwZW9mIHQgPyBkdFt0XSB8fCBvKHQpIDogWi5leHRlbmQoe30sIHQpOwogICAgICAgICAgICAgICAgdmFyIGUsIG4sIHIsIGksIGEsIHMsIHUgPSBbXSwKICAgICAgICAgICAgICAgICAgICBjID0gIXQub25jZSAmJiBbXSwKICAgICAgICAgICAgICAgICAgICBsID0gZnVuY3Rpb24obykgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSB0Lm1lbW9yeSAmJiBvLCBuID0gITAsIHMgPSBpIHx8IDAsIGkgPSAwLCBhID0gdS5sZW5ndGgsIHIgPSAhMDsgdSAmJiBhID4gczsgcysrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVbc10uYXBwbHkob1swXSwgb1sxXSkgPT09ICExICYmIHQuc3RvcE9uRmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgciA9ICExLCB1ICYmIChjID8gYy5sZW5ndGggJiYgbChjLnNoaWZ0KCkpIDogZSA/IHUgPSBbXSA6IGYuZGlzYWJsZSgpKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgYWRkOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB1Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIGZ1bmN0aW9uIG8oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBaLmVhY2goZSwgZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBaLnR5cGUobik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09PSByID8gdC51bmlxdWUgJiYgZi5oYXMobikgfHwgdS5wdXNoKG4pIDogbiAmJiBuLmxlbmd0aCAmJiAic3RyaW5nIiAhPT0gciAmJiBvKG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShhcmd1bWVudHMpLCByID8gYSA9IHUubGVuZ3RoIDogZSAmJiAoaSA9IG4sIGwoZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUgJiYgWi5lYWNoKGFyZ3VtZW50cywgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuID0gWi5pbkFycmF5KGUsIHUsIG4pKSA+IC0xOykgdS5zcGxpY2UobiwgMSksIHIgJiYgKGEgPj0gbiAmJiBhLS0sIHMgPj0gbiAmJiBzLS0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdGhpcwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBoYXM6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID8gWi5pbkFycmF5KHQsIHUpID4gLTEgOiAhKCF1IHx8ICF1Lmxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHk6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUgPSBbXSwgYSA9IDAsIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSA9IGMgPSBlID0gdm9pZCAwLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhdQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBsb2NrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjID0gdm9pZCAwLCBlIHx8IGYuZGlzYWJsZSgpLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2tlZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWMKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZVdpdGg6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhdSB8fCBuICYmICFjIHx8IChlID0gZSB8fCBbXSwgZSA9IFt0LCBlLnNsaWNlID8gZS5zbGljZSgpIDogZV0sIHIgPyBjLnB1c2goZSkgOiBsKGUpKSwgdGhpcwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBmaXJlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmLmZpcmVXaXRoKHRoaXMsIGFyZ3VtZW50cyksIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhbgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiBmCiAgICAgICAgICAgIH0sIFouZXh0ZW5kKHsKICAgICAgICAgICAgICAgIERlZmVycmVkOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbInJlc29sdmUiLCAiZG9uZSIsIFouQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCAicmVzb2x2ZWQiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsicmVqZWN0IiwgImZhaWwiLCBaLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwgInJlamVjdGVkIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIm5vdGlmeSIsICJwcm9ncmVzcyIsIFouQ2FsbGJhY2tzKCJtZW1vcnkiKV0KICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgbiA9ICJwZW5kaW5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsd2F5czogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSwgdGhpcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW46IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gYXJndW1lbnRzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBaLkRlZmVycmVkKGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWi5lYWNoKGUsIGZ1bmN0aW9uKGUsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gWi5pc0Z1bmN0aW9uKHRbZV0pICYmIHRbZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpW29bMV1dKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gYSAmJiBhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJiBaLmlzRnVuY3Rpb24odC5wcm9taXNlKSA/IHQucHJvbWlzZSgpLmRvbmUobi5yZXNvbHZlKS5mYWlsKG4ucmVqZWN0KS5wcm9ncmVzcyhuLm5vdGlmeSkgOiBuW29bMF0gKyAiV2l0aCJdKHRoaXMgPT09IHIgPyBuLnByb21pc2UoKSA6IHRoaXMsIGEgPyBbdF0gOiBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdCA9IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5wcm9taXNlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdCA/IFouZXh0ZW5kKHQsIHIpIDogcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBpID0ge307CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIucGlwZSA9IHIudGhlbiwgWi5lYWNoKGUsIGZ1bmN0aW9uKHQsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBvWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IG9bM107CiAgICAgICAgICAgICAgICAgICAgICAgIHJbb1sxXV0gPSBhLmFkZCwgcyAmJiBhLmFkZChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBzCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGVbMSBeIHRdWzJdLmRpc2FibGUsIGVbMl1bMl0ubG9jayksIGlbb1swXV0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpW29bMF0gKyAiV2l0aCJdKHRoaXMgPT09IGkgPyByIDogdGhpcywgYXJndW1lbnRzKSwgdGhpcwogICAgICAgICAgICAgICAgICAgICAgICB9LCBpW29bMF0gKyAiV2l0aCJdID0gYS5maXJlV2l0aAogICAgICAgICAgICAgICAgICAgIH0pLCByLnByb21pc2UoaSksIHQgJiYgdC5jYWxsKGksIGkpLCBpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgd2hlbjogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlLCBuLCByLCBpID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFUuY2FsbChhcmd1bWVudHMpLAogICAgICAgICAgICAgICAgICAgICAgICBhID0gby5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAxICE9PSBhIHx8IHQgJiYgWi5pc0Z1bmN0aW9uKHQucHJvbWlzZSkgPyBhIDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgdSA9IDEgPT09IHMgPyB0IDogWi5EZWZlcnJlZCgpLAogICAgICAgICAgICAgICAgICAgICAgICBjID0gZnVuY3Rpb24odCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuW3RdID0gdGhpcywgclt0XSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gVS5jYWxsKGFyZ3VtZW50cykgOiBpLCByID09PSBlID8gdS5ub3RpZnlXaXRoKG4sIHIpIDogLS1zIHx8IHUucmVzb2x2ZVdpdGgobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpZiAoYSA+IDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZSA9IG5ldyBBcnJheShhKSwgbiA9IG5ldyBBcnJheShhKSwgciA9IG5ldyBBcnJheShhKTsgYSA+IGk7IGkrKykgb1tpXSAmJiBaLmlzRnVuY3Rpb24ob1tpXS5wcm9taXNlKSA/IG9baV0ucHJvbWlzZSgpLmRvbmUoYyhpLCByLCBvKSkuZmFpbCh1LnJlamVjdCkucHJvZ3Jlc3MoYyhpLCBuLCBlKSkgOiAtLXM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMgfHwgdS5yZXNvbHZlV2l0aChyLCBvKSwgdS5wcm9taXNlKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBndDsKICAgICAgICAgICAgWi5mbi5yZWFkeSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBaLnJlYWR5LnByb21pc2UoKS5kb25lKHQpLCB0aGlzCiAgICAgICAgICAgIH0sIFouZXh0ZW5kKHsKICAgICAgICAgICAgICAgIGlzUmVhZHk6ICExLAogICAgICAgICAgICAgICAgcmVhZHlXYWl0OiAxLAogICAgICAgICAgICAgICAgaG9sZFJlYWR5OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdCA/IFoucmVhZHlXYWl0KysgOiBaLnJlYWR5KCEwKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlYWR5OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgKHQgPT09ICEwID8gLS1aLnJlYWR5V2FpdCA6IFouaXNSZWFkeSkgfHwgKFouaXNSZWFkeSA9ICEwLCB0ICE9PSAhMCAmJiAtLVoucmVhZHlXYWl0ID4gMCB8fCAoZ3QucmVzb2x2ZVdpdGgoUSwgW1pdKSwgWi5mbi50cmlnZ2VySGFuZGxlciAmJiAoWihRKS50cmlnZ2VySGFuZGxlcigicmVhZHkiKSwgWihRKS5vZmYoInJlYWR5IikpKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFoucmVhZHkucHJvbWlzZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBndCB8fCAoZ3QgPSBaLkRlZmVycmVkKCksICJjb21wbGV0ZSIgPT09IFEucmVhZHlTdGF0ZSA/IHNldFRpbWVvdXQoWi5yZWFkeSkgOiAoUS5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgYSwgITEpLCB0LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCBhLCAhMSkpKSwgZ3QucHJvbWlzZShlKQogICAgICAgICAgICB9LCBaLnJlYWR5LnByb21pc2UoKTsKICAgICAgICAgICAgdmFyIHZ0ID0gWi5hY2Nlc3MgPSBmdW5jdGlvbih0LCBlLCBuLCByLCBpLCBvLCBhKSB7CiAgICAgICAgICAgICAgICB2YXIgcyA9IDAsCiAgICAgICAgICAgICAgICAgICAgdSA9IHQubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgIGMgPSBudWxsID09IG47CiAgICAgICAgICAgICAgICBpZiAoIm9iamVjdCIgPT09IFoudHlwZShuKSkgewogICAgICAgICAgICAgICAgICAgIGkgPSAhMDsKICAgICAgICAgICAgICAgICAgICBmb3IgKHMgaW4gbikgWi5hY2Nlc3ModCwgZSwgcywgbltzXSwgITAsIG8sIGEpCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZvaWQgMCAhPT0gciAmJiAoaSA9ICEwLCBaLmlzRnVuY3Rpb24ocikgfHwgKGEgPSAhMCksIGMgJiYgKGEgPyAoZS5jYWxsKHQsIHIpLCBlID0gbnVsbCkgOiAoYyA9IGUsIGUgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjLmNhbGwoWih0KSwgbikKICAgICAgICAgICAgICAgICAgICB9KSksIGUpKQogICAgICAgICAgICAgICAgICAgIGZvciAoOyB1ID4gczsgcysrKSBlKHRbc10sIG4sIGEgPyByIDogci5jYWxsKHRbc10sIHMsIGUodFtzXSwgbikpKTsKICAgICAgICAgICAgICAgIHJldHVybiBpID8gdCA6IGMgPyBlLmNhbGwodCkgOiB1ID8gZSh0WzBdLCBuKSA6IG8KICAgICAgICAgICAgfTsKICAgICAgICAgICAgWi5hY2NlcHREYXRhID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIDEgPT09IHQubm9kZVR5cGUgfHwgOSA9PT0gdC5ub2RlVHlwZSB8fCAhK3Qubm9kZVR5cGUKICAgICAgICAgICAgfSwgcy51aWQgPSAxLCBzLmFjY2VwdHMgPSBaLmFjY2VwdERhdGEsIHMucHJvdG90eXBlID0gewogICAgICAgICAgICAgICAga2V5OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFzLmFjY2VwdHModCkpIHJldHVybiAwOwogICAgICAgICAgICAgICAgICAgIHZhciBlID0ge30sCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0W3RoaXMuZXhwYW5kb107CiAgICAgICAgICAgICAgICAgICAgaWYgKCFuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBzLnVpZCsrOwogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZVt0aGlzLmV4cGFuZG9dID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlW3RoaXMuZXhwYW5kb10gPSBuLCBaLmV4dGVuZCh0LCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlW25dIHx8ICh0aGlzLmNhY2hlW25dID0ge30pLCBuCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIsIGkgPSB0aGlzLmtleSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHRoaXMuY2FjaGVbaV07CiAgICAgICAgICAgICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSBvW2VdID0gbjsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChaLmlzRW1wdHlPYmplY3QobykpIFouZXh0ZW5kKHRoaXMuY2FjaGVbaV0sIGUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyIGluIGUpIG9bcl0gPSBlW3JdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLmNhY2hlW3RoaXMua2V5KHQpXTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBlID8gbiA6IG5bZV0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhY2Nlc3M6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBlIHx8IGUgJiYgInN0cmluZyIgPT0gdHlwZW9mIGUgJiYgdm9pZCAwID09PSBuID8gKHIgPSB0aGlzLmdldCh0LCBlKSwgdm9pZCAwICE9PSByID8gciA6IHRoaXMuZ2V0KHQsIFouY2FtZWxDYXNlKGUpKSkgOiAodGhpcy5zZXQodCwgZSwgbiksIHZvaWQgMCAhPT0gbiA/IG4gOiBlKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBpLCBvID0gdGhpcy5rZXkodCksCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLmNhY2hlW29dOwogICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHRoaXMuY2FjaGVbb10gPSB7fTsKICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgWi5pc0FycmF5KGUpID8gciA9IGUuY29uY2F0KGUubWFwKFouY2FtZWxDYXNlKSkgOiAoaSA9IFouY2FtZWxDYXNlKGUpLCBlIGluIGEgPyByID0gW2UsIGldIDogKHIgPSBpLCByID0gciBpbiBhID8gW3JdIDogci5tYXRjaChodCkgfHwgW10pKSwgbiA9IHIubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgbi0tOykgZGVsZXRlIGFbcltuXV0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaGFzRGF0YTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhWi5pc0VtcHR5T2JqZWN0KHRoaXMuY2FjaGVbdFt0aGlzLmV4cGFuZG9dXSB8fCB7fSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkaXNjYXJkOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdFt0aGlzLmV4cGFuZG9dICYmIGRlbGV0ZSB0aGlzLmNhY2hlW3RbdGhpcy5leHBhbmRvXV0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIHl0ID0gbmV3IHMsCiAgICAgICAgICAgICAgICBtdCA9IG5ldyBzLAogICAgICAgICAgICAgICAgYnQgPSAvXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLAogICAgICAgICAgICAgICAgeHQgPSAvKFtBLVpdKS9nOwogICAgICAgICAgICBaLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBoYXNEYXRhOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG10Lmhhc0RhdGEodCkgfHwgeXQuaGFzRGF0YSh0KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRhdGE6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbXQuYWNjZXNzKHQsIGUsIG4pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVtb3ZlRGF0YTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIG10LnJlbW92ZSh0LCBlKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9kYXRhOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHl0LmFjY2Vzcyh0LCBlLCBuKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9yZW1vdmVEYXRhOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgeXQucmVtb3ZlKHQsIGUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmZuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBkYXRhOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIsIGksIG8gPSB0aGlzWzBdLAogICAgICAgICAgICAgICAgICAgICAgICBhID0gbyAmJiBvLmF0dHJpYnV0ZXM7CiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sZW5ndGggJiYgKGkgPSBtdC5nZXQobyksIDEgPT09IG8ubm9kZVR5cGUgJiYgIXl0LmdldChvLCAiaGFzRGF0YUF0dHJzIikpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG4gPSBhLmxlbmd0aDsgbi0tOykgYVtuXSAmJiAociA9IGFbbl0ubmFtZSwgMCA9PT0gci5pbmRleE9mKCJkYXRhLSIpICYmIChyID0gWi5jYW1lbENhc2Uoci5zbGljZSg1KSksIHUobywgciwgaVtyXSkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHl0LnNldChvLCAiaGFzRGF0YUF0dHJzIiwgITApCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJvYmplY3QiID09IHR5cGVvZiB0ID8gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBtdC5zZXQodGhpcywgdCkKICAgICAgICAgICAgICAgICAgICB9KSA6IHZ0KHRoaXMsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIgPSBaLmNhbWVsQ2FzZSh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gJiYgdm9pZCAwID09PSBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IG10LmdldChvLCB0KSwgdm9pZCAwICE9PSBuKSByZXR1cm4gbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gbXQuZ2V0KG8sIHIpLCB2b2lkIDAgIT09IG4pIHJldHVybiBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPSB1KG8sIHIsIHZvaWQgMCksIHZvaWQgMCAhPT0gbikgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHRoaXMuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gbXQuZ2V0KHRoaXMsIHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXQuc2V0KHRoaXMsIHIsIGUpLCAtMSAhPT0gdC5pbmRleE9mKCItIikgJiYgdm9pZCAwICE9PSBuICYmIG10LnNldCh0aGlzLCB0LCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0sIG51bGwsIGUsIGFyZ3VtZW50cy5sZW5ndGggPiAxLCBudWxsLCAhMCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZW1vdmVEYXRhOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbXQucmVtb3ZlKHRoaXMsIHQpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZXh0ZW5kKHsKICAgICAgICAgICAgICAgIHF1ZXVlOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPyAoZSA9IChlIHx8ICJmeCIpICsgInF1ZXVlIiwgciA9IHl0LmdldCh0LCBlKSwgbiAmJiAoIXIgfHwgWi5pc0FycmF5KG4pID8gciA9IHl0LmFjY2Vzcyh0LCBlLCBaLm1ha2VBcnJheShuKSkgOiByLnB1c2gobikpLCByIHx8IFtdKSA6IHZvaWQgMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRlcXVldWU6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBlID0gZSB8fCAiZngiOwogICAgICAgICAgICAgICAgICAgIHZhciBuID0gWi5xdWV1ZSh0LCBlKSwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IG4ubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gbi5zaGlmdCgpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gWi5fcXVldWVIb29rcyh0LCBlKSwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgWi5kZXF1ZXVlKHQsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgImlucHJvZ3Jlc3MiID09PSBpICYmIChpID0gbi5zaGlmdCgpLCByLS0pLCBpICYmICgiZngiID09PSBlICYmIG4udW5zaGlmdCgiaW5wcm9ncmVzcyIpLCBkZWxldGUgby5zdG9wLCBpLmNhbGwodCwgYSwgbykpLCAhciAmJiBvICYmIG8uZW1wdHkuZmlyZSgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgX3F1ZXVlSG9va3M6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGUgKyAicXVldWVIb29rcyI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHl0LmdldCh0LCBuKSB8fCB5dC5hY2Nlc3ModCwgbiwgewogICAgICAgICAgICAgICAgICAgICAgICBlbXB0eTogWi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgeXQucmVtb3ZlKHQsIFtlICsgInF1ZXVlIiwgbl0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZm4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgIHF1ZXVlOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSAyOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAic3RyaW5nIiAhPSB0eXBlb2YgdCAmJiAoZSA9IHQsIHQgPSAiZngiLCBuLS0pLCBhcmd1bWVudHMubGVuZ3RoIDwgbiA/IFoucXVldWUodGhpc1swXSwgdCkgOiB2b2lkIDAgPT09IGUgPyB0aGlzIDogdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IFoucXVldWUodGhpcywgdCwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIFouX3F1ZXVlSG9va3ModGhpcywgdCksICJmeCIgPT09IHQgJiYgImlucHJvZ3Jlc3MiICE9PSBuWzBdICYmIFouZGVxdWV1ZSh0aGlzLCB0KQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZGVxdWV1ZTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFouZGVxdWV1ZSh0aGlzLCB0KQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY2xlYXJRdWV1ZTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlKHQgfHwgImZ4IiwgW10pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcHJvbWlzZTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuLCByID0gMSwKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IFouRGVmZXJyZWQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1yIHx8IGkucmVzb2x2ZVdpdGgobywgW29dKQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGZvciAoInN0cmluZyIgIT0gdHlwZW9mIHQgJiYgKGUgPSB0LCB0ID0gdm9pZCAwKSwgdCA9IHQgfHwgImZ4IjsgYS0tOykgbiA9IHl0LmdldChvW2FdLCB0ICsgInF1ZXVlSG9va3MiKSwgbiAmJiBuLmVtcHR5ICYmIChyKyssIG4uZW1wdHkuYWRkKHMpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcygpLCBpLnByb21pc2UoZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciB3dCA9IC9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLAogICAgICAgICAgICAgICAgX3QgPSBbIlRvcCIsICJSaWdodCIsICJCb3R0b20iLCAiTGVmdCJdLAogICAgICAgICAgICAgICAga3QgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBlIHx8IHQsICJub25lIiA9PT0gWi5jc3ModCwgImRpc3BsYXkiKSB8fCAhWi5jb250YWlucyh0Lm93bmVyRG9jdW1lbnQsIHQpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgVHQgPSAvXig/OmNoZWNrYm94fHJhZGlvKSQvaTsKICAgICAgICAgICAgISBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gUS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksCiAgICAgICAgICAgICAgICAgICAgZSA9IHQuYXBwZW5kQ2hpbGQoUS5jcmVhdGVFbGVtZW50KCJkaXYiKSksCiAgICAgICAgICAgICAgICAgICAgbiA9IFEuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAgICAgICAgICAgIG4uc2V0QXR0cmlidXRlKCJ0eXBlIiwgInJhZGlvIiksIG4uc2V0QXR0cmlidXRlKCJjaGVja2VkIiwgImNoZWNrZWQiKSwgbi5zZXRBdHRyaWJ1dGUoIm5hbWUiLCAidCIpLCBlLmFwcGVuZENoaWxkKG4pLCBZLmNoZWNrQ2xvbmUgPSBlLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCwgZS5pbm5lckhUTUwgPSAiPHRleHRhcmVhPng8L3RleHRhcmVhPiIsIFkubm9DbG9uZUNoZWNrZWQgPSAhIWUuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlCiAgICAgICAgICAgIH0oKTsKICAgICAgICAgICAgdmFyIEV0ID0gInVuZGVmaW5lZCI7CiAgICAgICAgICAgIFkuZm9jdXNpbkJ1YmJsZXMgPSAib25mb2N1c2luIiBpbiB0OwogICAgICAgICAgICB2YXIganQgPSAvXmtleS8sCiAgICAgICAgICAgICAgICBDdCA9IC9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLAogICAgICAgICAgICAgICAgU3QgPSAvXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sCiAgICAgICAgICAgICAgICBBdCA9IC9eKFteLl0qKSg/OlwuKC4rKXwpJC87CiAgICAgICAgICAgIFouZXZlbnQgPSB7CiAgICAgICAgICAgICAgICBnbG9iYWw6IHt9LAogICAgICAgICAgICAgICAgYWRkOiBmdW5jdGlvbih0LCBlLCBuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG8sIGEsIHMsIHUsIGMsIGwsIGYsIHAsIGgsIGQsIGcsIHYgPSB5dC5nZXQodCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHYpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobi5oYW5kbGVyICYmIChvID0gbiwgbiA9IG8uaGFuZGxlciwgaSA9IG8uc2VsZWN0b3IpLCBuLmd1aWQgfHwgKG4uZ3VpZCA9IFouZ3VpZCsrKSwgKHUgPSB2LmV2ZW50cykgfHwgKHUgPSB2LmV2ZW50cyA9IHt9KSwgKGEgPSB2LmhhbmRsZSkgfHwgKGEgPSB2LmhhbmRsZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIFogIT09IEV0ICYmIFouZXZlbnQudHJpZ2dlcmVkICE9PSBlLnR5cGUgPyBaLmV2ZW50LmRpc3BhdGNoLmFwcGx5KHQsIGFyZ3VtZW50cykgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBlID0gKGUgfHwgIiIpLm1hdGNoKGh0KSB8fCBbIiJdLCBjID0gZS5sZW5ndGg7IGMtLTspIHMgPSBBdC5leGVjKGVbY10pIHx8IFtdLCBoID0gZyA9IHNbMV0sIGQgPSAoc1syXSB8fCAiIikuc3BsaXQoIi4iKS5zb3J0KCksIGggJiYgKGYgPSBaLmV2ZW50LnNwZWNpYWxbaF0gfHwge30sIGggPSAoaSA/IGYuZGVsZWdhdGVUeXBlIDogZi5iaW5kVHlwZSkgfHwgaCwgZiA9IFouZXZlbnQuc3BlY2lhbFtoXSB8fCB7fSwgbCA9IFouZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnVHlwZTogZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VpZDogbi5ndWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWVkc0NvbnRleHQ6IGkgJiYgWi5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBkLmpvaW4oIi4iKQogICAgICAgICAgICAgICAgICAgICAgICB9LCBvKSwgKHAgPSB1W2hdKSB8fCAocCA9IHVbaF0gPSBbXSwgcC5kZWxlZ2F0ZUNvdW50ID0gMCwgZi5zZXR1cCAmJiBmLnNldHVwLmNhbGwodCwgciwgZCwgYSkgIT09ICExIHx8IHQuYWRkRXZlbnRMaXN0ZW5lciAmJiB0LmFkZEV2ZW50TGlzdGVuZXIoaCwgYSwgITEpKSwgZi5hZGQgJiYgKGYuYWRkLmNhbGwodCwgbCksIGwuaGFuZGxlci5ndWlkIHx8IChsLmhhbmRsZXIuZ3VpZCA9IG4uZ3VpZCkpLCBpID8gcC5zcGxpY2UocC5kZWxlZ2F0ZUNvdW50KyssIDAsIGwpIDogcC5wdXNoKGwpLCBaLmV2ZW50Lmdsb2JhbFtoXSA9ICEwKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24odCwgZSwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgIHZhciBvLCBhLCBzLCB1LCBjLCBsLCBmLCBwLCBoLCBkLCBnLCB2ID0geXQuaGFzRGF0YSh0KSAmJiB5dC5nZXQodCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHYgJiYgKHUgPSB2LmV2ZW50cykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChlID0gKGUgfHwgIiIpLm1hdGNoKGh0KSB8fCBbIiJdLCBjID0gZS5sZW5ndGg7IGMtLTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyA9IEF0LmV4ZWMoZVtjXSkgfHwgW10sIGggPSBnID0gc1sxXSwgZCA9IChzWzJdIHx8ICIiKS5zcGxpdCgiLiIpLnNvcnQoKSwgaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZiA9IFouZXZlbnQuc3BlY2lhbFtoXSB8fCB7fSwgaCA9IChyID8gZi5kZWxlZ2F0ZVR5cGUgOiBmLmJpbmRUeXBlKSB8fCBoLCBwID0gdVtoXSB8fCBbXSwgcyA9IHNbMl0gJiYgbmV3IFJlZ0V4cCgiKF58XFwuKSIgKyBkLmpvaW4oIlxcLig/Oi4qXFwufCkiKSArICIoXFwufCQpIiksIGEgPSBvID0gcC5sZW5ndGg7IG8tLTspIGwgPSBwW29dLCAhaSAmJiBnICE9PSBsLm9yaWdUeXBlIHx8IG4gJiYgbi5ndWlkICE9PSBsLmd1aWQgfHwgcyAmJiAhcy50ZXN0KGwubmFtZXNwYWNlKSB8fCByICYmIHIgIT09IGwuc2VsZWN0b3IgJiYgKCIqKiIgIT09IHIgfHwgIWwuc2VsZWN0b3IpIHx8IChwLnNwbGljZShvLCAxKSwgbC5zZWxlY3RvciAmJiBwLmRlbGVnYXRlQ291bnQtLSwgZi5yZW1vdmUgJiYgZi5yZW1vdmUuY2FsbCh0LCBsKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSAmJiAhcC5sZW5ndGggJiYgKGYudGVhcmRvd24gJiYgZi50ZWFyZG93bi5jYWxsKHQsIGQsIHYuaGFuZGxlKSAhPT0gITEgfHwgWi5yZW1vdmVFdmVudCh0LCBoLCB2LmhhbmRsZSksIGRlbGV0ZSB1W2hdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChoIGluIHUpIFouZXZlbnQucmVtb3ZlKHQsIGggKyBlW2NdLCBuLCByLCAhMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIFouaXNFbXB0eU9iamVjdCh1KSAmJiAoZGVsZXRlIHYuaGFuZGxlLCB5dC5yZW1vdmUodCwgImV2ZW50cyIpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbihlLCBuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG8sIGEsIHMsIHUsIGMsIGwsIGYsIHAgPSBbciB8fCBRXSwKICAgICAgICAgICAgICAgICAgICAgICAgaCA9IEouY2FsbChlLCAidHlwZSIpID8gZS50eXBlIDogZSwKICAgICAgICAgICAgICAgICAgICAgICAgZCA9IEouY2FsbChlLCAibmFtZXNwYWNlIikgPyBlLm5hbWVzcGFjZS5zcGxpdCgiLiIpIDogW107CiAgICAgICAgICAgICAgICAgICAgaWYgKGEgPSBzID0gciA9IHIgfHwgUSwgMyAhPT0gci5ub2RlVHlwZSAmJiA4ICE9PSByLm5vZGVUeXBlICYmICFTdC50ZXN0KGggKyBaLmV2ZW50LnRyaWdnZXJlZCkgJiYgKGguaW5kZXhPZigiLiIpID49IDAgJiYgKGQgPSBoLnNwbGl0KCIuIiksIGggPSBkLnNoaWZ0KCksIGQuc29ydCgpKSwgYyA9IGguaW5kZXhPZigiOiIpIDwgMCAmJiAib24iICsgaCwgZSA9IGVbWi5leHBhbmRvXSA/IGUgOiBuZXcgWi5FdmVudChoLCAib2JqZWN0IiA9PSB0eXBlb2YgZSAmJiBlKSwgZS5pc1RyaWdnZXIgPSBpID8gMiA6IDMsIGUubmFtZXNwYWNlID0gZC5qb2luKCIuIiksIGUubmFtZXNwYWNlX3JlID0gZS5uYW1lc3BhY2UgPyBuZXcgUmVnRXhwKCIoXnxcXC4pIiArIGQuam9pbigiXFwuKD86LipcXC58KSIpICsgIihcXC58JCkiKSA6IG51bGwsIGUucmVzdWx0ID0gdm9pZCAwLCBlLnRhcmdldCB8fCAoZS50YXJnZXQgPSByKSwgbiA9IG51bGwgPT0gbiA/IFtlXSA6IFoubWFrZUFycmF5KG4sIFtlXSksIGYgPSBaLmV2ZW50LnNwZWNpYWxbaF0gfHwge30sIGkgfHwgIWYudHJpZ2dlciB8fCBmLnRyaWdnZXIuYXBwbHkociwgbikgIT09ICExKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWkgJiYgIWYubm9CdWJibGUgJiYgIVouaXNXaW5kb3cocikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodSA9IGYuZGVsZWdhdGVUeXBlIHx8IGgsIFN0LnRlc3QodSArIGgpIHx8IChhID0gYS5wYXJlbnROb2RlKTsgYTsgYSA9IGEucGFyZW50Tm9kZSkgcC5wdXNoKGEpLCBzID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPT09IChyLm93bmVyRG9jdW1lbnQgfHwgUSkgJiYgcC5wdXNoKHMuZGVmYXVsdFZpZXcgfHwgcy5wYXJlbnRXaW5kb3cgfHwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG8gPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGEgPSBwW28rK10pICYmICFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCk7KSBlLnR5cGUgPSBvID4gMSA/IHUgOiBmLmJpbmRUeXBlIHx8IGgsIGwgPSAoeXQuZ2V0KGEsICJldmVudHMiKSB8fCB7fSlbZS50eXBlXSAmJiB5dC5nZXQoYSwgImhhbmRsZSIpLCBsICYmIGwuYXBwbHkoYSwgbiksIGwgPSBjICYmIGFbY10sIGwgJiYgbC5hcHBseSAmJiBaLmFjY2VwdERhdGEoYSkgJiYgKGUucmVzdWx0ID0gbC5hcHBseShhLCBuKSwgZS5yZXN1bHQgPT09ICExICYmIGUucHJldmVudERlZmF1bHQoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnR5cGUgPSBoLCBpIHx8IGUuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgZi5fZGVmYXVsdCAmJiBmLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksIG4pICE9PSAhMSB8fCAhWi5hY2NlcHREYXRhKHIpIHx8IGMgJiYgWi5pc0Z1bmN0aW9uKHJbaF0pICYmICFaLmlzV2luZG93KHIpICYmIChzID0gcltjXSwgcyAmJiAocltjXSA9IG51bGwpLCBaLmV2ZW50LnRyaWdnZXJlZCA9IGgsIHJbaF0oKSwgWi5ldmVudC50cmlnZ2VyZWQgPSB2b2lkIDAsIHMgJiYgKHJbY10gPSBzKSksIGUucmVzdWx0CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRpc3BhdGNoOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdCA9IFouZXZlbnQuZml4KHQpOwogICAgICAgICAgICAgICAgICAgIHZhciBlLCBuLCByLCBpLCBvLCBhID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBVLmNhbGwoYXJndW1lbnRzKSwKICAgICAgICAgICAgICAgICAgICAgICAgdSA9ICh5dC5nZXQodGhpcywgImV2ZW50cyIpIHx8IHt9KVt0LnR5cGVdIHx8IFtdLAogICAgICAgICAgICAgICAgICAgICAgICBjID0gWi5ldmVudC5zcGVjaWFsW3QudHlwZV0gfHwge307CiAgICAgICAgICAgICAgICAgICAgaWYgKHNbMF0gPSB0LCB0LmRlbGVnYXRlVGFyZ2V0ID0gdGhpcywgIWMucHJlRGlzcGF0Y2ggfHwgYy5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsIHQpICE9PSAhMSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGEgPSBaLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcywgdCwgdSksIGUgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgPSBhW2UrK10pICYmICF0LmlzUHJvcGFnYXRpb25TdG9wcGVkKCk7KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh0LmN1cnJlbnRUYXJnZXQgPSBpLmVsZW0sIG4gPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvID0gaS5oYW5kbGVyc1tuKytdKSAmJiAhdC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpOykoIXQubmFtZXNwYWNlX3JlIHx8IHQubmFtZXNwYWNlX3JlLnRlc3Qoby5uYW1lc3BhY2UpKSAmJiAodC5oYW5kbGVPYmogPSBvLCB0LmRhdGEgPSBvLmRhdGEsIHIgPSAoKFouZXZlbnQuc3BlY2lhbFtvLm9yaWdUeXBlXSB8fCB7fSkuaGFuZGxlIHx8IG8uaGFuZGxlcikuYXBwbHkoaS5lbGVtLCBzKSwgdm9pZCAwICE9PSByICYmICh0LnJlc3VsdCA9IHIpID09PSAhMSAmJiAodC5wcmV2ZW50RGVmYXVsdCgpLCB0LnN0b3BQcm9wYWdhdGlvbigpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjLnBvc3REaXNwYXRjaCAmJiBjLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsIHQpLCB0LnJlc3VsdAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBoYW5kbGVyczogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBpLCBvLCBhID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLmRlbGVnYXRlQ291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB0LnRhcmdldDsKICAgICAgICAgICAgICAgICAgICBpZiAocyAmJiB1Lm5vZGVUeXBlICYmICghdC5idXR0b24gfHwgImNsaWNrIiAhPT0gdC50eXBlKSkKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IHUgIT09IHRoaXM7IHUgPSB1LnBhcmVudE5vZGUgfHwgdGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1LmRpc2FibGVkICE9PSAhMCB8fCAiY2xpY2siICE9PSB0LnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHIgPSBbXSwgbiA9IDA7IHMgPiBuOyBuKyspIG8gPSBlW25dLCBpID0gby5zZWxlY3RvciArICIgIiwgdm9pZCAwID09PSByW2ldICYmIChyW2ldID0gby5uZWVkc0NvbnRleHQgPyBaKGksIHRoaXMpLmluZGV4KHUpID49IDAgOiBaLmZpbmQoaSwgdGhpcywgbnVsbCwgW3VdKS5sZW5ndGgpLCByW2ldICYmIHIucHVzaChvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmxlbmd0aCAmJiBhLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtOiB1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyczogcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMgPCBlLmxlbmd0aCAmJiBhLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBlbGVtOiB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyczogZS5zbGljZShzKQogICAgICAgICAgICAgICAgICAgIH0pLCBhCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcHJvcHM6ICJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2giLnNwbGl0KCIgIiksCiAgICAgICAgICAgICAgICBmaXhIb29rczoge30sCiAgICAgICAgICAgICAgICBrZXlIb29rczogewogICAgICAgICAgICAgICAgICAgIHByb3BzOiAiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSwKICAgICAgICAgICAgICAgICAgICBmaWx0ZXI6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdC53aGljaCAmJiAodC53aGljaCA9IG51bGwgIT0gZS5jaGFyQ29kZSA/IGUuY2hhckNvZGUgOiBlLmtleUNvZGUpLCB0CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG1vdXNlSG9va3M6IHsKICAgICAgICAgICAgICAgICAgICBwcm9wczogImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIuc3BsaXQoIiAiKSwKICAgICAgICAgICAgICAgICAgICBmaWx0ZXI6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIsIGksIG8gPSBlLmJ1dHRvbjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdC5wYWdlWCAmJiBudWxsICE9IGUuY2xpZW50WCAmJiAobiA9IHQudGFyZ2V0Lm93bmVyRG9jdW1lbnQgfHwgUSwgciA9IG4uZG9jdW1lbnRFbGVtZW50LCBpID0gbi5ib2R5LCB0LnBhZ2VYID0gZS5jbGllbnRYICsgKHIgJiYgci5zY3JvbGxMZWZ0IHx8IGkgJiYgaS5zY3JvbGxMZWZ0IHx8IDApIC0gKHIgJiYgci5jbGllbnRMZWZ0IHx8IGkgJiYgaS5jbGllbnRMZWZ0IHx8IDApLCB0LnBhZ2VZID0gZS5jbGllbnRZICsgKHIgJiYgci5zY3JvbGxUb3AgfHwgaSAmJiBpLnNjcm9sbFRvcCB8fCAwKSAtIChyICYmIHIuY2xpZW50VG9wIHx8IGkgJiYgaS5jbGllbnRUb3AgfHwgMCkpLCB0LndoaWNoIHx8IHZvaWQgMCA9PT0gbyB8fCAodC53aGljaCA9IDEgJiBvID8gMSA6IDIgJiBvID8gMyA6IDQgJiBvID8gMiA6IDApLCB0CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZpeDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0W1ouZXhwYW5kb10pIHJldHVybiB0OwogICAgICAgICAgICAgICAgICAgIHZhciBlLCBuLCByLCBpID0gdC50eXBlLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gdCwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHRoaXMuZml4SG9va3NbaV07CiAgICAgICAgICAgICAgICAgICAgZm9yIChhIHx8ICh0aGlzLmZpeEhvb2tzW2ldID0gYSA9IEN0LnRlc3QoaSkgPyB0aGlzLm1vdXNlSG9va3MgOiBqdC50ZXN0KGkpID8gdGhpcy5rZXlIb29rcyA6IHt9KSwgciA9IGEucHJvcHMgPyB0aGlzLnByb3BzLmNvbmNhdChhLnByb3BzKSA6IHRoaXMucHJvcHMsIHQgPSBuZXcgWi5FdmVudChvKSwgZSA9IHIubGVuZ3RoOyBlLS07KSBuID0gcltlXSwgdFtuXSA9IG9bbl07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQudGFyZ2V0IHx8ICh0LnRhcmdldCA9IFEpLCAzID09PSB0LnRhcmdldC5ub2RlVHlwZSAmJiAodC50YXJnZXQgPSB0LnRhcmdldC5wYXJlbnROb2RlKSwgYS5maWx0ZXIgPyBhLmZpbHRlcih0LCBvKSA6IHQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzcGVjaWFsOiB7CiAgICAgICAgICAgICAgICAgICAgbG9hZDogewogICAgICAgICAgICAgICAgICAgICAgICBub0J1YmJsZTogITAKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZvY3VzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMgIT09IGYoKSAmJiB0aGlzLmZvY3VzID8gKHRoaXMuZm9jdXMoKSwgITEpIDogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGVnYXRlVHlwZTogImZvY3VzaW4iCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBibHVyOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMgPT09IGYoKSAmJiB0aGlzLmJsdXIgPyAodGhpcy5ibHVyKCksICExKSA6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBkZWxlZ2F0ZVR5cGU6ICJmb2N1c291dCIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNsaWNrOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjaGVja2JveCIgPT09IHRoaXMudHlwZSAmJiB0aGlzLmNsaWNrICYmIFoubm9kZU5hbWUodGhpcywgImlucHV0IikgPyAodGhpcy5jbGljaygpLCAhMSkgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgX2RlZmF1bHQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBaLm5vZGVOYW1lKHQudGFyZ2V0LCAiYSIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGJlZm9yZXVubG9hZDogewogICAgICAgICAgICAgICAgICAgICAgICBwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gdC5yZXN1bHQgJiYgdC5vcmlnaW5hbEV2ZW50ICYmICh0Lm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWUgPSB0LnJlc3VsdCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzaW11bGF0ZTogZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gWi5leHRlbmQobmV3IFouRXZlbnQsIG4sIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgaXNTaW11bGF0ZWQ6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiB7fQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHIgPyBaLmV2ZW50LnRyaWdnZXIoaSwgbnVsbCwgZSkgOiBaLmV2ZW50LmRpc3BhdGNoLmNhbGwoZSwgaSksIGkuaXNEZWZhdWx0UHJldmVudGVkKCkgJiYgbi5wcmV2ZW50RGVmYXVsdCgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIFoucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB0LnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgdC5yZW1vdmVFdmVudExpc3RlbmVyKGUsIG4sICExKQogICAgICAgICAgICB9LCBaLkV2ZW50ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBaLkV2ZW50ID8gKHQgJiYgdC50eXBlID8gKHRoaXMub3JpZ2luYWxFdmVudCA9IHQsIHRoaXMudHlwZSA9IHQudHlwZSwgdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSB0LmRlZmF1bHRQcmV2ZW50ZWQgfHwgdm9pZCAwID09PSB0LmRlZmF1bHRQcmV2ZW50ZWQgJiYgdC5yZXR1cm5WYWx1ZSA9PT0gITEgPyBjIDogbCkgOiB0aGlzLnR5cGUgPSB0LCBlICYmIFouZXh0ZW5kKHRoaXMsIGUpLCB0aGlzLnRpbWVTdGFtcCA9IHQgJiYgdC50aW1lU3RhbXAgfHwgWi5ub3coKSwgdm9pZCh0aGlzW1ouZXhwYW5kb10gPSAhMCkpIDogbmV3IFouRXZlbnQodCwgZSkKICAgICAgICAgICAgfSwgWi5FdmVudC5wcm90b3R5cGUgPSB7CiAgICAgICAgICAgICAgICBpc0RlZmF1bHRQcmV2ZW50ZWQ6IGwsCiAgICAgICAgICAgICAgICBpc1Byb3BhZ2F0aW9uU3RvcHBlZDogbCwKICAgICAgICAgICAgICAgIGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiBsLAogICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5vcmlnaW5hbEV2ZW50OwogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gYywgdCAmJiB0LnByZXZlbnREZWZhdWx0ICYmIHQucHJldmVudERlZmF1bHQoKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZCA9IGMsIHQgJiYgdC5zdG9wUHJvcGFnYXRpb24gJiYgdC5zdG9wUHJvcGFnYXRpb24oKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IGMsIHQgJiYgdC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gJiYgdC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSwgdGhpcy5zdG9wUHJvcGFnYXRpb24oKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBaLmVhY2goewogICAgICAgICAgICAgICAgbW91c2VlbnRlcjogIm1vdXNlb3ZlciIsCiAgICAgICAgICAgICAgICBtb3VzZWxlYXZlOiAibW91c2VvdXQiLAogICAgICAgICAgICAgICAgcG9pbnRlcmVudGVyOiAicG9pbnRlcm92ZXIiLAogICAgICAgICAgICAgICAgcG9pbnRlcmxlYXZlOiAicG9pbnRlcm91dCIKICAgICAgICAgICAgfSwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgWi5ldmVudC5zcGVjaWFsW3RdID0gewogICAgICAgICAgICAgICAgICAgIGRlbGVnYXRlVHlwZTogZSwKICAgICAgICAgICAgICAgICAgICBiaW5kVHlwZTogZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGU6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHQucmVsYXRlZFRhcmdldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0LmhhbmRsZU9iajsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICghaSB8fCBpICE9PSByICYmICFaLmNvbnRhaW5zKHIsIGkpKSAmJiAodC50eXBlID0gby5vcmlnVHlwZSwgbiA9IG8uaGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0LnR5cGUgPSBlKSwgbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFkuZm9jdXNpbkJ1YmJsZXMgfHwgWi5lYWNoKHsKICAgICAgICAgICAgICAgIGZvY3VzOiAiZm9jdXNpbiIsCiAgICAgICAgICAgICAgICBibHVyOiAiZm9jdXNvdXQiCiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIFouZXZlbnQuc2ltdWxhdGUoZSwgdC50YXJnZXQsIFouZXZlbnQuZml4KHQpLCAhMCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBaLmV2ZW50LnNwZWNpYWxbZV0gPSB7CiAgICAgICAgICAgICAgICAgICAgc2V0dXA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHl0LmFjY2VzcyhyLCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaSB8fCByLmFkZEV2ZW50TGlzdGVuZXIodCwgbiwgITApLCB5dC5hY2Nlc3MociwgZSwgKGkgfHwgMCkgKyAxKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdGVhcmRvd246IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHl0LmFjY2VzcyhyLCBlKSAtIDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGkgPyB5dC5hY2Nlc3MociwgZSwgaSkgOiAoci5yZW1vdmVFdmVudExpc3RlbmVyKHQsIG4sICEwKSwgeXQucmVtb3ZlKHIsIGUpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZm4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgIG9uOiBmdW5jdGlvbih0LCBlLCBuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG8sIGE7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJvYmplY3QiID09IHR5cGVvZiB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICJzdHJpbmciICE9IHR5cGVvZiBlICYmIChuID0gbiB8fCBlLCBlID0gdm9pZCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChhIGluIHQpIHRoaXMub24oYSwgZSwgbiwgdFthXSwgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IG4gJiYgbnVsbCA9PSByID8gKHIgPSBlLCBuID0gZSA9IHZvaWQgMCkgOiBudWxsID09IHIgJiYgKCJzdHJpbmciID09IHR5cGVvZiBlID8gKHIgPSBuLCBuID0gdm9pZCAwKSA6IChyID0gbiwgbiA9IGUsIGUgPSB2b2lkIDApKSwgciA9PT0gITEpIHIgPSBsOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFyKSByZXR1cm4gdGhpczsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSA9PT0gaSAmJiAobyA9IHIsIHIgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBaKCkub2ZmKHQpLCBvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICB9LCByLmd1aWQgPSBvLmd1aWQgfHwgKG8uZ3VpZCA9IFouZ3VpZCsrKSksIHRoaXMuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgWi5ldmVudC5hZGQodGhpcywgdCwgciwgbiwgZSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uZTogZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9uKHQsIGUsIG4sIHIsIDEpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb2ZmOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIsIGk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgdC5wcmV2ZW50RGVmYXVsdCAmJiB0LmhhbmRsZU9iaikgcmV0dXJuIHIgPSB0LmhhbmRsZU9iaiwgWih0LmRlbGVnYXRlVGFyZ2V0KS5vZmYoci5uYW1lc3BhY2UgPyByLm9yaWdUeXBlICsgIi4iICsgci5uYW1lc3BhY2UgOiByLm9yaWdUeXBlLCByLnNlbGVjdG9yLCByLmhhbmRsZXIpLCB0aGlzOwogICAgICAgICAgICAgICAgICAgIGlmICgib2JqZWN0IiA9PSB0eXBlb2YgdCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgaW4gdCkgdGhpcy5vZmYoaSwgZSwgdFtpXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSA9PT0gITEgfHwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSkgJiYgKG4gPSBlLCBlID0gdm9pZCAwKSwgbiA9PT0gITEgJiYgKG4gPSBsKSwgdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBaLmV2ZW50LnJlbW92ZSh0aGlzLCB0LCBuLCBlKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdHJpZ2dlcjogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFouZXZlbnQudHJpZ2dlcih0LCBlLCB0aGlzKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXNbMF07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPyBaLmV2ZW50LnRyaWdnZXIodCwgZSwgbiwgITApIDogdm9pZCAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgTnQgPSAvPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+XSopXC8+L2dpLAogICAgICAgICAgICAgICAgUnQgPSAvPChbXHc6XSspLywKICAgICAgICAgICAgICAgIEl0ID0gLzx8JiM/XHcrOy8sCiAgICAgICAgICAgICAgICBPdCA9IC88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksCiAgICAgICAgICAgICAgICBMdCA9IC9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLAogICAgICAgICAgICAgICAgRHQgPSAvXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksCiAgICAgICAgICAgICAgICBQdCA9IC9edHJ1ZVwvKC4qKS8sCiAgICAgICAgICAgICAgICAkdCA9IC9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZywKICAgICAgICAgICAgICAgIHF0ID0gewogICAgICAgICAgICAgICAgICAgIG9wdGlvbjogWzEsICI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwgIjwvc2VsZWN0PiJdLAogICAgICAgICAgICAgICAgICAgIHRoZWFkOiBbMSwgIjx0YWJsZT4iLCAiPC90YWJsZT4iXSwKICAgICAgICAgICAgICAgICAgICBjb2w6IFsyLCAiPHRhYmxlPjxjb2xncm91cD4iLCAiPC9jb2xncm91cD48L3RhYmxlPiJdLAogICAgICAgICAgICAgICAgICAgIHRyOiBbMiwgIjx0YWJsZT48dGJvZHk+IiwgIjwvdGJvZHk+PC90YWJsZT4iXSwKICAgICAgICAgICAgICAgICAgICB0ZDogWzMsICI8dGFibGU+PHRib2R5Pjx0cj4iLCAiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sCiAgICAgICAgICAgICAgICAgICAgX2RlZmF1bHQ6IFswLCAiIiwgIiJdCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICBxdC5vcHRncm91cCA9IHF0Lm9wdGlvbiwgcXQudGJvZHkgPSBxdC50Zm9vdCA9IHF0LmNvbGdyb3VwID0gcXQuY2FwdGlvbiA9IHF0LnRoZWFkLCBxdC50aCA9IHF0LnRkLCBaLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciByLCBpLCBvLCBhLCBzID0gdC5jbG9uZU5vZGUoITApLAogICAgICAgICAgICAgICAgICAgICAgICB1ID0gWi5jb250YWlucyh0Lm93bmVyRG9jdW1lbnQsIHQpOwogICAgICAgICAgICAgICAgICAgIGlmICghKFkubm9DbG9uZUNoZWNrZWQgfHwgMSAhPT0gdC5ub2RlVHlwZSAmJiAxMSAhPT0gdC5ub2RlVHlwZSB8fCBaLmlzWE1MRG9jKHQpKSkKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChhID0geShzKSwgbyA9IHkodCksIHIgPSAwLCBpID0gby5sZW5ndGg7IGkgPiByOyByKyspIG0ob1tyXSwgYVtyXSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGUpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gbyB8fCB5KHQpLCBhID0gYSB8fCB5KHMpLCByID0gMCwgaSA9IG8ubGVuZ3RoOyBpID4gcjsgcisrKSB2KG9bcl0sIGFbcl0pOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHYodCwgcyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPSB5KHMsICJzY3JpcHQiKSwgYS5sZW5ndGggPiAwICYmIGcoYSwgIXUgJiYgeSh0LCAic2NyaXB0IikpLCBzCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYnVpbGRGcmFnbWVudDogZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGksIG8sIGEsIHMsIHUsIGMsIGwgPSBlLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwgZiA9IFtdLCBwID0gMCwgaCA9IHQubGVuZ3RoOyBoID4gcDsgcCsrKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9IHRbcF0sIGkgfHwgMCA9PT0gaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgib2JqZWN0IiA9PT0gWi50eXBlKGkpKSBaLm1lcmdlKGYsIGkubm9kZVR5cGUgPyBbaV0gOiBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEl0LnRlc3QoaSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gbyB8fCBsLmFwcGVuZENoaWxkKGUuY3JlYXRlRWxlbWVudCgiZGl2IikpLCBhID0gKFJ0LmV4ZWMoaSkgfHwgWyIiLCAiIl0pWzFdLnRvTG93ZXJDYXNlKCksIHMgPSBxdFthXSB8fCBxdC5fZGVmYXVsdCwgby5pbm5lckhUTUwgPSBzWzFdICsgaS5yZXBsYWNlKE50LCAiPCQxPjwvJDI+IikgKyBzWzJdLCBjID0gc1swXTsgYy0tOykgbyA9IG8ubGFzdENoaWxkOwogICAgICAgICAgICAgICAgICAgICAgICBaLm1lcmdlKGYsIG8uY2hpbGROb2RlcyksIG8gPSBsLmZpcnN0Q2hpbGQsIG8udGV4dENvbnRlbnQgPSAiIgogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBmLnB1c2goZS5jcmVhdGVUZXh0Tm9kZShpKSk7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsLnRleHRDb250ZW50ID0gIiIsIHAgPSAwOyBpID0gZltwKytdOykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCghciB8fCAtMSA9PT0gWi5pbkFycmF5KGksIHIpKSAmJiAodSA9IFouY29udGFpbnMoaS5vd25lckRvY3VtZW50LCBpKSwgbyA9IHkobC5hcHBlbmRDaGlsZChpKSwgInNjcmlwdCIpLCB1ICYmIGcobyksIG4pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjID0gMDsgaSA9IG9bYysrXTspIER0LnRlc3QoaS50eXBlIHx8ICIiKSAmJiBuLnB1c2goaSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjbGVhbkRhdGE6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlLCBuLCByLCBpLCBvID0gWi5ldmVudC5zcGVjaWFsLCBhID0gMDsgdm9pZCAwICE9PSAobiA9IHRbYV0pOyBhKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFouYWNjZXB0RGF0YShuKSAmJiAoaSA9IG5beXQuZXhwYW5kb10sIGkgJiYgKGUgPSB5dC5jYWNoZVtpXSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5ldmVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyIGluIGUuZXZlbnRzKSBvW3JdID8gWi5ldmVudC5yZW1vdmUobiwgcikgOiBaLnJlbW92ZUV2ZW50KG4sIHIsIGUuaGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHl0LmNhY2hlW2ldICYmIGRlbGV0ZSB5dC5jYWNoZVtpXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtdC5jYWNoZVtuW210LmV4cGFuZG9dXQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZm4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdnQodGhpcywgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ID8gWi50ZXh0KHRoaXMpIDogdGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMSA9PT0gdGhpcy5ub2RlVHlwZSB8fCAxMSA9PT0gdGhpcy5ub2RlVHlwZSB8fCA5ID09PSB0aGlzLm5vZGVUeXBlKSAmJiAodGhpcy50ZXh0Q29udGVudCA9IHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSwgbnVsbCwgdCwgYXJndW1lbnRzLmxlbmd0aCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhcHBlbmQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gdGhpcy5ub2RlVHlwZSB8fCAxMSA9PT0gdGhpcy5ub2RlVHlwZSB8fCA5ID09PSB0aGlzLm5vZGVUeXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHAodGhpcywgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmFwcGVuZENoaWxkKHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHByZXBlbmQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gdGhpcy5ub2RlVHlwZSB8fCAxMSA9PT0gdGhpcy5ub2RlVHlwZSB8fCA5ID09PSB0aGlzLm5vZGVUeXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHAodGhpcywgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmluc2VydEJlZm9yZSh0LCBlLmZpcnN0Q2hpbGQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJlZm9yZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZSAmJiB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHQsIHRoaXMpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhZnRlcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZSAmJiB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHQsIHRoaXMubmV4dFNpYmxpbmcpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuLCByID0gdCA/IFouZmlsdGVyKHQsIHRoaXMpIDogdGhpcywgaSA9IDA7IG51bGwgIT0gKG4gPSByW2ldKTsgaSsrKSBlIHx8IDEgIT09IG4ubm9kZVR5cGUgfHwgWi5jbGVhbkRhdGEoeShuKSksIG4ucGFyZW50Tm9kZSAmJiAoZSAmJiBaLmNvbnRhaW5zKG4ub3duZXJEb2N1bWVudCwgbikgJiYgZyh5KG4sICJzY3JpcHQiKSksIG4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBlbXB0eTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCwgZSA9IDA7IG51bGwgIT0gKHQgPSB0aGlzW2VdKTsgZSsrKSAxID09PSB0Lm5vZGVUeXBlICYmIChaLmNsZWFuRGF0YSh5KHQsICExKSksIHQudGV4dENvbnRlbnQgPSAiIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gbnVsbCA9PSB0ID8gITEgOiB0LCBlID0gbnVsbCA9PSBlID8gdCA6IGUsIHRoaXMubWFwKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWi5jbG9uZSh0aGlzLCB0LCBlKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaHRtbDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB2dCh0aGlzLCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpc1swXSB8fCB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRoaXMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSB0ICYmIDEgPT09IGUubm9kZVR5cGUpIHJldHVybiBlLmlubmVySFRNTDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiB0ICYmICFPdC50ZXN0KHQpICYmICFxdFsoUnQuZXhlYyh0KSB8fCBbIiIsICIiXSlbMV0udG9Mb3dlckNhc2UoKV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB0LnJlcGxhY2UoTnQsICI8JDE+PC8kMj4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IHIgPiBuOyBuKyspIGUgPSB0aGlzW25dIHx8IHt9LCAxID09PSBlLm5vZGVUeXBlICYmIChaLmNsZWFuRGF0YSh5KGUsICExKSksIGUuaW5uZXJIVE1MID0gdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGkpIHt9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZSAmJiB0aGlzLmVtcHR5KCkuYXBwZW5kKHQpCiAgICAgICAgICAgICAgICAgICAgfSwgbnVsbCwgdCwgYXJndW1lbnRzLmxlbmd0aCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZXBsYWNlV2l0aDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBhcmd1bWVudHNbMF07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB0aGlzLnBhcmVudE5vZGUsIFouY2xlYW5EYXRhKHkodGhpcykpLCB0ICYmIHQucmVwbGFjZUNoaWxkKGUsIHRoaXMpCiAgICAgICAgICAgICAgICAgICAgfSksIHQgJiYgKHQubGVuZ3RoIHx8IHQubm9kZVR5cGUpID8gdGhpcyA6IHRoaXMucmVtb3ZlKCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkZXRhY2g6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmUodCwgITApCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZG9tTWFuaXA6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB0ID0gVy5hcHBseShbXSwgdCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIsIGksIG8sIGEsIHMsIHUgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICBjID0gdGhpcy5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICBmID0gYyAtIDEsCiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB0WzBdLAogICAgICAgICAgICAgICAgICAgICAgICBnID0gWi5pc0Z1bmN0aW9uKHApOwogICAgICAgICAgICAgICAgICAgIGlmIChnIHx8IGMgPiAxICYmICJzdHJpbmciID09IHR5cGVvZiBwICYmICFZLmNoZWNrQ2xvbmUgJiYgTHQudGVzdChwKSkgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbC5lcShuKTsKICAgICAgICAgICAgICAgICAgICAgICAgZyAmJiAodFswXSA9IHAuY2FsbCh0aGlzLCBuLCByLmh0bWwoKSkpLCByLmRvbU1hbmlwKHQsIGUpCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGMgJiYgKG4gPSBaLmJ1aWxkRnJhZ21lbnQodCwgdGhpc1swXS5vd25lckRvY3VtZW50LCAhMSwgdGhpcyksIHIgPSBuLmZpcnN0Q2hpbGQsIDEgPT09IG4uY2hpbGROb2Rlcy5sZW5ndGggJiYgKG4gPSByKSwgcikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gWi5tYXAoeShuLCAic2NyaXB0IiksIGgpLCBvID0gaS5sZW5ndGg7IGMgPiB1OyB1KyspIGEgPSBuLCB1ICE9PSBmICYmIChhID0gWi5jbG9uZShhLCAhMCwgITApLCBvICYmIFoubWVyZ2UoaSwgeShhLCAic2NyaXB0IikpKSwgZS5jYWxsKHRoaXNbdV0sIGEsIHUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAocyA9IGlbaS5sZW5ndGggLSAxXS5vd25lckRvY3VtZW50LCBaLm1hcChpLCBkKSwgdSA9IDA7IG8gPiB1OyB1KyspIGEgPSBpW3VdLCBEdC50ZXN0KGEudHlwZSB8fCAiIikgJiYgIXl0LmFjY2VzcyhhLCAiZ2xvYmFsRXZhbCIpICYmIFouY29udGFpbnMocywgYSkgJiYgKGEuc3JjID8gWi5fZXZhbFVybCAmJiBaLl9ldmFsVXJsKGEuc3JjKSA6IFouZ2xvYmFsRXZhbChhLnRleHRDb250ZW50LnJlcGxhY2UoJHQsICIiKSkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmVhY2goewogICAgICAgICAgICAgICAgYXBwZW5kVG86ICJhcHBlbmQiLAogICAgICAgICAgICAgICAgcHJlcGVuZFRvOiAicHJlcGVuZCIsCiAgICAgICAgICAgICAgICBpbnNlcnRCZWZvcmU6ICJiZWZvcmUiLAogICAgICAgICAgICAgICAgaW5zZXJ0QWZ0ZXI6ICJhZnRlciIsCiAgICAgICAgICAgICAgICByZXBsYWNlQWxsOiAicmVwbGFjZVdpdGgiCiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIFouZm5bdF0gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiwgciA9IFtdLCBpID0gWih0KSwgbyA9IGkubGVuZ3RoIC0gMSwgYSA9IDA7IG8gPj0gYTsgYSsrKSBuID0gYSA9PT0gbyA/IHRoaXMgOiB0aGlzLmNsb25lKCEwKSwgWihpW2FdKVtlXShuKSwgei5hcHBseShyLCBuLmdldCgpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoU3RhY2socikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBIdCwgTXQgPSB7fSwKICAgICAgICAgICAgICAgIEZ0ID0gL15tYXJnaW4vLAogICAgICAgICAgICAgICAgQnQgPSBuZXcgUmVnRXhwKCJeKCIgKyB3dCArICIpKD8hcHgpW2EteiVdKyQiLCAiaSIpLAogICAgICAgICAgICAgICAgVXQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5vcGVuZXIgPyBlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlLCBudWxsKSA6IHQuZ2V0Q29tcHV0ZWRTdHlsZShlLCBudWxsKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgISBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICAgICAgICAgICAgYS5zdHlsZS5jc3NUZXh0ID0gIi13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NHB4O3Bvc2l0aW9uOmFic29sdXRlIiwgYS5pbm5lckhUTUwgPSAiIiwgaS5hcHBlbmRDaGlsZChvKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQuZ2V0Q29tcHV0ZWRTdHlsZShhLCBudWxsKTsKICAgICAgICAgICAgICAgICAgICBuID0gIjElIiAhPT0gZS50b3AsIHIgPSAiNHB4IiA9PT0gZS53aWR0aCwgaS5yZW1vdmVDaGlsZChvKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG4sIHIsIGkgPSBRLmRvY3VtZW50RWxlbWVudCwKICAgICAgICAgICAgICAgICAgICBvID0gUS5jcmVhdGVFbGVtZW50KCJkaXYiKSwKICAgICAgICAgICAgICAgICAgICBhID0gUS5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgICAgIGEuc3R5bGUgJiYgKGEuc3R5bGUuYmFja2dyb3VuZENsaXAgPSAiY29udGVudC1ib3giLCBhLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXAgPSAiIiwgWS5jbGVhckNsb25lU3R5bGUgPSAiY29udGVudC1ib3giID09PSBhLnN0eWxlLmJhY2tncm91bmRDbGlwLCBvLnN0eWxlLmNzc1RleHQgPSAiYm9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7bWFyZ2luLXRvcDoxcHg7cG9zaXRpb246YWJzb2x1dGUiLCBvLmFwcGVuZENoaWxkKGEpLCB0LmdldENvbXB1dGVkU3R5bGUgJiYgWi5leHRlbmQoWSwgewogICAgICAgICAgICAgICAgICAgIHBpeGVsUG9zaXRpb246IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSgpLCBuCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHIgJiYgZSgpLCByCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZWxpYWJsZU1hcmdpblJpZ2h0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG4gPSBhLmFwcGVuZENoaWxkKFEuY3JlYXRlRWxlbWVudCgiZGl2IikpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5zdHlsZS5jc3NUZXh0ID0gYS5zdHlsZS5jc3NUZXh0ID0gIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCIsIG4uc3R5bGUubWFyZ2luUmlnaHQgPSBuLnN0eWxlLndpZHRoID0gIjAiLCBhLnN0eWxlLndpZHRoID0gIjFweCIsIGkuYXBwZW5kQ2hpbGQobyksIGUgPSAhcGFyc2VGbG9hdCh0LmdldENvbXB1dGVkU3R5bGUobiwgbnVsbCkubWFyZ2luUmlnaHQpLCBpLnJlbW92ZUNoaWxkKG8pLCBhLnJlbW92ZUNoaWxkKG4pLCBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgIH0oKSwgWi5zd2FwID0gZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgdmFyIGksIG8sIGEgPSB7fTsKICAgICAgICAgICAgICAgIGZvciAobyBpbiBlKSBhW29dID0gdC5zdHlsZVtvXSwgdC5zdHlsZVtvXSA9IGVbb107CiAgICAgICAgICAgICAgICBpID0gbi5hcHBseSh0LCByIHx8IFtdKTsKICAgICAgICAgICAgICAgIGZvciAobyBpbiBlKSB0LnN0eWxlW29dID0gYVtvXTsKICAgICAgICAgICAgICAgIHJldHVybiBpCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBXdCA9IC9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLywKICAgICAgICAgICAgICAgIHp0ID0gbmV3IFJlZ0V4cCgiXigiICsgd3QgKyAiKSguKikkIiwgImkiKSwKICAgICAgICAgICAgICAgIFZ0ID0gbmV3IFJlZ0V4cCgiXihbKy1dKT0oIiArIHd0ICsgIikiLCAiaSIpLAogICAgICAgICAgICAgICAgR3QgPSB7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICJhYnNvbHV0ZSIsCiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogImhpZGRlbiIsCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogImJsb2NrIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFh0ID0gewogICAgICAgICAgICAgICAgICAgIGxldHRlclNwYWNpbmc6ICIwIiwKICAgICAgICAgICAgICAgICAgICBmb250V2VpZ2h0OiAiNDAwIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIEp0ID0gWyJXZWJraXQiLCAiTyIsICJNb3oiLCAibXMiXTsKICAgICAgICAgICAgWi5leHRlbmQoewogICAgICAgICAgICAgICAgY3NzSG9va3M6IHsKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHcodCwgIm9wYWNpdHkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIiIgPT09IG4gPyAiMSIgOiBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY3NzTnVtYmVyOiB7CiAgICAgICAgICAgICAgICAgICAgY29sdW1uQ291bnQ6ICEwLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAhMCwKICAgICAgICAgICAgICAgICAgICBmbGV4R3JvdzogITAsCiAgICAgICAgICAgICAgICAgICAgZmxleFNocmluazogITAsCiAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodDogITAsCiAgICAgICAgICAgICAgICAgICAgbGluZUhlaWdodDogITAsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogITAsCiAgICAgICAgICAgICAgICAgICAgb3JkZXI6ICEwLAogICAgICAgICAgICAgICAgICAgIG9ycGhhbnM6ICEwLAogICAgICAgICAgICAgICAgICAgIHdpZG93czogITAsCiAgICAgICAgICAgICAgICAgICAgekluZGV4OiAhMCwKICAgICAgICAgICAgICAgICAgICB6b29tOiAhMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNzc1Byb3BzOiB7CiAgICAgICAgICAgICAgICAgICAgImZsb2F0IjogImNzc0Zsb2F0IgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHN0eWxlOiBmdW5jdGlvbih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgMyAhPT0gdC5ub2RlVHlwZSAmJiA4ICE9PSB0Lm5vZGVUeXBlICYmIHQuc3R5bGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGksIG8sIGEsIHMgPSBaLmNhbWVsQ2FzZShlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB0LnN0eWxlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9IFouY3NzUHJvcHNbc10gfHwgKFouY3NzUHJvcHNbc10gPSBrKHUsIHMpKSwgYSA9IFouY3NzSG9va3NbZV0gfHwgWi5jc3NIb29rc1tzXSwgdm9pZCAwID09PSBuID8gYSAmJiAiZ2V0IiBpbiBhICYmIHZvaWQgMCAhPT0gKGkgPSBhLmdldCh0LCAhMSwgcikpID8gaSA6IHVbZV0gOiAobyA9IHR5cGVvZiBuLCAic3RyaW5nIiA9PT0gbyAmJiAoaSA9IFZ0LmV4ZWMobikpICYmIChuID0gKGlbMV0gKyAxKSAqIGlbMl0gKyBwYXJzZUZsb2F0KFouY3NzKHQsIGUpKSwgbyA9ICJudW1iZXIiKSwgbnVsbCAhPSBuICYmIG4gPT09IG4gJiYgKCJudW1iZXIiICE9PSBvIHx8IFouY3NzTnVtYmVyW3NdIHx8IChuICs9ICJweCIpLCBZLmNsZWFyQ2xvbmVTdHlsZSB8fCAiIiAhPT0gbiB8fCAwICE9PSBlLmluZGV4T2YoImJhY2tncm91bmQiKSB8fCAodVtlXSA9ICJpbmhlcml0IiksIGEgJiYgInNldCIgaW4gYSAmJiB2b2lkIDAgPT09IChuID0gYS5zZXQodCwgbiwgcikpIHx8ICh1W2VdID0gbikpLCB2b2lkIDApCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNzczogZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIHZhciBpLCBvLCBhLCBzID0gWi5jYW1lbENhc2UoZSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPSBaLmNzc1Byb3BzW3NdIHx8IChaLmNzc1Byb3BzW3NdID0gayh0LnN0eWxlLCBzKSksIGEgPSBaLmNzc0hvb2tzW2VdIHx8IFouY3NzSG9va3Nbc10sIGEgJiYgImdldCIgaW4gYSAmJiAoaSA9IGEuZ2V0KHQsICEwLCBuKSksIHZvaWQgMCA9PT0gaSAmJiAoaSA9IHcodCwgZSwgcikpLCAibm9ybWFsIiA9PT0gaSAmJiBlIGluIFh0ICYmIChpID0gWHRbZV0pLCAiIiA9PT0gbiB8fCBuID8gKG8gPSBwYXJzZUZsb2F0KGkpLCBuID09PSAhMCB8fCBaLmlzTnVtZXJpYyhvKSA/IG8gfHwgMCA6IGkpIDogaQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5lYWNoKFsiaGVpZ2h0IiwgIndpZHRoIl0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIFouY3NzSG9va3NbZV0gPSB7CiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbih0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID8gV3QudGVzdChaLmNzcyh0LCAiZGlzcGxheSIpKSAmJiAwID09PSB0Lm9mZnNldFdpZHRoID8gWi5zd2FwKHQsIEd0LCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqKHQsIGUsIHIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pIDogaih0LCBlLCByKSA6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbih0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gciAmJiBVdCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFQodCwgbiwgciA/IEUodCwgZSwgciwgImJvcmRlci1ib3giID09PSBaLmNzcyh0LCAiYm94U2l6aW5nIiwgITEsIGkpLCBpKSA6IDApCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5jc3NIb29rcy5tYXJnaW5SaWdodCA9IF8oWS5yZWxpYWJsZU1hcmdpblJpZ2h0LCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZSA/IFouc3dhcCh0LCB7CiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogImlubGluZS1ibG9jayIKICAgICAgICAgICAgICAgIH0sIHcsIFt0LCAibWFyZ2luUmlnaHQiXSkgOiB2b2lkIDAKICAgICAgICAgICAgfSksIFouZWFjaCh7CiAgICAgICAgICAgICAgICBtYXJnaW46ICIiLAogICAgICAgICAgICAgICAgcGFkZGluZzogIiIsCiAgICAgICAgICAgICAgICBib3JkZXI6ICJXaWR0aCIKICAgICAgICAgICAgfSwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgWi5jc3NIb29rc1t0ICsgZV0gPSB7CiAgICAgICAgICAgICAgICAgICAgZXhwYW5kOiBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAwLCBpID0ge30sIG8gPSAic3RyaW5nIiA9PSB0eXBlb2YgbiA/IG4uc3BsaXQoIiAiKSA6IFtuXTsgNCA+IHI7IHIrKykgaVt0ICsgX3Rbcl0gKyBlXSA9IG9bcl0gfHwgb1tyIC0gMl0gfHwgb1swXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBGdC50ZXN0KHQpIHx8IChaLmNzc0hvb2tzW3QgKyBlXS5zZXQgPSBUKQogICAgICAgICAgICB9KSwgWi5mbi5leHRlbmQoewogICAgICAgICAgICAgICAgY3NzOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZ0KHRoaXMsIGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIsIGksIG8gPSB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoWi5pc0FycmF5KGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHIgPSBVdCh0KSwgaSA9IGUubGVuZ3RoOyBpID4gYTsgYSsrKSBvW2VbYV1dID0gWi5jc3ModCwgZVthXSwgITEsIHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBuID8gWi5zdHlsZSh0LCBlLCBuKSA6IFouY3NzKHQsIGUpCiAgICAgICAgICAgICAgICAgICAgfSwgdCwgZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEModGhpcywgITApCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEModGhpcykKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0b2dnbGU6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gImJvb2xlYW4iID09IHR5cGVvZiB0ID8gdCA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCkgOiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGt0KHRoaXMpID8gWih0aGlzKS5zaG93KCkgOiBaKHRoaXMpLmhpZGUoKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLlR3ZWVuID0gUywgUy5wcm90b3R5cGUgPSB7CiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcjogUywKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHQsIGUsIG4sIHIsIGksIG8pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW0gPSB0LCB0aGlzLnByb3AgPSBuLCB0aGlzLmVhc2luZyA9IGkgfHwgInN3aW5nIiwgdGhpcy5vcHRpb25zID0gZSwgdGhpcy5zdGFydCA9IHRoaXMubm93ID0gdGhpcy5jdXIoKSwgdGhpcy5lbmQgPSByLCB0aGlzLnVuaXQgPSBvIHx8IChaLmNzc051bWJlcltuXSA/ICIiIDogInB4IikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjdXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gUy5wcm9wSG9va3NbdGhpcy5wcm9wXTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCAmJiB0LmdldCA/IHQuZ2V0KHRoaXMpIDogUy5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcnVuOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG4gPSBTLnByb3BIb29rc1t0aGlzLnByb3BdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZHVyYXRpb24gPyB0aGlzLnBvcyA9IGUgPSBaLmVhc2luZ1t0aGlzLmVhc2luZ10odCwgdGhpcy5vcHRpb25zLmR1cmF0aW9uICogdCwgMCwgMSwgdGhpcy5vcHRpb25zLmR1cmF0aW9uKSA6IHRoaXMucG9zID0gZSA9IHQsIHRoaXMubm93ID0gKHRoaXMuZW5kIC0gdGhpcy5zdGFydCkgKiBlICsgdGhpcy5zdGFydCwgdGhpcy5vcHRpb25zLnN0ZXAgJiYgdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sIHRoaXMubm93LCB0aGlzKSwgbiAmJiBuLnNldCA/IG4uc2V0KHRoaXMpIDogUy5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLCB0aGlzCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIFMucHJvdG90eXBlLmluaXQucHJvdG90eXBlID0gUy5wcm90b3R5cGUsIFMucHJvcEhvb2tzID0gewogICAgICAgICAgICAgICAgX2RlZmF1bHQ6IHsKICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQuZWxlbVt0LnByb3BdIHx8IHQuZWxlbS5zdHlsZSAmJiBudWxsICE9IHQuZWxlbS5zdHlsZVt0LnByb3BdID8gKGUgPSBaLmNzcyh0LmVsZW0sIHQucHJvcCwgIiIpLCBlICYmICJhdXRvIiAhPT0gZSA/IGUgOiAwKSA6IHQuZWxlbVt0LnByb3BdCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgWi5meC5zdGVwW3QucHJvcF0gPyBaLmZ4LnN0ZXBbdC5wcm9wXSh0KSA6IHQuZWxlbS5zdHlsZSAmJiAobnVsbCAhPSB0LmVsZW0uc3R5bGVbWi5jc3NQcm9wc1t0LnByb3BdXSB8fCBaLmNzc0hvb2tzW3QucHJvcF0pID8gWi5zdHlsZSh0LmVsZW0sIHQucHJvcCwgdC5ub3cgKyB0LnVuaXQpIDogdC5lbGVtW3QucHJvcF0gPSB0Lm5vdwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgUy5wcm9wSG9va3Muc2Nyb2xsVG9wID0gUy5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHsKICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHQuZWxlbS5ub2RlVHlwZSAmJiB0LmVsZW0ucGFyZW50Tm9kZSAmJiAodC5lbGVtW3QucHJvcF0gPSB0Lm5vdykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgWi5lYXNpbmcgPSB7CiAgICAgICAgICAgICAgICBsaW5lYXI6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHN3aW5nOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC41IC0gTWF0aC5jb3ModCAqIE1hdGguUEkpIC8gMgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBaLmZ4ID0gUy5wcm90b3R5cGUuaW5pdCwgWi5meC5zdGVwID0ge307CiAgICAgICAgICAgIHZhciBZdCwgUXQsIEt0ID0gL14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLAogICAgICAgICAgICAgICAgWnQgPSBuZXcgUmVnRXhwKCJeKD86KFsrLV0pPXwpKCIgKyB3dCArICIpKFthLXolXSopJCIsICJpIiksCiAgICAgICAgICAgICAgICB0ZSA9IC9xdWV1ZUhvb2tzJC8sCiAgICAgICAgICAgICAgICBlZSA9IFtJXSwKICAgICAgICAgICAgICAgIG5lID0gewogICAgICAgICAgICAgICAgICAgICIqIjogW2Z1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLmNyZWF0ZVR3ZWVuKHQsIGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG4uY3VyKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gWnQuZXhlYyhlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBpICYmIGlbM10gfHwgKFouY3NzTnVtYmVyW3RdID8gIiIgOiAicHgiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAoWi5jc3NOdW1iZXJbdF0gfHwgInB4IiAhPT0gbyAmJiArcikgJiYgWnQuZXhlYyhaLmNzcyhuLmVsZW0sIHQpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IDIwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSAmJiBhWzNdICE9PSBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gbyB8fCBhWzNdLCBpID0gaSB8fCBbXSwgYSA9ICtyIHx8IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkbyBzID0gcyB8fCAiLjUiLCBhIC89IHMsIFouc3R5bGUobi5lbGVtLCB0LCBhICsgbyk7IHdoaWxlIChzICE9PSAocyA9IG4uY3VyKCkgLyByKSAmJiAxICE9PSBzICYmIC0tdSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSAmJiAoYSA9IG4uc3RhcnQgPSArYSB8fCArciB8fCAwLCBuLnVuaXQgPSBvLCBuLmVuZCA9IGlbMV0gPyBhICsgKGlbMV0gKyAxKSAqIGlbMl0gOiAraVsyXSksIG4KICAgICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgWi5BbmltYXRpb24gPSBaLmV4dGVuZChMLCB7CiAgICAgICAgICAgICAgICAgICAgdHdlZW5lcjogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBaLmlzRnVuY3Rpb24odCkgPyAoZSA9IHQsIHQgPSBbIioiXSkgOiB0ID0gdC5zcGxpdCgiICIpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuLCByID0gMCwgaSA9IHQubGVuZ3RoOyBpID4gcjsgcisrKSBuID0gdFtyXSwgbmVbbl0gPSBuZVtuXSB8fCBbXSwgbmVbbl0udW5zaGlmdChlKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcHJlZmlsdGVyOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPyBlZS51bnNoaWZ0KHQpIDogZWUucHVzaCh0KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLCBaLnNwZWVkID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciByID0gdCAmJiAib2JqZWN0IiA9PSB0eXBlb2YgdCA/IFouZXh0ZW5kKHt9LCB0KSA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IG4gfHwgIW4gJiYgZSB8fCBaLmlzRnVuY3Rpb24odCkgJiYgdCwKICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogbiAmJiBlIHx8IGUgJiYgIVouaXNGdW5jdGlvbihlKSAmJiBlCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5kdXJhdGlvbiA9IFouZngub2ZmID8gMCA6ICJudW1iZXIiID09IHR5cGVvZiByLmR1cmF0aW9uID8gci5kdXJhdGlvbiA6IHIuZHVyYXRpb24gaW4gWi5meC5zcGVlZHMgPyBaLmZ4LnNwZWVkc1tyLmR1cmF0aW9uXSA6IFouZnguc3BlZWRzLl9kZWZhdWx0LCAobnVsbCA9PSByLnF1ZXVlIHx8IHIucXVldWUgPT09ICEwKSAmJiAoci5xdWV1ZSA9ICJmeCIpLCByLm9sZCA9IHIuY29tcGxldGUsIHIuY29tcGxldGUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgWi5pc0Z1bmN0aW9uKHIub2xkKSAmJiByLm9sZC5jYWxsKHRoaXMpLCByLnF1ZXVlICYmIFouZGVxdWV1ZSh0aGlzLCByLnF1ZXVlKQogICAgICAgICAgICAgICAgICAgIH0sIHIKICAgICAgICAgICAgICAgIH0sIFouZm4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICBmYWRlVG86IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKGt0KS5jc3MoIm9wYWNpdHkiLCAwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQsIG4sIHIpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBhbmltYXRlOiBmdW5jdGlvbih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gWi5pc0VtcHR5T2JqZWN0KHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFouc3BlZWQoZSwgbiwgciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBMKHRoaXMsIFouZXh0ZW5kKHt9LCB0KSwgbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgfHwgeXQuZ2V0KHRoaXMsICJmaW5pc2giKSkgJiYgZS5zdG9wKCEwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZmluaXNoID0gYSwgaSB8fCBvLnF1ZXVlID09PSAhMSA/IHRoaXMuZWFjaChhKSA6IHRoaXMucXVldWUoby5xdWV1ZSwgYSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQuc3RvcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0LnN0b3AsIGUobikKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJzdHJpbmciICE9IHR5cGVvZiB0ICYmIChuID0gZSwgZSA9IHQsIHQgPSB2b2lkIDApLCBlICYmIHQgIT09ICExICYmIHRoaXMucXVldWUodCB8fCAiZngiLCBbXSksIHRoaXMuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG51bGwgIT0gdCAmJiB0ICsgInF1ZXVlSG9va3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBaLnRpbWVycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0geXQuZ2V0KHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkpIGFbaV0gJiYgYVtpXS5zdG9wICYmIHIoYVtpXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpIGluIGEpIGFbaV0gJiYgYVtpXS5zdG9wICYmIHRlLnRlc3QoaSkgJiYgcihhW2ldKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IG8ubGVuZ3RoOyBpLS07KSBvW2ldLmVsZW0gIT09IHRoaXMgfHwgbnVsbCAhPSB0ICYmIG9baV0ucXVldWUgIT09IHQgfHwgKG9baV0uYW5pbS5zdG9wKG4pLCBlID0gITEsIG8uc3BsaWNlKGksIDEpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlIHx8ICFuKSAmJiBaLmRlcXVldWUodGhpcywgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZpbmlzaDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCAhPT0gITEgJiYgKHQgPSB0IHx8ICJmeCIpLCB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSwgbiA9IHl0LmdldCh0aGlzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gblt0ICsgInF1ZXVlIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG5bdCArICJxdWV1ZUhvb2tzIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFoudGltZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSByID8gci5sZW5ndGggOiAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChuLmZpbmlzaCA9ICEwLCBaLnF1ZXVlKHRoaXMsIHQsIFtdKSwgaSAmJiBpLnN0b3AgJiYgaS5zdG9wLmNhbGwodGhpcywgITApLCBlID0gby5sZW5ndGg7IGUtLTspIG9bZV0uZWxlbSA9PT0gdGhpcyAmJiBvW2VdLnF1ZXVlID09PSB0ICYmIChvW2VdLmFuaW0uc3RvcCghMCksIG8uc3BsaWNlKGUsIDEpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZSA9IDA7IGEgPiBlOyBlKyspIHJbZV0gJiYgcltlXS5maW5pc2ggJiYgcltlXS5maW5pc2guY2FsbCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBuLmZpbmlzaAogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLCBaLmVhY2goWyJ0b2dnbGUiLCAic2hvdyIsICJoaWRlIl0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IFouZm5bZV07CiAgICAgICAgICAgICAgICAgICAgWi5mbltlXSA9IGZ1bmN0aW9uKHQsIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCB8fCAiYm9vbGVhbiIgPT0gdHlwZW9mIHQgPyBuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiB0aGlzLmFuaW1hdGUoTihlLCAhMCksIHQsIHIsIGkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSksIFouZWFjaCh7CiAgICAgICAgICAgICAgICAgICAgc2xpZGVEb3duOiBOKCJzaG93IiksCiAgICAgICAgICAgICAgICAgICAgc2xpZGVVcDogTigiaGlkZSIpLAogICAgICAgICAgICAgICAgICAgIHNsaWRlVG9nZ2xlOiBOKCJ0b2dnbGUiKSwKICAgICAgICAgICAgICAgICAgICBmYWRlSW46IHsKICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogInNob3ciCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBmYWRlT3V0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICJoaWRlIgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZmFkZVRvZ2dsZTogewogICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAidG9nZ2xlIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBaLmZuW3RdID0gZnVuY3Rpb24odCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbmltYXRlKGUsIHQsIG4sIHIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSksIFoudGltZXJzID0gW10sIFouZngudGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0LCBlID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IFoudGltZXJzOwogICAgICAgICAgICAgICAgICAgIGZvciAoWXQgPSBaLm5vdygpOyBlIDwgbi5sZW5ndGg7IGUrKykgdCA9IG5bZV0sIHQoKSB8fCBuW2VdICE9PSB0IHx8IG4uc3BsaWNlKGUtLSwgMSk7CiAgICAgICAgICAgICAgICAgICAgbi5sZW5ndGggfHwgWi5meC5zdG9wKCksIFl0ID0gdm9pZCAwCiAgICAgICAgICAgICAgICB9LCBaLmZ4LnRpbWVyID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIFoudGltZXJzLnB1c2godCksIHQoKSA/IFouZnguc3RhcnQoKSA6IFoudGltZXJzLnBvcCgpCiAgICAgICAgICAgICAgICB9LCBaLmZ4LmludGVydmFsID0gMTMsIFouZnguc3RhcnQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBRdCB8fCAoUXQgPSBzZXRJbnRlcnZhbChaLmZ4LnRpY2ssIFouZnguaW50ZXJ2YWwpKQogICAgICAgICAgICAgICAgfSwgWi5meC5zdG9wID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChRdCksIFF0ID0gbnVsbAogICAgICAgICAgICAgICAgfSwgWi5meC5zcGVlZHMgPSB7CiAgICAgICAgICAgICAgICAgICAgc2xvdzogNjAwLAogICAgICAgICAgICAgICAgICAgIGZhc3Q6IDIwMCwKICAgICAgICAgICAgICAgICAgICBfZGVmYXVsdDogNDAwCiAgICAgICAgICAgICAgICB9LCBaLmZuLmRlbGF5ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gWi5meCA/IFouZnguc3BlZWRzW3RdIHx8IHQgOiB0LCBlID0gZSB8fCAiZngiLCB0aGlzLnF1ZXVlKGUsIGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBzZXRUaW1lb3V0KGUsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICBuLnN0b3AgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChyKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IFEuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IFEuY3JlYXRlRWxlbWVudCgic2VsZWN0IiksCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmFwcGVuZENoaWxkKFEuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpOwogICAgICAgICAgICAgICAgICAgIHQudHlwZSA9ICJjaGVja2JveCIsIFkuY2hlY2tPbiA9ICIiICE9PSB0LnZhbHVlLCBZLm9wdFNlbGVjdGVkID0gbi5zZWxlY3RlZCwgZS5kaXNhYmxlZCA9ICEwLCBZLm9wdERpc2FibGVkID0gIW4uZGlzYWJsZWQsIHQgPSBRLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksIHQudmFsdWUgPSAidCIsIHQudHlwZSA9ICJyYWRpbyIsIFkucmFkaW9WYWx1ZSA9ICJ0IiA9PT0gdC52YWx1ZQogICAgICAgICAgICAgICAgfSgpOwogICAgICAgICAgICB2YXIgcmUsIGllLCBvZSA9IFouZXhwci5hdHRySGFuZGxlOwogICAgICAgICAgICBaLmZuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBhdHRyOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZ0KHRoaXMsIFouYXR0ciwgdCwgZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVtb3ZlQXR0cjogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFoucmVtb3ZlQXR0cih0aGlzLCB0KQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBhdHRyOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIsIGksIG8gPSB0Lm5vZGVUeXBlOwogICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIDMgIT09IG8gJiYgOCAhPT0gbyAmJiAyICE9PSBvKSByZXR1cm4gdHlwZW9mIHQuZ2V0QXR0cmlidXRlID09PSBFdCA/IFoucHJvcCh0LCBlLCBuKSA6ICgxID09PSBvICYmIFouaXNYTUxEb2ModCkgfHwgKGUgPSBlLnRvTG93ZXJDYXNlKCksIHIgPSBaLmF0dHJIb29rc1tlXSB8fCAoWi5leHByLm1hdGNoLmJvb2wudGVzdChlKSA/IGllIDogcmUpKSwgdm9pZCAwID09PSBuID8gciAmJiAiZ2V0IiBpbiByICYmIG51bGwgIT09IChpID0gci5nZXQodCwgZSkpID8gaSA6IChpID0gWi5maW5kLmF0dHIodCwgZSksIG51bGwgPT0gaSA/IHZvaWQgMCA6IGkpIDogbnVsbCAhPT0gbiA/IHIgJiYgInNldCIgaW4gciAmJiB2b2lkIDAgIT09IChpID0gci5zZXQodCwgbiwgZSkpID8gaSA6ICh0LnNldEF0dHJpYnV0ZShlLCBuICsgIiIpLCBuKSA6IHZvaWQgWi5yZW1vdmVBdHRyKHQsIGUpKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlbW92ZUF0dHI6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgaSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlICYmIGUubWF0Y2goaHQpOwogICAgICAgICAgICAgICAgICAgIGlmIChvICYmIDEgPT09IHQubm9kZVR5cGUpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBuID0gb1tpKytdOykgciA9IFoucHJvcEZpeFtuXSB8fCBuLCBaLmV4cHIubWF0Y2guYm9vbC50ZXN0KG4pICYmICh0W3JdID0gITEpLCB0LnJlbW92ZUF0dHJpYnV0ZShuKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGF0dHJIb29rczogewogICAgICAgICAgICAgICAgICAgIHR5cGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVkucmFkaW9WYWx1ZSAmJiAicmFkaW8iID09PSBlICYmIFoubm9kZU5hbWUodCwgImlucHV0IikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgZSksIG4gJiYgKHQudmFsdWUgPSBuKSwgZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgaWUgPSB7CiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9PT0gITEgPyBaLnJlbW92ZUF0dHIodCwgbikgOiB0LnNldEF0dHJpYnV0ZShuLCBuKSwgbgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBaLmVhY2goWi5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cdysvZyksIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gb2VbZV0gfHwgWi5maW5kLmF0dHI7CiAgICAgICAgICAgICAgICBvZVtlXSA9IGZ1bmN0aW9uKHQsIGUsIHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSwgbzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciB8fCAobyA9IG9lW2VdLCBvZVtlXSA9IGksIGkgPSBudWxsICE9IG4odCwgZSwgcikgPyBlLnRvTG93ZXJDYXNlKCkgOiBudWxsLCBvZVtlXSA9IG8pLCBpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgYWUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pOwogICAgICAgICAgICBaLmZuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBwcm9wOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZ0KHRoaXMsIFoucHJvcCwgdCwgZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVtb3ZlUHJvcDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzW1oucHJvcEZpeFt0XSB8fCB0XQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBwcm9wRml4OiB7CiAgICAgICAgICAgICAgICAgICAgImZvciI6ICJodG1sRm9yIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MiOiAiY2xhc3NOYW1lIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHByb3A6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciwgaSwgbywgYSA9IHQubm9kZVR5cGU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgMyAhPT0gYSAmJiA4ICE9PSBhICYmIDIgIT09IGEpIHJldHVybiBvID0gMSAhPT0gYSB8fCAhWi5pc1hNTERvYyh0KSwgbyAmJiAoZSA9IFoucHJvcEZpeFtlXSB8fCBlLCBpID0gWi5wcm9wSG9va3NbZV0pLCB2b2lkIDAgIT09IG4gPyBpICYmICJzZXQiIGluIGkgJiYgdm9pZCAwICE9PSAociA9IGkuc2V0KHQsIG4sIGUpKSA/IHIgOiB0W2VdID0gbiA6IGkgJiYgImdldCIgaW4gaSAmJiBudWxsICE9PSAociA9IGkuZ2V0KHQsIGUpKSA/IHIgOiB0W2VdCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcHJvcEhvb2tzOiB7CiAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5oYXNBdHRyaWJ1dGUoInRhYmluZGV4IikgfHwgYWUudGVzdCh0Lm5vZGVOYW1lKSB8fCB0LmhyZWYgPyB0LnRhYkluZGV4IDogLTEKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFkub3B0U2VsZWN0ZWQgfHwgKFoucHJvcEhvb2tzLnNlbGVjdGVkID0gewogICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0LnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgJiYgZS5wYXJlbnROb2RlICYmIGUucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LCBudWxsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmVhY2goWyJ0YWJJbmRleCIsICJyZWFkT25seSIsICJtYXhMZW5ndGgiLCAiY2VsbFNwYWNpbmciLCAiY2VsbFBhZGRpbmciLCAicm93U3BhbiIsICJjb2xTcGFuIiwgInVzZU1hcCIsICJmcmFtZUJvcmRlciIsICJjb250ZW50RWRpdGFibGUiXSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBaLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXSA9IHRoaXMKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBzZSA9IC9bXHRcclxuXGZdL2c7CiAgICAgICAgICAgIFouZm4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgIGFkZENsYXNzOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG4sIHIsIGksIG8sIGEsIHMgPSAic3RyaW5nIiA9PSB0eXBlb2YgdCAmJiB0LAogICAgICAgICAgICAgICAgICAgICAgICB1ID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHRoaXMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIGlmIChaLmlzRnVuY3Rpb24odCkpIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBaKHRoaXMpLmFkZENsYXNzKHQuY2FsbCh0aGlzLCBlLCB0aGlzLmNsYXNzTmFtZSkpCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHMpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZSA9ICh0IHx8ICIiKS5tYXRjaChodCkgfHwgW107IGMgPiB1OyB1KyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IHRoaXNbdV0sIHIgPSAxID09PSBuLm5vZGVUeXBlICYmIChuLmNsYXNzTmFtZSA/ICgiICIgKyBuLmNsYXNzTmFtZSArICIgIikucmVwbGFjZShzZSwgIiAiKSA6ICIgIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG8gPSAwOyBpID0gZVtvKytdOykgci5pbmRleE9mKCIgIiArIGkgKyAiICIpIDwgMCAmJiAociArPSBpICsgIiAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gWi50cmltKHIpLCBuLmNsYXNzTmFtZSAhPT0gYSAmJiAobi5jbGFzc05hbWUgPSBhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSwgbiwgciwgaSwgbywgYSwgcyA9IDAgPT09IGFyZ3VtZW50cy5sZW5ndGggfHwgInN0cmluZyIgPT0gdHlwZW9mIHQgJiYgdCwKICAgICAgICAgICAgICAgICAgICAgICAgdSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB0aGlzLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICBpZiAoWi5pc0Z1bmN0aW9uKHQpKSByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgWih0aGlzKS5yZW1vdmVDbGFzcyh0LmNhbGwodGhpcywgZSwgdGhpcy5jbGFzc05hbWUpKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGlmIChzKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSAodCB8fCAiIikubWF0Y2goaHQpIHx8IFtdOyBjID4gdTsgdSsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPSB0aGlzW3VdLCByID0gMSA9PT0gbi5ub2RlVHlwZSAmJiAobi5jbGFzc05hbWUgPyAoIiAiICsgbi5jbGFzc05hbWUgKyAiICIpLnJlcGxhY2Uoc2UsICIgIikgOiAiIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG8gPSAwOyBpID0gZVtvKytdOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IHIuaW5kZXhPZigiICIgKyBpICsgIiAiKSA+PSAwOykgciA9IHIucmVwbGFjZSgiICIgKyBpICsgIiAiLCAiICIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0ID8gWi50cmltKHIpIDogIiIsIG4uY2xhc3NOYW1lICE9PSBhICYmIChuLmNsYXNzTmFtZSA9IGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0b2dnbGVDbGFzczogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gdHlwZW9mIHQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJib29sZWFuIiA9PSB0eXBlb2YgZSAmJiAic3RyaW5nIiA9PT0gbiA/IGUgPyB0aGlzLmFkZENsYXNzKHQpIDogdGhpcy5yZW1vdmVDbGFzcyh0KSA6IFouaXNGdW5jdGlvbih0KSA/IHRoaXMuZWFjaChmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFoodGhpcykudG9nZ2xlQ2xhc3ModC5jYWxsKHRoaXMsIG4sIHRoaXMuY2xhc3NOYW1lLCBlKSwgZSkKICAgICAgICAgICAgICAgICAgICB9KSA6IHRoaXMuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJzdHJpbmciID09PSBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSwgciA9IDAsIGkgPSBaKHRoaXMpLCBvID0gdC5tYXRjaChodCkgfHwgW107IGUgPSBvW3IrK107KSBpLmhhc0NsYXNzKGUpID8gaS5yZW1vdmVDbGFzcyhlKSA6IGkuYWRkQ2xhc3MoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UobiA9PT0gRXQgfHwgImJvb2xlYW4iID09PSBuKSAmJiAodGhpcy5jbGFzc05hbWUgJiYgeXQuc2V0KHRoaXMsICJfX2NsYXNzTmFtZV9fIiwgdGhpcy5jbGFzc05hbWUpLCB0aGlzLmNsYXNzTmFtZSA9IHRoaXMuY2xhc3NOYW1lIHx8IHQgPT09ICExID8gIiIgOiB5dC5nZXQodGhpcywgIl9fY2xhc3NOYW1lX18iKSB8fCAiIikKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGhhc0NsYXNzOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9ICIgIiArIHQgKyAiICIsIG4gPSAwLCByID0gdGhpcy5sZW5ndGg7IHIgPiBuOyBuKyspCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxID09PSB0aGlzW25dLm5vZGVUeXBlICYmICgiICIgKyB0aGlzW25dLmNsYXNzTmFtZSArICIgIikucmVwbGFjZShzZSwgIiAiKS5pbmRleE9mKGUpID49IDApIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciB1ZSA9IC9cci9nOwogICAgICAgICAgICBaLmZuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICB2YWw6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSwgbiwgciwgaSA9IHRoaXNbMF07IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiByID0gWi5pc0Z1bmN0aW9uKHQpLCB0aGlzLmVhY2goZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxID09PSB0aGlzLm5vZGVUeXBlICYmIChpID0gciA/IHQuY2FsbCh0aGlzLCBuLCBaKHRoaXMpLnZhbCgpKSA6IHQsIG51bGwgPT0gaSA/IGkgPSAiIiA6ICJudW1iZXIiID09IHR5cGVvZiBpID8gaSArPSAiIiA6IFouaXNBcnJheShpKSAmJiAoaSA9IFoubWFwKGksIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0ID8gIiIgOiB0ICsgIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgZSA9IFoudmFsSG9va3NbdGhpcy50eXBlXSB8fCBaLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sIGUgJiYgInNldCIgaW4gZSAmJiB2b2lkIDAgIT09IGUuc2V0KHRoaXMsIGksICJ2YWx1ZSIpIHx8ICh0aGlzLnZhbHVlID0gaSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSkgcmV0dXJuIGUgPSBaLnZhbEhvb2tzW2kudHlwZV0gfHwgWi52YWxIb29rc1tpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLCBlICYmICJnZXQiIGluIGUgJiYgdm9pZCAwICE9PSAobiA9IGUuZ2V0KGksICJ2YWx1ZSIpKSA/IG4gOiAobiA9IGkudmFsdWUsICJzdHJpbmciID09IHR5cGVvZiBuID8gbi5yZXBsYWNlKHVlLCAiIikgOiBudWxsID09IG4gPyAiIiA6IG4pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5leHRlbmQoewogICAgICAgICAgICAgICAgdmFsSG9va3M6IHsKICAgICAgICAgICAgICAgICAgICBvcHRpb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IFouZmluZC5hdHRyKHQsICJ2YWx1ZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gZSA/IGUgOiBaLnRyaW0oWi50ZXh0KHQpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzZWxlY3Q6IHsKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlLCBuLCByID0gdC5vcHRpb25zLCBpID0gdC5zZWxlY3RlZEluZGV4LCBvID0gInNlbGVjdC1vbmUiID09PSB0LnR5cGUgfHwgMCA+IGksIGEgPSBvID8gbnVsbCA6IFtdLCBzID0gbyA/IGkgKyAxIDogci5sZW5ndGgsIHUgPSAwID4gaSA/IHMgOiBvID8gaSA6IDA7IHMgPiB1OyB1KyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPSByW3VdLCAobi5zZWxlY3RlZCB8fCB1ID09PSBpKSAmJiAoWS5vcHREaXNhYmxlZCA/ICFuLmRpc2FibGVkIDogbnVsbCA9PT0gbi5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpICYmICghbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8ICFaLm5vZGVOYW1lKG4ucGFyZW50Tm9kZSwgIm9wdGdyb3VwIikpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlID0gWihuKS52YWwoKSwgbykgcmV0dXJuIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucHVzaChlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiwgciwgaSA9IHQub3B0aW9ucywgbyA9IFoubWFrZUFycmF5KGUpLCBhID0gaS5sZW5ndGg7IGEtLTspIHIgPSBpW2FdLCAoci5zZWxlY3RlZCA9IFouaW5BcnJheShyLnZhbHVlLCBvKSA+PSAwKSAmJiAobiA9ICEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuIHx8ICh0LnNlbGVjdGVkSW5kZXggPSAtMSksIG8KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZWFjaChbInJhZGlvIiwgImNoZWNrYm94Il0sIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgWi52YWxIb29rc1t0aGlzXSA9IHsKICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouaXNBcnJheShlKSA/IHQuY2hlY2tlZCA9IFouaW5BcnJheShaKHQpLnZhbCgpLCBlKSA+PSAwIDogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgWS5jaGVja09uIHx8IChaLnZhbEhvb2tzW3RoaXNdLmdldCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PT0gdC5nZXRBdHRyaWJ1dGUoInZhbHVlIikgPyAib24iIDogdC52YWx1ZQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSksIFouZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgWi5mbltlXSA9IGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDAgPyB0aGlzLm9uKGUsIG51bGwsIHQsIG4pIDogdGhpcy50cmlnZ2VyKGUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmZuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBob3ZlcjogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1vdXNlZW50ZXIodCkubW91c2VsZWF2ZShlIHx8IHQpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYmluZDogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9uKHQsIG51bGwsIGUsIG4pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdW5iaW5kOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub2ZmKHQsIG51bGwsIGUpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZGVsZWdhdGU6IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vbihlLCB0LCBuLCByKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHVuZGVsZWdhdGU6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSA9PT0gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMub2ZmKHQsICIqKiIpIDogdGhpcy5vZmYoZSwgdCB8fCAiKioiLCBuKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIGNlID0gWi5ub3coKSwKICAgICAgICAgICAgICAgIGxlID0gL1w/LzsKICAgICAgICAgICAgWi5wYXJzZUpTT04gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh0ICsgIiIpCiAgICAgICAgICAgIH0sIFoucGFyc2VYTUwgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSwgbjsKICAgICAgICAgICAgICAgIGlmICghdCB8fCAic3RyaW5nIiAhPSB0eXBlb2YgdCkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIG4gPSBuZXcgRE9NUGFyc2VyLCBlID0gbi5wYXJzZUZyb21TdHJpbmcodCwgInRleHQveG1sIikKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHsKICAgICAgICAgICAgICAgICAgICBlID0gdm9pZCAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gKCFlIHx8IGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoKSAmJiBaLmVycm9yKCJJbnZhbGlkIFhNTDogIiArIHQpLCBlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBmZSA9IC8jLiokLywKICAgICAgICAgICAgICAgIHBlID0gLyhbPyZdKV89W14mXSovLAogICAgICAgICAgICAgICAgaGUgPSAvXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLAogICAgICAgICAgICAgICAgZGUgPSAvXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLywKICAgICAgICAgICAgICAgIGdlID0gL14oPzpHRVR8SEVBRCkkLywKICAgICAgICAgICAgICAgIHZlID0gL15cL1wvLywKICAgICAgICAgICAgICAgIHllID0gL14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sCiAgICAgICAgICAgICAgICBtZSA9IHt9LAogICAgICAgICAgICAgICAgYmUgPSB7fSwKICAgICAgICAgICAgICAgIHhlID0gIiovIi5jb25jYXQoIioiKSwKICAgICAgICAgICAgICAgIHdlID0gdC5sb2NhdGlvbi5ocmVmLAogICAgICAgICAgICAgICAgX2UgPSB5ZS5leGVjKHdlLnRvTG93ZXJDYXNlKCkpIHx8IFtdOwogICAgICAgICAgICBaLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBhY3RpdmU6IDAsCiAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IHt9LAogICAgICAgICAgICAgICAgZXRhZzoge30sCiAgICAgICAgICAgICAgICBhamF4U2V0dGluZ3M6IHsKICAgICAgICAgICAgICAgICAgICB1cmw6IHdlLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIGlzTG9jYWw6IGRlLnRlc3QoX2VbMV0pLAogICAgICAgICAgICAgICAgICAgIGdsb2JhbDogITAsCiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0RhdGE6ICEwLAogICAgICAgICAgICAgICAgICAgIGFzeW5jOiAhMCwKICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsCiAgICAgICAgICAgICAgICAgICAgYWNjZXB0czogewogICAgICAgICAgICAgICAgICAgICAgICAiKiI6IHhlLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAidGV4dC9wbGFpbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6ICJ0ZXh0L2h0bWwiLAogICAgICAgICAgICAgICAgICAgICAgICB4bWw6ICJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIiwKICAgICAgICAgICAgICAgICAgICAgICAganNvbjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbDogL3htbC8sCiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6IC9odG1sLywKICAgICAgICAgICAgICAgICAgICAgICAganNvbjogL2pzb24vCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNwb25zZUZpZWxkczogewogICAgICAgICAgICAgICAgICAgICAgICB4bWw6ICJyZXNwb25zZVhNTCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICJyZXNwb25zZVRleHQiLAogICAgICAgICAgICAgICAgICAgICAgICBqc29uOiAicmVzcG9uc2VKU09OIgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgY29udmVydGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAiKiB0ZXh0IjogU3RyaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAidGV4dCBodG1sIjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICJ0ZXh0IGpzb24iOiBaLnBhcnNlSlNPTiwKICAgICAgICAgICAgICAgICAgICAgICAgInRleHQgeG1sIjogWi5wYXJzZVhNTAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZmxhdE9wdGlvbnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogITAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYWpheFNldHVwOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPyAkKCQodCwgWi5hamF4U2V0dGluZ3MpLCBlKSA6ICQoWi5hamF4U2V0dGluZ3MsIHQpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYWpheFByZWZpbHRlcjogRChtZSksCiAgICAgICAgICAgICAgICBhamF4VHJhbnNwb3J0OiBEKGJlKSwKICAgICAgICAgICAgICAgIGFqYXg6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBuKHQsIGUsIG4sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUsIGwsIHksIG0sIHgsIF8gPSBlOwogICAgICAgICAgICAgICAgICAgICAgICAyICE9PSBiICYmIChiID0gMiwgcyAmJiBjbGVhclRpbWVvdXQocyksIHIgPSB2b2lkIDAsIG8gPSBhIHx8ICIiLCB3LnJlYWR5U3RhdGUgPSB0ID4gMCA/IDQgOiAwLCB1ID0gdCA+PSAyMDAgJiYgMzAwID4gdCB8fCAzMDQgPT09IHQsIG4gJiYgKG0gPSBxKGYsIHcsIG4pKSwgbSA9IEgoZiwgbSwgdywgdSksIHUgPyAoZi5pZk1vZGlmaWVkICYmICh4ID0gdy5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLCB4ICYmIChaLmxhc3RNb2RpZmllZFtpXSA9IHgpLCB4ID0gdy5nZXRSZXNwb25zZUhlYWRlcigiZXRhZyIpLCB4ICYmIChaLmV0YWdbaV0gPSB4KSksIDIwNCA9PT0gdCB8fCAiSEVBRCIgPT09IGYudHlwZSA/IF8gPSAibm9jb250ZW50IiA6IDMwNCA9PT0gdCA/IF8gPSAibm90bW9kaWZpZWQiIDogKF8gPSBtLnN0YXRlLCBsID0gbS5kYXRhLCB5ID0gbS5lcnJvciwgdSA9ICF5KSkgOiAoeSA9IF8sICh0IHx8ICFfKSAmJiAoXyA9ICJlcnJvciIsIDAgPiB0ICYmICh0ID0gMCkpKSwgdy5zdGF0dXMgPSB0LCB3LnN0YXR1c1RleHQgPSAoZSB8fCBfKSArICIiLCB1ID8gZC5yZXNvbHZlV2l0aChwLCBbbCwgXywgd10pIDogZC5yZWplY3RXaXRoKHAsIFt3LCBfLCB5XSksIHcuc3RhdHVzQ29kZSh2KSwgdiA9IHZvaWQgMCwgYyAmJiBoLnRyaWdnZXIodSA/ICJhamF4U3VjY2VzcyIgOiAiYWpheEVycm9yIiwgW3csIGYsIHUgPyBsIDogeV0pLCBnLmZpcmVXaXRoKHAsIFt3LCBfXSksIGMgJiYgKGgudHJpZ2dlcigiYWpheENvbXBsZXRlIiwgW3csIGZdKSwgLS1aLmFjdGl2ZSB8fCBaLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIikpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAib2JqZWN0IiA9PSB0eXBlb2YgdCAmJiAoZSA9IHQsIHQgPSB2b2lkIDApLCBlID0gZSB8fCB7fTsKICAgICAgICAgICAgICAgICAgICB2YXIgciwgaSwgbywgYSwgcywgdSwgYywgbCwgZiA9IFouYWpheFNldHVwKHt9LCBlKSwKICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGYuY29udGV4dCB8fCBmLAogICAgICAgICAgICAgICAgICAgICAgICBoID0gZi5jb250ZXh0ICYmIChwLm5vZGVUeXBlIHx8IHAuanF1ZXJ5KSA/IFoocCkgOiBaLmV2ZW50LAogICAgICAgICAgICAgICAgICAgICAgICBkID0gWi5EZWZlcnJlZCgpLAogICAgICAgICAgICAgICAgICAgICAgICBnID0gWi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksCiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBmLnN0YXR1c0NvZGUgfHwge30sCiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgbSA9IHt9LAogICAgICAgICAgICAgICAgICAgICAgICBiID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgeCA9ICJjYW5jZWxlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHcgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeVN0YXRlOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMiA9PT0gYikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGEgPSB7fTsgZSA9IGhlLmV4ZWMobyk7KSBhW2VbMV0udG9Mb3dlckNhc2UoKV0gPSBlWzJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gYVt0LnRvTG93ZXJDYXNlKCldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IGUgPyBudWxsIDogZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDIgPT09IGIgPyBvIDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlcXVlc3RIZWFkZXI6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYiB8fCAodCA9IG1bbl0gPSBtW25dIHx8IHQsIHlbdF0gPSBlKSwgdGhpcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYiB8fCAoZi5taW1lVHlwZSA9IHQpLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMiA+IGIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgaW4gdCkgdltlXSA9IFt2W2VdLCB0W2VdXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB3LmFsd2F5cyh0W3cuc3RhdHVzXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdCB8fCB4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByICYmIHIuYWJvcnQoZSksIG4oMCwgZSksIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpZiAoZC5wcm9taXNlKHcpLmNvbXBsZXRlID0gZy5hZGQsIHcuc3VjY2VzcyA9IHcuZG9uZSwgdy5lcnJvciA9IHcuZmFpbCwgZi51cmwgPSAoKHQgfHwgZi51cmwgfHwgd2UpICsgIiIpLnJlcGxhY2UoZmUsICIiKS5yZXBsYWNlKHZlLCBfZVsxXSArICIvLyIpLCBmLnR5cGUgPSBlLm1ldGhvZCB8fCBlLnR5cGUgfHwgZi5tZXRob2QgfHwgZi50eXBlLCBmLmRhdGFUeXBlcyA9IFoudHJpbShmLmRhdGFUeXBlIHx8ICIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChodCkgfHwgWyIiXSwgbnVsbCA9PSBmLmNyb3NzRG9tYWluICYmICh1ID0geWUuZXhlYyhmLnVybC50b0xvd2VyQ2FzZSgpKSwgZi5jcm9zc0RvbWFpbiA9ICEoIXUgfHwgdVsxXSA9PT0gX2VbMV0gJiYgdVsyXSA9PT0gX2VbMl0gJiYgKHVbM10gfHwgKCJodHRwOiIgPT09IHVbMV0gPyAiODAiIDogIjQ0MyIpKSA9PT0gKF9lWzNdIHx8ICgiaHR0cDoiID09PSBfZVsxXSA/ICI4MCIgOiAiNDQzIikpKSksIGYuZGF0YSAmJiBmLnByb2Nlc3NEYXRhICYmICJzdHJpbmciICE9IHR5cGVvZiBmLmRhdGEgJiYgKGYuZGF0YSA9IFoucGFyYW0oZi5kYXRhLCBmLnRyYWRpdGlvbmFsKSksIFAobWUsIGYsIGUsIHcpLCAyID09PSBiKSByZXR1cm4gdzsKICAgICAgICAgICAgICAgICAgICBjID0gWi5ldmVudCAmJiBmLmdsb2JhbCwgYyAmJiAwID09PSBaLmFjdGl2ZSsrICYmIFouZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0IiksIGYudHlwZSA9IGYudHlwZS50b1VwcGVyQ2FzZSgpLCBmLmhhc0NvbnRlbnQgPSAhZ2UudGVzdChmLnR5cGUpLCBpID0gZi51cmwsIGYuaGFzQ29udGVudCB8fCAoZi5kYXRhICYmIChpID0gZi51cmwgKz0gKGxlLnRlc3QoaSkgPyAiJiIgOiAiPyIpICsgZi5kYXRhLCBkZWxldGUgZi5kYXRhKSwgZi5jYWNoZSA9PT0gITEgJiYgKGYudXJsID0gcGUudGVzdChpKSA/IGkucmVwbGFjZShwZSwgIiQxXz0iICsgY2UrKykgOiBpICsgKGxlLnRlc3QoaSkgPyAiJiIgOiAiPyIpICsgIl89IiArIGNlKyspKSwgZi5pZk1vZGlmaWVkICYmIChaLmxhc3RNb2RpZmllZFtpXSAmJiB3LnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIiwgWi5sYXN0TW9kaWZpZWRbaV0pLCBaLmV0YWdbaV0gJiYgdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIiwgWi5ldGFnW2ldKSksIChmLmRhdGEgJiYgZi5oYXNDb250ZW50ICYmIGYuY29udGVudFR5cGUgIT09ICExIHx8IGUuY29udGVudFR5cGUpICYmIHcuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgZi5jb250ZW50VHlwZSksIHcuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IiwgZi5kYXRhVHlwZXNbMF0gJiYgZi5hY2NlcHRzW2YuZGF0YVR5cGVzWzBdXSA/IGYuYWNjZXB0c1tmLmRhdGFUeXBlc1swXV0gKyAoIioiICE9PSBmLmRhdGFUeXBlc1swXSA/ICIsICIgKyB4ZSArICI7IHE9MC4wMSIgOiAiIikgOiBmLmFjY2VwdHNbIioiXSk7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsIGluIGYuaGVhZGVycykgdy5zZXRSZXF1ZXN0SGVhZGVyKGwsIGYuaGVhZGVyc1tsXSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGYuYmVmb3JlU2VuZCAmJiAoZi5iZWZvcmVTZW5kLmNhbGwocCwgdywgZikgPT09ICExIHx8IDIgPT09IGIpKSByZXR1cm4gdy5hYm9ydCgpOwogICAgICAgICAgICAgICAgICAgIHggPSAiYWJvcnQiOwogICAgICAgICAgICAgICAgICAgIGZvciAobCBpbiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogMQogICAgICAgICAgICAgICAgICAgICAgICB9KSB3W2xdKGZbbF0pOwogICAgICAgICAgICAgICAgICAgIGlmIChyID0gUChiZSwgZiwgZSwgdykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdy5yZWFkeVN0YXRlID0gMSwgYyAmJiBoLnRyaWdnZXIoImFqYXhTZW5kIiwgW3csIGZdKSwgZi5hc3luYyAmJiBmLnRpbWVvdXQgPiAwICYmIChzID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcuYWJvcnQoInRpbWVvdXQiKQogICAgICAgICAgICAgICAgICAgICAgICB9LCBmLnRpbWVvdXQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSAxLCByLnNlbmQoeSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoXykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoMiA+IGIpKSB0aHJvdyBfOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbigtMSwgXykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBuKC0xLCAiTm8gVHJhbnNwb3J0Iik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBnZXRKU09OOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouZ2V0KHQsIGUsIG4sICJqc29uIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBnZXRTY3JpcHQ6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWi5nZXQodCwgdm9pZCAwLCBlLCAic2NyaXB0IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZWFjaChbImdldCIsICJwb3N0Il0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIFpbZV0gPSBmdW5jdGlvbih0LCBuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouaXNGdW5jdGlvbihuKSAmJiAoaSA9IGkgfHwgciwgciA9IG4sIG4gPSB2b2lkIDApLCBaLmFqYXgoewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBpLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBuLAogICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiByCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouX2V2YWxVcmwgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gWi5hamF4KHsKICAgICAgICAgICAgICAgICAgICB1cmw6IHQsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogIkdFVCIsCiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICJzY3JpcHQiLAogICAgICAgICAgICAgICAgICAgIGFzeW5jOiAhMSwKICAgICAgICAgICAgICAgICAgICBnbG9iYWw6ICExLAogICAgICAgICAgICAgICAgICAgICJ0aHJvd3MiOiAhMAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwgWi5mbi5leHRlbmQoewogICAgICAgICAgICAgICAgd3JhcEFsbDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBaLmlzRnVuY3Rpb24odCkgPyB0aGlzLmVhY2goZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBaKHRoaXMpLndyYXBBbGwodC5jYWxsKHRoaXMsIGUpKQogICAgICAgICAgICAgICAgICAgIH0pIDogKHRoaXNbMF0gJiYgKGUgPSBaKHQsIHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLCB0aGlzWzBdLnBhcmVudE5vZGUgJiYgZS5pbnNlcnRCZWZvcmUodGhpc1swXSksIGUubWFwKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gdGhpczsgdC5maXJzdEVsZW1lbnRDaGlsZDspIHQgPSB0LmZpcnN0RWxlbWVudENoaWxkOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0pLmFwcGVuZCh0aGlzKSksIHRoaXMpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgd3JhcElubmVyOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouaXNGdW5jdGlvbih0KSA/IHRoaXMuZWFjaChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFoodGhpcykud3JhcElubmVyKHQuY2FsbCh0aGlzLCBlKSkKICAgICAgICAgICAgICAgICAgICB9KSA6IHRoaXMuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBaKHRoaXMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuY29udGVudHMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgbi5sZW5ndGggPyBuLndyYXBBbGwodCkgOiBlLmFwcGVuZCh0KQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgd3JhcDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gWi5pc0Z1bmN0aW9uKHQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICBaKHRoaXMpLndyYXBBbGwoZSA/IHQuY2FsbCh0aGlzLCBuKSA6IHQpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB1bndyYXA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFoubm9kZU5hbWUodGhpcywgImJvZHkiKSB8fCBaKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2RlcykKICAgICAgICAgICAgICAgICAgICB9KS5lbmQoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5leHByLmZpbHRlcnMuaGlkZGVuID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQub2Zmc2V0V2lkdGggPD0gMCAmJiB0Lm9mZnNldEhlaWdodCA8PSAwCiAgICAgICAgICAgIH0sIFouZXhwci5maWx0ZXJzLnZpc2libGUgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIVouZXhwci5maWx0ZXJzLmhpZGRlbih0KQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIga2UgPSAvJTIwL2csCiAgICAgICAgICAgICAgICBUZSA9IC9cW1xdJC8sCiAgICAgICAgICAgICAgICBFZSA9IC9ccj9cbi9nLAogICAgICAgICAgICAgICAgamUgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksCiAgICAgICAgICAgICAgICBDZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTsKICAgICAgICAgICAgWi5wYXJhbSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuLCByID0gW10sCiAgICAgICAgICAgICAgICAgICAgaSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IFouaXNGdW5jdGlvbihlKSA/IGUoKSA6IG51bGwgPT0gZSA/ICIiIDogZSwgcltyLmxlbmd0aF0gPSBlbmNvZGVVUklDb21wb25lbnQodCkgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZSkKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSAmJiAoZSA9IFouYWpheFNldHRpbmdzICYmIFouYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKSwgWi5pc0FycmF5KHQpIHx8IHQuanF1ZXJ5ICYmICFaLmlzUGxhaW5PYmplY3QodCkpIFouZWFjaCh0LCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpKHRoaXMubmFtZSwgdGhpcy52YWx1ZSkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGZvciAobiBpbiB0KSBNKG4sIHRbbl0sIGUsIGkpOwogICAgICAgICAgICAgICAgcmV0dXJuIHIuam9pbigiJiIpLnJlcGxhY2Uoa2UsICIrIikKICAgICAgICAgICAgfSwgWi5mbi5leHRlbmQoewogICAgICAgICAgICAgICAgc2VyaWFsaXplOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWi5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2VyaWFsaXplQXJyYXk6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBaLnByb3AodGhpcywgImVsZW1lbnRzIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID8gWi5tYWtlQXJyYXkodCkgOiB0aGlzCiAgICAgICAgICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMudHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmFtZSAmJiAhWih0aGlzKS5pcygiOmRpc2FibGVkIikgJiYgQ2UudGVzdCh0aGlzLm5vZGVOYW1lKSAmJiAhamUudGVzdCh0KSAmJiAodGhpcy5jaGVja2VkIHx8ICFUdC50ZXN0KHQpKQogICAgICAgICAgICAgICAgICAgIH0pLm1hcChmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gWih0aGlzKS52YWwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiBaLmlzQXJyYXkobikgPyBaLm1hcChuLCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC5yZXBsYWNlKEVlLCAiXHJcbiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pIDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG4ucmVwbGFjZShFZSwgIlxyXG4iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuZ2V0KCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouYWpheFNldHRpbmdzLnhociA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0CiAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7fQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgU2UgPSAwLAogICAgICAgICAgICAgICAgQWUgPSB7fSwKICAgICAgICAgICAgICAgIE5lID0gewogICAgICAgICAgICAgICAgICAgIDA6IDIwMCwKICAgICAgICAgICAgICAgICAgICAxMjIzOiAyMDQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBSZSA9IFouYWpheFNldHRpbmdzLnhocigpOwogICAgICAgICAgICB0LmF0dGFjaEV2ZW50ICYmIHQuYXR0YWNoRXZlbnQoIm9udW5sb2FkIiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciB0IGluIEFlKSBBZVt0XSgpCiAgICAgICAgICAgIH0pLCBZLmNvcnMgPSAhIVJlICYmICJ3aXRoQ3JlZGVudGlhbHMiIGluIFJlLCBZLmFqYXggPSBSZSA9ICEhUmUsIFouYWpheFRyYW5zcG9ydChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgIHJldHVybiBZLmNvcnMgfHwgUmUgJiYgIXQuY3Jvc3NEb21haW4gPyB7CiAgICAgICAgICAgICAgICAgICAgc2VuZDogZnVuY3Rpb24obiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSwgbyA9IHQueGhyKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gKytTZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8ub3Blbih0LnR5cGUsIHQudXJsLCB0LmFzeW5jLCB0LnVzZXJuYW1lLCB0LnBhc3N3b3JkKSwgdC54aHJGaWVsZHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgaW4gdC54aHJGaWVsZHMpIG9baV0gPSB0LnhockZpZWxkc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgdC5taW1lVHlwZSAmJiBvLm92ZXJyaWRlTWltZVR5cGUgJiYgby5vdmVycmlkZU1pbWVUeXBlKHQubWltZVR5cGUpLCB0LmNyb3NzRG9tYWluIHx8IG5bIlgtUmVxdWVzdGVkLVdpdGgiXSB8fCAoblsiWC1SZXF1ZXN0ZWQtV2l0aCJdID0gIlhNTEh0dHBSZXF1ZXN0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSBpbiBuKSBvLnNldFJlcXVlc3RIZWFkZXIoaSwgbltpXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSAmJiAoZGVsZXRlIEFlW2FdLCBlID0gby5vbmxvYWQgPSBvLm9uZXJyb3IgPSBudWxsLCAiYWJvcnQiID09PSB0ID8gby5hYm9ydCgpIDogImVycm9yIiA9PT0gdCA/IHIoby5zdGF0dXMsIG8uc3RhdHVzVGV4dCkgOiByKE5lW28uc3RhdHVzXSB8fCBvLnN0YXR1cywgby5zdGF0dXNUZXh0LCAic3RyaW5nIiA9PSB0eXBlb2Ygby5yZXNwb25zZVRleHQgPyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG8ucmVzcG9uc2VUZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHZvaWQgMCwgby5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIG8ub25sb2FkID0gZSgpLCBvLm9uZXJyb3IgPSBlKCJlcnJvciIpLCBlID0gQWVbYV0gPSBlKCJhYm9ydCIpOwogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgby5zZW5kKHQuaGFzQ29udGVudCAmJiB0LmRhdGEgfHwgbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHRocm93IHMKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYWJvcnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBlICYmIGUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gOiB2b2lkIDAKICAgICAgICAgICAgfSksIFouYWpheFNldHVwKHsKICAgICAgICAgICAgICAgIGFjY2VwdHM6IHsKICAgICAgICAgICAgICAgICAgICBzY3JpcHQ6ICJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjb250ZW50czogewogICAgICAgICAgICAgICAgICAgIHNjcmlwdDogLyg/OmphdmF8ZWNtYSlzY3JpcHQvCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY29udmVydGVyczogewogICAgICAgICAgICAgICAgICAgICJ0ZXh0IHNjcmlwdCI6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouZ2xvYmFsRXZhbCh0KSwgdAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouYWpheFByZWZpbHRlcigic2NyaXB0IiwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdm9pZCAwID09PSB0LmNhY2hlICYmICh0LmNhY2hlID0gITEpLCB0LmNyb3NzRG9tYWluICYmICh0LnR5cGUgPSAiR0VUIikKICAgICAgICAgICAgfSksIFouYWpheFRyYW5zcG9ydCgic2NyaXB0IiwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgaWYgKHQuY3Jvc3NEb21haW4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSwgbjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICBzZW5kOiBmdW5jdGlvbihyLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gWigiPHNjcmlwdD4iKS5wcm9wKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3luYzogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnNldDogdC5zY3JpcHRDaGFyc2V0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogdC51cmwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLm9uKCJsb2FkIGVycm9yIiwgbiA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnJlbW92ZSgpLCBuID0gbnVsbCwgdCAmJiBpKCJlcnJvciIgPT09IHQudHlwZSA/IDQwNCA6IDIwMCwgdC50eXBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIFEuaGVhZC5hcHBlbmRDaGlsZChlWzBdKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBhYm9ydDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICYmIG4oKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIEllID0gW10sCiAgICAgICAgICAgICAgICBPZSA9IC8oPSlcPyg/PSZ8JCl8XD9cPy87CiAgICAgICAgICAgIFouYWpheFNldHVwKHsKICAgICAgICAgICAgICAgIGpzb25wOiAiY2FsbGJhY2siLAogICAgICAgICAgICAgICAganNvbnBDYWxsYmFjazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBJZS5wb3AoKSB8fCBaLmV4cGFuZG8gKyAiXyIgKyBjZSsrOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW3RdID0gITAsIHQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsIGZ1bmN0aW9uKGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgIHZhciBpLCBvLCBhLCBzID0gZS5qc29ucCAhPT0gITEgJiYgKE9lLnRlc3QoZS51cmwpID8gInVybCIgOiAic3RyaW5nIiA9PSB0eXBlb2YgZS5kYXRhICYmICEoZS5jb250ZW50VHlwZSB8fCAiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikgJiYgT2UudGVzdChlLmRhdGEpICYmICJkYXRhIik7CiAgICAgICAgICAgICAgICByZXR1cm4gcyB8fCAianNvbnAiID09PSBlLmRhdGFUeXBlc1swXSA/IChpID0gZS5qc29ucENhbGxiYWNrID0gWi5pc0Z1bmN0aW9uKGUuanNvbnBDYWxsYmFjaykgPyBlLmpzb25wQ2FsbGJhY2soKSA6IGUuanNvbnBDYWxsYmFjaywgcyA/IGVbc10gPSBlW3NdLnJlcGxhY2UoT2UsICIkMSIgKyBpKSA6IGUuanNvbnAgIT09ICExICYmIChlLnVybCArPSAobGUudGVzdChlLnVybCkgPyAiJiIgOiAiPyIpICsgZS5qc29ucCArICI9IiArIGkpLCBlLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSB8fCBaLmVycm9yKGkgKyAiIHdhcyBub3QgY2FsbGVkIiksIGFbMF0KICAgICAgICAgICAgICAgIH0sIGUuZGF0YVR5cGVzWzBdID0gImpzb24iLCBvID0gdFtpXSwgdFtpXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGEgPSBhcmd1bWVudHMKICAgICAgICAgICAgICAgIH0sIHIuYWx3YXlzKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRbaV0gPSBvLCBlW2ldICYmIChlLmpzb25wQ2FsbGJhY2sgPSBuLmpzb25wQ2FsbGJhY2ssIEllLnB1c2goaSkpLCBhICYmIFouaXNGdW5jdGlvbihvKSAmJiBvKGFbMF0pLCBhID0gbyA9IHZvaWQgMAogICAgICAgICAgICAgICAgfSksICJzY3JpcHQiKSA6IHZvaWQgMAogICAgICAgICAgICB9KSwgWi5wYXJzZUhUTUwgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICBpZiAoIXQgfHwgInN0cmluZyIgIT0gdHlwZW9mIHQpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgImJvb2xlYW4iID09IHR5cGVvZiBlICYmIChuID0gZSwgZSA9ICExKSwgZSA9IGUgfHwgUTsKICAgICAgICAgICAgICAgIHZhciByID0gYXQuZXhlYyh0KSwKICAgICAgICAgICAgICAgICAgICBpID0gIW4gJiYgW107CiAgICAgICAgICAgICAgICByZXR1cm4gciA/IFtlLmNyZWF0ZUVsZW1lbnQoclsxXSldIDogKHIgPSBaLmJ1aWxkRnJhZ21lbnQoW3RdLCBlLCBpKSwgaSAmJiBpLmxlbmd0aCAmJiBaKGkpLnJlbW92ZSgpLCBaLm1lcmdlKFtdLCByLmNoaWxkTm9kZXMpKQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgTGUgPSBaLmZuLmxvYWQ7CiAgICAgICAgICAgIFouZm4ubG9hZCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIGlmICgic3RyaW5nIiAhPSB0eXBlb2YgdCAmJiBMZSkgcmV0dXJuIExlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB2YXIgciwgaSwgbywgYSA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgcyA9IHQuaW5kZXhPZigiICIpOwogICAgICAgICAgICAgICAgcmV0dXJuIHMgPj0gMCAmJiAociA9IFoudHJpbSh0LnNsaWNlKHMpKSwgdCA9IHQuc2xpY2UoMCwgcykpLCBaLmlzRnVuY3Rpb24oZSkgPyAobiA9IGUsIGUgPSB2b2lkIDApIDogZSAmJiAib2JqZWN0IiA9PSB0eXBlb2YgZSAmJiAoaSA9ICJQT1NUIiksIGEubGVuZ3RoID4gMCAmJiBaLmFqYXgoewogICAgICAgICAgICAgICAgICAgIHVybDogdCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiBpLAogICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAiaHRtbCIsCiAgICAgICAgICAgICAgICAgICAgZGF0YTogZQogICAgICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgbyA9IGFyZ3VtZW50cywgYS5odG1sKHIgPyBaKCI8ZGl2PiIpLmFwcGVuZChaLnBhcnNlSFRNTCh0KSkuZmluZChyKSA6IHQpCiAgICAgICAgICAgICAgICB9KS5jb21wbGV0ZShuICYmIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBhLmVhY2gobiwgbyB8fCBbdC5yZXNwb25zZVRleHQsIGUsIHRdKQogICAgICAgICAgICAgICAgfSksIHRoaXMKICAgICAgICAgICAgfSwgWi5lYWNoKFsiYWpheFN0YXJ0IiwgImFqYXhTdG9wIiwgImFqYXhDb21wbGV0ZSIsICJhamF4RXJyb3IiLCAiYWpheFN1Y2Nlc3MiLCAiYWpheFNlbmQiXSwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgWi5mbltlXSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vbihlLCB0KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5leHByLmZpbHRlcnMuYW5pbWF0ZWQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gWi5ncmVwKFoudGltZXJzLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IGUuZWxlbQogICAgICAgICAgICAgICAgfSkubGVuZ3RoCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBEZSA9IHQuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogICAgICAgICAgICBaLm9mZnNldCA9IHsKICAgICAgICAgICAgICAgIHNldE9mZnNldDogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciByLCBpLCBvLCBhLCBzLCB1LCBjLCBsID0gWi5jc3ModCwgInBvc2l0aW9uIiksCiAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBaKHQpLAogICAgICAgICAgICAgICAgICAgICAgICBwID0ge307CiAgICAgICAgICAgICAgICAgICAgInN0YXRpYyIgPT09IGwgJiYgKHQuc3R5bGUucG9zaXRpb24gPSAicmVsYXRpdmUiKSwgcyA9IGYub2Zmc2V0KCksIG8gPSBaLmNzcyh0LCAidG9wIiksIHUgPSBaLmNzcyh0LCAibGVmdCIpLCBjID0gKCJhYnNvbHV0ZSIgPT09IGwgfHwgImZpeGVkIiA9PT0gbCkgJiYgKG8gKyB1KS5pbmRleE9mKCJhdXRvIikgPiAtMSwgYyA/IChyID0gZi5wb3NpdGlvbigpLCBhID0gci50b3AsIGkgPSByLmxlZnQpIDogKGEgPSBwYXJzZUZsb2F0KG8pIHx8IDAsIGkgPSBwYXJzZUZsb2F0KHUpIHx8IDApLCBaLmlzRnVuY3Rpb24oZSkgJiYgKGUgPSBlLmNhbGwodCwgbiwgcykpLCBudWxsICE9IGUudG9wICYmIChwLnRvcCA9IGUudG9wIC0gcy50b3AgKyBhKSwgbnVsbCAhPSBlLmxlZnQgJiYgKHAubGVmdCA9IGUubGVmdCAtIHMubGVmdCArIGkpLCAidXNpbmciIGluIGUgPyBlLnVzaW5nLmNhbGwodCwgcCkgOiBmLmNzcyhwKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBaLmZuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHZvaWQgMCA9PT0gdCA/IHRoaXMgOiB0aGlzLmVhY2goZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBaLm9mZnNldC5zZXRPZmZzZXQodGhpcywgdCwgZSkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgZSwgbiwgciA9IHRoaXNbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSByICYmIHIub3duZXJEb2N1bWVudDsKICAgICAgICAgICAgICAgICAgICBpZiAobykgcmV0dXJuIGUgPSBvLmRvY3VtZW50RWxlbWVudCwgWi5jb250YWlucyhlLCByKSA/ICh0eXBlb2Ygci5nZXRCb3VuZGluZ0NsaWVudFJlY3QgIT09IEV0ICYmIChpID0gci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksIG4gPSBGKG8pLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogaS50b3AgKyBuLnBhZ2VZT2Zmc2V0IC0gZS5jbGllbnRUb3AsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGkubGVmdCArIG4ucGFnZVhPZmZzZXQgLSBlLmNsaWVudExlZnQKICAgICAgICAgICAgICAgICAgICB9KSA6IGkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNbMF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIGUsIG4gPSB0aGlzWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJmaXhlZCIgPT09IFouY3NzKG4sICJwb3NpdGlvbiIpID8gZSA9IG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiAodCA9IHRoaXMub2Zmc2V0UGFyZW50KCksIGUgPSB0aGlzLm9mZnNldCgpLCBaLm5vZGVOYW1lKHRbMF0sICJodG1sIikgfHwgKHIgPSB0Lm9mZnNldCgpKSwgci50b3AgKz0gWi5jc3ModFswXSwgImJvcmRlclRvcFdpZHRoIiwgITApLCByLmxlZnQgKz0gWi5jc3ModFswXSwgImJvcmRlckxlZnRXaWR0aCIsICEwKSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogZS50b3AgLSByLnRvcCAtIFouY3NzKG4sICJtYXJnaW5Ub3AiLCAhMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBlLmxlZnQgLSByLmxlZnQgLSBaLmNzcyhuLCAibWFyZ2luTGVmdCIsICEwKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gdGhpcy5vZmZzZXRQYXJlbnQgfHwgRGU7IHQgJiYgIVoubm9kZU5hbWUodCwgImh0bWwiKSAmJiAic3RhdGljIiA9PT0gWi5jc3ModCwgInBvc2l0aW9uIik7KSB0ID0gdC5vZmZzZXRQYXJlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0IHx8IERlCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZWFjaCh7CiAgICAgICAgICAgICAgICBzY3JvbGxMZWZ0OiAicGFnZVhPZmZzZXQiLAogICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAicGFnZVlPZmZzZXQiCiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByID0gInBhZ2VZT2Zmc2V0IiA9PT0gbjsKICAgICAgICAgICAgICAgIFouZm5bZV0gPSBmdW5jdGlvbihpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZ0KHRoaXMsIGZ1bmN0aW9uKGUsIGksIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBGKGUpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBvID8gYSA/IGFbbl0gOiBlW2ldIDogdm9pZChhID8gYS5zY3JvbGxUbyhyID8gdC5wYWdlWE9mZnNldCA6IG8sIHIgPyBvIDogdC5wYWdlWU9mZnNldCkgOiBlW2ldID0gbykKICAgICAgICAgICAgICAgICAgICB9LCBlLCBpLCBhcmd1bWVudHMubGVuZ3RoLCBudWxsKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5lYWNoKFsidG9wIiwgImxlZnQiXSwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgWi5jc3NIb29rc1tlXSA9IF8oWS5waXhlbFBvc2l0aW9uLCBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPyAobiA9IHcodCwgZSksIEJ0LnRlc3QobikgPyBaKHQpLnBvc2l0aW9uKClbZV0gKyAicHgiIDogbikgOiB2b2lkIDAKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pLCBaLmVhY2goewogICAgICAgICAgICAgICAgSGVpZ2h0OiAiaGVpZ2h0IiwKICAgICAgICAgICAgICAgIFdpZHRoOiAid2lkdGgiCiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIFouZWFjaCh7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogImlubmVyIiArIHQsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogZSwKICAgICAgICAgICAgICAgICAgICAiIjogIm91dGVyIiArIHQKICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICBaLmZuW3JdID0gZnVuY3Rpb24ociwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGFyZ3VtZW50cy5sZW5ndGggJiYgKG4gfHwgImJvb2xlYW4iICE9IHR5cGVvZiByKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuIHx8IChyID09PSAhMCB8fCBpID09PSAhMCA/ICJtYXJnaW4iIDogImJvcmRlciIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdnQodGhpcywgZnVuY3Rpb24oZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWi5pc1dpbmRvdyhlKSA/IGUuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiICsgdF0gOiA5ID09PSBlLm5vZGVUeXBlID8gKGkgPSBlLmRvY3VtZW50RWxlbWVudCwgTWF0aC5tYXgoZS5ib2R5WyJzY3JvbGwiICsgdF0sIGlbInNjcm9sbCIgKyB0XSwgZS5ib2R5WyJvZmZzZXQiICsgdF0sIGlbIm9mZnNldCIgKyB0XSwgaVsiY2xpZW50IiArIHRdKSkgOiB2b2lkIDAgPT09IHIgPyBaLmNzcyhlLCBuLCBhKSA6IFouc3R5bGUoZSwgbiwgciwgYSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZSwgbyA/IHIgOiB2b2lkIDAsIG8sIG51bGwpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSksIFouZm4uc2l6ZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoCiAgICAgICAgICAgIH0sIFouZm4uYW5kU2VsZiA9IFouZm4uYWRkQmFjaywgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgJiYgZGVmaW5lKCJqcXVlcnkiLCBbXSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gWgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIFBlID0gdC5qUXVlcnksCiAgICAgICAgICAgICAgICAkZSA9IHQuJDsKICAgICAgICAgICAgcmV0dXJuIFoubm9Db25mbGljdCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0LiQgPT09IFogJiYgKHQuJCA9ICRlKSwgZSAmJiB0LmpRdWVyeSA9PT0gWiAmJiAodC5qUXVlcnkgPSBQZSksIFoKICAgICAgICAgICAgfSwgdHlwZW9mIGUgPT09IEV0ICYmICh0LmpRdWVyeSA9IHQuJCA9IFopLCBaCiAgICAgICAgfSkKICAgIH0sIHt9XSwKICAgIDE2OiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgIChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIodCwgZSkgewogICAgICAgICAgICAgICAgICAgIGlmICh0ICE9PSBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gbnVsbCA9PT0gdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0ID09PSBFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHQgPT09IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gbnVsbCA9PT0gZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlID09PSBFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGUgPT09IGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID4gZSAmJiAhbyB8fCAhaSB8fCBuICYmICFhICYmIHMgfHwgciAmJiBzKSByZXR1cm4gMTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPiB0ICYmICFuIHx8ICFzIHx8IG8gJiYgIXIgJiYgaSB8fCBhICYmIGkpIHJldHVybiAtMQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gMAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGkodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSB0Lmxlbmd0aCwgaSA9IG4gPyByIDogLTE7IG4gPyBpLS0gOiArK2kgPCByOykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUodFtpXSwgaSwgdCkpIHJldHVybiBpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG8odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIGlmIChlICE9PSBlKSByZXR1cm4gdih0LCBuKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gbiAtIDEsIGkgPSB0Lmxlbmd0aDsgKytyIDwgaTspCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0W3JdID09PSBlKSByZXR1cm4gcjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgdCB8fCAhMQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHModCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyAiIiA6IHQgKyAiIgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHUodCwgZSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAtMSwgciA9IHQubGVuZ3RoOyArK24gPCByICYmIGUuaW5kZXhPZih0LmNoYXJBdChuKSkgPiAtMTspOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gYyh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IHQubGVuZ3RoOyBuLS0gJiYgZS5pbmRleE9mKHQuY2hhckF0KG4pKSA+IC0xOyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBsKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcih0LmNyaXRlcmlhLCBlLmNyaXRlcmlhKSB8fCB0LmluZGV4IC0gZS5pbmRleAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGYodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAtMSwgbyA9IHQuY3JpdGVyaWEsIGEgPSBlLmNyaXRlcmlhLCBzID0gby5sZW5ndGgsIHUgPSBuLmxlbmd0aDsgKytpIDwgczspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSByKG9baV0sIGFbaV0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPj0gdSkgcmV0dXJuIGM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IG5baV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYyAqICgiYXNjIiA9PT0gbCB8fCBsID09PSAhMCA/IDEgOiAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pbmRleCAtIGUuaW5kZXgKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBwKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gV3RbdF0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBoKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4genRbdF0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA/IHQgPSBYdFt0XSA6IG4gJiYgKHQgPSBKdFt0XSksICJcXCIgKyB0CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZyh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJcXCIgKyBKdFt0XQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHYodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSB0Lmxlbmd0aCwgaSA9IGUgKyAobiA/IDAgOiAtMSk7IG4gPyBpLS0gOiArK2kgPCByOykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvICE9PSBvKSByZXR1cm4gaQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB5KHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gISF0ICYmICJvYmplY3QiID09IHR5cGVvZiB0CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gbSh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE2MCA+PSB0ICYmIHQgPj0gOSAmJiAxMyA+PSB0IHx8IDMyID09IHQgfHwgMTYwID09IHQgfHwgNTc2MCA9PSB0IHx8IDYxNTggPT0gdCB8fCB0ID49IDgxOTIgJiYgKDgyMDIgPj0gdCB8fCA4MjMyID09IHQgfHwgODIzMyA9PSB0IHx8IDgyMzkgPT0gdCB8fCA4Mjg3ID09IHQgfHwgMTIyODggPT0gdCB8fCA2NTI3OSA9PSB0KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGIodCwgZSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAtMSwgciA9IHQubGVuZ3RoLCBpID0gLTEsIG8gPSBbXTsgKytuIDwgcjspIHRbbl0gPT09IGUgJiYgKHRbbl0gPSBXLCBvWysraV0gPSBuKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHgodCwgZSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4sIHIgPSAtMSwgaSA9IHQubGVuZ3RoLCBvID0gLTEsIGEgPSBbXTsgKytyIDwgaTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB0W3JdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGUgPyBlKHMsIHIsIHQpIDogczsKICAgICAgICAgICAgICAgICAgICAgICAgciAmJiBuID09PSB1IHx8IChuID0gdSwgYVsrK29dID0gcykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB3KHQpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gLTEsIG4gPSB0Lmxlbmd0aDsgKytlIDwgbiAmJiBtKHQuY2hhckNvZGVBdChlKSk7KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF8odCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSB0Lmxlbmd0aDsgZS0tICYmIG0odC5jaGFyQ29kZUF0KGUpKTspOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gayh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFZ0W3RdCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gVCh0KSB7CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5KHQpICYmICFBcyh0KSAmJiAhKHQgaW5zdGFuY2VvZiBRKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBtKSByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlYS5jYWxsKHQsICJfX2NoYWluX18iKSAmJiBlYS5jYWxsKHQsICJfX3dyYXBwZWRfXyIpKSByZXR1cm4gaHIodCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IG0odCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG4oKSB7fQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBtKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3dyYXBwZWRfXyA9IHQsIHRoaXMuX19hY3Rpb25zX18gPSBuIHx8IFtdLCB0aGlzLl9fY2hhaW5fXyA9ICEhZQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX193cmFwcGVkX18gPSB0LCB0aGlzLl9fYWN0aW9uc19fID0gW10sIHRoaXMuX19kaXJfXyA9IDEsIHRoaXMuX19maWx0ZXJlZF9fID0gITEsIHRoaXMuX19pdGVyYXRlZXNfXyA9IFtdLCB0aGlzLl9fdGFrZUNvdW50X18gPSBTYSwgdGhpcy5fX3ZpZXdzX18gPSBbXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZXQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbmV3IFEodGhpcy5fX3dyYXBwZWRfXyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0Ll9fYWN0aW9uc19fID0gdGUodGhpcy5fX2FjdGlvbnNfXyksIHQuX19kaXJfXyA9IHRoaXMuX19kaXJfXywgdC5fX2ZpbHRlcmVkX18gPSB0aGlzLl9fZmlsdGVyZWRfXywgdC5fX2l0ZXJhdGVlc19fID0gdGUodGhpcy5fX2l0ZXJhdGVlc19fKSwgdC5fX3Rha2VDb3VudF9fID0gdGhpcy5fX3Rha2VDb3VudF9fLCB0Ll9fdmlld3NfXyA9IHRlKHRoaXMuX192aWV3c19fKSwgdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcnQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9fZmlsdGVyZWRfXykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBuZXcgUSh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuX19kaXJfXyA9IC0xLCB0Ll9fZmlsdGVyZWRfXyA9ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB0ID0gdGhpcy5jbG9uZSgpLCB0Ll9fZGlyX18gKj0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBXdCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLl9fd3JhcHBlZF9fLnZhbHVlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gdGhpcy5fX2Rpcl9fLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IEFzKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IDAgPiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG4gPyB0Lmxlbmd0aCA6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gVm4oMCwgaSwgdGhpcy5fX3ZpZXdzX18pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG8uc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gby5lbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gcyAtIGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gciA/IHMgOiBhIC0gMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0aGlzLl9faXRlcmF0ZWVzX18sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gbC5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBrYSh1LCB0aGlzLl9fdGFrZUNvdW50X18pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW4gfHwgTSA+IGkgfHwgaSA9PSB1ICYmIGggPT0gdSkgcmV0dXJuIG5uKHIgJiYgbiA/IHQucmV2ZXJzZSgpIDogdCwgdGhpcy5fX2FjdGlvbnNfXyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIHQ6IGZvciAoOyB1LS0gJiYgaCA+IHA7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjICs9IGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBnID0gLTEsIHYgPSB0W2NdOyArK2cgPCBmOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0gbFtnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IHkuaXRlcmF0ZWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSB5LnR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBtKHYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiID09IEIpIHYgPSB4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiID09IEYpIGNvbnRpbnVlIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW3ArK10gPSB2CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHp0KCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YV9fID0ge30KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFZ0KHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzKHQpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW3RdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBHdCh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiX19wcm90b19fIiA9PSB0ID8gRSA6IHRoaXMuX19kYXRhX19bdF0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFh0KHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJfX3Byb3RvX18iICE9IHQgJiYgZWEuY2FsbCh0aGlzLl9fZGF0YV9fLCB0KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gSnQodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIl9fcHJvdG9fXyIgIT0gdCAmJiAodGhpcy5fX2RhdGFfX1t0XSA9IGUpLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBZdCh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdCA/IHQubGVuZ3RoIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh0aGlzLmRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaDogeWEobnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBuZXcgZmEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07IGUtLTspIHRoaXMucHVzaCh0W2VdKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUXQodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQuZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAic3RyaW5nIiA9PSB0eXBlb2YgZSB8fCBMaShlKSA/IG4uc2V0LmhhcyhlKSA6IG4uaGFzaFtlXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPyAwIDogLTEKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEt0KHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICJzdHJpbmciID09IHR5cGVvZiB0IHx8IExpKHQpID8gZS5zZXQuYWRkKHQpIDogZS5oYXNoW3RdID0gITAKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFp0KHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IC0xLCByID0gdC5sZW5ndGgsIGkgPSAtMSwgbyA9IGUubGVuZ3RoLCBhID0gRm8ociArIG8pOyArK24gPCByOykgYVtuXSA9IHRbbl07CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyArK2kgPCBvOykgYVtuKytdID0gZVtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRlKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSAtMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChlIHx8IChlID0gRm8ocikpOyArK24gPCByOykgZVtuXSA9IHRbbl07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBlZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAtMSwgciA9IHQubGVuZ3RoOyArK24gPCByICYmIGUodFtuXSwgbiwgdCkgIT09ICExOyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSB0Lmxlbmd0aDsgbi0tICYmIGUodFtuXSwgbiwgdCkgIT09ICExOyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAtMSwgciA9IHQubGVuZ3RoOyArK24gPCByOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZSh0W25dLCBuLCB0KSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITAKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFlKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IC0xLCBvID0gdC5sZW5ndGgsIGEgPSByLCBzID0gYTsgKytpIDwgbzspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gdFtpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gK2UodSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuKGMsIGEpICYmIChhID0gYywgcyA9IHUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNlKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IC0xLCByID0gdC5sZW5ndGgsIGkgPSAtMSwgbyA9IFtdOyArK24gPCByOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB0W25dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZShhLCBuLCB0KSAmJiAob1srK2ldID0gYSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdWUodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gLTEsIHIgPSB0Lmxlbmd0aCwgaSA9IEZvKHIpOyArK24gPCByOykgaVtuXSA9IGUodFtuXSwgbiwgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAtMSwgciA9IGUubGVuZ3RoLCBpID0gdC5sZW5ndGg7ICsrbiA8IHI7KSB0W2kgKyBuXSA9IGVbbl07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBsZSh0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAociAmJiBvICYmIChuID0gdFsrK2ldKTsgKytpIDwgbzspIG4gPSBlKG4sIHRbaV0sIGksIHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZmUodCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHIgJiYgaSAmJiAobiA9IHRbLS1pXSk7IGktLTspIG4gPSBlKG4sIHRbaV0sIGksIHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcGUodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gLTEsIHIgPSB0Lmxlbmd0aDsgKytuIDwgcjspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSh0W25dLCBuLCB0KSkgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhlKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IHQubGVuZ3RoLCByID0gMDsgbi0tOykgciArPSArZSh0W25dKSB8fCAwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZGUodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gRSA/IGUgOiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZSh0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ICE9PSBFICYmIGVhLmNhbGwociwgbikgPyB0IDogZQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdmUodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gLTEsIGkgPSBNcyhlKSwgbyA9IGkubGVuZ3RoOyArK3IgPCBvOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBpW3JdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB0W2FdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBuKHMsIGVbYV0sIGEsIHQsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHUgPT09IHUgPyB1ID09PSBzIDogcyAhPT0gcykgJiYgKHMgIT09IEUgfHwgYSBpbiB0KSB8fCAodFthXSA9IHUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHllKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gZSA/IHQgOiBiZShlLCBNcyhlKSwgdCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1lKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IC0xLCByID0gbnVsbCA9PSB0LCBpID0gIXIgJiYgUW4odCksIG8gPSBpID8gdC5sZW5ndGggOiAwLCBhID0gZS5sZW5ndGgsIHMgPSBGbyhhKTsgKytuIDwgYTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gZVtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPyBzW25dID0gS24odSwgbykgPyB0W3VdIDogRSA6IHNbbl0gPSByID8gRSA6IHRbdV0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYmUodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBuIHx8IChuID0ge30pOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gLTEsIGkgPSBlLmxlbmd0aDsgKytyIDwgaTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZVtyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5bb10gPSB0W29dCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHhlKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0eXBlb2YgdDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gciA/IGUgPT09IEUgPyB0IDogYW4odCwgZSwgbikgOiBudWxsID09IHQgPyBTbyA6ICJvYmplY3QiID09IHIgPyBIZSh0KSA6IGUgPT09IEUgPyBMbyh0KSA6IE1lKHQsIGUpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB3ZSh0LCBlLCBuLCByLCBpLCBvLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobiAmJiAocyA9IGkgPyBuKHQsIHIsIGkpIDogbih0KSksIHMgIT09IEUpIHJldHVybiBzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUxpKHQpKSByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBBcyh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzID0gR24odCksICFlKSByZXR1cm4gdGUodCwgcykKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gcmEuY2FsbCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gYyA9PSBZOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgIT0gWiAmJiBjICE9IHogJiYgKCFsIHx8IGkpKSByZXR1cm4gVXRbY10gPyBKbih0LCBjLCBlKSA6IGkgPyB0IDoge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyA9IFhuKGwgPyB7fSA6IHQpLCAhZSkgcmV0dXJuIHllKHMsIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbyB8fCAobyA9IFtdKSwgYSB8fCAoYSA9IFtdKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZiA9IG8ubGVuZ3RoOyBmLS07KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9bZl0gPT0gdCkgcmV0dXJuIGFbZl07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvLnB1c2godCksIGEucHVzaChzKSwgKHUgPyBlZSA6IFJlKSh0LCBmdW5jdGlvbihyLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzW2ldID0gd2UociwgZSwgbiwgaSwgdCwgbywgYSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksIHMKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9lKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHQpIHRocm93IG5ldyBZbyhVKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5hcHBseShFLCBuKQogICAgICAgICAgICAgICAgICAgICAgICB9LCBlKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ga2UodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQgPyB0Lmxlbmd0aCA6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbikgcmV0dXJuIHI7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gVW4oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBhID09IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gcyAmJiBlLmxlbmd0aCA+PSBNID8gZ24oZSkgOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGUubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICB1ICYmIChhID0gUXQsIHMgPSAhMSwgZSA9IHUpOwogICAgICAgICAgICAgICAgICAgICAgICB0OiBmb3IgKDsgKytpIDwgbjspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gdFtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzICYmIGwgPT09IGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBmID0gYzsgZi0tOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVbZl0gPT09IGwpIGNvbnRpbnVlIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5wdXNoKGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgYShlLCBsLCAwKSA8IDAgJiYgci5wdXNoKGwpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFRlKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBhKHQsIGZ1bmN0aW9uKHQsIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID0gISFlKHQsIHIsIGkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBFZSh0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGEodCwgZnVuY3Rpb24odCwgYSwgcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSArZSh0LCBhLCBzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuKHUsIGkpIHx8IHUgPT09IHIgJiYgdSA9PT0gbykgJiYgKGkgPSB1LCBvID0gdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSksIG8KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGplKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChuID0gbnVsbCA9PSBuID8gMCA6ICtuIHx8IDAsIDAgPiBuICYmIChuID0gLW4gPiBpID8gMCA6IGkgKyBuKSwgciA9IHIgPT09IEUgfHwgciA+IGkgPyBpIDogK3IgfHwgMCwgMCA+IHIgJiYgKHIgKz0gaSksIGkgPSBuID4gciA/IDAgOiByID4+PiAwLCBuID4+Pj0gMDsgaSA+IG47KSB0W24rK10gPSBlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQ2UodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGEodCwgZnVuY3Rpb24odCwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSh0LCByLCBpKSAmJiBuLnB1c2godCkKICAgICAgICAgICAgICAgICAgICAgICAgfSksIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFNlKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuKHQsIGZ1bmN0aW9uKHQsIG4sIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlKHQsIG4sIG8pID8gKGkgPSByID8gbiA6IHQsICExKSA6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgICAgICB9KSwgaQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQWUodCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICByIHx8IChyID0gW10pOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gLTEsIG8gPSB0Lmxlbmd0aDsgKytpIDwgbzspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gdFtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkoYSkgJiYgUW4oYSkgJiYgKG4gfHwgQXMoYSkgfHwgRWkoYSkpID8gZSA/IEFlKGEsIGUsIG4sIHIpIDogY2UociwgYSkgOiBuIHx8IChyW3IubGVuZ3RoXSA9IGEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE5lKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHFhKHQsIGUsIHRvKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUmUodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcWEodCwgZSwgTXMpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBJZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBIYSh0LCBlLCBNcykKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE9lKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IC0xLCByID0gZS5sZW5ndGgsIGkgPSAtMSwgbyA9IFtdOyArK24gPCByOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBlW25dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgT2kodFthXSkgJiYgKG9bKytpXSA9IGEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIExlKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAhPT0gRSAmJiBuIGluIGZyKHQpICYmIChlID0gW25dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAwLCBpID0gZS5sZW5ndGg7IG51bGwgIT0gdCAmJiBpID4gcjspIHQgPSB0W2VbcisrXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAmJiByID09IGkgPyB0IDogRQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBEZSh0LCBlLCBuLCByLCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSBlID8gITAgOiBudWxsID09IHQgfHwgbnVsbCA9PSBlIHx8ICFMaSh0KSAmJiAheShlKSA/IHQgIT09IHQgJiYgZSAhPT0gZSA6IFBlKHQsIGUsIERlLCBuLCByLCBpLCBvKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUGUodCwgZSwgbiwgciwgaSwgbywgYSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IEFzKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IEFzKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IFYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gVjsKICAgICAgICAgICAgICAgICAgICAgICAgcyB8fCAoYyA9IHJhLmNhbGwodCksIGMgPT0geiA/IGMgPSBaIDogYyAhPSBaICYmIChzID0gVWkodCkpKSwgdSB8fCAobCA9IHJhLmNhbGwoZSksIGwgPT0geiA/IGwgPSBaIDogbCAhPSBaICYmICh1ID0gVWkoZSkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBjID09IFosCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gbCA9PSBaLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGMgPT0gbDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGggJiYgIXMgJiYgIWYpIHJldHVybiBIbih0LCBlLCBjKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGYgJiYgZWEuY2FsbCh0LCAiX193cmFwcGVkX18iKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gcCAmJiBlYS5jYWxsKGUsICJfX3dyYXBwZWRfXyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQgfHwgZykgcmV0dXJuIG4oZCA/IHQudmFsdWUoKSA6IHQsIGcgPyBlLnZhbHVlKCkgOiBlLCByLCBpLCBvLCBhKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaCkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICBvIHx8IChvID0gW10pLCBhIHx8IChhID0gW10pOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB2ID0gby5sZW5ndGg7IHYtLTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob1t2XSA9PSB0KSByZXR1cm4gYVt2XSA9PSBlOwogICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2godCksIGEucHVzaChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSAocyA/IHFuIDogTW4pKHQsIGUsIG4sIHIsIGksIG8sIGEpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5wb3AoKSwgYS5wb3AoKSwgeQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gJGUodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gIW47CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQpIHJldHVybiAhaTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh0ID0gZnIodCk7IHItLTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gZVtyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvICYmIGFbMl0gPyBhWzFdICE9PSB0W2FbMF1dIDogIShhWzBdIGluIHQpKSByZXR1cm4gITEKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgKytyIDwgaTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlW3JdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBhWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB0W3NdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBhWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gJiYgYVsyXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1ID09PSBFICYmICEocyBpbiB0KSkgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gbiA/IG4odSwgYywgcykgOiBFOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGwgPT09IEUgPyBEZShjLCB1LCBuLCAhMCkgOiBsKSkgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBxZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gUW4odCkgPyBGbyh0Lmxlbmd0aCkgOiBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBhKHQsIGZ1bmN0aW9uKHQsIGksIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbKytuXSA9IGUodCwgaSwgbykKICAgICAgICAgICAgICAgICAgICAgICAgfSksIHIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEhlKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBXbih0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT0gZS5sZW5ndGggJiYgZVswXVsyXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlWzBdWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlWzBdWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0ID8gITEgOiB0W25dID09PSByICYmIChyICE9PSBFIHx8IG4gaW4gZnIodCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkZSh0LCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBNZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gQXModCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdHIodCkgJiYgcnIoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdCArICIiOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IHByKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24obykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IG8pIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPSBmcihvKSwgKG4gfHwgIXIpICYmICEoYSBpbiBvKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9IDEgPT0gdC5sZW5ndGggPyBvIDogTGUobywgWGUodCwgMCwgLTEpKSwgbnVsbCA9PSBvKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBqcih0KSwgbyA9IGZyKG8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvW2FdID09PSBlID8gZSAhPT0gRSB8fCBhIGluIG8gOiBEZShlLCBvW2FdLCBFLCAhMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEZlKHQsIGUsIG4sIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFMaSh0KSkgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gUW4oZSkgJiYgKEFzKGUpIHx8IFVpKGUpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBvID8gRSA6IE1zKGUpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWUoYSB8fCBlLCBmdW5jdGlvbihzLCB1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSAmJiAodSA9IHMsIHMgPSBlW3VdKSwgeShzKSkgciB8fCAociA9IFtdKSwgaSB8fCAoaSA9IFtdKSwgQmUodCwgZSwgdSwgRmUsIG4sIHIsIGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB0W3VdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gbiA/IG4oYywgcywgdSwgdCwgZSkgOiBFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gbCA9PT0gRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmICYmIChsID0gcyksIGwgPT09IEUgJiYgKCFvIHx8IHUgaW4gdCkgfHwgIWYgJiYgKGwgPT09IGwgPyBsID09PSBjIDogYyAhPT0gYykgfHwgKHRbdV0gPSBsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQmUodCwgZSwgbiwgciwgaSwgbywgYSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzID0gby5sZW5ndGgsIHUgPSBlW25dOyBzLS07KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9bc10gPT0gdSkgcmV0dXJuIHZvaWQodFtuXSA9IGFbc10pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHRbbl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gaSA/IGkoYywgdSwgbiwgdCwgZSkgOiBFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGwgPT09IEU7CiAgICAgICAgICAgICAgICAgICAgICAgIGYgJiYgKGwgPSB1LCBRbih1KSAmJiAoQXModSkgfHwgVWkodSkpID8gbCA9IEFzKGMpID8gYyA6IFFuKGMpID8gdGUoYykgOiBbXSA6IE1pKHUpIHx8IEVpKHUpID8gbCA9IEVpKGMpID8gWGkoYykgOiBNaShjKSA/IGMgOiB7fSA6IGYgPSAhMSksIG8ucHVzaCh1KSwgYS5wdXNoKGwpLCBmID8gdFtuXSA9IHIobCwgdSwgaSwgbywgYSkgOiAobCA9PT0gbCA/IGwgIT09IGMgOiBjID09PSBjKSAmJiAodFtuXSA9IGwpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBVZSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBlID8gRSA6IGVbdF0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gV2UodCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQgKyAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBwcih0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTGUobiwgdCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHplKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IHQgPyBlLmxlbmd0aCA6IDA7IG4tLTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZVtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyICE9IGkgJiYgS24ocikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGEuY2FsbCh0LCByLCAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBWZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ICsgbWEoamEoKSAqIChlIC0gdCArIDEpKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gR2UodCwgZSwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSh0LCBmdW5jdGlvbih0LCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gciA/IChyID0gITEsIHQpIDogZShuLCB0LCBpLCBvKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gWGUodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBlID0gbnVsbCA9PSBlID8gMCA6ICtlIHx8IDAsIDAgPiBlICYmIChlID0gLWUgPiBpID8gMCA6IGkgKyBlKSwgbiA9IG4gPT09IEUgfHwgbiA+IGkgPyBpIDogK24gfHwgMCwgMCA+IG4gJiYgKG4gKz0gaSksIGkgPSBlID4gbiA/IDAgOiBuIC0gZSA+Pj4gMCwgZSA+Pj49IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG8gPSBGbyhpKTsgKytyIDwgaTspIG9bcl0gPSB0W3IgKyBlXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEplKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQYSh0LCBmdW5jdGlvbih0LCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA9IGUodCwgciwgaSksICFuCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAhIW4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFllKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh0LnNvcnQoZSk7IG4tLTspIHRbbl0gPSB0W25dLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUWUodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IEZuKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB1ZShlLCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcih0KQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBxZSh0LCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHVlKGUsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyaXRlcmlhOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiArK2ksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBZZShvLCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0LCBlLCBuKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gS2UodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQYSh0LCBmdW5jdGlvbih0LCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICs9ICtlKHQsIHIsIGkpIHx8IDAKICAgICAgICAgICAgICAgICAgICAgICAgfSksIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFplKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSAtMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBVbigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHQubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHIgPT0gbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBhICYmIGkgPj0gTSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBzID8gZ24oKSA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIHUgPyAociA9IFF0LCBhID0gITEpIDogKHMgPSAhMSwgdSA9IGUgPyBbXSA6IGMpOwogICAgICAgICAgICAgICAgICAgICAgICB0OiBmb3IgKDsgKytuIDwgaTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gdFtuXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gZSA/IGUobCwgbiwgdCkgOiBsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgJiYgbCA9PT0gbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHAgPSB1Lmxlbmd0aDsgcC0tOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVbcF0gPT09IGYpIGNvbnRpbnVlIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSAmJiB1LnB1c2goZiksIGMucHVzaChsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHIodSwgZiwgMCkgPCAwICYmICgoZSB8fCBzKSAmJiB1LnB1c2goZiksIGMucHVzaChsKSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdG4odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gLTEsIHIgPSBlLmxlbmd0aCwgaSA9IEZvKHIpOyArK24gPCByOykgaVtuXSA9IHRbZVtuXV07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBlbih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSB0Lmxlbmd0aCwgbyA9IHIgPyBpIDogLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAociA/IG8tLSA6ICsrbyA8IGkpICYmIGUodFtvXSwgbywgdCk7KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPyBYZSh0LCByID8gMCA6IG8sIHIgPyBvICsgMSA6IGkpIDogWGUodCwgciA/IG8gKyAxIDogMCwgciA/IGkgOiBvKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbm4odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIG4gaW5zdGFuY2VvZiBRICYmIChuID0gbi52YWx1ZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IC0xLCBpID0gZS5sZW5ndGg7ICsrciA8IGk7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGVbcl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gby5mdW5jLmFwcGx5KG8udGhpc0FyZywgY2UoW25dLCBvLmFyZ3MpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBybih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0ID8gdC5sZW5ndGggOiByOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIm51bWJlciIgPT0gdHlwZW9mIGUgJiYgZSA9PT0gZSAmJiBSYSA+PSBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgaSA+IHI7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSByICsgaSA+Pj4gMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHRbb107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPyBlID49IGEgOiBlID4gYSkgJiYgbnVsbCAhPT0gYSA/IHIgPSBvICsgMSA6IGkgPSBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbih0LCBlLCBTbywgbikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IG4oZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvID0gdCA/IHQubGVuZ3RoIDogMCwgYSA9IGUgIT09IGUsIHMgPSBudWxsID09PSBlLCB1ID0gZSA9PT0gRTsgbyA+IGk7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IG1hKChpICsgbykgLyAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gbih0W2NdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gbCAhPT0gRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gbCA9PT0gbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhKSB2YXIgaCA9IHAgfHwgcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaCA9IHMgPyBwICYmIGYgJiYgKHIgfHwgbnVsbCAhPSBsKSA6IHUgPyBwICYmIChyIHx8IGYpIDogbnVsbCA9PSBsID8gITEgOiByID8gZSA+PSBsIDogZSA+IGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID8gaSA9IGMgKyAxIDogbyA9IGMKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2EobywgTmEpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBhbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiB0KSByZXR1cm4gU287CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlID09PSBFKSByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuY2FsbChlLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4sIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuY2FsbChlLCBuLCByLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4sIHIsIGksIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuY2FsbChlLCBuLCByLCBpLCBvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4sIHIsIGksIG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuY2FsbChlLCBuLCByLCBpLCBvLCBhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseShlLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNuKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBuZXcgYWEodC5ieXRlTGVuZ3RoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBuZXcgZGEoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnNldChuZXcgZGEodCkpLCBlCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1bih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSBuLmxlbmd0aCwgaSA9IC0xLCBvID0gX2EodC5sZW5ndGggLSByLCAwKSwgYSA9IC0xLCBzID0gZS5sZW5ndGgsIHUgPSBGbyhzICsgbyk7ICsrYSA8IHM7KSB1W2FdID0gZVthXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ICsraSA8IHI7KSB1W25baV1dID0gdFtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IG8tLTspIHVbYSsrXSA9IHRbaSsrXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNuKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IC0xLCBpID0gbi5sZW5ndGgsIG8gPSAtMSwgYSA9IF9hKHQubGVuZ3RoIC0gaSwgMCksIHMgPSAtMSwgdSA9IGUubGVuZ3RoLCBjID0gRm8oYSArIHUpOyArK28gPCBhOykgY1tvXSA9IHRbb107CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGwgPSBvOyArK3MgPCB1OykgY1tsICsgc10gPSBlW3NdOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgKytyIDwgaTspIGNbbCArIG5bcl1dID0gdFtvKytdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbG4odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBlID8gZSgpIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociA9IEZuKHIsIGksIDMpLCBBcyhuKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhID0gLTEsIHMgPSBuLmxlbmd0aDsgKythIDwgczspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBuW2FdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0KG8sIHUsIHIodSwgYSwgbiksIG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIFBhKG4sIGZ1bmN0aW9uKGUsIG4sIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdChvLCBlLCByKGUsIG4sIGkpLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZm4odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geWkoZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAtMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gbnVsbCA9PSBlID8gMCA6IG4ubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBpID4gMiA/IG5baSAtIDJdIDogRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gaSA+IDIgPyBuWzJdIDogRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gaSA+IDEgPyBuW2kgLSAxXSA6IEU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIG8gPyAobyA9IGFuKG8sIHMsIDUpLCBpIC09IDIpIDogKG8gPSAiZnVuY3Rpb24iID09IHR5cGVvZiBzID8gcyA6IEUsIGkgLT0gbyA/IDEgOiAwKSwgYSAmJiBabihuWzBdLCBuWzFdLCBhKSAmJiAobyA9IDMgPiBpID8gRSA6IG8sIGkgPSAxKTsgKytyIDwgaTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IG5bcl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSAmJiB0KGUsIHUsIG8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcG4odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBuID8gQmEobikgOiAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFucihpKSkgcmV0dXJuIHQobiwgcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBvID0gZSA/IGkgOiAtMSwgYSA9IGZyKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlID8gby0tIDogKytvIDwgaSkgJiYgcihhW29dLCBvLCBhKSAhPT0gITE7KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhuKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBmcihlKSwgbyA9IHIoZSksIGEgPSBvLmxlbmd0aCwgcyA9IHQgPyBhIDogLTE7IHQgPyBzLS0gOiArK3MgPCBhOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gb1tzXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobihpW3VdLCB1LCBpKSA9PT0gITEpIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG4oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMgJiYgdGhpcyAhPT0gbmUgJiYgdGhpcyBpbnN0YW5jZW9mIG4gPyByIDogdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLmFwcGx5KGUsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHluKHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geWEgJiYgZmEgPyBuZXcgWXQodCkgOiBudWxsCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB2bih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gLTEsIHIgPSBFbyhsbyhlKSksIGkgPSByLmxlbmd0aCwgbyA9ICIiOyArK24gPCBpOykgbyA9IHQobywgcltuXSwgbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB5bih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gYXJndW1lbnRzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0KGVbMF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0KGVbMF0sIGVbMV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0KGVbMF0sIGVbMV0sIGVbMl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0KGVbMF0sIGVbMV0sIGVbMl0sIGVbM10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0KGVbMF0sIGVbMV0sIGVbMl0sIGVbM10sIGVbNF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0KGVbMF0sIGVbMV0sIGVbMl0sIGVbM10sIGVbNF0sIGVbNV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0KGVbMF0sIGVbMV0sIGVbMl0sIGVbM10sIGVbNF0sIGVbNV0sIGVbNl0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IERhKHQucHJvdG90eXBlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdC5hcHBseShuLCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBMaShyKSA/IHIgOiBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZShuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmIFpuKG4sIHIsIGkpICYmIChyID0gRSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9ICRuKG4sIHQsIEUsIEUsIEUsIEUsIEUsIHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8ucGxhY2Vob2xkZXIgPSBlLnBsYWNlaG9sZGVyLCBvCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGJuKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlpKGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gblswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHIgPyByIDogKG4ucHVzaChlKSwgdC5hcHBseShFLCBuKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHhuKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4sIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICYmIFpuKG4sIHIsIGkpICYmIChyID0gRSksIHIgPSBGbihyLCBpLCAzKSwgMSA9PSByLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBBcyhuKSA/IG4gOiBscihuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGFlKG4sIHIsIHQsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbi5sZW5ndGggfHwgbyAhPT0gZSkgcmV0dXJuIG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBFZShuLCByLCB0LCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB3bih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuLCByLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociA9IEZuKHIsIG8sIDMpLCBBcyhuKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gaShuLCByLCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSA+IC0xID8gblthXSA6IEUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTZShuLCByLCB0KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBfbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSAmJiBlLmxlbmd0aCA/IChuID0gRm4obiwgciwgMyksIGkoZSwgbiwgdCkpIDogLTEKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ga24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPSBGbihuLCByLCAzKSwgU2UoZSwgbiwgdCwgITApCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFRuKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSB0ID8gbiA6IC0xLCBpID0gMCwgbyA9IEZvKG4pOyB0ID8gci0tIDogKytyIDwgbjspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG9baSsrXSA9IGFyZ3VtZW50c1tyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgYSkgdGhyb3cgbmV3IFlvKFUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFlICYmIG0ucHJvdG90eXBlLnRocnUgJiYgIndyYXBwZXIiID09IEJuKGEpICYmIChlID0gbmV3IG0oW10sICEwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAociA9IGUgPyAtMSA6IG47ICsrciA8IG47KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG9bcl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBCbihhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9ICJ3cmFwcGVyIiA9PSBzID8gRmEoYSkgOiBFOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB1ICYmIGVyKHVbMF0pICYmIHVbMV0gPT0gKEwgfCBOIHwgSSB8IEQpICYmICF1WzRdLmxlbmd0aCAmJiAxID09IHVbOV0gPyBlW0JuKHVbMF0pXS5hcHBseShlLCB1WzNdKSA6IDEgPT0gYS5sZW5ndGggJiYgZXIoYSkgPyBlW3NdKCkgOiBlLnRocnUoYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGFyZ3VtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgJiYgMSA9PSB0Lmxlbmd0aCAmJiBBcyhyKSAmJiByLmxlbmd0aCA+PSBNKSByZXR1cm4gZS5wbGFudChyKS52YWx1ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBhID0gbiA/IG9baV0uYXBwbHkodGhpcywgdCkgOiByOyArK2kgPCBuOykgYSA9IG9baV0uY2FsbCh0aGlzLCBhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBFbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgciAmJiBpID09PSBFICYmIEFzKG4pID8gdChuLCByKSA6IGUobiwgYW4ociwgaSwgMykpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGpuKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgbiB8fCByICE9PSBFKSAmJiAobiA9IGFuKG4sIHIsIDMpKSwgdChlLCBuLCB0bykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQ24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgiZnVuY3Rpb24iICE9IHR5cGVvZiBuIHx8IHIgIT09IEUpICYmIChuID0gYW4obiwgciwgMykpLCB0KGUsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFNuKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA9IEZuKG4sIHIsIDMpLCBSZShlLCBmdW5jdGlvbihlLCByLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBuKGUsIHIsIG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0ID8gYSA6IHIsIGUgPSB0ID8gZSA6IGEsIGlbcl0gPSBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgaQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBBbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9IHMoZSksICh0ID8gZSA6ICIiKSArIE9uKGUsIG4sIHIpICsgKHQgPyAiIiA6IGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE5uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB5aShmdW5jdGlvbihuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGIociwgZS5wbGFjZWhvbGRlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJG4obiwgdCwgRSwgciwgaSkKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBSbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuLCByLCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGFyZ3VtZW50cy5sZW5ndGggPCAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIHIgJiYgbyA9PT0gRSAmJiBBcyhuKSA/IHQobiwgciwgaSwgYSkgOiBHZShuLCBGbihyLCBvLCA0KSwgaSwgYSwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gSW4odCwgZSwgbiwgciwgaSwgbywgYSwgcywgdSwgYykgewogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBsKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbSA9IGFyZ3VtZW50cy5sZW5ndGgsIHggPSBtLCB3ID0gRm8obSk7IHgtLTspIHdbeF0gPSBhcmd1bWVudHNbeF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociAmJiAodyA9IHVuKHcsIHIsIGkpKSwgbyAmJiAodyA9IGNuKHcsIG8sIGEpKSwgZCB8fCB2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF8gPSBsLnBsYWNlaG9sZGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrID0gYih3LCBfKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobSAtPSBrLmxlbmd0aCwgYyA+IG0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFQgPSBzID8gdGUocykgOiBFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IF9hKGMgLSBtLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEgPSBkID8gayA6IEUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOID0gZCA/IEUgOiBrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUiA9IGQgPyB3IDogRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEwgPSBkID8gRSA6IHc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgfD0gZCA/IEkgOiBPLCBlICY9IH4oZCA/IE8gOiBJKSwgZyB8fCAoZSAmPSB+KEMgfCBTKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBEID0gW3QsIGUsIG4sIFIsIEEsIEwsIE4sIFQsIHUsIGpdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUCA9IEluLmFwcGx5KEUsIEQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXIodCkgJiYgVWEoUCwgRCksIFAucGxhY2Vob2xkZXIgPSBfLCBQCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICQgPSBwID8gbiA6IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGggPyAkW3RdIDogdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzICYmICh3ID0gdXIodywgcykpLCBmICYmIHUgPCB3Lmxlbmd0aCAmJiAody5sZW5ndGggPSB1KSwgdGhpcyAmJiB0aGlzICE9PSBuZSAmJiB0aGlzIGluc3RhbmNlb2YgbCAmJiAocSA9IHkgfHwgeW4odCkpLCBxLmFwcGx5KCQsIHcpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBlICYgTCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBlICYgQywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBlICYgUywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBlICYgTiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBlICYgQSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBlICYgUiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBoID8gRSA6IHluKHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gT24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9ICtlLCByID49IGUgfHwgIXhhKGUpKSByZXR1cm4gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZSAtIHI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID0gbnVsbCA9PSBuID8gIiAiIDogbiArICIiLCB5byhuLCB2YShpIC8gbi5sZW5ndGgpKS5zbGljZSgwLCBpKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTG4odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IC0xLCBzID0gYXJndW1lbnRzLmxlbmd0aCwgdSA9IC0xLCBjID0gci5sZW5ndGgsIGwgPSBGbyhjICsgcyk7ICsrdSA8IGM7KSBsW3VdID0gclt1XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBzLS07KSBsW3UrK10gPSBhcmd1bWVudHNbKytlXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gdGhpcyAmJiB0aGlzICE9PSBuZSAmJiB0aGlzIGluc3RhbmNlb2YgaSA/IGEgOiB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYuYXBwbHkobyA/IG4gOiB0aGlzLCBsKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZSAmIEMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0geW4odCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBEbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gem9bdF07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA9IG4gPT09IEUgPyAwIDogK24gfHwgMCwgbiA/IChuID0gY2EoMTAsIG4pLCBlKHQgKiBuKSAvIG4pIDogZSh0KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBQbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCBuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IEZuKHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gciAmJiBvID09PSB4ZSA/IHJuKGUsIG4sIHQpIDogb24oZSwgbiwgbyhyLCBpLCAxKSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gJG4odCwgZSwgbiwgciwgaSwgbywgYSwgcykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IGUgJiBTOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXUgJiYgImZ1bmN0aW9uIiAhPSB0eXBlb2YgdCkgdGhyb3cgbmV3IFlvKFUpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHIgPyByLmxlbmd0aCA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjIHx8IChlICY9IH4oSSB8IE8pLCByID0gaSA9IEUpLCBjIC09IGkgPyBpLmxlbmd0aCA6IDAsIGUgJiBPKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gaSA9IEUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IHUgPyBFIDogRmEodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gW3QsIGUsIG4sIHIsIGksIGwsIGYsIG8sIGEsIHNdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocCAmJiAoaXIoaCwgcCksIGUgPSBoWzFdLCBzID0gaFs5XSksIGhbOV0gPSBudWxsID09IHMgPyB1ID8gMCA6IHQubGVuZ3RoIDogX2EocyAtIGMsIDApIHx8IDAsIGUgPT0gQykgdmFyIGQgPSBkbihoWzBdLCBoWzJdKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBkID0gZSAhPSBJICYmIGUgIT0gKEMgfCBJKSB8fCBoWzRdLmxlbmd0aCA/IEluLmFwcGx5KEUsIGgpIDogTG4uYXBwbHkoRSwgaCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnID0gcCA/IE1hIDogVWE7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnKGQsIGgpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBxbih0LCBlLCBuLCByLCBpLCBvLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gdC5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gZS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1ICE9IGMgJiYgIShpICYmIGMgPiB1KSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgKytzIDwgdTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gdFtzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gZVtzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gciA/IHIoaSA/IGYgOiBsLCBpID8gbCA6IGYsIHMpIDogRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwICE9PSBFKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHApIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBlKGUsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsID09PSB0IHx8IG4obCwgdCwgciwgaSwgbywgYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsICE9PSBmICYmICFuKGwsIGYsIHIsIGksIG8sIGEpKSByZXR1cm4gITEKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITAKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEhuKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICt0ID09ICtlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBKOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0Lm5hbWUgPT0gZS5uYW1lICYmIHQubWVzc2FnZSA9PSBlLm1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEs6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgIT0gK3QgPyBlICE9ICtlIDogdCA9PSArZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgdHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIG50OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09IGUgKyAiIgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTW4odCwgZSwgbiwgciwgaSwgbywgYSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IE1zKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHMubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IE1zKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodSAhPSBsICYmICFpKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGYgPSB1OyBmLS07KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IHNbZl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpID8gcCBpbiBlIDogZWEuY2FsbChlLCBwKSkpIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGggPSBpOyArK2YgPCB1OykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHNbZl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IHRbcF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGVbcF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IHIgPyByKGkgPyBnIDogZCwgaSA/IGQgOiBnLCBwKSA6IEU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh2ID09PSBFID8gbihkLCBnLCByLCBpLCBvLCBhKSA6IHYpKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoIHx8IChoID0gImNvbnN0cnVjdG9yIiA9PSBwKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSB0LmNvbnN0cnVjdG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBlLmNvbnN0cnVjdG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHkgIT0gbSAmJiAiY29uc3RydWN0b3IiIGluIHQgJiYgImNvbnN0cnVjdG9yIiBpbiBlICYmICEoImZ1bmN0aW9uIiA9PSB0eXBlb2YgeSAmJiB5IGluc3RhbmNlb2YgeSAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBtICYmIG0gaW5zdGFuY2VvZiBtKSkgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBGbih0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZS5jYWxsYmFjayB8fCBqbzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgPSBpID09PSBqbyA/IHhlIDogaSwgciA/IGkodCwgbiwgcikgOiBpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBCbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSB0Lm5hbWUsIG4gPSBMYVtlXSwgciA9IG4gPyBuLmxlbmd0aCA6IDA7IHItLTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gbltyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gaS5mdW5jOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gbyB8fCBvID09IHQpIHJldHVybiBpLm5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gVW4odCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGUuaW5kZXhPZiB8fCBUcjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgPSBpID09PSBUciA/IG8gOiBpLCB0ID8gaSh0LCBuLCByKSA6IGkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFduKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IGVvKHQpLCBuID0gZS5sZW5ndGg7IG4tLTspIGVbbl1bMl0gPSBycihlW25dWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHpuKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBudWxsID09IHQgPyBFIDogdFtlXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRpKG4pID8gbiA6IEUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFZuKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IC0xLCBpID0gbi5sZW5ndGg7ICsrciA8IGk7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IG5bcl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG8uc2l6ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoby50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZHJvcCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgKz0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZHJvcFJpZ2h0IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSAtPSBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJ0YWtlIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGthKGUsIHQgKyBhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAidGFrZVJpZ2h0IjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IF9hKHQsIGUgLSBhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBHbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdC5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gbmV3IHQuY29uc3RydWN0b3IoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlICYmICJzdHJpbmciID09IHR5cGVvZiB0WzBdICYmIGVhLmNhbGwodCwgImluZGV4IikgJiYgKG4uaW5kZXggPSB0LmluZGV4LCBuLmlucHV0ID0gdC5pbnB1dCksIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFhuKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0LmNvbnN0cnVjdG9yOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSAmJiBlIGluc3RhbmNlb2YgZSB8fCAoZSA9IEdvKSwgbmV3IGUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEpuKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0LmNvbnN0cnVjdG9yOwogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgaXQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNuKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBHOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBYOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgcigrdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIG90OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBhdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Ugc3Q6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHV0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBjdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgbHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGZ0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBwdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgaHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0LmJ1ZmZlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHIobiA/IHNuKGkpIDogaSwgdC5ieXRlT2Zmc2V0LCB0Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEs6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIG50OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgcih0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgdHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBuZXcgcih0LnNvdXJjZSwgSXQuZXhlYyh0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5sYXN0SW5kZXggPSB0Lmxhc3RJbmRleAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBZbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT0gdCB8fCB0cihlLCB0KSB8fCAoZSA9IHByKGUpLCB0ID0gMSA9PSBlLmxlbmd0aCA/IHQgOiBMZSh0LCBYZShlLCAwLCAtMSkpLCBlID0ganIoZSkpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG51bGwgPT0gdCA/IHQgOiB0W2VdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSByID8gRSA6IHIuYXBwbHkodCwgbikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFFuKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdCAmJiBucihCYSh0KSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEtuKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSAibnVtYmVyIiA9PSB0eXBlb2YgdCB8fCBEdC50ZXN0KHQpID8gK3QgOiAtMSwgZSA9IG51bGwgPT0gZSA/IElhIDogZSwgdCA+IC0xICYmIHQgJSAxID09IDAgJiYgZSA+IHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFpuKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFMaShuKSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHR5cGVvZiBlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIm51bWJlciIgPT0gciA/IFFuKG4pICYmIEtuKGUsIG4ubGVuZ3RoKSA6ICJzdHJpbmciID09IHIgJiYgZSBpbiBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG5bZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gdCA/IHQgPT09IGkgOiBpICE9PSBpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB0cih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdHlwZW9mIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgic3RyaW5nIiA9PSBuICYmIEV0LnRlc3QodCkgfHwgIm51bWJlciIgPT0gbikgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXModCkpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAhVHQudGVzdCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgfHwgbnVsbCAhPSBlICYmIHQgaW4gZnIoZSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVyKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBCbih0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobiBpbiBRLnByb3RvdHlwZSkpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlW25dOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA9PT0gcikgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IEZhKHIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISFpICYmIHQgPT09IGlbMF0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG5yKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJudW1iZXIiID09IHR5cGVvZiB0ICYmIHQgPiAtMSAmJiB0ICUgMSA9PSAwICYmIElhID49IHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJyKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IHQgJiYgIUxpKHQpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpcih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdFsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG4gfCByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IEwgPiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHIgPT0gTCAmJiBuID09IE4gfHwgciA9PSBMICYmIG4gPT0gRCAmJiB0WzddLmxlbmd0aCA8PSBlWzhdIHx8IHIgPT0gKEwgfCBEKSAmJiBuID09IE47CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbyAmJiAhYSkgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHIgJiBDICYmICh0WzJdID0gZVsyXSwgaSB8PSBuICYgQyA/IDAgOiBBKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBlWzNdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSB0WzNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdFszXSA9IHUgPyB1bih1LCBzLCBlWzRdKSA6IHRlKHMpLCB0WzRdID0gdSA/IGIodFszXSwgVykgOiB0ZShlWzRdKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzID0gZVs1XSwgcyAmJiAodSA9IHRbNV0sIHRbNV0gPSB1ID8gY24odSwgcywgZVs2XSkgOiB0ZShzKSwgdFs2XSA9IHUgPyBiKHRbNV0sIFcpIDogdGUoZVs2XSkpLCBzID0gZVs3XSwgcyAmJiAodFs3XSA9IHRlKHMpKSwgciAmIEwgJiYgKHRbOF0gPSBudWxsID09IHRbOF0gPyBlWzhdIDoga2EodFs4XSwgZVs4XSkpLCBudWxsID09IHRbOV0gJiYgKHRbOV0gPSBlWzldKSwgdFswXSA9IGVbMF0sIHRbMV0gPSBpLCB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvcih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSBFID8gZSA6IE5zKHQsIGUsIG9yKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYXIodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0ID0gZnIodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAtMSwgciA9IGUubGVuZ3RoLCBpID0ge307ICsrbiA8IHI7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGVbbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvIGluIHQgJiYgKGlbb10gPSB0W29dKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzcih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOZSh0LCBmdW5jdGlvbih0LCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlKHQsIHIsIGkpICYmIChuW3JdID0gdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSksIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVyKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IHQubGVuZ3RoLCByID0ga2EoZS5sZW5ndGgsIG4pLCBpID0gdGUodCk7IHItLTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZVtyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbcl0gPSBLbihvLCBuKSA/IGlbb10gOiBFCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNyKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IHRvKHQpLCBuID0gZS5sZW5ndGgsIHIgPSBuICYmIHQubGVuZ3RoLCBpID0gISFyICYmIG5yKHIpICYmIChBcyh0KSB8fCBFaSh0KSksIG8gPSAtMSwgYSA9IFtdOyArK28gPCBuOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBlW29dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgJiYgS24ocywgcikgfHwgZWEuY2FsbCh0LCBzKSkgJiYgYS5wdXNoKHMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGxyKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCA/IFtdIDogUW4odCkgPyBMaSh0KSA/IHQgOiBHbyh0KSA6IG9vKHQpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBmcih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBMaSh0KSA/IHQgOiBHbyh0KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcHIodCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXModCkpIHJldHVybiB0OwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcyh0KS5yZXBsYWNlKGp0LCBmdW5jdGlvbih0LCBuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnB1c2gociA/IGkucmVwbGFjZShOdCwgIiQxIikgOiBuIHx8IHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBlCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBocih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgUSA/IHQuY2xvbmUoKSA6IG5ldyBtKHQuX193cmFwcGVkX18sIHQuX19jaGFpbl9fLCB0ZSh0Ll9fYWN0aW9uc19fKSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRyKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IChuID8gWm4odCwgZSwgbikgOiBudWxsID09IGUpID8gMSA6IF9hKG1hKGUpIHx8IDEsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gMCwgaSA9IHQgPyB0Lmxlbmd0aCA6IDAsIG8gPSAtMSwgYSA9IEZvKHZhKGkgLyBlKSk7IGkgPiByOykgYVsrK29dID0gWGUodCwgciwgciArPSBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdyKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IC0xLCBuID0gdCA/IHQubGVuZ3RoIDogMCwgciA9IC0xLCBpID0gW107ICsrZSA8IG47KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRbZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvICYmIChpWysrcl0gPSBvKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB2cih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdCA/IHQubGVuZ3RoIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPyAoKG4gPyBabih0LCBlLCBuKSA6IG51bGwgPT0gZSkgJiYgKGUgPSAxKSwgWGUodCwgMCA+IGUgPyAwIDogZSkpIDogW10KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHlyKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0ID8gdC5sZW5ndGggOiAwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciA/ICgobiA/IFpuKHQsIGUsIG4pIDogbnVsbCA9PSBlKSAmJiAoZSA9IDEpLCBlID0gciAtICgrZSB8fCAwKSwgWGUodCwgMCwgMCA+IGUgPyAwIDogZSkpIDogW10KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1yKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgJiYgdC5sZW5ndGggPyBlbih0LCBGbihlLCBuLCAzKSwgITAsICEwKSA6IFtdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBicih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ICYmIHQubGVuZ3RoID8gZW4odCwgRm4oZSwgbiwgMyksICEwKSA6IFtdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB4cih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdCA/IHQubGVuZ3RoIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgPyAobiAmJiAibnVtYmVyIiAhPSB0eXBlb2YgbiAmJiBabih0LCBlLCBuKSAmJiAobiA9IDAsIHIgPSBpKSwgamUodCwgZSwgbiwgcikpIDogW10KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdyKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPyB0WzBdIDogRQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gX3IodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQgPyB0Lmxlbmd0aCA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuICYmIFpuKHQsIGUsIG4pICYmIChlID0gITEpLCByID8gQWUodCwgZSkgOiBbXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ga3IodCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQgPyB0Lmxlbmd0aCA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID8gQWUodCwgITApIDogW10KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFRyKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0ID8gdC5sZW5ndGggOiAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHJldHVybiAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJudW1iZXIiID09IHR5cGVvZiBuKSBuID0gMCA+IG4gPyBfYShyICsgbiwgMCkgOiBuOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHJuKHQsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPiBpICYmIChlID09PSBlID8gZSA9PT0gdFtpXSA6IHRbaV0gIT09IHRbaV0pID8gaSA6IC0xCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8odCwgZSwgbiB8fCAwKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRXIodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geXIodCwgMSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGpyKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0ID8gdC5sZW5ndGggOiAwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA/IHRbZSAtIDFdIDogRQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQ3IodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQgPyB0Lmxlbmd0aCA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcikgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgibnVtYmVyIiA9PSB0eXBlb2YgbikgaSA9ICgwID4gbiA/IF9hKHIgKyBuLCAwKSA6IGthKG4gfHwgMCwgciAtIDEpKSArIDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBybih0LCBlLCAhMCkgLSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0W2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlID09PSBlID8gZSA9PT0gbyA6IG8gIT09IG8pID8gaSA6IC0xCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgIT09IGUpIHJldHVybiB2KHQsIGksICEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGktLTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodFtpXSA9PT0gZSkgcmV0dXJuIGk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gU3IoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gYXJndW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHRbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZSB8fCAhZS5sZW5ndGgpIHJldHVybiBlOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgciA9IFVuKCksIGkgPSB0Lmxlbmd0aDsgKytuIDwgaTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBvID0gMCwgYSA9IHRbbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8gPSByKGUsIGEsIG8pKSA+IC0xOykgaGEuY2FsbChlLCBvLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEFyKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0IHx8ICF0Lmxlbmd0aCkgcmV0dXJuIHI7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZSA9IEZuKGUsIG4sIDMpOyArK2kgPCBhOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB0W2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZShzLCBpLCB0KSAmJiAoci5wdXNoKHMpLCBvLnB1c2goaSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHplKHQsIG8pLCByCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBOcih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2cih0LCAxKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUnIodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQgPyB0Lmxlbmd0aCA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID8gKG4gJiYgIm51bWJlciIgIT0gdHlwZW9mIG4gJiYgWm4odCwgZSwgbikgJiYgKGUgPSAwLCBuID0gciksIFhlKHQsIGUsIG4pKSA6IFtdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBJcih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdCA/IHQubGVuZ3RoIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPyAoKG4gPyBabih0LCBlLCBuKSA6IG51bGwgPT0gZSkgJiYgKGUgPSAxKSwgWGUodCwgMCwgMCA+IGUgPyAwIDogZSkpIDogW10KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE9yKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0ID8gdC5sZW5ndGggOiAwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciA/ICgobiA/IFpuKHQsIGUsIG4pIDogbnVsbCA9PSBlKSAmJiAoZSA9IDEpLCBlID0gciAtICgrZSB8fCAwKSwgWGUodCwgMCA+IGUgPyAwIDogZSkpIDogW10KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIExyKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgJiYgdC5sZW5ndGggPyBlbih0LCBGbihlLCBuLCAzKSwgITEsICEwKSA6IFtdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBEcih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ICYmIHQubGVuZ3RoID8gZW4odCwgRm4oZSwgbiwgMykpIDogW10KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFByKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0ID8gdC5sZW5ndGggOiAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWkpIHJldHVybiBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBlICYmICJib29sZWFuIiAhPSB0eXBlb2YgZSAmJiAociA9IG4sIG4gPSBabih0LCBlLCByKSA/IEUgOiBlLCBlID0gITEpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IEZuKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobnVsbCAhPSBuIHx8IGEgIT09IHhlKSAmJiAobiA9IGEobiwgciwgMykpLCBlICYmIFVuKCkgPT0gbyA/IHgodCwgbikgOiBaZSh0LCBuKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gJHIodCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXQgfHwgIXQubGVuZ3RoKSByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHNlKHQsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRbih0KSA/IChuID0gX2EodC5sZW5ndGgsIG4pLCAhMCkgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSBGbyhuKTsgKytlIDwgbjspIHJbZV0gPSB1ZSh0LCBVZShlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBxcih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdCA/IHQubGVuZ3RoIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyKSByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gJHIodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IGUgPyBpIDogKGUgPSBhbihlLCBuLCA0KSwgdWUoaSwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxlKHQsIGUsIEUsICEwKQogICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEhyKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gLTEsIGUgPSBhcmd1bWVudHMubGVuZ3RoOyArK3QgPCBlOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBhcmd1bWVudHNbdF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUW4obikpIHZhciByID0gciA/IGNlKGtlKHIsIG4pLCBrZShuLCByKSkgOiBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPyBaZShyKSA6IFtdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBNcih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdCA/IHQubGVuZ3RoIDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICghciB8fCBlIHx8IEFzKHRbMF0pIHx8IChlID0gW10pOyArK24gPCByOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0W25dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA/IGlbb10gPSBlW25dIDogbyAmJiAoaVtvWzBdXSA9IG9bMV0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEZyKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlKHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5fX2NoYWluX18gPSAhMCwgbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQnIodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5jYWxsKG4sIHQpLCB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBVcih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmNhbGwobiwgdCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFdyKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRnIodGhpcykKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHpyKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IG0odGhpcy52YWx1ZSgpLCB0aGlzLl9fY2hhaW5fXykKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFZyKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSwgciA9IHRoaXM7IHIgaW5zdGFuY2VvZiBuOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBocihyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPyBvLl9fd3JhcHBlZF9fID0gaSA6IGUgPSBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHIuX193cmFwcGVkX18KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5fX3dyYXBwZWRfXyA9IHQsIGUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEdyKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuX193cmFwcGVkX18sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuICYmIG4uX19kaXJfXyA8IDAgPyB0IDogdC5yZXZlcnNlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgUSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19hY3Rpb25zX18ubGVuZ3RoICYmIChuID0gbmV3IFEodGhpcykpLCBuID0gbi5yZXZlcnNlKCksIG4uX19hY3Rpb25zX18ucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYzogVXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogW2VdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNBcmc6IEUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBuZXcgbShuLCB0aGlzLl9fY2hhaW5fXykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aHJ1KGUpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBYcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUoKSArICIiCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBKcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5uKHRoaXMuX193cmFwcGVkX18sIHRoaXMuX19hY3Rpb25zX18pCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBZcih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gQXModCkgPyBvZSA6IFRlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiAmJiBabih0LCBlLCBuKSAmJiAoZSA9IEUpLCAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgZSB8fCBuICE9PSBFKSAmJiAoZSA9IEZuKGUsIG4sIDMpKSwgcih0LCBlKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUXIodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IEFzKHQpID8gc2UgOiBDZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPSBGbihlLCBuLCAzKSwgcih0LCBlKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gS3IodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXModCwgSGUoZSkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBacih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdCA/IEJhKHQpIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5yKGkpIHx8ICh0ID0gb28odCksIGkgPSB0Lmxlbmd0aCksIG4gPSAibnVtYmVyIiAhPSB0eXBlb2YgbiB8fCByICYmIFpuKGUsIG4sIHIpID8gMCA6IDAgPiBuID8gX2EoaSArIG4sIDApIDogbiB8fCAwLCAic3RyaW5nIiA9PSB0eXBlb2YgdCB8fCAhQXModCkgJiYgQmkodCkgPyBpID49IG4gJiYgdC5pbmRleE9mKGUsIG4pID4gLTEgOiAhIWkgJiYgVW4odCwgZSwgbikgPiAtMQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdGkodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IEFzKHQpID8gdWUgOiBxZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPSBGbihlLCBuLCAzKSwgcih0LCBlKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZWkodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGkodCwgTG8oZSkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBuaSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gQXModCkgPyBzZSA6IENlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9IEZuKGUsIG4sIDMpLCByKHQsIGZ1bmN0aW9uKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhZSh0LCBuLCByKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcmkodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA/IFpuKHQsIGUsIG4pIDogbnVsbCA9PSBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gbHIodCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPiAwID8gdFtWZSgwLCByIC0gMSldIDogRQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gR2kodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gby5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gciAtIDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZSA9IGthKDAgPiBlID8gMCA6ICtlIHx8IDAsIHIpOyArK2kgPCBlOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBWZShpLCBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gb1tzXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9bc10gPSBvW2ldLCBvW2ldID0gdQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvLmxlbmd0aCA9IGUsIG8KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGlpKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJpKHQsIFNhKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gb2kodCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQgPyBCYSh0KSA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBucihlKSA/IGUgOiBNcyh0KS5sZW5ndGgKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFpKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBBcyh0KSA/IHBlIDogSmU7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuICYmIFpuKHQsIGUsIG4pICYmIChlID0gRSksICgiZnVuY3Rpb24iICE9IHR5cGVvZiBlIHx8IG4gIT09IEUpICYmIChlID0gRm4oZSwgbiwgMykpLCByKHQsIGUpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzaSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQpIHJldHVybiBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiBabih0LCBlLCBuKSAmJiAoZSA9IEUpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IC0xOwogICAgICAgICAgICAgICAgICAgICAgICBlID0gRm4oZSwgbiwgMyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gcWUodCwgZnVuY3Rpb24odCwgbiwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcml0ZXJpYTogZSh0LCBuLCBpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogKytyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWWUoaSwgbCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVpKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCA/IFtdIDogKHIgJiYgWm4oZSwgbiwgcikgJiYgKG4gPSBFKSwgQXMoZSkgfHwgKGUgPSBudWxsID09IGUgPyBbXSA6IFtlXSksIEFzKG4pIHx8IChuID0gbnVsbCA9PSBuID8gW10gOiBbbl0pLCBRZSh0LCBlLCBuKSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNpKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFFyKHQsIEhlKGUpKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbGkodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHQpIHRocm93IG5ldyBZbyhVKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBlLCBlID0gbgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0geGEodCA9ICt0KSA/IHQgOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0tdCA8IDEgPyBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZpKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gJiYgWm4odCwgZSwgbikgJiYgKGUgPSBFKSwgZSA9IHQgJiYgbnVsbCA9PSBlID8gdC5sZW5ndGggOiBfYSgrZSB8fCAwLCAwKSwgJG4odCwgTCwgRSwgRSwgRSwgRSwgZSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHBpKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgdCkgdGhyb3cgbmV3IFlvKFUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGUsIGUgPSByCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0tdCA+IDAgJiYgKG4gPSBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpLCAxID49IHQgJiYgKGUgPSBFKSwgbgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBoaSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoICYmIHNhKGgpLCBjICYmIHNhKGMpLCBnID0gMCwgYyA9IGggPSBkID0gRQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gJiYgc2EobiksIGMgPSBoID0gZCA9IEUsIGUgJiYgKGcgPSBncygpLCBsID0gdC5hcHBseShwLCB1KSwgaCB8fCBjIHx8ICh1ID0gcCA9IEUpKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlIC0gKGdzKCkgLSBmKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPj0gdCB8fCB0ID4gZSA/IGkoZCwgYykgOiBoID0gcGEobywgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkoeSwgaCkKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcygpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1ID0gYXJndW1lbnRzLCBmID0gZ3MoKSwgcCA9IHRoaXMsIGQgPSB5ICYmIChoIHx8ICFtKSwgdiA9PT0gITEpIHZhciBuID0gbSAmJiAhaDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgfHwgbSB8fCAoZyA9IGYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdiAtIChmIC0gZyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwID49IHIgfHwgciA+IHY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA/IChjICYmIChjID0gc2EoYykpLCBnID0gZiwgbCA9IHQuYXBwbHkocCwgdSkpIDogYyB8fCAoYyA9IHBhKGEsIHIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgJiYgaCA/IGggPSBzYShoKSA6IGggfHwgZSA9PT0gdiB8fCAoaCA9IHBhKG8sIGUpKSwgbiAmJiAoaSA9ICEwLCBsID0gdC5hcHBseShwLCB1KSksICFpIHx8IGggfHwgYyB8fCAodSA9IHAgPSBFKSwgbAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1LCBjLCBsLCBmLCBwLCBoLCBkLCBnID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHQpIHRocm93IG5ldyBZbyhVKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPSAwID4gZSA/IDAgOiArZSB8fCAwLCBuID09PSAhMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSAhMQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgTGkobikgJiYgKG0gPSAhIW4ubGVhZGluZywgdiA9ICJtYXhXYWl0IiBpbiBuICYmIF9hKCtuLm1heFdhaXQgfHwgMCwgZSksIHkgPSAidHJhaWxpbmciIGluIG4gPyAhIW4udHJhaWxpbmcgOiB5KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuY2FuY2VsID0gciwgcwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZGkodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgdCB8fCBlICYmICJmdW5jdGlvbiIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBZbyhVKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gYXJndW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlID8gZS5hcHBseSh0aGlzLCByKSA6IHJbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4uY2FjaGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5oYXMoaSkpIHJldHVybiBvLmdldChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gdC5hcHBseSh0aGlzLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmNhY2hlID0gby5zZXQoaSwgYSksIGEKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uY2FjaGUgPSBuZXcgZGkuQ2FjaGUsIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdpKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHQpIHRocm93IG5ldyBZbyhVKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdmkodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGkoMiwgdCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHlpKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHQpIHRocm93IG5ldyBZbyhVKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPSBfYShlID09PSBFID8gdC5sZW5ndGggLSAxIDogK2UgfHwgMCwgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gYXJndW1lbnRzLCByID0gLTEsIGkgPSBfYShuLmxlbmd0aCAtIGUsIDApLCBvID0gRm8oaSk7ICsrciA8IGk7KSBvW3JdID0gbltlICsgcl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNhbGwodGhpcywgbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNhbGwodGhpcywgblswXSwgbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNhbGwodGhpcywgblswXSwgblsxXSwgbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBGbyhlICsgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyID0gLTE7ICsrciA8IGU7KSBhW3JdID0gbltyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYVtlXSA9IG8sIHQuYXBwbHkodGhpcywgYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1pKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHQpIHRocm93IG5ldyBZbyhVKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmFwcGx5KHRoaXMsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGJpKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHQpIHRocm93IG5ldyBZbyhVKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPT09ICExID8gciA9ICExIDogTGkobikgJiYgKHIgPSAibGVhZGluZyIgaW4gbiA/ICEhbi5sZWFkaW5nIDogciwgaSA9ICJ0cmFpbGluZyIgaW4gbiA/ICEhbi50cmFpbGluZyA6IGkpLCBoaSh0LCBlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFkaW5nOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2FpdDogK2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFpbGluZzogaQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24geGkodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9IG51bGwgPT0gZSA/IFNvIDogZSwgJG4oZSwgSSwgRSwgW3RdLCBbXSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdpKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgJiYgImJvb2xlYW4iICE9IHR5cGVvZiBlICYmIFpuKHQsIGUsIG4pID8gZSA9ICExIDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSAmJiAociA9IG4sIG4gPSBlLCBlID0gITEpLCAiZnVuY3Rpb24iID09IHR5cGVvZiBuID8gd2UodCwgZSwgYW4obiwgciwgMSkpIDogd2UodCwgZSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9pKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgPyB3ZSh0LCAhMCwgYW4oZSwgbiwgMSkpIDogd2UodCwgITApCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBraSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID4gZQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gVGkodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA+PSBlCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBFaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KHQpICYmIFFuKHQpICYmIGVhLmNhbGwodCwgImNhbGxlZSIpICYmICFsYS5jYWxsKHQsICJjYWxsZWUiKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gamkodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gITAgfHwgdCA9PT0gITEgfHwgeSh0KSAmJiByYS5jYWxsKHQpID09IEc7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBDaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KHQpICYmIHJhLmNhbGwodCkgPT0gWAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gU2kodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISF0ICYmIDEgPT09IHQubm9kZVR5cGUgJiYgeSh0KSAmJiAhTWkodCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEFpKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCA/ICEwIDogUW4odCkgJiYgKEFzKHQpIHx8IEJpKHQpIHx8IEVpKHQpIHx8IHkodCkgJiYgT2kodC5zcGxpY2UpKSA/ICF0Lmxlbmd0aCA6ICFNcyh0KS5sZW5ndGgKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE5pKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbiA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIG4gPyBhbihuLCByLCAzKSA6IEU7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gbiA/IG4odCwgZSkgOiBFOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSA9PT0gRSA/IERlKHQsIGUsIG4pIDogISFpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBSaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KHQpICYmICJzdHJpbmciID09IHR5cGVvZiB0Lm1lc3NhZ2UgJiYgcmEuY2FsbCh0KSA9PSBKCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBJaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAibnVtYmVyIiA9PSB0eXBlb2YgdCAmJiB4YSh0KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gT2kodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTGkodCkgJiYgcmEuY2FsbCh0KSA9PSBZCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBMaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdHlwZW9mIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhIXQgJiYgKCJvYmplY3QiID09IGUgfHwgImZ1bmN0aW9uIiA9PSBlKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRGkodCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIG4gPyBhbihuLCByLCAzKSA6IEUsICRlKHQsIFduKGUpLCBuKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUGkodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSGkodCkgJiYgdCAhPSArdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gJGkodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0ID8gITEgOiBPaSh0KSA/IG9hLnRlc3QodGEuY2FsbCh0KSkgOiB5KHQpICYmIEx0LnRlc3QodCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHFpKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT09IHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEhpKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJudW1iZXIiID09IHR5cGVvZiB0IHx8IHkodCkgJiYgcmEuY2FsbCh0KSA9PSBLCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBNaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXkodCkgfHwgcmEuY2FsbCh0KSAhPSBaIHx8IEVpKHQpIHx8ICFlYS5jYWxsKHQsICJjb25zdHJ1Y3RvciIpICYmIChlID0gdC5jb25zdHJ1Y3RvciwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSAmJiAhKGUgaW5zdGFuY2VvZiBlKSkpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOZSh0LCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgbiA9PT0gRSB8fCBlYS5jYWxsKHQsIG4pCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBGaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBMaSh0KSAmJiByYS5jYWxsKHQpID09IHR0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBCaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAic3RyaW5nIiA9PSB0eXBlb2YgdCB8fCB5KHQpICYmIHJhLmNhbGwodCkgPT0gbnQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFVpKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkodCkgJiYgbnIodC5sZW5ndGgpICYmICEhQnRbcmEuY2FsbCh0KV0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFdpKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IEUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHppKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBWaSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID49IHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEdpKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0ID8gQmEodCkgOiAwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnIoZSkgPyBlID8gdGUodCkgOiBbXSA6IG9vKHQpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBYaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiZSh0LCB0byh0KSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEppKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBEYSh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gJiYgWm4odCwgZSwgbikgJiYgKGUgPSBFKSwgZSA/IHllKHIsIGUpIDogcgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gWWkodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2UodCwgdG8odCkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBRaSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbnVsbCA9PSB0ID8gRSA6IExlKHQsIHByKGUpLCBlICsgIiIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciA9PT0gRSA/IG4gOiByCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBLaSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlYS5jYWxsKHQsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW4gJiYgIXRyKGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9IHByKGUpLCB0ID0gMSA9PSBlLmxlbmd0aCA/IHQgOiBMZSh0LCBYZShlLCAwLCAtMSkpLCBudWxsID09IHQpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBqcihlKSwgbiA9IGVhLmNhbGwodCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiB8fCBucih0Lmxlbmd0aCkgJiYgS24oZSwgdC5sZW5ndGgpICYmIChBcyh0KSB8fCBFaSh0KSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFppKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiBabih0LCBlLCBuKSAmJiAoZSA9IEUpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gLTEsIGkgPSBNcyh0KSwgbyA9IGkubGVuZ3RoLCBhID0ge307ICsrciA8IG87KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGlbcl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHRbc107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID8gZWEuY2FsbChhLCB1KSA/IGFbdV0ucHVzaChzKSA6IGFbdV0gPSBbc10gOiBhW3VdID0gcwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB0byh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQpIHJldHVybiBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgTGkodCkgfHwgKHQgPSBHbyh0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlICYmIG5yKGUpICYmIChBcyh0KSB8fCBFaSh0KSkgJiYgZSB8fCAwOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gdC5jb25zdHJ1Y3RvciwgciA9IC0xLCBpID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgbiAmJiBuLnByb3RvdHlwZSA9PT0gdCwgbyA9IEZvKGUpLCBhID0gZSA+IDA7ICsrciA8IGU7KSBvW3JdID0gciArICIiOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzIGluIHQpIGEgJiYgS24ocywgZSkgfHwgImNvbnN0cnVjdG9yIiA9PSBzICYmIChpIHx8ICFlYS5jYWxsKHQsIHMpKSB8fCBvLnB1c2gocyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBlbyh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBmcih0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IC0xLCBuID0gTXModCksIHIgPSBuLmxlbmd0aCwgaSA9IEZvKHIpOyArK2UgPCByOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBuW2VdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaVtlXSA9IFtvLCB0W29dXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBubyh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbnVsbCA9PSB0ID8gRSA6IHRbZV07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID09PSBFICYmIChudWxsID09IHQgfHwgdHIoZSwgdCkgfHwgKGUgPSBwcihlKSwgdCA9IDEgPT0gZS5sZW5ndGggPyB0IDogTGUodCwgWGUoZSwgMCwgLTEpKSwgciA9IG51bGwgPT0gdCA/IEUgOiB0W2pyKGUpXSksIHIgPSByID09PSBFID8gbiA6IHIpLCBPaShyKSA/IHIuY2FsbCh0KSA6IHIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJvKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZSArICIiOwogICAgICAgICAgICAgICAgICAgICAgICBlID0gbnVsbCAhPSB0W3JdIHx8IHRyKGUsIHQpID8gW3JdIDogcHIoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAtMSwgbyA9IGUubGVuZ3RoLCBhID0gbyAtIDEsIHMgPSB0OyBudWxsICE9IHMgJiYgKytpIDwgbzspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gZVtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpKHMpICYmIChpID09IGEgPyBzW3VdID0gbiA6IG51bGwgPT0gc1t1XSAmJiAoc1t1XSA9IEtuKGVbaSArIDFdKSA/IFtdIDoge30pKSwgcyA9IHNbdV0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaW8odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IEFzKHQpIHx8IFVpKHQpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9IEZuKGUsIHIsIDQpLCBudWxsID09IG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSB8fCBMaSh0KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdC5jb25zdHJ1Y3RvcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gaSA/IEFzKHQpID8gbmV3IG8gOiBbXSA6IERhKE9pKG8pID8gby5wcm90b3R5cGUgOiBFKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIG4gPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpID8gZWUgOiBSZSkodCwgZnVuY3Rpb24odCwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUobiwgdCwgciwgaSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9vKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRuKHQsIE1zKHQpKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYW8odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG4odCwgdG8odCkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzbyh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID0gK2UgfHwgMCwgbiA9PT0gRSA/IChuID0gZSwgZSA9IDApIDogbiA9ICtuIHx8IDAsIHQgPj0ga2EoZSwgbikgJiYgdCA8IF9hKGUsIG4pCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1byh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4gJiYgWm4odCwgZSwgbikgJiYgKGUgPSBuID0gRSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbnVsbCA9PSB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG51bGwgPT0gZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gbiAmJiAoaSAmJiAiYm9vbGVhbiIgPT0gdHlwZW9mIHQgPyAobiA9IHQsIHQgPSAxKSA6ICJib29sZWFuIiA9PSB0eXBlb2YgZSAmJiAobiA9IGUsIGkgPSAhMCkpLCByICYmIGkgJiYgKGUgPSAxLCBpID0gITEpLCB0ID0gK3QgfHwgMCwgaSA/IChlID0gdCwgdCA9IDApIDogZSA9ICtlIHx8IDAsIG4gfHwgdCAlIDEgfHwgZSAlIDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gamEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrYSh0ICsgbyAqIChlIC0gdCArIHVhKCIxZS0iICsgKChvICsgIiIpLmxlbmd0aCAtIDEpKSksIGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFZlKHQsIGUpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjbyh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gcyh0KSwgdCAmJiB0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdC5zbGljZSgxKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbG8odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IHModCksIHQgJiYgdC5yZXBsYWNlKFB0LCBwKS5yZXBsYWNlKEF0LCAiIikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZvKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHModCksIGUgKz0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID0gbiA9PT0gRSA/IHIgOiBrYSgwID4gbiA/IDAgOiArbiB8fCAwLCByKSwgbiAtPSBlLmxlbmd0aCwgbiA+PSAwICYmIHQuaW5kZXhPZihlLCBuKSA9PSBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBwbyh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gcyh0KSwgdCAmJiB4dC50ZXN0KHQpID8gdC5yZXBsYWNlKG10LCBoKSA6IHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhvKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBzKHQpLCB0ICYmIFN0LnRlc3QodCkgPyB0LnJlcGxhY2UoQ3QsIGQpIDogdCB8fCAiKD86KSIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdvKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHModCksIGUgPSArZTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgPj0gZSB8fCAheGEoZSkpIHJldHVybiB0OwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IChlIC0gcikgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG1hKGkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHZhKGkpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA9IE9uKCIiLCBhLCBuKSwgbi5zbGljZSgwLCBvKSArIHQgKyBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB2byh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobiA/IFpuKHQsIGUsIG4pIDogbnVsbCA9PSBlKSA/IGUgPSAwIDogZSAmJiAoZSA9ICtlKSwgdCA9IHhvKHQpLCBFYSh0LCBlIHx8IChPdC50ZXN0KHQpID8gMTYgOiAxMCkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB5byh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID0gcyh0KSwgZSA9ICtlLCAxID4gZSB8fCAhdCB8fCAheGEoZSkpIHJldHVybiBuOwogICAgICAgICAgICAgICAgICAgICAgICBkbyBlICUgMiAmJiAobiArPSB0KSwgZSA9IG1hKGUgLyAyKSwgdCArPSB0OyB3aGlsZSAoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBtbyh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gcyh0KSwgbiA9IG51bGwgPT0gbiA/IDAgOiBrYSgwID4gbiA/IDAgOiArbiB8fCAwLCB0Lmxlbmd0aCksIHQubGFzdEluZGV4T2YoZSwgbikgPT0gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYm8odCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGUudGVtcGxhdGVTZXR0aW5nczsKICAgICAgICAgICAgICAgICAgICAgICAgciAmJiBabih0LCBuLCByKSAmJiAobiA9IHIgPSBFKSwgdCA9IHModCksIG4gPSB2ZSh5ZSh7fSwgciB8fCBuKSwgaSwgZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbywgYSwgdSA9IHZlKHllKHt9LCBuLmltcG9ydHMpLCBpLmltcG9ydHMsIGdlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBNcyh1KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0bih1LCBjKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IG4uaW50ZXJwb2xhdGUgfHwgJHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gIl9fcCArPSAnIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBYbygobi5lc2NhcGUgfHwgJHQpLnNvdXJjZSArICJ8IiArIHAuc291cmNlICsgInwiICsgKHAgPT09IGt0ID8gUnQgOiAkdCkuc291cmNlICsgInwiICsgKG4uZXZhbHVhdGUgfHwgJHQpLnNvdXJjZSArICJ8JCIsICJnIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gIi8vIyBzb3VyY2VVUkw9IiArICgic291cmNlVVJMIiBpbiBuID8gbi5zb3VyY2VVUkwgOiAibG9kYXNoLnRlbXBsYXRlU291cmNlc1siICsgKytGdCArICJdIikgKyAiXG4iOwogICAgICAgICAgICAgICAgICAgICAgICB0LnJlcGxhY2UoZCwgZnVuY3Rpb24oZSwgbiwgciwgaSwgcywgdSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgfHwgKHIgPSBpKSwgaCArPSB0LnNsaWNlKGYsIHUpLnJlcGxhY2UocXQsIGcpLCBuICYmIChvID0gITAsIGggKz0gIicgK1xuX19lKCIgKyBuICsgIikgK1xuJyIpLCBzICYmIChhID0gITAsIGggKz0gIic7XG4iICsgcyArICI7XG5fX3AgKz0gJyIpLCByICYmIChoICs9ICInICtcbigoX190ID0gKCIgKyByICsgIikpID09IG51bGwgPyAnJyA6IF9fdCkgK1xuJyIpLCBmID0gdSArIGUubGVuZ3RoLCBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBoICs9ICInO1xuIjsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBuLnZhcmlhYmxlOwogICAgICAgICAgICAgICAgICAgICAgICB5IHx8IChoID0gIndpdGggKG9iaikge1xuIiArIGggKyAiXG59XG4iKSwgaCA9IChhID8gaC5yZXBsYWNlKGR0LCAiIikgOiBoKS5yZXBsYWNlKGd0LCAiJDEiKS5yZXBsYWNlKHZ0LCAiJDE7IiksIGggPSAiZnVuY3Rpb24oIiArICh5IHx8ICJvYmoiKSArICIpIHtcbiIgKyAoeSA/ICIiIDogIm9iaiB8fCAob2JqID0ge30pO1xuIikgKyAidmFyIF9fdCwgX19wID0gJyciICsgKG8gPyAiLCBfX2UgPSBfLmVzY2FwZSIgOiAiIikgKyAoYSA/ICIsIF9faiA9IEFycmF5LnByb3RvdHlwZS5qb2luO1xuZnVuY3Rpb24gcHJpbnQoKSB7IF9fcCArPSBfX2ouY2FsbChhcmd1bWVudHMsICcnKSB9XG4iIDogIjtcbiIpICsgaCArICJyZXR1cm4gX19wXG59IjsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBRcyhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBXbyhjLCB2ICsgInJldHVybiAiICsgaCkuYXBwbHkoRSwgbCkKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtLnNvdXJjZSA9IGgsIFJpKG0pKSB0aHJvdyBtOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24geG8odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodCA9IHModCkpID8gKG4gPyBabihyLCBlLCBuKSA6IG51bGwgPT0gZSkgPyB0LnNsaWNlKHcodCksIF8odCkgKyAxKSA6IChlICs9ICIiLCB0LnNsaWNlKHUodCwgZSksIGModCwgZSkgKyAxKSkgOiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB3byh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBzKHQpLCB0ID8gKG4gPyBabihyLCBlLCBuKSA6IG51bGwgPT0gZSkgPyB0LnNsaWNlKHcodCkpIDogdC5zbGljZSh1KHQsIGUgKyAiIikpIDogdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gX28odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gcyh0KSwgdCA/IChuID8gWm4ociwgZSwgbikgOiBudWxsID09IGUpID8gdC5zbGljZSgwLCBfKHQpICsgMSkgOiB0LnNsaWNlKDAsIGModCwgZSArICIiKSArIDEpIDogdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ga28odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBuICYmIFpuKHQsIGUsIG4pICYmIChlID0gRSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gUCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAkOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKExpKGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSAic2VwYXJhdG9yIiBpbiBlID8gZS5zZXBhcmF0b3IgOiBvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAibGVuZ3RoIiBpbiBlID8gK2UubGVuZ3RoIHx8IDAgOiByLCBpID0gIm9taXNzaW9uIiBpbiBlID8gcyhlLm9taXNzaW9uKSA6IGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSByID0gK2UgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPSBzKHQpLCByID49IHQubGVuZ3RoKSByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSByIC0gaS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxID4gYSkgcmV0dXJuIGk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gdC5zbGljZSgwLCBhKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gbykgcmV0dXJuIHUgKyBpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoRmkobykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LnNsaWNlKGEpLnNlYXJjaChvKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjLCBsLCBmID0gdC5zbGljZSgwLCBhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG8uZ2xvYmFsIHx8IChvID0gWG8oby5zb3VyY2UsIChJdC5leGVjKG8pIHx8ICIiKSArICJnIikpLCBvLmxhc3RJbmRleCA9IDA7IGMgPSBvLmV4ZWMoZik7KSBsID0gYy5pbmRleDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gdS5zbGljZSgwLCBudWxsID09IGwgPyBhIDogbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0LmluZGV4T2YobywgYSkgIT0gYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSB1Lmxhc3RJbmRleE9mKG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA+IC0xICYmICh1ID0gdS5zbGljZSgwLCBwKSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSArIGkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFRvKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBzKHQpLCB0ICYmIGJ0LnRlc3QodCkgPyB0LnJlcGxhY2UoeXQsIGspIDogdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRW8odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiAmJiBabih0LCBlLCBuKSAmJiAoZSA9IEUpLCB0ID0gcyh0KSwgdC5tYXRjaChlIHx8IEh0KSB8fCBbXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gam8odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiAmJiBabih0LCBlLCBuKSAmJiAoZSA9IEUpLCB5KHQpID8gQW8odCkgOiB4ZSh0LCBlKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQ28odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBTbyh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBBbyh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBIZSh3ZSh0LCAhMCkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBObyh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNZSh0LCB3ZShlLCAhMCkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBSbyh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTGkoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHIgPyBNcyhlKSA6IEUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGkgJiYgaS5sZW5ndGggPyBPZShlLCBpKSA6IEU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobyA/IG8ubGVuZ3RoIDogcikgfHwgKG8gPSAhMSwgbiA9IGUsIGUgPSB0LCB0ID0gdGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBvIHx8IChvID0gT2UoZSwgTXMoZSkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAtMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBPaSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBvLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgbiA9PT0gITEgPyBhID0gITEgOiBMaShuKSAmJiAiY2hhaW4iIGluIG4gJiYgKGEgPSBuLmNoYWluKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ICsrcyA8IGM7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IG9bc10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGVbbF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W2xdID0gZiwgdSAmJiAodC5wcm90b3R5cGVbbF0gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMuX19jaGFpbl9fOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSB8fCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQodGhpcy5fX3dyYXBwZWRfXyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHIuX19hY3Rpb25zX18gPSB0ZSh0aGlzLl9fYWN0aW9uc19fKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmM6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogYXJndW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNBcmc6IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCByLl9fY2hhaW5fXyA9IG4sIHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0LCBjZShbdGhpcy52YWx1ZSgpXSwgYXJndW1lbnRzKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGYpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBJbygpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5lLl8gPSBpYSwgdGhpcwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gT28oKSB7fQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBMbyh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cih0KSA/IFVlKHQpIDogV2UodCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIERvKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBMZSh0LCBwcihlKSwgZSArICIiKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBQbyh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4gJiYgWm4odCwgZSwgbikgJiYgKGUgPSBuID0gRSksIHQgPSArdCB8fCAwLCBuID0gbnVsbCA9PSBuID8gMSA6ICtuIHx8IDAsIG51bGwgPT0gZSA/IChlID0gdCwgdCA9IDApIDogZSA9ICtlIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAtMSwgaSA9IF9hKHZhKChlIC0gdCkgLyAobiB8fCAxKSksIDApLCBvID0gRm8oaSk7ICsrciA8IGk7KSBvW3JdID0gdCwgdCArPSBuOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gJG8odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA9IG1hKHQpLCAxID4gdCB8fCAheGEodCkpIHJldHVybiBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAtMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBGbyhrYSh0LCBBYSkpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSBhbihlLCBuLCAxKTsgKytyIDwgdDspIEFhID4gciA/IGlbcl0gPSBlKHIpIDogZShyKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHFvKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSArK25hOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcyh0KSArIGUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEhvKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgrdCB8fCAwKSArICgrZSB8fCAwKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTW8odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiAmJiBabih0LCBlLCBuKSAmJiAoZSA9IEUpLCBlID0gRm4oZSwgbiwgMyksIDEgPT0gZS5sZW5ndGggPyBoZShBcyh0KSA/IHQgOiBscih0KSwgZSkgOiBLZSh0LCBlKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0ID0gdCA/IHJlLmRlZmF1bHRzKG5lLk9iamVjdCgpLCB0LCByZS5waWNrKG5lLCBNdCkpIDogbmU7CiAgICAgICAgICAgICAgICAgICAgdmFyIEZvID0gdC5BcnJheSwKICAgICAgICAgICAgICAgICAgICAgICAgQm8gPSB0LkRhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIFVvID0gdC5FcnJvciwKICAgICAgICAgICAgICAgICAgICAgICAgV28gPSB0LkZ1bmN0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICB6byA9IHQuTWF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgVm8gPSB0Lk51bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgR28gPSB0Lk9iamVjdCwKICAgICAgICAgICAgICAgICAgICAgICAgWG8gPSB0LlJlZ0V4cCwKICAgICAgICAgICAgICAgICAgICAgICAgSm8gPSB0LlN0cmluZywKICAgICAgICAgICAgICAgICAgICAgICAgWW8gPSB0LlR5cGVFcnJvciwKICAgICAgICAgICAgICAgICAgICAgICAgUW8gPSBGby5wcm90b3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgIEtvID0gR28ucHJvdG90eXBlLAogICAgICAgICAgICAgICAgICAgICAgICBabyA9IEpvLnByb3RvdHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgdGEgPSBXby5wcm90b3R5cGUudG9TdHJpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgIGVhID0gS28uaGFzT3duUHJvcGVydHksCiAgICAgICAgICAgICAgICAgICAgICAgIG5hID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgcmEgPSBLby50b1N0cmluZywKICAgICAgICAgICAgICAgICAgICAgICAgaWEgPSBuZS5fLAogICAgICAgICAgICAgICAgICAgICAgICBvYSA9IFhvKCJeIiArIHRhLmNhbGwoZWEpLnJlcGxhY2UoL1tcXF4kLiorPygpW1xde318XS9nLCAiXFwkJiIpLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFwoKXwgZm9yIC4rPyg/PVxcXF0pL2csICIkMS4qPyIpICsgIiQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgYWEgPSB0LkFycmF5QnVmZmVyLAogICAgICAgICAgICAgICAgICAgICAgICBzYSA9IHQuY2xlYXJUaW1lb3V0LAogICAgICAgICAgICAgICAgICAgICAgICB1YSA9IHQucGFyc2VGbG9hdCwKICAgICAgICAgICAgICAgICAgICAgICAgY2EgPSB6by5wb3csCiAgICAgICAgICAgICAgICAgICAgICAgIGxhID0gS28ucHJvcGVydHlJc0VudW1lcmFibGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGZhID0gem4odCwgIlNldCIpLAogICAgICAgICAgICAgICAgICAgICAgICBwYSA9IHQuc2V0VGltZW91dCwKICAgICAgICAgICAgICAgICAgICAgICAgaGEgPSBRby5zcGxpY2UsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhID0gdC5VaW50OEFycmF5LAogICAgICAgICAgICAgICAgICAgICAgICBnYSA9IHpuKHQsICJXZWFrTWFwIiksCiAgICAgICAgICAgICAgICAgICAgICAgIHZhID0gem8uY2VpbCwKICAgICAgICAgICAgICAgICAgICAgICAgeWEgPSB6bihHbywgImNyZWF0ZSIpLAogICAgICAgICAgICAgICAgICAgICAgICBtYSA9IHpvLmZsb29yLAogICAgICAgICAgICAgICAgICAgICAgICBiYSA9IHpuKEZvLCAiaXNBcnJheSIpLAogICAgICAgICAgICAgICAgICAgICAgICB4YSA9IHQuaXNGaW5pdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIHdhID0gem4oR28sICJrZXlzIiksCiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gem8ubWF4LAogICAgICAgICAgICAgICAgICAgICAgICBrYSA9IHpvLm1pbiwKICAgICAgICAgICAgICAgICAgICAgICAgVGEgPSB6bihCbywgIm5vdyIpLAogICAgICAgICAgICAgICAgICAgICAgICBFYSA9IHQucGFyc2VJbnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGphID0gem8ucmFuZG9tLAogICAgICAgICAgICAgICAgICAgICAgICBDYSA9IFZvLk5FR0FUSVZFX0lORklOSVRZLAogICAgICAgICAgICAgICAgICAgICAgICBTYSA9IFZvLlBPU0lUSVZFX0lORklOSVRZLAogICAgICAgICAgICAgICAgICAgICAgICBBYSA9IDQyOTQ5NjcyOTUsCiAgICAgICAgICAgICAgICAgICAgICAgIE5hID0gQWEgLSAxLAogICAgICAgICAgICAgICAgICAgICAgICBSYSA9IEFhID4+PiAxLAogICAgICAgICAgICAgICAgICAgICAgICBJYSA9IDkwMDcxOTkyNTQ3NDA5OTEsCiAgICAgICAgICAgICAgICAgICAgICAgIE9hID0gZ2EgJiYgbmV3IGdhLAogICAgICAgICAgICAgICAgICAgICAgICBMYSA9IHt9OwogICAgICAgICAgICAgICAgICAgIGUuc3VwcG9ydCA9IHt9OwogICAgICAgICAgICAgICAgICAgIGUudGVtcGxhdGVTZXR0aW5ncyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgZXNjYXBlOiB3dCwKICAgICAgICAgICAgICAgICAgICAgICAgZXZhbHVhdGU6IF90LAogICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZToga3QsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0czogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgXzogZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB2YXIgRGEgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHQoKSB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTGkoZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wcm90b3R5cGUgPSBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG5ldyB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnByb3RvdHlwZSA9IEUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gfHwge30KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSgpLAogICAgICAgICAgICAgICAgICAgICAgICBQYSA9IHBuKFJlKSwKICAgICAgICAgICAgICAgICAgICAgICAgJGEgPSBwbihJZSwgITApLAogICAgICAgICAgICAgICAgICAgICAgICBxYSA9IGhuKCksCiAgICAgICAgICAgICAgICAgICAgICAgIEhhID0gaG4oITApLAogICAgICAgICAgICAgICAgICAgICAgICBNYSA9IE9hID8gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9hLnNldCh0LCBlKSwgdAogICAgICAgICAgICAgICAgICAgICAgICB9IDogU28sCiAgICAgICAgICAgICAgICAgICAgICAgIEZhID0gT2EgPyBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2EuZ2V0KHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBPbywKICAgICAgICAgICAgICAgICAgICAgICAgQmEgPSBVZSgibGVuZ3RoIiksCiAgICAgICAgICAgICAgICAgICAgICAgIFVhID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZ3MoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IEggLSAoaSAtIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlID0gaSwgbyA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCsrdCA+PSBxKSByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB0ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWEobiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSgpLAogICAgICAgICAgICAgICAgICAgICAgICBXYSA9IHlpKGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KHQpICYmIFFuKHQpID8ga2UodCwgQWUoZSwgITEsICEwKSkgOiBbXQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgemEgPSBfbigpLAogICAgICAgICAgICAgICAgICAgICAgICBWYSA9IF9uKCEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgR2EgPSB5aShmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gdC5sZW5ndGgsIG4gPSBlLCByID0gRm8oZiksIGkgPSBVbigpLCBhID0gaSA9PSBvLCBzID0gW107IG4tLTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IHRbbl0gPSBRbih1ID0gdFtuXSkgPyB1IDogW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcltuXSA9IGEgJiYgdS5sZW5ndGggPj0gMTIwID8gZ24obiAmJiB1KSA6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gdFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGMgPyBjLmxlbmd0aCA6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHJbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0OiBmb3IgKDsgKytsIDwgZjspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUgPSBjW2xdLCAocCA/IFF0KHAsIHUpIDogaShzLCB1LCAwKSkgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSBlOyAtLW47KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IHJbbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGggPyBRdChoLCB1KSA6IGkodFtuXSwgdSwgMCkpIDwgMCkgY29udGludWUgdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgJiYgcC5wdXNoKHUpLCBzLnB1c2godSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgWGEgPSB5aShmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gQWUoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG1lKHQsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHplKHQsIGUuc29ydChyKSksIG4KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIEphID0gUG4oKSwKICAgICAgICAgICAgICAgICAgICAgICAgWWEgPSBQbighMCksCiAgICAgICAgICAgICAgICAgICAgICAgIFFhID0geWkoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFplKEFlKHQsICExLCAhMCkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBLYSA9IHlpKGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRbih0KSA/IGtlKHQsIGUpIDogW10KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFphID0geWkoJHIpLAogICAgICAgICAgICAgICAgICAgICAgICB0cyA9IHlpKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdC5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUgPiAyID8gdFtlIC0gMl0gOiBFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlID4gMSA/IHRbZSAtIDFdIDogRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID4gMiAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBuID8gZSAtPSAyIDogKG4gPSBlID4gMSAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiByID8gKC0tZSwgcikgOiBFLCByID0gRSksIHQubGVuZ3RoID0gZSwgcXIodCwgbiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGVzID0geWkoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBBZSh0KSwgdGhpcy50aHJ1KGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWnQoQXMoZSkgPyBlIDogW2ZyKGUpXSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBucyA9IHlpKGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZSh0LCBBZShlKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIHJzID0gbG4oZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWEuY2FsbCh0LCBuKSA/ICsrdFtuXSA6IHRbbl0gPSAxCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBpcyA9IHduKFBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgb3MgPSB3bigkYSwgITApLAogICAgICAgICAgICAgICAgICAgICAgICBhcyA9IEVuKGVlLCBQYSksCiAgICAgICAgICAgICAgICAgICAgICAgIHNzID0gRW4oaWUsICRhKSwKICAgICAgICAgICAgICAgICAgICAgICAgdXMgPSBsbihmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYS5jYWxsKHQsIG4pID8gdFtuXS5wdXNoKGUpIDogdFtuXSA9IFtlXQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgY3MgPSBsbihmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W25dID0gZQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgbHMgPSB5aShmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0cihlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gUW4odCkgPyBGbyh0Lmxlbmd0aCkgOiBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQYSh0LCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBpID8gZSA6IG8gJiYgbnVsbCAhPSB0ID8gdFtlXSA6IEU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVsrK3JdID0gcyA/IHMuYXBwbHkodCwgbikgOiBZbih0LCBlLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGEKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGZzID0gbG4oZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtuID8gMCA6IDFdLnB1c2goZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBwcyA9IFJuKGxlLCBQYSksCiAgICAgICAgICAgICAgICAgICAgICAgIGhzID0gUm4oZmUsICRhKSwKICAgICAgICAgICAgICAgICAgICAgICAgZHMgPSB5aShmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0KSByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGVbMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiAmJiBabihlWzBdLCBlWzFdLCBuKSAmJiAoZS5sZW5ndGggPSAxKSwgUWUodCwgQWUoZSksIFtdKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgZ3MgPSBUYSB8fCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobmV3IEJvKS5nZXRUaW1lKCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgdnMgPSB5aShmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IEM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGIobiwgdnMucGxhY2Vob2xkZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgfD0gSQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRuKHQsIHIsIGUsIG4sIGkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICB5cyA9IHlpKGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlLmxlbmd0aCA/IEFlKGUpIDogWWkodCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gLTEsIHIgPSBlLmxlbmd0aDsgKytuIDwgcjspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGVbbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtpXSA9ICRuKHRbaV0sIEMsIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgbXMgPSB5aShmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IEMgfCBTOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4ubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBiKG4sIG1zLnBsYWNlaG9sZGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByIHw9IEkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkbihlLCByLCB0LCBuLCBpKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgYnMgPSBtbihOKSwKICAgICAgICAgICAgICAgICAgICAgICAgeHMgPSBtbihSKSwKICAgICAgICAgICAgICAgICAgICAgICAgd3MgPSB5aShmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2UodCwgMSwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIF9zID0geWkoZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9lKHQsIGUsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBrcyA9IFRuKCksCiAgICAgICAgICAgICAgICAgICAgICAgIFRzID0gVG4oITApLAogICAgICAgICAgICAgICAgICAgICAgICBFcyA9IHlpKGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlID0gQWUoZSksICJmdW5jdGlvbiIgIT0gdHlwZW9mIHQgfHwgIW9lKGUsIGEpKSB0aHJvdyBuZXcgWW8oVSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGUubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlpKGZ1bmN0aW9uKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0ga2Eoci5sZW5ndGgsIG4pOyBpLS07KSByW2ldID0gZVtpXShyW2ldKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseSh0aGlzLCByKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGpzID0gTm4oSSksCiAgICAgICAgICAgICAgICAgICAgICAgIENzID0gTm4oTyksCiAgICAgICAgICAgICAgICAgICAgICAgIFNzID0geWkoZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRuKHQsIEQsIEUsIEUsIEUsIEFlKGUpKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgQXMgPSBiYSB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geSh0KSAmJiBucih0Lmxlbmd0aCkgJiYgcmEuY2FsbCh0KSA9PSBWCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIE5zID0gZm4oRmUpLAogICAgICAgICAgICAgICAgICAgICAgICBScyA9IGZuKGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID8gdmUodCwgZSwgbikgOiB5ZSh0LCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgSXMgPSBibihScywgZGUpLAogICAgICAgICAgICAgICAgICAgICAgICBPcyA9IGJuKE5zLCBvciksCiAgICAgICAgICAgICAgICAgICAgICAgIExzID0ga24oUmUpLAogICAgICAgICAgICAgICAgICAgICAgICBEcyA9IGtuKEllKSwKICAgICAgICAgICAgICAgICAgICAgICAgUHMgPSBqbihxYSksCiAgICAgICAgICAgICAgICAgICAgICAgICRzID0gam4oSGEpLAogICAgICAgICAgICAgICAgICAgICAgICBxcyA9IENuKFJlKSwKICAgICAgICAgICAgICAgICAgICAgICAgSHMgPSBDbihJZSksCiAgICAgICAgICAgICAgICAgICAgICAgIE1zID0gd2EgPyBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IG51bGwgPT0gdCA/IEUgOiB0LmNvbnN0cnVjdG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgZS5wcm90b3R5cGUgPT09IHQgfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgdCAmJiBRbih0KSA/IGNyKHQpIDogTGkodCkgPyB3YSh0KSA6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBjciwKICAgICAgICAgICAgICAgICAgICAgICAgRnMgPSBTbighMCksCiAgICAgICAgICAgICAgICAgICAgICAgIEJzID0gU24oKSwKICAgICAgICAgICAgICAgICAgICAgICAgVXMgPSB5aShmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0KSByZXR1cm4ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgZVswXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdWUoQWUoZSksIEpvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXIodCwga2UodG8odCksIGUpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBhbihlWzBdLCBlWzFdLCAzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzcih0LCBmdW5jdGlvbih0LCBlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFuKHQsIGUsIHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgV3MgPSB5aShmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0ID8ge30gOiAiZnVuY3Rpb24iID09IHR5cGVvZiBlWzBdID8gc3IodCwgYW4oZVswXSwgZVsxXSwgMykpIDogYXIodCwgQWUoZSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICB6cyA9IHZuKGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID0gZS50b0xvd2VyQ2FzZSgpLCB0ICsgKG4gPyBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZS5zbGljZSgxKSA6IGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBWcyA9IHZuKGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ICsgKG4gPyAiLSIgOiAiIikgKyBlLnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIEdzID0gQW4oKSwKICAgICAgICAgICAgICAgICAgICAgICAgWHMgPSBBbighMCksCiAgICAgICAgICAgICAgICAgICAgICAgIEpzID0gdm4oZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgKyAobiA/ICJfIiA6ICIiKSArIGUudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgWXMgPSB2bihmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCArIChuID8gIiAiIDogIiIpICsgKGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBlLnNsaWNlKDEpKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgUXMgPSB5aShmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmFwcGx5KEUsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpKG4pID8gbiA6IG5ldyBVbyhuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgS3MgPSB5aShmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBZbihuLCB0LCBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgWnMgPSB5aShmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBZbih0LCBuLCBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgdHUgPSBEbigiY2VpbCIpLAogICAgICAgICAgICAgICAgICAgICAgICBldSA9IERuKCJmbG9vciIpLAogICAgICAgICAgICAgICAgICAgICAgICBudSA9IHhuKGtpLCBDYSksCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1ID0geG4oemksIFNhKSwKICAgICAgICAgICAgICAgICAgICAgICAgaXUgPSBEbigicm91bmQiKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wcm90b3R5cGUgPSBuLnByb3RvdHlwZSwgbS5wcm90b3R5cGUgPSBEYShuLnByb3RvdHlwZSksIG0ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gbSwgUS5wcm90b3R5cGUgPSBEYShuLnByb3RvdHlwZSksIFEucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUSwgenQucHJvdG90eXBlWyJkZWxldGUiXSA9IFZ0LCB6dC5wcm90b3R5cGUuZ2V0ID0gR3QsIHp0LnByb3RvdHlwZS5oYXMgPSBYdCwgenQucHJvdG90eXBlLnNldCA9IEp0LCBZdC5wcm90b3R5cGUucHVzaCA9IEt0LCBkaS5DYWNoZSA9IHp0LCBlLmFmdGVyID0gbGksIGUuYXJ5ID0gZmksIGUuYXNzaWduID0gUnMsIGUuYXQgPSBucywgZS5iZWZvcmUgPSBwaSwgZS5iaW5kID0gdnMsIGUuYmluZEFsbCA9IHlzLCBlLmJpbmRLZXkgPSBtcywgZS5jYWxsYmFjayA9IGpvLCBlLmNoYWluID0gRnIsIGUuY2h1bmsgPSBkciwgZS5jb21wYWN0ID0gZ3IsIGUuY29uc3RhbnQgPSBDbywgZS5jb3VudEJ5ID0gcnMsIGUuY3JlYXRlID0gSmksIGUuY3VycnkgPSBicywgZS5jdXJyeVJpZ2h0ID0geHMsIGUuZGVib3VuY2UgPSBoaSwgZS5kZWZhdWx0cyA9IElzLCBlLmRlZmF1bHRzRGVlcCA9IE9zLCBlLmRlZmVyID0gd3MsIGUuZGVsYXkgPSBfcywgZS5kaWZmZXJlbmNlID0gV2EsIGUuZHJvcCA9IHZyLCBlLmRyb3BSaWdodCA9IHlyLCBlLmRyb3BSaWdodFdoaWxlID0gbXIsIGUuZHJvcFdoaWxlID0gYnIsIGUuZmlsbCA9IHhyLCBlLmZpbHRlciA9IFFyLCBlLmZsYXR0ZW4gPSBfciwgZS5mbGF0dGVuRGVlcCA9IGtyLCBlLmZsb3cgPSBrcywgZS5mbG93UmlnaHQgPSBUcywgZS5mb3JFYWNoID0gYXMsIGUuZm9yRWFjaFJpZ2h0ID0gc3MsIGUuZm9ySW4gPSBQcywgZS5mb3JJblJpZ2h0ID0gJHMsIGUuZm9yT3duID0gcXMsIGUuZm9yT3duUmlnaHQgPSBIcywgZS5mdW5jdGlvbnMgPSBZaSwgZS5ncm91cEJ5ID0gdXMsIGUuaW5kZXhCeSA9IGNzLCBlLmluaXRpYWwgPSBFciwgZS5pbnRlcnNlY3Rpb24gPSBHYSwgZS5pbnZlcnQgPSBaaSwgZS5pbnZva2UgPSBscywgZS5rZXlzID0gTXMsIGUua2V5c0luID0gdG8sIGUubWFwID0gdGksIGUubWFwS2V5cyA9IEZzLCBlLm1hcFZhbHVlcyA9IEJzLCBlLm1hdGNoZXMgPSBBbywgZS5tYXRjaGVzUHJvcGVydHkgPSBObywgZS5tZW1vaXplID0gZGksIGUubWVyZ2UgPSBOcywgZS5tZXRob2QgPSBLcywgZS5tZXRob2RPZiA9IFpzLCBlLm1peGluID0gUm8sIGUubW9kQXJncyA9IEVzLCBlLm5lZ2F0ZSA9IGdpLCBlLm9taXQgPSBVcywgZS5vbmNlID0gdmksIGUucGFpcnMgPSBlbywgZS5wYXJ0aWFsID0ganMsIGUucGFydGlhbFJpZ2h0ID0gQ3MsIGUucGFydGl0aW9uID0gZnMsIGUucGljayA9IFdzLCBlLnBsdWNrID0gZWksIGUucHJvcGVydHkgPSBMbywgZS5wcm9wZXJ0eU9mID0gRG8sIGUucHVsbCA9IFNyLCBlLnB1bGxBdCA9IFhhLCBlLnJhbmdlID0gUG8sIGUucmVhcmcgPSBTcywgZS5yZWplY3QgPSBuaSwgZS5yZW1vdmUgPSBBciwgZS5yZXN0ID0gTnIsIGUucmVzdFBhcmFtID0geWksIGUuc2V0ID0gcm8sIGUuc2h1ZmZsZSA9IGlpLCBlLnNsaWNlID0gUnIsIGUuc29ydEJ5ID0gc2ksIGUuc29ydEJ5QWxsID0gZHMsIGUuc29ydEJ5T3JkZXIgPSB1aSwgZS5zcHJlYWQgPSBtaSwgZS50YWtlID0gSXIsIGUudGFrZVJpZ2h0ID0gT3IsIGUudGFrZVJpZ2h0V2hpbGUgPSBMciwgZS50YWtlV2hpbGUgPSBEciwgZS50YXAgPSBCciwgZS50aHJvdHRsZSA9IGJpLCBlLnRocnUgPSBVciwgZS50aW1lcyA9ICRvLCBlLnRvQXJyYXkgPSBHaSwgZS50b1BsYWluT2JqZWN0ID0gWGksIGUudHJhbnNmb3JtID0gaW8sIGUudW5pb24gPSBRYSwgZS51bmlxID0gUHIsIGUudW56aXAgPSAkciwgZS51bnppcFdpdGggPSBxciwgZS52YWx1ZXMgPSBvbywgZS52YWx1ZXNJbiA9IGFvLCBlLndoZXJlID0gY2ksIGUud2l0aG91dCA9IEthLCBlLndyYXAgPSB4aSwgZS54b3IgPSBIciwgZS56aXAgPSBaYSwgZS56aXBPYmplY3QgPSBNciwgZS56aXBXaXRoID0gdHMsIGUuYmFja2Zsb3cgPSBUcywgZS5jb2xsZWN0ID0gdGksIGUuY29tcG9zZSA9IFRzLCBlLmVhY2ggPSBhcywgZS5lYWNoUmlnaHQgPSBzcywgZS5leHRlbmQgPSBScywgZS5pdGVyYXRlZSA9IGpvLCBlLm1ldGhvZHMgPSBZaSwgZS5vYmplY3QgPSBNciwgZS5zZWxlY3QgPSBRciwgZS50YWlsID0gTnIsIGUudW5pcXVlID0gUHIsIFJvKGUsIGUpLCBlLmFkZCA9IEhvLCBlLmF0dGVtcHQgPSBRcywgZS5jYW1lbENhc2UgPSB6cywgZS5jYXBpdGFsaXplID0gY28sIGUuY2VpbCA9IHR1LCBlLmNsb25lID0gd2ksIGUuY2xvbmVEZWVwID0gX2ksIGUuZGVidXJyID0gbG8sIGUuZW5kc1dpdGggPSBmbywgZS5lc2NhcGUgPSBwbywgZS5lc2NhcGVSZWdFeHAgPSBobywgZS5ldmVyeSA9IFlyLCBlLmZpbmQgPSBpcywgZS5maW5kSW5kZXggPSB6YSwgZS5maW5kS2V5ID0gTHMsIGUuZmluZExhc3QgPSBvcywgZS5maW5kTGFzdEluZGV4ID0gVmEsIGUuZmluZExhc3RLZXkgPSBEcywgZS5maW5kV2hlcmUgPSBLciwgZS5maXJzdCA9IHdyLCBlLmZsb29yID0gZXUsIGUuZ2V0ID0gUWksIGUuZ3QgPSBraSwgZS5ndGUgPSBUaSwgZS5oYXMgPSBLaSwgZS5pZGVudGl0eSA9IFNvLCBlLmluY2x1ZGVzID0gWnIsIGUuaW5kZXhPZiA9IFRyLCBlLmluUmFuZ2UgPSBzbywgZS5pc0FyZ3VtZW50cyA9IEVpLCBlLmlzQXJyYXkgPSBBcywgZS5pc0Jvb2xlYW4gPSBqaSwgZS5pc0RhdGUgPSBDaSwgZS5pc0VsZW1lbnQgPSBTaSwgZS5pc0VtcHR5ID0gQWksIGUuaXNFcXVhbCA9IE5pLCBlLmlzRXJyb3IgPSBSaSwgZS5pc0Zpbml0ZSA9IElpLCBlLmlzRnVuY3Rpb24gPSBPaSwgZS5pc01hdGNoID0gRGksIGUuaXNOYU4gPSBQaSwgZS5pc05hdGl2ZSA9ICRpLCBlLmlzTnVsbCA9IHFpLCBlLmlzTnVtYmVyID0gSGksIGUuaXNPYmplY3QgPSBMaSwgZS5pc1BsYWluT2JqZWN0ID0gTWksIGUuaXNSZWdFeHAgPSBGaSwgZS5pc1N0cmluZyA9IEJpLCBlLmlzVHlwZWRBcnJheSA9IFVpLCBlLmlzVW5kZWZpbmVkID0gV2ksIGUua2ViYWJDYXNlID0gVnMsIGUubGFzdCA9IGpyLCBlLmxhc3RJbmRleE9mID0gQ3IsIGUubHQgPSB6aSwgZS5sdGUgPSBWaSwgZS5tYXggPSBudSwgZS5taW4gPSBydSwgZS5ub0NvbmZsaWN0ID0gSW8sIGUubm9vcCA9IE9vLCBlLm5vdyA9IGdzLCBlLnBhZCA9IGdvLCBlLnBhZExlZnQgPSBHcywgZS5wYWRSaWdodCA9IFhzLCBlLnBhcnNlSW50ID0gdm8sIGUucmFuZG9tID0gdW8sIGUucmVkdWNlID0gcHMsIGUucmVkdWNlUmlnaHQgPSBocywgZS5yZXBlYXQgPSB5bywgZS5yZXN1bHQgPSBubywgZS5yb3VuZCA9IGl1LCBlLnJ1bkluQ29udGV4dCA9IFQsIGUuc2l6ZSA9IG9pLCBlLnNuYWtlQ2FzZSA9IEpzLCBlLnNvbWUgPSBhaSwgZS5zb3J0ZWRJbmRleCA9IEphLCBlLnNvcnRlZExhc3RJbmRleCA9IFlhLCBlLnN0YXJ0Q2FzZSA9IFlzLCBlLnN0YXJ0c1dpdGggPSBtbywgZS5zdW0gPSBNbywgZS50ZW1wbGF0ZSA9IGJvLCBlLnRyaW0gPSB4bywgZS50cmltTGVmdCA9IHdvLCBlLnRyaW1SaWdodCA9IF9vLCBlLnRydW5jID0ga28sIGUudW5lc2NhcGUgPSBUbywgZS51bmlxdWVJZCA9IHFvLCBlLndvcmRzID0gRW8sIGUuYWxsID0gWXIsIGUuYW55ID0gYWksIGUuY29udGFpbnMgPSBaciwgZS5lcSA9IE5pLCBlLmRldGVjdCA9IGlzLCBlLmZvbGRsID0gcHMsIGUuZm9sZHIgPSBocywgZS5oZWFkID0gd3IsIGUuaW5jbHVkZSA9IFpyLCBlLmluamVjdCA9IHBzLCBSbyhlLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlKGUsIGZ1bmN0aW9uKG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJvdG90eXBlW3JdIHx8ICh0W3JdID0gbikKICAgICAgICAgICAgICAgICAgICAgICAgfSksIHQKICAgICAgICAgICAgICAgICAgICB9KCksICExKSwgZS5zYW1wbGUgPSByaSwgZS5wcm90b3R5cGUuc2FtcGxlID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fX2NoYWluX18gfHwgbnVsbCAhPSB0ID8gdGhpcy50aHJ1KGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByaShlLCB0KQogICAgICAgICAgICAgICAgICAgICAgICB9KSA6IHJpKHRoaXMudmFsdWUoKSkKICAgICAgICAgICAgICAgICAgICB9LCBlLlZFUlNJT04gPSBqLCBlZShbImJpbmQiLCAiYmluZEtleSIsICJjdXJyeSIsICJjdXJyeVJpZ2h0IiwgInBhcnRpYWwiLCAicGFydGlhbFJpZ2h0Il0sIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZVt0XS5wbGFjZWhvbGRlciA9IGUKICAgICAgICAgICAgICAgICAgICB9KSwgZWUoWyJkcm9wIiwgInRha2UiXSwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBRLnByb3RvdHlwZVt0XSA9IGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdGhpcy5fX2ZpbHRlcmVkX187CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociAmJiAhZSkgcmV0dXJuIG5ldyBRKHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG51bGwgPT0gbiA/IDEgOiBfYShtYShuKSB8fCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5jbG9uZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPyBpLl9fdGFrZUNvdW50X18gPSBrYShpLl9fdGFrZUNvdW50X18sIG4pIDogaS5fX3ZpZXdzX18ucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0ICsgKGkuX19kaXJfXyA8IDAgPyAiUmlnaHQiIDogIiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgaQogICAgICAgICAgICAgICAgICAgICAgICB9LCBRLnByb3RvdHlwZVt0ICsgIlJpZ2h0Il0gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKClbdF0oZSkucmV2ZXJzZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KSwgZWUoWyJmaWx0ZXIiLCAibWFwIiwgInRha2VXaGlsZSJdLCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZSArIDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gbiAhPSBCOwogICAgICAgICAgICAgICAgICAgICAgICBRLnByb3RvdHlwZVt0XSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5jbG9uZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkuX19pdGVyYXRlZXNfXy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRlZTogRm4odCwgZSwgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGkuX19maWx0ZXJlZF9fID0gaS5fX2ZpbHRlcmVkX18gfHwgciwgaQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksIGVlKFsiZmlyc3QiLCAibGFzdCJdLCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gInRha2UiICsgKGUgPyAiUmlnaHQiIDogIiIpOwogICAgICAgICAgICAgICAgICAgICAgICBRLnByb3RvdHlwZVt0XSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbbl0oMSkudmFsdWUoKVswXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksIGVlKFsiaW5pdGlhbCIsICJyZXN0Il0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSAiZHJvcCIgKyAoZSA/ICIiIDogIlJpZ2h0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIFEucHJvdG90eXBlW3RdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fX2ZpbHRlcmVkX18gPyBuZXcgUSh0aGlzKSA6IHRoaXNbbl0oMSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCBlZShbInBsdWNrIiwgIndoZXJlIl0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlID8gImZpbHRlciIgOiAibWFwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlID8gSGUgOiBMbzsKICAgICAgICAgICAgICAgICAgICAgICAgUS5wcm90b3R5cGVbdF0gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1tuXShyKHQpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksIFEucHJvdG90eXBlLmNvbXBhY3QgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKFNvKQogICAgICAgICAgICAgICAgICAgIH0sIFEucHJvdG90eXBlLnJlamVjdCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBGbih0LCBlLCAxKSwgdGhpcy5maWx0ZXIoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF0KGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSwgUS5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBudWxsID09IHQgPyAwIDogK3QgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5fX2ZpbHRlcmVkX18gJiYgKHQgPiAwIHx8IDAgPiBlKSA/IG5ldyBRKG4pIDogKDAgPiB0ID8gbiA9IG4udGFrZVJpZ2h0KC10KSA6IHQgJiYgKG4gPSBuLmRyb3AodCkpLCBlICE9PSBFICYmIChlID0gK2UgfHwgMCwgbiA9IDAgPiBlID8gbi5kcm9wUmlnaHQoLWUpIDogbi50YWtlKGUgLSB0KSksIG4pCiAgICAgICAgICAgICAgICAgICAgfSwgUS5wcm90b3R5cGUudGFrZVJpZ2h0V2hpbGUgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJldmVyc2UoKS50YWtlV2hpbGUodCwgZSkucmV2ZXJzZSgpCiAgICAgICAgICAgICAgICAgICAgfSwgUS5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50YWtlKFNhKQogICAgICAgICAgICAgICAgICAgIH0sIFJlKFEucHJvdG90eXBlLCBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gL14oPzpmaWx0ZXJ8bWFwfHJlamVjdCl8V2hpbGUkLy50ZXN0KG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IC9eKD86Zmlyc3R8bGFzdCkkLy50ZXN0KG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGVbaSA/ICJ0YWtlIiArICgibGFzdCIgPT0gbiA/ICJSaWdodCIgOiAiIikgOiBuXTsKICAgICAgICAgICAgICAgICAgICAgICAgbyAmJiAoZS5wcm90b3R5cGVbbl0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gaSA/IFsxXSA6IGFyZ3VtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gdGhpcy5fX2NoYWluX18sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHRoaXMuX193cmFwcGVkX18sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9ICEhdGhpcy5fX2FjdGlvbnNfXy5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGEgaW5zdGFuY2VvZiBRLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBlWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB1IHx8IEFzKGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCAmJiByICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGMgJiYgMSAhPSBjLmxlbmd0aCAmJiAodSA9IGwgPSAhMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgJiYgbiA/IG8odCwgMSlbMF0gOiBvLmFwcGx5KEUsIGNlKFt0XSwgZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jOiBVciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogW2ZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQXJnOiBFCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gdSAmJiAhczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICYmICFuKSByZXR1cm4gaCA/IChhID0gYS5jbG9uZSgpLCBhLl9fYWN0aW9uc19fLnB1c2gocCksIHQuY2FsbChhKSkgOiBvLmNhbGwoRSwgdGhpcy52YWx1ZSgpKVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaSAmJiBsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGggPyBhIDogbmV3IFEodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB0LmFwcGx5KGEsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLl9fYWN0aW9uc19fLnB1c2gocCksIG5ldyBtKGQsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aHJ1KGYpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSksIGVlKFsiam9pbiIsICJwb3AiLCAicHVzaCIsICJyZXBsYWNlIiwgInNoaWZ0IiwgInNvcnQiLCAic3BsaWNlIiwgInNwbGl0IiwgInVuc2hpZnQiXSwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9ICgvXig/OnJlcGxhY2V8c3BsaXQpJC8udGVzdCh0KSA/IFpvIDogUW8pW3RdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IC9eKD86cHVzaHxzb3J0fHVuc2hpZnQpJC8udGVzdCh0KSA/ICJ0YXAiIDogInRocnUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IC9eKD86am9pbnxwb3B8cmVwbGFjZXxzaGlmdCkkLy50ZXN0KHQpOwogICAgICAgICAgICAgICAgICAgICAgICBlLnByb3RvdHlwZVt0XSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBhcmd1bWVudHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSAmJiAhdGhpcy5fX2NoYWluX18gPyBuLmFwcGx5KHRoaXMudmFsdWUoKSwgdCkgOiB0aGlzW3JdKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5hcHBseShlLCB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCBSZShRLnByb3RvdHlwZSwgZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGVbbl07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHIubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gTGFbaV0gfHwgKExhW2ldID0gW10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmM6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KSwgTGFbSW4oRSwgUykubmFtZV0gPSBbewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAid3JhcHBlciIsCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmM6IEUKICAgICAgICAgICAgICAgICAgICB9XSwgUS5wcm90b3R5cGUuY2xvbmUgPSBldCwgUS5wcm90b3R5cGUucmV2ZXJzZSA9IHJ0LCBRLnByb3RvdHlwZS52YWx1ZSA9IFd0LCBlLnByb3RvdHlwZS5jaGFpbiA9IFdyLCBlLnByb3RvdHlwZS5jb21taXQgPSB6ciwgZS5wcm90b3R5cGUuY29uY2F0ID0gZXMsIGUucHJvdG90eXBlLnBsYW50ID0gVnIsIGUucHJvdG90eXBlLnJldmVyc2UgPSBHciwgZS5wcm90b3R5cGUudG9TdHJpbmcgPSBYciwgZS5wcm90b3R5cGUucnVuID0gZS5wcm90b3R5cGUudG9KU09OID0gZS5wcm90b3R5cGUudmFsdWVPZiA9IGUucHJvdG90eXBlLnZhbHVlID0gSnIsIGUucHJvdG90eXBlLmNvbGxlY3QgPSBlLnByb3RvdHlwZS5tYXAsIGUucHJvdG90eXBlLmhlYWQgPSBlLnByb3RvdHlwZS5maXJzdCwgZS5wcm90b3R5cGUuc2VsZWN0ID0gZS5wcm90b3R5cGUuZmlsdGVyLCBlLnByb3RvdHlwZS50YWlsID0gZS5wcm90b3R5cGUucmVzdCwgZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIEUsIGogPSAiMy4xMC4xIiwKICAgICAgICAgICAgICAgICAgICBDID0gMSwKICAgICAgICAgICAgICAgICAgICBTID0gMiwKICAgICAgICAgICAgICAgICAgICBBID0gNCwKICAgICAgICAgICAgICAgICAgICBOID0gOCwKICAgICAgICAgICAgICAgICAgICBSID0gMTYsCiAgICAgICAgICAgICAgICAgICAgSSA9IDMyLAogICAgICAgICAgICAgICAgICAgIE8gPSA2NCwKICAgICAgICAgICAgICAgICAgICBMID0gMTI4LAogICAgICAgICAgICAgICAgICAgIEQgPSAyNTYsCiAgICAgICAgICAgICAgICAgICAgUCA9IDMwLAogICAgICAgICAgICAgICAgICAgICQgPSAiLi4uIiwKICAgICAgICAgICAgICAgICAgICBxID0gMTUwLAogICAgICAgICAgICAgICAgICAgIEggPSAxNiwKICAgICAgICAgICAgICAgICAgICBNID0gMjAwLAogICAgICAgICAgICAgICAgICAgIEYgPSAxLAogICAgICAgICAgICAgICAgICAgIEIgPSAyLAogICAgICAgICAgICAgICAgICAgIFUgPSAiRXhwZWN0ZWQgYSBmdW5jdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgVyA9ICJfX2xvZGFzaF9wbGFjZWhvbGRlcl9fIiwKICAgICAgICAgICAgICAgICAgICB6ID0gIltvYmplY3QgQXJndW1lbnRzXSIsCiAgICAgICAgICAgICAgICAgICAgViA9ICJbb2JqZWN0IEFycmF5XSIsCiAgICAgICAgICAgICAgICAgICAgRyA9ICJbb2JqZWN0IEJvb2xlYW5dIiwKICAgICAgICAgICAgICAgICAgICBYID0gIltvYmplY3QgRGF0ZV0iLAogICAgICAgICAgICAgICAgICAgIEogPSAiW29iamVjdCBFcnJvcl0iLAogICAgICAgICAgICAgICAgICAgIFkgPSAiW29iamVjdCBGdW5jdGlvbl0iLAogICAgICAgICAgICAgICAgICAgIFEgPSAiW29iamVjdCBNYXBdIiwKICAgICAgICAgICAgICAgICAgICBLID0gIltvYmplY3QgTnVtYmVyXSIsCiAgICAgICAgICAgICAgICAgICAgWiA9ICJbb2JqZWN0IE9iamVjdF0iLAogICAgICAgICAgICAgICAgICAgIHR0ID0gIltvYmplY3QgUmVnRXhwXSIsCiAgICAgICAgICAgICAgICAgICAgZXQgPSAiW29iamVjdCBTZXRdIiwKICAgICAgICAgICAgICAgICAgICBudCA9ICJbb2JqZWN0IFN0cmluZ10iLAogICAgICAgICAgICAgICAgICAgIHJ0ID0gIltvYmplY3QgV2Vha01hcF0iLAogICAgICAgICAgICAgICAgICAgIGl0ID0gIltvYmplY3QgQXJyYXlCdWZmZXJdIiwKICAgICAgICAgICAgICAgICAgICBvdCA9ICJbb2JqZWN0IEZsb2F0MzJBcnJheV0iLAogICAgICAgICAgICAgICAgICAgIGF0ID0gIltvYmplY3QgRmxvYXQ2NEFycmF5XSIsCiAgICAgICAgICAgICAgICAgICAgc3QgPSAiW29iamVjdCBJbnQ4QXJyYXldIiwKICAgICAgICAgICAgICAgICAgICB1dCA9ICJbb2JqZWN0IEludDE2QXJyYXldIiwKICAgICAgICAgICAgICAgICAgICBjdCA9ICJbb2JqZWN0IEludDMyQXJyYXldIiwKICAgICAgICAgICAgICAgICAgICBsdCA9ICJbb2JqZWN0IFVpbnQ4QXJyYXldIiwKICAgICAgICAgICAgICAgICAgICBmdCA9ICJbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XSIsCiAgICAgICAgICAgICAgICAgICAgcHQgPSAiW29iamVjdCBVaW50MTZBcnJheV0iLAogICAgICAgICAgICAgICAgICAgIGh0ID0gIltvYmplY3QgVWludDMyQXJyYXldIiwKICAgICAgICAgICAgICAgICAgICBkdCA9IC9cYl9fcCBcKz0gJyc7L2csCiAgICAgICAgICAgICAgICAgICAgZ3QgPSAvXGIoX19wIFwrPSkgJycgXCsvZywKICAgICAgICAgICAgICAgICAgICB2dCA9IC8oX19lXCguKj9cKXxcYl9fdFwpKSBcK1xuJyc7L2csCiAgICAgICAgICAgICAgICAgICAgeXQgPSAvJig/OmFtcHxsdHxndHxxdW90fCMzOXwjOTYpOy9nLAogICAgICAgICAgICAgICAgICAgIG10ID0gL1smPD4iJ2BdL2csCiAgICAgICAgICAgICAgICAgICAgYnQgPSBSZWdFeHAoeXQuc291cmNlKSwKICAgICAgICAgICAgICAgICAgICB4dCA9IFJlZ0V4cChtdC5zb3VyY2UpLAogICAgICAgICAgICAgICAgICAgIHd0ID0gLzwlLShbXHNcU10rPyklPi9nLAogICAgICAgICAgICAgICAgICAgIF90ID0gLzwlKFtcc1xTXSs/KSU+L2csCiAgICAgICAgICAgICAgICAgICAga3QgPSAvPCU9KFtcc1xTXSs/KSU+L2csCiAgICAgICAgICAgICAgICAgICAgVHQgPSAvXC58XFsoPzpbXltcXV0qfChbIiddKSg/Oig/IVwxKVteXG5cXF18XFwuKSo/XDEpXF0vLAogICAgICAgICAgICAgICAgICAgIEV0ID0gL15cdyokLywKICAgICAgICAgICAgICAgICAgICBqdCA9IC9bXi5bXF1dK3xcWyg/OigtP1xkKyg/OlwuXGQrKT8pfChbIiddKSgoPzooPyFcMilbXlxuXFxdfFxcLikqPylcMilcXS9nLAogICAgICAgICAgICAgICAgICAgIEN0ID0gL15bOiEsXXxbXFxeJC4qKz8oKVtcXXt9fFwvXXwoXlswLTlhLWZBLUZucnR1dnhdKXwoW1xuXHJcdTIwMjhcdTIwMjldKS9nLAogICAgICAgICAgICAgICAgICAgIFN0ID0gUmVnRXhwKEN0LnNvdXJjZSksCiAgICAgICAgICAgICAgICAgICAgQXQgPSAvW1x1MDMwMC1cdTAzNmZcdWZlMjAtXHVmZTIzXS9nLAogICAgICAgICAgICAgICAgICAgIE50ID0gL1xcKFxcKT8vZywKICAgICAgICAgICAgICAgICAgICBSdCA9IC9cJFx7KFteXFx9XSooPzpcXC5bXlxcfV0qKSopXH0vZywKICAgICAgICAgICAgICAgICAgICBJdCA9IC9cdyokLywKICAgICAgICAgICAgICAgICAgICBPdCA9IC9eMFt4WF0vLAogICAgICAgICAgICAgICAgICAgIEx0ID0gL15cW29iamVjdCAuKz9Db25zdHJ1Y3RvclxdJC8sCiAgICAgICAgICAgICAgICAgICAgRHQgPSAvXlxkKyQvLAogICAgICAgICAgICAgICAgICAgIFB0ID0gL1tceGMwLVx4ZDZceGQ4LVx4ZGVceGRmLVx4ZjZceGY4LVx4ZmZdL2csCiAgICAgICAgICAgICAgICAgICAgJHQgPSAvKCReKS8sCiAgICAgICAgICAgICAgICAgICAgcXQgPSAvWydcblxyXHUyMDI4XHUyMDI5XFxdL2csCiAgICAgICAgICAgICAgICAgICAgSHQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAiW0EtWlxceGMwLVxceGQ2XFx4ZDgtXFx4ZGVdIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSAiW2EtelxceGRmLVxceGY2XFx4ZjgtXFx4ZmZdKyI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSZWdFeHAodCArICIrKD89IiArIHQgKyBlICsgIil8IiArIHQgKyAiPyIgKyBlICsgInwiICsgdCArICIrfFswLTldKyIsICJnIikKICAgICAgICAgICAgICAgICAgICB9KCksCiAgICAgICAgICAgICAgICAgICAgTXQgPSBbIkFycmF5IiwgIkFycmF5QnVmZmVyIiwgIkRhdGUiLCAiRXJyb3IiLCAiRmxvYXQzMkFycmF5IiwgIkZsb2F0NjRBcnJheSIsICJGdW5jdGlvbiIsICJJbnQ4QXJyYXkiLCAiSW50MTZBcnJheSIsICJJbnQzMkFycmF5IiwgIk1hdGgiLCAiTnVtYmVyIiwgIk9iamVjdCIsICJSZWdFeHAiLCAiU2V0IiwgIlN0cmluZyIsICJfIiwgImNsZWFyVGltZW91dCIsICJpc0Zpbml0ZSIsICJwYXJzZUZsb2F0IiwgInBhcnNlSW50IiwgInNldFRpbWVvdXQiLCAiVHlwZUVycm9yIiwgIlVpbnQ4QXJyYXkiLCAiVWludDhDbGFtcGVkQXJyYXkiLCAiVWludDE2QXJyYXkiLCAiVWludDMyQXJyYXkiLCAiV2Vha01hcCJdLAogICAgICAgICAgICAgICAgICAgIEZ0ID0gLTEsCiAgICAgICAgICAgICAgICAgICAgQnQgPSB7fTsKICAgICAgICAgICAgICAgIEJ0W290XSA9IEJ0W2F0XSA9IEJ0W3N0XSA9IEJ0W3V0XSA9IEJ0W2N0XSA9IEJ0W2x0XSA9IEJ0W2Z0XSA9IEJ0W3B0XSA9IEJ0W2h0XSA9ICEwLCBCdFt6XSA9IEJ0W1ZdID0gQnRbaXRdID0gQnRbR10gPSBCdFtYXSA9IEJ0W0pdID0gQnRbWV0gPSBCdFtRXSA9IEJ0W0tdID0gQnRbWl0gPSBCdFt0dF0gPSBCdFtldF0gPSBCdFtudF0gPSBCdFtydF0gPSAhMTsKICAgICAgICAgICAgICAgIHZhciBVdCA9IHt9OwogICAgICAgICAgICAgICAgVXRbel0gPSBVdFtWXSA9IFV0W2l0XSA9IFV0W0ddID0gVXRbWF0gPSBVdFtvdF0gPSBVdFthdF0gPSBVdFtzdF0gPSBVdFt1dF0gPSBVdFtjdF0gPSBVdFtLXSA9IFV0W1pdID0gVXRbdHRdID0gVXRbbnRdID0gVXRbbHRdID0gVXRbZnRdID0gVXRbcHRdID0gVXRbaHRdID0gITAsIFV0W0pdID0gVXRbWV0gPSBVdFtRXSA9IFV0W2V0XSA9IFV0W3J0XSA9ICExOwogICAgICAgICAgICAgICAgdmFyIFd0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAiw4AiOiAiQSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDgSI6ICJBIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOCIjogIkEiLAogICAgICAgICAgICAgICAgICAgICAgICAiw4MiOiAiQSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDhCI6ICJBIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOFIjogIkEiLAogICAgICAgICAgICAgICAgICAgICAgICAiw6AiOiAiYSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDoSI6ICJhIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOiIjogImEiLAogICAgICAgICAgICAgICAgICAgICAgICAiw6MiOiAiYSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDpCI6ICJhIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOlIjogImEiLAogICAgICAgICAgICAgICAgICAgICAgICAiw4ciOiAiQyIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDpyI6ICJjIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOQIjogIkQiLAogICAgICAgICAgICAgICAgICAgICAgICAiw7AiOiAiZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDiCI6ICJFIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOJIjogIkUiLAogICAgICAgICAgICAgICAgICAgICAgICAiw4oiOiAiRSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDiyI6ICJFIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOoIjogImUiLAogICAgICAgICAgICAgICAgICAgICAgICAiw6kiOiAiZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDqiI6ICJlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOrIjogImUiLAogICAgICAgICAgICAgICAgICAgICAgICAiw4wiOiAiSSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDjSI6ICJJIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOOIjogIkkiLAogICAgICAgICAgICAgICAgICAgICAgICAiw48iOiAiSSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDrCI6ICJpIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOtIjogImkiLAogICAgICAgICAgICAgICAgICAgICAgICAiw64iOiAiaSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDryI6ICJpIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsORIjogIk4iLAogICAgICAgICAgICAgICAgICAgICAgICAiw7EiOiAibiIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDkiI6ICJPIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOTIjogIk8iLAogICAgICAgICAgICAgICAgICAgICAgICAiw5QiOiAiTyIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDlSI6ICJPIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOWIjogIk8iLAogICAgICAgICAgICAgICAgICAgICAgICAiw5giOiAiTyIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDsiI6ICJvIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOzIjogIm8iLAogICAgICAgICAgICAgICAgICAgICAgICAiw7QiOiAibyIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDtSI6ICJvIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsO2IjogIm8iLAogICAgICAgICAgICAgICAgICAgICAgICAiw7giOiAibyIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDmSI6ICJVIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOaIjogIlUiLAogICAgICAgICAgICAgICAgICAgICAgICAiw5siOiAiVSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDnCI6ICJVIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsO5IjogInUiLAogICAgICAgICAgICAgICAgICAgICAgICAiw7oiOiAidSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDuyI6ICJ1IiwKICAgICAgICAgICAgICAgICAgICAgICAgIsO8IjogInUiLAogICAgICAgICAgICAgICAgICAgICAgICAiw50iOiAiWSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDvSI6ICJ5IiwKICAgICAgICAgICAgICAgICAgICAgICAgIsO/IjogInkiLAogICAgICAgICAgICAgICAgICAgICAgICAiw4YiOiAiQWUiLAogICAgICAgICAgICAgICAgICAgICAgICAiw6YiOiAiYWUiLAogICAgICAgICAgICAgICAgICAgICAgICAiw54iOiAiVGgiLAogICAgICAgICAgICAgICAgICAgICAgICAiw74iOiAidGgiLAogICAgICAgICAgICAgICAgICAgICAgICAiw58iOiAic3MiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB6dCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgIiYiOiAiJmFtcDsiLAogICAgICAgICAgICAgICAgICAgICAgICAiPCI6ICImbHQ7IiwKICAgICAgICAgICAgICAgICAgICAgICAgIj4iOiAiJmd0OyIsCiAgICAgICAgICAgICAgICAgICAgICAgICciJzogIiZxdW90OyIsCiAgICAgICAgICAgICAgICAgICAgICAgICInIjogIiYjMzk7IiwKICAgICAgICAgICAgICAgICAgICAgICAgImAiOiAiJiM5NjsiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBWdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgIiZhbXA7IjogIiYiLAogICAgICAgICAgICAgICAgICAgICAgICAiJmx0OyI6ICI8IiwKICAgICAgICAgICAgICAgICAgICAgICAgIiZndDsiOiAiPiIsCiAgICAgICAgICAgICAgICAgICAgICAgICImcXVvdDsiOiAnIicsCiAgICAgICAgICAgICAgICAgICAgICAgICImIzM5OyI6ICInIiwKICAgICAgICAgICAgICAgICAgICAgICAgIiYjOTY7IjogImAiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBHdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgImZ1bmN0aW9uIjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdDogITAKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIFh0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAwOiAieDMwIiwKICAgICAgICAgICAgICAgICAgICAgICAgMTogIngzMSIsCiAgICAgICAgICAgICAgICAgICAgICAgIDI6ICJ4MzIiLAogICAgICAgICAgICAgICAgICAgICAgICAzOiAieDMzIiwKICAgICAgICAgICAgICAgICAgICAgICAgNDogIngzNCIsCiAgICAgICAgICAgICAgICAgICAgICAgIDU6ICJ4MzUiLAogICAgICAgICAgICAgICAgICAgICAgICA2OiAieDM2IiwKICAgICAgICAgICAgICAgICAgICAgICAgNzogIngzNyIsCiAgICAgICAgICAgICAgICAgICAgICAgIDg6ICJ4MzgiLAogICAgICAgICAgICAgICAgICAgICAgICA5OiAieDM5IiwKICAgICAgICAgICAgICAgICAgICAgICAgQTogIng0MSIsCiAgICAgICAgICAgICAgICAgICAgICAgIEI6ICJ4NDIiLAogICAgICAgICAgICAgICAgICAgICAgICBDOiAieDQzIiwKICAgICAgICAgICAgICAgICAgICAgICAgRDogIng0NCIsCiAgICAgICAgICAgICAgICAgICAgICAgIEU6ICJ4NDUiLAogICAgICAgICAgICAgICAgICAgICAgICBGOiAieDQ2IiwKICAgICAgICAgICAgICAgICAgICAgICAgYTogIng2MSIsCiAgICAgICAgICAgICAgICAgICAgICAgIGI6ICJ4NjIiLAogICAgICAgICAgICAgICAgICAgICAgICBjOiAieDYzIiwKICAgICAgICAgICAgICAgICAgICAgICAgZDogIng2NCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGU6ICJ4NjUiLAogICAgICAgICAgICAgICAgICAgICAgICBmOiAieDY2IiwKICAgICAgICAgICAgICAgICAgICAgICAgbjogIng2ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHI6ICJ4NzIiLAogICAgICAgICAgICAgICAgICAgICAgICB0OiAieDc0IiwKICAgICAgICAgICAgICAgICAgICAgICAgdTogIng3NSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHY6ICJ4NzYiLAogICAgICAgICAgICAgICAgICAgICAgICB4OiAieDc4IgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgSnQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICJcXCI6ICJcXCIsCiAgICAgICAgICAgICAgICAgICAgICAgICInIjogIiciLAogICAgICAgICAgICAgICAgICAgICAgICAiXG4iOiAibiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJcciI6ICJyIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlx1MjAyOCI6ICJ1MjAyOCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJcdTIwMjkiOiAidTIwMjkiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBZdCA9IEd0W3R5cGVvZiBuXSAmJiBuICYmICFuLm5vZGVUeXBlICYmIG4sCiAgICAgICAgICAgICAgICAgICAgUXQgPSBHdFt0eXBlb2YgZV0gJiYgZSAmJiAhZS5ub2RlVHlwZSAmJiBlLAogICAgICAgICAgICAgICAgICAgIEt0ID0gWXQgJiYgUXQgJiYgIm9iamVjdCIgPT0gdHlwZW9mIHQgJiYgdCAmJiB0Lk9iamVjdCAmJiB0LAogICAgICAgICAgICAgICAgICAgIFp0ID0gR3RbdHlwZW9mIHNlbGZdICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgJiYgc2VsZiwKICAgICAgICAgICAgICAgICAgICB0ZSA9IEd0W3R5cGVvZiB3aW5kb3ddICYmIHdpbmRvdyAmJiB3aW5kb3cuT2JqZWN0ICYmIHdpbmRvdywKICAgICAgICAgICAgICAgICAgICBlZSA9IFF0ICYmIFF0LmV4cG9ydHMgPT09IFl0ICYmIFl0LAogICAgICAgICAgICAgICAgICAgIG5lID0gS3QgfHwgdGUgIT09ICh0aGlzICYmIHRoaXMud2luZG93KSAmJiB0ZSB8fCBadCB8fCB0aGlzLAogICAgICAgICAgICAgICAgICAgIHJlID0gVCgpOwogICAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmICJvYmplY3QiID09IHR5cGVvZiBkZWZpbmUuYW1kICYmIGRlZmluZS5hbWQgPyAobmUuXyA9IHJlLCBkZWZpbmUoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlCiAgICAgICAgICAgICAgICB9KSkgOiBZdCAmJiBRdCA/IGVlID8gKFF0LmV4cG9ydHMgPSByZSkuXyA9IHJlIDogWXQuXyA9IHJlIDogbmUuXyA9IHJlCiAgICAgICAgICAgIH0pLmNhbGwodGhpcykKICAgICAgICB9KS5jYWxsKHRoaXMsICJ1bmRlZmluZWQiICE9IHR5cGVvZiBnbG9iYWwgPyBnbG9iYWwgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygc2VsZiA/IHNlbGYgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDoge30pCiAgICB9LCB7fV0sCiAgICAxNzogW2Z1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAoZnVuY3Rpb24odCkgewogICAgICAgICAgICAhIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBib290c3RyYXApIGJvb3RzdHJhcCgicHJvbWlzZSIsIHQpOwogICAgICAgICAgICAgICAgZWxzZSBpZiAoIm9iamVjdCIgPT0gdHlwZW9mIG4gJiYgIm9iamVjdCIgPT0gdHlwZW9mIGUpIGUuZXhwb3J0cyA9IHQoKTsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kKSBkZWZpbmUodCk7CiAgICAgICAgICAgICAgICBlbHNlIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2Ygc2VzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXMub2soKSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIHNlcy5tYWtlUSA9IHQKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJ1bmRlZmluZWQiID09IHR5cGVvZiB3aW5kb3cgJiYgInVuZGVmaW5lZCIgPT0gdHlwZW9mIHNlbGYpIHRocm93IG5ldyBFcnJvcigiVGhpcyBlbnZpcm9ubWVudCB3YXMgbm90IGFudGljaXBhdGVkIGJ5IFEuIFBsZWFzZSBmaWxlIGEgYnVnLiIpOwogICAgICAgICAgICAgICAgICAgIHZhciByID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IHNlbGYsCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByLlE7CiAgICAgICAgICAgICAgICAgICAgci5RID0gdCgpLCByLlEubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5RID0gaSwgdGhpcwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfShmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKLmFwcGx5KHQsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IE9iamVjdCh0KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAiW29iamVjdCBTdG9wSXRlcmF0aW9uXSIgPT09IHJ0KHQpIHx8IHQgaW5zdGFuY2VvZiB6CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gaSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKEIgJiYgZS5zdGFjayAmJiAib2JqZWN0IiA9PSB0eXBlb2YgdCAmJiBudWxsICE9PSB0ICYmIHQuc3RhY2sgJiYgLTEgPT09IHQuc3RhY2suaW5kZXhPZihpdCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IFtdLCByID0gZTsgcjsgciA9IHIuc291cmNlKSByLnN0YWNrICYmIG4udW5zaGlmdChyLnN0YWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgbi51bnNoaWZ0KHQuc3RhY2spOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG4uam9pbigiXG4iICsgaXQgKyAiXG4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgdC5zdGFjayA9IG8oaSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gbyh0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IHQuc3BsaXQoIlxuIiksIG4gPSBbXSwgciA9IDA7IHIgPCBlLmxlbmd0aDsgKytyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZVtyXTsKICAgICAgICAgICAgICAgICAgICAgICAgdShpKSB8fCBhKGkpIHx8ICFpIHx8IG4ucHVzaChpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5qb2luKCJcbiIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gYSh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xICE9PSB0LmluZGV4T2YoIihtb2R1bGUuanM6IikgfHwgLTEgIT09IHQuaW5kZXhPZigiKG5vZGUuanM6IikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IC9hdCAuKyBcKCguKyk6KFxkKyk6KD86XGQrKVwpJC8uZXhlYyh0KTsKICAgICAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIFtlWzFdLCBOdW1iZXIoZVsyXSldOwogICAgICAgICAgICAgICAgICAgIHZhciBuID0gL2F0IChbXiBdKyk6KFxkKyk6KD86XGQrKSQvLmV4ZWModCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG4pIHJldHVybiBbblsxXSwgTnVtYmVyKG5bMl0pXTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IC8uKkAoLispOihcZCspJC8uZXhlYyh0KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciA/IFtyWzFdLCBOdW1iZXIoclsyXSldIDogdm9pZCAwCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gdSh0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBzKHQpOwogICAgICAgICAgICAgICAgICAgIGlmICghZSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgIHZhciBuID0gZVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IGVbMV07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPT09IFcgJiYgciA+PSBWICYmIGN0ID49IHIKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjKCkgewogICAgICAgICAgICAgICAgICAgIGlmIChCKSB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdC5zdGFjay5zcGxpdCgiXG4iKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlWzBdLmluZGV4T2YoIkAiKSA+IDAgPyBlWzFdIDogZVsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBzKG4pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFcgPSByWzBdLCByWzFdCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGwodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJ1bmRlZmluZWQiICE9IHR5cGVvZiBjb25zb2xlICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGNvbnNvbGUud2FybiAmJiBjb25zb2xlLndhcm4oZSArICIgaXMgZGVwcmVjYXRlZCwgdXNlICIgKyBuICsgIiBpbnN0ZWFkLiIsIG5ldyBFcnJvcigiIikuc3RhY2spLCB0LmFwcGx5KHQsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBnID8gdCA6IGIodCkgPyBTKHQpIDogQyh0KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHAoKSB7CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdCh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB0LCBvLnNvdXJjZSA9IHQsIFEobiwgZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5uZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnByb21pc2VEaXNwYXRjaC5hcHBseSh0LCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdm9pZCAwKSwgbiA9IHZvaWQgMCwgciA9IHZvaWQgMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgZSwgbiA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICByID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0dChwLnByb3RvdHlwZSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0dChnLnByb3RvdHlwZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG8ucHJvbWlzZURpc3BhdGNoID0gZnVuY3Rpb24odCwgaSwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBZKGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID8gKG4ucHVzaChhKSwgIndoZW4iID09PSBpICYmIG9bMV0gJiYgci5wdXNoKG9bMV0pKSA6IGYubmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcm9taXNlRGlzcGF0Y2guYXBwbHkoZSwgYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIG8udmFsdWVPZiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4pIHJldHVybiBvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB5KGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0odCkgJiYgKGUgPSB0KSwgdAogICAgICAgICAgICAgICAgICAgICAgICB9LCBvLmluc3BlY3QgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID8gZS5pbnNwZWN0KCkgOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6ICJwZW5kaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCBmLmxvbmdTdGFja1N1cHBvcnQgJiYgQikgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICBvLnN0YWNrID0gYS5zdGFjay5zdWJzdHJpbmcoYS5zdGFjay5pbmRleE9mKCJcbiIpICsgMSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkucHJvbWlzZSA9IG8sIGkucmVzb2x2ZSA9IGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSB8fCB0KGYobikpCiAgICAgICAgICAgICAgICAgICAgfSwgaS5mdWxmaWxsID0gZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICBlIHx8IHQoQyhuKSkKICAgICAgICAgICAgICAgICAgICB9LCBpLnJlamVjdCA9IGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSB8fCB0KGoobikpCiAgICAgICAgICAgICAgICAgICAgfSwgaS5ub3RpZnkgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgfHwgUShyLCBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLm5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4odCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHZvaWQgMCkKICAgICAgICAgICAgICAgICAgICB9LCBpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gaCh0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHQpIHRocm93IG5ldyBUeXBlRXJyb3IoInJlc29sdmVyIG11c3QgYmUgYSBmdW5jdGlvbi4iKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHAoKTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICB0KGUucmVzb2x2ZSwgZS5yZWplY3QsIGUubm90aWZ5KQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZS5yZWplY3QobikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucHJvbWlzZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGQodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBoKGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDAsIGkgPSB0Lmxlbmd0aDsgaSA+IHI7IHIrKykgZih0W3JdKS50aGVuKGUsIG4pCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqKG5ldyBFcnJvcigiUHJvbWlzZSBkb2VzIG5vdCBzdXBwb3J0IG9wZXJhdGlvbjogIiArIHQpKQogICAgICAgICAgICAgICAgICAgIH0pLCB2b2lkIDAgPT09IG4gJiYgKG4gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiAidW5rbm93biIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciByID0gdHQoZy5wcm90b3R5cGUpOwogICAgICAgICAgICAgICAgICAgIGlmIChyLnByb21pc2VEaXNwYXRjaCA9IGZ1bmN0aW9uKG4sIGksIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdFtpXSA/IHRbaV0uYXBwbHkociwgbykgOiBlLmNhbGwociwgaSwgbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gaihzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiBuKGEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHIuaW5zcGVjdCA9IG4sIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBuKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICJyZWplY3RlZCIgPT09IGkuc3RhdGUgJiYgKHIuZXhjZXB0aW9uID0gaS5yZWFzb24pLCByLnZhbHVlT2YgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJwZW5kaW5nIiA9PT0gdC5zdGF0ZSB8fCAicmVqZWN0ZWQiID09PSB0LnN0YXRlID8gciA6IHQudmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHYodCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLnRoZW4oZSwgbiwgcikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB5KHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAobSh0KSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQuaW5zcGVjdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoImZ1bGZpbGxlZCIgPT09IGUuc3RhdGUpIHJldHVybiBlLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gbSh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBnCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gYih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4odCkgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgdC50aGVuCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24geCh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0odCkgJiYgInBlbmRpbmciID09PSB0Lmluc3BlY3QoKS5zdGF0ZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHcodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhbSh0KSB8fCAiZnVsZmlsbGVkIiA9PT0gdC5pbnNwZWN0KCkuc3RhdGUKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBfKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSh0KSAmJiAicmVqZWN0ZWQiID09PSB0Lmluc3BlY3QoKS5zdGF0ZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGsoKSB7CiAgICAgICAgICAgICAgICAgICAgb3QubGVuZ3RoID0gMCwgYXQubGVuZ3RoID0gMCwgdXQgfHwgKHV0ID0gITApCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gVChlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdXQgJiYgKCJvYmplY3QiID09IHR5cGVvZiB0ICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIHQuZW1pdCAmJiBmLm5leHRUaWNrLnJ1bkFmdGVyKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAtMSAhPT0gSyhhdCwgZSkgJiYgKHQuZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIiwgbiwgZSksIHN0LnB1c2goZSkpCiAgICAgICAgICAgICAgICAgICAgfSksIGF0LnB1c2goZSksIG4gJiYgInVuZGVmaW5lZCIgIT0gdHlwZW9mIG4uc3RhY2sgPyBvdC5wdXNoKG4uc3RhY2spIDogb3QucHVzaCgiKG5vIHN0YWNrKSAiICsgbikpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gRShlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHV0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gSyhhdCwgZSk7IC0gMSAhPT0gbiAmJiAoIm9iamVjdCIgPT0gdHlwZW9mIHQgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgdC5lbWl0ICYmIGYubmV4dFRpY2sucnVuQWZ0ZXIoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IEsoc3QsIGUpOyAtIDEgIT09IHIgJiYgKHQuZW1pdCgicmVqZWN0aW9uSGFuZGxlZCIsIG90W25dLCBlKSwgc3Quc3BsaWNlKHIsIDEpKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgYXQuc3BsaWNlKG4sIDEpLCBvdC5zcGxpY2UobiwgMSkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGoodCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gZyh7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoZW46IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlICYmIEUodGhpcyksIGUgPyBlKHQpIDogdGhpcwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogInJlamVjdGVkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogdAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFQoZSwgdCksIGUKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBDKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZyh7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoZW46IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdFtlXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbZV0gPSBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICJkZWxldGUiOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdFtlXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBwb3N0OiBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB0LmFwcGx5KHZvaWQgMCwgbikgOiB0W2VdLmFwcGx5KHQsIG4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseShlLCBuKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBrZXlzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudCh0KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgdm9pZCAwLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiAiZnVsZmlsbGVkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFModCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gcCgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmLm5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC50aGVuKGUucmVzb2x2ZSwgZS5yZWplY3QsIGUubm90aWZ5KQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnJlamVjdChuKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksIGUucHJvbWlzZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEEodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBnKHsKICAgICAgICAgICAgICAgICAgICAgICAgaXNEZWY6IGZ1bmN0aW9uKCkge30KICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEKHQsIGUsIG4pCiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLmluc3BlY3QoKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gTih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkuc3ByZWFkKGUsIG4pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gUih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBlKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJ1bmRlZmluZWQiID09IHR5cGVvZiBTdG9wSXRlcmF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG5bdF0oZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqKHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmRvbmUgPyBmKGEudmFsdWUpIDogdihhLnZhbHVlLCBpLCBvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gblt0XShlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKHMpID8gZihzLnZhbHVlKSA6IGoocykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2KGEsIGksIG8pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZS5iaW5kKGUsICJuZXh0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5iaW5kKGUsICJ0aHJvdyIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEkodCkgewogICAgICAgICAgICAgICAgICAgIGYuZG9uZShmLmFzeW5jKHQpKCkpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gTyh0KSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IHoodCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBMKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOKFt0aGlzLCBQKGFyZ3VtZW50cyldLCBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseShlLCBuKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBEKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KS5kaXNwYXRjaChlLCBuKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFAodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB2KHQsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFEodCwgZnVuY3Rpb24ociwgaSwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtKGkpICYmICJmdWxmaWxsZWQiID09PSAoYSA9IGkuaW5zcGVjdCgpKS5zdGF0ZSA/IHRbb10gPSBhLnZhbHVlIDogKCsrZSwgdihpLCBmdW5jdGlvbihyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtvXSA9IHIsIDAgPT09IC0tZSAmJiBuLnJlc29sdmUodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG4ucmVqZWN0LCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5ub3RpZnkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHZvaWQgMCksIDAgPT09IGUgJiYgbi5yZXNvbHZlKHQpLCBuLnByb21pc2UKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uICQodCkgewogICAgICAgICAgICAgICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgcmV0dXJuIGYucmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgIHZhciBlID0gZi5kZWZlcigpLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gMDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gUSh0LCBmdW5jdGlvbihyLCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGEodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZXNvbHZlKHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHMoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLS0sIDAgPT09IG4gJiYgZS5yZWplY3QobmV3IEVycm9yKCJDYW4ndCBnZXQgZnVsZmlsbG1lbnQgdmFsdWUgZnJvbSBhbnkgcHJvbWlzZSwgYWxsIHByb21pc2VzIHdlcmUgcmVqZWN0ZWQuIikpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHUodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5ub3RpZnkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gdFtvXTsKICAgICAgICAgICAgICAgICAgICAgICAgbisrLCB2KGMsIGEsIHMsIHUpCiAgICAgICAgICAgICAgICAgICAgfSwgdm9pZCAwKSwgZS5wcm9taXNlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcSh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYodCwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IFoodCwgZiksIHYoUChaKHQsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2KHQsIEcsIEcpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gSCh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkuYWxsU2V0dGxlZCgpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gTSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkudGhlbih2b2lkIDAsIHZvaWQgMCwgZSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBGKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KS5ub2RlaWZ5KGUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgQiA9ICExOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKFUpIHsKICAgICAgICAgICAgICAgICAgICBCID0gISFVLnN0YWNrCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgVywgeiwgViA9IGMoKSwKICAgICAgICAgICAgICAgICAgICBHID0gZnVuY3Rpb24oKSB7fSwKICAgICAgICAgICAgICAgICAgICBYID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0LCBlOyByLm5leHQ7KSByID0gci5uZXh0LCB0ID0gci50YXNrLCByLnRhc2sgPSB2b2lkIDAsIGUgPSByLmRvbWFpbiwgZSAmJiAoci5kb21haW4gPSB2b2lkIDAsIGUuZW50ZXIoKSksIG4odCwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgdS5sZW5ndGg7KSB0ID0gdS5wb3AoKSwgbih0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSAhMQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBuKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMpIHRocm93IG4gJiYgbi5leGl0KCksIHNldFRpbWVvdXQoZSwgMCksIG4gJiYgbi5lbnRlcigpLCByOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiBuLmV4aXQoKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2s6IHZvaWQgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdm9pZCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoWCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gaS5uZXh0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrOiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21haW46IHMgJiYgdC5kb21haW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBvIHx8IChvID0gITAsIGEoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICJvYmplY3QiID09IHR5cGVvZiB0ICYmICJbb2JqZWN0IHByb2Nlc3NdIiA9PT0gdC50b1N0cmluZygpICYmIHQubmV4dFRpY2spIHMgPSAhMCwgYSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5uZXh0VGljayhlKQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBzZXRJbW1lZGlhdGUpIGEgPSAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ID8gc2V0SW1tZWRpYXRlLmJpbmQod2luZG93LCBlKSA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SW1tZWRpYXRlKGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBuZXcgTWVzc2FnZUNoYW5uZWw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBsLCBjLnBvcnQxLm9ubWVzc2FnZSA9IGUsIGUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5wb3J0Mi5wb3N0TWVzc2FnZSgwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGUsIDApLCBsKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGEgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFgucnVuQWZ0ZXIgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LnB1c2godCksIG8gfHwgKG8gPSAhMCwgYSgpKQogICAgICAgICAgICAgICAgICAgICAgICB9LCBYCiAgICAgICAgICAgICAgICAgICAgfSgpLAogICAgICAgICAgICAgICAgICAgIEogPSBGdW5jdGlvbi5jYWxsLAogICAgICAgICAgICAgICAgICAgIFkgPSBlKEFycmF5LnByb3RvdHlwZS5zbGljZSksCiAgICAgICAgICAgICAgICAgICAgUSA9IGUoQXJyYXkucHJvdG90eXBlLnJlZHVjZSB8fCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IGFyZ3VtZW50cy5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gaW4gdGhpcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gdGhpc1tuKytdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKytuID49IHIpIHRocm93IG5ldyBUeXBlRXJyb3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IHIgPiBuOyBuKyspIG4gaW4gdGhpcyAmJiAoZSA9IHQoZSwgdGhpc1tuXSwgbikpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIEsgPSBlKEFycmF5LnByb3RvdHlwZS5pbmRleE9mIHx8IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCB0aGlzLmxlbmd0aDsgZSsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNbZV0gPT09IHQpIHJldHVybiBlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBaID0gZShBcnJheS5wcm90b3R5cGUubWFwIHx8IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUShuLCBmdW5jdGlvbihpLCBvLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLnB1c2godC5jYWxsKGUsIG8sIGEsIG4pKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB2b2lkIDApLCByCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgdHQgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZSgpIHt9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnByb3RvdHlwZSA9IHQsIG5ldyBlCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBldCA9IGUoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSksCiAgICAgICAgICAgICAgICAgICAgbnQgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gaW4gdCkgZXQodCwgbikgJiYgZS5wdXNoKG4pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcnQgPSBlKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpOwogICAgICAgICAgICAgICAgeiA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBSZXR1cm5WYWx1ZSA/IFJldHVyblZhbHVlIDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIGl0ID0gIkZyb20gcHJldmlvdXMgZXZlbnQ6IjsKICAgICAgICAgICAgICAgIGYucmVzb2x2ZSA9IGYsIGYubmV4dFRpY2sgPSBYLCBmLmxvbmdTdGFja1N1cHBvcnQgPSAhMSwgIm9iamVjdCIgPT0gdHlwZW9mIHQgJiYgdCAmJiB0LmVudiAmJiB0LmVudi5RX0RFQlVHICYmIChmLmxvbmdTdGFja1N1cHBvcnQgPSAhMCksIGYuZGVmZXIgPSBwLCBwLnByb3RvdHlwZS5tYWtlTm9kZVJlc29sdmVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPyB0LnJlamVjdChlKSA6IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gdC5yZXNvbHZlKFkoYXJndW1lbnRzLCAxKSkgOiB0LnJlc29sdmUobikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBmLlByb21pc2UgPSBoLCBmLnByb21pc2UgPSBoLCBoLnJhY2UgPSBkLCBoLmFsbCA9IFAsIGgucmVqZWN0ID0gaiwgaC5yZXNvbHZlID0gZiwgZi5wYXNzQnlDb3B5ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5wYXNzQnlDb3B5ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgIH0sIGYuam9pbiA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KS5qb2luKGUpCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5qb2luID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKFt0aGlzLCB0XSkuc3ByZWFkKGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPT09IGUpIHJldHVybiB0OwogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNhbid0IGpvaW46IG5vdCB0aGUgc2FtZTogIiArIHQgKyAiICIgKyBlKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCBmLnJhY2UgPSBkLCBnLnByb3RvdHlwZS5yYWNlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGhlbihmLnJhY2UpCiAgICAgICAgICAgICAgICB9LCBmLm1ha2VQcm9taXNlID0gZywgZy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIltvYmplY3QgUHJvbWlzZV0iCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIHQgPyB0KGUpIDogZQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaihuKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkodCwgcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGoobikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaih0KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBuID8gbih0KSA6IHQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICB1ID0gcCgpLAogICAgICAgICAgICAgICAgICAgICAgICBjID0gITE7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYubmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMucHJvbWlzZURpc3BhdGNoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgfHwgKGMgPSAhMCwgdS5yZXNvbHZlKHIodCkpKQogICAgICAgICAgICAgICAgICAgICAgICB9LCAid2hlbiIsIFtmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjIHx8IChjID0gITAsIHUucmVzb2x2ZShvKHQpKSkKICAgICAgICAgICAgICAgICAgICAgICAgfV0pCiAgICAgICAgICAgICAgICAgICAgfSksIHMucHJvbWlzZURpc3BhdGNoKHZvaWQgMCwgIndoZW4iLCBbdm9pZCAwLCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlLCBuID0gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gYSh0KQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9ICEwLCAhZi5vbmVycm9yKSB0aHJvdyByOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5vbmVycm9yKHIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbiB8fCB1Lm5vdGlmeShlKQogICAgICAgICAgICAgICAgICAgIH1dKSwgdS5wcm9taXNlCiAgICAgICAgICAgICAgICB9LCBmLnRhcCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KS50YXAoZSkKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLnRhcCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IGYodCksIHRoaXMudGhlbihmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmZjYWxsKGUpLnRoZW5SZXNvbHZlKGUpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sIGYud2hlbiA9IHYsIGcucHJvdG90eXBlLnRoZW5SZXNvbHZlID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sIGYudGhlblJlc29sdmUgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkudGhlblJlc29sdmUoZSkKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLnRoZW5SZWplY3QgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCBmLnRoZW5SZWplY3QgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkudGhlblJlamVjdChlKQogICAgICAgICAgICAgICAgfSwgZi5uZWFyZXIgPSB5LCBmLmlzUHJvbWlzZSA9IG0sIGYuaXNQcm9taXNlQWxpa2UgPSBiLCBmLmlzUGVuZGluZyA9IHgsIGcucHJvdG90eXBlLmlzUGVuZGluZyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAicGVuZGluZyIgPT09IHRoaXMuaW5zcGVjdCgpLnN0YXRlCiAgICAgICAgICAgICAgICB9LCBmLmlzRnVsZmlsbGVkID0gdywgZy5wcm90b3R5cGUuaXNGdWxmaWxsZWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gImZ1bGZpbGxlZCIgPT09IHRoaXMuaW5zcGVjdCgpLnN0YXRlCiAgICAgICAgICAgICAgICB9LCBmLmlzUmVqZWN0ZWQgPSBfLCBnLnByb3RvdHlwZS5pc1JlamVjdGVkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJyZWplY3RlZCIgPT09IHRoaXMuaW5zcGVjdCgpLnN0YXRlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIG90ID0gW10sCiAgICAgICAgICAgICAgICAgICAgYXQgPSBbXSwKICAgICAgICAgICAgICAgICAgICBzdCA9IFtdLAogICAgICAgICAgICAgICAgICAgIHV0ID0gITA7CiAgICAgICAgICAgICAgICBmLnJlc2V0VW5oYW5kbGVkUmVqZWN0aW9ucyA9IGssIGYuZ2V0VW5oYW5kbGVkUmVhc29ucyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBvdC5zbGljZSgpCiAgICAgICAgICAgICAgICB9LCBmLnN0b3BVbmhhbmRsZWRSZWplY3Rpb25UcmFja2luZyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGsoKSwgdXQgPSAhMQogICAgICAgICAgICAgICAgfSwgaygpLCBmLnJlamVjdCA9IGosIGYuZnVsZmlsbCA9IEMsIGYubWFzdGVyID0gQSwgZi5zcHJlYWQgPSBOLCBnLnByb3RvdHlwZS5zcHJlYWQgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWxsKCkudGhlbihmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmFwcGx5KHZvaWQgMCwgZSkKICAgICAgICAgICAgICAgICAgICB9LCBlKQogICAgICAgICAgICAgICAgfSwgZi5hc3luYyA9IFIsIGYuc3Bhd24gPSBJLCBmWyJyZXR1cm4iXSA9IE8sIGYucHJvbWlzZWQgPSBMLCBmLmRpc3BhdGNoID0gRCwgZy5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICByID0gcCgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmLm5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBuLnByb21pc2VEaXNwYXRjaChyLnJlc29sdmUsIHQsIGUpCiAgICAgICAgICAgICAgICAgICAgfSksIHIucHJvbWlzZQogICAgICAgICAgICAgICAgfSwgZi5nZXQgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkuZGlzcGF0Y2goImdldCIsIFtlXSkKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNwYXRjaCgiZ2V0IiwgW3RdKQogICAgICAgICAgICAgICAgfSwgZi5zZXQgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkuZGlzcGF0Y2goInNldCIsIFtlLCBuXSkKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNwYXRjaCgic2V0IiwgW3QsIGVdKQogICAgICAgICAgICAgICAgfSwgZi5kZWwgPSBmWyJkZWxldGUiXSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KS5kaXNwYXRjaCgiZGVsZXRlIiwgW2VdKQogICAgICAgICAgICAgICAgfSwgZy5wcm90b3R5cGUuZGVsID0gZy5wcm90b3R5cGVbImRlbGV0ZSJdID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKCJkZWxldGUiLCBbdF0pCiAgICAgICAgICAgICAgICB9LCBmLm1hcHBseSA9IGYucG9zdCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KS5kaXNwYXRjaCgicG9zdCIsIFtlLCBuXSkKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLm1hcHBseSA9IGcucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goInBvc3QiLCBbdCwgZV0pCiAgICAgICAgICAgICAgICB9LCBmLnNlbmQgPSBmLm1jYWxsID0gZi5pbnZva2UgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkuZGlzcGF0Y2goInBvc3QiLCBbZSwgWShhcmd1bWVudHMsIDIpXSkKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLnNlbmQgPSBnLnByb3RvdHlwZS5tY2FsbCA9IGcucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNwYXRjaCgicG9zdCIsIFt0LCBZKGFyZ3VtZW50cywgMSldKQogICAgICAgICAgICAgICAgfSwgZi5mYXBwbHkgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkuZGlzcGF0Y2goImFwcGx5IiwgW3ZvaWQgMCwgZV0pCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5mYXBwbHkgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goImFwcGx5IiwgW3ZvaWQgMCwgdF0pCiAgICAgICAgICAgICAgICB9LCBmWyJ0cnkiXSA9IGYuZmNhbGwgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkuZGlzcGF0Y2goImFwcGx5IiwgW3ZvaWQgMCwgWShhcmd1bWVudHMsIDEpXSkKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLmZjYWxsID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goImFwcGx5IiwgW3ZvaWQgMCwgWShhcmd1bWVudHMpXSkKICAgICAgICAgICAgICAgIH0sIGYuZmJpbmQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBmKHQpLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gWShhcmd1bWVudHMsIDEpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZGlzcGF0Y2goImFwcGx5IiwgW3RoaXMsIG4uY29uY2F0KFkoYXJndW1lbnRzKSldKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLmZiaW5kID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICBlID0gWShhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuZGlzcGF0Y2goImFwcGx5IiwgW3RoaXMsIGUuY29uY2F0KFkoYXJndW1lbnRzKSldKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIGYua2V5cyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KS5kaXNwYXRjaCgia2V5cyIsIFtdKQogICAgICAgICAgICAgICAgfSwgZy5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKCJrZXlzIiwgW10pCiAgICAgICAgICAgICAgICB9LCBmLmFsbCA9IFAsIGcucHJvdG90eXBlLmFsbCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBQKHRoaXMpCiAgICAgICAgICAgICAgICB9LCBmLmFueSA9ICQsIGcucHJvdG90eXBlLmFueSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpCiAgICAgICAgICAgICAgICB9LCBmLmFsbFJlc29sdmVkID0gbChxLCAiYWxsUmVzb2x2ZWQiLCAiYWxsU2V0dGxlZCIpLCBnLnByb3RvdHlwZS5hbGxSZXNvbHZlZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBxKHRoaXMpCiAgICAgICAgICAgICAgICB9LCBmLmFsbFNldHRsZWQgPSBILCBnLnByb3RvdHlwZS5hbGxTZXR0bGVkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQKFoodCwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pbnNwZWN0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gZih0KSwgdC50aGVuKGUsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCBmLmZhaWwgPSBmWyJjYXRjaCJdID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLnRoZW4odm9pZCAwLCBlKQogICAgICAgICAgICAgICAgfSwgZy5wcm90b3R5cGUuZmFpbCA9IGcucHJvdG90eXBlWyJjYXRjaCJdID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4odm9pZCAwLCB0KQogICAgICAgICAgICAgICAgfSwgZi5wcm9ncmVzcyA9IE0sIGcucHJvdG90eXBlLnByb2dyZXNzID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4odm9pZCAwLCB2b2lkIDAsIHQpCiAgICAgICAgICAgICAgICB9LCBmLmZpbiA9IGZbImZpbmFsbHkiXSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KVsiZmluYWxseSJdKGUpCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5maW4gPSBnLnByb3RvdHlwZVsiZmluYWxseSJdID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gZih0KSwgdGhpcy50aGVuKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuZmNhbGwoKS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmZjYWxsKCkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgZi5kb25lID0gZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLmRvbmUoZSwgbiwgcikKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLmRvbmUgPSBmdW5jdGlvbihlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLm5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpKHQsIGEpLCAhZi5vbmVycm9yKSB0aHJvdyB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYub25lcnJvcih0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGUgfHwgbiB8fCByID8gdGhpcy50aGVuKGUsIG4sIHIpIDogdGhpczsKICAgICAgICAgICAgICAgICAgICAib2JqZWN0IiA9PSB0eXBlb2YgdCAmJiB0ICYmIHQuZG9tYWluICYmIChvID0gdC5kb21haW4uYmluZChvKSksIGEudGhlbih2b2lkIDAsIG8pCiAgICAgICAgICAgICAgICB9LCBmLnRpbWVvdXQgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkudGltZW91dChlLCBuKQogICAgICAgICAgICAgICAgfSwgZy5wcm90b3R5cGUudGltZW91dCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHAoKSwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlICYmICJzdHJpbmciICE9IHR5cGVvZiBlIHx8IChlID0gbmV3IEVycm9yKGUgfHwgIlRpbWVkIG91dCBhZnRlciAiICsgdCArICIgbXMiKSwgZS5jb2RlID0gIkVUSU1FRE9VVCIpLCBuLnJlamVjdChlKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHIpLCBuLnJlc29sdmUodCkKICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChyKSwgbi5yZWplY3QodCkKICAgICAgICAgICAgICAgICAgICB9LCBuLm5vdGlmeSksIG4ucHJvbWlzZQogICAgICAgICAgICAgICAgfSwgZi5kZWxheSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBlICYmIChlID0gdCwgdCA9IHZvaWQgMCksIGYodCkuZGVsYXkoZSkKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLmRlbGF5ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnJlc29sdmUoZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdCksIG4ucHJvbWlzZQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCBmLm5mYXBwbHkgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkubmZhcHBseShlKQogICAgICAgICAgICAgICAgfSwgZy5wcm90b3R5cGUubmZhcHBseSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHAoKSwKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IFkodCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ucHVzaChlLm1ha2VOb2RlUmVzb2x2ZXIoKSksIHRoaXMuZmFwcGx5KG4pLmZhaWwoZS5yZWplY3QpLCBlLnByb21pc2UKICAgICAgICAgICAgICAgIH0sIGYubmZjYWxsID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gWShhcmd1bWVudHMsIDEpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLm5mYXBwbHkoZSkKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLm5mY2FsbCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gWShhcmd1bWVudHMpLAogICAgICAgICAgICAgICAgICAgICAgICBlID0gcCgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnB1c2goZS5tYWtlTm9kZVJlc29sdmVyKCkpLCB0aGlzLmZhcHBseSh0KS5mYWlsKGUucmVqZWN0KSwgZS5wcm9taXNlCiAgICAgICAgICAgICAgICB9LCBmLm5mYmluZCA9IGYuZGVub2RlaWZ5ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gWShhcmd1bWVudHMsIDEpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlLmNvbmNhdChZKGFyZ3VtZW50cykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ucHVzaChyLm1ha2VOb2RlUmVzb2x2ZXIoKSksIGYodCkuZmFwcGx5KG4pLmZhaWwoci5yZWplY3QpLCByLnByb21pc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5uZmJpbmQgPSBnLnByb3RvdHlwZS5kZW5vZGVpZnkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IFkoYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC51bnNoaWZ0KHRoaXMpLCBmLmRlbm9kZWlmeS5hcHBseSh2b2lkIDAsIHQpCiAgICAgICAgICAgICAgICB9LCBmLm5iaW5kID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gWShhcmd1bWVudHMsIDIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmFwcGx5KGUsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG4uY29uY2F0KFkoYXJndW1lbnRzKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gcCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5wdXNoKG8ubWFrZU5vZGVSZXNvbHZlcigpKSwgZihyKS5mYXBwbHkoaSkuZmFpbChvLnJlamVjdCksIG8ucHJvbWlzZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLm5iaW5kID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBZKGFyZ3VtZW50cywgMCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQudW5zaGlmdCh0aGlzKSwgZi5uYmluZC5hcHBseSh2b2lkIDAsIHQpCiAgICAgICAgICAgICAgICB9LCBmLm5tYXBwbHkgPSBmLm5wb3N0ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLm5wb3N0KGUsIG4pCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5ubWFwcGx5ID0gZy5wcm90b3R5cGUubnBvc3QgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBZKGUgfHwgW10pLAogICAgICAgICAgICAgICAgICAgICAgICByID0gcCgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnB1c2goci5tYWtlTm9kZVJlc29sdmVyKCkpLCB0aGlzLmRpc3BhdGNoKCJwb3N0IiwgW3QsIG5dKS5mYWlsKHIucmVqZWN0KSwgci5wcm9taXNlCiAgICAgICAgICAgICAgICB9LCBmLm5zZW5kID0gZi5ubWNhbGwgPSBmLm5pbnZva2UgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBZKGFyZ3VtZW50cywgMiksCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBwKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ucHVzaChyLm1ha2VOb2RlUmVzb2x2ZXIoKSksIGYodCkuZGlzcGF0Y2goInBvc3QiLCBbZSwgbl0pLmZhaWwoci5yZWplY3QpLCByLnByb21pc2UKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLm5zZW5kID0gZy5wcm90b3R5cGUubm1jYWxsID0gZy5wcm90b3R5cGUubmludm9rZSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IFkoYXJndW1lbnRzLCAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHAoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wdXNoKG4ubWFrZU5vZGVSZXNvbHZlcigpKSwgdGhpcy5kaXNwYXRjaCgicG9zdCIsIFt0LCBlXSkuZmFpbChuLnJlamVjdCksIG4ucHJvbWlzZQogICAgICAgICAgICAgICAgfSwgZi5ub2RlaWZ5ID0gRiwgZy5wcm90b3R5cGUubm9kZWlmeSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA/IHZvaWQgdGhpcy50aGVuKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZi5uZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQobnVsbCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGYubmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0KGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSkgOiB0aGlzCiAgICAgICAgICAgICAgICB9LCBmLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlEubm9Db25mbGljdCBvbmx5IHdvcmtzIHdoZW4gUSBpcyB1c2VkIGFzIGEgZ2xvYmFsIikKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgY3QgPSBjKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gZgogICAgICAgICAgICB9KQogICAgICAgIH0pLmNhbGwodGhpcywgdCgiX3Byb2Nlc3MiKSkKICAgIH0sIHsKICAgICAgICBfcHJvY2VzczogMTEKICAgIH1dLAogICAgMTg6IFtmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgZnVuY3Rpb24gcigpIHt9CgogICAgICAgIGZ1bmN0aW9uIGkodCkgewogICAgICAgICAgICB2YXIgZSA9IHt9LnRvU3RyaW5nLmNhbGwodCk7CiAgICAgICAgICAgIHN3aXRjaCAoZSkgewogICAgICAgICAgICAgICAgY2FzZSAiW29iamVjdCBGaWxlXSI6CiAgICAgICAgICAgICAgICBjYXNlICJbb2JqZWN0IEJsb2JdIjoKICAgICAgICAgICAgICAgIGNhc2UgIltvYmplY3QgRm9ybURhdGFdIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBvKCkgewogICAgICAgICAgICBpZiAoeS5YTUxIdHRwUmVxdWVzdCAmJiAoImZpbGU6IiAhPSB5LmxvY2F0aW9uLnByb3RvY29sIHx8ICF5LkFjdGl2ZVhPYmplY3QpKSByZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0OwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpCiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHt9CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1zeG1sMi5YTUxIVFRQLjYuMCIpCiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHt9CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1zeG1sMi5YTUxIVFRQLjMuMCIpCiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHt9CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1zeG1sMi5YTUxIVFRQIikKICAgICAgICAgICAgfSBjYXRjaCAodCkge30KICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhKHQpIHsKICAgICAgICAgICAgcmV0dXJuIHQgPT09IE9iamVjdCh0KQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcyh0KSB7CiAgICAgICAgICAgIGlmICghYSh0KSkgcmV0dXJuIHQ7CiAgICAgICAgICAgIHZhciBlID0gW107CiAgICAgICAgICAgIGZvciAodmFyIG4gaW4gdCkgbnVsbCAhPSB0W25dICYmIGUucHVzaChlbmNvZGVVUklDb21wb25lbnQobikgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQodFtuXSkpOwogICAgICAgICAgICByZXR1cm4gZS5qb2luKCImIikKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHUodCkgewogICAgICAgICAgICBmb3IgKHZhciBlLCBuLCByID0ge30sIGkgPSB0LnNwbGl0KCImIiksIG8gPSAwLCBhID0gaS5sZW5ndGg7IGEgPiBvOyArK28pIG4gPSBpW29dLCBlID0gbi5zcGxpdCgiPSIpLCByW2RlY29kZVVSSUNvbXBvbmVudChlWzBdKV0gPSBkZWNvZGVVUklDb21wb25lbnQoZVsxXSk7CiAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjKHQpIHsKICAgICAgICAgICAgdmFyIGUsIG4sIHIsIGksIG8gPSB0LnNwbGl0KC9ccj9cbi8pLAogICAgICAgICAgICAgICAgYSA9IHt9OwogICAgICAgICAgICBvLnBvcCgpOwogICAgICAgICAgICBmb3IgKHZhciBzID0gMCwgdSA9IG8ubGVuZ3RoOyB1ID4gczsgKytzKSBuID0gb1tzXSwgZSA9IG4uaW5kZXhPZigiOiIpLCByID0gbi5zbGljZSgwLCBlKS50b0xvd2VyQ2FzZSgpLCBpID0gbShuLnNsaWNlKGUgKyAxKSksIGFbcl0gPSBpOwogICAgICAgICAgICByZXR1cm4gYQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbCh0KSB7CiAgICAgICAgICAgIHJldHVybiB0LnNwbGl0KC8gKjsgKi8pLnNoaWZ0KCkKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGYodCkgewogICAgICAgICAgICByZXR1cm4gdih0LnNwbGl0KC8gKjsgKi8pLCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IGUuc3BsaXQoLyAqPSAqLyksCiAgICAgICAgICAgICAgICAgICAgciA9IG4uc2hpZnQoKSwKICAgICAgICAgICAgICAgICAgICBpID0gbi5zaGlmdCgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHIgJiYgaSAmJiAodFtyXSA9IGkpLCB0CiAgICAgICAgICAgIH0sIHt9KQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcCh0LCBlKSB7CiAgICAgICAgICAgIGUgPSBlIHx8IHt9LCB0aGlzLnJlcSA9IHQsIHRoaXMueGhyID0gdGhpcy5yZXEueGhyLCB0aGlzLnRleHQgPSAiSEVBRCIgIT0gdGhpcy5yZXEubWV0aG9kID8gdGhpcy54aHIucmVzcG9uc2VUZXh0IDogbnVsbCwgdGhpcy5zZXRTdGF0dXNQcm9wZXJ0aWVzKHRoaXMueGhyLnN0YXR1cyksIHRoaXMuaGVhZGVyID0gdGhpcy5oZWFkZXJzID0gYyh0aGlzLnhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSksIHRoaXMuaGVhZGVyWyJjb250ZW50LXR5cGUiXSA9IHRoaXMueGhyLmdldFJlc3BvbnNlSGVhZGVyKCJjb250ZW50LXR5cGUiKSwgdGhpcy5zZXRIZWFkZXJQcm9wZXJ0aWVzKHRoaXMuaGVhZGVyKSwgdGhpcy5ib2R5ID0gIkhFQUQiICE9IHRoaXMucmVxLm1ldGhvZCA/IHRoaXMucGFyc2VCb2R5KHRoaXMudGV4dCkgOiBudWxsCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBoKHQsIGUpIHsKICAgICAgICAgICAgdmFyIG4gPSB0aGlzOwogICAgICAgICAgICBnLmNhbGwodGhpcyksIHRoaXMuX3F1ZXJ5ID0gdGhpcy5fcXVlcnkgfHwgW10sIHRoaXMubWV0aG9kID0gdCwgdGhpcy51cmwgPSBlLCB0aGlzLmhlYWRlciA9IHt9LCB0aGlzLl9oZWFkZXIgPSB7fSwgdGhpcy5vbigiZW5kIiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IG51bGwsCiAgICAgICAgICAgICAgICAgICAgZSA9IG51bGw7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGUgPSBuZXcgcChuKQogICAgICAgICAgICAgICAgfSBjYXRjaCAocikgewogICAgICAgICAgICAgICAgICAgIHQgPSBuZXcgRXJyb3IoIlBhcnNlciBpcyB1bmFibGUgdG8gcGFyc2UgdGhlIHJlc3BvbnNlIiksIHQucGFyc2UgPSAhMCwgdC5vcmlnaW5hbCA9IHIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG4uY2FsbGJhY2sodCwgZSkKICAgICAgICAgICAgfSkKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGQodCwgZSkgewogICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSA/IG5ldyBoKCJHRVQiLCB0KS5lbmQoZSkgOiAxID09IGFyZ3VtZW50cy5sZW5ndGggPyBuZXcgaCgiR0VUIiwgdCkgOiBuZXcgaCh0LCBlKQogICAgICAgIH0KICAgICAgICB2YXIgZyA9IHQoImVtaXR0ZXIiKSwKICAgICAgICAgICAgdiA9IHQoInJlZHVjZSIpLAogICAgICAgICAgICB5ID0gInVuZGVmaW5lZCIgPT0gdHlwZW9mIHdpbmRvdyA/IHRoaXMgOiB3aW5kb3csCiAgICAgICAgICAgIG0gPSAiIi50cmltID8gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQudHJpbSgpCiAgICAgICAgICAgIH0gOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdC5yZXBsYWNlKC8oXlxzKnxccyokKS9nLCAiIikKICAgICAgICAgICAgfTsKICAgICAgICBkLnNlcmlhbGl6ZU9iamVjdCA9IHMsIGQucGFyc2VTdHJpbmcgPSB1LCBkLnR5cGVzID0gewogICAgICAgICAgICBodG1sOiAidGV4dC9odG1sIiwKICAgICAgICAgICAganNvbjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICB4bWw6ICJhcHBsaWNhdGlvbi94bWwiLAogICAgICAgICAgICB1cmxlbmNvZGVkOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwKICAgICAgICAgICAgZm9ybTogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsCiAgICAgICAgICAgICJmb3JtLWRhdGEiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIgogICAgICAgIH0sIGQuc2VyaWFsaXplID0gewogICAgICAgICAgICAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIjogcywKICAgICAgICAgICAgImFwcGxpY2F0aW9uL2pzb24iOiBKU09OLnN0cmluZ2lmeQogICAgICAgIH0sIGQucGFyc2UgPSB7CiAgICAgICAgICAgICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiOiB1LAogICAgICAgICAgICAiYXBwbGljYXRpb24vanNvbiI6IEpTT04ucGFyc2UKICAgICAgICB9LCBwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlclt0LnRvTG93ZXJDYXNlKCldCiAgICAgICAgfSwgcC5wcm90b3R5cGUuc2V0SGVhZGVyUHJvcGVydGllcyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmhlYWRlclsiY29udGVudC10eXBlIl0gfHwgIiI7CiAgICAgICAgICAgIHRoaXMudHlwZSA9IGwoZSk7CiAgICAgICAgICAgIHZhciBuID0gZihlKTsKICAgICAgICAgICAgZm9yICh2YXIgciBpbiBuKSB0aGlzW3JdID0gbltyXQogICAgICAgIH0sIHAucHJvdG90eXBlLnBhcnNlQm9keSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgdmFyIGUgPSBkLnBhcnNlW3RoaXMudHlwZV07CiAgICAgICAgICAgIHJldHVybiBlICYmIHQgJiYgdC5sZW5ndGggPyBlKHQpIDogbnVsbAogICAgICAgIH0sIHAucHJvdG90eXBlLnNldFN0YXR1c1Byb3BlcnRpZXMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHZhciBlID0gdCAvIDEwMCB8IDA7CiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gdCwgdGhpcy5zdGF0dXNUeXBlID0gZSwgdGhpcy5pbmZvID0gMSA9PSBlLCB0aGlzLm9rID0gMiA9PSBlLCB0aGlzLmNsaWVudEVycm9yID0gNCA9PSBlLCB0aGlzLnNlcnZlckVycm9yID0gNSA9PSBlLCB0aGlzLmVycm9yID0gNCA9PSBlIHx8IDUgPT0gZSA/IHRoaXMudG9FcnJvcigpIDogITEsIHRoaXMuYWNjZXB0ZWQgPSAyMDIgPT0gdCwgdGhpcy5ub0NvbnRlbnQgPSAyMDQgPT0gdCB8fCAxMjIzID09IHQsIHRoaXMuYmFkUmVxdWVzdCA9IDQwMCA9PSB0LCB0aGlzLnVuYXV0aG9yaXplZCA9IDQwMSA9PSB0LCB0aGlzLm5vdEFjY2VwdGFibGUgPSA0MDYgPT0gdCwgdGhpcy5ub3RGb3VuZCA9IDQwNCA9PSB0LCB0aGlzLmZvcmJpZGRlbiA9IDQwMyA9PSB0CiAgICAgICAgfSwgcC5wcm90b3R5cGUudG9FcnJvciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgdCA9IHRoaXMucmVxLAogICAgICAgICAgICAgICAgZSA9IHQubWV0aG9kLAogICAgICAgICAgICAgICAgbiA9IHQudXJsLAogICAgICAgICAgICAgICAgciA9ICJjYW5ub3QgIiArIGUgKyAiICIgKyBuICsgIiAoIiArIHRoaXMuc3RhdHVzICsgIikiLAogICAgICAgICAgICAgICAgaSA9IG5ldyBFcnJvcihyKTsKICAgICAgICAgICAgcmV0dXJuIGkuc3RhdHVzID0gdGhpcy5zdGF0dXMsIGkubWV0aG9kID0gZSwgaS51cmwgPSBuLCBpCiAgICAgICAgfSwgZC5SZXNwb25zZSA9IHAsIGcoaC5wcm90b3R5cGUpLCBoLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHJldHVybiB0KHRoaXMpLCB0aGlzCiAgICAgICAgfSwgaC5wcm90b3R5cGUudGltZW91dCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RpbWVvdXQgPSB0LCB0aGlzCiAgICAgICAgfSwgaC5wcm90b3R5cGUuY2xlYXJUaW1lb3V0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aW1lb3V0ID0gMCwgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKSwgdGhpcwogICAgICAgIH0sIGgucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmFib3J0ZWQgPyB2b2lkIDAgOiAodGhpcy5hYm9ydGVkID0gITAsIHRoaXMueGhyLmFib3J0KCksIHRoaXMuY2xlYXJUaW1lb3V0KCksIHRoaXMuZW1pdCgiYWJvcnQiKSwgdGhpcykKICAgICAgICB9LCBoLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgIGlmIChhKHQpKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBuIGluIHQpIHRoaXMuc2V0KG4sIHRbbl0pOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGhpcy5faGVhZGVyW3QudG9Mb3dlckNhc2UoKV0gPSBlLCB0aGlzLmhlYWRlclt0XSA9IGUsIHRoaXMKICAgICAgICB9LCBoLnByb3RvdHlwZS51bnNldCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZSB0aGlzLl9oZWFkZXJbdC50b0xvd2VyQ2FzZSgpXSwgZGVsZXRlIHRoaXMuaGVhZGVyW3RdLCB0aGlzCiAgICAgICAgfSwgaC5wcm90b3R5cGUuZ2V0SGVhZGVyID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5faGVhZGVyW3QudG9Mb3dlckNhc2UoKV0KICAgICAgICB9LCBoLnByb3RvdHlwZS50eXBlID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5zZXQoIkNvbnRlbnQtVHlwZSIsIGQudHlwZXNbdF0gfHwgdCksIHRoaXMKICAgICAgICB9LCBoLnByb3RvdHlwZS5hY2NlcHQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldCgiQWNjZXB0IiwgZC50eXBlc1t0XSB8fCB0KSwgdGhpcwogICAgICAgIH0sIGgucHJvdG90eXBlLmF1dGggPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgIHZhciBuID0gYnRvYSh0ICsgIjoiICsgZSk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldCgiQXV0aG9yaXphdGlvbiIsICJCYXNpYyAiICsgbiksIHRoaXMKICAgICAgICB9LCBoLnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgcmV0dXJuICJzdHJpbmciICE9IHR5cGVvZiB0ICYmICh0ID0gcyh0KSksIHQgJiYgdGhpcy5fcXVlcnkucHVzaCh0KSwgdGhpcwogICAgICAgIH0sIGgucHJvdG90eXBlLmZpZWxkID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fZm9ybURhdGEgfHwgKHRoaXMuX2Zvcm1EYXRhID0gbmV3IEZvcm1EYXRhKSwgdGhpcy5fZm9ybURhdGEuYXBwZW5kKHQsIGUpLCB0aGlzCiAgICAgICAgfSwgaC5wcm90b3R5cGUuYXR0YWNoID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fZm9ybURhdGEgfHwgKHRoaXMuX2Zvcm1EYXRhID0gbmV3IEZvcm1EYXRhKSwgdGhpcy5fZm9ybURhdGEuYXBwZW5kKHQsIGUsIG4pLCB0aGlzCiAgICAgICAgfSwgaC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgdmFyIGUgPSBhKHQpLAogICAgICAgICAgICAgICAgbiA9IHRoaXMuZ2V0SGVhZGVyKCJDb250ZW50LVR5cGUiKTsKICAgICAgICAgICAgaWYgKGUgJiYgYSh0aGlzLl9kYXRhKSkKICAgICAgICAgICAgICAgIGZvciAodmFyIHIgaW4gdCkgdGhpcy5fZGF0YVtyXSA9IHRbcl07CiAgICAgICAgICAgIGVsc2UgInN0cmluZyIgPT0gdHlwZW9mIHQgPyAobiB8fCB0aGlzLnR5cGUoImZvcm0iKSwgbiA9IHRoaXMuZ2V0SGVhZGVyKCJDb250ZW50LVR5cGUiKSwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIgPT0gbiA/IHRoaXMuX2RhdGEgPSB0aGlzLl9kYXRhID8gdGhpcy5fZGF0YSArICImIiArIHQgOiB0IDogdGhpcy5fZGF0YSA9ICh0aGlzLl9kYXRhIHx8ICIiKSArIHQpIDogdGhpcy5fZGF0YSA9IHQ7CiAgICAgICAgICAgIHJldHVybiBlID8gKG4gfHwgdGhpcy50eXBlKCJqc29uIiksIHRoaXMpIDogdGhpcwogICAgICAgIH0sIGgucHJvdG90eXBlLmNhbGxiYWNrID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICB2YXIgbiA9IHRoaXMuX2NhbGxiYWNrOwogICAgICAgICAgICByZXR1cm4gdGhpcy5jbGVhclRpbWVvdXQoKSwgMiA9PSBuLmxlbmd0aCA/IG4odCwgZSkgOiB0ID8gdGhpcy5lbWl0KCJlcnJvciIsIHQpIDogdm9pZCBuKGUpCiAgICAgICAgfSwgaC5wcm90b3R5cGUuY3Jvc3NEb21haW5FcnJvciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgdCA9IG5ldyBFcnJvcigiT3JpZ2luIGlzIG5vdCBhbGxvd2VkIGJ5IEFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiIpOwogICAgICAgICAgICB0LmNyb3NzRG9tYWluID0gITAsIHRoaXMuY2FsbGJhY2sodCkKICAgICAgICB9LCBoLnByb3RvdHlwZS50aW1lb3V0RXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzLl90aW1lb3V0LAogICAgICAgICAgICAgICAgZSA9IG5ldyBFcnJvcigidGltZW91dCBvZiAiICsgdCArICJtcyBleGNlZWRlZCIpOwogICAgICAgICAgICBlLnRpbWVvdXQgPSB0LCB0aGlzLmNhbGxiYWNrKGUpCiAgICAgICAgfSwgaC5wcm90b3R5cGUud2l0aENyZWRlbnRpYWxzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl93aXRoQ3JlZGVudGlhbHMgPSAhMCwgdGhpcwogICAgICAgIH0sIGgucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgdmFyIGUgPSB0aGlzLAogICAgICAgICAgICAgICAgbiA9IHRoaXMueGhyID0gbygpLAogICAgICAgICAgICAgICAgYSA9IHRoaXMuX3F1ZXJ5LmpvaW4oIiYiKSwKICAgICAgICAgICAgICAgIHMgPSB0aGlzLl90aW1lb3V0LAogICAgICAgICAgICAgICAgdSA9IHRoaXMuX2Zvcm1EYXRhIHx8IHRoaXMuX2RhdGE7CiAgICAgICAgICAgIGlmICh0aGlzLl9jYWxsYmFjayA9IHQgfHwgciwgbi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gNCA9PSBuLnJlYWR5U3RhdGUgPyAwID09IG4uc3RhdHVzID8gZS5hYm9ydGVkID8gZS50aW1lb3V0RXJyb3IoKSA6IGUuY3Jvc3NEb21haW5FcnJvcigpIDogdm9pZCBlLmVtaXQoImVuZCIpIDogdm9pZCAwCiAgICAgICAgICAgICAgICB9LCBuLnVwbG9hZCAmJiAobi51cGxvYWQub25wcm9ncmVzcyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB0LnBlcmNlbnQgPSB0LmxvYWRlZCAvIHQudG90YWwgKiAxMDAsIGUuZW1pdCgicHJvZ3Jlc3MiLCB0KQogICAgICAgICAgICAgICAgfSksIHMgJiYgIXRoaXMuX3RpbWVyICYmICh0aGlzLl90aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgZS5hYm9ydCgpCiAgICAgICAgICAgICAgICB9LCBzKSksIGEgJiYgKGEgPSBkLnNlcmlhbGl6ZU9iamVjdChhKSwgdGhpcy51cmwgKz0gfnRoaXMudXJsLmluZGV4T2YoIj8iKSA/ICImIiArIGEgOiAiPyIgKyBhKSwgbi5vcGVuKHRoaXMubWV0aG9kLCB0aGlzLnVybCwgITApLCB0aGlzLl93aXRoQ3JlZGVudGlhbHMgJiYgKG4ud2l0aENyZWRlbnRpYWxzID0gITApLCAiR0VUIiAhPSB0aGlzLm1ldGhvZCAmJiAiSEVBRCIgIT0gdGhpcy5tZXRob2QgJiYgInN0cmluZyIgIT0gdHlwZW9mIHUgJiYgIWkodSkpIHsKICAgICAgICAgICAgICAgIHZhciBjID0gZC5zZXJpYWxpemVbdGhpcy5nZXRIZWFkZXIoIkNvbnRlbnQtVHlwZSIpXTsKICAgICAgICAgICAgICAgIGMgJiYgKHUgPSBjKHUpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGwgaW4gdGhpcy5oZWFkZXIpIG51bGwgIT0gdGhpcy5oZWFkZXJbbF0gJiYgbi5zZXRSZXF1ZXN0SGVhZGVyKGwsIHRoaXMuaGVhZGVyW2xdKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW1pdCgicmVxdWVzdCIsIHRoaXMpLCBuLnNlbmQodSksIHRoaXMKICAgICAgICB9LCBkLlJlcXVlc3QgPSBoLCBkLmdldCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgdmFyIHIgPSBkKCJHRVQiLCB0KTsKICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgKG4gPSBlLCBlID0gbnVsbCksIGUgJiYgci5xdWVyeShlKSwgbiAmJiByLmVuZChuKSwgcgogICAgICAgIH0sIGQuaGVhZCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgdmFyIHIgPSBkKCJIRUFEIiwgdCk7CiAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlICYmIChuID0gZSwgZSA9IG51bGwpLCBlICYmIHIuc2VuZChlKSwgbiAmJiByLmVuZChuKSwgcgogICAgICAgIH0sIGQuZGVsID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICB2YXIgbiA9IGQoIkRFTEVURSIsIHQpOwogICAgICAgICAgICByZXR1cm4gZSAmJiBuLmVuZChlKSwgbgogICAgICAgIH0sIGQucGF0Y2ggPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgIHZhciByID0gZCgiUEFUQ0giLCB0KTsKICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgKG4gPSBlLCBlID0gbnVsbCksIGUgJiYgci5zZW5kKGUpLCBuICYmIHIuZW5kKG4pLCByCiAgICAgICAgfSwgZC5wb3N0ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICB2YXIgciA9IGQoIlBPU1QiLCB0KTsKICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgKG4gPSBlLCBlID0gbnVsbCksIGUgJiYgci5zZW5kKGUpLCBuICYmIHIuZW5kKG4pLCByCiAgICAgICAgfSwgZC5wdXQgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgIHZhciByID0gZCgiUFVUIiwgdCk7CiAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlICYmIChuID0gZSwgZSA9IG51bGwpLCBlICYmIHIuc2VuZChlKSwgbiAmJiByLmVuZChuKSwgcgogICAgICAgIH0sIGUuZXhwb3J0cyA9IGQKICAgIH0sIHsKICAgICAgICBlbWl0dGVyOiAxOSwKICAgICAgICByZWR1Y2U6IDIwCiAgICB9XSwKICAgIDE5OiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgIGZ1bmN0aW9uIHIodCkgewogICAgICAgICAgICByZXR1cm4gdCA/IGkodCkgOiB2b2lkIDAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGkodCkgewogICAgICAgICAgICBmb3IgKHZhciBlIGluIHIucHJvdG90eXBlKSB0W2VdID0gci5wcm90b3R5cGVbZV07CiAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgfQogICAgICAgIGUuZXhwb3J0cyA9IHIsIHIucHJvdG90eXBlLm9uID0gci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fSwgKHRoaXMuX2NhbGxiYWNrc1t0XSA9IHRoaXMuX2NhbGxiYWNrc1t0XSB8fCBbXSkucHVzaChlKSwgdGhpcwogICAgICAgIH0sIHIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIG4oKSB7CiAgICAgICAgICAgICAgICByLm9mZih0LCBuKSwgZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHIgPSB0aGlzOwogICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9LCBuLmZuID0gZSwgdGhpcy5vbih0LCBuKSwgdGhpcwogICAgICAgIH0sIHIucHJvdG90eXBlLm9mZiA9IHIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgaWYgKHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fSwgMCA9PSBhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGhpcy5fY2FsbGJhY2tzID0ge30sIHRoaXM7CiAgICAgICAgICAgIHZhciBuID0gdGhpcy5fY2FsbGJhY2tzW3RdOwogICAgICAgICAgICBpZiAoIW4pIHJldHVybiB0aGlzOwogICAgICAgICAgICBpZiAoMSA9PSBhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1t0XSwgdGhpczsKICAgICAgICAgICAgZm9yICh2YXIgciwgaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgaWYgKHIgPSBuW2ldLCByID09PSBlIHx8IHIuZm4gPT09IGUpIHsKICAgICAgICAgICAgICAgICAgICBuLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgIH0sIHIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTsKICAgICAgICAgICAgdmFyIGUgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksCiAgICAgICAgICAgICAgICBuID0gdGhpcy5fY2FsbGJhY2tzW3RdOwogICAgICAgICAgICBpZiAobikgewogICAgICAgICAgICAgICAgbiA9IG4uc2xpY2UoMCk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gMCwgaSA9IG4ubGVuZ3RoOyBpID4gcjsgKytyKSBuW3JdLmFwcGx5KHRoaXMsIGUpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICB9LCByLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge30sIHRoaXMuX2NhbGxiYWNrc1t0XSB8fCBbXQogICAgICAgIH0sIHIucHJvdG90eXBlLmhhc0xpc3RlbmVycyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5saXN0ZW5lcnModCkubGVuZ3RoCiAgICAgICAgfQogICAgfSwge31dLAogICAgMjA6IFtmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgZS5leHBvcnRzID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICBmb3IgKHZhciByID0gMCwgaSA9IHQubGVuZ3RoLCBvID0gMyA9PSBhcmd1bWVudHMubGVuZ3RoID8gbiA6IHRbcisrXTsgaSA+IHI7KSBvID0gZS5jYWxsKG51bGwsIG8sIHRbcl0sICsrciwgdCk7CiAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgfQogICAgfSwge31dCn0sIHt9LCBbMV0pOwo=]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 10:46:09 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/js/s_code.js]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/js/s_code.js]]></path>
    <extension>js</extension>
    <request base64="true"><![CDATA[R0VUIC9qcy9zX2NvZGUuanMgSFRUUC8xLjENCkhvc3Q6IDEwLjEwLjEwLjE4DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBydjo2OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzY4LjANCkFjY2VwdDogKi8qDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC41DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkROVDogMQ0KQ29ubmVjdGlvbjogY2xvc2UNClJlZmVyZXI6IGh0dHA6Ly8xMC4xMC4xMC4xOC8NCkNvb2tpZTogc19jYz10cnVlOyBzX2ZpZD0xRDg3QzRDNUYxRkRENTE5LTIxODlGN0FEMDhCODVDMkU7IHNfbnI9MTU5MDYzNzEzOTAwMDsgc19zcT1uYmN1Z2xvYmFsJTJDbmJjdXVzYW5ldHdvcmtkJTNEJTI1MjZwaWQlMjUzRE1yLiUyNTI1MjBSb2JvdCUyNTI1MjAlMjUyNTNBJTI1MjUyMFdobyUyNTI1MjBJcyUyNTI1MjBNci4lMjUyNTIwUm9ib3QlMjUyNTIwJTI1MjUzQSUyNTI1MjBJbmZvcm0lMjUyNTIwR2FsbGVyeSUyNTI1MjAlMjUyNTNBJTI1MjUyMFBob3RvJTI1MjUyMDElMjUyNnBpZHQlMjUzRDElMjUyNm9pZCUyNTNEJTI1MjUwQSUyNTI1MDklMjUyNTBBJTI1MjUwOSUyNTI1MDklMjUyNTBBJTI1MjUwOSUyNTI1MDklMjUyNTBBJTI1MjUwOSUyNTI1MEElMjUyNm9pZHQlMjUzRDMlMjUyNm90JTI1M0RTVUJNSVQ7IHdvcmRwcmVzc190ZXN0X2Nvb2tpZT1XUCtDb29raWUrY2hlY2sNCkNhY2hlLUNvbnRyb2w6IG1heC1hZ2U9MA0KDQo=]]></request>
    <status>200</status>
    <responselength>55763</responselength>
    <mimetype>script</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA1OjE2OjA4IEdNVA0KU2VydmVyOiBBcGFjaGUNClgtRnJhbWUtT3B0aW9uczogU0FNRU9SSUdJTg0KRVRhZzogImQ4M2QtNTFlNGM2NDQyY2IwMC1nemlwIg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KQ2FjaGUtQ29udHJvbDogbWF4LWFnZT0zMDANCkV4cGlyZXM6IFRodSwgMjggTWF5IDIwMjAgMDU6MjE6MDcgR01UDQpMYXN0LU1vZGlmaWVkOiBUaHUsIDI4IE1heSAyMDIwIDA1OjE2OjA4IEdNVA0KWC1Db250ZW50LVR5cGUtT3B0aW9uczogbm9zbmlmZg0KQ29udGVudC1MZW5ndGg6IDU1MzU3DQpDb25uZWN0aW9uOiBjbG9zZQ0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQoNCi8qIGRldmljZSBkZXRlY3Rpb24gY29kZSAqLwpmdW5jdGlvbiB1c2FfZGV0ZWN0Q3VycmVudERldmljZSAoKSB7CiAgICB2YXIgYWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7CiAgICB2YXIgc2NyV2lkdGggPSBzY3JlZW4ud2lkdGg7CiAgICB2YXIgc2NySGVpZ2h0ID0gc2NyZWVuLmhlaWdodDsKICAgIC8vIFRoZSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgZGltZW5zaW9ucyBzZWVtIHRvIGJlIGlkZW50aWNhbCB0bwogICAgLy8gdGhlIHNjcmVlbiBkaW1lbnNpb25zIG9uIGFsbCB0aGUgbW9iaWxlIGJyb3dzZXJzIEkndmUgdGVzdGVkIHNvIGZhcgogICAgdmFyIGVsZW1XaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDsKICAgIHZhciBlbGVtSGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKICAgIC8vIFdlIG5lZWQgdG8gZWxpbWluYXRlIFN5bWJpYW4sIFNlcmllcyA2MCwgV2luZG93cyBNb2JpbGUgYW5kIEJsYWNrYmVycnkKICAgIC8vIGJyb3dzZXJzIGZvciB0aGlzIHF1aWNrIGFuZCBkaXJ0eSBjaGVjay4gVGhpcyBjYW4gYmUgZG9uZSB3aXRoIHRoZSB1c2VyIGFnZW50LgogICAgdmFyIG90aGVyQnJvd3NlciA9IChhZ2VudC5pbmRleE9mKCJzZXJpZXM2MCIpICE9IC0xKSB8fCAoYWdlbnQuaW5kZXhPZigic3ltYmlhbiIpICE9IC0xKSB8fCAoYWdlbnQuaW5kZXhPZigid2luZG93cyBjZSIpICE9IC0xKSB8fCAoYWdlbnQuaW5kZXhPZigiYmxhY2tiZXJyeSIpICE9IC0xKTsKICAgIC8vIElmIHRoZSBzY3JlZW4gb3JpZW50YXRpb24gaXMgZGVmaW5lZCB3ZSBhcmUgaW4gYSBtb2Rlcm4gbW9iaWxlIE9TCiAgICB2YXIgbW9iaWxlT1MgPSB0eXBlb2Ygb3JpZW50YXRpb24gIT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogZmFsc2U7CiAgICAvLyBJZiB0b3VjaCBldmVudHMgYXJlIGRlZmluZWQgd2UgYXJlIGluIGEgbW9kZXJuIHRvdWNoIHNjcmVlbiBPUwogICAgdmFyIHRvdWNoT1MgPSAoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSA/IHRydWUgOiBmYWxzZTsgLy92YXIgdG91Y2hPUyA9IE1vZGVybml6ci50b3VjaDsKCiAgICAvLyBpUGhvbmUgYW5kIGlQYWQgY2FuIGJlIHJlbGlhYmx5IGlkZW50aWZpZWQgd2l0aCB0aGUgbmF2aWdhdG9yLnBsYXRmb3JtCiAgICAvLyBzdHJpbmcsIHdoaWNoIGlzIGN1cnJlbnRseSBvbmx5IGF2YWlsYWJsZSBvbiB0aGVzZSBkZXZpY2VzLgogICAgdmFyIGlPUyA9ICgobmF2aWdhdG9yLnBsYXRmb3JtKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImlwaG9uZSIpICE9IC0xKSB8fAogICAgICAgICAgICAgICAgKChuYXZpZ2F0b3IucGxhdGZvcm0pLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiaXBhZCIpICE9IC0xKSB8fAogICAgICAgICAgICAoKG5hdmlnYXRvci5wbGF0Zm9ybSkudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJpcG9kIikgIT0gLTEpIHx8CiAgICAgICAgICAgICAgICAoKGFnZW50KS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImlwaG9uZSIpICE9IC0xKSB8fAogICAgICAgICAgICAoKGFnZW50KS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImlwb2QiKSAhPSAtMSkgfHwKICAgICAgICAgICAgICAgICgoYWdlbnQpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiaXBhZCIpICE9IC0xKSA/IHRydWUgOiBmYWxzZTsKCiAgICAvLyBJZiB0aGUgdXNlciBhZ2VudCBzdHJpbmcgY29udGFpbnMgImFuZHJvaWQiIHRoZW4gaXQncyBBbmRyb2lkLiBJZiBpdAogICAgLy8gZG9lc24ndCBidXQgaXQncyBub3QgYW5vdGhlciBicm93c2VyLCBub3QgYW4gaU9TIGRldmljZSBhbmQgd2UncmUgaW4KICAgIC8vIGEgbW9iaWxlIGFuZCB0b3VjaCBPUyB0aGVuIHdlIGNhbiBiZSA5OSUgY2VydGFpbiB0aGF0IGl0J3MgQW5kcm9pZC4KICAgIHZhciBhbmRyb2lkID0gKGFnZW50LmluZGV4T2YoImFuZHJvaWQiKSAhPSAtMSkgfHwgKCFpT1MgJiYgIW90aGVyQnJvd3NlciAmJiB0b3VjaE9TICYmIG1vYmlsZU9TKSA/IHRydWUgOiBmYWxzZTsKICAgIHZhciBzbWFydHBob25lID0gZmFsc2U7CiAgICB2YXIgbW9iaWxlRGV2aWNlID0gKGlPUyB8fCBhbmRyb2lkIHx8IG1vYmlsZU9TIHx8IHRvdWNoT1MgfHwgb3RoZXJCcm93c2VyKSA/IHRydWUgOiBmYWxzZTsKCiAgICB2YXIgc21hcnRwaG9uZVdpZHRoVGhyZXNob2xkID0gNzY4OwogICAgdmFyIGJXID0gd2luZG93LmlubmVyV2lkdGg7CiAgICB2YXIgYkggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICBpZiAod2luZG93LmlubmVyV2lkdGggJiYgd2luZG93LmlubmVySGVpZ2h0KQogICAgewogICAgICAgIGlmIChiVyA8IHNtYXJ0cGhvbmVXaWR0aFRocmVzaG9sZCAmJiBtb2JpbGVEZXZpY2UpCiAgICAgICAgewogICAgICAgICAgICBzbWFydHBob25lID0gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgICBvdGhlckJyb3dzZXIgOiBvdGhlckJyb3dzZXIsCiAgICAgICAgbW9iaWxlT1MgOiBtb2JpbGVPUywKICAgICAgICB0b3VjaE9TIDogdG91Y2hPUywKICAgICAgICBpT1MgOiBpT1MsCiAgICAgICAgYW5kcm9pZCA6IGFuZHJvaWQsCiAgICAgICAgbW9iaWxlRGV2aWNlIDogbW9iaWxlRGV2aWNlLAogICAgICAgIHNtYXJ0cGhvbmUgOiBzbWFydHBob25lCiAgICB9Cn0KCnZhciB1c2FfZGV2aWNlSW5mbyA9IHVzYV9kZXRlY3RDdXJyZW50RGV2aWNlKCk7Cgp2YXIgc19kb21haW4gPSB3aW5kb3cuZG9jdW1lbnQubG9jYXRpb24uaG9zdDsKaWYoKHNfZG9tYWluLmluZGV4T2YoImRldiIpIT0tMSkgfHwgKHNfZG9tYWluLmluZGV4T2YoImJldGEiKSE9LTEpIHx8IChzX2RvbWFpbi5pbmRleE9mKCJ0ZXN0IikhPS0xKSB8fCAoc19kb21haW4uaW5kZXhPZigic3RhZ2UiKSE9LTEpIHx8CihzX2RvbWFpbi5pbmRleE9mKCJsb2NhbCIpIT0tMSkgfHwKKHNfZG9tYWluLmluZGV4T2YoImVkaXQiKSE9LTEpIHx8CihzX2RvbWFpbi5pbmRleE9mKCJxYSIpIT0tMSkgfHwKKHNfZG9tYWluLmluZGV4T2YoInNlY29uZHNjcmVlbnRyaXZpYSIpIT0tMSkKKXsKCXNfYWNjb3VudCA9ICJuYmN1dXNhbmV0d29ya2RkZXYiOwp9CmVsc2V7CglzX2FjY291bnQgPSAibmJjdWdsb2JhbCxuYmN1dXNhbmV0d29ya2QiOyAKfSAKdmFyIHM9c19naShzX2FjY291bnQsMSkgICAgICAgICAgICAKLyoqKioqKioqKioqKioqKioqKioqKioqKioqIENPTkZJRyBTRUNUSU9OICoqKioqKioqKioqKioqKioqKioqKioqKioqLwovKiBZb3UgbWF5IGFkZCBvciBhbHRlciBhbnkgY29kZSBjb25maWcgaGVyZS4gKi8Kcy5jaGFyU2V0PSJJU08tODg1OS0xIgovKiBDb252ZXJzaW9uIENvbmZpZyAqLwpzLmN1cnJlbmN5Q29kZT0iVVNEIgovKiBMaW5rIFRyYWNraW5nIENvbmZpZyAqLwpzLnRyYWNrRG93bmxvYWRMaW5rcz10cnVlCnMudHJhY2tFeHRlcm5hbExpbmtzPXRydWUKcy50cmFja0lubGluZVN0YXRzPXRydWUKcy5saW5rSW50ZXJuYWxGaWx0ZXJzPSJqYXZhc2NyaXB0Oix1c2FuZXR3b3JrLmNvbSxjaGFyYWN0ZXJicmFuZHdvcmtzLmNvbSxjaGFyYWN0ZXJzdW5pdGUuY29tLGNoYXJhY3RlcmJsb2cuY29tLHN1aXRzb25jYW1wdXMuY29tLHdlc3RtaW5zdGVya2VubmVsY2x1Yi5vcmcsaHRrMi50aGVhdHJpY3MuY29tLHNhbXN1bmcuY29tLHR3aXR0ZXIuY29tL2ludGVudCx3aG9pc21ycm9ib3QiOwpzLmxpbmtEb3dubG9hZEZpbGVUeXBlcz0iZXhlLHppcCx3YXYsbXAzLG1vdixtcGcsYXZpLHdtdixkb2MscGRmLHhscyxnaWYsanBnIgpzLmxpbmtMZWF2ZVF1ZXJ5U3RyaW5nPXRydWUKcy5saW5rVHJhY2tWYXJzPSJOb25lIgpzLmxpbmtUcmFja0V2ZW50cz0iTm9uZSIKcy5kZWZhdWx0UGFnZT0iaW5kZXguaHRtbCIKCi8qIFBsdWdpbiBDb25maWcgKi8Kcy51c2VQbHVnaW5zPXRydWUKZnVuY3Rpb24gc19kb1BsdWdpbnMocykgewoKCS8qIFNldCBhcHAgVmlzSUQgdG8gV2ViIHZpZXcgb24gU3luYyBhcHBzICovCgkgaWYgKHMuZ2V0UXVlcnlQYXJhbSgnYXBwdmknKSkgewoJCXMubmV3X3ZpX2RhdGU9bmV3IERhdGU7CgkJcy5uZXdfdmlfZGF0ZS5zZXRGdWxsWWVhcihzLm5ld192aV9kYXRlLmdldEZ1bGxZZWFyKCkgKyA1KTsKCQlzLmNfdygnYXBwX3ZpJyxzLmdldFF1ZXJ5UGFyYW0oJ2FwcHZpJykscy5uZXdfdmlfZGF0ZSk7CgkJcy52aXNpdG9ySUQ9cy5jX3IoJ2FwcF92aScpOwoJfQoJZWxzZSBpZiAocy5jX3IoJ2FwcF92aScpKSB7CgkJcy52aXNpdG9ySUQ9cy5jX3IoJ2FwcF92aScpOwoJfQoKCQoJaWYocy5vdW4ubWF0Y2goJ25iY3VjYWJsZWQnKXx8cy5vdW4ubWF0Y2goJ25iY3V1c2FuZXRidScpKXtzLnNhKCduYmN1Z2xvYmFsLG5iY3V1c2FuZXR3b3JrZCcpO30JCgkKCS8vZGlzYWJsZSBhdXRvIGRvd25sb2FkIGxpbmsgdHJhY2tpbmcgb24gY2hhcmFjdGVyYnJhbmR3b3Jrcy5jb20sCglpZihkb2N1bWVudC5VUkwubWF0Y2goJ2NoYXJhY3RlcmJyYW5kd29ya3MuY29tJykpe3MudHJhY2tEb3dubG9hZExpbmtzPWZhbHNlfQoKCS8vYnVuY2hiYWxsIGdlbmVzaXMgY29kZQoJaWYgKHR5cGVvZihidW5jaGJhbGxfbml0cm9faWQpICE9ICd1bmRlZmluZWQnKSB7cy52aXNpdG9ySUQgPSBidW5jaGJhbGxfbml0cm9faWQ7fQoJCgkvKiBleHRlcm5hbCBjYW1wYWlnbiB0cmFja2luZyB3aXRoIGdldFZhbE9uY2UgZm9yIGRlZHVwbGljYXRpb24gcGVyIHNlc3Npb24gKi8KCXMuY2FtcGFpZ249cy5nZXRRdWVyeVBhcmFtKCdjaWQnKTsgIAoJcy5jYW1wYWlnbj1zLmdldFZhbE9uY2Uocy5jYW1wYWlnbiwnc19jYW1wYWlnbl9ndm8nKTsKCgoJLyogRHVwbGljYXRlIGV4dGVybmFsIGNhbXBhaWduIHRyYWNraW5nIHRvIGVWYXIzMCAoMzAtZGF5IGV4cCkgd2l0aCBnZXRWYWxPbmNlIGZvciBkZWR1cGxpY2F0aW9uIHBlciBzZXNzaW9uICovCglzLmVWYXIzMD1zLmdldFF1ZXJ5UGFyYW0oJ2NpZCxjYW1wYWlnbixfX3NvdXJjZScsJzonKTsgIAoJcy5lVmFyMzA9cy5nZXRWYWxPbmNlKHMuZVZhcjMwLCdzX2VWYXIzMF9ndm8nKTsKCgoJLyogaW50ZXJuYWwgY2FtcGFpZ24vcHJvbW8gdHJhY2tpbmcgd2l0aCBnZXRWYWxPbmNlIGZvciBkZWR1cGxpY2F0aW9uIHBlciBzZXNzaW9uICovCglzLmVWYXI3PXMuZ2V0UXVlcnlQYXJhbSgnaWNpZCcpOwoJcy5lVmFyNz1zLmdldFZhbE9uY2Uocy5lVmFyNywnc19lVmFyN19ndm8nKTsKCgoJcy5zZXJ2ZXI9d2luZG93LmxvY2F0aW9uLmhvc3QudG9Mb3dlckNhc2UoKTsKCWlmKCFzLnBhZ2VUeXBlJiYhcy5wYWdlTmFtZSkge3MucGFnZU5hbWU9cy5nZXRQYWdlTmFtZSgpO30KCQoJCgkvL1Byb3BzCglpZiAodHlwZW9mKHVzYV9jbHViT21uaXR1cmVQcm9wMSkgIT0gJ3VuZGVmaW5lZCcpIHtzLnByb3AxID0gdXNhX2NsdWJPbW5pdHVyZVByb3AxfSAKCXMucHJvcDE9cy5nZXRBbmRQZXJzaXN0VmFsdWUocy5wcm9wMSwnc19wcnAxJyk7CglzLnByb3A2ICA9IHVuZXNjYXBlKHVuZXNjYXBlKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSk7CglzLnByb3AxMSA9IHMucHJvcDEwICsgIiB8ICIgKyBzLnBhZ2VOYW1lOwoJcy5wcm9wMTIgPSBzLnByb3A5ICsgIiB8ICIgKyBzLnByb3AxMDsKCXMucHJvcDEzID0gcy5nZXROZXdSZXBlYXQoKTsKCQoJLy9OZXcgb3Igb2xkIHNpdGUKCS8vIGlmKCFzLnByb3AzMikge3MucHJvcDMyPSJPbGQgU2l0ZSJ9OwoJaWYgKHMuZVZhcjY4KSB7cy5wcm9wMzI9Ik5ldyBTaXRlIn07IC8vZXZhcjY4IGlzIG9ubHkgdXNlZCBvbiBwYWdlcyB3aXRoIHJlc3BvbnNpdmUgZGVzaWduCglpZihzLnByb3A2Lm1hdGNoKCdpZnJhbWUnKSl7cy5wcm9wMzI9Ik5ldyBTaXRlIn07Ly8gaWZyYW1lZCBjb250ZW50IHRoYXQgc2hvd3Mgd2l0aGluIHJlc3BvbnNpdmUgZGVzaWduCgkKCS8vZVZhcnMKCXMuZVZhcjE2ID0gcy5nZXRRdWVyeVBhcmFtKCJoY29yZWYiKTsKCXMuZVZhcjIwID0gcy5nZXRRdWVyeVBhcmFtKCJkc3QiKTsgCglzLmVWYXIyMyA9IHMuZ2V0UXVlcnlQYXJhbSgicGFyIik7CglzLmVWYXIyNCA9IHMuZ2V0UXVlcnlQYXJhbSgibyIpOyAKCiAgICAJaWYocy5wcm9wMykgIHtzLmVWYXIzMj1zLnByb3AzO30KCWlmKHMucHJvcDQpICB7cy5lVmFyND0iRD1jNCI7fQoJaWYocy5wcm9wMTApIHtzLmVWYXIxMD0iRD1jMTAiO30KCWlmKHMucHJvcDYpICB7cy5lVmFyNDM9cy5wcm9wNjt9CglpZihzLnByb3A4KSAge3MuZVZhcjg9cy5wcm9wODt9CglpZihzLnByb3A5KSAge3MuZVZhcjQ1PXMucHJvcDk7fQoJaWYocy5wYWdlTmFtZSkge3MuZVZhcjk9cy5wYWdlTmFtZTt9CglpZihzLmVWYXI1NSkgIHtzLnByb3A1NT0iRD12NTUiO30KCWlmKHMuZVZhcjU2KSAge3MucHJvcDU2PSJEPXY1NiI7fQoJaWYocy5lVmFyNTcpICB7cy5wcm9wNTc9IkQ9djU3Ijt9CgkKCQoJLy9FdmVudHMKCXMuZXZlbnRzPXMuYXBsKHMuZXZlbnRzLCdldmVudDYnLCcsJywxKTsKCQoJCgkvL0hpZXJhcmNoaWVzCglpZiAoKHR5cGVvZihzLnByb3AyKSA9PSAndW5kZWZpbmVkJyl8fChzLnByb3AyID09ICcnKSkge3Nwcm9wMiA9IAknbWlzY2VsbGFuZW91cyd9IGVsc2UgeyBzcHJvcDI9cy5wcm9wMiB9CglpZiAoKHR5cGVvZihzLnByb3AzKSA9PSAndW5kZWZpbmVkJyl8fChzLnByb3AzID09ICcnKSkge3Nwcm9wMyA9IAknbWlzY2VsbGFuZW91cyd9IGVsc2UgeyBzcHJvcDM9cy5wcm9wMyB9CglpZiAoKHR5cGVvZihzLnByb3A0KSA9PSAndW5kZWZpbmVkJyl8fChzLnByb3A0ID09ICcnKSkge3Nwcm9wNCA9IAknbWlzY2VsbGFuZW91cyd9IGVsc2UgeyBzcHJvcDQ9cy5wcm9wNCB9CglpZiAoKHR5cGVvZihzLnByb3AxMCkgPT0gJ3VuZGVmaW5lZCcpfHwocy5wcm9wMTAgPT0gJycpKSB7c3Byb3AxMCA9ICdtaXNjZWxsYW5lb3VzJ30gZWxzZSB7IHNwcm9wMTA9cy5wcm9wMTAgfQoJCglzLmhpZXIxID0gcy5wcm9wOCArICd8JyArIHMucHJvcDkgKyAgJ3wnICsgcy5wcm9wMTA7CglzLmhpZXIyPXNwcm9wMisnfCcrc3Byb3AxMCsnfCcrc3Byb3AzKyd8JytzcHJvcDQ7CglzLmhpZXIzPXNldF9oMygpOwoKCXMuZXhpdD1zLmV4aXRMaW5rSGFuZGxlcigpOwoJCS8vaWYocy5leGl0KXsKCQkvL3MuZVZhcjI0ID0gcy5nZXRRdWVyeVBhcmFtKCdvJywnOicscy5leGl0KTsKCQkvL3MuY2FtcGFpZ249cy5nZXRRdWVyeVBhcmFtKCdjaWQsX19zb3VyY2UnLCc6JyxzLmV4aXQpOwoJCS8vcy5saW5rVHJhY2tWYXJzPSdlVmFyMjQsY2FtcGFpZ24nO30KCgkJaWYgKChzLmV4aXQuaW5kZXhPZigiZG91YmxlIik+LTEpICYmIGRvY3VtZW50LlVSTC5tYXRjaCgnY2xhc3NhY3Rpb24nKSkKCXsKCQljb25zb2xlLmxvZygnZG91YmxlIGV4aXQgb24gY2xhc3NhY3Rpb24nKTsKCQlzLnRyYWNrRXh0ZXJuYWxMaW5rcz1mYWxzZTsgCgl9CgkJCglpZiAocy5leGl0LmluZGV4T2YoImV2ci5zdCIpPi0xKSB7CQoJCXMubGlua1RyYWNrVmFycz0icHJvcDMxIjsKCQlzLnByb3AzMT0iRXZlcmVzdCBFeGl0IExpbmsiOwoJCXMubGlua05hbWU9IkV2ZXJlc3QgRXhpdCBMaW5rIjsgICAKCX0KCglpZiAocy5leGl0LmluZGV4T2YoImZhY2Vib29rLmNvbS9UaGVNb21lbnRVU0EiKT4tMSl7CgkJcy5saW5rVHJhY2tWYXJzPSJldmVudHMsZVZhcjc0IjsKCQlzLmxpbmtUcmFja0V2ZW50cz1zLmV2ZW50cz0iZXZlbnQ0MSI7CgkJcy5lVmFyNzQ9IkZhY2Vib29rIjsKCQlzLmxpbmtOYW1lPSJTb2NpYWwgU2hhcmUiOwoJfQoKCWlmIChzLmV4aXQuaW5kZXhPZigidHdpdHRlci5jb20vVGhlTW9tZW50X1VTQSIpPi0xKXsKCQlzLmxpbmtUcmFja1ZhcnM9ImV2ZW50cyxlVmFyNzQiOwoJCXMubGlua1RyYWNrRXZlbnRzPXMuZXZlbnRzPSJldmVudDQxIjsKCQlzLmVWYXI3ND0iVHdpdHRlciI7CgkJcy5saW5rTmFtZT0iU29jaWFsIFNoYXJlIjsKCX0KCglpZiAocy5leGl0LmluZGV4T2YoIjI3NjQ2Iik+LTEpIHsKCQlzLmxpbmtUcmFja1ZhcnM9InByb3AzMSI7CgkJcy5wcm9wMzE9Ik1vZGVybiBGYW1pbHkgOiBGYW1DYW0gOiBUYXJnZXQgRXhpdCBMaW5rIjsKCQlzLmxpbmtOYW1lPSJNb2Rlcm4gRmFtaWx5IDogRmFtQ2FtIDogVGFyZ2V0IEV4aXQgTGluayI7Cgl9CgoJaWYocy5leGl0LmluZGV4T2YoInNoYXJlP2NoYW5uZWw9ZmFjZWJvb2stc2hhcmUiKT4tMSkgewoJCXMubGlua1RyYWNrVmFycz0nZXZlbnRzLGVWYXI3NCc7CgkJcy5saW5rVHJhY2tFdmVudHM9cy5ldmVudHM9J2V2ZW50NDEnOwoJCXMuZVZhcjc0PSdGYWNlYm9vayc7CgkJcy5tYW5hZ2VWYXJzKCdjbGVhclZhcnMnLHMubGlua1RyYWNrVmFycywxKTsKCX0KCglpZihzLmV4aXQuaW5kZXhPZigic2hhcmU/Y2hhbm5lbD10d2l0dGVyIik+LTEpIHsKCQlzLmxpbmtUcmFja1ZhcnM9J2V2ZW50cyxlVmFyNzQnOwoJCXMubGlua1RyYWNrRXZlbnRzPXMuZXZlbnRzPSdldmVudDQxJzsKCQlzLmVWYXI3ND0nVHdpdHRlcic7CgkJcy5tYW5hZ2VWYXJzKCdjbGVhclZhcnMnLHMubGlua1RyYWNrVmFycywxKTsKCX0KCgkvLyBMZXh1cyBleGl0IGxpbmsgaW4gU3VpdHMgUmVjcnVpdHM6IE9mZiB0aGUgQ2xvY2sKCWlmKHMuZXhpdC5pbmRleE9mKCIyNzQyMDg5NTU7OTk5ODQxNDI7YiIpPi0xKSB7CgkJcy5saW5rVHJhY2tWYXJzPSdwcm9wMzEnOwoJCXMucHJvcDMxPSdMZXh1cyBFeGl0IExpbmsnOwoJCS8vcy5tYW5hZ2VWYXJzKCdjbGVhclZhcnMnLHMubGlua1RyYWNrVmFycywxKTsKCX0KCgoKLy8gTmV3IFRyYWNraW5nIEZlYXR1cmVzCmlmICh0eXBlb2YgcyAhPSAndW5kZWZpbmVkJykgewogIC8vIHNldCBicmVha3BvaW50CiAgaWYgKHR5cGVvZihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpICE9ICd1bmRlZmluZWQnKSB7CiAgICB1c2FfY3cgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7CiAgICBpZiAodXNhX2N3IDw9IDY0NCkgewogICAgICBzLmVWYXI2OCA9IHVzYV9kZXZpY2VJbmZvLm1vYmlsZURldmljZSA/ICdTbWFydHBob25lIFBvcnRyYWl0JyA6ICdEZXNrdG9wJzsKICAgIH0gZWxzZSBpZiAodXNhX2N3ID49IDY0NSAmJiB1c2FfY3cgPD0gOTU5ICkgewogICAgICBzLmVWYXI2OCA9IHVzYV9kZXZpY2VJbmZvLm1vYmlsZURldmljZSA/ICdUYWJsZXQgUG9ydHJhaXQnIDogJ0Rlc2t0b3AnOwogICAgfSBlbHNlIGlmICh1c2FfY3cgPj0gOTYwICYmIHVzYV9jdyA8PSAxMjc0ICkgewogICAgICBzLmVWYXI2OCA9IHVzYV9kZXZpY2VJbmZvLm1vYmlsZURldmljZSA/ICdUYWJsZXQgTGFuZHNjYXBlJyA6ICdEZXNrdG9wJzsKICAgIH0gZWxzZSBpZiAodXNhX2N3ID49IDEyNzUgKSB7CiAgICAgIHMuZVZhcjY4ID0gJ0Rlc2t0b3AgTGFyZ2UnOwogICAgfQogIH0KICAvLyBEZXNrdG9wIExhcmdlIHwgRGVza3RvcCB8IFRhYmxldCBMYW5kc2NhcGUgfCBUYWJsZXQgUG9ydHJhaXQgfCBTbWFydHBob25lIFBvcnRyYWl0CgogIC8vIHNldCBzY3JlZW4gaGVpZ2h0CiAgcy5lVmFyNjkgPSB0eXBlb2YoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkgIT0gJ3VuZGVmaW5lZCcgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IDogJyc7CgogIC8vIHNldCBzY3JlZW4gd2lkdGgKICBzLmVWYXI3MCA9IHR5cGVvZihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpICE9ICd1bmRlZmluZWQnID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIDogJyc7CgogIC8vIHNldCBkZXZpY2UgdHlwZSAKICBpZiAodXNhX2RldmljZUluZm8ubW9iaWxlRGV2aWNlICYmIHVzYV9kZXZpY2VJbmZvLnNtYXJ0cGhvbmUpIHsKICAgIHMuZVZhcjcxID0gJ1NtYXJ0cGhvbmUnOwogIH0gZWxzZSBpZiAodXNhX2RldmljZUluZm8ubW9iaWxlRGV2aWNlICYmICF1c2FfZGV2aWNlSW5mby5zbWFydHBob25lKSB7CiAgICBzLmVWYXI3MSA9ICdUYWJsZXQnOwogIH0gZWxzZSB7CiAgICBzLmVWYXI3MSA9ICdEZXNrdG9wJzsKICB9CgogfQogCgoJLy9rZWVwIHRyYWNrIG9mIHNlY3VyZSBnb29nbGUgc2VhcmNoZXMJCgl2YXIga3I9ZG9jdW1lbnQucmVmZXJyZXIsa2s9cy5nZXRRdWVyeVBhcmFtKCJxIiwiIixrciksa3M9cy5nZXRRdWVyeVBhcmFtKCJlc3JjIiwiIixrcik7aWYoa3IuaW5kZXhPZigid3d3Lmdvb2dsZS5jb20iKSYmIWtrJiZrcz09InMiKXt2YXIga3NyPWtyLnNwbGl0KCJxPSIpLGtxPSJxPUdvb2dsZSUyMFNlY3VyZSUyMFNlYXJjaCI7cy5yZWZlcnJlcj1rc3JbMF0ra3Era3NyWzFdfTsKCi8vY29weWluZyBvdmVyIGV2YXIgNjggLT4gNzIgaW4gdG8gcHJvcDY4IC0gPiA3MgoJaWYocy5lVmFyNjgpIHtzLnByb3A2OD0iRD12NjgifTsKCWlmKHMuZVZhcjY5KSB7cy5wcm9wNjk9IkQ9djY5In07CglpZihzLmVWYXI3MCkge3MucHJvcDcwPSJEPXY3MCJ9OwoJaWYocy5lVmFyNzEpIHtzLnByb3A3MT0iRD12NzEifTsKCWlmKHMuZVZhcjcyKSB7cy5wcm9wNzI9IkQ9djcyIn07Cgp9CnMuZG9QbHVnaW5zPXNfZG9QbHVnaW5zCi8qKioqKioqKioqKioqKioqKioqKioqKioqKiBQTFVHSU5TIFNFQ1RJT04gKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyogWW91IG1heSBpbnNlcnQgYW55IHBsdWdpbnMgeW91IHdpc2ggdG8gdXNlIGhlcmUuICAgICAgICAgICAgICAgICAqLwoKLyoKICogUGx1Z2luOiBnZXRRdWVyeVBhcmFtIDIuMwogKi8Kcy5nZXRRdWVyeVBhcmFtPW5ldyBGdW5jdGlvbigicCIsImQiLCJ1IiwiIgorInZhciBzPXRoaXMsdj0nJyxpLHQ7ZD1kP2Q6Jyc7dT11P3U6KHMucGFnZVVSTD9zLnBhZ2VVUkw6cy53ZC5sb2NhdGkiCisib24pO2lmKHU9PSdmJyl1PXMuZ3RmcygpLmxvY2F0aW9uO3doaWxlKHApe2k9cC5pbmRleE9mKCcsJyk7aT1pPDA/cCIKKyIubGVuZ3RoOmk7dD1zLnBfZ3B2KHAuc3Vic3RyaW5nKDAsaSksdSsnJyk7aWYodCl7dD10LmluZGV4T2YoJyMnKT4tIgorIjE/dC5zdWJzdHJpbmcoMCx0LmluZGV4T2YoJyMnKSk6dDt9aWYodCl2Kz12P2QrdDp0O3A9cC5zdWJzdHJpbmcoaT0iCisiPXAubGVuZ3RoP2k6aSsxKX1yZXR1cm4gdiIpOwpzLnBfZ3B2PW5ldyBGdW5jdGlvbigiayIsInUiLCIiCisidmFyIHM9dGhpcyx2PScnLGk9dS5pbmRleE9mKCc/JykscTtpZihrJiZpPi0xKXtxPXUuc3Vic3RyaW5nKGkrMSk7diIKKyI9cy5wdChxLCcmJywncF9ndmYnLGspfXJldHVybiB2Iik7CnMucF9ndmY9bmV3IEZ1bmN0aW9uKCJ0IiwiayIsIiIKKyJpZih0KXt2YXIgcz10aGlzLGk9dC5pbmRleE9mKCc9JykscD1pPDA/dDp0LnN1YnN0cmluZygwLGkpLHY9aTwwPydUIgorInJ1ZSc6dC5zdWJzdHJpbmcoaSsxKTtpZihwLnRvTG93ZXJDYXNlKCk9PWsudG9Mb3dlckNhc2UoKSlyZXR1cm4gcy4iCisiZXBhKHYpfXJldHVybiAnJyIpOwoKCi8qCiAqIFBsdWdpbjogZ2V0VmFsT25jZV92MS4xMQogKi8Kcy5nZXRWYWxPbmNlPW5ldyBGdW5jdGlvbigidiIsImMiLCJlIiwidCIsIiIKKyJ2YXIgcz10aGlzLGE9bmV3IERhdGUsdj12P3Y6JycsYz1jP2M6J3NfZ3ZvJyxlPWU/ZTowLGk9dD09J20nPzYwMDAiCisiMDo4NjQwMDAwMCxrPXMuY19yKGMpO2lmKHYpe2Euc2V0VGltZShhLmdldFRpbWUoKStlKmkpO3MuY193KGMsdixlIgorIj09MD8wOmEpO31yZXR1cm4gdj09az8nJzp2Iik7CgoKLyoKICogUGx1Z2luOiBnZXROZXdSZXBlYXQgMS4wIC0gUmV0dXJuIHdoZXRoZXIgdXNlciBpcyBuZXcgb3IgcmVwZWF0CiAqLwpzLmdldE5ld1JlcGVhdD1uZXcgRnVuY3Rpb24oIiIKKyJ2YXIgcz10aGlzLGU9bmV3IERhdGUoKSxjdmFsLGN0PWUuZ2V0VGltZSgpLHk9ZS5nZXRZZWFyKCk7ZS5zZXRUaW1lIgorIihjdCszMCoyNCo2MCo2MCoxMDAwKTtjdmFsPXMuY19yKCdzX25yJyk7aWYoY3ZhbC5sZW5ndGg9PTApe3MuY193KCIKKyInc19ucicsY3QsZSk7cmV0dXJuICdOZXcnO31pZihjdmFsLmxlbmd0aCE9MCYmY3QtY3ZhbDwzMCo2MCoxMDAwKXtzIgorIi5jX3coJ3NfbnInLGN0LGUpO3JldHVybiAnTmV3Jzt9aWYoY3ZhbDwxMTIzOTE2NDAwMDAxKXtlLnNldFRpbWUoY3YiCisiYWwrMzAqMjQqNjAqNjAqMTAwMCk7cy5jX3coJ3NfbnInLGN0LGUpO3JldHVybiAnUmVwZWF0Jzt9ZWxzZSByZXR1ciIKKyJuICdSZXBlYXQnOyIpOwoKCQovKgogKiBVdGlsaXR5IEZ1bmN0aW9uOiBEZXRlcm1pbmUgSWYgQSBQYXJ0aWN1bGFyIFZhbHVlIEV4aXN0cyBXaXRoaW4gQW4gQXJyYXkKICovCnMuaWE9bmV3IEZ1bmN0aW9uKCJhciIsInYiLCIiCisiZm9yKHZhciBpPTA7aTxhci5sZW5ndGg7aSsrKXtpZihhcltpXT09dilyZXR1cm4gaX1yZXR1cm4gLTEiKTsKCi8qCiAqIFBsdWdpbjogZ2V0UGFnZU5hbWUgdjIuMSAtIHBhcnNlIFVSTCBhbmQgcmV0dXJuCiAqLwpzLmdldFBhZ2VOYW1lPW5ldyBGdW5jdGlvbigidSIsIiIKKyJ2YXIgcz10aGlzLHY9dT91OicnK3Mud2QubG9jYXRpb24seD12LmluZGV4T2YoJzonKSx5PXYuaW5kZXhPZignLycsIgorIngrNCksej12LmluZGV4T2YoJz8nKSxjPXMucGF0aENvbmNhdERlbGltLGU9cy5wYXRoRXhjbHVkZURlbGltLGc9cy4iCisicXVlcnlWYXJzTGlzdCxkPXMuc2l0ZUlELG49ZD9kOicnLHE9ejwwPycnOnYuc3Vic3RyaW5nKHorMSkscD12LnN1YiIKKyJzdHJpbmcoeSsxLHE/ejp2Lmxlbmd0aCk7ej1wLmluZGV4T2YoJyMnKTtwPXo8MD9wOnMuZmwocCx6KTt4PWU/cC5pIgorIm5kZXhPZihlKTotMTtwPXg8MD9wOnMuZmwocCx4KTtwKz0hcHx8cC5jaGFyQXQocC5sZW5ndGgtMSk9PScvJz9zLmQiCisiZWZhdWx0UGFnZTonJzt5PWM/YzonLyc7d2hpbGUocCl7eD1wLmluZGV4T2YoJy8nKTt4PXg8MD9wLmxlbmd0aDp4OyIKKyJ6PXMuZmwocCx4KTtpZighcy5wdChzLnBhdGhFeGNsdWRlTGlzdCwnLCcsJ3BfYycseikpbis9bj95K3o6ejtwPXAuIgorInN1YnN0cmluZyh4KzEpfXk9Yz9jOic/Jzt3aGlsZShnKXt4PWcuaW5kZXhPZignLCcpO3g9eDwwP2cubGVuZ3RoOngiCisiO3o9cy5mbChnLHgpO3o9cy5wdChxLCcmJywncF9jJyx6KTtpZih6KXtuKz1uP3krejp6O3k9Yz9jOicmJ31nPWcucyIKKyJ1YnN0cmluZyh4KzEpfXJldHVybiBuIik7CgoKLyoKICogUGx1Z2luOiBsaW5rSGFuZGxlciAwLjUgLSBpZGVudGlmeSBhbmQgcmVwb3J0IGN1c3RvbSBsaW5rcwogKi8Kcy5saW5rSGFuZGxlcj1uZXcgRnVuY3Rpb24oInAiLCJ0IiwiIgorInZhciBzPXRoaXMsaD1zLnBfZ2goKSxpLGw7dD10P3Q6J28nO2lmKCFofHwocy5saW5rVHlwZSYmKGh8fHMubGlua04iCisiYW1lKSkpcmV0dXJuICcnO2k9aC5pbmRleE9mKCc/Jyk7aD1zLmxpbmtMZWF2ZVF1ZXJ5U3RyaW5nfHxpPDA/aDpoLiIKKyJzdWJzdHJpbmcoMCxpKTtsPXMucHQocCwnfCcsJ3BfZ24nLGgudG9Mb3dlckNhc2UoKSk7aWYobCl7cy5saW5rTmFtIgorImU9bD09J1tbJz8nJzpsO3MubGlua1R5cGU9dDtyZXR1cm4gaDt9cmV0dXJuICcnOyIpOwpzLnBfZ249bmV3IEZ1bmN0aW9uKCJ0IiwiaCIsIiIKKyJ2YXIgaT10P3QuaW5kZXhPZignficpOi0xLG4seDtpZih0JiZoKXtuPWk8MD8nJzp0LnN1YnN0cmluZygwLGkpO3g9IgorInQuc3Vic3RyaW5nKGkrMSk7aWYoaC5pbmRleE9mKHgudG9Mb3dlckNhc2UoKSk+LTEpcmV0dXJuIG4/bjonW1snO30iCisicmV0dXJuIDA7Iik7CgoKLyoKICogUGx1Z2luOiBleGl0TGlua0hhbmRsZXIgMC44IC0gaWRlbnRpZnkgYW5kIHJlcG9ydCBleGl0IGxpbmtzCiAqLwpzLmV4aXRMaW5rSGFuZGxlcj1uZXcgRnVuY3Rpb24oInAiLCJlIiwiIgorInZhciBzPXRoaXMsbz1zLnBfZ2goKSxoPW8uaHJlZixuPSdsaW5rSW50ZXJuYWxGaWx0ZXJzJyxpLHQ7aWYoIWh8fCgiCisicy5saW5rVHlwZSYmKGh8fHMubGlua05hbWUpKSlyZXR1cm4nJztpPWguaW5kZXhPZignPycpO3Q9c1tuXTtzW25dPSIKKyJwP3A6dDtoPXMubGlua0xlYXZlUXVlcnlTdHJpbmd8fGk8MD9oOmguc3Vic3RyaW5nKDAsaSk7aWYocy5sdChoKT09IgorIidlJylzLmxpbmtUeXBlPSdlJztlbHNlIGg9Jyc7c1tuXT10O3JldHVybiBlP286aDsiKTsKcy5wX2doPW5ldyBGdW5jdGlvbigiIiwiIgorInZhciBzPXRoaXM7aWYoIXMuZW8mJiFzLmxuaylyZXR1cm4nJzt2YXIgbz1zLmVvP3MuZW86cy5sbmsseT1zLm90KG8iCisiKSxuPXMub2lkKG8pLHg9by5zX29pZHQ7aWYocy5lbyYmbz09cy5lbyl7d2hpbGUobyYmIW4mJnkhPSdCT0RZJyl7byIKKyI9by5wYXJlbnRFbGVtZW50P28ucGFyZW50RWxlbWVudDpvLnBhcmVudE5vZGU7aWYoIW8pcmV0dXJuJyc7eT1zLm90IgorIihvKTtuPXMub2lkKG8pO3g9by5zX29pZHQ7fX1yZXR1cm4gbz9vOicnOyIpOwoKCi8qCiAqIFV0aWxpdHkgbWFuYWdlVmFycyB2MS40IC0gY2xlYXIgdmFyaWFibGUgdmFsdWVzIChyZXF1aXJlcyBzcGxpdCAxLjUpCiAqLwpzLm1hbmFnZVZhcnM9bmV3IEZ1bmN0aW9uKCJjIiwibCIsImYiLCIiCisidmFyIHM9dGhpcyx2bCxsYSx2bGE7bD1sP2w6Jyc7Zj1mP2Y6MSA7aWYoIXNbY10pcmV0dXJuIGZhbHNlO3ZsPSdwYSIKKyJnZU5hbWUscHVyY2hhc2VJRCxjaGFubmVsLHNlcnZlcixwYWdlVHlwZSxjYW1wYWlnbixzdGF0ZSx6aXAsZXZlbnRzIgorIixwcm9kdWN0cyx0cmFuc2FjdGlvbklEJztmb3IodmFyIG49MTtuPDc2O24rKyl7dmwrPScscHJvcCcrbisnLGVWYXIiCisiJytuKycsaGllcicrbjt9aWYobCYmKGY9PTF8fGY9PTIpKXtpZihmPT0xKXt2bD1sO31pZihmPT0yKXtsYT1zLnNwbCIKKyJpdChsLCcsJyk7dmxhPXMuc3BsaXQodmwsJywnKTt2bD0nJztmb3IoeCBpbiBsYSl7Zm9yKHkgaW4gdmxhKXtpZihsIgorImFbeF09PXZsYVt5XSl7dmxhW3ldPScnO319fWZvcih5IGluIHZsYSl7dmwrPXZsYVt5XT8nLCcrdmxhW3ldOicnO30iCisifXMucHQodmwsJywnLGMsMCk7cmV0dXJuIHRydWU7fWVsc2UgaWYobD09JycmJmY9PTEpe3MucHQodmwsJywnLGMsMCIKKyIpO3JldHVybiB0cnVlO31lbHNle3JldHVybiBmYWxzZTt9Iik7CnMuY2xlYXJWYXJzPW5ldyBGdW5jdGlvbigidCIsInZhciBzPXRoaXM7c1t0XT0nJzsiKTsKcy5sb3dlcmNhc2VWYXJzPW5ldyBGdW5jdGlvbigidCIsIiIKKyJ2YXIgcz10aGlzO2lmKHNbdF0mJnQhPSdldmVudHMnKXtzW3RdPXNbdF0udG9TdHJpbmcoKTtpZihzW3RdLmluZGV4IgorIk9mKCdEPScpIT0wKXtzW3RdPXNbdF0udG9Mb3dlckNhc2UoKTt9fSIpOwoKCi8qCiAqIFV0aWxpdHkgRnVuY3Rpb246IHNwbGl0IHYxLjUgKEpTIDEuMCBjb21wYXRpYmxlKQogKi8Kcy5zcGxpdD1uZXcgRnVuY3Rpb24oImwiLCJkIiwiIgorInZhciBpLHg9MCxhPW5ldyBBcnJheTt3aGlsZShsKXtpPWwuaW5kZXhPZihkKTtpPWk+LTE/aTpsLmxlbmd0aDthW3giCisiKytdPWwuc3Vic3RyaW5nKDAsaSk7bD1sLnN1YnN0cmluZyhpK2QubGVuZ3RoKTt9cmV0dXJuIGEiKTsKCQovKgogKiBQbHVnaW4gVXRpbGl0eTogYXBsIHYxLjEKICovCnMuYXBsPW5ldyBGdW5jdGlvbigiTCIsInYiLCJkIiwidSIsIiIKKyJ2YXIgcz10aGlzLG09MDtpZighTClMPScnO2lmKHUpe3ZhciBpLG4sYT1zLnNwbGl0KEwsZCk7Zm9yKGk9MDtpPGEuIgorImxlbmd0aDtpKyspe249YVtpXTttPW18fCh1PT0xPyhuPT12KToobi50b0xvd2VyQ2FzZSgpPT12LnRvTG93ZXJDYXMiCisiZSgpKSk7fX1pZighbSlMPUw/TCtkK3Y6djtyZXR1cm4gTCIpOwoKLyoKICogUGx1Z2luOiBnZXRBbmRQZXJzaXN0VmFsdWUgMC4zIC0gZ2V0IGEgdmFsdWUgb24gZXZlcnkgcGFnZQogKi8Kcy5nZXRBbmRQZXJzaXN0VmFsdWU9bmV3IEZ1bmN0aW9uKCJ2IiwiYyIsImUiLCIiCisidmFyIHM9dGhpcyxhPW5ldyBEYXRlO2U9ZT9lOjA7YS5zZXRUaW1lKGEuZ2V0VGltZSgpK2UqODY0MDAwMDApO2lmKCIKKyJ2KXMuY193KGMsdixlP2E6MCk7cmV0dXJuIHMuY19yKGMpOyIpOwoKCi8qCiAqIFBsdWdpbjogRHluYW1pY2FsbHkgQnVpbGQgcy5oaWVyMyB2YWx1ZQogKi8KZnVuY3Rpb24gc2V0X2gzKCkgewoJaDMgPSBuZXcgU3RyaW5nKGRvY3VtZW50LmxvY2F0aW9uLmhvc3QgKyBkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSk7CglpZihoMy5jaGFyQXQoaDMubGVuZ3RoLTEpPT0iLyIpIHsKCQl2YXIgdGVtcCA9IG5ldyBTdHJpbmcoKTsKCQlmb3IodmFyIGk9MDtpPGgzLmxlbmd0aC0xO2krKyl7CXRlbXAgKz0gaDMuY2hhckF0KGkpOwl9CgkJaDMgPSB0ZW1wOwoJfQoJdmFyIGludEluZGV4T2ZNYXRjaCA9IGgzLmluZGV4T2YoIi8iKTsKCXdoaWxlIChpbnRJbmRleE9mTWF0Y2ggIT0gLTEpIHtoMyA9IGgzLnJlcGxhY2UoIi8iLCJ8Iik7aW50SW5kZXhPZk1hdGNoID0gaDMuaW5kZXhPZigiLyIpO30KCXJldHVybiBoMzsKfQoKLyogV0FSTklORzogQ2hhbmdpbmcgYW55IG9mIHRoZSBiZWxvdyB2YXJpYWJsZXMgd2lsbCBjYXVzZSBkcmFzdGljCmNoYW5nZXMgdG8gaG93IHlvdXIgdmlzaXRvciBkYXRhIGlzIGNvbGxlY3RlZC4gIENoYW5nZXMgc2hvdWxkIG9ubHkgYmUKbWFkZSB3aGVuIGluc3RydWN0ZWQgdG8gZG8gc28gYnkgeW91ciBhY2NvdW50IG1hbmFnZXIuKi8Kcy52aXNpdG9yTmFtZXNwYWNlPSJuYmN1bml2ZXJzYWwiCnMudHJhY2tpbmdTZXJ2ZXI9Im9pbWcubmJjdW5pLmNvbSIKcy50cmFja2luZ1NlcnZlclNlY3VyZT0ib3NpbWcubmJjdW5pLmNvbSIKCi8qKioqKioqKioqKioqIERPIE5PVCBBTFRFUiBBTllUSElORyBCRUxPVyBUSElTIExJTkUgISAqKioqKioqKioqKioqKi8KdmFyIHNfY29kZT0nJyxzX29iamVjdElEO2Z1bmN0aW9uIHNfZ2kodW4scGcsc3Mpe3ZhciBjPSJzLnZlcnNpb249J0guMjcuNSc7cy5hbj1zX2FuO3MubG9nRGVidWc9ZnVuY3Rpb24obSl7dmFyIHM9dGhpcyx0Y2Y9bmV3IEZ1bmN0aW9uKCd2YXIgZTt0cnl7Y29uc29sZS5sb2coXCInK3MucmVwKHMucmVwKHMucmVwKG0sXCJcXFxcXCIsXCJcXFxcIgorIlxcXFxcIiksXCJcXG5cIixcIlxcXFxuXCIpLFwiXFxcIlwiLFwiXFxcXFxcXCJcIikrJ1wiKTt9Y2F0Y2goZSl7fScpO3RjZigpfTtzLmNscz1mdW5jdGlvbih4LGMpe3ZhciBpLHk9Jyc7aWYoIWMpYz10aGlzLmFuO2ZvcihpPTA7aTx4Lmxlbmd0aDtpKyspe249eC5zdWJzdHJpbmcoaSxpKzEpO2lmKGMuaW5kZXhPZihuKT49MCl5Kz1ufXJldHVyIgorIm4geX07cy5mbD1mdW5jdGlvbih4LGwpe3JldHVybiB4PygnJyt4KS5zdWJzdHJpbmcoMCxsKTp4fTtzLmNvPWZ1bmN0aW9uKG8pe3JldHVybiBvfTtzLm51bT1mdW5jdGlvbih4KXt4PScnK3g7Zm9yKHZhciBwPTA7cDx4Lmxlbmd0aDtwKyspaWYoKCcwMTIzNDU2Nzg5JykuaW5kZXhPZih4LnN1YnN0cmluZyhwLHArMSkpPDApcmV0dXJuIDA7cmV0IgorInVybiAxfTtzLnJlcD1zX3JlcDtzLnNwPXNfc3A7cy5qbj1zX2puO3MuYXBlPWZ1bmN0aW9uKHgpe3ZhciBzPXRoaXMsaD0nMDEyMzQ1Njc4OUFCQ0RFRicsZj1cIit+ISooKSdcIixpLGM9cy5jaGFyU2V0LG4sbCxlLHk9Jyc7Yz1jP2MudG9VcHBlckNhc2UoKTonJztpZih4KXt4PScnK3g7aWYocy5lbT09Myl7eD1lbmNvZGVVUklDb21wb25lbnQoIgorIngpO2ZvcihpPTA7aTxmLmxlbmd0aDtpKyspIHtuPWYuc3Vic3RyaW5nKGksaSsxKTtpZih4LmluZGV4T2Yobik+PTApeD1zLnJlcCh4LG4sXCIlXCIrbi5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpKX19ZWxzZSBpZihjPT0nQVVUTycmJignJykuY2hhckNvZGVBdCl7Zm9yKGk9MDtpPHgubGVuZ3RoO2krKyl7Yz14LnN1IgorImJzdHJpbmcoaSxpKzEpO249eC5jaGFyQ29kZUF0KGkpO2lmKG4+MTI3KXtsPTA7ZT0nJzt3aGlsZShufHxsPDQpe2U9aC5zdWJzdHJpbmcobiUxNixuJTE2KzEpK2U7bj0obi1uJTE2KS8xNjtsKyt9eSs9JyV1JytlfWVsc2UgaWYoYz09JysnKXkrPSclMkInO2Vsc2UgeSs9ZXNjYXBlKGMpfXg9eX1lbHNlIHg9cy5yZXAoZXNjYXBlKCcnK3gpLCcrIgorIicsJyUyQicpO2lmKGMmJmMhPSdBVVRPJyYmcy5lbT09MSYmeC5pbmRleE9mKCcldScpPDAmJnguaW5kZXhPZignJVUnKTwwKXtpPXguaW5kZXhPZignJScpO3doaWxlKGk+PTApe2krKztpZihoLnN1YnN0cmluZyg4KS5pbmRleE9mKHguc3Vic3RyaW5nKGksaSsxKS50b1VwcGVyQ2FzZSgpKT49MClyZXR1cm4geC5zdWJzdHJpbmcoMCxpKSsndTAwIgorIicreC5zdWJzdHJpbmcoaSk7aT14LmluZGV4T2YoJyUnLGkpfX19cmV0dXJuIHh9O3MuZXBhPWZ1bmN0aW9uKHgpe3ZhciBzPXRoaXMseSx0Y2Y7aWYoeCl7eD1zLnJlcCgnJyt4LCcrJywnICcpO2lmKHMuZW09PTMpe3RjZj1uZXcgRnVuY3Rpb24oJ3gnLCd2YXIgeSxlO3RyeXt5PWRlY29kZVVSSUNvbXBvbmVudCh4KX1jYXRjaChlKXt5PXVuZXNjIgorImFwZSh4KX1yZXR1cm4geScpO3JldHVybiB0Y2YoeCl9ZWxzZSByZXR1cm4gdW5lc2NhcGUoeCl9cmV0dXJuIHl9O3MucHQ9ZnVuY3Rpb24oeCxkLGYsYSl7dmFyIHM9dGhpcyx0PXgsej0wLHkscjt3aGlsZSh0KXt5PXQuaW5kZXhPZihkKTt5PXk8MD90Lmxlbmd0aDp5O3Q9dC5zdWJzdHJpbmcoMCx5KTtyPXNbZl0odCxhKTtpZihyKXJldHVybiByIgorIjt6Kz15K2QubGVuZ3RoO3Q9eC5zdWJzdHJpbmcoeix4Lmxlbmd0aCk7dD16PHgubGVuZ3RoP3Q6Jyd9cmV0dXJuICcnfTtzLmlzZj1mdW5jdGlvbih0LGEpe3ZhciBjPWEuaW5kZXhPZignOicpO2lmKGM+PTApYT1hLnN1YnN0cmluZygwLGMpO2M9YS5pbmRleE9mKCc9Jyk7aWYoYz49MClhPWEuc3Vic3RyaW5nKDAsYyk7aWYodC5zdWJzdHJpbmcoIgorIjAsMik9PSdzXycpdD10LnN1YnN0cmluZygyKTtyZXR1cm4gKHQhPScnJiZ0PT1hKX07cy5mc2Y9ZnVuY3Rpb24odCxhKXt2YXIgcz10aGlzO2lmKHMucHQoYSwnLCcsJ2lzZicsdCkpcy5mc2crPShzLmZzZyE9Jyc/JywnOicnKSt0O3JldHVybiAwfTtzLmZzPWZ1bmN0aW9uKHgsZil7dmFyIHM9dGhpcztzLmZzZz0nJztzLnB0KHgsJywnLCdmc2YnIgorIixmKTtyZXR1cm4gcy5mc2d9O3MubXBjPWZ1bmN0aW9uKG0sYSl7dmFyIHM9dGhpcyxjLGwsbix2O3Y9cy5kLnZpc2liaWxpdHlTdGF0ZTtpZighdil2PXMuZC53ZWJraXRWaXNpYmlsaXR5U3RhdGU7aWYodiYmdj09J3ByZXJlbmRlcicpe2lmKCFzLm1wcSl7cy5tcHE9bmV3IEFycmF5O2w9cy5zcCgnd2Via2l0dmlzaWJpbGl0eWNoYW5nZSx2aXNpIgorImJpbGl0eWNoYW5nZScsJywnKTtmb3Iobj0wO248bC5sZW5ndGg7bisrKXtzLmQuYWRkRXZlbnRMaXN0ZW5lcihsW25dLG5ldyBGdW5jdGlvbigndmFyIHM9c19jX2lsWycrcy5faW4rJ10sYyx2O3Y9cy5kLnZpc2liaWxpdHlTdGF0ZTtpZighdil2PXMuZC53ZWJraXRWaXNpYmlsaXR5U3RhdGU7aWYocy5tcHEmJnY9PVwidmlzaWJsZVwiKXt3aGlsIgorImUocy5tcHEubGVuZ3RoPjApe2M9cy5tcHEuc2hpZnQoKTtzW2MubV0uYXBwbHkocyxjLmEpfXMubXBxPTB9JyksZmFsc2UpfX1jPW5ldyBPYmplY3Q7Yy5tPW07Yy5hPWE7cy5tcHEucHVzaChjKTtyZXR1cm4gMX1yZXR1cm4gMH07cy5zaT1mdW5jdGlvbigpe3ZhciBzPXRoaXMsaSxrLHYsYz1zX2dpKyd2YXIgcz1zX2dpKFwiJytzLm91bisnXCIpIgorIjtzLnNhKFwiJytzLnVuKydcIik7Jztmb3IoaT0wO2k8cy52YV9nLmxlbmd0aDtpKyspe2s9cy52YV9nW2ldO3Y9c1trXTtpZih2IT11bmRlZmluZWQpe2lmKHR5cGVvZih2KSE9J251bWJlcicpYys9J3MuJytrKyc9XCInK3NfZmUodikrJ1wiOyc7ZWxzZSBjKz0ncy4nK2srJz0nK3YrJzsnfX1jKz1cInMubG5rPXMuZW89cy5saW5rTmFtZT1zLmxpIgorIm5rVHlwZT1zLndkLnNfb2JqZWN0SUQ9cy5wcHU9cy5wZT1zLnBldjE9cy5wZXYyPXMucGV2Mz0nJztcIjtyZXR1cm4gY307cy5jX2Q9Jyc7cy5jX2dkZj1mdW5jdGlvbih0LGEpe3ZhciBzPXRoaXM7aWYoIXMubnVtKHQpKXJldHVybiAxO3JldHVybiAwfTtzLmNfZ2Q9ZnVuY3Rpb24oKXt2YXIgcz10aGlzLGQ9cy53ZC5sb2NhdGlvbi5ob3N0bmFtIgorImUsbj1zLmZwQ29va2llRG9tYWluUGVyaW9kcyxwO2lmKCFuKW49cy5jb29raWVEb21haW5QZXJpb2RzO2lmKGQmJiFzLmNfZCl7bj1uP3BhcnNlSW50KG4pOjI7bj1uPjI/bjoyO3A9ZC5sYXN0SW5kZXhPZignLicpO2lmKHA+PTApe3doaWxlKHA+PTAmJm4+MSl7cD1kLmxhc3RJbmRleE9mKCcuJyxwLTEpO24tLX1zLmNfZD1wPjAmJnMucHQoZCwnIgorIi4nLCdjX2dkZicsMCk/ZC5zdWJzdHJpbmcocCk6ZH19cmV0dXJuIHMuY19kfTtzLmNfcj1mdW5jdGlvbihrKXt2YXIgcz10aGlzO2s9cy5hcGUoayk7dmFyIGM9JyAnK3MuZC5jb29raWUsaT1jLmluZGV4T2YoJyAnK2srJz0nKSxlPWk8MD9pOmMuaW5kZXhPZignOycsaSksdj1pPDA/Jyc6cy5lcGEoYy5zdWJzdHJpbmcoaSsyK2subGVuZ3RoLGU8IgorIjA/Yy5sZW5ndGg6ZSkpO3JldHVybiB2IT0nW1tCXV0nP3Y6Jyd9O3MuY193PWZ1bmN0aW9uKGssdixlKXt2YXIgcz10aGlzLGQ9cy5jX2dkKCksbD1zLmNvb2tpZUxpZmV0aW1lLHQ7dj0nJyt2O2w9bD8oJycrbCkudG9VcHBlckNhc2UoKTonJztpZihlJiZsIT0nU0VTU0lPTicmJmwhPSdOT05FJyl7dD0odiE9Jyc/cGFyc2VJbnQobD9sOjApOi02IgorIjApO2lmKHQpe2U9bmV3IERhdGU7ZS5zZXRUaW1lKGUuZ2V0VGltZSgpKyh0KjEwMDApKX19aWYoayYmbCE9J05PTkUnKXtzLmQuY29va2llPWsrJz0nK3MuYXBlKHYhPScnP3Y6J1tbQl1dJykrJzsgcGF0aD0vOycrKGUmJmwhPSdTRVNTSU9OJz8nIGV4cGlyZXM9JytlLnRvR01UU3RyaW5nKCkrJzsnOicnKSsoZD8nIGRvbWFpbj0nK2QrJzsnOicnIgorIik7cmV0dXJuIHMuY19yKGspPT12fXJldHVybiAwfTtzLmVoPWZ1bmN0aW9uKG8sZSxyLGYpe3ZhciBzPXRoaXMsYj0nc18nK2UrJ18nK3MuX2luLG49LTEsbCxpLHg7aWYoIXMuZWhsKXMuZWhsPW5ldyBBcnJheTtsPXMuZWhsO2ZvcihpPTA7aTxsLmxlbmd0aCYmbjwwO2krKyl7aWYobFtpXS5vPT1vJiZsW2ldLmU9PWUpbj1pfWlmKG48MCl7bj1pIgorIjtsW25dPW5ldyBPYmplY3R9eD1sW25dO3gubz1vO3guZT1lO2Y9cj94LmI6ZjtpZihyfHxmKXt4LmI9cj8wOm9bZV07eC5vW2VdPWZ9aWYoeC5iKXt4Lm9bYl09eC5iO3JldHVybiBifXJldHVybiAwfTtzLmNldD1mdW5jdGlvbihmLGEsdCxvLGIpe3ZhciBzPXRoaXMscix0Y2Y7aWYocy5hcHY+PTUmJighcy5pc29wZXJhfHxzLmFwdj49Nykpe3RjIgorImY9bmV3IEZ1bmN0aW9uKCdzJywnZicsJ2EnLCd0JywndmFyIGUscjt0cnl7cj1zW2ZdKGEpfWNhdGNoKGUpe3I9c1t0XShlKX1yZXR1cm4gcicpO3I9dGNmKHMsZixhLHQpfWVsc2V7aWYocy5pc21hYyYmcy51LmluZGV4T2YoJ01TSUUgNCcpPj0wKXI9c1tiXShhKTtlbHNle3MuZWgocy53ZCwnb25lcnJvcicsMCxvKTtyPXNbZl0oYSk7cy5laChzIgorIi53ZCwnb25lcnJvcicsMSl9fXJldHVybiByfTtzLmd0ZnNldD1mdW5jdGlvbihlKXt2YXIgcz10aGlzO3JldHVybiBzLnRmc307cy5ndGZzb2U9bmV3IEZ1bmN0aW9uKCdlJywndmFyIHM9c19jX2lsWycrcy5faW4rJ10sYztzLmVoKHdpbmRvdyxcIm9uZXJyb3JcIiwxKTtzLmV0ZnM9MTtjPXMudCgpO2lmKGMpcy5kLndyaXRlKGMpO3MuZXRmcz0wIgorIjtyZXR1cm4gdHJ1ZScpO3MuZ3Rmc2ZiPWZ1bmN0aW9uKGEpe3JldHVybiB3aW5kb3d9O3MuZ3Rmc2Y9ZnVuY3Rpb24odyl7dmFyIHM9dGhpcyxwPXcucGFyZW50LGw9dy5sb2NhdGlvbjtzLnRmcz13O2lmKHAmJnAubG9jYXRpb24hPWwmJnAubG9jYXRpb24uaG9zdD09bC5ob3N0KXtzLnRmcz1wO3JldHVybiBzLmd0ZnNmKHMudGZzKX1yZXR1cm4gIgorInMudGZzfTtzLmd0ZnM9ZnVuY3Rpb24oKXt2YXIgcz10aGlzO2lmKCFzLnRmcyl7cy50ZnM9cy53ZDtpZighcy5ldGZzKXMudGZzPXMuY2V0KCdndGZzZicscy50ZnMsJ2d0ZnNldCcscy5ndGZzb2UsJ2d0ZnNmYicpfXJldHVybiBzLnRmc307cy5tcnE9ZnVuY3Rpb24odSl7dmFyIHM9dGhpcyxsPXMucmxbdV0sbixyO3MucmxbdV09MDtpZihsKWZvIgorInIobj0wO248bC5sZW5ndGg7bisrKXtyPWxbbl07cy5tcigwLDAsci5yLHIudCxyLnUpfX07cy5mbHVzaEJ1ZmZlcmVkUmVxdWVzdHM9ZnVuY3Rpb24oKXt9O3MudGFnQ29udGFpbmVyTWFya2VyPScnO3MubXI9ZnVuY3Rpb24oc2VzcyxxLHJzLHRhLHUpe3ZhciBzPXRoaXMsZGM9cy5kYyx0MT1zLnRyYWNraW5nU2VydmVyLHQyPXMudHJhY2tpbmdTIgorImVydmVyU2VjdXJlLHRiPXMudHJhY2tpbmdTZXJ2ZXJCYXNlLHA9Jy5zYycsbnM9cy52aXNpdG9yTmFtZXNwYWNlLHVuPXMuY2xzKHU/dToobnM/bnM6cy5mdW4pKSxyPW5ldyBPYmplY3QsbCxpbW49J3NfaV8nK3MuX2luKydfJyt1bixpbSxiLGU7aWYoIXJzKXtpZih0MSl7aWYodDImJnMuc3NsKXQxPXQyfWVsc2V7aWYoIXRiKXRiPScybzcubmV0IgorIic7aWYoZGMpZGM9KCcnK2RjKS50b0xvd2VyQ2FzZSgpO2Vsc2UgZGM9J2QxJztpZih0Yj09JzJvNy5uZXQnKXtpZihkYz09J2QxJylkYz0nMTEyJztlbHNlIGlmKGRjPT0nZDInKWRjPScxMjInO3A9Jyd9dDE9dW4rJy4nK2RjKycuJytwK3RifXJzPSdodHRwJysocy5zc2w/J3MnOicnKSsnOi8vJyt0MSsnL2Ivc3MvJytzLnVuKycvJysocy5tb2JpIgorImxlPyc1LjEnOicxJykrJy8nK3MudmVyc2lvbisocy50Y24/J1QnOicnKSsocy50YWdDb250YWluZXJNYXJrZXI/XCItXCIrcy50YWdDb250YWluZXJNYXJrZXI6XCJcIikrJy8nK3Nlc3MrJz9BUUI9MSZuZGg9MScrKHE/cTonJykrJyZBUUU9MSc7aWYocy5pc2llJiYhcy5pc21hYylycz1zLmZsKHJzLDIwNDcpfWlmKHMuZC5pbWFnZXMmJnMuYXB2IgorIj49MyYmKCFzLmlzb3BlcmF8fHMuYXB2Pj03KSYmKHMubnM2PDB8fHMuYXB2Pj02LjEpKXtpZighcy5yYylzLnJjPW5ldyBPYmplY3Q7aWYoIXMucmNbdW5dKXtzLnJjW3VuXT0xO2lmKCFzLnJsKXMucmw9bmV3IE9iamVjdDtzLnJsW3VuXT1uZXcgQXJyYXk7c2V0VGltZW91dCgnaWYod2luZG93LnNfY19pbCl3aW5kb3cuc19jX2lsWycrcy5faW4rIgorIiddLm1ycShcIicrdW4rJ1wiKScsNzUwKX1lbHNle2w9cy5ybFt1bl07aWYobCl7ci50PXRhO3IudT11bjtyLnI9cnM7bFtsLmxlbmd0aF09cjtyZXR1cm4gJyd9aW1uKz0nXycrcy5yY1t1bl07cy5yY1t1bl0rK31pZihzLmRlYnVnVHJhY2tpbmcpe3ZhciBkPSdBcHBNZWFzdXJlbWVudCBEZWJ1ZzogJytycyxkbD1zLnNwKHJzLCcmJyksZGxuO2ZvIgorInIoZGxuPTA7ZGxuPGRsLmxlbmd0aDtkbG4rKylkKz1cIlxcblxcdFwiK3MuZXBhKGRsW2Rsbl0pO3MubG9nRGVidWcoZCl9aW09cy53ZFtpbW5dO2lmKCFpbSlpbT1zLndkW2ltbl09bmV3IEltYWdlO2ltLmFsdD1cIlwiO2ltLnNfbD0wO2ltLm9ubG9hZD1pbS5vbmVycm9yPW5ldyBGdW5jdGlvbignZScsJ3RoaXMuc19sPTE7dmFyIHdkPXdpbmRvIgorIncscztpZih3ZC5zX2NfaWwpe3M9d2Quc19jX2lsWycrcy5faW4rJ107cy5iY3IoKTtzLm1ycShcIicrdW4rJ1wiKTtzLm5ycy0tO2lmKCFzLm5ycylzLm1fbShcInJyXCIpfScpO2lmKCFzLm5ycyl7cy5ucnM9MTtzLm1fbSgncnMnKX1lbHNlIHMubnJzKys7aW0uc3JjPXJzO2lmKHMudXNlRm9yY2VkTGlua1RyYWNraW5nfHxzLmJjZil7aWYoIXMuIgorImZvcmNlZExpbmtUcmFja2luZ1RpbWVvdXQpcy5mb3JjZWRMaW5rVHJhY2tpbmdUaW1lb3V0PTI1MDtzZXRUaW1lb3V0KCdpZih3aW5kb3cuc19jX2lsKXdpbmRvdy5zX2NfaWxbJytzLl9pbisnXS5iY3IoKScscy5mb3JjZWRMaW5rVHJhY2tpbmdUaW1lb3V0KTt9ZWxzZSBpZigocy5sbmt8fHMuZW8pJiYoIXRhfHx0YT09J19zZWxmJ3x8dGE9PSdfIgorInRvcCd8fHRhPT0nX3BhcmVudCd8fChzLndkLm5hbWUmJnRhPT1zLndkLm5hbWUpKSl7Yj1lPW5ldyBEYXRlO3doaWxlKCFpbS5zX2wmJmUuZ2V0VGltZSgpLWIuZ2V0VGltZSgpPDUwMCllPW5ldyBEYXRlfXJldHVybiAnJ31yZXR1cm4gJzxpbScrJ2cgc3InKydjPVwiJytycysnXCIgd2lkdGg9MSBoZWlnaHQ9MSBib3JkZXI9MCBhbHQ9XCJcIj4nIgorIn07cy5nZz1mdW5jdGlvbih2KXt2YXIgcz10aGlzO2lmKCFzLndkWydzXycrdl0pcy53ZFsnc18nK3ZdPScnO3JldHVybiBzLndkWydzXycrdl19O3MuZ2xmPWZ1bmN0aW9uKHQsYSl7aWYodC5zdWJzdHJpbmcoMCwyKT09J3NfJyl0PXQuc3Vic3RyaW5nKDIpO3ZhciBzPXRoaXMsdj1zLmdnKHQpO2lmKHYpc1t0XT12fTtzLmdsPWZ1bmN0aW9uKHYpIgorInt2YXIgcz10aGlzO2lmKHMucGcpcy5wdCh2LCcsJywnZ2xmJywwKX07cy5yZj1mdW5jdGlvbih4KXt2YXIgcz10aGlzLHksaSxqLGgscCxsPTAscSxhLGI9JycsYz0nJyx0O2lmKHgmJngubGVuZ3RoPjI1NSl7eT0nJyt4O2k9eS5pbmRleE9mKCc/Jyk7aWYoaT4wKXtxPXkuc3Vic3RyaW5nKGkrMSk7eT15LnN1YnN0cmluZygwLGkpO2g9eS50b0xvIgorIndlckNhc2UoKTtqPTA7aWYoaC5zdWJzdHJpbmcoMCw3KT09J2h0dHA6Ly8nKWorPTc7ZWxzZSBpZihoLnN1YnN0cmluZygwLDgpPT0naHR0cHM6Ly8nKWorPTg7aT1oLmluZGV4T2YoXCIvXCIsaik7aWYoaT4wKXtoPWguc3Vic3RyaW5nKGosaSk7cD15LnN1YnN0cmluZyhpKTt5PXkuc3Vic3RyaW5nKDAsaSk7aWYoaC5pbmRleE9mKCdnb29nbGUnIgorIik+PTApbD0nLHEsaWUsc3RhcnQsc2VhcmNoX2tleSx3b3JkLGt3LGNkLCc7ZWxzZSBpZihoLmluZGV4T2YoJ3lhaG9vLmNvJyk+PTApbD0nLHAsZWksJztpZihsJiZxKXthPXMuc3AocSwnJicpO2lmKGEmJmEubGVuZ3RoPjEpe2ZvcihqPTA7ajxhLmxlbmd0aDtqKyspe3Q9YVtqXTtpPXQuaW5kZXhPZignPScpO2lmKGk+MCYmbC5pbmRleE9mKCcsIgorIicrdC5zdWJzdHJpbmcoMCxpKSsnLCcpPj0wKWIrPShiPycmJzonJykrdDtlbHNlIGMrPShjPycmJzonJykrdH1pZihiJiZjKXE9YisnJicrYztlbHNlIGM9Jyd9aT0yNTMtKHEubGVuZ3RoLWMubGVuZ3RoKS15Lmxlbmd0aDt4PXkrKGk+MD9wLnN1YnN0cmluZygwLGkpOicnKSsnPycrcX19fX1yZXR1cm4geH07cy5zMnE9ZnVuY3Rpb24oayx2LHZmIgorIix2ZnAsZil7dmFyIHM9dGhpcyxxcz0nJyxzayxzdixzcCxzcyxua2UsbmssbmYsbmZsPTAsbmZuLG5mbTtpZihrPT1cImNvbnRleHREYXRhXCIpaz1cImNcIjtpZih2KXtmb3Ioc2sgaW4gdilpZigoIWZ8fHNrLnN1YnN0cmluZygwLGYubGVuZ3RoKT09ZikmJnZbc2tdJiYoIXZmfHx2Zi5pbmRleE9mKCcsJysodmZwP3ZmcCsnLic6JycpK3NrKycsIgorIicpPj0wKSYmKCFPYmplY3R8fCFPYmplY3QucHJvdG90eXBlfHwhT2JqZWN0LnByb3RvdHlwZVtza10pKXtuZm09MDtpZihuZmwpZm9yKG5mbj0wO25mbjxuZmwubGVuZ3RoO25mbisrKWlmKHNrLnN1YnN0cmluZygwLG5mbFtuZm5dLmxlbmd0aCk9PW5mbFtuZm5dKW5mbT0xO2lmKCFuZm0pe2lmKHFzPT0nJylxcys9JyYnK2srJy4nO3N2PXZbc2tdIgorIjtpZihmKXNrPXNrLnN1YnN0cmluZyhmLmxlbmd0aCk7aWYoc2subGVuZ3RoPjApe25rZT1zay5pbmRleE9mKCcuJyk7aWYobmtlPjApe25rPXNrLnN1YnN0cmluZygwLG5rZSk7bmY9KGY/ZjonJykrbmsrJy4nO2lmKCFuZmwpbmZsPW5ldyBBcnJheTtuZmxbbmZsLmxlbmd0aF09bmY7cXMrPXMuczJxKG5rLHYsdmYsdmZwLG5mKX1lbHNle2lmKHR5IgorInBlb2Yoc3YpPT0nYm9vbGVhbicpe2lmKHN2KXN2PSd0cnVlJztlbHNlIHN2PSdmYWxzZSd9aWYoc3Ype2lmKHZmcD09J3JldHJpZXZlTGlnaHREYXRhJyYmZi5pbmRleE9mKCcuY29udGV4dERhdGEuJyk8MCl7c3A9c2suc3Vic3RyaW5nKDAsNCk7c3M9c2suc3Vic3RyaW5nKDQpO2lmKHNrPT0ndHJhbnNhY3Rpb25JRCcpc2s9J3hhY3QnO2Vsc2UgIgorImlmKHNrPT0nY2hhbm5lbCcpc2s9J2NoJztlbHNlIGlmKHNrPT0nY2FtcGFpZ24nKXNrPSd2MCc7ZWxzZSBpZihzLm51bShzcykpe2lmKHNwPT0ncHJvcCcpc2s9J2MnK3NzO2Vsc2UgaWYoc3A9PSdlVmFyJylzaz0ndicrc3M7ZWxzZSBpZihzcD09J2xpc3QnKXNrPSdsJytzcztlbHNlIGlmKHNwPT0naGllcicpe3NrPSdoJytzcztzdj1zdi5zdWJzIgorInRyaW5nKDAsMjU1KX19fXFzKz0nJicrcy5hcGUoc2spKyc9JytzLmFwZShzdil9fX19fWlmKHFzIT0nJylxcys9JyYuJytrfXJldHVybiBxc307cy5oYXY9ZnVuY3Rpb24oKXt2YXIgcz10aGlzLHFzPScnLGwsZnY9JycsZmU9JycsbW4saSxlO2lmKHMubGlnaHRQcm9maWxlSUQpe2w9cy52YV9tO2Z2PXMubGlnaHRUcmFja1ZhcnM7aWYoZnYpZnY9IgorIicsJytmdisnLCcrcy52bF9tcisnLCd9ZWxzZXtsPXMudmFfdDtpZihzLnBlfHxzLmxpbmtUeXBlKXtmdj1zLmxpbmtUcmFja1ZhcnM7ZmU9cy5saW5rVHJhY2tFdmVudHM7aWYocy5wZSl7bW49cy5wZS5zdWJzdHJpbmcoMCwxKS50b1VwcGVyQ2FzZSgpK3MucGUuc3Vic3RyaW5nKDEpO2lmKHNbbW5dKXtmdj1zW21uXS50cmFja1ZhcnM7ZmU9c1ttIgorIm5dLnRyYWNrRXZlbnRzfX19aWYoZnYpZnY9JywnK2Z2KycsJytzLnZsX2wrJywnK3MudmxfbDI7aWYoZmUpe2ZlPScsJytmZSsnLCc7aWYoZnYpZnYrPScsZXZlbnRzLCd9aWYgKHMuZXZlbnRzMillPShlPycsJzonJykrcy5ldmVudHMyfWZvcihpPTA7aTxsLmxlbmd0aDtpKyspe3ZhciBrPWxbaV0sdj1zW2tdLGI9ay5zdWJzdHJpbmcoMCw0KSx4IgorIj1rLnN1YnN0cmluZyg0KSxuPXBhcnNlSW50KHgpLHE9aztpZighdilpZihrPT0nZXZlbnRzJyYmZSl7dj1lO2U9Jyd9aWYodiYmKCFmdnx8ZnYuaW5kZXhPZignLCcraysnLCcpPj0wKSYmayE9J2xpbmtOYW1lJyYmayE9J2xpbmtUeXBlJyl7aWYoaz09J3N1cHBsZW1lbnRhbERhdGFJRCcpcT0nc2RpZCc7ZWxzZSBpZihrPT0ndGltZXN0YW1wJylxIgorIj0ndHMnO2Vsc2UgaWYoaz09J2R5bmFtaWNWYXJpYWJsZVByZWZpeCcpcT0nRCc7ZWxzZSBpZihrPT0ndmlzaXRvcklEJylxPSd2aWQnO2Vsc2UgaWYoaz09J21hcmtldGluZ0Nsb3VkVmlzaXRvcklEJylxPSdtaWQnO2Vsc2UgaWYoaz09J2FuYWx5dGljc1Zpc2l0b3JJRCcpcT0nYWlkJztlbHNlIGlmKGs9PSdhdWRpZW5jZU1hbmFnZXJMb2NhdGlvIgorIm5IaW50JylxPSdhYW1saCc7ZWxzZSBpZihrPT0nYXVkaWVuY2VNYW5hZ2VyQmxvYicpcT0nYWFtYic7ZWxzZSBpZihrPT0nYXV0aFN0YXRlJylxPSdhcyc7ZWxzZSBpZihrPT0ncGFnZVVSTCcpe3E9J2cnO2lmKHYubGVuZ3RoPjI1NSl7cy5wYWdlVVJMUmVzdD12LnN1YnN0cmluZygyNTUpO3Y9di5zdWJzdHJpbmcoMCwyNTUpO319ZWxzZSBpZihrIgorIj09J3BhZ2VVUkxSZXN0JylxPSctZyc7ZWxzZSBpZihrPT0ncmVmZXJyZXInKXtxPSdyJzt2PXMuZmwocy5yZih2KSwyNTUpfWVsc2UgaWYoaz09J3Ztayd8fGs9PSd2aXNpdG9yTWlncmF0aW9uS2V5JylxPSd2bXQnO2Vsc2UgaWYoaz09J3Zpc2l0b3JNaWdyYXRpb25TZXJ2ZXInKXtxPSd2bWYnO2lmKHMuc3NsJiZzLnZpc2l0b3JNaWdyYXRpb25TIgorImVydmVyU2VjdXJlKXY9Jyd9ZWxzZSBpZihrPT0ndmlzaXRvck1pZ3JhdGlvblNlcnZlclNlY3VyZScpe3E9J3ZtZic7aWYoIXMuc3NsJiZzLnZpc2l0b3JNaWdyYXRpb25TZXJ2ZXIpdj0nJ31lbHNlIGlmKGs9PSdjaGFyU2V0Jyl7cT0nY2UnO2lmKHYudG9VcHBlckNhc2UoKT09J0FVVE8nKXY9J0lTTzg4NTktMSc7ZWxzZSBpZihzLmVtPT0yfHxzIgorIi5lbT09Myl2PSdVVEYtOCd9ZWxzZSBpZihrPT0ndmlzaXRvck5hbWVzcGFjZScpcT0nbnMnO2Vsc2UgaWYoaz09J2Nvb2tpZURvbWFpblBlcmlvZHMnKXE9J2NkcCc7ZWxzZSBpZihrPT0nY29va2llTGlmZXRpbWUnKXE9J2NsJztlbHNlIGlmKGs9PSd2YXJpYWJsZVByb3ZpZGVyJylxPSd2dnAnO2Vsc2UgaWYoaz09J2N1cnJlbmN5Q29kZScpcT0nIgorImNjJztlbHNlIGlmKGs9PSdjaGFubmVsJylxPSdjaCc7ZWxzZSBpZihrPT0ndHJhbnNhY3Rpb25JRCcpcT0neGFjdCc7ZWxzZSBpZihrPT0nY2FtcGFpZ24nKXE9J3YwJztlbHNlIGlmKGs9PSdyZXNvbHV0aW9uJylxPSdzJztlbHNlIGlmKGs9PSdjb2xvckRlcHRoJylxPSdjJztlbHNlIGlmKGs9PSdqYXZhc2NyaXB0VmVyc2lvbicpcT0naic7ZWxzIgorImUgaWYoaz09J2phdmFFbmFibGVkJylxPSd2JztlbHNlIGlmKGs9PSdjb29raWVzRW5hYmxlZCcpcT0nayc7ZWxzZSBpZihrPT0nYnJvd3NlcldpZHRoJylxPSdidyc7ZWxzZSBpZihrPT0nYnJvd3NlckhlaWdodCcpcT0nYmgnO2Vsc2UgaWYoaz09J2Nvbm5lY3Rpb25UeXBlJylxPSdjdCc7ZWxzZSBpZihrPT0naG9tZXBhZ2UnKXE9J2hwJztlbHNlIgorIiBpZihrPT0ncGx1Z2lucycpcT0ncCc7ZWxzZSBpZihrPT0nZXZlbnRzJyl7aWYoZSl2Kz0odj8nLCc6JycpK2U7aWYoZmUpdj1zLmZzKHYsZmUpfWVsc2UgaWYoaz09J2V2ZW50czInKXY9Jyc7ZWxzZSBpZihrPT0nY29udGV4dERhdGEnKXtxcys9cy5zMnEoJ2MnLHNba10sZnYsaywwKTt2PScnfWVsc2UgaWYoaz09J2xpZ2h0UHJvZmlsZUlEJylxIgorIj0nbXRwJztlbHNlIGlmKGs9PSdsaWdodFN0b3JlRm9yU2Vjb25kcycpe3E9J210c3MnO2lmKCFzLmxpZ2h0UHJvZmlsZUlEKXY9Jyd9ZWxzZSBpZihrPT0nbGlnaHRJbmNyZW1lbnRCeScpe3E9J210aSc7aWYoIXMubGlnaHRQcm9maWxlSUQpdj0nJ31lbHNlIGlmKGs9PSdyZXRyaWV2ZUxpZ2h0UHJvZmlsZXMnKXE9J210c3InO2Vsc2UgaWYoaz09IgorIidkZWxldGVMaWdodFByb2ZpbGVzJylxPSdtdHNkJztlbHNlIGlmKGs9PSdyZXRyaWV2ZUxpZ2h0RGF0YScpe2lmKHMucmV0cmlldmVMaWdodFByb2ZpbGVzKXFzKz1zLnMycSgnbXRzJyxzW2tdLGZ2LGssMCk7dj0nJ31lbHNlIGlmKHMubnVtKHgpKXtpZihiPT0ncHJvcCcpcT0nYycrbjtlbHNlIGlmKGI9PSdlVmFyJylxPSd2JytuO2Vsc2UgaWYoIgorImI9PSdsaXN0JylxPSdsJytuO2Vsc2UgaWYoYj09J2hpZXInKXtxPSdoJytuO3Y9cy5mbCh2LDI1NSl9fWlmKHYpcXMrPScmJytzLmFwZShxKSsnPScrKGsuc3Vic3RyaW5nKDAsMykhPSdwZXYnP3MuYXBlKHYpOnYpfX1yZXR1cm4gcXN9O3MubHRkZj1mdW5jdGlvbih0LGgpe3Q9dD90LnRvTG93ZXJDYXNlKCk6Jyc7aD1oP2gudG9Mb3dlckNhc2UoIgorIik6Jyc7dmFyIHFpPWguaW5kZXhPZignPycpLGhpPWguaW5kZXhPZignIycpO2lmKHFpPj0wKXtpZihoaT49MCYmaGk8cWkpcWk9aGk7fWVsc2UgcWk9aGk7aD1xaT49MD9oLnN1YnN0cmluZygwLHFpKTpoO2lmKHQmJmguc3Vic3RyaW5nKGgubGVuZ3RoLSh0Lmxlbmd0aCsxKSk9PScuJyt0KXJldHVybiAxO3JldHVybiAwfTtzLmx0ZWY9ZnVuY3RpIgorIm9uKHQsaCl7dD10P3QudG9Mb3dlckNhc2UoKTonJztoPWg/aC50b0xvd2VyQ2FzZSgpOicnO2lmKHQmJmguaW5kZXhPZih0KT49MClyZXR1cm4gMTtyZXR1cm4gMH07cy5sdD1mdW5jdGlvbihoKXt2YXIgcz10aGlzLGxmdD1zLmxpbmtEb3dubG9hZEZpbGVUeXBlcyxsZWY9cy5saW5rRXh0ZXJuYWxGaWx0ZXJzLGxpZj1zLmxpbmtJbnRlcm5hbEZpIgorImx0ZXJzO2xpZj1saWY/bGlmOnMud2QubG9jYXRpb24uaG9zdG5hbWU7aD1oLnRvTG93ZXJDYXNlKCk7aWYocy50cmFja0Rvd25sb2FkTGlua3MmJmxmdCYmcy5wdChsZnQsJywnLCdsdGRmJyxoKSlyZXR1cm4gJ2QnO2lmKHMudHJhY2tFeHRlcm5hbExpbmtzJiZoLmluZGV4T2YoJyMnKSE9MCYmaC5pbmRleE9mKCdhYm91dDonKSE9MCYmaC5pbmRlIgorInhPZignamF2YXNjcmlwdDonKSE9MCYmKGxlZnx8bGlmKSYmKCFsZWZ8fHMucHQobGVmLCcsJywnbHRlZicsaCkpJiYoIWxpZnx8IXMucHQobGlmLCcsJywnbHRlZicsaCkpKXJldHVybiAnZSc7cmV0dXJuICcnfTtzLmxjPW5ldyBGdW5jdGlvbignZScsJ3ZhciBzPXNfY19pbFsnK3MuX2luKyddLGI9cy5laCh0aGlzLFwib25jbGlja1wiKTtzLmxuIgorIms9dGhpcztzLnQoKTtzLmxuaz0wO2lmKGIpcmV0dXJuIHRoaXNbYl0oZSk7cmV0dXJuIHRydWUnKTtzLmJjcj1mdW5jdGlvbigpe3ZhciBzPXRoaXM7aWYocy5iY3QmJnMuYmNlKXMuYmN0LmRpc3BhdGNoRXZlbnQocy5iY2UpO2lmKHMuYmNmKXtpZih0eXBlb2Yocy5iY2YpPT0nZnVuY3Rpb24nKXMuYmNmKCk7ZWxzZSBpZihzLmJjdCYmcy5iY3QuIgorImhyZWYpcy5kLmxvY2F0aW9uPXMuYmN0LmhyZWZ9cy5iY3Q9cy5iY2U9cy5iY2Y9MH07cy5iYz1uZXcgRnVuY3Rpb24oJ2UnLCdpZihlJiZlLnNfZmUpcmV0dXJuO3ZhciBzPXNfY19pbFsnK3MuX2luKyddLGYsdGNmLHQsbixucnMsYSxoO2lmKHMuZCYmcy5kLmFsbCYmcy5kLmFsbC5jcHBYWWN0bnIpcmV0dXJuO2lmKCFzLmJiYylzLnVzZUZvcmNlIgorImRMaW5rVHJhY2tpbmc9MDtlbHNlIGlmKCFzLnVzZUZvcmNlZExpbmtUcmFja2luZyl7cy5iLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHMuYmMsdHJ1ZSk7cy5iYmM9cy51c2VGb3JjZWRMaW5rVHJhY2tpbmc9MDtyZXR1cm59ZWxzZSBzLmIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIscy5iYyxmYWxzZSk7cy5lbz1lLnNyY0VsIgorImVtZW50P2Uuc3JjRWxlbWVudDplLnRhcmdldDtucnM9cy5ucnM7cy50KCk7cy5lbz0wO2lmKHMubnJzPm5ycyYmcy51c2VGb3JjZWRMaW5rVHJhY2tpbmcmJmUudGFyZ2V0KXthPWUudGFyZ2V0O3doaWxlKGEmJmEhPXMuYiYmYS50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPVwiQVwiJiZhLnRhZ05hbWUudG9VcHBlckNhc2UoKSE9XCJBUkVBXCIpYT1hIgorIi5wYXJlbnROb2RlO2lmKGEpe2g9YS5ocmVmO2lmKGguaW5kZXhPZihcIiNcIik9PTB8fGguaW5kZXhPZihcImFib3V0OlwiKT09MHx8aC5pbmRleE9mKFwiamF2YXNjcmlwdDpcIik9PTApaD0wO3Q9YS50YXJnZXQ7aWYoZS50YXJnZXQuZGlzcGF0Y2hFdmVudCYmaCYmKCF0fHx0PT1cIl9zZWxmXCJ8fHQ9PVwiX3RvcFwifHx0PT1cIl9wYXJlbnQiCisiXCJ8fChzLndkLm5hbWUmJnQ9PXMud2QubmFtZSkpKXt0Y2Y9bmV3IEZ1bmN0aW9uKFwic1wiLFwidmFyIHg7dHJ5e249cy5kLmNyZWF0ZUV2ZW50KFxcXFxcIk1vdXNlRXZlbnRzXFxcXFwiKX1jYXRjaCh4KXtuPW5ldyBNb3VzZUV2ZW50fXJldHVybiBuXCIpO249dGNmKHMpO2lmKG4pe3RjZj1uZXcgRnVuY3Rpb24oXCJuXCIsXCJlXCIsXCJ2YXIiCisiIHg7dHJ5e24uaW5pdE1vdXNlRXZlbnQoXFxcXFwiY2xpY2tcXFxcXCIsZS5idWJibGVzLGUuY2FuY2VsYWJsZSxlLnZpZXcsZS5kZXRhaWwsZS5zY3JlZW5YLGUuc2NyZWVuWSxlLmNsaWVudFgsZS5jbGllbnRZLGUuY3RybEtleSxlLmFsdEtleSxlLnNoaWZ0S2V5LGUubWV0YUtleSxlLmJ1dHRvbixlLnJlbGF0ZWRUYXJnZXQpfWNhdGNoKHgpe24iCisiPTB9cmV0dXJuIG5cIik7bj10Y2YobixlKTtpZihuKXtuLnNfZmU9MTtlLnN0b3BQcm9wYWdhdGlvbigpO2lmIChlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbikge2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7fWUucHJldmVudERlZmF1bHQoKTtzLmJjdD1lLnRhcmdldDtzLmJjZT1ufX19fX0nKTtzLm9oPWZ1bmN0aW9uKG8pe3ZhciBzPXQiCisiaGlzLGw9cy53ZC5sb2NhdGlvbixoPW8uaHJlZj9vLmhyZWY6JycsaSxqLGsscDtpPWguaW5kZXhPZignOicpO2o9aC5pbmRleE9mKCc/Jyk7az1oLmluZGV4T2YoJy8nKTtpZihoJiYoaTwwfHwoaj49MCYmaT5qKXx8KGs+PTAmJmk+aykpKXtwPW8ucHJvdG9jb2wmJm8ucHJvdG9jb2wubGVuZ3RoPjE/by5wcm90b2NvbDoobC5wcm90b2NvbD9sLnAiCisicm90b2NvbDonJyk7aT1sLnBhdGhuYW1lLmxhc3RJbmRleE9mKCcvJyk7aD0ocD9wKycvLyc6JycpKyhvLmhvc3Q/by5ob3N0OihsLmhvc3Q/bC5ob3N0OicnKSkrKGguc3Vic3RyaW5nKDAsMSkhPScvJz9sLnBhdGhuYW1lLnN1YnN0cmluZygwLGk8MD8wOmkpKycvJzonJykraH1yZXR1cm4gaH07cy5vdD1mdW5jdGlvbihvKXt2YXIgdD1vLnRhZ04iCisiYW1lO2lmKG8udGFnVXJufHwoby5zY29wZU5hbWUmJm8uc2NvcGVOYW1lLnRvVXBwZXJDYXNlKCkhPSdIVE1MJykpcmV0dXJuICcnO3Q9dCYmdC50b1VwcGVyQ2FzZT90LnRvVXBwZXJDYXNlKCk6Jyc7aWYodD09J1NIQVBFJyl0PScnO2lmKHQpe2lmKCh0PT0nSU5QVVQnfHx0PT0nQlVUVE9OJykmJm8udHlwZSYmby50eXBlLnRvVXBwZXJDYXNlKXQiCisiPW8udHlwZS50b1VwcGVyQ2FzZSgpO2Vsc2UgaWYoIXQmJm8uaHJlZil0PSdBJzt9cmV0dXJuIHR9O3Mub2lkPWZ1bmN0aW9uKG8pe3ZhciBzPXRoaXMsdD1zLm90KG8pLHAsYyxuPScnLHg9MDtpZih0JiYhby5zX29pZCl7cD1vLnByb3RvY29sO2M9by5vbmNsaWNrO2lmKG8uaHJlZiYmKHQ9PSdBJ3x8dD09J0FSRUEnKSYmKCFjfHwhcHx8cC50b0wiCisib3dlckNhc2UoKS5pbmRleE9mKCdqYXZhc2NyaXB0Jyk8MCkpbj1zLm9oKG8pO2Vsc2UgaWYoYyl7bj1zLnJlcChzLnJlcChzLnJlcChzLnJlcCgnJytjLFwiXFxyXCIsJycpLFwiXFxuXCIsJycpLFwiXFx0XCIsJycpLCcgJywnJyk7eD0yfWVsc2UgaWYodD09J0lOUFVUJ3x8dD09J1NVQk1JVCcpe2lmKG8udmFsdWUpbj1vLnZhbHVlO2Vsc2UgaWYiCisiKG8uaW5uZXJUZXh0KW49by5pbm5lclRleHQ7ZWxzZSBpZihvLnRleHRDb250ZW50KW49by50ZXh0Q29udGVudDt4PTN9ZWxzZSBpZihvLnNyYyYmdD09J0lNQUdFJyluPW8uc3JjO2lmKG4pe28uc19vaWQ9cy5mbChuLDEwMCk7by5zX29pZHQ9eH19cmV0dXJuIG8uc19vaWR9O3MucnFmPWZ1bmN0aW9uKHQsdW4pe3ZhciBzPXRoaXMsZT10LmluZGUiCisieE9mKCc9JyksdT1lPj0wP3Quc3Vic3RyaW5nKDAsZSk6JycscT1lPj0wP3MuZXBhKHQuc3Vic3RyaW5nKGUrMSkpOicnO2lmKHUmJnEmJignLCcrdSsnLCcpLmluZGV4T2YoJywnK3VuKycsJyk+PTApe2lmKHUhPXMudW4mJnMudW4uaW5kZXhPZignLCcpPj0wKXE9JyZ1PScrdStxKycmdT0wJztyZXR1cm4gcX1yZXR1cm4gJyd9O3MucnE9ZnVuY3QiCisiaW9uKHVuKXtpZighdW4pdW49dGhpcy51bjt2YXIgcz10aGlzLGM9dW4uaW5kZXhPZignLCcpLHY9cy5jX3IoJ3Nfc3EnKSxxPScnO2lmKGM8MClyZXR1cm4gcy5wdCh2LCcmJywncnFmJyx1bik7cmV0dXJuIHMucHQodW4sJywnLCdycScsMCl9O3Muc3FwPWZ1bmN0aW9uKHQsYSl7dmFyIHM9dGhpcyxlPXQuaW5kZXhPZignPScpLHE9ZTwwPycnOnMiCisiLmVwYSh0LnN1YnN0cmluZyhlKzEpKTtzLnNxcVtxXT0nJztpZihlPj0wKXMucHQodC5zdWJzdHJpbmcoMCxlKSwnLCcsJ3NxcycscSk7cmV0dXJuIDB9O3Muc3FzPWZ1bmN0aW9uKHVuLHEpe3ZhciBzPXRoaXM7cy5zcXVbdW5dPXE7cmV0dXJuIDB9O3Muc3E9ZnVuY3Rpb24ocSl7dmFyIHM9dGhpcyxrPSdzX3NxJyx2PXMuY19yKGspLHgsYz0wO3MiCisiLnNxcT1uZXcgT2JqZWN0O3Muc3F1PW5ldyBPYmplY3Q7cy5zcXFbcV09Jyc7cy5wdCh2LCcmJywnc3FwJywwKTtzLnB0KHMudW4sJywnLCdzcXMnLHEpO3Y9Jyc7Zm9yKHggaW4gcy5zcXUpaWYoeCYmKCFPYmplY3R8fCFPYmplY3QucHJvdG90eXBlfHwhT2JqZWN0LnByb3RvdHlwZVt4XSkpcy5zcXFbcy5zcXVbeF1dKz0ocy5zcXFbcy5zcXVbeF0iCisiXT8nLCc6JycpK3g7Zm9yKHggaW4gcy5zcXEpaWYoeCYmKCFPYmplY3R8fCFPYmplY3QucHJvdG90eXBlfHwhT2JqZWN0LnByb3RvdHlwZVt4XSkmJnMuc3FxW3hdJiYoeD09cXx8YzwyKSl7dis9KHY/JyYnOicnKStzLnNxcVt4XSsnPScrcy5hcGUoeCk7YysrfXJldHVybiBzLmNfdyhrLHYsMCl9O3Mud2RsPW5ldyBGdW5jdGlvbignZScsJ3ZhciAiCisicz1zX2NfaWxbJytzLl9pbisnXSxyPXRydWUsYj1zLmVoKHMud2QsXCJvbmxvYWRcIiksaSxvLG9jO2lmKGIpcj10aGlzW2JdKGUpO2ZvcihpPTA7aTxzLmQubGlua3MubGVuZ3RoO2krKyl7bz1zLmQubGlua3NbaV07b2M9by5vbmNsaWNrP1wiXCIrby5vbmNsaWNrOlwiXCI7aWYoKG9jLmluZGV4T2YoXCJzX2dzKFwiKTwwfHxvYy5pbmRleE9mKCIKKyJcIi5zX29jKFwiKT49MCkmJm9jLmluZGV4T2YoXCIudGwoXCIpPDApcy5laChvLFwib25jbGlja1wiLDAscy5sYyk7fXJldHVybiByJyk7cy53ZHM9ZnVuY3Rpb24oKXt2YXIgcz10aGlzO2lmKHMuYXB2PjMmJighcy5pc2llfHwhcy5pc21hY3x8cy5hcHY+PTUpKXtpZihzLmImJnMuYi5hdHRhY2hFdmVudClzLmIuYXR0YWNoRXZlbnQoJ29uY2xpYyIKKyJrJyxzLmJjKTtlbHNlIGlmKHMuYiYmcy5iLmFkZEV2ZW50TGlzdGVuZXIpe2lmKHMubiYmKChzLm4udXNlckFnZW50LmluZGV4T2YoJ1dlYktpdCcpPj0wJiZzLmQuY3JlYXRlRXZlbnQpfHwocy5uLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94LzInKT49MCYmcy53ZC5Nb3VzZUV2ZW50KSkpe3MuYmJjPTE7cy51c2VGb3JjZWRMaW5rVHJhY2tpbiIKKyJnPTE7cy5iLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzLmJjLHRydWUpfXMuYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycscy5iYyxmYWxzZSl9ZWxzZSBzLmVoKHMud2QsJ29ubG9hZCcsMCxzLndkbCl9fTtzLnZzPWZ1bmN0aW9uKHgpe3ZhciBzPXRoaXMsdj1zLnZpc2l0b3JTYW1wbGluZyxnPXMudmlzaXRvclNhbXBsaW5nR3JvdXAsaz0ncyIKKyJfdnNuXycrcy51bisoZz8nXycrZzonJyksbj1zLmNfcihrKSxlPW5ldyBEYXRlLHk9ZS5nZXRZZWFyKCk7ZS5zZXRZZWFyKHkrMTArKHk8MTkwMD8xOTAwOjApKTtpZih2KXt2Kj0xMDA7aWYoIW4pe2lmKCFzLmNfdyhrLHgsZSkpcmV0dXJuIDA7bj14fWlmKG4lMTAwMDA+dilyZXR1cm4gMH1yZXR1cm4gMX07cy5keWFzbWY9ZnVuY3Rpb24odCxtKSIKKyJ7aWYodCYmbSYmbS5pbmRleE9mKHQpPj0wKXJldHVybiAxO3JldHVybiAwfTtzLmR5YXNmPWZ1bmN0aW9uKHQsbSl7dmFyIHM9dGhpcyxpPXQ/dC5pbmRleE9mKCc9Jyk6LTEsbix4O2lmKGk+PTAmJm0pe3ZhciBuPXQuc3Vic3RyaW5nKDAsaSkseD10LnN1YnN0cmluZyhpKzEpO2lmKHMucHQoeCwnLCcsJ2R5YXNtZicsbSkpcmV0dXJuIG59cmV0dSIKKyJybiAwfTtzLnVucz1mdW5jdGlvbigpe3ZhciBzPXRoaXMseD1zLmR5bmFtaWNBY2NvdW50U2VsZWN0aW9uLGw9cy5keW5hbWljQWNjb3VudExpc3QsbT1zLmR5bmFtaWNBY2NvdW50TWF0Y2gsbixpO3MudW49cy51bi50b0xvd2VyQ2FzZSgpO2lmKHgmJmwpe2lmKCFtKW09cy53ZC5sb2NhdGlvbi5ob3N0O2lmKCFtLnRvTG93ZXJDYXNlKW09JycrbSIKKyI7bD1sLnRvTG93ZXJDYXNlKCk7bT1tLnRvTG93ZXJDYXNlKCk7bj1zLnB0KGwsJzsnLCdkeWFzZicsbSk7aWYobilzLnVuPW59aT1zLnVuLmluZGV4T2YoJywnKTtzLmZ1bj1pPDA/cy51bjpzLnVuLnN1YnN0cmluZygwLGkpfTtzLnNhPWZ1bmN0aW9uKHVuKXt2YXIgcz10aGlzO2lmKHMudW4mJnMubXBjKCdzYScsYXJndW1lbnRzKSlyZXR1cm47cyIKKyIudW49dW47aWYoIXMub3VuKXMub3VuPXVuO2Vsc2UgaWYoKCcsJytzLm91bisnLCcpLmluZGV4T2YoJywnK3VuKycsJyk8MClzLm91bis9JywnK3VuO3MudW5zKCl9O3MubV9pPWZ1bmN0aW9uKG4sYSl7dmFyIHM9dGhpcyxtLGY9bi5zdWJzdHJpbmcoMCwxKSxyLGwsaTtpZighcy5tX2wpcy5tX2w9bmV3IE9iamVjdDtpZighcy5tX25sKXMubV9ubCIKKyI9bmV3IEFycmF5O209cy5tX2xbbl07aWYoIWEmJm0mJm0uX2UmJiFtLl9pKXMubV9hKG4pO2lmKCFtKXttPW5ldyBPYmplY3QsbS5fYz0nc19tJzttLl9pbj1zLndkLnNfY19pbjttLl9pbD1zLl9pbDttLl9pbFttLl9pbl09bTtzLndkLnNfY19pbisrO20ucz1zO20uX249bjttLl9sPW5ldyBBcnJheSgnX2MnLCdfaW4nLCdfaWwnLCdfaScsJ19lJyIKKyIsJ19kJywnX2RsJywncycsJ24nLCdfcicsJ19nJywnX2cxJywnX3QnLCdfdDEnLCdfeCcsJ194MScsJ19ycycsJ19ycicsJ19sJyk7cy5tX2xbbl09bTtzLm1fbmxbcy5tX25sLmxlbmd0aF09bn1lbHNlIGlmKG0uX3ImJiFtLl9tKXtyPW0uX3I7ci5fbT1tO2w9bS5fbDtmb3IoaT0wO2k8bC5sZW5ndGg7aSsrKWlmKG1bbFtpXV0pcltsW2ldXT1tWyIKKyJsW2ldXTtyLl9pbFtyLl9pbl09cjttPXMubV9sW25dPXJ9aWYoZj09Zi50b1VwcGVyQ2FzZSgpKXNbbl09bTtyZXR1cm4gbX07cy5tX2E9bmV3IEZ1bmN0aW9uKCduJywnZycsJ2UnLCdpZighZylnPVwibV9cIituO3ZhciBzPXNfY19pbFsnK3MuX2luKyddLGM9c1tnK1wiX2NcIl0sbSx4LGY9MDtpZihzLm1wYyhcIm1fYVwiLGFyZ3VtZW50cykpciIKKyJldHVybjtpZighYyljPXMud2RbXCJzX1wiK2crXCJfY1wiXTtpZihjJiZzX2Qpc1tnXT1uZXcgRnVuY3Rpb24oXCJzXCIsc19mdChzX2QoYykpKTt4PXNbZ107aWYoIXgpeD1zLndkW1xcJ3NfXFwnK2ddO2lmKCF4KXg9cy53ZFtnXTttPXMubV9pKG4sMSk7aWYoeCYmKCFtLl9pfHxnIT1cIm1fXCIrbikpe20uX2k9Zj0xO2lmKChcIlwiK3gpLmluZCIKKyJleE9mKFwiZnVuY3Rpb25cIik+PTApeChzKTtlbHNlIHMubV9tKFwieFwiLG4seCxlKX1tPXMubV9pKG4sMSk7aWYobS5fZGwpbS5fZGw9bS5fZD0wO3MuZGx0KCk7cmV0dXJuIGYnKTtzLm1fbT1mdW5jdGlvbih0LG4sZCxlKXt0PSdfJyt0O3ZhciBzPXRoaXMsaSx4LG0sZj0nXycrdCxyPTAsdTtpZihzLm1fbCYmcy5tX25sKWZvcihpPTA7aTxzLiIKKyJtX25sLmxlbmd0aDtpKyspe3g9cy5tX25sW2ldO2lmKCFufHx4PT1uKXttPXMubV9pKHgpO3U9bVt0XTtpZih1KXtpZigoJycrdSkuaW5kZXhPZignZnVuY3Rpb24nKT49MCl7aWYoZCYmZSl1PW1bdF0oZCxlKTtlbHNlIGlmKGQpdT1tW3RdKGQpO2Vsc2UgdT1tW3RdKCl9fWlmKHUpcj0xO3U9bVt0KzFdO2lmKHUmJiFtW2ZdKXtpZigoJycrdSkuaSIKKyJuZGV4T2YoJ2Z1bmN0aW9uJyk+PTApe2lmKGQmJmUpdT1tW3QrMV0oZCxlKTtlbHNlIGlmKGQpdT1tW3QrMV0oZCk7ZWxzZSB1PW1bdCsxXSgpfX1tW2ZdPTE7aWYodSlyPTF9fXJldHVybiByfTtzLm1fbGw9ZnVuY3Rpb24oKXt2YXIgcz10aGlzLGc9cy5tX2RsLGksbztpZihnKWZvcihpPTA7aTxnLmxlbmd0aDtpKyspe289Z1tpXTtpZihvKXMubCIKKyJvYWRNb2R1bGUoby5uLG8udSxvLmQsby5sLG8uZSwxKTtnW2ldPTB9fTtzLmxvYWRNb2R1bGU9ZnVuY3Rpb24obix1LGQsbCxlLGxuKXt2YXIgcz10aGlzLG09MCxpLGcsbz0wLGYxLGYyLGM9cy5oP3MuaDpzLmIsYix0Y2Y7aWYobil7aT1uLmluZGV4T2YoJzonKTtpZihpPj0wKXtnPW4uc3Vic3RyaW5nKGkrMSk7bj1uLnN1YnN0cmluZygwLGkpfSIKKyJlbHNlIGc9XCJtX1wiK247bT1zLm1faShuKX1pZigobHx8KG4mJiFzLm1fYShuLGcpKSkmJnUmJnMuZCYmYyYmcy5kLmNyZWF0ZUVsZW1lbnQpe2lmKGQpe20uX2Q9MTttLl9kbD0xfWlmKGxuKXtpZihzLnNzbCl1PXMucmVwKHUsJ2h0dHA6JywnaHR0cHM6Jyk7aT0nc19zOicrcy5faW4rJzonK24rJzonK2c7Yj0ndmFyIHM9c19jX2lsWycrcy5faSIKKyJuKyddLG89cy5kLmdldEVsZW1lbnRCeUlkKFwiJytpKydcIik7aWYocyYmbyl7aWYoIW8ubCYmcy53ZC4nK2crJyl7by5sPTE7aWYoby5pKWNsZWFyVGltZW91dChvLmkpO28uaT0wO3MubV9hKFwiJytuKydcIixcIicrZysnXCInKyhlPycsXCInK2UrJ1wiJzonJykrJyl9JztmMj1iKydvLmMrKztpZighcy5tYXhEZWxheSlzLm1heERlbGF5PTI1MCIKKyI7aWYoIW8ubCYmby5jPChzLm1heERlbGF5KjIpLzEwMClvLmk9c2V0VGltZW91dChvLmYyLDEwMCl9JztmMT1uZXcgRnVuY3Rpb24oJ2UnLGIrJ30nKTt0Y2Y9bmV3IEZ1bmN0aW9uKCdzJywnYycsJ2knLCd1JywnZjEnLCdmMicsJ3ZhciBlLG89MDt0cnl7bz1zLmQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtpZihvKXtvLnR5cGU9XCJ0ZXh0LyIKKyJqYXZhc2NyaXB0XCI7Jysobj8nby5pZD1pO28uZGVmZXI9dHJ1ZTtvLm9ubG9hZD1vLm9ucmVhZHlzdGF0ZWNoYW5nZT1mMTtvLmYyPWYyO28ubD0wOyc6JycpKydvLnNyYz11O2MuYXBwZW5kQ2hpbGQobyk7Jysobj8nby5jPTA7by5pPXNldFRpbWVvdXQoZjIsMTAwKSc6JycpKyd9fWNhdGNoKGUpe289MH1yZXR1cm4gbycpO289dGNmKHMsYyxpLCIKKyJ1LGYxLGYyKX1lbHNle289bmV3IE9iamVjdDtvLm49bisnOicrZztvLnU9dTtvLmQ9ZDtvLmw9bDtvLmU9ZTtnPXMubV9kbDtpZighZylnPXMubV9kbD1uZXcgQXJyYXk7aT0wO3doaWxlKGk8Zy5sZW5ndGgmJmdbaV0paSsrO2dbaV09b319ZWxzZSBpZihuKXttPXMubV9pKG4pO20uX2U9MX1yZXR1cm4gbX07cy52b2E9ZnVuY3Rpb24odm8scil7diIKKyJhciBzPXRoaXMsbD1zLnZhX2csaSxrLHYseDtmb3IoaT0wO2k8bC5sZW5ndGg7aSsrKXtrPWxbaV07dj12b1trXTtpZih2fHx2b1snIScra10pe2lmKCFyJiYoaz09XCJjb250ZXh0RGF0YVwifHxrPT1cInJldHJpZXZlTGlnaHREYXRhXCIpJiZzW2tdKWZvcih4IGluIHNba10paWYoIXZbeF0pdlt4XT1zW2tdW3hdO3Nba109dn19fTtzLnZvYj1mdSIKKyJuY3Rpb24odm8sb25seVNldCl7dmFyIHM9dGhpcyxsPXMudmFfZyxpLGs7Zm9yKGk9MDtpPGwubGVuZ3RoO2krKyl7az1sW2ldO3ZvW2tdPXNba107aWYoIW9ubHlTZXQmJiF2b1trXSl2b1snIScra109MX19O3MuZGx0PW5ldyBGdW5jdGlvbigndmFyIHM9c19jX2lsWycrcy5faW4rJ10sZD1uZXcgRGF0ZSxpLHZvLGY9MDtpZihzLmRsbClmb3IoaSIKKyI9MDtpPHMuZGxsLmxlbmd0aDtpKyspe3ZvPXMuZGxsW2ldO2lmKHZvKXtpZighcy5tX20oXCJkXCIpfHxkLmdldFRpbWUoKS12by5fdD49cy5tYXhEZWxheSl7cy5kbGxbaV09MDtzLnQodm8pfWVsc2UgZj0xfX1pZihzLmRsaSljbGVhclRpbWVvdXQocy5kbGkpO3MuZGxpPTA7aWYoZil7aWYoIXMuZGxpKXMuZGxpPXNldFRpbWVvdXQocy5kbHQscyIKKyIubWF4RGVsYXkpfWVsc2Ugcy5kbGw9MCcpO3MuZGw9ZnVuY3Rpb24odm8pe3ZhciBzPXRoaXMsZD1uZXcgRGF0ZTtpZighdm8pdm89bmV3IE9iamVjdDtzLnZvYih2byk7dm8uX3Q9ZC5nZXRUaW1lKCk7aWYoIXMuZGxsKXMuZGxsPW5ldyBBcnJheTtzLmRsbFtzLmRsbC5sZW5ndGhdPXZvO2lmKCFzLm1heERlbGF5KXMubWF4RGVsYXk9MjUwO3MuZCIKKyJsdCgpfTtzLl93YWl0aW5nRm9yTWFya2V0aW5nQ2xvdWRWaXNpdG9ySUQgPSBmYWxzZTtzLl9kb25lV2FpdGluZ0Zvck1hcmtldGluZ0Nsb3VkVmlzaXRvcklEID0gZmFsc2U7cy5fbWFya2V0aW5nQ2xvdWRWaXNpdG9ySURDYWxsYmFjaz1mdW5jdGlvbihtYXJrZXRpbmdDbG91ZFZpc2l0b3JJRCkge3ZhciBzPXRoaXM7cy5tYXJrZXRpbmdDbG91ZCIKKyJWaXNpdG9ySUQgPSBtYXJrZXRpbmdDbG91ZFZpc2l0b3JJRDtzLl9kb25lV2FpdGluZ0Zvck1hcmtldGluZ0Nsb3VkVmlzaXRvcklEID0gdHJ1ZTtzLl9jYWxsYmFja1doZW5SZWFkeVRvVHJhY2tDaGVjaygpO307cy5fd2FpdGluZ0ZvckFuYWx5dGljc1Zpc2l0b3JJRCA9IGZhbHNlO3MuX2RvbmVXYWl0aW5nRm9yQW5hbHl0aWNzVmlzaXRvcklEICIKKyI9IGZhbHNlO3MuX2FuYWx5dGljc1Zpc2l0b3JJRENhbGxiYWNrPWZ1bmN0aW9uKGFuYWx5dGljc1Zpc2l0b3JJRCkge3ZhciBzPXRoaXM7cy5hbmFseXRpY3NWaXNpdG9ySUQgPSBhbmFseXRpY3NWaXNpdG9ySUQ7cy5fZG9uZVdhaXRpbmdGb3JBbmFseXRpY3NWaXNpdG9ySUQgPSB0cnVlO3MuX2NhbGxiYWNrV2hlblJlYWR5VG9UcmFja0NoZWNrKCIKKyIpO307cy5fd2FpdGluZ0ZvckF1ZGllbmNlTWFuYWdlckxvY2F0aW9uSGludCA9IGZhbHNlO3MuX2RvbmVXYWl0aW5nRm9yQXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50ID0gZmFsc2U7cy5fYXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50Q2FsbGJhY2s9ZnVuY3Rpb24oYXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50KSB7dmFyIHM9dGhpcztzLiIKKyJhdWRpZW5jZU1hbmFnZXJMb2NhdGlvbkhpbnQgPSBhdWRpZW5jZU1hbmFnZXJMb2NhdGlvbkhpbnQ7cy5fZG9uZVdhaXRpbmdGb3JBdWRpZW5jZU1hbmFnZXJMb2NhdGlvbkhpbnQgPSB0cnVlO3MuX2NhbGxiYWNrV2hlblJlYWR5VG9UcmFja0NoZWNrKCk7fTtzLl93YWl0aW5nRm9yQXVkaWVuY2VNYW5hZ2VyQmxvYiA9IGZhbHNlO3MuX2RvbmVXYSIKKyJpdGluZ0ZvckF1ZGllbmNlTWFuYWdlckJsb2IgPSBmYWxzZTtzLl9hdWRpZW5jZU1hbmFnZXJCbG9iQ2FsbGJhY2s9ZnVuY3Rpb24oYXVkaWVuY2VNYW5hZ2VyQmxvYikge3ZhciBzPXRoaXM7cy5hdWRpZW5jZU1hbmFnZXJCbG9iID0gYXVkaWVuY2VNYW5hZ2VyQmxvYjtzLl9kb25lV2FpdGluZ0ZvckF1ZGllbmNlTWFuYWdlckJsb2IgPSB0cnVlOyIKKyJzLl9jYWxsYmFja1doZW5SZWFkeVRvVHJhY2tDaGVjaygpO307cy5pc1JlYWR5VG9UcmFjaz1mdW5jdGlvbigpIHt2YXIgcz10aGlzLHJlYWR5VG9UcmFjayA9IHRydWUsdmlzaXRvciA9IHMudmlzaXRvcjtpZiAoKHZpc2l0b3IpICYmICh2aXNpdG9yLmlzQWxsb3dlZCgpKSkge2lmICgoIXMuX3dhaXRpbmdGb3JNYXJrZXRpbmdDbG91ZFZpc2l0byIKKyJySUQpICYmICghcy5tYXJrZXRpbmdDbG91ZFZpc2l0b3JJRCkgJiYgKHZpc2l0b3IuZ2V0TWFya2V0aW5nQ2xvdWRWaXNpdG9ySUQpKSB7cy5fd2FpdGluZ0Zvck1hcmtldGluZ0Nsb3VkVmlzaXRvcklEID0gdHJ1ZTtzLm1hcmtldGluZ0Nsb3VkVmlzaXRvcklEID0gdmlzaXRvci5nZXRNYXJrZXRpbmdDbG91ZFZpc2l0b3JJRChbcyxzLl9tYXJrZSIKKyJ0aW5nQ2xvdWRWaXNpdG9ySURDYWxsYmFja10pO2lmIChzLm1hcmtldGluZ0Nsb3VkVmlzaXRvcklEKSB7cy5fZG9uZVdhaXRpbmdGb3JNYXJrZXRpbmdDbG91ZFZpc2l0b3JJRCA9IHRydWU7fX1pZiAoKCFzLl93YWl0aW5nRm9yQW5hbHl0aWNzVmlzaXRvcklEKSAmJiAoIXMuYW5hbHl0aWNzVmlzaXRvcklEKSAmJiAodmlzaXRvci5nZXRBbmFseSIKKyJ0aWNzVmlzaXRvcklEKSkge3MuX3dhaXRpbmdGb3JBbmFseXRpY3NWaXNpdG9ySUQgPSB0cnVlO3MuYW5hbHl0aWNzVmlzaXRvcklEID0gdmlzaXRvci5nZXRBbmFseXRpY3NWaXNpdG9ySUQoW3Mscy5fYW5hbHl0aWNzVmlzaXRvcklEQ2FsbGJhY2tdKTtpZiAocy5hbmFseXRpY3NWaXNpdG9ySUQpIHtzLl9kb25lV2FpdGluZ0ZvckFuYWx5dGljcyIKKyJWaXNpdG9ySUQgPSB0cnVlO319aWYgKCghcy5fd2FpdGluZ0ZvckF1ZGllbmNlTWFuYWdlckxvY2F0aW9uSGludCkgJiYgKCFzLmF1ZGllbmNlTWFuYWdlckxvY2F0aW9uSGludCkgJiYgKHZpc2l0b3IuZ2V0QXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50KSkge3MuX3dhaXRpbmdGb3JBdWRpZW5jZU1hbmFnZXJMb2NhdGlvbkhpbnQgPSB0cnVlOyIKKyJzLmF1ZGllbmNlTWFuYWdlckxvY2F0aW9uSGludCA9IHZpc2l0b3IuZ2V0QXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50KFtzLHMuX2F1ZGllbmNlTWFuYWdlckxvY2F0aW9uSGludENhbGxiYWNrXSk7aWYgKHMuYXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50KSB7cy5fZG9uZVdhaXRpbmdGb3JBdWRpZW5jZU1hbmFnZXJMb2NhdGlvbkhpbnQgPSIKKyIgdHJ1ZTt9fWlmICgoIXMuX3dhaXRpbmdGb3JBdWRpZW5jZU1hbmFnZXJCbG9iKSAmJiAoIXMuYXVkaWVuY2VNYW5hZ2VyQmxvYikgJiYgKHZpc2l0b3IuZ2V0QXVkaWVuY2VNYW5hZ2VyQmxvYikpIHtzLl93YWl0aW5nRm9yQXVkaWVuY2VNYW5hZ2VyQmxvYiA9IHRydWU7cy5hdWRpZW5jZU1hbmFnZXJCbG9iID0gdmlzaXRvci5nZXRBdWRpZW5jZSIKKyJNYW5hZ2VyQmxvYihbcyxzLl9hdWRpZW5jZU1hbmFnZXJCbG9iQ2FsbGJhY2tdKTtpZiAocy5hdWRpZW5jZU1hbmFnZXJCbG9iKSB7cy5fZG9uZVdhaXRpbmdGb3JBdWRpZW5jZU1hbmFnZXJCbG9iID0gdHJ1ZTt9fWlmICgoKHMuX3dhaXRpbmdGb3JNYXJrZXRpbmdDbG91ZFZpc2l0b3JJRCkgICAgICYmICghcy5fZG9uZVdhaXRpbmdGb3JNYXJrZSIKKyJ0aW5nQ2xvdWRWaXNpdG9ySUQpICAgICAmJiAoIXMubWFya2V0aW5nQ2xvdWRWaXNpdG9ySUQpKSB8fCgocy5fd2FpdGluZ0ZvckFuYWx5dGljc1Zpc2l0b3JJRCkgICAgICAgICAgJiYgKCFzLl9kb25lV2FpdGluZ0ZvckFuYWx5dGljc1Zpc2l0b3JJRCkgICAgICAgICAgJiYgKCFzLmFuYWx5dGljc1Zpc2l0b3JJRCkpIHx8KChzLl93YWl0aW5nRiIKKyJvckF1ZGllbmNlTWFuYWdlckxvY2F0aW9uSGludCkgJiYgKCFzLl9kb25lV2FpdGluZ0ZvckF1ZGllbmNlTWFuYWdlckxvY2F0aW9uSGludCkgJiYgKCFzLmF1ZGllbmNlTWFuYWdlckxvY2F0aW9uSGludCkpIHx8KChzLl93YWl0aW5nRm9yQXVkaWVuY2VNYW5hZ2VyQmxvYikgICAgICAgICAmJiAoIXMuX2RvbmVXYWl0aW5nRm9yQXVkaWVuY2VNYSIKKyJuYWdlckJsb2IpICAgICAgICAgJiYgKCFzLmF1ZGllbmNlTWFuYWdlckJsb2IpKSkge3JlYWR5VG9UcmFjayA9IGZhbHNlO319cmV0dXJuIHJlYWR5VG9UcmFjazt9O3MuX2NhbGxiYWNrV2hlblJlYWR5VG9UcmFja1F1ZXVlID0gbnVsbDtzLl9jYWxsYmFja1doZW5SZWFkeVRvVHJhY2tJbnRlcnZhbCA9IDA7cy5jYWxsYmFja1doZW5SZWFkeVRvVCIKKyJyYWNrPWZ1bmN0aW9uKGNhbGxiYWNrVGhpcyxjYWxsYmFjayxhcmdzKSB7dmFyIHM9dGhpcyxjYWxsYmFja0luZm87Y2FsbGJhY2tJbmZvID0ge307Y2FsbGJhY2tJbmZvLmNhbGxiYWNrVGhpcyA9IGNhbGxiYWNrVGhpcztjYWxsYmFja0luZm8uY2FsbGJhY2sgICAgID0gY2FsbGJhY2s7Y2FsbGJhY2tJbmZvLmFyZ3MgICAgICAgICA9IGFyZ3M7aSIKKyJmIChzLl9jYWxsYmFja1doZW5SZWFkeVRvVHJhY2tRdWV1ZSA9PSBudWxsKSB7cy5fY2FsbGJhY2tXaGVuUmVhZHlUb1RyYWNrUXVldWUgPSBbXTt9cy5fY2FsbGJhY2tXaGVuUmVhZHlUb1RyYWNrUXVldWUucHVzaChjYWxsYmFja0luZm8pO2lmIChzLl9jYWxsYmFja1doZW5SZWFkeVRvVHJhY2tJbnRlcnZhbCA9PSAwKSB7cy5fY2FsbGJhY2tXaCIKKyJlblJlYWR5VG9UcmFja0ludGVydmFsID0gc2V0SW50ZXJ2YWwocy5fY2FsbGJhY2tXaGVuUmVhZHlUb1RyYWNrQ2hlY2ssMTAwKTt9fTtzLl9jYWxsYmFja1doZW5SZWFkeVRvVHJhY2tDaGVjaz1uZXcgRnVuY3Rpb24oJ3ZhciBzPXNfY19pbFsnK3MuX2luKyddLGNhbGxiYWNrTnVtLGNhbGxiYWNrSW5mbztpZiAocy5pc1JlYWR5VG9UcmFjaygpKSIKKyIge2lmIChzLl9jYWxsYmFja1doZW5SZWFkeVRvVHJhY2tJbnRlcnZhbCkge2NsZWFySW50ZXJ2YWwocy5fY2FsbGJhY2tXaGVuUmVhZHlUb1RyYWNrSW50ZXJ2YWwpO3MuX2NhbGxiYWNrV2hlblJlYWR5VG9UcmFja0ludGVydmFsID0gMDt9aWYgKHMuX2NhbGxiYWNrV2hlblJlYWR5VG9UcmFja1F1ZXVlICE9IG51bGwpIHt3aGlsZSAocy5fY2FsbCIKKyJiYWNrV2hlblJlYWR5VG9UcmFja1F1ZXVlLmxlbmd0aCA+IDApIHtjYWxsYmFja0luZm8gPSBzLl9jYWxsYmFja1doZW5SZWFkeVRvVHJhY2tRdWV1ZS5zaGlmdCgpO2NhbGxiYWNrSW5mby5jYWxsYmFjay5hcHBseShjYWxsYmFja0luZm8uY2FsbGJhY2tUaGlzLGNhbGxiYWNrSW5mby5hcmdzKTt9fX0nKTtzLl9oYW5kbGVOb3RSZWFkeVRvVHJhYyIKKyJrPWZ1bmN0aW9uKHZhcmlhYmxlT3ZlcnJpZGVzKSB7dmFyIHM9dGhpcyxhcmdzLHZhcktleSx2YXJpYWJsZU92ZXJyaWRlc0NvcHkgPSBudWxsLHNldFZhcmlhYmxlcyA9IG51bGw7aWYgKCFzLmlzUmVhZHlUb1RyYWNrKCkpIHthcmdzID0gW107aWYgKHZhcmlhYmxlT3ZlcnJpZGVzICE9IG51bGwpIHt2YXJpYWJsZU92ZXJyaWRlc0NvcHkgPSB7fSIKKyI7Zm9yICh2YXJLZXkgaW4gdmFyaWFibGVPdmVycmlkZXMpIHt2YXJpYWJsZU92ZXJyaWRlc0NvcHlbdmFyS2V5XSA9IHZhcmlhYmxlT3ZlcnJpZGVzW3ZhcktleV07fX1zZXRWYXJpYWJsZXMgPSB7fTtzLnZvYihzZXRWYXJpYWJsZXMsdHJ1ZSk7YXJncy5wdXNoKHZhcmlhYmxlT3ZlcnJpZGVzQ29weSk7YXJncy5wdXNoKHNldFZhcmlhYmxlcyk7cyIKKyIuY2FsbGJhY2tXaGVuUmVhZHlUb1RyYWNrKHMscy50cmFjayxhcmdzKTtyZXR1cm4gdHJ1ZTt9cmV0dXJuIGZhbHNlO307cy5nZmlkPWZ1bmN0aW9uKCl7dmFyIHM9dGhpcyxkPScwMTIzNDU2Nzg5QUJDREVGJyxrPSdzX2ZpZCcsZmlkPXMuY19yKGspLGg9JycsbD0nJyxpLGosbT04LG49NCxlPW5ldyBEYXRlLHk7aWYoIWZpZHx8ZmlkLmluZGV4TyIKKyJmKCctJyk8MCl7Zm9yKGk9MDtpPDE2O2krKyl7aj1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqbSk7aCs9ZC5zdWJzdHJpbmcoaixqKzEpO2o9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKm4pO2wrPWQuc3Vic3RyaW5nKGosaisxKTttPW49MTZ9ZmlkPWgrJy0nK2w7fXk9ZS5nZXRZZWFyKCk7ZS5zZXRZZWFyKHkrMisoeTwxOTAwPzE5MDA6MCkpOyIKKyJpZighcy5jX3coayxmaWQsZSkpZmlkPTA7cmV0dXJuIGZpZH07cy50cmFjaz1zLnQ9ZnVuY3Rpb24odm8sc2V0VmFyaWFibGVzKXt2YXIgcz10aGlzLG5vdFJlYWR5VG9UcmFjayx0cms9MSx0bT1uZXcgRGF0ZSxzZWQ9TWF0aCYmTWF0aC5yYW5kb20/TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMDAwMDAwMDAwMDAwKTp0bS5nZXRUaW1lKCkscyIKKyJlc3M9J3MnK01hdGguZmxvb3IodG0uZ2V0VGltZSgpLzEwODAwMDAwKSUxMCtzZWQseT10bS5nZXRZZWFyKCksdnQ9dG0uZ2V0RGF0ZSgpKycvJyt0bS5nZXRNb250aCgpKycvJysoeTwxOTAwP3krMTkwMDp5KSsnICcrdG0uZ2V0SG91cnMoKSsnOicrdG0uZ2V0TWludXRlcygpKyc6Jyt0bS5nZXRTZWNvbmRzKCkrJyAnK3RtLmdldERheSgpKycgJyIKKyIrdG0uZ2V0VGltZXpvbmVPZmZzZXQoKSx0Y2YsdGZzPXMuZ3RmcygpLHRhPS0xLHE9JycscXM9JycsY29kZT0nJyx2Yj1uZXcgT2JqZWN0O2lmIChzLnZpc2l0b3IpIHtpZiAocy52aXNpdG9yLmdldEF1dGhTdGF0ZSkge3MuYXV0aFN0YXRlID0gcy52aXNpdG9yLmdldEF1dGhTdGF0ZSgpO31pZiAoKCFzLnN1cHBsZW1lbnRhbERhdGFJRCkgJiYgKCIKKyJzLnZpc2l0b3IuZ2V0U3VwcGxlbWVudGFsRGF0YUlEKSkge3Muc3VwcGxlbWVudGFsRGF0YUlEID0gcy52aXNpdG9yLmdldFN1cHBsZW1lbnRhbERhdGFJRChcIkFwcE1lYXN1cmVtZW50OlwiICsgcy5faW4sKHMuZXhwZWN0U3VwcGxlbWVudGFsRGF0YSA/IGZhbHNlIDogdHJ1ZSkpO319aWYocy5tcGMoJ3QnLGFyZ3VtZW50cykpcmV0dXJuO3MuZyIKKyJsKHMudmxfZyk7cy51bnMoKTtzLm1fbGwoKTtub3RSZWFkeVRvVHJhY2sgPSBzLl9oYW5kbGVOb3RSZWFkeVRvVHJhY2sodm8pO2lmICghbm90UmVhZHlUb1RyYWNrKSB7aWYgKHNldFZhcmlhYmxlcykge3Mudm9hKHNldFZhcmlhYmxlcyk7fWlmKCFzLnRkKXt2YXIgdGw9dGZzLmxvY2F0aW9uLGEsbyxpLHg9JycsYz0nJyx2PScnLHA9JycsYnc9JyIKKyInLGJoPScnLGo9JzEuMCcsaz1zLmNfdygnc19jYycsJ3RydWUnLDApPydZJzonTicsaHA9JycsY3Q9JycscG49MCxwcztpZihTdHJpbmcmJlN0cmluZy5wcm90b3R5cGUpe2o9JzEuMSc7aWYoai5tYXRjaCl7aj0nMS4yJztpZih0bS5zZXRVVENEYXRlKXtqPScxLjMnO2lmKHMuaXNpZSYmcy5pc21hYyYmcy5hcHY+PTUpaj0nMS40JztpZihwbi50byIKKyJQcmVjaXNpb24pe2o9JzEuNSc7YT1uZXcgQXJyYXk7aWYoYS5mb3JFYWNoKXtqPScxLjYnO2k9MDtvPW5ldyBPYmplY3Q7dGNmPW5ldyBGdW5jdGlvbignbycsJ3ZhciBlLGk9MDt0cnl7aT1uZXcgSXRlcmF0b3Iobyl9Y2F0Y2goZSl7fXJldHVybiBpJyk7aT10Y2Yobyk7aWYoaSYmaS5uZXh0KXtqPScxLjcnO2lmKGEucmVkdWNlKXtqPScxLjgnOyIKKyJpZihqLnRyaW0pe2o9JzEuOC4xJztpZihEYXRlLnBhcnNlKXtqPScxLjguMic7aWYoT2JqZWN0LmNyZWF0ZSlqPScxLjguNSd9fX19fX19fX1pZihzLmFwdj49NCl4PXNjcmVlbi53aWR0aCsneCcrc2NyZWVuLmhlaWdodDtpZihzLmlzbnN8fHMuaXNvcGVyYSl7aWYocy5hcHY+PTMpe3Y9cy5uLmphdmFFbmFibGVkKCk/J1knOidOJztpZihzLmFwdiIKKyI+PTQpe2M9c2NyZWVuLnBpeGVsRGVwdGg7Ync9cy53ZC5pbm5lcldpZHRoO2JoPXMud2QuaW5uZXJIZWlnaHR9fXMucGw9cy5uLnBsdWdpbnN9ZWxzZSBpZihzLmlzaWUpe2lmKHMuYXB2Pj00KXt2PXMubi5qYXZhRW5hYmxlZCgpPydZJzonTic7Yz1zY3JlZW4uY29sb3JEZXB0aDtpZihzLmFwdj49NSl7Ync9cy5kLmRvY3VtZW50RWxlbWVudC5vZiIKKyJmc2V0V2lkdGg7Ymg9cy5kLmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQ7aWYoIXMuaXNtYWMmJnMuYil7dGNmPW5ldyBGdW5jdGlvbigncycsJ3RsJywndmFyIGUsaHA9MDt0cnl7cy5iLmFkZEJlaGF2aW9yKFwiI2RlZmF1bHQjaG9tZVBhZ2VcIik7aHA9cy5iLmlzSG9tZVBhZ2UodGwpP1wiWVwiOlwiTlwifWNhdGNoKGUpe31yZXR1cm4gaCIKKyJwJyk7aHA9dGNmKHMsdGwpO3RjZj1uZXcgRnVuY3Rpb24oJ3MnLCd2YXIgZSxjdD0wO3RyeXtzLmIuYWRkQmVoYXZpb3IoXCIjZGVmYXVsdCNjbGllbnRDYXBzXCIpO2N0PXMuYi5jb25uZWN0aW9uVHlwZX1jYXRjaChlKXt9cmV0dXJuIGN0Jyk7Y3Q9dGNmKHMpfX19ZWxzZSByPScnfWlmKHMucGwpd2hpbGUocG48cy5wbC5sZW5ndGgmJnBuPDMwKSIKKyJ7cHM9cy5mbChzLnBsW3BuXS5uYW1lLDEwMCkrJzsnO2lmKHAuaW5kZXhPZihwcyk8MClwKz1wcztwbisrfXMucmVzb2x1dGlvbj14O3MuY29sb3JEZXB0aD1jO3MuamF2YXNjcmlwdFZlcnNpb249ajtzLmphdmFFbmFibGVkPXY7cy5jb29raWVzRW5hYmxlZD1rO3MuYnJvd3NlcldpZHRoPWJ3O3MuYnJvd3NlckhlaWdodD1iaDtzLmNvbm5lY3RpbyIKKyJuVHlwZT1jdDtzLmhvbWVwYWdlPWhwO3MucGx1Z2lucz1wO3MudGQ9MX1pZih2byl7cy52b2IodmIpO3Mudm9hKHZvKX1pZighcy5hbmFseXRpY3NWaXNpdG9ySUQmJiFzLm1hcmtldGluZ0Nsb3VkVmlzaXRvcklEKXMuZmlkPXMuZ2ZpZCgpO2lmKCh2byYmdm8uX3QpfHwhcy5tX20oJ2QnKSl7aWYocy51c2VQbHVnaW5zKXMuZG9QbHVnaW5zKHMpOyIKKyJpZighcy5hYm9ydCl7dmFyIGw9cy53ZC5sb2NhdGlvbixyPXRmcy5kb2N1bWVudC5yZWZlcnJlcjtpZighcy5wYWdlVVJMKXMucGFnZVVSTD1sLmhyZWY/bC5ocmVmOmw7aWYoIXMucmVmZXJyZXImJiFzLl8xX3JlZmVycmVyKXMucmVmZXJyZXI9cjtzLl8xX3JlZmVycmVyPTE7cy5tX20oJ2cnKTtpZihzLmxua3x8cy5lbyl7dmFyIG89cy5lbz9zLiIKKyJlbzpzLmxuayxwPXMucGFnZU5hbWUsdz0xLHQ9cy5vdChvKSxuPXMub2lkKG8pLHg9by5zX29pZHQsaCxsLGksb2M7aWYocy5lbyYmbz09cy5lbyl7d2hpbGUobyYmIW4mJnQhPSdCT0RZJyl7bz1vLnBhcmVudEVsZW1lbnQ/by5wYXJlbnRFbGVtZW50Om8ucGFyZW50Tm9kZTtpZihvKXt0PXMub3Qobyk7bj1zLm9pZChvKTt4PW8uc19vaWR0fX1pZiIKKyIoIW58fHQ9PSdCT0RZJylvPScnO2lmKG8pe29jPW8ub25jbGljaz8nJytvLm9uY2xpY2s6Jyc7aWYoKG9jLmluZGV4T2YoJ3NfZ3MoJyk+PTAmJm9jLmluZGV4T2YoJy5zX29jKCcpPDApfHxvYy5pbmRleE9mKCcudGwoJyk+PTApbz0wfX1pZihvKXtpZihuKXRhPW8udGFyZ2V0O2g9cy5vaChvKTtpPWguaW5kZXhPZignPycpO2g9cy5saW5rTGVhdiIKKyJlUXVlcnlTdHJpbmd8fGk8MD9oOmguc3Vic3RyaW5nKDAsaSk7bD1zLmxpbmtOYW1lO3Q9cy5saW5rVHlwZT9zLmxpbmtUeXBlLnRvTG93ZXJDYXNlKCk6cy5sdChoKTtpZih0JiYoaHx8bCkpe3MucGU9J2xua18nKyh0PT0nZCd8fHQ9PSdlJz90OidvJyk7cy5wZXYxPShoP3MuYXBlKGgpOicnKTtzLnBldjI9KGw/cy5hcGUobCk6JycpfWVsc2UgdCIKKyJyaz0wO2lmKHMudHJhY2tJbmxpbmVTdGF0cyl7aWYoIXApe3A9cy5wYWdlVVJMO3c9MH10PXMub3Qobyk7aT1vLnNvdXJjZUluZGV4O2lmKG8uZGF0YXNldCYmby5kYXRhc2V0LnNPYmplY3RJZCl7cy53ZC5zX29iamVjdElEPW8uZGF0YXNldC5zT2JqZWN0SWQ7fWVsc2UgaWYoby5nZXRBdHRyaWJ1dGUmJm8uZ2V0QXR0cmlidXRlKCdkYXRhLXMtbyIKKyJiamVjdC1pZCcpKXtzLndkLnNfb2JqZWN0SUQ9by5nZXRBdHRyaWJ1dGUoJ2RhdGEtcy1vYmplY3QtaWQnKTt9ZWxzZSBpZihzLnVzZUZvcmNlZExpbmtUcmFja2luZyl7cy53ZC5zX29iamVjdElEPScnO29jPW8ub25jbGljaz8nJytvLm9uY2xpY2s6Jyc7aWYob2Mpe3ZhciBvY2I9b2MuaW5kZXhPZignc19vYmplY3RJRCcpLG9jZSxvY3Esb2N4OyIKKyJpZihvY2I+PTApe29jYis9MTA7d2hpbGUob2NiPG9jLmxlbmd0aCYmKFwiPSBcXHRcXHJcXG5cIikuaW5kZXhPZihvYy5jaGFyQXQob2NiKSk+PTApb2NiKys7aWYob2NiPG9jLmxlbmd0aCl7b2NlPW9jYjtvY3E9b2N4PTA7d2hpbGUob2NlPG9jLmxlbmd0aCYmKG9jLmNoYXJBdChvY2UpIT0nOyd8fG9jcSkpe2lmKG9jcSl7aWYob2MuY2hhckF0KCIKKyJvY2UpPT1vY3EmJiFvY3gpb2NxPTA7ZWxzZSBpZihvYy5jaGFyQXQob2NlKT09XCJcXFxcXCIpb2N4PSFvY3g7ZWxzZSBvY3g9MDt9ZWxzZXtvY3E9b2MuY2hhckF0KG9jZSk7aWYob2NxIT0nXCInJiZvY3EhPVwiJ1wiKW9jcT0wfW9jZSsrO31vYz1vYy5zdWJzdHJpbmcob2NiLG9jZSk7aWYob2Mpe28uc19zb2lkPW5ldyBGdW5jdGlvbigncycsJyIKKyJ2YXIgZTt0cnl7cy53ZC5zX29iamVjdElEPScrb2MrJ31jYXRjaChlKXt9Jyk7by5zX3NvaWQocyl9fX19fWlmKHMuZ2coJ29iamVjdElEJykpe249cy5nZygnb2JqZWN0SUQnKTt4PTE7aT0xfWlmKHAmJm4mJnQpcXM9JyZwaWQ9JytzLmFwZShzLmZsKHAsMjU1KSkrKHc/JyZwaWR0PScrdzonJykrJyZvaWQ9JytzLmFwZShzLmZsKG4sMTAwKSkrKCIKKyJ4Pycmb2lkdD0nK3g6JycpKycmb3Q9JytzLmFwZSh0KSsoaT8nJm9pPScraTonJyl9fWVsc2UgdHJrPTB9aWYodHJrfHxxcyl7cy5zYW1wbGVkPXMudnMoc2VkKTtpZih0cmspe2lmKHMuc2FtcGxlZCljb2RlPXMubXIoc2VzcywodnQ/JyZ0PScrcy5hcGUodnQpOicnKStzLmhhdigpK3ErKHFzP3FzOnMucnEoKSksMCx0YSk7cXM9Jyc7cy5tX20oJyIKKyJ0Jyk7aWYocy5wX3Ipcy5wX3IoKTtzLnJlZmVycmVyPXMubGlnaHRQcm9maWxlSUQ9cy5yZXRyaWV2ZUxpZ2h0UHJvZmlsZXM9cy5kZWxldGVMaWdodFByb2ZpbGVzPScnfXMuc3EocXMpfX19ZWxzZSBzLmRsKHZvKTtpZih2bylzLnZvYSh2YiwxKTt9cy5hYm9ydD0wO3Muc3VwcGxlbWVudGFsRGF0YUlEPXMucGFnZVVSTFJlc3Q9cy5sbms9cy5lbyIKKyI9cy5saW5rTmFtZT1zLmxpbmtUeXBlPXMud2Quc19vYmplY3RJRD1zLnBwdT1zLnBlPXMucGV2MT1zLnBldjI9cy5wZXYzPScnO2lmKHMucGcpcy53ZC5zX2xuaz1zLndkLnNfZW89cy53ZC5zX2xpbmtOYW1lPXMud2Quc19saW5rVHlwZT0nJztyZXR1cm4gY29kZX07cy50cmFja0xpbms9cy50bD1mdW5jdGlvbihvLHQsbix2byxmKXt2YXIgcz10aCIKKyJpcztzLmxuaz1vO3MubGlua1R5cGU9dDtzLmxpbmtOYW1lPW47aWYoZil7cy5iY3Q9bztzLmJjZj1mfXMudCh2byl9O3MudHJhY2tMaWdodD1mdW5jdGlvbihwLHNzLGksdm8pe3ZhciBzPXRoaXM7cy5saWdodFByb2ZpbGVJRD1wO3MubGlnaHRTdG9yZUZvclNlY29uZHM9c3M7cy5saWdodEluY3JlbWVudEJ5PWk7cy50KHZvKX07cy5zZXRUYWdDbyIKKyJudGFpbmVyPWZ1bmN0aW9uKG4pe3ZhciBzPXRoaXMsbD1zLndkLnNfY19pbCxpLHQseCx5O3MudGNuPW47aWYobClmb3IoaT0wO2k8bC5sZW5ndGg7aSsrKXt0PWxbaV07aWYodCYmdC5fYz09J3NfbCcmJnQudGFnQ29udGFpbmVyTmFtZT09bil7cy52b2EodCk7aWYodC5sbXEpZm9yKGk9MDtpPHQubG1xLmxlbmd0aDtpKyspe3g9dC5sbXFbaV07eSIKKyI9J21fJyt4Lm47aWYoIXNbeV0mJiFzW3krJ19jJ10pe3NbeV09dFt5XTtzW3krJ19jJ109dFt5KydfYyddfXMubG9hZE1vZHVsZSh4Lm4seC51LHguZCl9aWYodC5tbClmb3IoeCBpbiB0Lm1sKWlmKHNbeF0pe3k9c1t4XTt4PXQubWxbeF07Zm9yKGkgaW4geClpZighT2JqZWN0LnByb3RvdHlwZVtpXSl7aWYodHlwZW9mKHhbaV0pIT0nZnVuY3RpbyIKKyJuJ3x8KCcnK3hbaV0pLmluZGV4T2YoJ3NfY19pbCcpPDApeVtpXT14W2ldfX1pZih0Lm1tcSlmb3IoaT0wO2k8dC5tbXEubGVuZ3RoO2krKyl7eD10Lm1tcVtpXTtpZihzW3gubV0pe3k9c1t4Lm1dO2lmKHlbeC5mXSYmdHlwZW9mKHlbeC5mXSk9PSdmdW5jdGlvbicpe2lmKHguYSl5W3guZl0uYXBwbHkoeSx4LmEpO2Vsc2UgeVt4LmZdLmFwcGx5KCIKKyJ5KX19fWlmKHQudHEpZm9yKGk9MDtpPHQudHEubGVuZ3RoO2krKylzLnQodC50cVtpXSk7dC5zPXM7cmV0dXJufX19O3Mud2Q9d2luZG93O3Muc3NsPShzLndkLmxvY2F0aW9uLnByb3RvY29sLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignaHR0cHMnKT49MCk7cy5kPWRvY3VtZW50O3MuYj1zLmQuYm9keTtpZihzLmQuZ2V0RWxlbWVudHNCeVRhZ05hbSIKKyJlKXtzLmg9cy5kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdIRUFEJyk7aWYocy5oKXMuaD1zLmhbMF19cy5uPW5hdmlnYXRvcjtzLnU9cy5uLnVzZXJBZ2VudDtzLm5zNj1zLnUuaW5kZXhPZignTmV0c2NhcGU2LycpO3ZhciBhcG49cy5uLmFwcE5hbWUsdj1zLm4uYXBwVmVyc2lvbixpZT12LmluZGV4T2YoJ01TSUUgJyksbz1zLnUuaW5kZXhPZignTyIKKyJwZXJhICcpLGk7aWYodi5pbmRleE9mKCdPcGVyYScpPj0wfHxvPjApYXBuPSdPcGVyYSc7cy5pc2llPShhcG49PSdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInKTtzLmlzbnM9KGFwbj09J05ldHNjYXBlJyk7cy5pc29wZXJhPShhcG49PSdPcGVyYScpO3MuaXNtYWM9KHMudS5pbmRleE9mKCdNYWMnKT49MCk7aWYobz4wKXMuYXB2PXBhcnNlRiIKKyJsb2F0KHMudS5zdWJzdHJpbmcobys2KSk7ZWxzZSBpZihpZT4wKXtzLmFwdj1wYXJzZUludChpPXYuc3Vic3RyaW5nKGllKzUpKTtpZihzLmFwdj4zKXMuYXB2PXBhcnNlRmxvYXQoaSl9ZWxzZSBpZihzLm5zNj4wKXMuYXB2PXBhcnNlRmxvYXQocy51LnN1YnN0cmluZyhzLm5zNisxMCkpO2Vsc2Ugcy5hcHY9cGFyc2VGbG9hdCh2KTtzLmVtPTA7aSIKKyJmKHMuZW0udG9QcmVjaXNpb24pcy5lbT0zO2Vsc2UgaWYoU3RyaW5nLmZyb21DaGFyQ29kZSl7aT1lc2NhcGUoU3RyaW5nLmZyb21DaGFyQ29kZSgyNTYpKS50b1VwcGVyQ2FzZSgpO3MuZW09KGk9PSclQzQlODAnPzI6KGk9PSclVTAxMDAnPzE6MCkpfWlmKHMub3VuKXMuc2Eocy5vdW4pO3Muc2EodW4pO3MudmxfbD0nc3VwcGxlbWVudGFsRGF0YSIKKyJJRCx0aW1lc3RhbXAsZHluYW1pY1ZhcmlhYmxlUHJlZml4LHZpc2l0b3JJRCxtYXJrZXRpbmdDbG91ZFZpc2l0b3JJRCxhbmFseXRpY3NWaXNpdG9ySUQsYXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50LGZpZCx2bWssdmlzaXRvck1pZ3JhdGlvbktleSx2aXNpdG9yTWlncmF0aW9uU2VydmVyLHZpc2l0b3JNaWdyYXRpb25TZXJ2ZXJTZWN1cmUscCIKKyJwdSxjaGFyU2V0LHZpc2l0b3JOYW1lc3BhY2UsY29va2llRG9tYWluUGVyaW9kcyxjb29raWVMaWZldGltZSxwYWdlTmFtZSxwYWdlVVJMLHJlZmVycmVyLGNvbnRleHREYXRhLGN1cnJlbmN5Q29kZSxsaWdodFByb2ZpbGVJRCxsaWdodFN0b3JlRm9yU2Vjb25kcyxsaWdodEluY3JlbWVudEJ5LHJldHJpZXZlTGlnaHRQcm9maWxlcyxkZWxldGVMaSIKKyJnaHRQcm9maWxlcyxyZXRyaWV2ZUxpZ2h0RGF0YSc7cy52YV9sPXMuc3Aocy52bF9sLCcsJyk7cy52bF9tcj1zLnZsX209J3RpbWVzdGFtcCxjaGFyU2V0LHZpc2l0b3JOYW1lc3BhY2UsY29va2llRG9tYWluUGVyaW9kcyxjb29raWVMaWZldGltZSxjb250ZXh0RGF0YSxsaWdodFByb2ZpbGVJRCxsaWdodFN0b3JlRm9yU2Vjb25kcyxsaWdodEluYyIKKyJyZW1lbnRCeSc7cy52bF90PXMudmxfbCsnLHZhcmlhYmxlUHJvdmlkZXIsY2hhbm5lbCxzZXJ2ZXIscGFnZVR5cGUsdHJhbnNhY3Rpb25JRCxwdXJjaGFzZUlELGNhbXBhaWduLHN0YXRlLHppcCxldmVudHMsZXZlbnRzMixwcm9kdWN0cyxhdWRpZW5jZU1hbmFnZXJCbG9iLGF1dGhTdGF0ZSxsaW5rTmFtZSxsaW5rVHlwZSc7dmFyIG47Zm9yKG49MSIKKyI7bjw9NzU7bisrKXtzLnZsX3QrPScscHJvcCcrbisnLGVWYXInK247cy52bF9tKz0nLHByb3AnK24rJyxlVmFyJytufWZvcihuPTE7bjw9NTtuKyspcy52bF90Kz0nLGhpZXInK247Zm9yKG49MTtuPD0zO24rKylzLnZsX3QrPScsbGlzdCcrbjtzLnZhX209cy5zcChzLnZsX20sJywnKTtzLnZsX2wyPScsdG50LHBlLHBldjEscGV2MixwZXYzLHJlcyIKKyJvbHV0aW9uLGNvbG9yRGVwdGgsamF2YXNjcmlwdFZlcnNpb24samF2YUVuYWJsZWQsY29va2llc0VuYWJsZWQsYnJvd3NlcldpZHRoLGJyb3dzZXJIZWlnaHQsY29ubmVjdGlvblR5cGUsaG9tZXBhZ2UscGFnZVVSTFJlc3QscGx1Z2lucyc7cy52bF90Kz1zLnZsX2wyO3MudmFfdD1zLnNwKHMudmxfdCwnLCcpO3MudmxfZz1zLnZsX3QrJyx0cmFjayIKKyJpbmdTZXJ2ZXIsdHJhY2tpbmdTZXJ2ZXJTZWN1cmUsdHJhY2tpbmdTZXJ2ZXJCYXNlLGZwQ29va2llRG9tYWluUGVyaW9kcyxkaXNhYmxlQnVmZmVyZWRSZXF1ZXN0cyxtb2JpbGUsdmlzaXRvclNhbXBsaW5nLHZpc2l0b3JTYW1wbGluZ0dyb3VwLGR5bmFtaWNBY2NvdW50U2VsZWN0aW9uLGR5bmFtaWNBY2NvdW50TGlzdCxkeW5hbWljQWNjb3VudCIKKyJNYXRjaCx0cmFja0Rvd25sb2FkTGlua3MsdHJhY2tFeHRlcm5hbExpbmtzLHRyYWNrSW5saW5lU3RhdHMsbGlua0xlYXZlUXVlcnlTdHJpbmcsbGlua0Rvd25sb2FkRmlsZVR5cGVzLGxpbmtFeHRlcm5hbEZpbHRlcnMsbGlua0ludGVybmFsRmlsdGVycyxsaW5rVHJhY2tWYXJzLGxpbmtUcmFja0V2ZW50cyxsaW5rTmFtZXMsbG5rLGVvLGxpZ2h0VCIKKyJyYWNrVmFycyxfMV9yZWZlcnJlcix1bic7cy52YV9nPXMuc3Aocy52bF9nLCcsJyk7cy5wZz1wZztzLmdsKHMudmxfZyk7cy5jb250ZXh0RGF0YT1uZXcgT2JqZWN0O3MucmV0cmlldmVMaWdodERhdGE9bmV3IE9iamVjdDtpZighc3Mpcy53ZHMoKTtpZihwZyl7cy53ZC5zX2NvPWZ1bmN0aW9uKG8pe3JldHVybiBvfTtzLndkLnNfZ3M9ZnVuY3RpbyIKKyJuKHVuKXtzX2dpKHVuLDEsMSkudCgpfTtzLndkLnNfZGM9ZnVuY3Rpb24odW4pe3NfZ2kodW4sMSkudCgpfX0iLAp3PXdpbmRvdyxsPXcuc19jX2lsLG49bmF2aWdhdG9yLHU9bi51c2VyQWdlbnQsdj1uLmFwcFZlcnNpb24sZT12LmluZGV4T2YoJ01TSUUgJyksbT11LmluZGV4T2YoJ05ldHNjYXBlNi8nKSxhLGksaix4LHM7aWYodW4pe3VuPXVuLnRvTG93ZXJDYXNlKCk7aWYobClmb3Ioaj0wO2o8MjtqKyspZm9yKGk9MDtpPGwubGVuZ3RoO2krKyl7cz1sW2ldO3g9cy5fYztpZigoIXh8fHg9PSdzX2MnfHwoaj4wJiZ4PT0nc19sJykpJiYocy5vdW49PXVufHwocy5mcyYmcy5zYSYmcy5mcyhzLm91bix1bikpKSl7aWYocy5zYSlzLnNhKHVuKTtpZih4PT0nc19jJylyZXR1cm4gc31lbHNlIHM9MH19dy5zX2FuPScwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eic7Cncuc19zcD1uZXcgRnVuY3Rpb24oIngiLCJkIiwidmFyIGE9bmV3IEFycmF5LGk9MCxqO2lmKHgpe2lmKHguc3BsaXQpYT14LnNwbGl0KGQpO2Vsc2UgaWYoIWQpZm9yKGk9MDtpPHgubGVuZ3RoO2krKylhW2EubGVuZ3RoXT14LnN1YnN0cmluZyhpLGkrMSk7ZWxzZSB3aGlsZShpPj0wKXtqPXguaW5kZXhPZihkLGkpO2FbYS5sZW5ndGhdPXguc3Vic3QiCisicmluZyhpLGo8MD94Lmxlbmd0aDpqKTtpPWo7aWYoaT49MClpKz1kLmxlbmd0aH19cmV0dXJuIGEiKTsKdy5zX2puPW5ldyBGdW5jdGlvbigiYSIsImQiLCJ2YXIgeD0nJyxpLGo9YS5sZW5ndGg7aWYoYSYmaj4wKXt4PWFbMF07aWYoaj4xKXtpZihhLmpvaW4peD1hLmpvaW4oZCk7ZWxzZSBmb3IoaT0xO2k8ajtpKyspeCs9ZCthW2ldfX1yZXR1cm4geCIpOwp3LnNfcmVwPW5ldyBGdW5jdGlvbigieCIsIm8iLCJuIiwicmV0dXJuIHNfam4oc19zcCh4LG8pLG4pIik7Cncuc19kPW5ldyBGdW5jdGlvbigieCIsInZhciB0PSdgXkAkIycsbD1zX2FuLGwyPW5ldyBPYmplY3QseDIsZCxiPTAsayxpPXgubGFzdEluZGV4T2YoJ35+Jyksaix2LHc7aWYoaT4wKXtkPXguc3Vic3RyaW5nKDAsaSk7eD14LnN1YnN0cmluZyhpKzIpO2w9c19zcChsLCcnKTtmb3IoaT0wO2k8NjI7aSsrKWwyW2xbaV1dPWk7dD1zX3NwKHQsJycpO2QiCisiPXNfc3AoZCwnficpO2k9MDt3aGlsZShpPDUpe3Y9MDtpZih4LmluZGV4T2YodFtpXSk+PTApIHt4Mj1zX3NwKHgsdFtpXSk7Zm9yKGo9MTtqPHgyLmxlbmd0aDtqKyspe2s9eDJbal0uc3Vic3RyaW5nKDAsMSk7dz10W2ldK2s7aWYoayE9JyAnKXt2PTE7dz1kW2IrbDJba11dfXgyW2pdPXcreDJbal0uc3Vic3RyaW5nKDEpfX1pZih2KXg9c19qbigiCisieDIsJycpO2Vsc2V7dz10W2ldKycgJztpZih4LmluZGV4T2Yodyk+PTApeD1zX3JlcCh4LHcsdFtpXSk7aSsrO2IrPTYyfX19cmV0dXJuIHgiKTsKdy5zX2ZlPW5ldyBGdW5jdGlvbigiYyIsInJldHVybiBzX3JlcChzX3JlcChzX3JlcChjLCdcXFxcJywnXFxcXFxcXFwnKSwnXCInLCdcXFxcXCInKSxcIlxcblwiLFwiXFxcXG5cIikiKTsKdy5zX2ZhPW5ldyBGdW5jdGlvbigiZiIsInZhciBzPWYuaW5kZXhPZignKCcpKzEsZT1mLmluZGV4T2YoJyknKSxhPScnLGM7d2hpbGUocz49MCYmczxlKXtjPWYuc3Vic3RyaW5nKHMscysxKTtpZihjPT0nLCcpYSs9J1wiLFwiJztlbHNlIGlmKChcIlxcblxcclxcdCBcIikuaW5kZXhPZihjKTwwKWErPWM7cysrfXJldHVybiBhPydcIicrYSsnXCInOiIKKyJhIik7Cncuc19mdD1uZXcgRnVuY3Rpb24oImMiLCJjKz0nJzt2YXIgcyxlLG8sYSxkLHEsZixoLHg7cz1jLmluZGV4T2YoJz1mdW5jdGlvbignKTt3aGlsZShzPj0wKXtzKys7ZD0xO3E9Jyc7eD0wO2Y9Yy5zdWJzdHJpbmcocyk7YT1zX2ZhKGYpO2U9bz1jLmluZGV4T2YoJ3snLHMpO2UrKzt3aGlsZShkPjApe2g9Yy5zdWJzdHJpbmcoZSxlKzEpO2lmKHEpe2kiCisiZihoPT1xJiYheClxPScnO2lmKGg9PSdcXFxcJyl4PXg/MDoxO2Vsc2UgeD0wfWVsc2V7aWYoaD09J1wiJ3x8aD09XCInXCIpcT1oO2lmKGg9PSd7JylkKys7aWYoaD09J30nKWQtLX1pZihkPjApZSsrfWM9Yy5zdWJzdHJpbmcoMCxzKSsnbmV3IEZ1bmN0aW9uKCcrKGE/YSsnLCc6JycpKydcIicrc19mZShjLnN1YnN0cmluZyhvKzEsZSkpKydcIikiCisiJytjLnN1YnN0cmluZyhlKzEpO3M9Yy5pbmRleE9mKCc9ZnVuY3Rpb24oJyl9cmV0dXJuIGM7Iik7CmM9c19kKGMpO2lmKGU+MCl7YT1wYXJzZUludChpPXYuc3Vic3RyaW5nKGUrNSkpO2lmKGE+MylhPXBhcnNlRmxvYXQoaSl9ZWxzZSBpZihtPjApYT1wYXJzZUZsb2F0KHUuc3Vic3RyaW5nKG0rMTApKTtlbHNlIGE9cGFyc2VGbG9hdCh2KTtpZihhPDV8fHYuaW5kZXhPZignT3BlcmEnKT49MHx8dS5pbmRleE9mKCdPcGVyYScpPj0wKWM9c19mdChjKTtpZighcyl7cz1uZXcgT2JqZWN0O2lmKCF3LnNfY19pbil7dy5zX2NfaWw9bmV3IEFycmF5O3cuc19jX2luPTB9cy5faWw9dy5zX2NfaWw7cy5faW49dy5zX2NfaW47cy5faWxbcy5faW5dPXM7dy5zX2NfaW4rKzt9cy5fYz0nc19jJzsobmV3IEZ1bmN0aW9uKCJzIiwidW4iLCJwZyIsInNzIixjKSkocyx1bixwZyxzcyk7cmV0dXJuIHN9CmZ1bmN0aW9uIHNfZ2lxZigpe3ZhciB3PXdpbmRvdyxxPXcuc19naXEsaSx0LHM7aWYocSlmb3IoaT0wO2k8cS5sZW5ndGg7aSsrKXt0PXFbaV07cz1zX2dpKHQub3VuKTtzLnNhKHQudW4pO3Muc2V0VGFnQ29udGFpbmVyKHQudGFnQ29udGFpbmVyTmFtZSl9dy5zX2dpcT0wfXNfZ2lxZigpCgo=]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 10:46:11 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/js/vendor/vendor-48ca455c.js.pagespeed.jm.V7Qfw6bd5C.js]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/js/vendor/vendor-48ca455c.js.pagespeed.jm.V7Qfw6bd5C.js]]></path>
    <extension>js</extension>
    <request base64="true"><![CDATA[R0VUIC9qcy92ZW5kb3IvdmVuZG9yLTQ4Y2E0NTVjLmpzLnBhZ2VzcGVlZC5qbS5WN1FmdzZiZDVDLmpzIEhUVFAvMS4xDQpIb3N0OiAxMC4xMC4xMC4xOA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgcnY6NjguMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC82OC4wDQpBY2NlcHQ6ICovKg0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuNQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpETlQ6IDENCkNvbm5lY3Rpb246IGNsb3NlDQpSZWZlcmVyOiBodHRwOi8vMTAuMTAuMTAuMTgvDQpDb29raWU6IHNfY2M9dHJ1ZTsgc19maWQ9MUQ4N0M0QzVGMUZERDUxOS0yMTg5RjdBRDA4Qjg1QzJFOyBzX25yPTE1OTA2MzcxMzkwMDA7IHNfc3E9bmJjdWdsb2JhbCUyQ25iY3V1c2FuZXR3b3JrZCUzRCUyNTI2cGlkJTI1M0RNci4lMjUyNTIwUm9ib3QlMjUyNTIwJTI1MjUzQSUyNTI1MjBXaG8lMjUyNTIwSXMlMjUyNTIwTXIuJTI1MjUyMFJvYm90JTI1MjUyMCUyNTI1M0ElMjUyNTIwSW5mb3JtJTI1MjUyMEdhbGxlcnklMjUyNTIwJTI1MjUzQSUyNTI1MjBQaG90byUyNTI1MjAxJTI1MjZwaWR0JTI1M0QxJTI1MjZvaWQlMjUzRCUyNTI1MEElMjUyNTA5JTI1MjUwQSUyNTI1MDklMjUyNTA5JTI1MjUwQSUyNTI1MDklMjUyNTA5JTI1MjUwQSUyNTI1MDklMjUyNTBBJTI1MjZvaWR0JTI1M0QzJTI1MjZvdCUyNTNEU1VCTUlUOyB3b3JkcHJlc3NfdGVzdF9jb29raWU9V1ArQ29va2llK2NoZWNrDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTANCg0K]]></request>
    <status>200</status>
    <responselength>182368</responselength>
    <mimetype>script</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA1OjE2OjA4IEdNVA0KU2VydmVyOiBBcGFjaGUNClgtRnJhbWUtT3B0aW9uczogU0FNRU9SSUdJTg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkV4cGlyZXM6IEZyaSwgMjggTWF5IDIwMjEgMDQ6MTg6NDggR01UDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTMxNTM2MDAwDQpFdGFnOiBXLyIwLWd6aXAiDQpMYXN0LU1vZGlmaWVkOiBUaHUsIDI4IE1heSAyMDIwIDA0OjE4OjQ4IEdNVA0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpDb250ZW50LUxlbmd0aDogMTgyMDA0DQpDb25uZWN0aW9uOiBjbG9zZQ0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQoNCndpbmRvdy5Nb2Rlcm5penI9ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoZSl7Xy5jc3NUZXh0PWV9ZnVuY3Rpb24gcihlLHQpe3JldHVybiBpKHguam9pbihlKyI7IikrKHR8fCIiKSl9ZnVuY3Rpb24gcyhlLHQpe3JldHVybiB0eXBlb2YgZT09PXR9ZnVuY3Rpb24gbyhlLHQpe3JldHVybiEhfigiIitlKS5pbmRleE9mKHQpfWZ1bmN0aW9uIGEoZSx0KXtmb3IodmFyIGkgaW4gZSl7dmFyIHI9ZVtpXTtpZighbyhyLCItIikmJl9bcl0hPT1uKXJldHVybiJwZngiPT10P3I6ITB9cmV0dXJuITF9ZnVuY3Rpb24gbChlLHQsaSl7Zm9yKHZhciByIGluIGUpe3ZhciBvPXRbZVtyXV07aWYobyE9PW4pcmV0dXJuIGk9PT0hMT9lW3JdOnMobywiZnVuY3Rpb24iKT9vLmJpbmQoaXx8dCk6b31yZXR1cm4hMX1mdW5jdGlvbiBjKGUsdCxuKXt2YXIgaT1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSkscj0oZSsiICIrRS5qb2luKGkrIiAiKStpKS5zcGxpdCgiICIpO3JldHVybiBzKHQsInN0cmluZyIpfHxzKHQsInVuZGVmaW5lZCIpP2Eocix0KToocj0oZSsiICIray5qb2luKGkrIiAiKStpKS5zcGxpdCgiICIpLGwocix0LG4pKX1mdW5jdGlvbiB1KCl7Zi5pbnB1dD1mdW5jdGlvbihuKXtmb3IodmFyIGk9MCxyPW4ubGVuZ3RoO3I+aTtpKyspUFtuW2ldXT0hIShuW2ldaW4gYik7cmV0dXJuIFAubGlzdCYmKFAubGlzdD0hKCF0LmNyZWF0ZUVsZW1lbnQoImRhdGFsaXN0Iil8fCFlLkhUTUxEYXRhTGlzdEVsZW1lbnQpKSxQfSgiYXV0b2NvbXBsZXRlIGF1dG9mb2N1cyBsaXN0IHBsYWNlaG9sZGVyIG1heCBtaW4gbXVsdGlwbGUgcGF0dGVybiByZXF1aXJlZCBzdGVwIi5zcGxpdCgiICIpKSxmLmlucHV0dHlwZXM9ZnVuY3Rpb24oZSl7Zm9yKHZhciBpLHIscyxvPTAsYT1lLmxlbmd0aDthPm87bysrKWIuc2V0QXR0cmlidXRlKCJ0eXBlIixyPWVbb10pLGk9InRleHQiIT09Yi50eXBlLGkmJihiLnZhbHVlPVQsYi5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTt2aXNpYmlsaXR5OmhpZGRlbjsiLC9ecmFuZ2UkLy50ZXN0KHIpJiZiLnN0eWxlLldlYmtpdEFwcGVhcmFuY2UhPT1uPyh2LmFwcGVuZENoaWxkKGIpLHM9dC5kZWZhdWx0VmlldyxpPXMuZ2V0Q29tcHV0ZWRTdHlsZSYmInRleHRmaWVsZCIhPT1zLmdldENvbXB1dGVkU3R5bGUoYixudWxsKS5XZWJraXRBcHBlYXJhbmNlJiYwIT09Yi5vZmZzZXRIZWlnaHQsdi5yZW1vdmVDaGlsZChiKSk6L14oc2VhcmNofHRlbCkkLy50ZXN0KHIpfHwoaT0vXih1cmx8ZW1haWwpJC8udGVzdChyKT9iLmNoZWNrVmFsaWRpdHkmJmIuY2hlY2tWYWxpZGl0eSgpPT09ITE6Yi52YWx1ZSE9VCkpLEFbZVtvXV09ISFpO3JldHVybiBBfSgic2VhcmNoIHRlbCB1cmwgZW1haWwgZGF0ZXRpbWUgZGF0ZSBtb250aCB3ZWVrIHRpbWUgZGF0ZXRpbWUtbG9jYWwgbnVtYmVyIHJhbmdlIGNvbG9yIi5zcGxpdCgiICIpKX12YXIgZCxwLGg9IjIuOC4zIixmPXt9LGc9ITAsdj10LmRvY3VtZW50RWxlbWVudCxtPSJtb2Rlcm5penIiLHk9dC5jcmVhdGVFbGVtZW50KG0pLF89eS5zdHlsZSxiPXQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxUPSI6KSIsUz17fS50b1N0cmluZyx4PSIgLXdlYmtpdC0gLW1vei0gLW8tIC1tcy0gIi5zcGxpdCgiICIpLHc9IldlYmtpdCBNb3ogTyBtcyIsRT13LnNwbGl0KCIgIiksaz13LnRvTG93ZXJDYXNlKCkuc3BsaXQoIiAiKSxDPXtzdmc6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIn0saj17fSxBPXt9LFA9e30sTD1bXSxOPUwuc2xpY2UsRD1mdW5jdGlvbihlLG4saSxyKXt2YXIgcyxvLGEsbCxjPXQuY3JlYXRlRWxlbWVudCgiZGl2IiksdT10LmJvZHksZD11fHx0LmNyZWF0ZUVsZW1lbnQoImJvZHkiKTtpZihwYXJzZUludChpLDEwKSlmb3IoO2ktLTspYT10LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGEuaWQ9cj9yW2ldOm0rKGkrMSksYy5hcHBlbmRDaGlsZChhKTtyZXR1cm4gcz1bIiYjMTczOyIsJzxzdHlsZSBpZD0icycsbSwnIj4nLGUsIjwvc3R5bGU+Il0uam9pbigiIiksYy5pZD1tLCh1P2M6ZCkuaW5uZXJIVE1MKz1zLGQuYXBwZW5kQ2hpbGQoYyksdXx8KGQuc3R5bGUuYmFja2dyb3VuZD0iIixkLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iLGw9di5zdHlsZS5vdmVyZmxvdyx2LnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iLHYuYXBwZW5kQ2hpbGQoZCkpLG89bihjLGUpLHU/Yy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpOihkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZCksdi5zdHlsZS5vdmVyZmxvdz1sKSwhIW99LEg9ZnVuY3Rpb24odCl7dmFyIG49ZS5tYXRjaE1lZGlhfHxlLm1zTWF0Y2hNZWRpYTtpZihuKXJldHVybiBuKHQpJiZuKHQpLm1hdGNoZXN8fCExO3ZhciBpO3JldHVybiBEKCJAbWVkaWEgIit0KyIgeyAjIittKyIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IH0gfSIsZnVuY3Rpb24odCl7aT0iYWJzb2x1dGUiPT0oZS5nZXRDb21wdXRlZFN0eWxlP2dldENvbXB1dGVkU3R5bGUodCxudWxsKTp0LmN1cnJlbnRTdHlsZSkucG9zaXRpb259KSxpfSxSPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIpe3I9cnx8dC5jcmVhdGVFbGVtZW50KGlbZV18fCJkaXYiKSxlPSJvbiIrZTt2YXIgbz1lIGluIHI7cmV0dXJuIG98fChyLnNldEF0dHJpYnV0ZXx8KHI9dC5jcmVhdGVFbGVtZW50KCJkaXYiKSksci5zZXRBdHRyaWJ1dGUmJnIucmVtb3ZlQXR0cmlidXRlJiYoci5zZXRBdHRyaWJ1dGUoZSwiIiksbz1zKHJbZV0sImZ1bmN0aW9uIikscyhyW2VdLCJ1bmRlZmluZWQiKXx8KHJbZV09biksci5yZW1vdmVBdHRyaWJ1dGUoZSkpKSxyPW51bGwsb312YXIgaT17c2VsZWN0OiJpbnB1dCIsY2hhbmdlOiJpbnB1dCIsc3VibWl0OiJmb3JtIixyZXNldDoiZm9ybSIsZXJyb3I6ImltZyIsbG9hZDoiaW1nIixhYm9ydDoiaW1nIn07cmV0dXJuIGV9KCksTT17fS5oYXNPd25Qcm9wZXJ0eTtwPXMoTSwidW5kZWZpbmVkIil8fHMoTS5jYWxsLCJ1bmRlZmluZWQiKT9mdW5jdGlvbihlLHQpe3JldHVybiB0IGluIGUmJnMoZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGVbdF0sInVuZGVmaW5lZCIpfTpmdW5jdGlvbihlLHQpe3JldHVybiBNLmNhbGwoZSx0KX0sRnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fChGdW5jdGlvbi5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3I7dmFyIG49Ti5jYWxsKGFyZ3VtZW50cywxKSxpPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIGkpe3ZhciByPWZ1bmN0aW9uKCl7fTtyLnByb3RvdHlwZT10LnByb3RvdHlwZTt2YXIgcz1uZXcgcixvPXQuYXBwbHkocyxuLmNvbmNhdChOLmNhbGwoYXJndW1lbnRzKSkpO3JldHVybiBPYmplY3Qobyk9PT1vP286c31yZXR1cm4gdC5hcHBseShlLG4uY29uY2F0KE4uY2FsbChhcmd1bWVudHMpKSl9O3JldHVybiBpfSksai5mbGV4Ym94PWZ1bmN0aW9uKCl7cmV0dXJuIGMoImZsZXhXcmFwIil9LGouZmxleGJveGxlZ2FjeT1mdW5jdGlvbigpe3JldHVybiBjKCJib3hEaXJlY3Rpb24iKX0sai5jYW52YXM9ZnVuY3Rpb24oKXt2YXIgZT10LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO3JldHVybiEoIWUuZ2V0Q29udGV4dHx8IWUuZ2V0Q29udGV4dCgiMmQiKSl9LGouY2FudmFzdGV4dD1mdW5jdGlvbigpe3JldHVybiEoIWYuY2FudmFzfHwhcyh0LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLmdldENvbnRleHQoIjJkIikuZmlsbFRleHQsImZ1bmN0aW9uIikpfSxqLndlYmdsPWZ1bmN0aW9uKCl7cmV0dXJuISFlLldlYkdMUmVuZGVyaW5nQ29udGV4dH0sai50b3VjaD1mdW5jdGlvbigpe3ZhciBuO3JldHVybiJvbnRvdWNoc3RhcnQiaW4gZXx8ZS5Eb2N1bWVudFRvdWNoJiZ0IGluc3RhbmNlb2YgRG9jdW1lbnRUb3VjaD9uPSEwOkQoWyJAbWVkaWEgKCIseC5qb2luKCJ0b3VjaC1lbmFibGVkKSwoIiksbSwiKSIsInsjbW9kZXJuaXpye3RvcDo5cHg7cG9zaXRpb246YWJzb2x1dGV9fSJdLmpvaW4oIiIpLGZ1bmN0aW9uKGUpe249OT09PWUub2Zmc2V0VG9wfSksbn0sai5nZW9sb2NhdGlvbj1mdW5jdGlvbigpe3JldHVybiJnZW9sb2NhdGlvbiJpbiBuYXZpZ2F0b3J9LGoucG9zdG1lc3NhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4hIWUucG9zdE1lc3NhZ2V9LGoud2Vic3FsZGF0YWJhc2U9ZnVuY3Rpb24oKXtyZXR1cm4hIWUub3BlbkRhdGFiYXNlfSxqLmluZGV4ZWREQj1mdW5jdGlvbigpe3JldHVybiEhYygiaW5kZXhlZERCIixlKX0sai5oYXNoY2hhbmdlPWZ1bmN0aW9uKCl7cmV0dXJuIFIoImhhc2hjaGFuZ2UiLGUpJiYodC5kb2N1bWVudE1vZGU9PT1ufHx0LmRvY3VtZW50TW9kZT43KX0sai5oaXN0b3J5PWZ1bmN0aW9uKCl7cmV0dXJuISghZS5oaXN0b3J5fHwhaGlzdG9yeS5wdXNoU3RhdGUpfSxqLmRyYWdhbmRkcm9wPWZ1bmN0aW9uKCl7dmFyIGU9dC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4iZHJhZ2dhYmxlImluIGV8fCJvbmRyYWdzdGFydCJpbiBlJiYib25kcm9wImluIGV9LGoud2Vic29ja2V0cz1mdW5jdGlvbigpe3JldHVybiJXZWJTb2NrZXQiaW4gZXx8Ik1veldlYlNvY2tldCJpbiBlfSxqLnJnYmE9ZnVuY3Rpb24oKXtyZXR1cm4gaSgiYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDE1MCwyNTUsMTUwLC41KSIpLG8oXy5iYWNrZ3JvdW5kQ29sb3IsInJnYmEiKX0sai5oc2xhPWZ1bmN0aW9uKCl7cmV0dXJuIGkoImJhY2tncm91bmQtY29sb3I6aHNsYSgxMjAsNDAlLDEwMCUsLjUpIiksbyhfLmJhY2tncm91bmRDb2xvciwicmdiYSIpfHxvKF8uYmFja2dyb3VuZENvbG9yLCJoc2xhIil9LGoubXVsdGlwbGViZ3M9ZnVuY3Rpb24oKXtyZXR1cm4gaSgiYmFja2dyb3VuZDp1cmwoaHR0cHM6Ly8pLHVybChodHRwczovLykscmVkIHVybChodHRwczovLykiKSwvKHVybFxzKlwoLio/KXszfS8udGVzdChfLmJhY2tncm91bmQpfSxqLmJhY2tncm91bmRzaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGMoImJhY2tncm91bmRTaXplIil9LGouYm9yZGVyaW1hZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gYygiYm9yZGVySW1hZ2UiKX0sai5ib3JkZXJyYWRpdXM9ZnVuY3Rpb24oKXtyZXR1cm4gYygiYm9yZGVyUmFkaXVzIil9LGouYm94c2hhZG93PWZ1bmN0aW9uKCl7cmV0dXJuIGMoImJveFNoYWRvdyIpfSxqLnRleHRzaGFkb3c9ZnVuY3Rpb24oKXtyZXR1cm4iIj09PXQuY3JlYXRlRWxlbWVudCgiZGl2Iikuc3R5bGUudGV4dFNoYWRvd30sai5vcGFjaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHIoIm9wYWNpdHk6LjU1IiksL14wLjU1JC8udGVzdChfLm9wYWNpdHkpfSxqLmNzc2FuaW1hdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gYygiYW5pbWF0aW9uTmFtZSIpfSxqLmNzc2NvbHVtbnM9ZnVuY3Rpb24oKXtyZXR1cm4gYygiY29sdW1uQ291bnQiKX0sai5jc3NncmFkaWVudHM9ZnVuY3Rpb24oKXt2YXIgZT0iYmFja2dyb3VuZC1pbWFnZToiLHQ9ImdyYWRpZW50KGxpbmVhcixsZWZ0IHRvcCxyaWdodCBib3R0b20sZnJvbSgjOWY5KSx0byh3aGl0ZSkpOyIsbj0ibGluZWFyLWdyYWRpZW50KGxlZnQgdG9wLCM5ZjksIHdoaXRlKTsiO3JldHVybiBpKChlKyItd2Via2l0LSAiLnNwbGl0KCIgIikuam9pbih0K2UpK3guam9pbihuK2UpKS5zbGljZSgwLC1lLmxlbmd0aCkpLG8oXy5iYWNrZ3JvdW5kSW1hZ2UsImdyYWRpZW50Iil9LGouY3NzcmVmbGVjdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gYygiYm94UmVmbGVjdCIpfSxqLmNzc3RyYW5zZm9ybXM9ZnVuY3Rpb24oKXtyZXR1cm4hIWMoInRyYW5zZm9ybSIpfSxqLmNzc3RyYW5zZm9ybXMzZD1mdW5jdGlvbigpe3ZhciBlPSEhYygicGVyc3BlY3RpdmUiKTtyZXR1cm4gZSYmIndlYmtpdFBlcnNwZWN0aXZlImluIHYuc3R5bGUmJkQoIkBtZWRpYSAodHJhbnNmb3JtLTNkKSwoLXdlYmtpdC10cmFuc2Zvcm0tM2QpeyNtb2Rlcm5penJ7bGVmdDo5cHg7cG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0OjNweDt9fSIsZnVuY3Rpb24odCxuKXtlPTk9PT10Lm9mZnNldExlZnQmJjM9PT10Lm9mZnNldEhlaWdodH0pLGV9LGouY3NzdHJhbnNpdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gYygidHJhbnNpdGlvbiIpfSxqLmZvbnRmYWNlPWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIEQoJ0Bmb250LWZhY2Uge2ZvbnQtZmFtaWx5OiJmb250IjtzcmM6dXJsKCJodHRwczovLyIpfScsZnVuY3Rpb24obixpKXt2YXIgcj10LmdldEVsZW1lbnRCeUlkKCJzbW9kZXJuaXpyIikscz1yLnNoZWV0fHxyLnN0eWxlU2hlZXQsbz1zP3MuY3NzUnVsZXMmJnMuY3NzUnVsZXNbMF0/cy5jc3NSdWxlc1swXS5jc3NUZXh0OnMuY3NzVGV4dHx8IiI6IiI7ZT0vc3JjL2kudGVzdChvKSYmMD09PW8uaW5kZXhPZihpLnNwbGl0KCIgIilbMF0pfSksZX0sai5nZW5lcmF0ZWRjb250ZW50PWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIEQoWyIjIixtLCJ7Zm9udDowLzAgYX0jIixtLCc6YWZ0ZXJ7Y29udGVudDoiJyxULCciO3Zpc2liaWxpdHk6aGlkZGVuO2ZvbnQ6M3B4LzEgYX0nXS5qb2luKCIiKSxmdW5jdGlvbih0KXtlPXQub2Zmc2V0SGVpZ2h0Pj0zfSksZX0sai52aWRlbz1mdW5jdGlvbigpe3ZhciBlPXQuY3JlYXRlRWxlbWVudCgidmlkZW8iKSxuPSExO3RyeXsobj0hIWUuY2FuUGxheVR5cGUpJiYobj1uZXcgQm9vbGVhbihuKSxuLm9nZz1lLmNhblBsYXlUeXBlKCd2aWRlby9vZ2c7IGNvZGVjcz0idGhlb3JhIicpLnJlcGxhY2UoL15ubyQvLCIiKSxuLmgyNjQ9ZS5jYW5QbGF5VHlwZSgndmlkZW8vbXA0OyBjb2RlY3M9ImF2YzEuNDJFMDFFIicpLnJlcGxhY2UoL15ubyQvLCIiKSxuLndlYm09ZS5jYW5QbGF5VHlwZSgndmlkZW8vd2VibTsgY29kZWNzPSJ2cDgsIHZvcmJpcyInKS5yZXBsYWNlKC9ebm8kLywiIikpfWNhdGNoKGkpe31yZXR1cm4gbn0sai5hdWRpbz1mdW5jdGlvbigpe3ZhciBlPXQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSxuPSExO3RyeXsobj0hIWUuY2FuUGxheVR5cGUpJiYobj1uZXcgQm9vbGVhbihuKSxuLm9nZz1lLmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz0idm9yYmlzIicpLnJlcGxhY2UoL15ubyQvLCIiKSxuLm1wMz1lLmNhblBsYXlUeXBlKCJhdWRpby9tcGVnOyIpLnJlcGxhY2UoL15ubyQvLCIiKSxuLndhdj1lLmNhblBsYXlUeXBlKCdhdWRpby93YXY7IGNvZGVjcz0iMSInKS5yZXBsYWNlKC9ebm8kLywiIiksbi5tNGE9KGUuY2FuUGxheVR5cGUoImF1ZGlvL3gtbTRhOyIpfHxlLmNhblBsYXlUeXBlKCJhdWRpby9hYWM7IikpLnJlcGxhY2UoL15ubyQvLCIiKSl9Y2F0Y2goaSl7fXJldHVybiBufSxqLmxvY2Fsc3RvcmFnZT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbG9jYWxTdG9yYWdlLnNldEl0ZW0obSxtKSxsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShtKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19LGouc2Vzc2lvbnN0b3JhZ2U9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0obSxtKSxzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKG0pLCEwfWNhdGNoKGUpe3JldHVybiExfX0sai53ZWJ3b3JrZXJzPWZ1bmN0aW9uKCl7cmV0dXJuISFlLldvcmtlcn0sai5hcHBsaWNhdGlvbmNhY2hlPWZ1bmN0aW9uKCl7cmV0dXJuISFlLmFwcGxpY2F0aW9uQ2FjaGV9LGouc3ZnPWZ1bmN0aW9uKCl7cmV0dXJuISF0LmNyZWF0ZUVsZW1lbnROUyYmISF0LmNyZWF0ZUVsZW1lbnROUyhDLnN2Zywic3ZnIikuY3JlYXRlU1ZHUmVjdH0sai5pbmxpbmVzdmc9ZnVuY3Rpb24oKXt2YXIgZT10LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBlLmlubmVySFRNTD0iPHN2Zy8+IiwoZS5maXJzdENoaWxkJiZlLmZpcnN0Q2hpbGQubmFtZXNwYWNlVVJJKT09Qy5zdmd9LGouc21pbD1mdW5jdGlvbigpe3JldHVybiEhdC5jcmVhdGVFbGVtZW50TlMmJi9TVkdBbmltYXRlLy50ZXN0KFMuY2FsbCh0LmNyZWF0ZUVsZW1lbnROUyhDLnN2ZywiYW5pbWF0ZSIpKSl9LGouc3ZnY2xpcHBhdGhzPWZ1bmN0aW9uKCl7cmV0dXJuISF0LmNyZWF0ZUVsZW1lbnROUyYmL1NWR0NsaXBQYXRoLy50ZXN0KFMuY2FsbCh0LmNyZWF0ZUVsZW1lbnROUyhDLnN2ZywiY2xpcFBhdGgiKSkpfTtmb3IodmFyICQgaW4gailwKGosJCkmJihkPSQudG9Mb3dlckNhc2UoKSxmW2RdPWpbJF0oKSxMLnB1c2goKGZbZF0/IiI6Im5vLSIpK2QpKTtyZXR1cm4gZi5pbnB1dHx8dSgpLGYuYWRkVGVzdD1mdW5jdGlvbihlLHQpe2lmKCJvYmplY3QiPT10eXBlb2YgZSlmb3IodmFyIGkgaW4gZSlwKGUsaSkmJmYuYWRkVGVzdChpLGVbaV0pO2Vsc2V7aWYoZT1lLnRvTG93ZXJDYXNlKCksZltlXSE9PW4pcmV0dXJuIGY7dD0iZnVuY3Rpb24iPT10eXBlb2YgdD90KCk6dCwidW5kZWZpbmVkIiE9dHlwZW9mIGcmJmcmJih2LmNsYXNzTmFtZSs9IiAiKyh0PyIiOiJuby0iKStlKSxmW2VdPXR9cmV0dXJuIGZ9LGkoIiIpLHk9Yj1udWxsLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3ZhciBuPWUuY3JlYXRlRWxlbWVudCgicCIpLGk9ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdfHxlLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gbi5pbm5lckhUTUw9Ing8c3R5bGU+Iit0KyI8L3N0eWxlPiIsaS5pbnNlcnRCZWZvcmUobi5sYXN0Q2hpbGQsaS5maXJzdENoaWxkKX1mdW5jdGlvbiBpKCl7dmFyIGU9eS5lbGVtZW50cztyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/ZS5zcGxpdCgiICIpOmV9ZnVuY3Rpb24gcihlKXt2YXIgdD1tW2VbZ11dO3JldHVybiB0fHwodD17fSx2KyssZVtnXT12LG1bdl09dCksdH1mdW5jdGlvbiBzKGUsbixpKXtpZihufHwobj10KSx1KXJldHVybiBuLmNyZWF0ZUVsZW1lbnQoZSk7aXx8KGk9cihuKSk7dmFyIHM7cmV0dXJuIHM9aS5jYWNoZVtlXT9pLmNhY2hlW2VdLmNsb25lTm9kZSgpOmYudGVzdChlKT8oaS5jYWNoZVtlXT1pLmNyZWF0ZUVsZW0oZSkpLmNsb25lTm9kZSgpOmkuY3JlYXRlRWxlbShlKSwhcy5jYW5IYXZlQ2hpbGRyZW58fGgudGVzdChlKXx8cy50YWdVcm4/czppLmZyYWcuYXBwZW5kQ2hpbGQocyl9ZnVuY3Rpb24gbyhlLG4pe2lmKGV8fChlPXQpLHUpcmV0dXJuIGUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO249bnx8cihlKTtmb3IodmFyIHM9bi5mcmFnLmNsb25lTm9kZSgpLG89MCxhPWkoKSxsPWEubGVuZ3RoO2w+bztvKyspcy5jcmVhdGVFbGVtZW50KGFbb10pO3JldHVybiBzfWZ1bmN0aW9uIGEoZSx0KXt0LmNhY2hlfHwodC5jYWNoZT17fSx0LmNyZWF0ZUVsZW09ZS5jcmVhdGVFbGVtZW50LHQuY3JlYXRlRnJhZz1lLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQsdC5mcmFnPXQuY3JlYXRlRnJhZygpKSxlLmNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24obil7cmV0dXJuIHkuc2hpdk1ldGhvZHM/cyhuLGUsdCk6dC5jcmVhdGVFbGVtKG4pfSxlLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQ9RnVuY3Rpb24oImgsZiIsInJldHVybiBmdW5jdGlvbigpe3ZhciBuPWYuY2xvbmVOb2RlKCksYz1uLmNyZWF0ZUVsZW1lbnQ7aC5zaGl2TWV0aG9kcyYmKCIraSgpLmpvaW4oKS5yZXBsYWNlKC9bXHdcLV0rL2csZnVuY3Rpb24oZSl7cmV0dXJuIHQuY3JlYXRlRWxlbShlKSx0LmZyYWcuY3JlYXRlRWxlbWVudChlKSwnYygiJytlKyciKSd9KSsiKTtyZXR1cm4gbn0iKSh5LHQuZnJhZyl9ZnVuY3Rpb24gbChlKXtlfHwoZT10KTt2YXIgaT1yKGUpO3JldHVybiF5LnNoaXZDU1N8fGN8fGkuaGFzQ1NTfHwoaS5oYXNDU1M9ISFuKGUsImFydGljbGUsYXNpZGUsZGlhbG9nLGZpZ2NhcHRpb24sZmlndXJlLGZvb3RlcixoZWFkZXIsaGdyb3VwLG1haW4sbmF2LHNlY3Rpb257ZGlzcGxheTpibG9ja31tYXJre2JhY2tncm91bmQ6I0ZGMDtjb2xvcjojMDAwfXRlbXBsYXRle2Rpc3BsYXk6bm9uZX0iKSksdXx8YShlLGkpLGV9dmFyIGMsdSxkPSIzLjcuMCIscD1lLmh0bWw1fHx7fSxoPS9ePHxeKD86YnV0dG9ufG1hcHxzZWxlY3R8dGV4dGFyZWF8b2JqZWN0fGlmcmFtZXxvcHRpb258b3B0Z3JvdXApJC9pLGY9L14oPzphfGJ8Y29kZXxkaXZ8ZmllbGRzZXR8aDF8aDJ8aDN8aDR8aDV8aDZ8aXxsYWJlbHxsaXxvbHxwfHF8c3BhbnxzdHJvbmd8c3R5bGV8dGFibGV8dGJvZHl8dGR8dGh8dHJ8dWwpJC9pLGc9Il9odG1sNXNoaXYiLHY9MCxtPXt9OyFmdW5jdGlvbigpe3RyeXt2YXIgZT10LmNyZWF0ZUVsZW1lbnQoImEiKTtlLmlubmVySFRNTD0iPHh5ej48L3h5ej4iLGM9ImhpZGRlbiJpbiBlLHU9MT09ZS5jaGlsZE5vZGVzLmxlbmd0aHx8ZnVuY3Rpb24oKXt0LmNyZWF0ZUVsZW1lbnQoImEiKTt2YXIgZT10LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIGUuY2xvbmVOb2RlfHwidW5kZWZpbmVkIj09dHlwZW9mIGUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudHx8InVuZGVmaW5lZCI9PXR5cGVvZiBlLmNyZWF0ZUVsZW1lbnR9KCl9Y2F0Y2gobil7Yz0hMCx1PSEwfX0oKTt2YXIgeT17ZWxlbWVudHM6cC5lbGVtZW50c3x8ImFiYnIgYXJ0aWNsZSBhc2lkZSBhdWRpbyBiZGkgY2FudmFzIGRhdGEgZGF0YWxpc3QgZGV0YWlscyBkaWFsb2cgZmlnY2FwdGlvbiBmaWd1cmUgZm9vdGVyIGhlYWRlciBoZ3JvdXAgbWFpbiBtYXJrIG1ldGVyIG5hdiBvdXRwdXQgcHJvZ3Jlc3Mgc2VjdGlvbiBzdW1tYXJ5IHRlbXBsYXRlIHRpbWUgdmlkZW8iLHZlcnNpb246ZCxzaGl2Q1NTOnAuc2hpdkNTUyE9PSExLHN1cHBvcnRzVW5rbm93bkVsZW1lbnRzOnUsc2hpdk1ldGhvZHM6cC5zaGl2TWV0aG9kcyE9PSExLHR5cGU6ImRlZmF1bHQiLHNoaXZEb2N1bWVudDpsLGNyZWF0ZUVsZW1lbnQ6cyxjcmVhdGVEb2N1bWVudEZyYWdtZW50Om99O2UuaHRtbDU9eSxsKHQpfSh0aGlzLHQpLGYuX3ZlcnNpb249aCxmLl9wcmVmaXhlcz14LGYuX2RvbVByZWZpeGVzPWssZi5fY3Nzb21QcmVmaXhlcz1FLGYubXE9SCxmLmhhc0V2ZW50PVIsZi50ZXN0UHJvcD1mdW5jdGlvbihlKXtyZXR1cm4gYShbZV0pfSxmLnRlc3RBbGxQcm9wcz1jLGYudGVzdFN0eWxlcz1ELGYucHJlZml4ZWQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0P2MoZSx0LG4pOmMoZSwicGZ4Iil9LHYuY2xhc3NOYW1lPXYuY2xhc3NOYW1lLnJlcGxhY2UoLyhefFxzKW5vLWpzKFxzfCQpLywiJDEkMiIpKyhnPyIganMgIitMLmpvaW4oIiAiKToiIiksZn0odGhpcyx0aGlzLmRvY3VtZW50KSxmdW5jdGlvbihlLHQpeyJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUuZG9jdW1lbnQ/dChlLCEwKTpmdW5jdGlvbihlKXtpZighZS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKTtyZXR1cm4gdChlKX06dChlKX0oInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3ZhciB0PWUubGVuZ3RoLG49Wi50eXBlKGUpO3JldHVybiJmdW5jdGlvbiI9PT1ufHxaLmlzV2luZG93KGUpPyExOjE9PT1lLm5vZGVUeXBlJiZ0PyEwOiJhcnJheSI9PT1ufHwwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiZ0PjAmJnQtMSBpbiBlfWZ1bmN0aW9uIGkoZSx0LG4pe2lmKFouaXNGdW5jdGlvbih0KSlyZXR1cm4gWi5ncmVwKGUsZnVuY3Rpb24oZSxpKXtyZXR1cm4hIXQuY2FsbChlLGksZSkhPT1ufSk7aWYodC5ub2RlVHlwZSlyZXR1cm4gWi5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10IT09bn0pO2lmKCJzdHJpbmciPT10eXBlb2YgdCl7aWYoYWUudGVzdCh0KSlyZXR1cm4gWi5maWx0ZXIodCxlLG4pO3Q9Wi5maWx0ZXIodCxlKX1yZXR1cm4gWi5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIEIuY2FsbCh0LGUpPj0wIT09bn0pfWZ1bmN0aW9uIHIoZSx0KXtmb3IoOyhlPWVbdF0pJiYxIT09ZS5ub2RlVHlwZTspO3JldHVybiBlfWZ1bmN0aW9uIHMoZSl7dmFyIHQ9ZmVbZV09e307cmV0dXJuIFouZWFjaChlLm1hdGNoKGhlKXx8W10sZnVuY3Rpb24oZSxuKXt0W25dPSEwfSksdH1mdW5jdGlvbiBvKCl7Sy5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixvLCExKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLG8sITEpLFoucmVhZHkoKX1mdW5jdGlvbiBhKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuY2FjaGU9e30sMCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue319fSksdGhpcy5leHBhbmRvPVouZXhwYW5kbythLnVpZCsrfWZ1bmN0aW9uIGwoZSx0LG4pe3ZhciBpO2lmKHZvaWQgMD09PW4mJjE9PT1lLm5vZGVUeXBlKWlmKGk9ImRhdGEtIit0LnJlcGxhY2UoYmUsIi0kMSIpLnRvTG93ZXJDYXNlKCksbj1lLmdldEF0dHJpYnV0ZShpKSwic3RyaW5nIj09dHlwZW9mIG4pe3RyeXtuPSJ0cnVlIj09PW4/ITA6ImZhbHNlIj09PW4/ITE6Im51bGwiPT09bj9udWxsOituKyIiPT09bj8rbjpfZS50ZXN0KG4pP1oucGFyc2VKU09OKG4pOm59Y2F0Y2gocil7fXllLnNldChlLHQsbil9ZWxzZSBuPXZvaWQgMDtyZXR1cm4gbn1mdW5jdGlvbiBjKCl7cmV0dXJuITB9ZnVuY3Rpb24gdSgpe3JldHVybiExfWZ1bmN0aW9uIGQoKXt0cnl7cmV0dXJuIEsuYWN0aXZlRWxlbWVudH1jYXRjaChlKXt9fWZ1bmN0aW9uIHAoZSx0KXtyZXR1cm4gWi5ub2RlTmFtZShlLCJ0YWJsZSIpJiZaLm5vZGVOYW1lKDExIT09dC5ub2RlVHlwZT90OnQuZmlyc3RDaGlsZCwidHIiKT9lLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHxlLmFwcGVuZENoaWxkKGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTplfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGUudHlwZT0obnVsbCE9PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpKyIvIitlLnR5cGUsZX1mdW5jdGlvbiBmKGUpe3ZhciB0PU1lLmV4ZWMoZS50eXBlKTtyZXR1cm4gdD9lLnR5cGU9dFsxXTplLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpLGV9ZnVuY3Rpb24gZyhlLHQpe2Zvcih2YXIgbj0wLGk9ZS5sZW5ndGg7aT5uO24rKyltZS5zZXQoZVtuXSwiZ2xvYmFsRXZhbCIsIXR8fG1lLmdldCh0W25dLCJnbG9iYWxFdmFsIikpfWZ1bmN0aW9uIHYoZSx0KXt2YXIgbixpLHIscyxvLGEsbCxjO2lmKDE9PT10Lm5vZGVUeXBlKXtpZihtZS5oYXNEYXRhKGUpJiYocz1tZS5hY2Nlc3MoZSksbz1tZS5zZXQodCxzKSxjPXMuZXZlbnRzKSl7ZGVsZXRlIG8uaGFuZGxlLG8uZXZlbnRzPXt9O2ZvcihyIGluIGMpZm9yKG49MCxpPWNbcl0ubGVuZ3RoO2k+bjtuKyspWi5ldmVudC5hZGQodCxyLGNbcl1bbl0pfXllLmhhc0RhdGEoZSkmJihhPXllLmFjY2VzcyhlKSxsPVouZXh0ZW5kKHt9LGEpLHllLnNldCh0LGwpKX19ZnVuY3Rpb24gbShlLHQpe3ZhciBuPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0fHwiKiIpOmUucXVlcnlTZWxlY3RvckFsbD9lLnF1ZXJ5U2VsZWN0b3JBbGwodHx8IioiKTpbXTtyZXR1cm4gdm9pZCAwPT09dHx8dCYmWi5ub2RlTmFtZShlLHQpP1oubWVyZ2UoW2VdLG4pOm59ZnVuY3Rpb24geShlLHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsiaW5wdXQiPT09biYmd2UudGVzdChlLnR5cGUpP3QuY2hlY2tlZD1lLmNoZWNrZWQ6KCJpbnB1dCI9PT1ufHwidGV4dGFyZWEiPT09bikmJih0LmRlZmF1bHRWYWx1ZT1lLmRlZmF1bHRWYWx1ZSl9ZnVuY3Rpb24gXyh0LG4pe3ZhciBpLHI9WihuLmNyZWF0ZUVsZW1lbnQodCkpLmFwcGVuZFRvKG4uYm9keSkscz1lLmdldERlZmF1bHRDb21wdXRlZFN0eWxlJiYoaT1lLmdldERlZmF1bHRDb21wdXRlZFN0eWxlKHJbMF0pKT9pLmRpc3BsYXk6Wi5jc3MoclswXSwiZGlzcGxheSIpO3JldHVybiByLmRldGFjaCgpLHN9ZnVuY3Rpb24gYihlKXt2YXIgdD1LLG49cWVbZV07cmV0dXJuIG58fChuPV8oZSx0KSwibm9uZSIhPT1uJiZufHwoSWU9KEllfHxaKCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikpLmFwcGVuZFRvKHQuZG9jdW1lbnRFbGVtZW50KSx0PUllWzBdLmNvbnRlbnREb2N1bWVudCx0LndyaXRlKCksdC5jbG9zZSgpLG49XyhlLHQpLEllLmRldGFjaCgpKSxxZVtlXT1uKSxufWZ1bmN0aW9uIFQoZSx0LG4pe3ZhciBpLHIscyxvLGE9ZS5zdHlsZTtyZXR1cm4gbj1ufHxXZShlKSxuJiYobz1uLmdldFByb3BlcnR5VmFsdWUodCl8fG5bdF0pLG4mJigiIiE9PW98fFouY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfHwobz1aLnN0eWxlKGUsdCkpLFVlLnRlc3QobykmJkZlLnRlc3QodCkmJihpPWEud2lkdGgscj1hLm1pbldpZHRoLHM9YS5tYXhXaWR0aCxhLm1pbldpZHRoPWEubWF4V2lkdGg9YS53aWR0aD1vLG89bi53aWR0aCxhLndpZHRoPWksYS5taW5XaWR0aD1yLGEubWF4V2lkdGg9cykpLHZvaWQgMCE9PW8/bysiIjpvfWZ1bmN0aW9uIFMoZSx0KXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9dCkuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19ZnVuY3Rpb24geChlLHQpe2lmKHQgaW4gZSlyZXR1cm4gdDtmb3IodmFyIG49dFswXS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSksaT10LHI9R2UubGVuZ3RoO3ItLTspaWYodD1HZVtyXStuLHQgaW4gZSlyZXR1cm4gdDtyZXR1cm4gaX1mdW5jdGlvbiB3KGUsdCxuKXt2YXIgaT16ZS5leGVjKHQpO3JldHVybiBpP01hdGgubWF4KDAsaVsxXS0obnx8MCkpKyhpWzJdfHwicHgiKTp0fWZ1bmN0aW9uIEUoZSx0LG4saSxyKXtmb3IodmFyIHM9bj09PShpPyJib3JkZXIiOiJjb250ZW50Iik/NDoid2lkdGgiPT09dD8xOjAsbz0wOzQ+cztzKz0yKSJtYXJnaW4iPT09biYmKG8rPVouY3NzKGUsbitTZVtzXSwhMCxyKSksaT8oImNvbnRlbnQiPT09biYmKG8tPVouY3NzKGUsInBhZGRpbmciK1NlW3NdLCEwLHIpKSwibWFyZ2luIiE9PW4mJihvLT1aLmNzcyhlLCJib3JkZXIiK1NlW3NdKyJXaWR0aCIsITAscikpKToobys9Wi5jc3MoZSwicGFkZGluZyIrU2Vbc10sITAsciksInBhZGRpbmciIT09biYmKG8rPVouY3NzKGUsImJvcmRlciIrU2Vbc10rIldpZHRoIiwhMCxyKSkpO3JldHVybiBvfWZ1bmN0aW9uIGsoZSx0LG4pe3ZhciBpPSEwLHI9IndpZHRoIj09PXQ/ZS5vZmZzZXRXaWR0aDplLm9mZnNldEhlaWdodCxzPVdlKGUpLG89ImJvcmRlci1ib3giPT09Wi5jc3MoZSwiYm94U2l6aW5nIiwhMSxzKTtpZigwPj1yfHxudWxsPT1yKXtpZihyPVQoZSx0LHMpLCgwPnJ8fG51bGw9PXIpJiYocj1lLnN0eWxlW3RdKSxVZS50ZXN0KHIpKXJldHVybiByO2k9byYmKEouYm94U2l6aW5nUmVsaWFibGUoKXx8cj09PWUuc3R5bGVbdF0pLHI9cGFyc2VGbG9hdChyKXx8MH1yZXR1cm4gcitFKGUsdCxufHwobz8iYm9yZGVyIjoiY29udGVudCIpLGkscykrInB4In1mdW5jdGlvbiBDKGUsdCl7Zm9yKHZhciBuLGkscixzPVtdLG89MCxhPWUubGVuZ3RoO2E+bztvKyspaT1lW29dLGkuc3R5bGUmJihzW29dPW1lLmdldChpLCJvbGRkaXNwbGF5Iiksbj1pLnN0eWxlLmRpc3BsYXksdD8oc1tvXXx8Im5vbmUiIT09bnx8KGkuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1pLnN0eWxlLmRpc3BsYXkmJnhlKGkpJiYoc1tvXT1tZS5hY2Nlc3MoaSwib2xkZGlzcGxheSIsYihpLm5vZGVOYW1lKSkpKToocj14ZShpKSwibm9uZSI9PT1uJiZyfHxtZS5zZXQoaSwib2xkZGlzcGxheSIscj9uOlouY3NzKGksImRpc3BsYXkiKSkpKTtmb3Iobz0wO2E+bztvKyspaT1lW29dLGkuc3R5bGUmJih0JiYibm9uZSIhPT1pLnN0eWxlLmRpc3BsYXkmJiIiIT09aS5zdHlsZS5kaXNwbGF5fHwoaS5zdHlsZS5kaXNwbGF5PXQ/c1tvXXx8IiI6Im5vbmUiKSk7cmV0dXJuIGV9ZnVuY3Rpb24gaihlLHQsbixpLHIpe3JldHVybiBuZXcgai5wcm90b3R5cGUuaW5pdChlLHQsbixpLHIpfWZ1bmN0aW9uIEEoKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe0plPXZvaWQgMH0pLEplPVoubm93KCl9ZnVuY3Rpb24gUChlLHQpe3ZhciBuLGk9MCxyPXtoZWlnaHQ6ZX07Zm9yKHQ9dD8xOjA7ND5pO2krPTItdCluPVNlW2ldLHJbIm1hcmdpbiIrbl09clsicGFkZGluZyIrbl09ZTtyZXR1cm4gdCYmKHIub3BhY2l0eT1yLndpZHRoPWUpLHJ9ZnVuY3Rpb24gTChlLHQsbil7Zm9yKHZhciBpLHI9KG50W3RdfHxbXSkuY29uY2F0KG50WyIqIl0pLHM9MCxvPXIubGVuZ3RoO28+cztzKyspaWYoaT1yW3NdLmNhbGwobix0LGUpKXJldHVybiBpfWZ1bmN0aW9uIE4oZSx0LG4pe3ZhciBpLHIscyxvLGEsbCxjLHUsZD10aGlzLHA9e30saD1lLnN0eWxlLGY9ZS5ub2RlVHlwZSYmeGUoZSksZz1tZS5nZXQoZSwiZnhzaG93Iik7bi5xdWV1ZXx8KGE9Wi5fcXVldWVIb29rcyhlLCJmeCIpLG51bGw9PWEudW5xdWV1ZWQmJihhLnVucXVldWVkPTAsbD1hLmVtcHR5LmZpcmUsYS5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7YS51bnF1ZXVlZHx8bCgpfSksYS51bnF1ZXVlZCsrLGQuYWx3YXlzKGZ1bmN0aW9uKCl7ZC5hbHdheXMoZnVuY3Rpb24oKXthLnVucXVldWVkLS0sWi5xdWV1ZShlLCJmeCIpLmxlbmd0aHx8YS5lbXB0eS5maXJlKCl9KX0pKSwxPT09ZS5ub2RlVHlwZSYmKCJoZWlnaHQiaW4gdHx8IndpZHRoImluIHQpJiYobi5vdmVyZmxvdz1baC5vdmVyZmxvdyxoLm92ZXJmbG93WCxoLm92ZXJmbG93WV0sYz1aLmNzcyhlLCJkaXNwbGF5IiksdT0ibm9uZSI9PT1jP21lLmdldChlLCJvbGRkaXNwbGF5Iil8fGIoZS5ub2RlTmFtZSk6YywiaW5saW5lIj09PXUmJiJub25lIj09PVouY3NzKGUsImZsb2F0IikmJihoLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxuLm92ZXJmbG93JiYoaC5vdmVyZmxvdz0iaGlkZGVuIixkLmFsd2F5cyhmdW5jdGlvbigpe2gub3ZlcmZsb3c9bi5vdmVyZmxvd1swXSxoLm92ZXJmbG93WD1uLm92ZXJmbG93WzFdLGgub3ZlcmZsb3dZPW4ub3ZlcmZsb3dbMl19KSk7Zm9yKGkgaW4gdClpZihyPXRbaV0sUWUuZXhlYyhyKSl7aWYoZGVsZXRlIHRbaV0scz1zfHwidG9nZ2xlIj09PXIscj09PShmPyJoaWRlIjoic2hvdyIpKXtpZigic2hvdyIhPT1yfHwhZ3x8dm9pZCAwPT09Z1tpXSljb250aW51ZTtmPSEwfXBbaV09ZyYmZ1tpXXx8Wi5zdHlsZShlLGkpfWVsc2UgYz12b2lkIDA7aWYoWi5pc0VtcHR5T2JqZWN0KHApKSJpbmxpbmUiPT09KCJub25lIj09PWM/YihlLm5vZGVOYW1lKTpjKSYmKGguZGlzcGxheT1jKTtlbHNle2c/ImhpZGRlbiJpbiBnJiYoZj1nLmhpZGRlbik6Zz1tZS5hY2Nlc3MoZSwiZnhzaG93Iix7fSkscyYmKGcuaGlkZGVuPSFmKSxmP1ooZSkuc2hvdygpOmQuZG9uZShmdW5jdGlvbigpe1ooZSkuaGlkZSgpfSksZC5kb25lKGZ1bmN0aW9uKCl7dmFyIHQ7bWUucmVtb3ZlKGUsImZ4c2hvdyIpO2Zvcih0IGluIHApWi5zdHlsZShlLHQscFt0XSl9KTtmb3IoaSBpbiBwKW89TChmP2dbaV06MCxpLGQpLGkgaW4gZ3x8KGdbaV09by5zdGFydCxmJiYoby5lbmQ9by5zdGFydCxvLnN0YXJ0PSJ3aWR0aCI9PT1pfHwiaGVpZ2h0Ij09PWk/MTowKSl9fWZ1bmN0aW9uIEQoZSx0KXt2YXIgbixpLHIscyxvO2ZvcihuIGluIGUpaWYoaT1aLmNhbWVsQ2FzZShuKSxyPXRbaV0scz1lW25dLFouaXNBcnJheShzKSYmKHI9c1sxXSxzPWVbbl09c1swXSksbiE9PWkmJihlW2ldPXMsZGVsZXRlIGVbbl0pLG89Wi5jc3NIb29rc1tpXSxvJiYiZXhwYW5kImluIG8pe3M9by5leHBhbmQocyksZGVsZXRlIGVbaV07Zm9yKG4gaW4gcyluIGluIGV8fChlW25dPXNbbl0sdFtuXT1yKX1lbHNlIHRbaV09cn1mdW5jdGlvbiBIKGUsdCxuKXt2YXIgaSxyLHM9MCxvPXR0Lmxlbmd0aCxhPVouRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgbC5lbGVtfSksbD1mdW5jdGlvbigpe2lmKHIpcmV0dXJuITE7Zm9yKHZhciB0PUplfHxBKCksbj1NYXRoLm1heCgwLGMuc3RhcnRUaW1lK2MuZHVyYXRpb24tdCksaT1uL2MuZHVyYXRpb258fDAscz0xLWksbz0wLGw9Yy50d2VlbnMubGVuZ3RoO2w+bztvKyspYy50d2VlbnNbb10ucnVuKHMpO3JldHVybiBhLm5vdGlmeVdpdGgoZSxbYyxzLG5dKSwxPnMmJmw/bjooYS5yZXNvbHZlV2l0aChlLFtjXSksITEpfSxjPWEucHJvbWlzZSh7ZWxlbTplLHByb3BzOlouZXh0ZW5kKHt9LHQpLG9wdHM6Wi5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e319LG4pLG9yaWdpbmFsUHJvcGVydGllczp0LG9yaWdpbmFsT3B0aW9uczpuLHN0YXJ0VGltZTpKZXx8QSgpLGR1cmF0aW9uOm4uZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKHQsbil7dmFyIGk9Wi5Ud2VlbihlLGMub3B0cyx0LG4sYy5vcHRzLnNwZWNpYWxFYXNpbmdbdF18fGMub3B0cy5lYXNpbmcpO3JldHVybiBjLnR3ZWVucy5wdXNoKGkpLGl9LHN0b3A6ZnVuY3Rpb24odCl7dmFyIG49MCxpPXQ/Yy50d2VlbnMubGVuZ3RoOjA7aWYocilyZXR1cm4gdGhpcztmb3Iocj0hMDtpPm47bisrKWMudHdlZW5zW25dLnJ1bigxKTtyZXR1cm4gdD9hLnJlc29sdmVXaXRoKGUsW2MsdF0pOmEucmVqZWN0V2l0aChlLFtjLHRdKSx0aGlzfX0pLHU9Yy5wcm9wcztmb3IoRCh1LGMub3B0cy5zcGVjaWFsRWFzaW5nKTtvPnM7cysrKWlmKGk9dHRbc10uY2FsbChjLGUsdSxjLm9wdHMpKXJldHVybiBpO3JldHVybiBaLm1hcCh1LEwsYyksWi5pc0Z1bmN0aW9uKGMub3B0cy5zdGFydCkmJmMub3B0cy5zdGFydC5jYWxsKGUsYyksWi5meC50aW1lcihaLmV4dGVuZChsLHtlbGVtOmUsYW5pbTpjLHF1ZXVlOmMub3B0cy5xdWV1ZX0pKSxjLnByb2dyZXNzKGMub3B0cy5wcm9ncmVzcykuZG9uZShjLm9wdHMuZG9uZSxjLm9wdHMuY29tcGxldGUpLmZhaWwoYy5vcHRzLmZhaWwpLmFsd2F5cyhjLm9wdHMuYWx3YXlzKX1mdW5jdGlvbiBSKGUpe3JldHVybiBmdW5jdGlvbih0LG4peyJzdHJpbmciIT10eXBlb2YgdCYmKG49dCx0PSIqIik7dmFyIGkscj0wLHM9dC50b0xvd2VyQ2FzZSgpLm1hdGNoKGhlKXx8W107aWYoWi5pc0Z1bmN0aW9uKG4pKWZvcig7aT1zW3IrK107KSIrIj09PWlbMF0/KGk9aS5zbGljZSgxKXx8IioiLChlW2ldPWVbaV18fFtdKS51bnNoaWZ0KG4pKTooZVtpXT1lW2ldfHxbXSkucHVzaChuKX19ZnVuY3Rpb24gTShlLHQsbixpKXtmdW5jdGlvbiByKGEpe3ZhciBsO3JldHVybiBzW2FdPSEwLFouZWFjaChlW2FdfHxbXSxmdW5jdGlvbihlLGEpe3ZhciBjPWEodCxuLGkpO3JldHVybiJzdHJpbmciIT10eXBlb2YgY3x8b3x8c1tjXT9vPyEobD1jKTp2b2lkIDA6KHQuZGF0YVR5cGVzLnVuc2hpZnQoYykscihjKSwhMSl9KSxsfXZhciBzPXt9LG89ZT09PV90O3JldHVybiByKHQuZGF0YVR5cGVzWzBdKXx8IXNbIioiXSYmcigiKiIpfWZ1bmN0aW9uICQoZSx0KXt2YXIgbixpLHI9Wi5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihuIGluIHQpdm9pZCAwIT09dFtuXSYmKChyW25dP2U6aXx8KGk9e30pKVtuXT10W25dKTtyZXR1cm4gaSYmWi5leHRlbmQoITAsZSxpKSxlfWZ1bmN0aW9uIE8oZSx0LG4pe2Zvcih2YXIgaSxyLHMsbyxhPWUuY29udGVudHMsbD1lLmRhdGFUeXBlczsiKiI9PT1sWzBdOylsLnNoaWZ0KCksdm9pZCAwPT09aSYmKGk9ZS5taW1lVHlwZXx8dC5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIikpO2lmKGkpZm9yKHIgaW4gYSlpZihhW3JdJiZhW3JdLnRlc3QoaSkpe2wudW5zaGlmdChyKTticmVha31pZihsWzBdaW4gbilzPWxbMF07ZWxzZXtmb3IociBpbiBuKXtpZighbFswXXx8ZS5jb252ZXJ0ZXJzW3IrIiAiK2xbMF1dKXtzPXI7YnJlYWt9b3x8KG89cil9cz1zfHxvfXJldHVybiBzPyhzIT09bFswXSYmbC51bnNoaWZ0KHMpLG5bc10pOnZvaWQgMH1mdW5jdGlvbiBJKGUsdCxuLGkpe3ZhciByLHMsbyxhLGwsYz17fSx1PWUuZGF0YVR5cGVzLnNsaWNlKCk7aWYodVsxXSlmb3IobyBpbiBlLmNvbnZlcnRlcnMpY1tvLnRvTG93ZXJDYXNlKCldPWUuY29udmVydGVyc1tvXTtmb3Iocz11LnNoaWZ0KCk7czspaWYoZS5yZXNwb25zZUZpZWxkc1tzXSYmKG5bZS5yZXNwb25zZUZpZWxkc1tzXV09dCksIWwmJmkmJmUuZGF0YUZpbHRlciYmKHQ9ZS5kYXRhRmlsdGVyKHQsZS5kYXRhVHlwZSkpLGw9cyxzPXUuc2hpZnQoKSlpZigiKiI9PT1zKXM9bDtlbHNlIGlmKCIqIiE9PWwmJmwhPT1zKXtpZihvPWNbbCsiICIrc118fGNbIiogIitzXSwhbylmb3IociBpbiBjKWlmKGE9ci5zcGxpdCgiICIpLGFbMV09PT1zJiYobz1jW2wrIiAiK2FbMF1dfHxjWyIqICIrYVswXV0pKXtvPT09ITA/bz1jW3JdOmNbcl0hPT0hMCYmKHM9YVswXSx1LnVuc2hpZnQoYVsxXSkpO2JyZWFrfWlmKG8hPT0hMClpZihvJiZlWyJ0aHJvd3MiXSl0PW8odCk7ZWxzZSB0cnl7dD1vKHQpfWNhdGNoKGQpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOm8/ZDoiTm8gY29udmVyc2lvbiBmcm9tICIrbCsiIHRvICIrc319fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTp0fX1mdW5jdGlvbiBxKGUsdCxuLGkpe3ZhciByO2lmKFouaXNBcnJheSh0KSlaLmVhY2godCxmdW5jdGlvbih0LHIpe258fHd0LnRlc3QoZSk/aShlLHIpOnEoZSsiWyIrKCJvYmplY3QiPT10eXBlb2Ygcj90OiIiKSsiXSIscixuLGkpfSk7ZWxzZSBpZihufHwib2JqZWN0IiE9PVoudHlwZSh0KSlpKGUsdCk7ZWxzZSBmb3IociBpbiB0KXEoZSsiWyIrcisiXSIsdFtyXSxuLGkpfWZ1bmN0aW9uIEYoZSl7cmV0dXJuIFouaXNXaW5kb3coZSk/ZTo5PT09ZS5ub2RlVHlwZSYmZS5kZWZhdWx0Vmlld312YXIgVT1bXSxXPVUuc2xpY2UsWD1VLmNvbmNhdCx6PVUucHVzaCxCPVUuaW5kZXhPZixWPXt9LFk9Vi50b1N0cmluZyxHPVYuaGFzT3duUHJvcGVydHksSj17fSxLPWUuZG9jdW1lbnQsUT0iMi4xLjMiLFo9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IFouZm4uaW5pdChlLHQpfSxlZT0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csdGU9L14tbXMtLyxuZT0vLShbXGRhLXpdKS9naSxpZT1mdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9O1ouZm49Wi5wcm90b3R5cGU9e2pxdWVyeTpRLGNvbnN0cnVjdG9yOlosc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBXLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT8wPmU/dGhpc1tlK3RoaXMubGVuZ3RoXTp0aGlzW2VdOlcuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGUpe3ZhciB0PVoubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGUpO3JldHVybiB0LnByZXZPYmplY3Q9dGhpcyx0LmNvbnRleHQ9dGhpcy5jb250ZXh0LHR9LGVhY2g6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gWi5lYWNoKHRoaXMsZSx0KX0sbWFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhaLm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4sdCl9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKFcuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5sZW5ndGgsbj0rZSsoMD5lP3Q6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4+PTAmJnQ+bj9bdGhpc1tuXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKG51bGwpfSxwdXNoOnosc29ydDpVLnNvcnQsc3BsaWNlOlUuc3BsaWNlfSxaLmV4dGVuZD1aLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBlLHQsbixpLHIscyxvPWFyZ3VtZW50c1swXXx8e30sYT0xLGw9YXJndW1lbnRzLmxlbmd0aCxjPSExO2ZvcigiYm9vbGVhbiI9PXR5cGVvZiBvJiYoYz1vLG89YXJndW1lbnRzW2FdfHx7fSxhKyspLCJvYmplY3QiPT10eXBlb2Ygb3x8Wi5pc0Z1bmN0aW9uKG8pfHwobz17fSksYT09PWwmJihvPXRoaXMsYS0tKTtsPmE7YSsrKWlmKG51bGwhPShlPWFyZ3VtZW50c1thXSkpZm9yKHQgaW4gZSluPW9bdF0saT1lW3RdLG8hPT1pJiYoYyYmaSYmKFouaXNQbGFpbk9iamVjdChpKXx8KHI9Wi5pc0FycmF5KGkpKSk/KHI/KHI9ITEscz1uJiZaLmlzQXJyYXkobik/bjpbXSk6cz1uJiZaLmlzUGxhaW5PYmplY3Qobik/bjp7fSxvW3RdPVouZXh0ZW5kKGMscyxpKSk6dm9pZCAwIT09aSYmKG9bdF09aSkpO3JldHVybiBvfSxaLmV4dGVuZCh7ZXhwYW5kbzoialF1ZXJ5IisoUStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCIiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihlKX0sbm9vcDpmdW5jdGlvbigpe30saXNGdW5jdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT09Wi50eXBlKGUpfSxpc0FycmF5OkFycmF5LmlzQXJyYXksaXNXaW5kb3c6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUmJmU9PT1lLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGUpe3JldHVybiFaLmlzQXJyYXkoZSkmJmUtcGFyc2VGbG9hdChlKSsxPj0wfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiIT09Wi50eXBlKGUpfHxlLm5vZGVUeXBlfHxaLmlzV2luZG93KGUpPyExOmUuY29uc3RydWN0b3ImJiFHLmNhbGwoZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsImlzUHJvdG90eXBlT2YiKT8hMTohMH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP2UrIiI6Im9iamVjdCI9PXR5cGVvZiBlfHwiZnVuY3Rpb24iPT10eXBlb2YgZT9WW1kuY2FsbChlKV18fCJvYmplY3QiOnR5cGVvZiBlfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZXZhbDtlPVoudHJpbShlKSxlJiYoMT09PWUuaW5kZXhPZigidXNlIHN0cmljdCIpPyh0PUsuY3JlYXRlRWxlbWVudCgic2NyaXB0IiksdC50ZXh0PWUsSy5oZWFkLmFwcGVuZENoaWxkKHQpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCkpOm4oZSkpfSxjYW1lbENhc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSh0ZSwibXMtIikucmVwbGFjZShuZSxpZSl9LG5vZGVOYW1lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihlLHQsaSl7dmFyIHIscz0wLG89ZS5sZW5ndGgsYT1uKGUpO2lmKGkpe2lmKGEpZm9yKDtvPnMmJihyPXQuYXBwbHkoZVtzXSxpKSxyIT09ITEpO3MrKyk7ZWxzZSBmb3IocyBpbiBlKWlmKHI9dC5hcHBseShlW3NdLGkpLHI9PT0hMSlicmVha31lbHNlIGlmKGEpZm9yKDtvPnMmJihyPXQuY2FsbChlW3NdLHMsZVtzXSksciE9PSExKTtzKyspO2Vsc2UgZm9yKHMgaW4gZSlpZihyPXQuY2FsbChlW3NdLHMsZVtzXSkscj09PSExKWJyZWFrO3JldHVybiBlfSx0cmltOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOihlKyIiKS5yZXBsYWNlKGVlLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIGk9dHx8W107cmV0dXJuIG51bGwhPWUmJihuKE9iamVjdChlKSk/Wi5tZXJnZShpLCJzdHJpbmciPT10eXBlb2YgZT9bZV06ZSk6ei5jYWxsKGksZSkpLGl9LGluQXJyYXk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT10Py0xOkIuY2FsbCh0LGUsbil9LG1lcmdlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPSt0Lmxlbmd0aCxpPTAscj1lLmxlbmd0aDtuPmk7aSsrKWVbcisrXT10W2ldO3JldHVybiBlLmxlbmd0aD1yLGV9LGdyZXA6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgaSxyPVtdLHM9MCxvPWUubGVuZ3RoLGE9IW47bz5zO3MrKylpPSF0KGVbc10scyksaSE9PWEmJnIucHVzaChlW3NdKTtyZXR1cm4gcn0sbWFwOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcixzPTAsbz1lLmxlbmd0aCxhPW4oZSksbD1bXTtpZihhKWZvcig7bz5zO3MrKylyPXQoZVtzXSxzLGkpLG51bGwhPXImJmwucHVzaChyKTtlbHNlIGZvcihzIGluIGUpcj10KGVbc10scyxpKSxudWxsIT1yJiZsLnB1c2gocik7cmV0dXJuIFguYXBwbHkoW10sbCl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihlLHQpe3ZhciBuLGkscjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJihuPWVbdF0sdD1lLGU9biksWi5pc0Z1bmN0aW9uKGUpPyhpPVcuY2FsbChhcmd1bWVudHMsMikscj1mdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHR8fHRoaXMsaS5jb25jYXQoVy5jYWxsKGFyZ3VtZW50cykpKX0sci5ndWlkPWUuZ3VpZD1lLmd1aWR8fFouZ3VpZCsrLHIpOnZvaWQgMH0sbm93OkRhdGUubm93LHN1cHBvcnQ6Sn0pLFouZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe1ZbIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7dmFyIHJlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0LG4saSl7dmFyIHIscyxvLGEsbCxjLGQsaCxmLGc7aWYoKHQ/dC5vd25lckRvY3VtZW50fHx0OnEpIT09TiYmTCh0KSx0PXR8fE4sbj1ufHxbXSxhPXQubm9kZVR5cGUsInN0cmluZyIhPXR5cGVvZiBlfHwhZXx8MSE9PWEmJjkhPT1hJiYxMSE9PWEpcmV0dXJuIG47aWYoIWkmJkgpe2lmKDExIT09YSYmKHI9eWUuZXhlYyhlKSkpaWYobz1yWzFdKXtpZig5PT09YSl7aWYocz10LmdldEVsZW1lbnRCeUlkKG8pLCFzfHwhcy5wYXJlbnROb2RlKXJldHVybiBuO2lmKHMuaWQ9PT1vKXJldHVybiBuLnB1c2gocyksbn1lbHNlIGlmKHQub3duZXJEb2N1bWVudCYmKHM9dC5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG8pKSYmTyh0LHMpJiZzLmlkPT09bylyZXR1cm4gbi5wdXNoKHMpLG59ZWxzZXtpZihyWzJdKXJldHVybiBRLmFwcGx5KG4sdC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKSksbjtpZigobz1yWzNdKSYmVC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBRLmFwcGx5KG4sdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG8pKSxufWlmKFQucXNhJiYoIVJ8fCFSLnRlc3QoZSkpKXtpZihoPWQ9SSxmPXQsZz0xIT09YSYmZSwxPT09YSYmIm9iamVjdCIhPT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2ZvcihjPUUoZSksKGQ9dC5nZXRBdHRyaWJ1dGUoImlkIikpP2g9ZC5yZXBsYWNlKGJlLCJcXCQmIik6dC5zZXRBdHRyaWJ1dGUoImlkIixoKSxoPSJbaWQ9JyIraCsiJ10gIixsPWMubGVuZ3RoO2wtLTspY1tsXT1oK3AoY1tsXSk7Zj1fZS50ZXN0KGUpJiZ1KHQucGFyZW50Tm9kZSl8fHQsZz1jLmpvaW4oIiwiKX1pZihnKXRyeXtyZXR1cm4gUS5hcHBseShuLGYucXVlcnlTZWxlY3RvckFsbChnKSksbn1jYXRjaCh2KXt9ZmluYWxseXtkfHx0LnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fXJldHVybiBDKGUucmVwbGFjZShsZSwiJDEiKSx0LG4saSl9ZnVuY3Rpb24gbigpe2Z1bmN0aW9uIGUobixpKXtyZXR1cm4gdC5wdXNoKG4rIiAiKT5TLmNhY2hlTGVuZ3RoJiZkZWxldGUgZVt0LnNoaWZ0KCldLGVbbisiICJdPWl9dmFyIHQ9W107cmV0dXJuIGV9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZVtJXT0hMCxlfWZ1bmN0aW9uIHIoZSl7dmFyIHQ9Ti5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFlKHQpfWNhdGNoKG4pe3JldHVybiExfWZpbmFsbHl7dC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCksdD1udWxsfX1mdW5jdGlvbiBzKGUsdCl7Zm9yKHZhciBuPWUuc3BsaXQoInwiKSxpPWUubGVuZ3RoO2ktLTspUy5hdHRySGFuZGxlW25baV1dPXR9ZnVuY3Rpb24gbyhlLHQpe3ZhciBuPXQmJmUsaT1uJiYxPT09ZS5ub2RlVHlwZSYmMT09PXQubm9kZVR5cGUmJih+dC5zb3VyY2VJbmRleHx8ViktKH5lLnNvdXJjZUluZGV4fHxWKTtpZihpKXJldHVybiBpO2lmKG4pZm9yKDtuPW4ubmV4dFNpYmxpbmc7KWlmKG49PT10KXJldHVybi0xO3JldHVybiBlPzE6LTF9ZnVuY3Rpb24gYShlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1uJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBsKGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKCJpbnB1dCI9PT1ufHwiYnV0dG9uIj09PW4pJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBjKGUpe3JldHVybiBpKGZ1bmN0aW9uKHQpe3JldHVybiB0PSt0LGkoZnVuY3Rpb24obixpKXtmb3IodmFyIHIscz1lKFtdLG4ubGVuZ3RoLHQpLG89cy5sZW5ndGg7by0tOyluW3I9c1tvXV0mJihuW3JdPSEoaVtyXT1uW3JdKSl9KX0pfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIGUmJiJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZSYmZX1mdW5jdGlvbiBkKCl7fWZ1bmN0aW9uIHAoZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aCxpPSIiO24+dDt0KyspaSs9ZVt0XS52YWx1ZTtyZXR1cm4gaX1mdW5jdGlvbiBoKGUsdCxuKXt2YXIgaT10LmRpcixyPW4mJiJwYXJlbnROb2RlIj09PWkscz1VKys7cmV0dXJuIHQuZmlyc3Q/ZnVuY3Rpb24odCxuLHMpe2Zvcig7dD10W2ldOylpZigxPT09dC5ub2RlVHlwZXx8cilyZXR1cm4gZSh0LG4scyl9OmZ1bmN0aW9uKHQsbixvKXt2YXIgYSxsLGM9W0Ysc107aWYobyl7Zm9yKDt0PXRbaV07KWlmKCgxPT09dC5ub2RlVHlwZXx8cikmJmUodCxuLG8pKXJldHVybiEwfWVsc2UgZm9yKDt0PXRbaV07KWlmKDE9PT10Lm5vZGVUeXBlfHxyKXtpZihsPXRbSV18fCh0W0ldPXt9KSwoYT1sW2ldKSYmYVswXT09PUYmJmFbMV09PT1zKXJldHVybiBjWzJdPWFbMl07aWYobFtpXT1jLGNbMl09ZSh0LG4sbykpcmV0dXJuITB9fX1mdW5jdGlvbiBmKGUpe3JldHVybiBlLmxlbmd0aD4xP2Z1bmN0aW9uKHQsbixpKXtmb3IodmFyIHI9ZS5sZW5ndGg7ci0tOylpZighZVtyXSh0LG4saSkpcmV0dXJuITE7cmV0dXJuITB9OmVbMF19ZnVuY3Rpb24gZyhlLG4saSl7Zm9yKHZhciByPTAscz1uLmxlbmd0aDtzPnI7cisrKXQoZSxuW3JdLGkpO3JldHVybiBpfWZ1bmN0aW9uIHYoZSx0LG4saSxyKXtmb3IodmFyIHMsbz1bXSxhPTAsbD1lLmxlbmd0aCxjPW51bGwhPXQ7bD5hO2ErKykocz1lW2FdKSYmKCFufHxuKHMsaSxyKSkmJihvLnB1c2gocyksYyYmdC5wdXNoKGEpKTtyZXR1cm4gb31mdW5jdGlvbiBtKGUsdCxuLHIscyxvKXtyZXR1cm4gciYmIXJbSV0mJihyPW0ocikpLHMmJiFzW0ldJiYocz1tKHMsbykpLGkoZnVuY3Rpb24oaSxvLGEsbCl7dmFyIGMsdSxkLHA9W10saD1bXSxmPW8ubGVuZ3RoLG09aXx8Zyh0fHwiKiIsYS5ub2RlVHlwZT9bYV06YSxbXSkseT0hZXx8IWkmJnQ/bTp2KG0scCxlLGEsbCksXz1uP3N8fChpP2U6Znx8cik/W106bzp5O2lmKG4mJm4oeSxfLGEsbCkscilmb3IoYz12KF8saCkscihjLFtdLGEsbCksdT1jLmxlbmd0aDt1LS07KShkPWNbdV0pJiYoX1toW3VdXT0hKHlbaFt1XV09ZCkpO2lmKGkpe2lmKHN8fGUpe2lmKHMpe2ZvcihjPVtdLHU9Xy5sZW5ndGg7dS0tOykoZD1fW3VdKSYmYy5wdXNoKHlbdV09ZCk7cyhudWxsLF89W10sYyxsKX1mb3IodT1fLmxlbmd0aDt1LS07KShkPV9bdV0pJiYoYz1zP2VlKGksZCk6cFt1XSk+LTEmJihpW2NdPSEob1tjXT1kKSl9fWVsc2UgXz12KF89PT1vP18uc3BsaWNlKGYsXy5sZW5ndGgpOl8pLHM/cyhudWxsLG8sXyxsKTpRLmFwcGx5KG8sXyl9KX1mdW5jdGlvbiB5KGUpe2Zvcih2YXIgdCxuLGkscj1lLmxlbmd0aCxzPVMucmVsYXRpdmVbZVswXS50eXBlXSxvPXN8fFMucmVsYXRpdmVbIiAiXSxhPXM/MTowLGw9aChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LG8sITApLGM9aChmdW5jdGlvbihlKXtyZXR1cm4gZWUodCxlKT4tMX0sbywhMCksdT1bZnVuY3Rpb24oZSxuLGkpe3ZhciByPSFzJiYoaXx8biE9PWopfHwoKHQ9bikubm9kZVR5cGU/bChlLG4saSk6YyhlLG4saSkpO3JldHVybiB0PW51bGwscn1dO3I+YTthKyspaWYobj1TLnJlbGF0aXZlW2VbYV0udHlwZV0pdT1baChmKHUpLG4pXTtlbHNle2lmKG49Uy5maWx0ZXJbZVthXS50eXBlXS5hcHBseShudWxsLGVbYV0ubWF0Y2hlcyksbltJXSl7Zm9yKGk9KythO3I+aSYmIVMucmVsYXRpdmVbZVtpXS50eXBlXTtpKyspO3JldHVybiBtKGE+MSYmZih1KSxhPjEmJnAoZS5zbGljZSgwLGEtMSkuY29uY2F0KHt2YWx1ZToiICI9PT1lW2EtMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZShsZSwiJDEiKSxuLGk+YSYmeShlLnNsaWNlKGEsaSkpLHI+aSYmeShlPWUuc2xpY2UoaSkpLHI+aSYmcChlKSl9dS5wdXNoKG4pfXJldHVybiBmKHUpfWZ1bmN0aW9uIF8oZSxuKXt2YXIgcj1uLmxlbmd0aD4wLHM9ZS5sZW5ndGg+MCxvPWZ1bmN0aW9uKGksbyxhLGwsYyl7dmFyIHUsZCxwLGg9MCxmPSIwIixnPWkmJltdLG09W10seT1qLF89aXx8cyYmUy5maW5kLlRBRygiKiIsYyksYj1GKz1udWxsPT15PzE6TWF0aC5yYW5kb20oKXx8LjEsVD1fLmxlbmd0aDtmb3IoYyYmKGo9byE9PU4mJm8pO2YhPT1UJiZudWxsIT0odT1fW2ZdKTtmKyspe2lmKHMmJnUpe2ZvcihkPTA7cD1lW2QrK107KWlmKHAodSxvLGEpKXtsLnB1c2godSk7YnJlYWt9YyYmKEY9Yil9ciYmKCh1PSFwJiZ1KSYmaC0tLGkmJmcucHVzaCh1KSl9aWYoaCs9ZixyJiZmIT09aCl7Zm9yKGQ9MDtwPW5bZCsrXTspcChnLG0sbyxhKTtpZihpKXtpZihoPjApZm9yKDtmLS07KWdbZl18fG1bZl18fChtW2ZdPUouY2FsbChsKSk7bT12KG0pfVEuYXBwbHkobCxtKSxjJiYhaSYmbS5sZW5ndGg+MCYmaCtuLmxlbmd0aD4xJiZ0LnVuaXF1ZVNvcnQobCl9cmV0dXJuIGMmJihGPWIsaj15KSxnfTtyZXR1cm4gcj9pKG8pOm99dmFyIGIsVCxTLHgsdyxFLGssQyxqLEEsUCxMLE4sRCxILFIsTSwkLE8sST0ic2l6emxlIisxKm5ldyBEYXRlLHE9ZS5kb2N1bWVudCxGPTAsVT0wLFc9bigpLFg9bigpLHo9bigpLEI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQmJihQPSEwKSwwfSxWPTE8PDMxLFk9e30uaGFzT3duUHJvcGVydHksRz1bXSxKPUcucG9wLEs9Ry5wdXNoLFE9Ry5wdXNoLFo9Ry5zbGljZSxlZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wLGk9ZS5sZW5ndGg7aT5uO24rKylpZihlW25dPT09dClyZXR1cm4gbjtyZXR1cm4tMX0sdGU9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixuZT0iW1xceDIwXFx0XFxyXFxuXFxmXSIsaWU9Iig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIixyZT1pZS5yZXBsYWNlKCJ3IiwidyMiKSxzZT0iXFxbIituZSsiKigiK2llKyIpKD86IituZSsiKihbKl4kfCF+XT89KSIrbmUrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIityZSsiKSl8KSIrbmUrIipcXF0iLG9lPSI6KCIraWUrIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK3NlKyIpKil8LiopXFwpfCkiLGFlPW5ldyBSZWdFeHAobmUrIisiLCJnIiksbGU9bmV3IFJlZ0V4cCgiXiIrbmUrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrbmUrIiskIiwiZyIpLGNlPW5ldyBSZWdFeHAoIl4iK25lKyIqLCIrbmUrIioiKSx1ZT1uZXcgUmVnRXhwKCJeIituZSsiKihbPit+XXwiK25lKyIpIituZSsiKiIpLGRlPW5ldyBSZWdFeHAoIj0iK25lKyIqKFteXFxdJ1wiXSo/KSIrbmUrIipcXF0iLCJnIikscGU9bmV3IFJlZ0V4cChvZSksaGU9bmV3IFJlZ0V4cCgiXiIrcmUrIiQiKSxmZT17SUQ6bmV3IFJlZ0V4cCgiXiMoIitpZSsiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitpZSsiKSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIraWUucmVwbGFjZSgidyIsIncqIikrIikiKSxBVFRSOm5ldyBSZWdFeHAoIl4iK3NlKSxQU0VVRE86bmV3IFJlZ0V4cCgiXiIrb2UpLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrbmUrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK25lKyIqKD86KFsrLV18KSIrbmUrIiooXFxkKyl8KSkiK25lKyIqXFwpfCkiLCJpIiksYm9vbDpuZXcgUmVnRXhwKCJeKD86Iit0ZSsiKSQiLCJpIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoIl4iK25lKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK25lKyIqKCg/Oi1cXGQpP1xcZCopIituZSsiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sZ2U9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSx2ZT0vXmhcZCQvaSxtZT0vXltee10rXHtccypcW25hdGl2ZSBcdy8seWU9L14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLyxfZT0vWyt+XS8sYmU9Lyd8XFwvZyxUZT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK25lKyI/fCgiK25lKyIpfC4pIiwiaWciKSxTZT1mdW5jdGlvbihlLHQsbil7dmFyIGk9IjB4Iit0LTY1NTM2O3JldHVybiBpIT09aXx8bj90OjA+aT9TdHJpbmcuZnJvbUNoYXJDb2RlKGkrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoaT4+MTB8NTUyOTYsMTAyMyZpfDU2MzIwKX0seGU9ZnVuY3Rpb24oKXtMKCl9O3RyeXtRLmFwcGx5KEc9Wi5jYWxsKHEuY2hpbGROb2RlcykscS5jaGlsZE5vZGVzKSxHW3EuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKHdlKXtRPXthcHBseTpHLmxlbmd0aD9mdW5jdGlvbihlLHQpe0suYXBwbHkoZSxaLmNhbGwodCkpfTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1lLmxlbmd0aCxpPTA7ZVtuKytdPXRbaSsrXTspO2UubGVuZ3RoPW4tMX19fVQ9dC5zdXBwb3J0PXt9LHc9dC5pc1hNTD1mdW5jdGlvbihlKXt2YXIgdD1lJiYoZS5vd25lckRvY3VtZW50fHxlKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIHQ/IkhUTUwiIT09dC5ub2RlTmFtZTohMX0sTD10LnNldERvY3VtZW50PWZ1bmN0aW9uKGUpe3ZhciB0LG4saT1lP2Uub3duZXJEb2N1bWVudHx8ZTpxO3JldHVybiBpIT09TiYmOT09PWkubm9kZVR5cGUmJmkuZG9jdW1lbnRFbGVtZW50PyhOPWksRD1pLmRvY3VtZW50RWxlbWVudCxuPWkuZGVmYXVsdFZpZXcsbiYmbiE9PW4udG9wJiYobi5hZGRFdmVudExpc3RlbmVyP24uYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIix4ZSwhMSk6bi5hdHRhY2hFdmVudCYmbi5hdHRhY2hFdmVudCgib251bmxvYWQiLHhlKSksSD0hdyhpKSxULmF0dHJpYnV0ZXM9cihmdW5jdGlvbihlKXtyZXR1cm4gZS5jbGFzc05hbWU9ImkiLCFlLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxULmdldEVsZW1lbnRzQnlUYWdOYW1lPXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuYXBwZW5kQ2hpbGQoaS5jcmVhdGVDb21tZW50KCIiKSksIWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGh9KSxULmdldEVsZW1lbnRzQnlDbGFzc05hbWU9bWUudGVzdChpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLFQuZ2V0QnlJZD1yKGZ1bmN0aW9uKGUpe3JldHVybiBELmFwcGVuZENoaWxkKGUpLmlkPUksIWkuZ2V0RWxlbWVudHNCeU5hbWV8fCFpLmdldEVsZW1lbnRzQnlOYW1lKEkpLmxlbmd0aH0pLFQuZ2V0QnlJZD8oUy5maW5kLklEPWZ1bmN0aW9uKGUsdCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0LmdldEVsZW1lbnRCeUlkJiZIKXt2YXIgbj10LmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiBuJiZuLnBhcmVudE5vZGU/W25dOltdfX0sUy5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKFRlLFNlKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJpZCIpPT09dH19KTooZGVsZXRlIFMuZmluZC5JRCxTLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UoVGUsU2UpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj0idW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBuJiZuLnZhbHVlPT09dH19KSxTLmZpbmQuVEFHPVQuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oZSx0KXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudHNCeVRhZ05hbWU/dC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKTpULnFzYT90LnF1ZXJ5U2VsZWN0b3JBbGwoZSk6dm9pZCAwO306ZnVuY3Rpb24oZSx0KXt2YXIgbixpPVtdLHI9MCxzPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk7aWYoIioiPT09ZSl7Zm9yKDtuPXNbcisrXTspMT09PW4ubm9kZVR5cGUmJmkucHVzaChuKTtyZXR1cm4gaX1yZXR1cm4gc30sUy5maW5kLkNMQVNTPVQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oZSx0KXtyZXR1cm4gSD90LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZSk6dm9pZCAwfSxNPVtdLFI9W10sKFQucXNhPW1lLnRlc3QoaS5xdWVyeVNlbGVjdG9yQWxsKSkmJihyKGZ1bmN0aW9uKGUpe0QuYXBwZW5kQ2hpbGQoZSkuaW5uZXJIVE1MPSI8YSBpZD0nIitJKyInPjwvYT48c2VsZWN0IGlkPSciK0krIi1cZl0nIG1zYWxsb3djYXB0dXJlPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IixlLnF1ZXJ5U2VsZWN0b3JBbGwoIlttc2FsbG93Y2FwdHVyZV49JyddIikubGVuZ3RoJiZSLnB1c2goIlsqXiRdPSIrbmUrIiooPzonJ3xcIlwiKSIpLGUucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8Ui5wdXNoKCJcXFsiK25lKyIqKD86dmFsdWV8Iit0ZSsiKSIpLGUucXVlcnlTZWxlY3RvckFsbCgiW2lkfj0iK0krIi1dIikubGVuZ3RofHxSLnB1c2goIn49IiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8Ui5wdXNoKCI6Y2hlY2tlZCIpLGUucXVlcnlTZWxlY3RvckFsbCgiYSMiK0krIisqIikubGVuZ3RofHxSLnB1c2goIi4jLitbK35dIil9KSxyKGZ1bmN0aW9uKGUpe3ZhciB0PWkuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTt0LnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGUuYXBwZW5kQ2hpbGQodCkuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGUucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJlIucHVzaCgibmFtZSIrbmUrIipbKl4kfCF+XT89IiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aHx8Ui5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpLGUucXVlcnlTZWxlY3RvckFsbCgiKiw6eCIpLFIucHVzaCgiLC4qOiIpfSkpLChULm1hdGNoZXNTZWxlY3Rvcj1tZS50ZXN0KCQ9RC5tYXRjaGVzfHxELndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8RC5tb3pNYXRjaGVzU2VsZWN0b3J8fEQub01hdGNoZXNTZWxlY3Rvcnx8RC5tc01hdGNoZXNTZWxlY3RvcikpJiZyKGZ1bmN0aW9uKGUpe1QuZGlzY29ubmVjdGVkTWF0Y2g9JC5jYWxsKGUsImRpdiIpLCQuY2FsbChlLCJbcyE9JyddOngiKSxNLnB1c2goIiE9IixvZSl9KSxSPVIubGVuZ3RoJiZuZXcgUmVnRXhwKFIuam9pbigifCIpKSxNPU0ubGVuZ3RoJiZuZXcgUmVnRXhwKE0uam9pbigifCIpKSx0PW1lLnRlc3QoRC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksTz10fHxtZS50ZXN0KEQuY29udGFpbnMpP2Z1bmN0aW9uKGUsdCl7dmFyIG49OT09PWUubm9kZVR5cGU/ZS5kb2N1bWVudEVsZW1lbnQ6ZSxpPXQmJnQucGFyZW50Tm9kZTtyZXR1cm4gZT09PWl8fCEoIWl8fDEhPT1pLm5vZGVUeXBlfHwhKG4uY29udGFpbnM/bi5jb250YWlucyhpKTplLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGkpKSl9OmZ1bmN0aW9uKGUsdCl7aWYodClmb3IoO3Q9dC5wYXJlbnROb2RlOylpZih0PT09ZSlyZXR1cm4hMDtyZXR1cm4hMX0sQj10P2Z1bmN0aW9uKGUsdCl7aWYoZT09PXQpcmV0dXJuIFA9ITAsMDt2YXIgbj0hZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gbj9uOihuPShlLm93bmVyRG9jdW1lbnR8fGUpPT09KHQub3duZXJEb2N1bWVudHx8dCk/ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KToxLDEmbnx8IVQuc29ydERldGFjaGVkJiZ0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGUpPT09bj9lPT09aXx8ZS5vd25lckRvY3VtZW50PT09cSYmTyhxLGUpPy0xOnQ9PT1pfHx0Lm93bmVyRG9jdW1lbnQ9PT1xJiZPKHEsdCk/MTpBP2VlKEEsZSktZWUoQSx0KTowOjQmbj8tMToxKX06ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gUD0hMCwwO3ZhciBuLHI9MCxzPWUucGFyZW50Tm9kZSxhPXQucGFyZW50Tm9kZSxsPVtlXSxjPVt0XTtpZighc3x8IWEpcmV0dXJuIGU9PT1pPy0xOnQ9PT1pPzE6cz8tMTphPzE6QT9lZShBLGUpLWVlKEEsdCk6MDtpZihzPT09YSlyZXR1cm4gbyhlLHQpO2ZvcihuPWU7bj1uLnBhcmVudE5vZGU7KWwudW5zaGlmdChuKTtmb3Iobj10O249bi5wYXJlbnROb2RlOyljLnVuc2hpZnQobik7Zm9yKDtsW3JdPT09Y1tyXTspcisrO3JldHVybiByP28obFtyXSxjW3JdKTpsW3JdPT09cT8tMTpjW3JdPT09cT8xOjB9LGkpOk59LHQubWF0Y2hlcz1mdW5jdGlvbihlLG4pe3JldHVybiB0KGUsbnVsbCxudWxsLG4pfSx0Lm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlLG4pe2lmKChlLm93bmVyRG9jdW1lbnR8fGUpIT09TiYmTChlKSxuPW4ucmVwbGFjZShkZSwiPSckMSddIiksVC5tYXRjaGVzU2VsZWN0b3ImJkgmJighTXx8IU0udGVzdChuKSkmJighUnx8IVIudGVzdChuKSkpdHJ5e3ZhciBpPSQuY2FsbChlLG4pO2lmKGl8fFQuZGlzY29ubmVjdGVkTWF0Y2h8fGUuZG9jdW1lbnQmJjExIT09ZS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gaX1jYXRjaChyKXt9cmV0dXJuIHQobixOLG51bGwsW2VdKS5sZW5ndGg+MH0sdC5jb250YWlucz1mdW5jdGlvbihlLHQpe3JldHVybihlLm93bmVyRG9jdW1lbnR8fGUpIT09TiYmTChlKSxPKGUsdCl9LHQuYXR0cj1mdW5jdGlvbihlLHQpeyhlLm93bmVyRG9jdW1lbnR8fGUpIT09TiYmTChlKTt2YXIgbj1TLmF0dHJIYW5kbGVbdC50b0xvd2VyQ2FzZSgpXSxpPW4mJlkuY2FsbChTLmF0dHJIYW5kbGUsdC50b0xvd2VyQ2FzZSgpKT9uKGUsdCwhSCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1pP2k6VC5hdHRyaWJ1dGVzfHwhSD9lLmdldEF0dHJpYnV0ZSh0KTooaT1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZpLnNwZWNpZmllZD9pLnZhbHVlOm51bGx9LHQuZXJyb3I9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK2UpfSx0LnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXSxpPTAscj0wO2lmKFA9IVQuZGV0ZWN0RHVwbGljYXRlcyxBPSFULnNvcnRTdGFibGUmJmUuc2xpY2UoMCksZS5zb3J0KEIpLFApe2Zvcig7dD1lW3IrK107KXQ9PT1lW3JdJiYoaT1uLnB1c2gocikpO2Zvcig7aS0tOyllLnNwbGljZShuW2ldLDEpfXJldHVybiBBPW51bGwsZX0seD10LmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixpPTAscj1lLm5vZGVUeXBlO2lmKHIpe2lmKDE9PT1yfHw5PT09cnx8MTE9PT1yKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPXgoZSl9ZWxzZSBpZigzPT09cnx8ND09PXIpcmV0dXJuIGUubm9kZVZhbHVlfWVsc2UgZm9yKDt0PWVbaSsrXTspbis9eCh0KTtyZXR1cm4gbn0sUz10LnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmksbWF0Y2g6ZmUsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOnsiPiI6e2RpcjoicGFyZW50Tm9kZSIsZmlyc3Q6ITB9LCIgIjp7ZGlyOiJwYXJlbnROb2RlIn0sIisiOntkaXI6InByZXZpb3VzU2libGluZyIsZmlyc3Q6ITB9LCJ+Ijp7ZGlyOiJwcmV2aW91c1NpYmxpbmcifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGUpe3JldHVybiBlWzFdPWVbMV0ucmVwbGFjZShUZSxTZSksZVszXT0oZVszXXx8ZVs0XXx8ZVs1XXx8IiIpLnJlcGxhY2UoVGUsU2UpLCJ+PSI9PT1lWzJdJiYoZVszXT0iICIrZVszXSsiICIpLGUuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09ZVsxXS5zbGljZSgwLDMpPyhlWzNdfHx0LmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJldmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVszXSkpOmVbM10mJnQuZXJyb3IoZVswXSksZX0sUFNFVURPOmZ1bmN0aW9uKGUpe3ZhciB0LG49IWVbNl0mJmVbMl07cmV0dXJuIGZlLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVszXT9lWzJdPWVbNF18fGVbNV18fCIiOm4mJnBlLnRlc3QobikmJih0PUUobiwhMCkpJiYodD1uLmluZGV4T2YoIikiLG4ubGVuZ3RoLXQpLW4ubGVuZ3RoKSYmKGVbMF09ZVswXS5zbGljZSgwLHQpLGVbMl09bi5zbGljZSgwLHQpKSxlLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKFRlLFNlKS50b0xvd2VyQ2FzZSgpO3JldHVybiIqIj09PWU/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oZSl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXR9fSxDTEFTUzpmdW5jdGlvbihlKXt2YXIgdD1XW2UrIiAiXTtyZXR1cm4gdHx8KHQ9bmV3IFJlZ0V4cCgiKF58IituZSsiKSIrZSsiKCIrbmUrInwkKSIpKSYmVyhlLGZ1bmN0aW9uKGUpe3JldHVybiB0LnRlc3QoInN0cmluZyI9PXR5cGVvZiBlLmNsYXNzTmFtZSYmZS5jbGFzc05hbWV8fCJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihlLG4saSl7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBzPXQuYXR0cihyLGUpO3JldHVybiBudWxsPT1zPyIhPSI9PT1uOm4/KHMrPSIiLCI9Ij09PW4/cz09PWk6IiE9Ij09PW4/cyE9PWk6Il49Ij09PW4/aSYmMD09PXMuaW5kZXhPZihpKToiKj0iPT09bj9pJiZzLmluZGV4T2YoaSk+LTE6IiQ9Ij09PW4/aSYmcy5zbGljZSgtaS5sZW5ndGgpPT09aToifj0iPT09bj8oIiAiK3MucmVwbGFjZShhZSwiICIpKyIgIikuaW5kZXhPZihpKT4tMToifD0iPT09bj9zPT09aXx8cy5zbGljZSgwLGkubGVuZ3RoKzEpPT09aSsiLSI6ITEpOiEwfX0sQ0hJTEQ6ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgcz0ibnRoIiE9PWUuc2xpY2UoMCwzKSxvPSJsYXN0IiE9PWUuc2xpY2UoLTQpLGE9Im9mLXR5cGUiPT09dDtyZXR1cm4gMT09PWkmJjA9PT1yP2Z1bmN0aW9uKGUpe3JldHVybiEhZS5wYXJlbnROb2RlfTpmdW5jdGlvbih0LG4sbCl7dmFyIGMsdSxkLHAsaCxmLGc9cyE9PW8/Im5leHRTaWJsaW5nIjoicHJldmlvdXNTaWJsaW5nIix2PXQucGFyZW50Tm9kZSxtPWEmJnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSx5PSFsJiYhYTtpZih2KXtpZihzKXtmb3IoO2c7KXtmb3IoZD10O2Q9ZFtnXTspaWYoYT9kLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1tOjE9PT1kLm5vZGVUeXBlKXJldHVybiExO2Y9Zz0ib25seSI9PT1lJiYhZiYmIm5leHRTaWJsaW5nIn1yZXR1cm4hMH1pZihmPVtvP3YuZmlyc3RDaGlsZDp2Lmxhc3RDaGlsZF0sbyYmeSl7Zm9yKHU9dltJXXx8KHZbSV09e30pLGM9dVtlXXx8W10saD1jWzBdPT09RiYmY1sxXSxwPWNbMF09PT1GJiZjWzJdLGQ9aCYmdi5jaGlsZE5vZGVzW2hdO2Q9KytoJiZkJiZkW2ddfHwocD1oPTApfHxmLnBvcCgpOylpZigxPT09ZC5ub2RlVHlwZSYmKytwJiZkPT09dCl7dVtlXT1bRixoLHBdO2JyZWFrfX1lbHNlIGlmKHkmJihjPSh0W0ldfHwodFtJXT17fSkpW2VdKSYmY1swXT09PUYpcD1jWzFdO2Vsc2UgZm9yKDsoZD0rK2gmJmQmJmRbZ118fChwPWg9MCl8fGYucG9wKCkpJiYoKGE/ZC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09bToxIT09ZC5ub2RlVHlwZSl8fCErK3B8fCh5JiYoKGRbSV18fChkW0ldPXt9KSlbZV09W0YscF0pLGQhPT10KSk7KTtyZXR1cm4gcC09cixwPT09aXx8cCVpPT09MCYmcC9pPj0wfX19LFBTRVVETzpmdW5jdGlvbihlLG4pe3ZhciByLHM9Uy5wc2V1ZG9zW2VdfHxTLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8dC5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2UpO3JldHVybiBzW0ldP3Mobik6cy5sZW5ndGg+MT8ocj1bZSxlLCIiLG5dLFMuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShlLnRvTG93ZXJDYXNlKCkpP2koZnVuY3Rpb24oZSx0KXtmb3IodmFyIGkscj1zKGUsbiksbz1yLmxlbmd0aDtvLS07KWk9ZWUoZSxyW29dKSxlW2ldPSEodFtpXT1yW29dKX0pOmZ1bmN0aW9uKGUpe3JldHVybiBzKGUsMCxyKX0pOnN9fSxwc2V1ZG9zOntub3Q6aShmdW5jdGlvbihlKXt2YXIgdD1bXSxuPVtdLHI9ayhlLnJlcGxhY2UobGUsIiQxIikpO3JldHVybiByW0ldP2koZnVuY3Rpb24oZSx0LG4saSl7Zm9yKHZhciBzLG89cihlLG51bGwsaSxbXSksYT1lLmxlbmd0aDthLS07KShzPW9bYV0pJiYoZVthXT0hKHRbYV09cykpfSk6ZnVuY3Rpb24oZSxpLHMpe3JldHVybiB0WzBdPWUscih0LG51bGwscyxuKSx0WzBdPW51bGwsIW4ucG9wKCl9fSksaGFzOmkoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0KGUsbikubGVuZ3RoPjB9fSksY29udGFpbnM6aShmdW5jdGlvbihlKXtyZXR1cm4gZT1lLnJlcGxhY2UoVGUsU2UpLGZ1bmN0aW9uKHQpe3JldHVybih0LnRleHRDb250ZW50fHx0LmlubmVyVGV4dHx8eCh0KSkuaW5kZXhPZihlKT4tMX19KSxsYW5nOmkoZnVuY3Rpb24oZSl7cmV0dXJuIGhlLnRlc3QoZXx8IiIpfHx0LmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2UpLGU9ZS5yZXBsYWNlKFRlLFNlKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKHQpe3ZhciBuO2RvIGlmKG49SD90Lmxhbmc6dC5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIil8fHQuZ2V0QXR0cmlidXRlKCJsYW5nIikpcmV0dXJuIG49bi50b0xvd2VyQ2FzZSgpLG49PT1lfHwwPT09bi5pbmRleE9mKGUrIi0iKTt3aGlsZSgodD10LnBhcmVudE5vZGUpJiYxPT09dC5ub2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKHQpe3ZhciBuPWUubG9jYXRpb24mJmUubG9jYXRpb24uaGFzaDtyZXR1cm4gbiYmbi5zbGljZSgxKT09PXQuaWR9LHJvb3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1EfSxmb2N1czpmdW5jdGlvbihlKXtyZXR1cm4gZT09PU4uYWN0aXZlRWxlbWVudCYmKCFOLmhhc0ZvY3VzfHxOLmhhc0ZvY3VzKCkpJiYhIShlLnR5cGV8fGUuaHJlZnx8fmUudGFiSW5kZXgpfSxlbmFibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITF9LGRpc2FibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT10JiYhIWUuY2hlY2tlZHx8Im9wdGlvbiI9PT10JiYhIWUuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGUuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oZSl7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWlmKGUubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFTLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdmUudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlLnRlc3QoZS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PXQmJiJidXR0b24iPT09ZS50eXBlfHwiYnV0dG9uIj09PXR9LHRleHQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuImlucHV0Ij09PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmInRleHQiPT09ZS50eXBlJiYobnVsbD09KHQ9ZS5nZXRBdHRyaWJ1dGUoInR5cGUiKSl8fCJ0ZXh0Ij09PXQudG9Mb3dlckNhc2UoKSl9LGZpcnN0OmMoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OmMoZnVuY3Rpb24oZSx0KXtyZXR1cm5bdC0xXX0pLGVxOmMoZnVuY3Rpb24oZSx0LG4pe3JldHVyblswPm4/bit0Om5dfSksZXZlbjpjKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTA7dD5uO24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksb2RkOmMoZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MTt0Pm47bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDpjKGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIGk9MD5uP24rdDpuOy0taT49MDspZS5wdXNoKGkpO3JldHVybiBlfSksZ3Q6YyhmdW5jdGlvbihlLHQsbil7Zm9yKHZhciBpPTA+bj9uK3Q6bjsrK2k8dDspZS5wdXNoKGkpO3JldHVybiBlfSl9fSxTLnBzZXVkb3MubnRoPVMucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlTLnBzZXVkb3NbYl09YShiKTtmb3IoYiBpbntzdWJtaXQ6ITAscmVzZXQ6ITB9KVMucHNldWRvc1tiXT1sKGIpO3JldHVybiBkLnByb3RvdHlwZT1TLmZpbHRlcnM9Uy5wc2V1ZG9zLFMuc2V0RmlsdGVycz1uZXcgZCxFPXQudG9rZW5pemU9ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLHMsbyxhLGwsYyx1PVhbZSsiICJdO2lmKHUpcmV0dXJuIG4/MDp1LnNsaWNlKDApO2ZvcihhPWUsbD1bXSxjPVMucHJlRmlsdGVyO2E7KXsoIWl8fChyPWNlLmV4ZWMoYSkpKSYmKHImJihhPWEuc2xpY2UoclswXS5sZW5ndGgpfHxhKSxsLnB1c2gocz1bXSkpLGk9ITEsKHI9dWUuZXhlYyhhKSkmJihpPXIuc2hpZnQoKSxzLnB1c2goe3ZhbHVlOmksdHlwZTpyWzBdLnJlcGxhY2UobGUsIiAiKX0pLGE9YS5zbGljZShpLmxlbmd0aCkpO2ZvcihvIGluIFMuZmlsdGVyKSEocj1mZVtvXS5leGVjKGEpKXx8Y1tvXSYmIShyPWNbb10ocikpfHwoaT1yLnNoaWZ0KCkscy5wdXNoKHt2YWx1ZTppLHR5cGU6byxtYXRjaGVzOnJ9KSxhPWEuc2xpY2UoaS5sZW5ndGgpKTtpZighaSlicmVha31yZXR1cm4gbj9hLmxlbmd0aDphP3QuZXJyb3IoZSk6WChlLGwpLnNsaWNlKDApfSxrPXQuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLGk9W10scj1bXSxzPXpbZSsiICJdO2lmKCFzKXtmb3IodHx8KHQ9RShlKSksbj10Lmxlbmd0aDtuLS07KXM9eSh0W25dKSxzW0ldP2kucHVzaChzKTpyLnB1c2gocyk7cz16KGUsXyhyLGkpKSxzLnNlbGVjdG9yPWV9cmV0dXJuIHN9LEM9dC5zZWxlY3Q9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIscyxvLGEsbCxjPSJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLGQ9IWkmJkUoZT1jLnNlbGVjdG9yfHxlKTtpZihuPW58fFtdLDE9PT1kLmxlbmd0aCl7aWYocz1kWzBdPWRbMF0uc2xpY2UoMCkscy5sZW5ndGg+MiYmIklEIj09PShvPXNbMF0pLnR5cGUmJlQuZ2V0QnlJZCYmOT09PXQubm9kZVR5cGUmJkgmJlMucmVsYXRpdmVbc1sxXS50eXBlXSl7aWYodD0oUy5maW5kLklEKG8ubWF0Y2hlc1swXS5yZXBsYWNlKFRlLFNlKSx0KXx8W10pWzBdLCF0KXJldHVybiBuO2MmJih0PXQucGFyZW50Tm9kZSksZT1lLnNsaWNlKHMuc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWZvcihyPWZlLm5lZWRzQ29udGV4dC50ZXN0KGUpPzA6cy5sZW5ndGg7ci0tJiYobz1zW3JdLCFTLnJlbGF0aXZlW2E9by50eXBlXSk7KWlmKChsPVMuZmluZFthXSkmJihpPWwoby5tYXRjaGVzWzBdLnJlcGxhY2UoVGUsU2UpLF9lLnRlc3Qoc1swXS50eXBlKSYmdSh0LnBhcmVudE5vZGUpfHx0KSkpe2lmKHMuc3BsaWNlKHIsMSksZT1pLmxlbmd0aCYmcChzKSwhZSlyZXR1cm4gUS5hcHBseShuLGkpLG47YnJlYWt9fXJldHVybihjfHxrKGUsZCkpKGksdCwhSCxuLF9lLnRlc3QoZSkmJnUodC5wYXJlbnROb2RlKXx8dCksbn0sVC5zb3J0U3RhYmxlPUkuc3BsaXQoIiIpLnNvcnQoQikuam9pbigiIik9PT1JLFQuZGV0ZWN0RHVwbGljYXRlcz0hIVAsTCgpLFQuc29ydERldGFjaGVkPXIoZnVuY3Rpb24oZSl7cmV0dXJuIDEmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihOLmNyZWF0ZUVsZW1lbnQoImRpdiIpKX0pLHIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8cygidHlwZXxocmVmfGhlaWdodHx3aWR0aCIsZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuP3ZvaWQgMDplLmdldEF0dHJpYnV0ZSh0LCJ0eXBlIj09PXQudG9Mb3dlckNhc2UoKT8xOjIpfSksVC5hdHRyaWJ1dGVzJiZyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGlucHV0Lz4iLGUuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fHMoInZhbHVlIixmdW5jdGlvbihlLHQsbil7cmV0dXJuIG58fCJpbnB1dCIhPT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/dm9pZCAwOmUuZGVmYXVsdFZhbHVlfSkscihmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZS5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIil9KXx8cyh0ZSxmdW5jdGlvbihlLHQsbil7dmFyIGk7cmV0dXJuIG4/dm9pZCAwOmVbdF09PT0hMD90LnRvTG93ZXJDYXNlKCk6KGk9ZS5nZXRBdHRyaWJ1dGVOb2RlKHQpKSYmaS5zcGVjaWZpZWQ/aS52YWx1ZTpudWxsfSksdH0oZSk7Wi5maW5kPXJlLFouZXhwcj1yZS5zZWxlY3RvcnMsWi5leHByWyI6Il09Wi5leHByLnBzZXVkb3MsWi51bmlxdWU9cmUudW5pcXVlU29ydCxaLnRleHQ9cmUuZ2V0VGV4dCxaLmlzWE1MRG9jPXJlLmlzWE1MLFouY29udGFpbnM9cmUuY29udGFpbnM7dmFyIHNlPVouZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsb2U9L148KFx3KylccypcLz8+KD86PFwvXDE+fCkkLyxhZT0vXi5bXjojXFtcLixdKiQvO1ouZmlsdGVyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10WzBdO3JldHVybiBuJiYoZT0iOm5vdCgiK2UrIikiKSwxPT09dC5sZW5ndGgmJjE9PT1pLm5vZGVUeXBlP1ouZmluZC5tYXRjaGVzU2VsZWN0b3IoaSxlKT9baV06W106Wi5maW5kLm1hdGNoZXMoZSxaLmdyZXAodCxmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGV9KSl9LFouZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5sZW5ndGgsaT1bXSxyPXRoaXM7aWYoInN0cmluZyIhPXR5cGVvZiBlKXJldHVybiB0aGlzLnB1c2hTdGFjayhaKGUpLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7bj50O3QrKylpZihaLmNvbnRhaW5zKHJbdF0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKHQ9MDtuPnQ7dCsrKVouZmluZChlLHJbdF0saSk7cmV0dXJuIGk9dGhpcy5wdXNoU3RhY2sobj4xP1oudW5pcXVlKGkpOmkpLGkuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yKyIgIitlOmUsaX0sZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhpKHRoaXMsZXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhpKHRoaXMsZXx8W10sITApKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFpKHRoaXMsInN0cmluZyI9PXR5cGVvZiBlJiZzZS50ZXN0KGUpP1ooZSk6ZXx8W10sITEpLmxlbmd0aH19KTt2YXIgbGUsY2U9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyx1ZT1aLmZuLmluaXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbixpO2lmKCFlKXJldHVybiB0aGlzO2lmKCJzdHJpbmciPT10eXBlb2YgZSl7aWYobj0iPCI9PT1lWzBdJiYiPiI9PT1lW2UubGVuZ3RoLTFdJiZlLmxlbmd0aD49Mz9bbnVsbCxlLG51bGxdOmNlLmV4ZWMoZSksIW58fCFuWzFdJiZ0KXJldHVybiF0fHx0LmpxdWVyeT8odHx8bGUpLmZpbmQoZSk6dGhpcy5jb25zdHJ1Y3Rvcih0KS5maW5kKGUpO2lmKG5bMV0pe2lmKHQ9dCBpbnN0YW5jZW9mIFo/dFswXTp0LFoubWVyZ2UodGhpcyxaLnBhcnNlSFRNTChuWzFdLHQmJnQubm9kZVR5cGU/dC5vd25lckRvY3VtZW50fHx0OkssITApKSxvZS50ZXN0KG5bMV0pJiZaLmlzUGxhaW5PYmplY3QodCkpZm9yKG4gaW4gdClaLmlzRnVuY3Rpb24odGhpc1tuXSk/dGhpc1tuXSh0W25dKTp0aGlzLmF0dHIobix0W25dKTtyZXR1cm4gdGhpc31yZXR1cm4gaT1LLmdldEVsZW1lbnRCeUlkKG5bMl0pLGkmJmkucGFyZW50Tm9kZSYmKHRoaXMubGVuZ3RoPTEsdGhpc1swXT1pKSx0aGlzLmNvbnRleHQ9Syx0aGlzLnNlbGVjdG9yPWUsdGhpc31yZXR1cm4gZS5ub2RlVHlwZT8odGhpcy5jb250ZXh0PXRoaXNbMF09ZSx0aGlzLmxlbmd0aD0xLHRoaXMpOlouaXNGdW5jdGlvbihlKT8idW5kZWZpbmVkIiE9dHlwZW9mIGxlLnJlYWR5P2xlLnJlYWR5KGUpOmUoWik6KHZvaWQgMCE9PWUuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWUuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWUuY29udGV4dCksWi5tYWtlQXJyYXkoZSx0aGlzKSl9O3VlLnByb3RvdHlwZT1aLmZuLGxlPVooSyk7dmFyIGRlPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLHBlPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O1ouZXh0ZW5kKHtkaXI6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgaT1bXSxyPXZvaWQgMCE9PW47KGU9ZVt0XSkmJjkhPT1lLm5vZGVUeXBlOylpZigxPT09ZS5ub2RlVHlwZSl7aWYociYmWihlKS5pcyhuKSlicmVhaztpLnB1c2goZSl9cmV0dXJuIGl9LHNpYmxpbmc6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W107ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59fSksWi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihlKXt2YXIgdD1aKGUsdGhpcyksbj10Lmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtuPmU7ZSsrKWlmKFouY29udGFpbnModGhpcyx0W2VdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuLGk9MCxyPXRoaXMubGVuZ3RoLHM9W10sbz1zZS50ZXN0KGUpfHwic3RyaW5nIiE9dHlwZW9mIGU/WihlLHR8fHRoaXMuY29udGV4dCk6MDtyPmk7aSsrKWZvcihuPXRoaXNbaV07biYmbiE9PXQ7bj1uLnBhcmVudE5vZGUpaWYobi5ub2RlVHlwZTwxMSYmKG8/by5pbmRleChuKT4tMToxPT09bi5ub2RlVHlwZSYmWi5maW5kLm1hdGNoZXNTZWxlY3RvcihuLGUpKSl7cy5wdXNoKG4pO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhzLmxlbmd0aD4xP1oudW5pcXVlKHMpOnMpfSxpbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZT8ic3RyaW5nIj09dHlwZW9mIGU/Qi5jYWxsKFooZSksdGhpc1swXSk6Qi5jYWxsKHRoaXMsZS5qcXVlcnk/ZVswXTplKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnB1c2hTdGFjayhaLnVuaXF1ZShaLm1lcmdlKHRoaXMuZ2V0KCksWihlLHQpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFkZChudWxsPT1lP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGUpKX19KSxaLmVhY2goe3BhcmVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJjExIT09dC5ub2RlVHlwZT90Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIFouZGlyKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gWi5kaXIoZSwicGFyZW50Tm9kZSIsbil9LG5leHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihlKXtyZXR1cm4gcihlLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihlKXtyZXR1cm4gWi5kaXIoZSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihlKXtyZXR1cm4gWi5kaXIoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFouZGlyKGUsIm5leHRTaWJsaW5nIixuKX0scHJldlVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gWi5kaXIoZSwicHJldmlvdXNTaWJsaW5nIixuKX0sc2libGluZ3M6ZnVuY3Rpb24oZSl7cmV0dXJuIFouc2libGluZygoZS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIFouc2libGluZyhlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb250ZW50RG9jdW1lbnR8fFoubWVyZ2UoW10sZS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGUsdCl7Wi5mbltlXT1mdW5jdGlvbihuLGkpe3ZhciByPVoubWFwKHRoaXMsdCxuKTtyZXR1cm4iVW50aWwiIT09ZS5zbGljZSgtNSkmJihpPW4pLGkmJiJzdHJpbmciPT10eXBlb2YgaSYmKHI9Wi5maWx0ZXIoaSxyKSksdGhpcy5sZW5ndGg+MSYmKHBlW2VdfHxaLnVuaXF1ZShyKSxkZS50ZXN0KGUpJiZyLnJldmVyc2UoKSksdGhpcy5wdXNoU3RhY2socil9fSk7dmFyIGhlPS9cUysvZyxmZT17fTtaLkNhbGxiYWNrcz1mdW5jdGlvbihlKXtlPSJzdHJpbmciPT10eXBlb2YgZT9mZVtlXXx8cyhlKTpaLmV4dGVuZCh7fSxlKTt2YXIgdCxuLGkscixvLGEsbD1bXSxjPSFlLm9uY2UmJltdLHU9ZnVuY3Rpb24ocyl7Zm9yKHQ9ZS5tZW1vcnkmJnMsbj0hMCxhPXJ8fDAscj0wLG89bC5sZW5ndGgsaT0hMDtsJiZvPmE7YSsrKWlmKGxbYV0uYXBwbHkoc1swXSxzWzFdKT09PSExJiZlLnN0b3BPbkZhbHNlKXt0PSExO2JyZWFrfWk9ITEsbCYmKGM/Yy5sZW5ndGgmJnUoYy5zaGlmdCgpKTp0P2w9W106ZC5kaXNhYmxlKCkpfSxkPXthZGQ6ZnVuY3Rpb24oKXtpZihsKXt2YXIgbj1sLmxlbmd0aDshZnVuY3Rpb24gcyh0KXtaLmVhY2godCxmdW5jdGlvbih0LG4pe3ZhciBpPVoudHlwZShuKTsiZnVuY3Rpb24iPT09aT9lLnVuaXF1ZSYmZC5oYXMobil8fGwucHVzaChuKTpuJiZuLmxlbmd0aCYmInN0cmluZyIhPT1pJiZzKG4pfSl9KGFyZ3VtZW50cyksaT9vPWwubGVuZ3RoOnQmJihyPW4sdSh0KSl9cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiBsJiZaLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuOyhuPVouaW5BcnJheSh0LGwsbikpPi0xOylsLnNwbGljZShuLDEpLGkmJihvPj1uJiZvLS0sYT49biYmYS0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gZT9aLmluQXJyYXkoZSxsKT4tMTohKCFsfHwhbC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBsPVtdLG89MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGw9Yz10PXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFsfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGM9dm9pZCAwLHR8fGQuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFjfSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiFsfHxuJiYhY3x8KHQ9dHx8W10sdD1bZSx0LnNsaWNlP3Quc2xpY2UoKTp0XSxpP2MucHVzaCh0KTp1KHQpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGQuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFufX07cmV0dXJuIGR9LFouZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihlKXt2YXIgdD1bWyJyZXNvbHZlIiwiZG9uZSIsWi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixaLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIixaLkNhbGxiYWNrcygibWVtb3J5IildXSxuPSJwZW5kaW5nIixpPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBufSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gci5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIFouRGVmZXJyZWQoZnVuY3Rpb24obil7Wi5lYWNoKHQsZnVuY3Rpb24odCxzKXt2YXIgbz1aLmlzRnVuY3Rpb24oZVt0XSkmJmVbdF07cltzWzFdXShmdW5jdGlvbigpe3ZhciBlPW8mJm8uYXBwbHkodGhpcyxhcmd1bWVudHMpO2UmJlouaXNGdW5jdGlvbihlLnByb21pc2UpP2UucHJvbWlzZSgpLmRvbmUobi5yZXNvbHZlKS5mYWlsKG4ucmVqZWN0KS5wcm9ncmVzcyhuLm5vdGlmeSk6bltzWzBdKyJXaXRoIl0odGhpcz09PWk/bi5wcm9taXNlKCk6dGhpcyxvP1tlXTphcmd1bWVudHMpfSl9KSxlPW51bGx9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWU/Wi5leHRlbmQoZSxpKTppfX0scj17fTtyZXR1cm4gaS5waXBlPWkudGhlbixaLmVhY2godCxmdW5jdGlvbihlLHMpe3ZhciBvPXNbMl0sYT1zWzNdO2lbc1sxXV09by5hZGQsYSYmby5hZGQoZnVuY3Rpb24oKXtuPWF9LHRbMV5lXVsyXS5kaXNhYmxlLHRbMl1bMl0ubG9jaykscltzWzBdXT1mdW5jdGlvbigpe3JldHVybiByW3NbMF0rIldpdGgiXSh0aGlzPT09cj9pOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxyW3NbMF0rIldpdGgiXT1vLmZpcmVXaXRofSksaS5wcm9taXNlKHIpLGUmJmUuY2FsbChyLHIpLHJ9LHdoZW46ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9MCxzPVcuY2FsbChhcmd1bWVudHMpLG89cy5sZW5ndGgsYT0xIT09b3x8ZSYmWi5pc0Z1bmN0aW9uKGUucHJvbWlzZSk/bzowLGw9MT09PWE/ZTpaLkRlZmVycmVkKCksYz1mdW5jdGlvbihlLG4saSl7cmV0dXJuIGZ1bmN0aW9uKHIpe25bZV09dGhpcyxpW2VdPWFyZ3VtZW50cy5sZW5ndGg+MT9XLmNhbGwoYXJndW1lbnRzKTpyLGk9PT10P2wubm90aWZ5V2l0aChuLGkpOi0tYXx8bC5yZXNvbHZlV2l0aChuLGkpfX07aWYobz4xKWZvcih0PW5ldyBBcnJheShvKSxuPW5ldyBBcnJheShvKSxpPW5ldyBBcnJheShvKTtvPnI7cisrKXNbcl0mJlouaXNGdW5jdGlvbihzW3JdLnByb21pc2UpP3Nbcl0ucHJvbWlzZSgpLmRvbmUoYyhyLGkscykpLmZhaWwobC5yZWplY3QpLnByb2dyZXNzKGMocixuLHQpKTotLWE7cmV0dXJuIGF8fGwucmVzb2x2ZVdpdGgoaSxzKSxsLnByb21pc2UoKX19KTt2YXIgZ2U7Wi5mbi5yZWFkeT1mdW5jdGlvbihlKXtyZXR1cm4gWi5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSx0aGlzfSxaLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oZSl7ZT9aLnJlYWR5V2FpdCsrOloucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihlKXsoZT09PSEwPy0tWi5yZWFkeVdhaXQ6Wi5pc1JlYWR5KXx8KFouaXNSZWFkeT0hMCxlIT09ITAmJi0tWi5yZWFkeVdhaXQ+MHx8KGdlLnJlc29sdmVXaXRoKEssW1pdKSxaLmZuLnRyaWdnZXJIYW5kbGVyJiYoWihLKS50cmlnZ2VySGFuZGxlcigicmVhZHkiKSxaKEspLm9mZigicmVhZHkiKSkpKX19KSxaLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24odCl7cmV0dXJuIGdlfHwoZ2U9Wi5EZWZlcnJlZCgpLCJjb21wbGV0ZSI9PT1LLnJlYWR5U3RhdGU/c2V0VGltZW91dChaLnJlYWR5KTooSy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixvLCExKSxlLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLG8sITEpKSksZ2UucHJvbWlzZSh0KX0sWi5yZWFkeS5wcm9taXNlKCk7dmFyIHZlPVouYWNjZXNzPWZ1bmN0aW9uKGUsdCxuLGkscixzLG8pe3ZhciBhPTAsbD1lLmxlbmd0aCxjPW51bGw9PW47aWYoIm9iamVjdCI9PT1aLnR5cGUobikpe3I9ITA7Zm9yKGEgaW4gbilaLmFjY2VzcyhlLHQsYSxuW2FdLCEwLHMsbyl9ZWxzZSBpZih2b2lkIDAhPT1pJiYocj0hMCxaLmlzRnVuY3Rpb24oaSl8fChvPSEwKSxjJiYobz8odC5jYWxsKGUsaSksdD1udWxsKTooYz10LHQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBjLmNhbGwoWihlKSxuKX0pKSx0KSlmb3IoO2w+YTthKyspdChlW2FdLG4sbz9pOmkuY2FsbChlW2FdLGEsdChlW2FdLG4pKSk7cmV0dXJuIHI/ZTpjP3QuY2FsbChlKTpsP3QoZVswXSxuKTpzfTtaLmFjY2VwdERhdGE9ZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlfHw5PT09ZS5ub2RlVHlwZXx8IStlLm5vZGVUeXBlfSxhLnVpZD0xLGEuYWNjZXB0cz1aLmFjY2VwdERhdGEsYS5wcm90b3R5cGU9e2tleTpmdW5jdGlvbihlKXtpZighYS5hY2NlcHRzKGUpKXJldHVybiAwO3ZhciB0PXt9LG49ZVt0aGlzLmV4cGFuZG9dO2lmKCFuKXtuPWEudWlkKys7dHJ5e3RbdGhpcy5leHBhbmRvXT17dmFsdWU6bn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSx0KX1jYXRjaChpKXt0W3RoaXMuZXhwYW5kb109bixaLmV4dGVuZChlLHQpfX1yZXR1cm4gdGhpcy5jYWNoZVtuXXx8KHRoaXMuY2FjaGVbbl09e30pLG59LHNldDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzLmtleShlKSxzPXRoaXMuY2FjaGVbcl07aWYoInN0cmluZyI9PXR5cGVvZiB0KXNbdF09bjtlbHNlIGlmKFouaXNFbXB0eU9iamVjdChzKSlaLmV4dGVuZCh0aGlzLmNhY2hlW3JdLHQpO2Vsc2UgZm9yKGkgaW4gdClzW2ldPXRbaV07cmV0dXJuIHN9LGdldDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuY2FjaGVbdGhpcy5rZXkoZSldO3JldHVybiB2b2lkIDA9PT10P246blt0XX0sYWNjZXNzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaTtyZXR1cm4gdm9pZCAwPT09dHx8dCYmInN0cmluZyI9PXR5cGVvZiB0JiZ2b2lkIDA9PT1uPyhpPXRoaXMuZ2V0KGUsdCksdm9pZCAwIT09aT9pOnRoaXMuZ2V0KGUsWi5jYW1lbENhc2UodCkpKToodGhpcy5zZXQoZSx0LG4pLHZvaWQgMCE9PW4/bjp0KX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLHM9dGhpcy5rZXkoZSksbz10aGlzLmNhY2hlW3NdO2lmKHZvaWQgMD09PXQpdGhpcy5jYWNoZVtzXT17fTtlbHNle1ouaXNBcnJheSh0KT9pPXQuY29uY2F0KHQubWFwKFouY2FtZWxDYXNlKSk6KHI9Wi5jYW1lbENhc2UodCksdCBpbiBvP2k9W3Qscl06KGk9cixpPWkgaW4gbz9baV06aS5tYXRjaChoZSl8fFtdKSksbj1pLmxlbmd0aDtmb3IoO24tLTspZGVsZXRlIG9baVtuXV19fSxoYXNEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiFaLmlzRW1wdHlPYmplY3QodGhpcy5jYWNoZVtlW3RoaXMuZXhwYW5kb11dfHx7fSl9LGRpc2NhcmQ6ZnVuY3Rpb24oZSl7ZVt0aGlzLmV4cGFuZG9dJiZkZWxldGUgdGhpcy5jYWNoZVtlW3RoaXMuZXhwYW5kb11dfX07dmFyIG1lPW5ldyBhLHllPW5ldyBhLF9lPS9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sYmU9LyhbQS1aXSkvZztaLmV4dGVuZCh7aGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4geWUuaGFzRGF0YShlKXx8bWUuaGFzRGF0YShlKX0sZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHllLmFjY2VzcyhlLHQsbil9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXt5ZS5yZW1vdmUoZSx0KX0sX2RhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBtZS5hY2Nlc3MoZSx0LG4pfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe21lLnJlbW92ZShlLHQpfX0pLFouZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLHM9dGhpc1swXSxvPXMmJnMuYXR0cmlidXRlcztpZih2b2lkIDA9PT1lKXtpZih0aGlzLmxlbmd0aCYmKHI9eWUuZ2V0KHMpLDE9PT1zLm5vZGVUeXBlJiYhbWUuZ2V0KHMsImhhc0RhdGFBdHRycyIpKSl7Zm9yKG49by5sZW5ndGg7bi0tOylvW25dJiYoaT1vW25dLm5hbWUsMD09PWkuaW5kZXhPZigiZGF0YS0iKSYmKGk9Wi5jYW1lbENhc2UoaS5zbGljZSg1KSksbChzLGkscltpXSkpKTttZS5zZXQocywiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIHJ9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP3RoaXMuZWFjaChmdW5jdGlvbigpe3llLnNldCh0aGlzLGUpfSk6dmUodGhpcyxmdW5jdGlvbih0KXt2YXIgbixpPVouY2FtZWxDYXNlKGUpO2lmKHMmJnZvaWQgMD09PXQpe2lmKG49eWUuZ2V0KHMsZSksdm9pZCAwIT09bilyZXR1cm4gbjtpZihuPXllLmdldChzLGkpLHZvaWQgMCE9PW4pcmV0dXJuIG47aWYobj1sKHMsaSx2b2lkIDApLHZvaWQgMCE9PW4pcmV0dXJuIG59ZWxzZSB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbj15ZS5nZXQodGhpcyxpKTt5ZS5zZXQodGhpcyxpLHQpLC0xIT09ZS5pbmRleE9mKCItIikmJnZvaWQgMCE9PW4mJnllLnNldCh0aGlzLGUsdCl9KX0sbnVsbCx0LGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eWUucmVtb3ZlKHRoaXMsZSl9KX19KSxaLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpO3JldHVybiBlPyh0PSh0fHwiZngiKSsicXVldWUiLGk9bWUuZ2V0KGUsdCksbiYmKCFpfHxaLmlzQXJyYXkobik/aT1tZS5hY2Nlc3MoZSx0LFoubWFrZUFycmF5KG4pKTppLnB1c2gobikpLGl8fFtdKTp2b2lkIDB9LGRlcXVldWU6ZnVuY3Rpb24oZSx0KXt0PXR8fCJmeCI7dmFyIG49Wi5xdWV1ZShlLHQpLGk9bi5sZW5ndGgscj1uLnNoaWZ0KCkscz1aLl9xdWV1ZUhvb2tzKGUsdCksbz1mdW5jdGlvbigpe1ouZGVxdWV1ZShlLHQpfTsiaW5wcm9ncmVzcyI9PT1yJiYocj1uLnNoaWZ0KCksaS0tKSxyJiYoImZ4Ij09PXQmJm4udW5zaGlmdCgiaW5wcm9ncmVzcyIpLGRlbGV0ZSBzLnN0b3Asci5jYWxsKGUsbyxzKSksIWkmJnMmJnMuZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihlLHQpe3ZhciBuPXQrInF1ZXVlSG9va3MiO3JldHVybiBtZS5nZXQoZSxuKXx8bWUuYWNjZXNzKGUsbix7ZW1wdHk6Wi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7bWUucmVtb3ZlKGUsW3QrInF1ZXVlIixuXSl9KX0pfX0pLFouZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPTI7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlJiYodD1lLGU9ImZ4IixuLS0pLGFyZ3VtZW50cy5sZW5ndGg8bj9aLnF1ZXVlKHRoaXNbMF0sZSk6dm9pZCAwPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBuPVoucXVldWUodGhpcyxlLHQpO1ouX3F1ZXVlSG9va3ModGhpcyxlKSwiZngiPT09ZSYmImlucHJvZ3Jlc3MiIT09blswXSYmWi5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Wi5kZXF1ZXVlKHRoaXMsZSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5xdWV1ZShlfHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihlLHQpe3ZhciBuLGk9MSxyPVouRGVmZXJyZWQoKSxzPXRoaXMsbz10aGlzLmxlbmd0aCxhPWZ1bmN0aW9uKCl7LS1pfHxyLnJlc29sdmVXaXRoKHMsW3NdKX07Zm9yKCJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPXZvaWQgMCksZT1lfHwiZngiO28tLTspbj1tZS5nZXQoc1tvXSxlKyJxdWV1ZUhvb2tzIiksbiYmbi5lbXB0eSYmKGkrKyxuLmVtcHR5LmFkZChhKSk7cmV0dXJuIGEoKSxyLnByb21pc2UodCl9fSk7dmFyIFRlPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLFNlPVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0seGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT10fHxlLCJub25lIj09PVouY3NzKGUsImRpc3BsYXkiKXx8IVouY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfSx3ZT0vXig/OmNoZWNrYm94fHJhZGlvKSQvaTshZnVuY3Rpb24oKXt2YXIgZT1LLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSx0PWUuYXBwZW5kQ2hpbGQoSy5jcmVhdGVFbGVtZW50KCJkaXYiKSksbj1LLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7bi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLG4uc2V0QXR0cmlidXRlKCJjaGVja2VkIiwiY2hlY2tlZCIpLG4uc2V0QXR0cmlidXRlKCJuYW1lIiwidCIpLHQuYXBwZW5kQ2hpbGQobiksSi5jaGVja0Nsb25lPXQuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLHQuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IixKLm5vQ2xvbmVDaGVja2VkPSEhdC5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWV9KCk7dmFyIEVlPSJ1bmRlZmluZWQiO0ouZm9jdXNpbkJ1YmJsZXM9Im9uZm9jdXNpbiJpbiBlO3ZhciBrZT0vXmtleS8sQ2U9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51KXxjbGljay8samU9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLEFlPS9eKFteLl0qKSg/OlwuKC4rKXwpJC87Wi5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihlLHQsbixpLHIpe3ZhciBzLG8sYSxsLGMsdSxkLHAsaCxmLGcsdj1tZS5nZXQoZSk7aWYodilmb3Iobi5oYW5kbGVyJiYocz1uLG49cy5oYW5kbGVyLHI9cy5zZWxlY3Rvciksbi5ndWlkfHwobi5ndWlkPVouZ3VpZCsrKSwobD12LmV2ZW50cyl8fChsPXYuZXZlbnRzPXt9KSwobz12LmhhbmRsZSl8fChvPXYuaGFuZGxlPWZ1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgWiE9PUVlJiZaLmV2ZW50LnRyaWdnZXJlZCE9PXQudHlwZT9aLmV2ZW50LmRpc3BhdGNoLmFwcGx5KGUsYXJndW1lbnRzKTp2b2lkIDB9KSx0PSh0fHwiIikubWF0Y2goaGUpfHxbIiJdLGM9dC5sZW5ndGg7Yy0tOylhPUFlLmV4ZWModFtjXSl8fFtdLGg9Zz1hWzFdLGY9KGFbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxoJiYoZD1aLmV2ZW50LnNwZWNpYWxbaF18fHt9LGg9KHI/ZC5kZWxlZ2F0ZVR5cGU6ZC5iaW5kVHlwZSl8fGgsZD1aLmV2ZW50LnNwZWNpYWxbaF18fHt9LHU9Wi5leHRlbmQoe3R5cGU6aCxvcmlnVHlwZTpnLGRhdGE6aSxoYW5kbGVyOm4sZ3VpZDpuLmd1aWQsc2VsZWN0b3I6cixuZWVkc0NvbnRleHQ6ciYmWi5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KHIpLG5hbWVzcGFjZTpmLmpvaW4oIi4iKX0scyksKHA9bFtoXSl8fChwPWxbaF09W10scC5kZWxlZ2F0ZUNvdW50PTAsZC5zZXR1cCYmZC5zZXR1cC5jYWxsKGUsaSxmLG8pIT09ITF8fGUuYWRkRXZlbnRMaXN0ZW5lciYmZS5hZGRFdmVudExpc3RlbmVyKGgsbywhMSkpLGQuYWRkJiYoZC5hZGQuY2FsbChlLHUpLHUuaGFuZGxlci5ndWlkfHwodS5oYW5kbGVyLmd1aWQ9bi5ndWlkKSkscj9wLnNwbGljZShwLmRlbGVnYXRlQ291bnQrKywwLHUpOnAucHVzaCh1KSxaLmV2ZW50Lmdsb2JhbFtoXT0hMCl9LHJlbW92ZTpmdW5jdGlvbihlLHQsbixpLHIpe3ZhciBzLG8sYSxsLGMsdSxkLHAsaCxmLGcsdj1tZS5oYXNEYXRhKGUpJiZtZS5nZXQoZSk7aWYodiYmKGw9di5ldmVudHMpKXtmb3IodD0odHx8IiIpLm1hdGNoKGhlKXx8WyIiXSxjPXQubGVuZ3RoO2MtLTspaWYoYT1BZS5leGVjKHRbY10pfHxbXSxoPWc9YVsxXSxmPShhWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksaCl7Zm9yKGQ9Wi5ldmVudC5zcGVjaWFsW2hdfHx7fSxoPShpP2QuZGVsZWdhdGVUeXBlOmQuYmluZFR5cGUpfHxoLHA9bFtoXXx8W10sYT1hWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIitmLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLG89cz1wLmxlbmd0aDtzLS07KXU9cFtzXSwhciYmZyE9PXUub3JpZ1R5cGV8fG4mJm4uZ3VpZCE9PXUuZ3VpZHx8YSYmIWEudGVzdCh1Lm5hbWVzcGFjZSl8fGkmJmkhPT11LnNlbGVjdG9yJiYoIioqIiE9PWl8fCF1LnNlbGVjdG9yKXx8KHAuc3BsaWNlKHMsMSksdS5zZWxlY3RvciYmcC5kZWxlZ2F0ZUNvdW50LS0sZC5yZW1vdmUmJmQucmVtb3ZlLmNhbGwoZSx1KSk7byYmIXAubGVuZ3RoJiYoZC50ZWFyZG93biYmZC50ZWFyZG93bi5jYWxsKGUsZix2LmhhbmRsZSkhPT0hMXx8Wi5yZW1vdmVFdmVudChlLGgsdi5oYW5kbGUpLGRlbGV0ZSBsW2hdKX1lbHNlIGZvcihoIGluIGwpWi5ldmVudC5yZW1vdmUoZSxoK3RbY10sbixpLCEwKTtaLmlzRW1wdHlPYmplY3QobCkmJihkZWxldGUgdi5oYW5kbGUsbWUucmVtb3ZlKGUsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24odCxuLGkscil7dmFyIHMsbyxhLGwsYyx1LGQscD1baXx8S10saD1HLmNhbGwodCwidHlwZSIpP3QudHlwZTp0LGY9Ry5jYWxsKHQsIm5hbWVzcGFjZSIpP3QubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYobz1hPWk9aXx8SywzIT09aS5ub2RlVHlwZSYmOCE9PWkubm9kZVR5cGUmJiFqZS50ZXN0KGgrWi5ldmVudC50cmlnZ2VyZWQpJiYoaC5pbmRleE9mKCIuIik+PTAmJihmPWguc3BsaXQoIi4iKSxoPWYuc2hpZnQoKSxmLnNvcnQoKSksYz1oLmluZGV4T2YoIjoiKTwwJiYib24iK2gsdD10W1ouZXhwYW5kb10/dDpuZXcgWi5FdmVudChoLCJvYmplY3QiPT10eXBlb2YgdCYmdCksdC5pc1RyaWdnZXI9cj8yOjMsdC5uYW1lc3BhY2U9Zi5qb2luKCIuIiksdC5uYW1lc3BhY2VfcmU9dC5uYW1lc3BhY2U/bmV3IFJlZ0V4cCgiKF58XFwuKSIrZi5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLHQucmVzdWx0PXZvaWQgMCx0LnRhcmdldHx8KHQudGFyZ2V0PWkpLG49bnVsbD09bj9bdF06Wi5tYWtlQXJyYXkobixbdF0pLGQ9Wi5ldmVudC5zcGVjaWFsW2hdfHx7fSxyfHwhZC50cmlnZ2VyfHxkLnRyaWdnZXIuYXBwbHkoaSxuKSE9PSExKSl7aWYoIXImJiFkLm5vQnViYmxlJiYhWi5pc1dpbmRvdyhpKSl7Zm9yKGw9ZC5kZWxlZ2F0ZVR5cGV8fGgsamUudGVzdChsK2gpfHwobz1vLnBhcmVudE5vZGUpO287bz1vLnBhcmVudE5vZGUpcC5wdXNoKG8pLGE9bzthPT09KGkub3duZXJEb2N1bWVudHx8SykmJnAucHVzaChhLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvd3x8ZSl9Zm9yKHM9MDsobz1wW3MrK10pJiYhdC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpOyl0LnR5cGU9cz4xP2w6ZC5iaW5kVHlwZXx8aCx1PShtZS5nZXQobywiZXZlbnRzIil8fHt9KVt0LnR5cGVdJiZtZS5nZXQobywiaGFuZGxlIiksdSYmdS5hcHBseShvLG4pLHU9YyYmb1tjXSx1JiZ1LmFwcGx5JiZaLmFjY2VwdERhdGEobykmJih0LnJlc3VsdD11LmFwcGx5KG8sbiksdC5yZXN1bHQ9PT0hMSYmdC5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gdC50eXBlPWgscnx8dC5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8ZC5fZGVmYXVsdCYmZC5fZGVmYXVsdC5hcHBseShwLnBvcCgpLG4pIT09ITF8fCFaLmFjY2VwdERhdGEoaSl8fGMmJlouaXNGdW5jdGlvbihpW2hdKSYmIVouaXNXaW5kb3coaSkmJihhPWlbY10sYSYmKGlbY109bnVsbCksWi5ldmVudC50cmlnZ2VyZWQ9aCxpW2hdKCksWi5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGEmJihpW2NdPWEpKSx0LnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGUpe2U9Wi5ldmVudC5maXgoZSk7dmFyIHQsbixpLHIscyxvPVtdLGE9Vy5jYWxsKGFyZ3VtZW50cyksbD0obWUuZ2V0KHRoaXMsImV2ZW50cyIpfHx7fSlbZS50eXBlXXx8W10sYz1aLmV2ZW50LnNwZWNpYWxbZS50eXBlXXx8e307aWYoYVswXT1lLGUuZGVsZWdhdGVUYXJnZXQ9dGhpcywhYy5wcmVEaXNwYXRjaHx8Yy5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsZSkhPT0hMSl7Zm9yKG89Wi5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsZSxsKSx0PTA7KHI9b1t0KytdKSYmIWUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKTspZm9yKGUuY3VycmVudFRhcmdldD1yLmVsZW0sbj0wOyhzPXIuaGFuZGxlcnNbbisrXSkmJiFlLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCk7KSghZS5uYW1lc3BhY2VfcmV8fGUubmFtZXNwYWNlX3JlLnRlc3Qocy5uYW1lc3BhY2UpKSYmKGUuaGFuZGxlT2JqPXMsZS5kYXRhPXMuZGF0YSxpPSgoWi5ldmVudC5zcGVjaWFsW3Mub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxzLmhhbmRsZXIpLmFwcGx5KHIuZWxlbSxhKSx2b2lkIDAhPT1pJiYoZS5yZXN1bHQ9aSk9PT0hMSYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpKSk7cmV0dXJuIGMucG9zdERpc3BhdGNoJiZjLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsZSksZS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixzLG89W10sYT10LmRlbGVnYXRlQ291bnQsbD1lLnRhcmdldDtpZihhJiZsLm5vZGVUeXBlJiYoIWUuYnV0dG9ufHwiY2xpY2siIT09ZS50eXBlKSlmb3IoO2whPT10aGlzO2w9bC5wYXJlbnROb2RlfHx0aGlzKWlmKGwuZGlzYWJsZWQhPT0hMHx8ImNsaWNrIiE9PWUudHlwZSl7Zm9yKGk9W10sbj0wO2E+bjtuKyspcz10W25dLHI9cy5zZWxlY3RvcisiICIsdm9pZCAwPT09aVtyXSYmKGlbcl09cy5uZWVkc0NvbnRleHQ/WihyLHRoaXMpLmluZGV4KGwpPj0wOlouZmluZChyLHRoaXMsbnVsbCxbbF0pLmxlbmd0aCksaVtyXSYmaS5wdXNoKHMpO2kubGVuZ3RoJiZvLnB1c2goe2VsZW06bCxoYW5kbGVyczppfSl9cmV0dXJuIGE8dC5sZW5ndGgmJm8ucHVzaCh7ZWxlbTp0aGlzLGhhbmRsZXJzOnQuc2xpY2UoYSl9KSxvfSxwcm9wczoiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbD09ZS53aGljaCYmKGUud2hpY2g9bnVsbCE9dC5jaGFyQ29kZT90LmNoYXJDb2RlOnQua2V5Q29kZSksZX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLHM9dC5idXR0b247cmV0dXJuIG51bGw9PWUucGFnZVgmJm51bGwhPXQuY2xpZW50WCYmKG49ZS50YXJnZXQub3duZXJEb2N1bWVudHx8SyxpPW4uZG9jdW1lbnRFbGVtZW50LHI9bi5ib2R5LGUucGFnZVg9dC5jbGllbnRYKyhpJiZpLnNjcm9sbExlZnR8fHImJnIuc2Nyb2xsTGVmdHx8MCktKGkmJmkuY2xpZW50TGVmdHx8ciYmci5jbGllbnRMZWZ0fHwwKSxlLnBhZ2VZPXQuY2xpZW50WSsoaSYmaS5zY3JvbGxUb3B8fHImJnIuc2Nyb2xsVG9wfHwwKS0oaSYmaS5jbGllbnRUb3B8fHImJnIuY2xpZW50VG9wfHwwKSksZS53aGljaHx8dm9pZCAwPT09c3x8KGUud2hpY2g9MSZzPzE6MiZzPzM6NCZzPzI6MCksZX19LGZpeDpmdW5jdGlvbihlKXtpZihlW1ouZXhwYW5kb10pcmV0dXJuIGU7dmFyIHQsbixpLHI9ZS50eXBlLHM9ZSxvPXRoaXMuZml4SG9va3Nbcl07Zm9yKG98fCh0aGlzLmZpeEhvb2tzW3JdPW89Q2UudGVzdChyKT90aGlzLm1vdXNlSG9va3M6a2UudGVzdChyKT90aGlzLmtleUhvb2tzOnt9KSxpPW8ucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQoby5wcm9wcyk6dGhpcy5wcm9wcyxlPW5ldyBaLkV2ZW50KHMpLHQ9aS5sZW5ndGg7dC0tOyluPWlbdF0sZVtuXT1zW25dO3JldHVybiBlLnRhcmdldHx8KGUudGFyZ2V0PUspLDM9PT1lLnRhcmdldC5ub2RlVHlwZSYmKGUudGFyZ2V0PWUudGFyZ2V0LnBhcmVudE5vZGUpLG8uZmlsdGVyP28uZmlsdGVyKGUscyk6ZX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMhPT1kKCkmJnRoaXMuZm9jdXM/KHRoaXMuZm9jdXMoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1kKCkmJnRoaXMuYmx1cj8odGhpcy5ibHVyKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOiJmb2N1c291dCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuImNoZWNrYm94Ij09PXRoaXMudHlwZSYmdGhpcy5jbGljayYmWi5ub2RlTmFtZSh0aGlzLCJpbnB1dCIpPyh0aGlzLmNsaWNrKCksITEpOnZvaWQgMH0sX2RlZmF1bHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFoubm9kZU5hbWUoZS50YXJnZXQsImEiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUucmVzdWx0JiZlLm9yaWdpbmFsRXZlbnQmJihlLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9ZS5yZXN1bHQpfX19LHNpbXVsYXRlOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPVouZXh0ZW5kKG5ldyBaLkV2ZW50LG4se3R5cGU6ZSxpc1NpbXVsYXRlZDohMCxvcmlnaW5hbEV2ZW50Ont9fSk7aT9aLmV2ZW50LnRyaWdnZXIocixudWxsLHQpOlouZXZlbnQuZGlzcGF0Y2guY2FsbCh0LHIpLHIuaXNEZWZhdWx0UHJldmVudGVkKCkmJm4ucHJldmVudERlZmF1bHQoKX19LFoucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZSx0LG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lciYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbiwhMSl9LFouRXZlbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIFouRXZlbnQ/KGUmJmUudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWUsdGhpcy50eXBlPWUudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1lLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWUuZGVmYXVsdFByZXZlbnRlZCYmZS5yZXR1cm5WYWx1ZT09PSExP2M6dSk6dGhpcy50eXBlPWUsdCYmWi5leHRlbmQodGhpcyx0KSx0aGlzLnRpbWVTdGFtcD1lJiZlLnRpbWVTdGFtcHx8Wi5ub3coKSx2b2lkKHRoaXNbWi5leHBhbmRvXT0hMCkpOm5ldyBaLkV2ZW50KGUsdCl9LFouRXZlbnQucHJvdG90eXBlPXtpc0RlZmF1bHRQcmV2ZW50ZWQ6dSxpc1Byb3BhZ2F0aW9uU3RvcHBlZDp1LGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOnUscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YyxlJiZlLnByZXZlbnREZWZhdWx0JiZlLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPWMsZSYmZS5zdG9wUHJvcGFnYXRpb24mJmUuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPWMsZSYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LFouZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oZSx0KXtaLmV2ZW50LnNwZWNpYWxbZV09e2RlbGVnYXRlVHlwZTp0LGJpbmRUeXBlOnQsaGFuZGxlOmZ1bmN0aW9uKGUpe3ZhciBuLGk9dGhpcyxyPWUucmVsYXRlZFRhcmdldCxzPWUuaGFuZGxlT2JqO3JldHVybighcnx8ciE9PWkmJiFaLmNvbnRhaW5zKGkscikpJiYoZS50eXBlPXMub3JpZ1R5cGUsbj1zLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUudHlwZT10KSxufX19KSxKLmZvY3VzaW5CdWJibGVzfHxaLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGUsdCl7dmFyIG49ZnVuY3Rpb24oZSl7Wi5ldmVudC5zaW11bGF0ZSh0LGUudGFyZ2V0LFouZXZlbnQuZml4KGUpLCEwKX07Wi5ldmVudC5zcGVjaWFsW3RdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBpPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxyPW1lLmFjY2VzcyhpLHQpO3J8fGkuYWRkRXZlbnRMaXN0ZW5lcihlLG4sITApLG1lLmFjY2VzcyhpLHQsKHJ8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBpPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxyPW1lLmFjY2VzcyhpLHQpLTE7cj9tZS5hY2Nlc3MoaSx0LHIpOihpLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxuLCEwKSxtZS5yZW1vdmUoaSx0KSl9fX0pLFouZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihlLHQsbixpLHIpe3ZhciBzLG87aWYoIm9iamVjdCI9PXR5cGVvZiBlKXsic3RyaW5nIiE9dHlwZW9mIHQmJihuPW58fHQsdD12b2lkIDApO2ZvcihvIGluIGUpdGhpcy5vbihvLHQsbixlW29dLHIpO3JldHVybiB0aGlzfWlmKG51bGw9PW4mJm51bGw9PWk/KGk9dCxuPXQ9dm9pZCAwKTpudWxsPT1pJiYoInN0cmluZyI9PXR5cGVvZiB0PyhpPW4sbj12b2lkIDApOihpPW4sbj10LHQ9dm9pZCAwKSksaT09PSExKWk9dTtlbHNlIGlmKCFpKXJldHVybiB0aGlzO3JldHVybiAxPT09ciYmKHM9aSxpPWZ1bmN0aW9uKGUpe3JldHVybiBaKCkub2ZmKGUpLHMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpLmd1aWQ9cy5ndWlkfHwocy5ndWlkPVouZ3VpZCsrKSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Wi5ldmVudC5hZGQodGhpcyxlLGksbix0KX0pfSxvbmU6ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHRoaXMub24oZSx0LG4saSwxKX0sb2ZmOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyO2lmKGUmJmUucHJldmVudERlZmF1bHQmJmUuaGFuZGxlT2JqKXJldHVybiBpPWUuaGFuZGxlT2JqLFooZS5kZWxlZ2F0ZVRhcmdldCkub2ZmKGkubmFtZXNwYWNlP2kub3JpZ1R5cGUrIi4iK2kubmFtZXNwYWNlOmkub3JpZ1R5cGUsaS5zZWxlY3RvcixpLmhhbmRsZXIpLHRoaXM7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXtmb3IociBpbiBlKXRoaXMub2ZmKHIsdCxlW3JdKTtyZXR1cm4gdGhpc31yZXR1cm4odD09PSExfHwiZnVuY3Rpb24iPT10eXBlb2YgdCkmJihuPXQsdD12b2lkIDApLG49PT0hMSYmKG49dSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Wi5ldmVudC5yZW1vdmUodGhpcyxlLG4sdCl9KX0sdHJpZ2dlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtaLmV2ZW50LnRyaWdnZXIoZSx0LHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpc1swXTtyZXR1cm4gbj9aLmV2ZW50LnRyaWdnZXIoZSx0LG4sITApOnZvaWQgMH19KTt2YXIgUGU9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1x3Ol0rKVtePl0qKVwvPi9naSxMZT0vPChbXHc6XSspLyxOZT0vPHwmIz9cdys7LyxEZT0vPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLEhlPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLFJlPS9eJHxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxNZT0vXnRydWVcLyguKikvLCRlPS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZyxPZT17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sdGhlYWQ6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLGNvbDpbMiwiPHRhYmxlPjxjb2xncm91cD4iLCI8L2NvbGdyb3VwPjwvdGFibGU+Il0sdHI6WzIsIjx0YWJsZT48dGJvZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLHRkOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXSxfZGVmYXVsdDpbMCwiIiwiIl19O09lLm9wdGdyb3VwPU9lLm9wdGlvbixPZS50Ym9keT1PZS50Zm9vdD1PZS5jb2xncm91cD1PZS5jYXB0aW9uPU9lLnRoZWFkLE9lLnRoPU9lLnRkLFouZXh0ZW5kKHtjbG9uZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscixzLG8sYT1lLmNsb25lTm9kZSghMCksbD1aLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKTtpZighKEoubm9DbG9uZUNoZWNrZWR8fDEhPT1lLm5vZGVUeXBlJiYxMSE9PWUubm9kZVR5cGV8fFouaXNYTUxEb2MoZSkpKWZvcihvPW0oYSkscz1tKGUpLGk9MCxyPXMubGVuZ3RoO3I+aTtpKyspeShzW2ldLG9baV0pO2lmKHQpaWYobilmb3Iocz1zfHxtKGUpLG89b3x8bShhKSxpPTAscj1zLmxlbmd0aDtyPmk7aSsrKXYoc1tpXSxvW2ldKTtlbHNlIHYoZSxhKTtyZXR1cm4gbz1tKGEsInNjcmlwdCIpLG8ubGVuZ3RoPjAmJmcobywhbCYmbShlLCJzY3JpcHQiKSksYX0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihlLHQsbixpKXtmb3IodmFyIHIscyxvLGEsbCxjLHU9dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZD1bXSxwPTAsaD1lLmxlbmd0aDtoPnA7cCsrKWlmKHI9ZVtwXSxyfHwwPT09cilpZigib2JqZWN0Ij09PVoudHlwZShyKSlaLm1lcmdlKGQsci5ub2RlVHlwZT9bcl06cik7ZWxzZSBpZihOZS50ZXN0KHIpKXtmb3Iocz1zfHx1LmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVudCgiZGl2IikpLG89KExlLmV4ZWMocil8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksYT1PZVtvXXx8T2UuX2RlZmF1bHQscy5pbm5lckhUTUw9YVsxXStyLnJlcGxhY2UoUGUsIjwkMT48LyQyPiIpK2FbMl0sYz1hWzBdO2MtLTspcz1zLmxhc3RDaGlsZDtaLm1lcmdlKGQscy5jaGlsZE5vZGVzKSxzPXUuZmlyc3RDaGlsZCxzLnRleHRDb250ZW50PSIifWVsc2UgZC5wdXNoKHQuY3JlYXRlVGV4dE5vZGUocikpO2Zvcih1LnRleHRDb250ZW50PSIiLHA9MDtyPWRbcCsrXTspaWYoKCFpfHwtMT09PVouaW5BcnJheShyLGkpKSYmKGw9Wi5jb250YWlucyhyLm93bmVyRG9jdW1lbnQscikscz1tKHUuYXBwZW5kQ2hpbGQociksInNjcmlwdCIpLGwmJmcocyksbikpZm9yKGM9MDtyPXNbYysrXTspUmUudGVzdChyLnR5cGV8fCIiKSYmbi5wdXNoKHIpO3JldHVybiB1fSxjbGVhbkRhdGE6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4saSxyLHM9Wi5ldmVudC5zcGVjaWFsLG89MDt2b2lkIDAhPT0obj1lW29dKTtvKyspe2lmKFouYWNjZXB0RGF0YShuKSYmKHI9blttZS5leHBhbmRvXSxyJiYodD1tZS5jYWNoZVtyXSkpKXtpZih0LmV2ZW50cylmb3IoaSBpbiB0LmV2ZW50cylzW2ldP1ouZXZlbnQucmVtb3ZlKG4saSk6Wi5yZW1vdmVFdmVudChuLGksdC5oYW5kbGUpO21lLmNhY2hlW3JdJiZkZWxldGUgbWUuY2FjaGVbcl19ZGVsZXRlIHllLmNhY2hlW25beWUuZXhwYW5kb11dfX19KSxaLmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gdmUodGhpcyxmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT9aLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpJiYodGhpcy50ZXh0Q29udGVudD1lKX0pfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihlKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIHQ9cCh0aGlzLGUpO3QuYXBwZW5kQ2hpbGQoZSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciB0PXAodGhpcyxlKTt0Lmluc2VydEJlZm9yZShlLHQuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzLm5leHRTaWJsaW5nKX0pfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4saT1lP1ouZmlsdGVyKGUsdGhpcyk6dGhpcyxyPTA7bnVsbCE9KG49aVtyXSk7cisrKXR8fDEhPT1uLm5vZGVUeXBlfHxaLmNsZWFuRGF0YShtKG4pKSxuLnBhcmVudE5vZGUmJih0JiZaLmNvbnRhaW5zKG4ub3duZXJEb2N1bWVudCxuKSYmZyhtKG4sInNjcmlwdCIpKSxuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobikpO3JldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgZSx0PTA7bnVsbCE9KGU9dGhpc1t0XSk7dCsrKTE9PT1lLm5vZGVUeXBlJiYoWi5jbGVhbkRhdGEobShlLCExKSksZS50ZXh0Q29udGVudD0iIik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bnVsbD09ZT8hMTplLHQ9bnVsbD09dD9lOnQsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gWi5jbG9uZSh0aGlzLGUsdCl9KX0saHRtbDpmdW5jdGlvbihlKXtyZXR1cm4gdmUodGhpcyxmdW5jdGlvbihlKXt2YXIgdD10aGlzWzBdfHx7fSxuPTAsaT10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1lJiYxPT09dC5ub2RlVHlwZSlyZXR1cm4gdC5pbm5lckhUTUw7aWYoInN0cmluZyI9PXR5cGVvZiBlJiYhRGUudGVzdChlKSYmIU9lWyhMZS5leGVjKGUpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7ZT1lLnJlcGxhY2UoUGUsIjwkMT48LyQyPiIpO3RyeXtmb3IoO2k+bjtuKyspdD10aGlzW25dfHx7fSwxPT09dC5ub2RlVHlwZSYmKFouY2xlYW5EYXRhKG0odCwhMSkpLHQuaW5uZXJIVE1MPWUpO3Q9MH1jYXRjaChyKXt9fXQmJnRoaXMuZW1wdHkoKS5hcHBlbmQoZSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKHQpe2U9dGhpcy5wYXJlbnROb2RlLFouY2xlYW5EYXRhKG0odGhpcykpLGUmJmUucmVwbGFjZUNoaWxkKHQsdGhpcyl9KSxlJiYoZS5sZW5ndGh8fGUubm9kZVR5cGUpP3RoaXM6dGhpcy5yZW1vdmUoKX0sZGV0YWNoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlbW92ZShlLCEwKX0sZG9tTWFuaXA6ZnVuY3Rpb24oZSx0KXtlPVguYXBwbHkoW10sZSk7dmFyIG4saSxyLHMsbyxhLGw9MCxjPXRoaXMubGVuZ3RoLHU9dGhpcyxkPWMtMSxwPWVbMF0sZz1aLmlzRnVuY3Rpb24ocCk7aWYoZ3x8Yz4xJiYic3RyaW5nIj09dHlwZW9mIHAmJiFKLmNoZWNrQ2xvbmUmJkhlLnRlc3QocCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihuKXt2YXIgaT11LmVxKG4pO2cmJihlWzBdPXAuY2FsbCh0aGlzLG4saS5odG1sKCkpKSxpLmRvbU1hbmlwKGUsdCl9KTtpZihjJiYobj1aLmJ1aWxkRnJhZ21lbnQoZSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsdGhpcyksaT1uLmZpcnN0Q2hpbGQsMT09PW4uY2hpbGROb2Rlcy5sZW5ndGgmJihuPWkpLGkpKXtmb3Iocj1aLm1hcChtKG4sInNjcmlwdCIpLGgpLHM9ci5sZW5ndGg7Yz5sO2wrKylvPW4sbCE9PWQmJihvPVouY2xvbmUobywhMCwhMCkscyYmWi5tZXJnZShyLG0obywic2NyaXB0IikpKSx0LmNhbGwodGhpc1tsXSxvLGwpO2lmKHMpZm9yKGE9cltyLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LFoubWFwKHIsZiksbD0wO3M+bDtsKyspbz1yW2xdLFJlLnRlc3Qoby50eXBlfHwiIikmJiFtZS5hY2Nlc3MobywiZ2xvYmFsRXZhbCIpJiZaLmNvbnRhaW5zKGEsbykmJihvLnNyYz9aLl9ldmFsVXJsJiZaLl9ldmFsVXJsKG8uc3JjKTpaLmdsb2JhbEV2YWwoby50ZXh0Q29udGVudC5yZXBsYWNlKCRlLCIiKSkpfXJldHVybiB0aGlzfX0pLFouZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGUsdCl7Wi5mbltlXT1mdW5jdGlvbihlKXtmb3IodmFyIG4saT1bXSxyPVooZSkscz1yLmxlbmd0aC0xLG89MDtzPj1vO28rKyluPW89PT1zP3RoaXM6dGhpcy5jbG9uZSghMCksWihyW29dKVt0XShuKSx6LmFwcGx5KGksbi5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGkpfX0pO3ZhciBJZSxxZT17fSxGZT0vXm1hcmdpbi8sVWU9bmV3IFJlZ0V4cCgiXigiK1RlKyIpKD8hcHgpW2EteiVdKyQiLCJpIiksV2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5vcGVuZXI/dC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUodCxudWxsKTplLmdldENvbXB1dGVkU3R5bGUodCxudWxsKX07IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe28uc3R5bGUuY3NzVGV4dD0iLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luLXRvcDoxJTt0b3A6MSU7Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGUiLG8uaW5uZXJIVE1MPSIiLHIuYXBwZW5kQ2hpbGQocyk7dmFyIHQ9ZS5nZXRDb21wdXRlZFN0eWxlKG8sbnVsbCk7bj0iMSUiIT09dC50b3AsaT0iNHB4Ij09PXQud2lkdGgsci5yZW1vdmVDaGlsZChzKX12YXIgbixpLHI9Sy5kb2N1bWVudEVsZW1lbnQscz1LLmNyZWF0ZUVsZW1lbnQoImRpdiIpLG89Sy5jcmVhdGVFbGVtZW50KCJkaXYiKTtvLnN0eWxlJiYoby5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLG8uY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIixKLmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09by5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxzLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixzLmFwcGVuZENoaWxkKG8pLGUuZ2V0Q29tcHV0ZWRTdHlsZSYmWi5leHRlbmQoSix7cGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiB0KCksbn0sYm94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09aSYmdCgpLGl9LHJlbGlhYmxlTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXt2YXIgdCxuPW8uYXBwZW5kQ2hpbGQoSy5jcmVhdGVFbGVtZW50KCJkaXYiKSk7cmV0dXJuIG4uc3R5bGUuY3NzVGV4dD1vLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCIsbi5zdHlsZS5tYXJnaW5SaWdodD1uLnN0eWxlLndpZHRoPSIwIixvLnN0eWxlLndpZHRoPSIxcHgiLHIuYXBwZW5kQ2hpbGQocyksdD0hcGFyc2VGbG9hdChlLmdldENvbXB1dGVkU3R5bGUobixudWxsKS5tYXJnaW5SaWdodCksci5yZW1vdmVDaGlsZChzKSxvLnJlbW92ZUNoaWxkKG4pLHR9fSkpfSgpLFouc3dhcD1mdW5jdGlvbihlLHQsbixpKXt2YXIgcixzLG89e307Zm9yKHMgaW4gdClvW3NdPWUuc3R5bGVbc10sZS5zdHlsZVtzXT10W3NdO3I9bi5hcHBseShlLGl8fFtdKTtmb3IocyBpbiB0KWUuc3R5bGVbc109b1tzXTtyZXR1cm4gcn07dmFyIFhlPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyx6ZT1uZXcgUmVnRXhwKCJeKCIrVGUrIikoLiopJCIsImkiKSxCZT1uZXcgUmVnRXhwKCJeKFsrLV0pPSgiK1RlKyIpIiwiaSIpLFZlPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxZZT17bGV0dGVyU3BhY2luZzoiMCIsZm9udFdlaWdodDoiNDAwIn0sR2U9WyJXZWJraXQiLCJPIiwiTW96IiwibXMiXTtaLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPVQoZSwib3BhY2l0eSIpO3JldHVybiIiPT09bj8iMSI6bn19fX0sY3NzTnVtYmVyOntjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9yZGVyOiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7ImZsb2F0IjoiY3NzRmxvYXQifSxzdHlsZTpmdW5jdGlvbihlLHQsbixpKXtpZihlJiYzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGUmJmUuc3R5bGUpe3ZhciByLHMsbyxhPVouY2FtZWxDYXNlKHQpLGw9ZS5zdHlsZTtyZXR1cm4gdD1aLmNzc1Byb3BzW2FdfHwoWi5jc3NQcm9wc1thXT14KGwsYSkpLG89Wi5jc3NIb29rc1t0XXx8Wi5jc3NIb29rc1thXSx2b2lkIDA9PT1uP28mJiJnZXQiaW4gbyYmdm9pZCAwIT09KHI9by5nZXQoZSwhMSxpKSk/cjpsW3RdOihzPXR5cGVvZiBuLCJzdHJpbmciPT09cyYmKHI9QmUuZXhlYyhuKSkmJihuPShyWzFdKzEpKnJbMl0rcGFyc2VGbG9hdChaLmNzcyhlLHQpKSxzPSJudW1iZXIiKSxudWxsIT1uJiZuPT09biYmKCJudW1iZXIiIT09c3x8Wi5jc3NOdW1iZXJbYV18fChuKz0icHgiKSxKLmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1ufHwwIT09dC5pbmRleE9mKCJiYWNrZ3JvdW5kIil8fChsW3RdPSJpbmhlcml0IiksbyYmInNldCJpbiBvJiZ2b2lkIDA9PT0obj1vLnNldChlLG4saSkpfHwobFt0XT1uKSksdm9pZCAwKX19LGNzczpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixzLG8sYT1aLmNhbWVsQ2FzZSh0KTtyZXR1cm4gdD1aLmNzc1Byb3BzW2FdfHwoWi5jc3NQcm9wc1thXT14KGUuc3R5bGUsYSkpLG89Wi5jc3NIb29rc1t0XXx8Wi5jc3NIb29rc1thXSxvJiYiZ2V0ImluIG8mJihyPW8uZ2V0KGUsITAsbikpLHZvaWQgMD09PXImJihyPVQoZSx0LGkpKSwibm9ybWFsIj09PXImJnQgaW4gWWUmJihyPVllW3RdKSwiIj09PW58fG4/KHM9cGFyc2VGbG9hdChyKSxuPT09ITB8fFouaXNOdW1lcmljKHMpP3N8fDA6cik6cn19KSxaLmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGUsdCl7Wi5jc3NIb29rc1t0XT17Z2V0OmZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbj9YZS50ZXN0KFouY3NzKGUsImRpc3BsYXkiKSkmJjA9PT1lLm9mZnNldFdpZHRoP1ouc3dhcChlLFZlLGZ1bmN0aW9uKCl7cmV0dXJuIGsoZSx0LGkpfSk6ayhlLHQsaSk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oZSxuLGkpe3ZhciByPWkmJldlKGUpO3JldHVybiB3KGUsbixpP0UoZSx0LGksImJvcmRlci1ib3giPT09Wi5jc3MoZSwiYm94U2l6aW5nIiwhMSxyKSxyKTowKX19fSksWi5jc3NIb29rcy5tYXJnaW5SaWdodD1TKEoucmVsaWFibGVNYXJnaW5SaWdodCxmdW5jdGlvbihlLHQpe3JldHVybiB0P1ouc3dhcChlLHtkaXNwbGF5OiJpbmxpbmUtYmxvY2sifSxULFtlLCJtYXJnaW5SaWdodCJdKTp2b2lkIDB9KSxaLmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihlLHQpe1ouY3NzSG9va3NbZSt0XT17ZXhwYW5kOmZ1bmN0aW9uKG4pe2Zvcih2YXIgaT0wLHI9e30scz0ic3RyaW5nIj09dHlwZW9mIG4/bi5zcGxpdCgiICIpOltuXTs0Pmk7aSsrKXJbZStTZVtpXSt0XT1zW2ldfHxzW2ktMl18fHNbMF07cmV0dXJuIHJ9fSxGZS50ZXN0KGUpfHwoWi5jc3NIb29rc1tlK3RdLnNldD13KX0pLFouZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdmUodGhpcyxmdW5jdGlvbihlLHQsbil7dmFyIGkscixzPXt9LG89MDtpZihaLmlzQXJyYXkodCkpe2ZvcihpPVdlKGUpLHI9dC5sZW5ndGg7cj5vO28rKylzW3Rbb11dPVouY3NzKGUsdFtvXSwhMSxpKTtyZXR1cm4gc31yZXR1cm4gdm9pZCAwIT09bj9aLnN0eWxlKGUsdCxuKTpaLmNzcyhlLHQpfSxlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBDKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIEModGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBlP2U/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7eGUodGhpcyk/Wih0aGlzKS5zaG93KCk6Wih0aGlzKS5oaWRlKCl9KX19KSxaLlR3ZWVuPWosai5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmosaW5pdDpmdW5jdGlvbihlLHQsbixpLHIscyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9cnx8InN3aW5nIix0aGlzLm9wdGlvbnM9dCx0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9aSx0aGlzLnVuaXQ9c3x8KFouY3NzTnVtYmVyW25dPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgZT1qLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBlJiZlLmdldD9lLmdldCh0aGlzKTpqLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihlKXt2YXIgdCxuPWoucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz10PVouZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPXQ9ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpqLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LGoucHJvdG90eXBlLmluaXQucHJvdG90eXBlPWoucHJvdG90eXBlLGoucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBudWxsPT1lLmVsZW1bZS5wcm9wXXx8ZS5lbGVtLnN0eWxlJiZudWxsIT1lLmVsZW0uc3R5bGVbZS5wcm9wXT8odD1aLmNzcyhlLmVsZW0sZS5wcm9wLCIiKSx0JiYiYXV0byIhPT10P3Q6MCk6ZS5lbGVtW2UucHJvcF19LHNldDpmdW5jdGlvbihlKXtaLmZ4LnN0ZXBbZS5wcm9wXT9aLmZ4LnN0ZXBbZS5wcm9wXShlKTplLmVsZW0uc3R5bGUmJihudWxsIT1lLmVsZW0uc3R5bGVbWi5jc3NQcm9wc1tlLnByb3BdXXx8Wi5jc3NIb29rc1tlLnByb3BdKT9aLnN0eWxlKGUuZWxlbSxlLnByb3AsZS5ub3crZS51bml0KTplLmVsZW1bZS5wcm9wXT1lLm5vd319fSxqLnByb3BIb29rcy5zY3JvbGxUb3A9ai5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGUpe2UuZWxlbS5ub2RlVHlwZSYmZS5lbGVtLnBhcmVudE5vZGUmJihlLmVsZW1bZS5wcm9wXT1lLm5vdyl9fSxaLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxzd2luZzpmdW5jdGlvbihlKXtyZXR1cm4uNS1NYXRoLmNvcyhlKk1hdGguUEkpLzJ9fSxaLmZ4PWoucHJvdG90eXBlLmluaXQsWi5meC5zdGVwPXt9O3ZhciBKZSxLZSxRZT0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sWmU9bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK1RlKyIpKFthLXolXSopJCIsImkiKSxldD0vcXVldWVIb29rcyQvLHR0PVtOXSxudD17IioiOltmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuY3JlYXRlVHdlZW4oZSx0KSxpPW4uY3VyKCkscj1aZS5leGVjKHQpLHM9ciYmclszXXx8KFouY3NzTnVtYmVyW2VdPyIiOiJweCIpLG89KFouY3NzTnVtYmVyW2VdfHwicHgiIT09cyYmK2kpJiZaZS5leGVjKFouY3NzKG4uZWxlbSxlKSksYT0xLGw9MjA7aWYobyYmb1szXSE9PXMpe3M9c3x8b1szXSxyPXJ8fFtdLG89K2l8fDE7ZG8gYT1hfHwiLjUiLG8vPWEsWi5zdHlsZShuLmVsZW0sZSxvK3MpO3doaWxlKGEhPT0oYT1uLmN1cigpL2kpJiYxIT09YSYmLS1sKX1yZXR1cm4gciYmKG89bi5zdGFydD0rb3x8K2l8fDAsbi51bml0PXMsbi5lbmQ9clsxXT9vKyhyWzFdKzEpKnJbMl06K3JbMl0pLG59XX07Wi5BbmltYXRpb249Wi5leHRlbmQoSCx7dHdlZW5lcjpmdW5jdGlvbihlLHQpe1ouaXNGdW5jdGlvbihlKT8odD1lLGU9WyIqIl0pOmU9ZS5zcGxpdCgiICIpO2Zvcih2YXIgbixpPTAscj1lLmxlbmd0aDtyPmk7aSsrKW49ZVtpXSxudFtuXT1udFtuXXx8W10sbnRbbl0udW5zaGlmdCh0KX0scHJlZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dD90dC51bnNoaWZ0KGUpOnR0LnB1c2goZSl9fSksWi5zcGVlZD1mdW5jdGlvbihlLHQsbil7dmFyIGk9ZSYmIm9iamVjdCI9PXR5cGVvZiBlP1ouZXh0ZW5kKHt9LGUpOntjb21wbGV0ZTpufHwhbiYmdHx8Wi5pc0Z1bmN0aW9uKGUpJiZlLGR1cmF0aW9uOmUsZWFzaW5nOm4mJnR8fHQmJiFaLmlzRnVuY3Rpb24odCkmJnR9O3JldHVybiBpLmR1cmF0aW9uPVouZngub2ZmPzA6Im51bWJlciI9PXR5cGVvZiBpLmR1cmF0aW9uP2kuZHVyYXRpb246aS5kdXJhdGlvbiBpbiBaLmZ4LnNwZWVkcz9aLmZ4LnNwZWVkc1tpLmR1cmF0aW9uXTpaLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09aS5xdWV1ZXx8aS5xdWV1ZT09PSEwKSYmKGkucXVldWU9ImZ4IiksaS5vbGQ9aS5jb21wbGV0ZSxpLmNvbXBsZXRlPWZ1bmN0aW9uKCl7Wi5pc0Z1bmN0aW9uKGkub2xkKSYmaS5vbGQuY2FsbCh0aGlzKSxpLnF1ZXVlJiZaLmRlcXVldWUodGhpcyxpLnF1ZXVlKX0saX0sWi5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdGhpcy5maWx0ZXIoeGUpLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6dH0sZSxuLGkpfSxhbmltYXRlOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPVouaXNFbXB0eU9iamVjdChlKSxzPVouc3BlZWQodCxuLGkpLG89ZnVuY3Rpb24oKXt2YXIgdD1IKHRoaXMsWi5leHRlbmQoe30sZSkscyk7KHJ8fG1lLmdldCh0aGlzLCJmaW5pc2giKSkmJnQuc3RvcCghMCl9O3JldHVybiBvLmZpbmlzaD1vLHJ8fHMucXVldWU9PT0hMT90aGlzLmVhY2gobyk6dGhpcy5xdWV1ZShzLnF1ZXVlLG8pfSxzdG9wOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1mdW5jdGlvbihlKXt2YXIgdD1lLnN0b3A7ZGVsZXRlIGUuc3RvcCx0KG4pfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGUmJihuPXQsdD1lLGU9dm9pZCAwKSx0JiZlIT09ITEmJnRoaXMucXVldWUoZXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ITAscj1udWxsIT1lJiZlKyJxdWV1ZUhvb2tzIixzPVoudGltZXJzLG89bWUuZ2V0KHRoaXMpO2lmKHIpb1tyXSYmb1tyXS5zdG9wJiZpKG9bcl0pO2Vsc2UgZm9yKHIgaW4gbylvW3JdJiZvW3JdLnN0b3AmJmV0LnRlc3QocikmJmkob1tyXSk7Zm9yKHI9cy5sZW5ndGg7ci0tOylzW3JdLmVsZW0hPT10aGlzfHxudWxsIT1lJiZzW3JdLnF1ZXVlIT09ZXx8KHNbcl0uYW5pbS5zdG9wKG4pLHQ9ITEscy5zcGxpY2UociwxKSk7KHR8fCFuKSYmWi5kZXF1ZXVlKHRoaXMsZSl9KX0sZmluaXNoOmZ1bmN0aW9uKGUpe3JldHVybiBlIT09ITEmJihlPWV8fCJmeCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0LG49bWUuZ2V0KHRoaXMpLGk9bltlKyJxdWV1ZSJdLHI9bltlKyJxdWV1ZUhvb2tzIl0scz1aLnRpbWVycyxvPWk/aS5sZW5ndGg6MDtmb3Iobi5maW5pc2g9ITAsWi5xdWV1ZSh0aGlzLGUsW10pLHImJnIuc3RvcCYmci5zdG9wLmNhbGwodGhpcywhMCksdD1zLmxlbmd0aDt0LS07KXNbdF0uZWxlbT09PXRoaXMmJnNbdF0ucXVldWU9PT1lJiYoc1t0XS5hbmltLnN0b3AoITApLHMuc3BsaWNlKHQsMSkpO2Zvcih0PTA7bz50O3QrKylpW3RdJiZpW3RdLmZpbmlzaCYmaVt0XS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgbi5maW5pc2h9KX19KSxaLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGUsdCl7dmFyIG49Wi5mblt0XTtaLmZuW3RdPWZ1bmN0aW9uKGUsaSxyKXtyZXR1cm4gbnVsbD09ZXx8ImJvb2xlYW4iPT10eXBlb2YgZT9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoUCh0LCEwKSxlLGkscil9fSksWi5lYWNoKHtzbGlkZURvd246UCgic2hvdyIpLHNsaWRlVXA6UCgiaGlkZSIpLHNsaWRlVG9nZ2xlOlAoInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSx0KXtaLmZuW2VdPWZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gdGhpcy5hbmltYXRlKHQsZSxuLGkpfX0pLFoudGltZXJzPVtdLFouZngudGljaz1mdW5jdGlvbigpe3ZhciBlLHQ9MCxuPVoudGltZXJzO2ZvcihKZT1aLm5vdygpO3Q8bi5sZW5ndGg7dCsrKWU9blt0XSxlKCl8fG5bdF0hPT1lfHxuLnNwbGljZSh0LS0sMSk7bi5sZW5ndGh8fFouZnguc3RvcCgpLEplPXZvaWQgMH0sWi5meC50aW1lcj1mdW5jdGlvbihlKXtaLnRpbWVycy5wdXNoKGUpLGUoKT9aLmZ4LnN0YXJ0KCk6Wi50aW1lcnMucG9wKCl9LFouZnguaW50ZXJ2YWw9MTMsWi5meC5zdGFydD1mdW5jdGlvbigpe0tlfHwoS2U9c2V0SW50ZXJ2YWwoWi5meC50aWNrLFouZnguaW50ZXJ2YWwpKX0sWi5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChLZSksS2U9bnVsbH0sWi5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sWi5mbi5kZWxheT1mdW5jdGlvbihlLHQpe3JldHVybiBlPVouZng/Wi5meC5zcGVlZHNbZV18fGU6ZSx0PXR8fCJmeCIsdGhpcy5xdWV1ZSh0LGZ1bmN0aW9uKHQsbil7dmFyIGk9c2V0VGltZW91dCh0LGUpO24uc3RvcD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChpKX19KX0sZnVuY3Rpb24oKXt2YXIgZT1LLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksdD1LLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLG49dC5hcHBlbmRDaGlsZChLLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtlLnR5cGU9ImNoZWNrYm94IixKLmNoZWNrT249IiIhPT1lLnZhbHVlLEoub3B0U2VsZWN0ZWQ9bi5zZWxlY3RlZCx0LmRpc2FibGVkPSEwLEoub3B0RGlzYWJsZWQ9IW4uZGlzYWJsZWQsZT1LLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksZS52YWx1ZT0idCIsZS50eXBlPSJyYWRpbyIsSi5yYWRpb1ZhbHVlPSJ0Ij09PWUudmFsdWV9KCk7dmFyIGl0LHJ0LHN0PVouZXhwci5hdHRySGFuZGxlO1ouZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZlKHRoaXMsWi5hdHRyLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtaLnJlbW92ZUF0dHIodGhpcyxlKX0pfX0pLFouZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLHM9ZS5ub2RlVHlwZTtpZihlJiYzIT09cyYmOCE9PXMmJjIhPT1zKXJldHVybiB0eXBlb2YgZS5nZXRBdHRyaWJ1dGU9PT1FZT9aLnByb3AoZSx0LG4pOigxPT09cyYmWi5pc1hNTERvYyhlKXx8KHQ9dC50b0xvd2VyQ2FzZSgpLGk9Wi5hdHRySG9va3NbdF18fChaLmV4cHIubWF0Y2guYm9vbC50ZXN0KHQpP3J0Oml0KSksdm9pZCAwPT09bj9pJiYiZ2V0ImluIGkmJm51bGwhPT0ocj1pLmdldChlLHQpKT9yOihyPVouZmluZC5hdHRyKGUsdCksbnVsbD09cj92b2lkIDA6cik6bnVsbCE9PW4/aSYmInNldCJpbiBpJiZ2b2lkIDAhPT0ocj1pLnNldChlLG4sdCkpP3I6KGUuc2V0QXR0cmlidXRlKHQsbisiIiksbik6dm9pZCBaLnJlbW92ZUF0dHIoZSx0KSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9MCxzPXQmJnQubWF0Y2goaGUpO2lmKHMmJjE9PT1lLm5vZGVUeXBlKWZvcig7bj1zW3IrK107KWk9Wi5wcm9wRml4W25dfHxuLFouZXhwci5tYXRjaC5ib29sLnRlc3QobikmJihlW2ldPSExKSxlLnJlbW92ZUF0dHJpYnV0ZShuKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oZSx0KXtpZighSi5yYWRpb1ZhbHVlJiYicmFkaW8iPT09dCYmWi5ub2RlTmFtZShlLCJpbnB1dCIpKXt2YXIgbj1lLnZhbHVlO3JldHVybiBlLnNldEF0dHJpYnV0ZSgidHlwZSIsdCksbiYmKGUudmFsdWU9biksdH19fX19KSxydD17c2V0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdD09PSExP1oucmVtb3ZlQXR0cihlLG4pOmUuc2V0QXR0cmlidXRlKG4sbiksbn19LFouZWFjaChaLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihlLHQpe3ZhciBuPXN0W3RdfHxaLmZpbmQuYXR0cjtzdFt0XT1mdW5jdGlvbihlLHQsaSl7dmFyIHIscztyZXR1cm4gaXx8KHM9c3RbdF0sc3RbdF09cixyPW51bGwhPW4oZSx0LGkpP3QudG9Mb3dlckNhc2UoKTpudWxsLHN0W3RdPXMpLHJ9fSk7dmFyIG90PS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2k7Wi5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdmUodGhpcyxaLnByb3AsZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW1oucHJvcEZpeFtlXXx8ZV19KX19KSxaLmV4dGVuZCh7cHJvcEZpeDp7ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSJ9LHByb3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIscyxvPWUubm9kZVR5cGU7aWYoZSYmMyE9PW8mJjghPT1vJiYyIT09bylyZXR1cm4gcz0xIT09b3x8IVouaXNYTUxEb2MoZSkscyYmKHQ9Wi5wcm9wRml4W3RdfHx0LHI9Wi5wcm9wSG9va3NbdF0pLHZvaWQgMCE9PW4/ciYmInNldCJpbiByJiZ2b2lkIDAhPT0oaT1yLnNldChlLG4sdCkpP2k6ZVt0XT1uOnImJiJnZXQiaW4gciYmbnVsbCE9PShpPXIuZ2V0KGUsdCkpP2k6ZVt0XX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGUpe3JldHVybiBlLmhhc0F0dHJpYnV0ZSgidGFiaW5kZXgiKXx8b3QudGVzdChlLm5vZGVOYW1lKXx8ZS5ocmVmP2UudGFiSW5kZXg6LTF9fX19KSxKLm9wdFNlbGVjdGVkfHwoWi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJnQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH19KSxaLmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe1oucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KTt2YXIgYXQ9L1tcdFxyXG5cZl0vZztaLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIscyxvLGE9InN0cmluZyI9PXR5cGVvZiBlJiZlLGw9MCxjPXRoaXMubGVuZ3RoO2lmKFouaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe1oodGhpcykuYWRkQ2xhc3MoZS5jYWxsKHRoaXMsdCx0aGlzLmNsYXNzTmFtZSkpfSk7aWYoYSlmb3IodD0oZXx8IiIpLm1hdGNoKGhlKXx8W107Yz5sO2wrKylpZihuPXRoaXNbbF0saT0xPT09bi5ub2RlVHlwZSYmKG4uY2xhc3NOYW1lPygiICIrbi5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKGF0LCIgIik6IiAiKSl7Zm9yKHM9MDtyPXRbcysrXTspaS5pbmRleE9mKCIgIityKyIgIik8MCYmKGkrPXIrIiAiKTtvPVoudHJpbShpKSxuLmNsYXNzTmFtZSE9PW8mJihuLmNsYXNzTmFtZT1vKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIscyxvLGE9MD09PWFyZ3VtZW50cy5sZW5ndGh8fCJzdHJpbmciPT10eXBlb2YgZSYmZSxsPTAsYz10aGlzLmxlbmd0aDtpZihaLmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXtaKHRoaXMpLnJlbW92ZUNsYXNzKGUuY2FsbCh0aGlzLHQsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGEpZm9yKHQ9KGV8fCIiKS5tYXRjaChoZSl8fFtdO2M+bDtsKyspaWYobj10aGlzW2xdLGk9MT09PW4ubm9kZVR5cGUmJihuLmNsYXNzTmFtZT8oIiAiK24uY2xhc3NOYW1lKyIgIikucmVwbGFjZShhdCwiICIpOiIiKSl7Zm9yKHM9MDtyPXRbcysrXTspZm9yKDtpLmluZGV4T2YoIiAiK3IrIiAiKT49MDspaT1pLnJlcGxhY2UoIiAiK3IrIiAiLCIgIik7bz1lP1oudHJpbShpKToiIixuLmNsYXNzTmFtZSE9PW8mJihuLmNsYXNzTmFtZT1vKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBlb2YgZTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiB0JiYic3RyaW5nIj09PW4/dD90aGlzLmFkZENsYXNzKGUpOnRoaXMucmVtb3ZlQ2xhc3MoZSk6Wi5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbihuKXtaKHRoaXMpLnRvZ2dsZUNsYXNzKGUuY2FsbCh0aGlzLG4sdGhpcy5jbGFzc05hbWUsdCksdCl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXtpZigic3RyaW5nIj09PW4pZm9yKHZhciB0LGk9MCxyPVoodGhpcykscz1lLm1hdGNoKGhlKXx8W107dD1zW2krK107KXIuaGFzQ2xhc3ModCk/ci5yZW1vdmVDbGFzcyh0KTpyLmFkZENsYXNzKHQpO2Vsc2Uobj09PUVlfHwiYm9vbGVhbiI9PT1uKSYmKHRoaXMuY2xhc3NOYW1lJiZtZS5zZXQodGhpcywiX19jbGFzc05hbWVfXyIsdGhpcy5jbGFzc05hbWUpLHRoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lfHxlPT09ITE/IiI6bWUuZ2V0KHRoaXMsIl9fY2xhc3NOYW1lX18iKXx8IiIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0iICIrZSsiICIsbj0wLGk9dGhpcy5sZW5ndGg7aT5uO24rKylpZigxPT09dGhpc1tuXS5ub2RlVHlwZSYmKCIgIit0aGlzW25dLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoYXQsIiAiKS5pbmRleE9mKHQpPj0wKXJldHVybiEwO3JldHVybiExfX0pO3ZhciBsdD0vXHIvZztaLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGk9Wi5pc0Z1bmN0aW9uKGUpLHRoaXMuZWFjaChmdW5jdGlvbihuKXt2YXIgcjsxPT09dGhpcy5ub2RlVHlwZSYmKHI9aT9lLmNhbGwodGhpcyxuLFoodGhpcykudmFsKCkpOmUsbnVsbD09cj9yPSIiOiJudW1iZXIiPT10eXBlb2Ygcj9yKz0iIjpaLmlzQXJyYXkocikmJihyPVoubWFwKHIsZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6ZSsiIn0pKSx0PVoudmFsSG9va3NbdGhpcy50eXBlXXx8Wi52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLHQmJiJzZXQiaW4gdCYmdm9pZCAwIT09dC5zZXQodGhpcyxyLCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT1yKSl9KTtpZihyKXJldHVybiB0PVoudmFsSG9va3Nbci50eXBlXXx8Wi52YWxIb29rc1tyLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLHQmJiJnZXQiaW4gdCYmdm9pZCAwIT09KG49dC5nZXQociwidmFsdWUiKSk/bjoobj1yLnZhbHVlLCJzdHJpbmciPT10eXBlb2Ygbj9uLnJlcGxhY2UobHQsIiIpOm51bGw9PW4/IiI6bil9fX0pLFouZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9Wi5maW5kLmF0dHIoZSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9dD90OloudHJpbShaLnRleHQoZSkpfX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4saT1lLm9wdGlvbnMscj1lLnNlbGVjdGVkSW5kZXgscz0ic2VsZWN0LW9uZSI9PT1lLnR5cGV8fDA+cixvPXM/bnVsbDpbXSxhPXM/cisxOmkubGVuZ3RoLGw9MD5yP2E6cz9yOjA7YT5sO2wrKylpZihuPWlbbF0sKG4uc2VsZWN0ZWR8fGw9PT1yKSYmKEoub3B0RGlzYWJsZWQ/IW4uZGlzYWJsZWQ6bnVsbD09PW4uZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpKSYmKCFuLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFaLm5vZGVOYW1lKG4ucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKHQ9WihuKS52YWwoKSxzKXJldHVybiB0O28ucHVzaCh0KX1yZXR1cm4gb30sc2V0OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuLGkscj1lLm9wdGlvbnMscz1aLm1ha2VBcnJheSh0KSxvPXIubGVuZ3RoO28tLTspaT1yW29dLChpLnNlbGVjdGVkPVouaW5BcnJheShpLnZhbHVlLHMpPj0wKSYmKG49ITApO3JldHVybiBufHwoZS5zZWxlY3RlZEluZGV4PS0xKSxzfX19fSksWi5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7Wi52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFouaXNBcnJheSh0KT9lLmNoZWNrZWQ9Wi5pbkFycmF5KFooZSkudmFsKCksdCk+PTA6dm9pZCAwfX0sSi5jaGVja09ufHwoWi52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmUudmFsdWV9KX0pLFouZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe1ouZm5bdF09ZnVuY3Rpb24oZSxuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24odCxudWxsLGUsbik6dGhpcy50cmlnZ2VyKHQpfX0pLFouZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoZSkubW91c2VsZWF2ZSh0fHxlKX0sYmluZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMub24oZSxudWxsLHQsbil9LHVuYmluZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm9mZihlLG51bGwsdCl9LGRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0aGlzLm9uKHQsZSxuLGkpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoZSwiKioiKTp0aGlzLm9mZih0LGV8fCIqKiIsbil9fSk7dmFyIGN0PVoubm93KCksdXQ9L1w/LztaLnBhcnNlSlNPTj1mdW5jdGlvbihlKXtyZXR1cm4gSlNPTi5wYXJzZShlKyIiKX0sWi5wYXJzZVhNTD1mdW5jdGlvbihlKXt2YXIgdCxuO2lmKCFlfHwic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7dHJ5e249bmV3IERPTVBhcnNlcix0PW4ucGFyc2VGcm9tU3RyaW5nKGUsInRleHQveG1sIil9Y2F0Y2goaSl7dD12b2lkIDB9cmV0dXJuKCF0fHx0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aCkmJlouZXJyb3IoIkludmFsaWQgWE1MOiAiK2UpLHR9O3ZhciBkdD0vIy4qJC8scHQ9LyhbPyZdKV89W14mXSovLGh0PS9eKC4qPyk6WyBcdF0qKFteXHJcbl0qKSQvZ20sZnQ9L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sZ3Q9L14oPzpHRVR8SEVBRCkkLyx2dD0vXlwvXC8vLG10PS9eKFtcdy4rLV0rOikoPzpcL1wvKD86W15cLz8jXSpAfCkoW15cLz8jOl0qKSg/OjooXGQrKXwpfCkvLHl0PXt9LF90PXt9LGJ0PSIqLyIuY29uY2F0KCIqIiksVHQ9ZS5sb2NhdGlvbi5ocmVmLFN0PW10LmV4ZWMoVHQudG9Mb3dlckNhc2UoKSl8fFtdO1ouZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpUdCx0eXBlOiJHRVQiLGlzTG9jYWw6ZnQudGVzdChTdFsxXSksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjpidCx0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOloucGFyc2VKU09OLCJ0ZXh0IHhtbCI6Wi5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/JCgkKGUsWi5hamF4U2V0dGluZ3MpLHQpOiQoWi5hamF4U2V0dGluZ3MsZSl9LGFqYXhQcmVmaWx0ZXI6Uih5dCksYWpheFRyYW5zcG9ydDpSKF90KSxhamF4OmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQsbixvKXt2YXIgbCx1LG0seSxiLFM9dDsyIT09XyYmKF89MixhJiZjbGVhclRpbWVvdXQoYSksaT12b2lkIDAscz1vfHwiIixULnJlYWR5U3RhdGU9ZT4wPzQ6MCxsPWU+PTIwMCYmMzAwPmV8fDMwND09PWUsbiYmKHk9TyhkLFQsbikpLHk9SShkLHksVCxsKSxsPyhkLmlmTW9kaWZpZWQmJihiPVQuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSxiJiYoWi5sYXN0TW9kaWZpZWRbcl09YiksYj1ULmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIiksYiYmKFouZXRhZ1tyXT1iKSksMjA0PT09ZXx8IkhFQUQiPT09ZC50eXBlP1M9Im5vY29udGVudCI6MzA0PT09ZT9TPSJub3Rtb2RpZmllZCI6KFM9eS5zdGF0ZSx1PXkuZGF0YSxtPXkuZXJyb3IsbD0hbSkpOihtPVMsKGV8fCFTKSYmKFM9ImVycm9yIiwwPmUmJihlPTApKSksVC5zdGF0dXM9ZSxULnN0YXR1c1RleHQ9KHR8fFMpKyIiLGw/Zi5yZXNvbHZlV2l0aChwLFt1LFMsVF0pOmYucmVqZWN0V2l0aChwLFtULFMsbV0pLFQuc3RhdHVzQ29kZSh2KSx2PXZvaWQgMCxjJiZoLnRyaWdnZXIobD8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFtULGQsbD91Om1dKSxnLmZpcmVXaXRoKHAsW1QsU10pLGMmJihoLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW1QsZF0pLC0tWi5hY3RpdmV8fFouZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfSJvYmplY3QiPT10eXBlb2YgZSYmKHQ9ZSxlPXZvaWQgMCksdD10fHx7fTt2YXIgaSxyLHMsbyxhLGwsYyx1LGQ9Wi5hamF4U2V0dXAoe30sdCkscD1kLmNvbnRleHR8fGQsaD1kLmNvbnRleHQmJihwLm5vZGVUeXBlfHxwLmpxdWVyeSk/WihwKTpaLmV2ZW50LGY9Wi5EZWZlcnJlZCgpLGc9Wi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iiksdj1kLnN0YXR1c0NvZGV8fHt9LG09e30seT17fSxfPTAsYj0iY2FuY2VsZWQiLFQ9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdDtpZigyPT09Xyl7aWYoIW8pZm9yKG89e307dD1odC5leGVjKHMpOylvW3RbMV0udG9Mb3dlckNhc2UoKV09dFsyXTt0PW9bZS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09dD9udWxsOnR9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09Xz9zOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIF98fChlPXlbbl09eVtuXXx8ZSxtW2VdPXQpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIF98fChkLm1pbWVUeXBlPWUpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZSlpZigyPl8pZm9yKHQgaW4gZSl2W3RdPVt2W3RdLGVbdF1dO2Vsc2UgVC5hbHdheXMoZVtULnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXt2YXIgdD1lfHxiO3JldHVybiBpJiZpLmFib3J0KHQpLG4oMCx0KSx0aGlzfX07aWYoZi5wcm9taXNlKFQpLmNvbXBsZXRlPWcuYWRkLFQuc3VjY2Vzcz1ULmRvbmUsVC5lcnJvcj1ULmZhaWwsZC51cmw9KChlfHxkLnVybHx8VHQpKyIiKS5yZXBsYWNlKGR0LCIiKS5yZXBsYWNlKHZ0LFN0WzFdKyIvLyIpLGQudHlwZT10Lm1ldGhvZHx8dC50eXBlfHxkLm1ldGhvZHx8ZC50eXBlLGQuZGF0YVR5cGVzPVoudHJpbShkLmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goaGUpfHxbIiJdLG51bGw9PWQuY3Jvc3NEb21haW4mJihsPW10LmV4ZWMoZC51cmwudG9Mb3dlckNhc2UoKSksZC5jcm9zc0RvbWFpbj0hKCFsfHxsWzFdPT09U3RbMV0mJmxbMl09PT1TdFsyXSYmKGxbM118fCgiaHR0cDoiPT09bFsxXT8iODAiOiI0NDMiKSk9PT0oU3RbM118fCgiaHR0cDoiPT09U3RbMV0/IjgwIjoiNDQzIikpKSksZC5kYXRhJiZkLnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIGQuZGF0YSYmKGQuZGF0YT1aLnBhcmFtKGQuZGF0YSxkLnRyYWRpdGlvbmFsKSksTSh5dCxkLHQsVCksMj09PV8pcmV0dXJuIFQ7Yz1aLmV2ZW50JiZkLmdsb2JhbCxjJiYwPT09Wi5hY3RpdmUrKyYmWi5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKSxkLnR5cGU9ZC50eXBlLnRvVXBwZXJDYXNlKCksZC5oYXNDb250ZW50PSFndC50ZXN0KGQudHlwZSkscj1kLnVybCxkLmhhc0NvbnRlbnR8fChkLmRhdGEmJihyPWQudXJsKz0odXQudGVzdChyKT8iJiI6Ij8iKStkLmRhdGEsZGVsZXRlIGQuZGF0YSksZC5jYWNoZT09PSExJiYoZC51cmw9cHQudGVzdChyKT9yLnJlcGxhY2UocHQsIiQxXz0iK2N0KyspOnIrKHV0LnRlc3Qocik/IiYiOiI/IikrIl89IitjdCsrKSksZC5pZk1vZGlmaWVkJiYoWi5sYXN0TW9kaWZpZWRbcl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLFoubGFzdE1vZGlmaWVkW3JdKSxaLmV0YWdbcl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsWi5ldGFnW3JdKSksKGQuZGF0YSYmZC5oYXNDb250ZW50JiZkLmNvbnRlbnRUeXBlIT09ITF8fHQuY29udGVudFR5cGUpJiZULnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsZC5jb250ZW50VHlwZSksVC5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLGQuZGF0YVR5cGVzWzBdJiZkLmFjY2VwdHNbZC5kYXRhVHlwZXNbMF1dP2QuYWNjZXB0c1tkLmRhdGFUeXBlc1swXV0rKCIqIiE9PWQuZGF0YVR5cGVzWzBdPyIsICIrYnQrIjsgcT0wLjAxIjoiIik6ZC5hY2NlcHRzWyIqIl0pO2Zvcih1IGluIGQuaGVhZGVycylULnNldFJlcXVlc3RIZWFkZXIodSxkLmhlYWRlcnNbdV0pO2lmKGQuYmVmb3JlU2VuZCYmKGQuYmVmb3JlU2VuZC5jYWxsKHAsVCxkKT09PSExfHwyPT09XykpcmV0dXJuIFQuYWJvcnQoKTtiPSJhYm9ydCI7Zm9yKHUgaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pVFt1XShkW3VdKTtpZihpPU0oX3QsZCx0LFQpKXtULnJlYWR5U3RhdGU9MSxjJiZoLnRyaWdnZXIoImFqYXhTZW5kIixbVCxkXSksZC5hc3luYyYmZC50aW1lb3V0PjAmJihhPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtULmFib3J0KCJ0aW1lb3V0Iil9LGQudGltZW91dCkpO3RyeXtfPTEsaS5zZW5kKG0sbil9Y2F0Y2goUyl7aWYoISgyPl8pKXRocm93IFM7bigtMSxTKX19ZWxzZSBuKC0xLCJObyBUcmFuc3BvcnQiKTtyZXR1cm4gVH0sZ2V0SlNPTjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFouZ2V0KGUsdCxuLCJqc29uIil9LGdldFNjcmlwdDpmdW5jdGlvbihlLHQpe3JldHVybiBaLmdldChlLHZvaWQgMCx0LCJzY3JpcHQiKX19KSxaLmVhY2goWyJnZXQiLCJwb3N0Il0sZnVuY3Rpb24oZSx0KXtaW3RdPWZ1bmN0aW9uKGUsbixpLHIpe3JldHVybiBaLmlzRnVuY3Rpb24obikmJihyPXJ8fGksaT1uLG49dm9pZCAwKSxaLmFqYXgoe3VybDplLHR5cGU6dCxkYXRhVHlwZTpyLGRhdGE6bixzdWNjZXNzOml9KX19KSxaLl9ldmFsVXJsPWZ1bmN0aW9uKGUpe3JldHVybiBaLmFqYXgoe3VybDplLHR5cGU6IkdFVCIsZGF0YVR5cGU6InNjcmlwdCIsYXN5bmM6ITEsZ2xvYmFsOiExLCJ0aHJvd3MiOiEwfSl9LFouZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBaLmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe1oodGhpcykud3JhcEFsbChlLmNhbGwodGhpcyx0KSl9KToodGhpc1swXSYmKHQ9WihlLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmdC5pbnNlcnRCZWZvcmUodGhpc1swXSksdC5tYXAoZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcztlLmZpcnN0RWxlbWVudENoaWxkOyllPWUuZmlyc3RFbGVtZW50Q2hpbGQ7cmV0dXJuIGV9KS5hcHBlbmQodGhpcykpLHRoaXMpfSx3cmFwSW5uZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIFouaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24odCl7Wih0aGlzKS53cmFwSW5uZXIoZS5jYWxsKHRoaXMsdCkpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9Wih0aGlzKSxuPXQuY29udGVudHMoKTtuLmxlbmd0aD9uLndyYXBBbGwoZSk6dC5hcHBlbmQoZSl9KX0sd3JhcDpmdW5jdGlvbihlKXt2YXIgdD1aLmlzRnVuY3Rpb24oZSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihuKXtaKHRoaXMpLndyYXBBbGwodD9lLmNhbGwodGhpcyxuKTplKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7Wi5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fFoodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfX0pLFouZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihlKXtyZXR1cm4gZS5vZmZzZXRXaWR0aDw9MCYmZS5vZmZzZXRIZWlnaHQ8PTB9LFouZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oZSl7cmV0dXJuIVouZXhwci5maWx0ZXJzLmhpZGRlbihlKX07dmFyIHh0PS8lMjAvZyx3dD0vXFtcXSQvLEV0PS9ccj9cbi9nLGt0PS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxDdD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7Wi5wYXJhbT1mdW5jdGlvbihlLHQpe3ZhciBuLGk9W10scj1mdW5jdGlvbihlLHQpe3Q9Wi5pc0Z1bmN0aW9uKHQpP3QoKTpudWxsPT10PyIiOnQsaVtpLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGUpKyI9IitlbmNvZGVVUklDb21wb25lbnQodCl9O2lmKHZvaWQgMD09PXQmJih0PVouYWpheFNldHRpbmdzJiZaLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCksWi5pc0FycmF5KGUpfHxlLmpxdWVyeSYmIVouaXNQbGFpbk9iamVjdChlKSlaLmVhY2goZSxmdW5jdGlvbigpe3IodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IobiBpbiBlKXEobixlW25dLHQscik7cmV0dXJuIGkuam9pbigiJiIpLnJlcGxhY2UoeHQsIisiKX0sWi5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBaLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGU9Wi5wcm9wKHRoaXMsImVsZW1lbnRzIik7cmV0dXJuIGU/Wi5tYWtlQXJyYXkoZSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciBlPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhWih0aGlzKS5pcygiOmRpc2FibGVkIikmJkN0LnRlc3QodGhpcy5ub2RlTmFtZSkmJiFrdC50ZXN0KGUpJiYodGhpcy5jaGVja2VkfHwhd2UudGVzdChlKSl9KS5tYXAoZnVuY3Rpb24oZSx0KXt2YXIgbj1aKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1uP251bGw6Wi5pc0FycmF5KG4pP1oubWFwKG4sZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6dC5uYW1lLHZhbHVlOmUucmVwbGFjZShFdCwiXHJcbiIpfX0pOntuYW1lOnQubmFtZSx2YWx1ZTpuLnJlcGxhY2UoRXQsIlxyXG4iKX19KS5nZXQoKX19KSxaLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChlKXt9fTt2YXIganQ9MCxBdD17fSxQdD17MDoyMDAsMTIyMzoyMDR9LEx0PVouYWpheFNldHRpbmdzLnhocigpO2UuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixmdW5jdGlvbigpe2Zvcih2YXIgZSBpbiBBdClBdFtlXSgpfSksSi5jb3JzPSEhTHQmJiJ3aXRoQ3JlZGVudGlhbHMiaW4gTHQsSi5hamF4PUx0PSEhTHQsWi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBKLmNvcnN8fEx0JiYhZS5jcm9zc0RvbWFpbj97c2VuZDpmdW5jdGlvbihuLGkpe3ZhciByLHM9ZS54aHIoKSxvPSsranQ7aWYocy5vcGVuKGUudHlwZSxlLnVybCxlLmFzeW5jLGUudXNlcm5hbWUsZS5wYXNzd29yZCksZS54aHJGaWVsZHMpZm9yKHIgaW4gZS54aHJGaWVsZHMpc1tyXT1lLnhockZpZWxkc1tyXTtlLm1pbWVUeXBlJiZzLm92ZXJyaWRlTWltZVR5cGUmJnMub3ZlcnJpZGVNaW1lVHlwZShlLm1pbWVUeXBlKSxlLmNyb3NzRG9tYWlufHxuWyJYLVJlcXVlc3RlZC1XaXRoIl18fChuWyJYLVJlcXVlc3RlZC1XaXRoIl09IlhNTEh0dHBSZXF1ZXN0Iik7Zm9yKHIgaW4gbilzLnNldFJlcXVlc3RIZWFkZXIocixuW3JdKTt0PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3QmJihkZWxldGUgQXRbb10sdD1zLm9ubG9hZD1zLm9uZXJyb3I9bnVsbCwiYWJvcnQiPT09ZT9zLmFib3J0KCk6ImVycm9yIj09PWU/aShzLnN0YXR1cyxzLnN0YXR1c1RleHQpOmkoUHRbcy5zdGF0dXNdfHxzLnN0YXR1cyxzLnN0YXR1c1RleHQsInN0cmluZyI9PXR5cGVvZiBzLnJlc3BvbnNlVGV4dD97dGV4dDpzLnJlc3BvbnNlVGV4dH06dm9pZCAwLHMuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LHMub25sb2FkPXQoKSxzLm9uZXJyb3I9dCgiZXJyb3IiKSx0PUF0W29dPXQoImFib3J0Iik7dHJ5e3Muc2VuZChlLmhhc0NvbnRlbnQmJmUuZGF0YXx8bnVsbCl9Y2F0Y2goYSl7aWYodCl0aHJvdyBhfX0sYWJvcnQ6ZnVuY3Rpb24oKXt0JiZ0KCl9fTp2b2lkIDB9KSxaLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGUpe3JldHVybiBaLmdsb2JhbEV2YWwoZSksZX19fSksWi5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUuY2FjaGUmJihlLmNhY2hlPSExKSxlLmNyb3NzRG9tYWluJiYoZS50eXBlPSJHRVQiKX0pLFouYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihlKXtpZihlLmNyb3NzRG9tYWluKXt2YXIgdCxuO3JldHVybntzZW5kOmZ1bmN0aW9uKGkscil7dD1aKCI8c2NyaXB0PiIpLnByb3Aoe2FzeW5jOiEwLGNoYXJzZXQ6ZS5zY3JpcHRDaGFyc2V0LHNyYzplLnVybH0pLm9uKCJsb2FkIGVycm9yIixuPWZ1bmN0aW9uKGUpe3QucmVtb3ZlKCksbj1udWxsLGUmJnIoImVycm9yIj09PWUudHlwZT80MDQ6MjAwLGUudHlwZSl9KSxLLmhlYWQuYXBwZW5kQ2hpbGQodFswXSl9LGFib3J0OmZ1bmN0aW9uKCl7biYmbigpfX19fSk7dmFyIE50PVtdLER0PS8oPSlcPyg/PSZ8JCl8XD9cPy87Wi5hamF4U2V0dXAoe2pzb25wOiJjYWxsYmFjayIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBlPU50LnBvcCgpfHxaLmV4cGFuZG8rIl8iK2N0Kys7cmV0dXJuIHRoaXNbZV09ITAsZX19KSxaLmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKHQsbixpKXt2YXIgcixzLG8sYT10Lmpzb25wIT09ITEmJihEdC50ZXN0KHQudXJsKT8idXJsIjoic3RyaW5nIj09dHlwZW9mIHQuZGF0YSYmISh0LmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJkR0LnRlc3QodC5kYXRhKSYmImRhdGEiKTtyZXR1cm4gYXx8Impzb25wIj09PXQuZGF0YVR5cGVzWzBdPyhyPXQuanNvbnBDYWxsYmFjaz1aLmlzRnVuY3Rpb24odC5qc29ucENhbGxiYWNrKT90Lmpzb25wQ2FsbGJhY2soKTp0Lmpzb25wQ2FsbGJhY2ssYT90W2FdPXRbYV0ucmVwbGFjZShEdCwiJDEiK3IpOnQuanNvbnAhPT0hMSYmKHQudXJsKz0odXQudGVzdCh0LnVybCk/IiYiOiI/IikrdC5qc29ucCsiPSIrciksdC5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIG98fFouZXJyb3IocisiIHdhcyBub3QgY2FsbGVkIiksb1swXX0sdC5kYXRhVHlwZXNbMF09Impzb24iLHM9ZVtyXSxlW3JdPWZ1bmN0aW9uKCl7bz1hcmd1bWVudHN9LGkuYWx3YXlzKGZ1bmN0aW9uKCl7ZVtyXT1zLHRbcl0mJih0Lmpzb25wQ2FsbGJhY2s9bi5qc29ucENhbGxiYWNrLE50LnB1c2gocikpLG8mJlouaXNGdW5jdGlvbihzKSYmcyhvWzBdKSxvPXM9dm9pZCAwfSksInNjcmlwdCIpOnZvaWQgMH0pLFoucGFyc2VIVE1MPWZ1bmN0aW9uKGUsdCxuKXtpZighZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiBudWxsOyJib29sZWFuIj09dHlwZW9mIHQmJihuPXQsdD0hMSksdD10fHxLO3ZhciBpPW9lLmV4ZWMoZSkscj0hbiYmW107cmV0dXJuIGk/W3QuY3JlYXRlRWxlbWVudChpWzFdKV06KGk9Wi5idWlsZEZyYWdtZW50KFtlXSx0LHIpLHImJnIubGVuZ3RoJiZaKHIpLnJlbW92ZSgpLFoubWVyZ2UoW10saS5jaGlsZE5vZGVzKSl9O3ZhciBIdD1aLmZuLmxvYWQ7Wi5mbi5sb2FkPWZ1bmN0aW9uKGUsdCxuKXtpZigic3RyaW5nIiE9dHlwZW9mIGUmJkh0KXJldHVybiBIdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGkscixzLG89dGhpcyxhPWUuaW5kZXhPZigiICIpO3JldHVybiBhPj0wJiYoaT1aLnRyaW0oZS5zbGljZShhKSksZT1lLnNsaWNlKDAsYSkpLFouaXNGdW5jdGlvbih0KT8obj10LHQ9dm9pZCAwKTp0JiYib2JqZWN0Ij09dHlwZW9mIHQmJihyPSJQT1NUIiksby5sZW5ndGg+MCYmWi5hamF4KHt1cmw6ZSx0eXBlOnIsZGF0YVR5cGU6Imh0bWwiLGRhdGE6dH0pLmRvbmUoZnVuY3Rpb24oZSl7cz1hcmd1bWVudHMsby5odG1sKGk/WigiPGRpdj4iKS5hcHBlbmQoWi5wYXJzZUhUTUwoZSkpLmZpbmQoaSk6ZSl9KS5jb21wbGV0ZShuJiZmdW5jdGlvbihlLHQpe28uZWFjaChuLHN8fFtlLnJlc3BvbnNlVGV4dCx0LGVdKX0pLHRoaXN9LFouZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGUsdCl7Wi5mblt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLFouZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBaLmdyZXAoWi50aW1lcnMsZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10LmVsZW19KS5sZW5ndGh9O3ZhciBSdD1lLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtaLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLHMsbyxhLGwsYyx1PVouY3NzKGUsInBvc2l0aW9uIiksZD1aKGUpLHA9e307InN0YXRpYyI9PT11JiYoZS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxhPWQub2Zmc2V0KCkscz1aLmNzcyhlLCJ0b3AiKSxsPVouY3NzKGUsImxlZnQiKSxjPSgiYWJzb2x1dGUiPT09dXx8ImZpeGVkIj09PXUpJiYocytsKS5pbmRleE9mKCJhdXRvIik+LTEsYz8oaT1kLnBvc2l0aW9uKCksbz1pLnRvcCxyPWkubGVmdCk6KG89cGFyc2VGbG9hdChzKXx8MCxyPXBhcnNlRmxvYXQobCl8fDApLFouaXNGdW5jdGlvbih0KSYmKHQ9dC5jYWxsKGUsbixhKSksbnVsbCE9dC50b3AmJihwLnRvcD10LnRvcC1hLnRvcCtvKSxudWxsIT10LmxlZnQmJihwLmxlZnQ9dC5sZWZ0LWEubGVmdCtyKSwidXNpbmciaW4gdD90LnVzaW5nLmNhbGwoZSxwKTpkLmNzcyhwKX19LFouZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oZSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09ZT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbih0KXtaLm9mZnNldC5zZXRPZmZzZXQodGhpcyxlLHQpfSk7dmFyIHQsbixpPXRoaXNbMF0scj17dG9wOjAsbGVmdDowfSxzPWkmJmkub3duZXJEb2N1bWVudDtpZihzKXJldHVybiB0PXMuZG9jdW1lbnRFbGVtZW50LFouY29udGFpbnModCxpKT8odHlwZW9mIGkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09RWUmJihyPWkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLG49RihzKSx7dG9wOnIudG9wK24ucGFnZVlPZmZzZXQtdC5jbGllbnRUb3AsbGVmdDpyLmxlZnQrbi5wYWdlWE9mZnNldC10LmNsaWVudExlZnR9KTpyfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBlLHQsbj10aGlzWzBdLGk9e3RvcDowLGxlZnQ6MH07cmV0dXJuImZpeGVkIj09PVouY3NzKG4sInBvc2l0aW9uIik/dD1uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihlPXRoaXMub2Zmc2V0UGFyZW50KCksdD10aGlzLm9mZnNldCgpLFoubm9kZU5hbWUoZVswXSwiaHRtbCIpfHwoaT1lLm9mZnNldCgpKSxpLnRvcCs9Wi5jc3MoZVswXSwiYm9yZGVyVG9wV2lkdGgiLCEwKSxpLmxlZnQrPVouY3NzKGVbMF0sImJvcmRlckxlZnRXaWR0aCIsITApKSx7dG9wOnQudG9wLWkudG9wLVouY3NzKG4sIm1hcmdpblRvcCIsITApLGxlZnQ6dC5sZWZ0LWkubGVmdC1aLmNzcyhuLCJtYXJnaW5MZWZ0IiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMub2Zmc2V0UGFyZW50fHxSdDtlJiYhWi5ub2RlTmFtZShlLCJodG1sIikmJiJzdGF0aWMiPT09Wi5jc3MoZSwicG9zaXRpb24iKTspZT1lLm9mZnNldFBhcmVudDtyZXR1cm4gZXx8UnR9KX19KSxaLmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24odCxuKXt2YXIgaT0icGFnZVlPZmZzZXQiPT09bjtaLmZuW3RdPWZ1bmN0aW9uKHIpe3JldHVybiB2ZSh0aGlzLGZ1bmN0aW9uKHQscixzKXt2YXIgbz1GKHQpO3JldHVybiB2b2lkIDA9PT1zP28/b1tuXTp0W3JdOnZvaWQobz9vLnNjcm9sbFRvKGk/ZS5wYWdlWE9mZnNldDpzLGk/czplLnBhZ2VZT2Zmc2V0KTp0W3JdPXMpfSx0LHIsYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KSxaLmVhY2goWyJ0b3AiLCJsZWZ0Il0sZnVuY3Rpb24oZSx0KXtaLmNzc0hvb2tzW3RdPVMoSi5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGUsbil7cmV0dXJuIG4/KG49VChlLHQpLFVlLnRlc3Qobik/WihlKS5wb3NpdGlvbigpW3RdKyJweCI6bik6dm9pZCAwfSl9KSxaLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihlLHQpe1ouZWFjaCh7cGFkZGluZzoiaW5uZXIiK2UsY29udGVudDp0LCIiOiJvdXRlciIrZX0sZnVuY3Rpb24obixpKXtaLmZuW2ldPWZ1bmN0aW9uKGkscil7dmFyIHM9YXJndW1lbnRzLmxlbmd0aCYmKG58fCJib29sZWFuIiE9dHlwZW9mIGkpLG89bnx8KGk9PT0hMHx8cj09PSEwPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gdmUodGhpcyxmdW5jdGlvbih0LG4saSl7dmFyIHI7cmV0dXJuIFouaXNXaW5kb3codCk/dC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrZV06OT09PXQubm9kZVR5cGU/KHI9dC5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgodC5ib2R5WyJzY3JvbGwiK2VdLHJbInNjcm9sbCIrZV0sdC5ib2R5WyJvZmZzZXQiK2VdLHJbIm9mZnNldCIrZV0sclsiY2xpZW50IitlXSkpOnZvaWQgMD09PWk/Wi5jc3ModCxuLG8pOlouc3R5bGUodCxuLGksbyl9LHQscz9pOnZvaWQgMCxzLG51bGwpfX0pfSksWi5mbi5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSxaLmZuLmFuZFNlbGY9Wi5mbi5hZGRCYWNrLCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiBafSk7dmFyIE10PWUualF1ZXJ5LCR0PWUuJDtyZXR1cm4gWi5ub0NvbmZsaWN0PWZ1bmN0aW9uKHQpe3JldHVybiBlLiQ9PT1aJiYoZS4kPSR0KSx0JiZlLmpRdWVyeT09PVomJihlLmpRdWVyeT1NdCksWn0sdHlwZW9mIHQ9PT1FZSYmKGUualF1ZXJ5PWUuJD1aKSxafSksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpe3ZhciBlPWNyZWF0ZWpzLlNvdW5kSlM9Y3JlYXRlanMuU291bmRKU3x8e307ZS52ZXJzaW9uPSIwLjYuMCIsZS5idWlsZERhdGU9IlRodSwgMTEgRGVjIDIwMTQgMjM6MzI6MDkgR01UIn0oKSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGNyZWF0ZWpzLmV4dGVuZD1mdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXJldHVybiBuLnByb3RvdHlwZT10LnByb3RvdHlwZSxlLnByb3RvdHlwZT1uZXcgbn0sdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxjcmVhdGVqcy5wcm9tb3RlPWZ1bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO3ZhciBuPWUucHJvdG90eXBlLGk9T2JqZWN0LmdldFByb3RvdHlwZU9mJiZPYmplY3QuZ2V0UHJvdG90eXBlT2Yobil8fG4uX19wcm90b19fO2lmKGkpe25bKHQrPSJfIikrImNvbnN0cnVjdG9yIl09aS5jb25zdHJ1Y3Rvcjtmb3IodmFyIHIgaW4gaSluLmhhc093blByb3BlcnR5KHIpJiYiZnVuY3Rpb24iPT10eXBlb2YgaVtyXSYmKG5bdCtyXT1pW3JdKX1yZXR1cm4gZX0sdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxjcmVhdGVqcy5pbmRleE9mPWZ1bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO2Zvcih2YXIgbj0wLGk9ZS5sZW5ndGg7aT5uO24rKylpZih0PT09ZVtuXSlyZXR1cm4gbjtyZXR1cm4tMX0sdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtjcmVhdGVqcy5wcm94eT1mdW5jdGlvbihlLHQpe3ZhciBuPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKS5jb25jYXQobikpfX19KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QuZGVmaW5lUHJvcGVydHk/ITA6ITEsdD17fTt0cnl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsImJhciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXJ9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9iYXI9ZX19KX1jYXRjaChuKXtlPSExfWNyZWF0ZWpzLmRlZmluZVByb3BlcnR5U3VwcG9ydGVkPWV9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKCl7dGhyb3ciQnJvd3NlckRldGVjdCBjYW5ub3QgYmUgaW5zdGFudGlhdGVkIn12YXIgdD1lLmFnZW50PXdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O2UuaXNXaW5kb3dQaG9uZT10LmluZGV4T2YoIklFTW9iaWxlIik+LTF8fHQuaW5kZXhPZigiV2luZG93cyBQaG9uZSIpPi0xLGUuaXNGaXJlZm94PXQuaW5kZXhPZigiRmlyZWZveCIpPi0xLGUuaXNPcGVyYT1udWxsIT13aW5kb3cub3BlcmEsZS5pc0Nocm9tZT10LmluZGV4T2YoIkNocm9tZSIpPi0xLGUuaXNJT1M9KHQuaW5kZXhPZigiaVBvZCIpPi0xfHx0LmluZGV4T2YoImlQaG9uZSIpPi0xfHx0LmluZGV4T2YoImlQYWQiKT4tMSkmJiFlLmlzV2luZG93UGhvbmUsZS5pc0FuZHJvaWQ9dC5pbmRleE9mKCJBbmRyb2lkIik+LTEmJiFlLmlzV2luZG93UGhvbmUsZS5pc0JsYWNrYmVycnk9dC5pbmRleE9mKCJCbGFja2JlcnJ5Iik+LTEsY3JlYXRlanMuQnJvd3NlckRldGVjdD1lfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSgpe3RoaXMuX2xpc3RlbmVycz1udWxsLHRoaXMuX2NhcHR1cmVMaXN0ZW5lcnM9bnVsbH12YXIgdD1lLnByb3RvdHlwZTtlLmluaXRpYWxpemU9ZnVuY3Rpb24oZSl7ZS5hZGRFdmVudExpc3RlbmVyPXQuYWRkRXZlbnRMaXN0ZW5lcixlLm9uPXQub24sZS5yZW1vdmVFdmVudExpc3RlbmVyPWUub2ZmPXQucmVtb3ZlRXZlbnRMaXN0ZW5lcixlLnJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzPXQucmVtb3ZlQWxsRXZlbnRMaXN0ZW5lcnMsZS5oYXNFdmVudExpc3RlbmVyPXQuaGFzRXZlbnRMaXN0ZW5lcixlLmRpc3BhdGNoRXZlbnQ9dC5kaXNwYXRjaEV2ZW50LGUuX2Rpc3BhdGNoRXZlbnQ9dC5fZGlzcGF0Y2hFdmVudCxlLndpbGxUcmlnZ2VyPXQud2lsbFRyaWdnZXJ9LHQuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihlLHQsbil7dmFyIGk7aT1uP3RoaXMuX2NhcHR1cmVMaXN0ZW5lcnM9dGhpcy5fY2FwdHVyZUxpc3RlbmVyc3x8e306dGhpcy5fbGlzdGVuZXJzPXRoaXMuX2xpc3RlbmVyc3x8e307dmFyIHI9aVtlXTtyZXR1cm4gciYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGUsdCxuKSxyPWlbZV0scj9yLnB1c2godCk6aVtlXT1bdF0sdH0sdC5vbj1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIHQuaGFuZGxlRXZlbnQmJihuPW58fHQsdD10LmhhbmRsZUV2ZW50KSxuPW58fHRoaXMsdGhpcy5hZGRFdmVudExpc3RlbmVyKGUsZnVuY3Rpb24oZSl7dC5jYWxsKG4sZSxyKSxpJiZlLnJlbW92ZSgpfSxzKX0sdC5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uP3RoaXMuX2NhcHR1cmVMaXN0ZW5lcnM6dGhpcy5fbGlzdGVuZXJzO2lmKGkpe3ZhciByPWlbZV07aWYocilmb3IodmFyIHM9MCxvPXIubGVuZ3RoO28+cztzKyspaWYocltzXT09dCl7MT09bz9kZWxldGUgaVtlXTpyLnNwbGljZShzLDEpO2JyZWFrfX19LHQub2ZmPXQucmVtb3ZlRXZlbnRMaXN0ZW5lcix0LnJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe2U/KHRoaXMuX2xpc3RlbmVycyYmZGVsZXRlIHRoaXMuX2xpc3RlbmVyc1tlXSx0aGlzLl9jYXB0dXJlTGlzdGVuZXJzJiZkZWxldGUgdGhpcy5fY2FwdHVyZUxpc3RlbmVyc1tlXSk6dGhpcy5fbGlzdGVuZXJzPXRoaXMuX2NhcHR1cmVMaXN0ZW5lcnM9bnVsbH0sdC5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSl7dmFyIHQ9dGhpcy5fbGlzdGVuZXJzO2lmKCF0fHwhdFtlXSlyZXR1cm4hMTtlPW5ldyBjcmVhdGVqcy5FdmVudChlKX1lbHNlIGUudGFyZ2V0JiZlLmNsb25lJiYoZT1lLmNsb25lKCkpO3RyeXtlLnRhcmdldD10aGlzfWNhdGNoKG4pe31pZihlLmJ1YmJsZXMmJnRoaXMucGFyZW50KXtmb3IodmFyIGk9dGhpcyxyPVtpXTtpLnBhcmVudDspci5wdXNoKGk9aS5wYXJlbnQpO3ZhciBzLG89ci5sZW5ndGg7Zm9yKHM9by0xO3M+PTAmJiFlLnByb3BhZ2F0aW9uU3RvcHBlZDtzLS0pcltzXS5fZGlzcGF0Y2hFdmVudChlLDErKDA9PXMpKTtmb3Iocz0xO28+cyYmIWUucHJvcGFnYXRpb25TdG9wcGVkO3MrKylyW3NdLl9kaXNwYXRjaEV2ZW50KGUsMyl9ZWxzZSB0aGlzLl9kaXNwYXRjaEV2ZW50KGUsMik7cmV0dXJuIGUuZGVmYXVsdFByZXZlbnRlZH0sdC5oYXNFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2xpc3RlbmVycyxuPXRoaXMuX2NhcHR1cmVMaXN0ZW5lcnM7cmV0dXJuISEodCYmdFtlXXx8biYmbltlXSl9LHQud2lsbFRyaWdnZXI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXM7dDspe2lmKHQuaGFzRXZlbnRMaXN0ZW5lcihlKSlyZXR1cm4hMDt0PXQucGFyZW50fXJldHVybiExfSx0LnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltFdmVudERpc3BhdGNoZXJdIn0sdC5fZGlzcGF0Y2hFdmVudD1mdW5jdGlvbihlLHQpe3ZhciBuLGk9MT09dD90aGlzLl9jYXB0dXJlTGlzdGVuZXJzOnRoaXMuX2xpc3RlbmVycztpZihlJiZpKXt2YXIgcj1pW2UudHlwZV07aWYoIXJ8fCEobj1yLmxlbmd0aCkpcmV0dXJuO3RyeXtlLmN1cnJlbnRUYXJnZXQ9dGhpc31jYXRjaChzKXt9dHJ5e2UuZXZlbnRQaGFzZT10fWNhdGNoKHMpe31lLnJlbW92ZWQ9ITEscj1yLnNsaWNlKCk7Zm9yKHZhciBvPTA7bj5vJiYhZS5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ7bysrKXt2YXIgYT1yW29dO2EuaGFuZGxlRXZlbnQ/YS5oYW5kbGVFdmVudChlKTphKGUpLGUucmVtb3ZlZCYmKHRoaXMub2ZmKGUudHlwZSxhLDE9PXQpLGUucmVtb3ZlZD0hMSl9fX0sY3JlYXRlanMuRXZlbnREaXNwYXRjaGVyPWV9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLnR5cGU9ZSx0aGlzLnRhcmdldD1udWxsLHRoaXMuY3VycmVudFRhcmdldD1udWxsLHRoaXMuZXZlbnRQaGFzZT0wLHRoaXMuYnViYmxlcz0hIXQsdGhpcy5jYW5jZWxhYmxlPSEhbix0aGlzLnRpbWVTdGFtcD0obmV3IERhdGUpLmdldFRpbWUoKSx0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITEsdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQ9ITEsdGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9ITEsdGhpcy5yZW1vdmVkPSExfXZhciB0PWUucHJvdG90eXBlO3QucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9dGhpcy5jYW5jZWxhYmxlJiYhMH0sdC5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZD0hMH0sdC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt0aGlzLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD10aGlzLnByb3BhZ2F0aW9uU3RvcHBlZD0hMH0sdC5yZW1vdmU9ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZWQ9ITB9LHQuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcy50eXBlLHRoaXMuYnViYmxlcyx0aGlzLmNhbmNlbGFibGUpfSx0LnNldD1mdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzW3RdPWVbdF07cmV0dXJuIHRoaXN9LHQudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW0V2ZW50ICh0eXBlPSIrdGhpcy50eXBlKyIpXSJ9LGNyZWF0ZWpzLkV2ZW50PWV9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLkV2ZW50X2NvbnN0cnVjdG9yKCJlcnJvciIpLHRoaXMudGl0bGU9ZSx0aGlzLm1lc3NhZ2U9dCx0aGlzLmRhdGE9bn12YXIgdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5FdmVudCk7dC5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgY3JlYXRlanMuRXJyb3JFdmVudCh0aGlzLnRpdGxlLHRoaXMubWVzc2FnZSx0aGlzLmRhdGEpfSxjcmVhdGVqcy5FcnJvckV2ZW50PWNyZWF0ZWpzLnByb21vdGUoZSwiRXZlbnQiKX0oKSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoZSx0KXt0aGlzLkV2ZW50X2NvbnN0cnVjdG9yKCJwcm9ncmVzcyIpLHRoaXMubG9hZGVkPWUsdGhpcy50b3RhbD1udWxsPT10PzE6dCx0aGlzLnByb2dyZXNzPTA9PXQ/MDp0aGlzLmxvYWRlZC90aGlzLnRvdGFsfXZhciB0PWNyZWF0ZWpzLmV4dGVuZChlLGNyZWF0ZWpzLkV2ZW50KTt0LmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBjcmVhdGVqcy5Qcm9ncmVzc0V2ZW50KHRoaXMubG9hZGVkLHRoaXMudG90YWwpfSxjcmVhdGVqcy5Qcm9ncmVzc0V2ZW50PWNyZWF0ZWpzLnByb21vdGUoZSwiRXZlbnQiKX0od2luZG93KSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoKXt0aGlzLnNyYz1udWxsLHRoaXMudHlwZT1udWxsLHRoaXMuaWQ9bnVsbCx0aGlzLm1haW50YWluT3JkZXI9ITEsdGhpcy5jYWxsYmFjaz1udWxsLHRoaXMuZGF0YT1udWxsLHRoaXMubWV0aG9kPWNyZWF0ZWpzLkxvYWRJdGVtLkdFVCx0aGlzLnZhbHVlcz1udWxsLHRoaXMuaGVhZGVycz1udWxsLHRoaXMud2l0aENyZWRlbnRpYWxzPSExLHRoaXMubWltZVR5cGU9bnVsbCx0aGlzLmNyb3NzT3JpZ2luPSJBbm9ueW1vdXMiLHRoaXMubG9hZFRpbWVvdXQ9OGUzfXZhciB0PWUucHJvdG90eXBlPXt9LG49ZTtuLmNyZWF0ZT1mdW5jdGlvbih0KXtpZigic3RyaW5nIj09dHlwZW9mIHQpe3ZhciBpPW5ldyBlO3JldHVybiBpLnNyYz10LGl9aWYodCBpbnN0YW5jZW9mIG4pcmV0dXJuIHQ7aWYodCBpbnN0YW5jZW9mIE9iamVjdClyZXR1cm4gdDt0aHJvdyBuZXcgRXJyb3IoIlR5cGUgbm90IHJlY29nbml6ZWQuIil9LHQuc2V0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXRoaXNbdF09ZVt0XTtyZXR1cm4gdGhpc30sY3JlYXRlanMuTG9hZEl0ZW09bn0oKSxmdW5jdGlvbigpe3ZhciBlPXt9O2UuQUJTT0xVVEVfUEFUVD0vXig/Olx3KzopP1wvezJ9L2ksZS5SRUxBVElWRV9QQVRUPS9eWy5cL10qP1wvL2ksZS5FWFRFTlNJT05fUEFUVD0vXC8/W15cL10rXC4oXHd7MSw1fSkkL2ksZS5wYXJzZVVSST1mdW5jdGlvbih0KXt2YXIgbj17YWJzb2x1dGU6ITEscmVsYXRpdmU6ITF9O2lmKG51bGw9PXQpcmV0dXJuIG47dmFyIGk9dC5pbmRleE9mKCI/Iik7aT4tMSYmKHQ9dC5zdWJzdHIoMCxpKSk7dmFyIHI7cmV0dXJuIGUuQUJTT0xVVEVfUEFUVC50ZXN0KHQpP24uYWJzb2x1dGU9ITA6ZS5SRUxBVElWRV9QQVRULnRlc3QodCkmJihuLnJlbGF0aXZlPSEwKSwocj10Lm1hdGNoKGUuRVhURU5TSU9OX1BBVFQpKSYmKG4uZXh0ZW5zaW9uPXJbMV0udG9Mb3dlckNhc2UoKSksbn0sZS5mb3JtYXRRdWVyeVN0cmluZz1mdW5jdGlvbihlLHQpe2lmKG51bGw9PWUpdGhyb3cgbmV3IEVycm9yKCJZb3UgbXVzdCBzcGVjaWZ5IGRhdGEuIik7dmFyIG49W107Zm9yKHZhciBpIGluIGUpbi5wdXNoKGkrIj0iK2VzY2FwZShlW2ldKSk7cmV0dXJuIHQmJihuPW4uY29uY2F0KHQpKSxuLmpvaW4oIiYiKX0sZS5idWlsZFBhdGg9ZnVuY3Rpb24oZSx0KXtpZihudWxsPT10KXJldHVybiBlO3ZhciBuPVtdLGk9ZS5pbmRleE9mKCI/Iik7aWYoLTEhPWkpe3ZhciByPWUuc2xpY2UoaSsxKTtuPW4uY29uY2F0KHIuc3BsaXQoIiYiKSl9cmV0dXJuLTEhPWk/ZS5zbGljZSgwLGkpKyI/Iit0aGlzLl9mb3JtYXRRdWVyeVN0cmluZyh0LG4pOmUrIj8iK3RoaXMuX2Zvcm1hdFF1ZXJ5U3RyaW5nKHQsbil9LGUuaXNDcm9zc0RvbWFpbj1mdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7dC5ocmVmPWUuc3JjO3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTtuLmhyZWY9bG9jYXRpb24uaHJlZjt2YXIgaT0iIiE9dC5ob3N0bmFtZSYmKHQucG9ydCE9bi5wb3J0fHx0LnByb3RvY29sIT1uLnByb3RvY29sfHx0Lmhvc3RuYW1lIT1uLmhvc3RuYW1lKTtyZXR1cm4gaX0sZS5pc0xvY2FsPWZ1bmN0aW9uKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTtyZXR1cm4gdC5ocmVmPWUuc3JjLCIiPT10Lmhvc3RuYW1lJiYiZmlsZToiPT10LnByb3RvY29sfSxlLmlzQmluYXJ5PWZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLklNQUdFOmNhc2UgY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuQklOQVJZOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fSxlLmlzSW1hZ2VUYWc9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50fSxlLmlzQXVkaW9UYWc9ZnVuY3Rpb24oZSl7cmV0dXJuIHdpbmRvdy5IVE1MQXVkaW9FbGVtZW50P2UgaW5zdGFuY2VvZiBIVE1MQXVkaW9FbGVtZW50OiExfSxlLmlzVmlkZW9UYWc9ZnVuY3Rpb24oZSl7cmV0dXJuIHdpbmRvdy5IVE1MVmlkZW9FbGVtZW50P2UgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50OnZvaWQgMH0sZS5pc1RleHQ9ZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2UgY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuVEVYVDpjYXNlIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkpTT046Y2FzZSBjcmVhdGVqcy5BYnN0cmFjdExvYWRlci5NQU5JRkVTVDpjYXNlIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLlhNTDpjYXNlIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkNTUzpjYXNlIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLlNWRzpjYXNlIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkpBVkFTQ1JJUFQ6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LGUuZ2V0VHlwZUJ5RXh0ZW5zaW9uPWZ1bmN0aW9uKGUpe2lmKG51bGw9PWUpcmV0dXJuIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLlRFWFQ7c3dpdGNoKGUudG9Mb3dlckNhc2UoKSl7Y2FzZSJqcGVnIjpjYXNlImpwZyI6Y2FzZSJnaWYiOmNhc2UicG5nIjpjYXNlIndlYnAiOmNhc2UiYm1wIjpyZXR1cm4gY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuSU1BR0U7Y2FzZSJvZ2ciOmNhc2UibXAzIjpjYXNlIndlYm0iOnJldHVybiBjcmVhdGVqcy5BYnN0cmFjdExvYWRlci5TT1VORDtjYXNlIm1wNCI6Y2FzZSJ3ZWJtIjpjYXNlInRzIjpyZXR1cm4gY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuVklERU87Y2FzZSJqc29uIjpyZXR1cm4gY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuSlNPTjtjYXNlInhtbCI6cmV0dXJuIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLlhNTDtjYXNlImNzcyI6cmV0dXJuIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkNTUztjYXNlImpzIjpyZXR1cm4gY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuSkFWQVNDUklQVDtjYXNlInN2ZyI6cmV0dXJuIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLlNWRztkZWZhdWx0OnJldHVybiBjcmVhdGVqcy5BYnN0cmFjdExvYWRlci5URVhUfX0sY3JlYXRlanMuUmVxdWVzdFV0aWxzPWV9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLkV2ZW50RGlzcGF0Y2hlcl9jb25zdHJ1Y3RvcigpLHRoaXMubG9hZGVkPSExLHRoaXMuY2FuY2VsZWQ9ITEsdGhpcy5wcm9ncmVzcz0wLHRoaXMudHlwZT1uLHRoaXMucmVzdWx0Rm9ybWF0dGVyPW51bGwsdGhpcy5faXRlbT1lP2NyZWF0ZWpzLkxvYWRJdGVtLmNyZWF0ZShlKTpudWxsLHRoaXMuX3ByZWZlclhIUj10LHRoaXMuX3Jlc3VsdD1udWxsLHRoaXMuX3Jhd1Jlc3VsdD1udWxsLHRoaXMuX2xvYWRlZEl0ZW1zPW51bGwsdGhpcy5fdGFnU3JjQXR0cmlidXRlPW51bGwsdGhpcy5fdGFnPW51bGx9dmFyIHQ9Y3JlYXRlanMuZXh0ZW5kKGUsY3JlYXRlanMuRXZlbnREaXNwYXRjaGVyKSxuPWU7bi5QT1NUPSJQT1NUIixuLkdFVD0iR0VUIixuLkJJTkFSWT0iYmluYXJ5IixuLkNTUz0iY3NzIixuLklNQUdFPSJpbWFnZSIsbi5KQVZBU0NSSVBUPSJqYXZhc2NyaXB0IixuLkpTT049Impzb24iLG4uSlNPTlA9Impzb25wIixuLk1BTklGRVNUPSJtYW5pZmVzdCIsbi5TT1VORD0ic291bmQiLG4uVklERU89InZpZGVvIixuLlNQUklURVNIRUVUPSJzcHJpdGVzaGVldCIsbi5TVkc9InN2ZyIsbi5URVhUPSJ0ZXh0IixuLlhNTD0ieG1sIix0LmdldEl0ZW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXRlbX0sdC5nZXRSZXN1bHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5fcmF3UmVzdWx0OnRoaXMuX3Jlc3VsdH0sdC5nZXRUYWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFnfSx0LnNldFRhZz1mdW5jdGlvbihlKXt0aGlzLl90YWc9ZX0sdC5sb2FkPWZ1bmN0aW9uKCl7dGhpcy5fY3JlYXRlUmVxdWVzdCgpLHRoaXMuX3JlcXVlc3Qub24oImNvbXBsZXRlIix0aGlzLHRoaXMpLHRoaXMuX3JlcXVlc3Qub24oInByb2dyZXNzIix0aGlzLHRoaXMpLHRoaXMuX3JlcXVlc3Qub24oImxvYWRTdGFydCIsdGhpcyx0aGlzKSx0aGlzLl9yZXF1ZXN0Lm9uKCJhYm9ydCIsdGhpcyx0aGlzKSx0aGlzLl9yZXF1ZXN0Lm9uKCJ0aW1lb3V0Iix0aGlzLHRoaXMpLHRoaXMuX3JlcXVlc3Qub24oImVycm9yIix0aGlzLHRoaXMpO3ZhciBlPW5ldyBjcmVhdGVqcy5FdmVudCgiaW5pdGlhbGl6ZSIpO2UubG9hZGVyPXRoaXMuX3JlcXVlc3QsdGhpcy5kaXNwYXRjaEV2ZW50KGUpLHRoaXMuX3JlcXVlc3QubG9hZCgpfSx0LmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuY2FuY2VsZWQ9ITAsdGhpcy5kZXN0cm95KCl9LHQuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuX3JlcXVlc3QmJih0aGlzLl9yZXF1ZXN0LnJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzKCksdGhpcy5fcmVxdWVzdC5kZXN0cm95KCkpLHRoaXMuX3JlcXVlc3Q9bnVsbCx0aGlzLl9pdGVtPW51bGwsdGhpcy5fcmF3UmVzdWx0PW51bGwsdGhpcy5fcmVzdWx0PW51bGwsdGhpcy5fbG9hZEl0ZW1zPW51bGwsdGhpcy5yZW1vdmVBbGxFdmVudExpc3RlbmVycygpfSx0LmdldExvYWRlZEl0ZW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRlZEl0ZW1zfSx0Ll9jcmVhdGVSZXF1ZXN0PWZ1bmN0aW9uKCl7dGhpcy5fcmVxdWVzdD10aGlzLl9wcmVmZXJYSFI/bmV3IGNyZWF0ZWpzLlhIUlJlcXVlc3QodGhpcy5faXRlbSk6bmV3IGNyZWF0ZWpzLlRhZ1JlcXVlc3QodGhpcy5faXRlbSx0aGlzLl90YWd8fHRoaXMuX2NyZWF0ZVRhZygpLHRoaXMuX3RhZ1NyY0F0dHJpYnV0ZSl9LHQuX2NyZWF0ZVRhZz1mdW5jdGlvbigpe3JldHVybiBudWxsfSx0Ll9zZW5kTG9hZFN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5faXNDYW5jZWxlZCgpfHx0aGlzLmRpc3BhdGNoRXZlbnQoImxvYWRzdGFydCIpfSx0Ll9zZW5kUHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2lzQ2FuY2VsZWQoKSl7dmFyIHQ9bnVsbDsibnVtYmVyIj09dHlwZW9mIGU/KHRoaXMucHJvZ3Jlc3M9ZSx0PW5ldyBjcmVhdGVqcy5Qcm9ncmVzc0V2ZW50KHRoaXMucHJvZ3Jlc3MpKToodD1lLHRoaXMucHJvZ3Jlc3M9ZS5sb2FkZWQvZS50b3RhbCx0LnByb2dyZXNzPXRoaXMucHJvZ3Jlc3MsKGlzTmFOKHRoaXMucHJvZ3Jlc3MpfHwxLzA9PXRoaXMucHJvZ3Jlc3MpJiYodGhpcy5wcm9ncmVzcz0wKSksdGhpcy5oYXNFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIpJiZ0aGlzLmRpc3BhdGNoRXZlbnQodCl9fSx0Ll9zZW5kQ29tcGxldGU9ZnVuY3Rpb24oKXtpZighdGhpcy5faXNDYW5jZWxlZCgpKXt0aGlzLmxvYWRlZD0hMDt2YXIgZT1uZXcgY3JlYXRlanMuRXZlbnQoImNvbXBsZXRlIik7ZS5yYXdSZXN1bHQ9dGhpcy5fcmF3UmVzdWx0LG51bGwhPXRoaXMuX3Jlc3VsdCYmKGUucmVzdWx0PXRoaXMuX3Jlc3VsdCksdGhpcy5kaXNwYXRjaEV2ZW50KGUpfX0sdC5fc2VuZEVycm9yPWZ1bmN0aW9uKGUpeyF0aGlzLl9pc0NhbmNlbGVkKCkmJnRoaXMuaGFzRXZlbnRMaXN0ZW5lcigiZXJyb3IiKSYmKG51bGw9PWUmJihlPW5ldyBjcmVhdGVqcy5FcnJvckV2ZW50KCJQUkVMT0FEX0VSUk9SX0VNUFRZIikpLHRoaXMuZGlzcGF0Y2hFdmVudChlKSl9LHQuX2lzQ2FuY2VsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09d2luZG93LmNyZWF0ZWpzfHx0aGlzLmNhbmNlbGVkPyEwOiExfSx0LnJlc3VsdEZvcm1hdHRlcj1udWxsLHQuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24oZSl7c3dpdGNoKGUudHlwZSl7Y2FzZSJjb21wbGV0ZSI6dGhpcy5fcmF3UmVzdWx0PWUudGFyZ2V0Ll9yZXNwb25zZTt2YXIgdD10aGlzLnJlc3VsdEZvcm1hdHRlciYmdGhpcy5yZXN1bHRGb3JtYXR0ZXIodGhpcyksbj10aGlzO3QgaW5zdGFuY2VvZiBGdW5jdGlvbj90KGZ1bmN0aW9uKGUpe24uX3Jlc3VsdD1lLG4uX3NlbmRDb21wbGV0ZSgpfSk6KHRoaXMuX3Jlc3VsdD10fHx0aGlzLl9yYXdSZXN1bHQsdGhpcy5fc2VuZENvbXBsZXRlKCkpO2JyZWFrO2Nhc2UicHJvZ3Jlc3MiOnRoaXMuX3NlbmRQcm9ncmVzcyhlKTticmVhaztjYXNlImVycm9yIjp0aGlzLl9zZW5kRXJyb3IoZSk7YnJlYWs7Y2FzZSJsb2Fkc3RhcnQiOnRoaXMuX3NlbmRMb2FkU3RhcnQoKTticmVhaztjYXNlImFib3J0IjpjYXNlInRpbWVvdXQiOnRoaXMuX2lzQ2FuY2VsZWQoKXx8dGhpcy5kaXNwYXRjaEV2ZW50KGUudHlwZSl9fSx0LmJ1aWxkUGF0aD1mdW5jdGlvbihlLHQpe3JldHVybiBjcmVhdGVqcy5SZXF1ZXN0VXRpbHMuYnVpbGRQYXRoKGUsdCl9LHQudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW1ByZWxvYWRKUyBBYnN0cmFjdExvYWRlcl0ifSxjcmVhdGVqcy5BYnN0cmFjdExvYWRlcj1jcmVhdGVqcy5wcm9tb3RlKGUsIkV2ZW50RGlzcGF0Y2hlciIpfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlLHQsbil7dGhpcy5BYnN0cmFjdExvYWRlcl9jb25zdHJ1Y3RvcihlLHQsbiksdGhpcy5yZXN1bHRGb3JtYXR0ZXI9dGhpcy5fZm9ybWF0UmVzdWx0LHRoaXMuX3RhZ1NyY0F0dHJpYnV0ZT0ic3JjIn12YXIgdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5BYnN0cmFjdExvYWRlcik7dC5sb2FkPWZ1bmN0aW9uKCl7dGhpcy5fdGFnfHwodGhpcy5fdGFnPXRoaXMuX2NyZWF0ZVRhZyh0aGlzLl9pdGVtLnNyYykpLHRoaXMuX3RhZy5wcmVsb2FkPSJhdXRvIix0aGlzLl90YWcubG9hZCgpLHRoaXMuQWJzdHJhY3RMb2FkZXJfbG9hZCgpfSx0Ll9jcmVhdGVUYWc9ZnVuY3Rpb24oKXt9LHQuX2NyZWF0ZVJlcXVlc3Q9ZnVuY3Rpb24oKXt0aGlzLl9yZXF1ZXN0PXRoaXMuX3ByZWZlclhIUj9uZXcgY3JlYXRlanMuWEhSUmVxdWVzdCh0aGlzLl9pdGVtKTpuZXcgY3JlYXRlanMuTWVkaWFUYWdSZXF1ZXN0KHRoaXMuX2l0ZW0sdGhpcy5fdGFnfHx0aGlzLl9jcmVhdGVUYWcoKSx0aGlzLl90YWdTcmNBdHRyaWJ1dGUpfSx0Ll9mb3JtYXRSZXN1bHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3RhZy5yZW1vdmVFdmVudExpc3RlbmVyJiZ0aGlzLl90YWcucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2FucGxheXRocm91Z2giLHRoaXMuX2xvYWRlZEhhbmRsZXIpLHRoaXMuX3RhZy5vbnN0YWxsZWQ9bnVsbCx0aGlzLl9wcmVmZXJYSFImJihlLmdldFRhZygpLnNyYz1lLmdldFJlc3VsdCghMCkpLGUuZ2V0VGFnKCl9LGNyZWF0ZWpzLkFic3RyYWN0TWVkaWFMb2FkZXI9Y3JlYXRlanMucHJvbW90ZShlLCJBYnN0cmFjdExvYWRlciIpfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9ZnVuY3Rpb24oZSl7dGhpcy5faXRlbT1lfSx0PWNyZWF0ZWpzLmV4dGVuZChlLGNyZWF0ZWpzLkV2ZW50RGlzcGF0Y2hlcik7dC5sb2FkPWZ1bmN0aW9uKCl7fSx0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt9LHQuY2FuY2VsPWZ1bmN0aW9uKCl7fSxjcmVhdGVqcy5BYnN0cmFjdFJlcXVlc3Q9Y3JlYXRlanMucHJvbW90ZShlLCJFdmVudERpc3BhdGNoZXIiKX0oKSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoZSx0LG4pe3RoaXMuQWJzdHJhY3RSZXF1ZXN0X2NvbnN0cnVjdG9yKGUpLHRoaXMuX3RhZz10LHRoaXMuX3RhZ1NyY0F0dHJpYnV0ZT1uLHRoaXMuX2xvYWRlZEhhbmRsZXI9Y3JlYXRlanMucHJveHkodGhpcy5faGFuZGxlVGFnQ29tcGxldGUsdGhpcyksdGhpcy5fYWRkZWRUb0RPTT0hMSx0aGlzLl9zdGFydFRhZ1Zpc2liaWxpdHk9bnVsbH12YXIgdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5BYnN0cmFjdFJlcXVlc3QpO3QubG9hZD1mdW5jdGlvbigpe251bGw9PXRoaXMuX3RhZy5wYXJlbnROb2RlJiYod2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5fdGFnKSx0aGlzLl9hZGRlZFRvRE9NPSEwKSx0aGlzLl90YWcub25sb2FkPWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVRhZ0NvbXBsZXRlLHRoaXMpLHRoaXMuX3RhZy5vbnJlYWR5c3RhdGVjaGFuZ2U9Y3JlYXRlanMucHJveHkodGhpcy5faGFuZGxlUmVhZHlTdGF0ZUNoYW5nZSx0aGlzKTt2YXIgZT1uZXcgY3JlYXRlanMuRXZlbnQoImluaXRpYWxpemUiKTtlLmxvYWRlcj10aGlzLl90YWcsdGhpcy5kaXNwYXRjaEV2ZW50KGUpLHRoaXMuX2hpZGVUYWcoKSx0aGlzLl90YWdbdGhpcy5fdGFnU3JjQXR0cmlidXRlXT10aGlzLl9pdGVtLnNyY30sdC5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5fY2xlYW4oKSx0aGlzLl90YWc9bnVsbCx0aGlzLkFic3RyYWN0UmVxdWVzdF9kZXN0cm95KCl9LHQuX2hhbmRsZVJlYWR5U3RhdGVDaGFuZ2U9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fbG9hZFRpbWVvdXQpO3ZhciBlPXRoaXMuX3RhZzsoImxvYWRlZCI9PWUucmVhZHlTdGF0ZXx8ImNvbXBsZXRlIj09ZS5yZWFkeVN0YXRlKSYmdGhpcy5faGFuZGxlVGFnQ29tcGxldGUoKX0sdC5faGFuZGxlVGFnQ29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLl9yYXdSZXN1bHQ9dGhpcy5fdGFnLHRoaXMuX3Jlc3VsdD10aGlzLnJlc3VsdEZvcm1hdHRlciYmdGhpcy5yZXN1bHRGb3JtYXR0ZXIodGhpcyl8fHRoaXMuX3Jhd1Jlc3VsdCx0aGlzLl9jbGVhbigpLHRoaXMuX3Nob3dUYWcoKSx0aGlzLmRpc3BhdGNoRXZlbnQoImNvbXBsZXRlIil9LHQuX2NsZWFuPWZ1bmN0aW9uKCl7dGhpcy5fdGFnLm9ubG9hZD1udWxsLHRoaXMuX3RhZy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCx0aGlzLl9hZGRlZFRvRE9NJiZudWxsIT10aGlzLl90YWcucGFyZW50Tm9kZSYmdGhpcy5fdGFnLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5fdGFnKX0sdC5faGlkZVRhZz1mdW5jdGlvbigpe3RoaXMuX3N0YXJ0VGFnVmlzaWJpbGl0eT10aGlzLl90YWcuc3R5bGUudmlzaWJpbGl0eSx0aGlzLl90YWcuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIn0sdC5fc2hvd1RhZz1mdW5jdGlvbigpe3RoaXMuX3RhZy5zdHlsZS52aXNpYmlsaXR5PXRoaXMuX3N0YXJ0VGFnVmlzaWJpbGl0eX0sdC5faGFuZGxlU3RhbGxlZD1mdW5jdGlvbigpe30sY3JlYXRlanMuVGFnUmVxdWVzdD1jcmVhdGVqcy5wcm9tb3RlKGUsIkFic3RyYWN0UmVxdWVzdCIpfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlLHQsbil7dGhpcy5BYnN0cmFjdFJlcXVlc3RfY29uc3RydWN0b3IoZSksdGhpcy5fdGFnPXQsdGhpcy5fdGFnU3JjQXR0cmlidXRlPW4sdGhpcy5fbG9hZGVkSGFuZGxlcj1jcmVhdGVqcy5wcm94eSh0aGlzLl9oYW5kbGVUYWdDb21wbGV0ZSx0aGlzKX12YXIgdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5UYWdSZXF1ZXN0KTt0LmxvYWQ9ZnVuY3Rpb24oKXt0aGlzLl90YWcub25zdGFsbGVkPWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVN0YWxsZWQsdGhpcyksdGhpcy5fdGFnLm9ucHJvZ3Jlc3M9Y3JlYXRlanMucHJveHkodGhpcy5faGFuZGxlUHJvZ3Jlc3MsdGhpcyksdGhpcy5fdGFnLmFkZEV2ZW50TGlzdGVuZXImJnRoaXMuX3RhZy5hZGRFdmVudExpc3RlbmVyKCJjYW5wbGF5dGhyb3VnaCIsdGhpcy5fbG9hZGVkSGFuZGxlciwhMSksdGhpcy5UYWdSZXF1ZXN0X2xvYWQoKX0sdC5faGFuZGxlUmVhZHlTdGF0ZUNoYW5nZT1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl9sb2FkVGltZW91dCk7dmFyIGU9dGhpcy5fdGFnOygibG9hZGVkIj09ZS5yZWFkeVN0YXRlfHwiY29tcGxldGUiPT1lLnJlYWR5U3RhdGUpJiZ0aGlzLl9oYW5kbGVUYWdDb21wbGV0ZSgpfSx0Ll9oYW5kbGVTdGFsbGVkPWZ1bmN0aW9uKCl7fSx0Ll9oYW5kbGVQcm9ncmVzcz1mdW5jdGlvbihlKXtpZihlJiYhKGUubG9hZGVkPjAmJjA9PWUudG90YWwpKXt2YXIgdD1uZXcgY3JlYXRlanMuUHJvZ3Jlc3NFdmVudChlLmxvYWRlZCxlLnRvdGFsKTt0aGlzLmRpc3BhdGNoRXZlbnQodCl9fSx0Ll9jbGVhbj1mdW5jdGlvbigpe3RoaXMuX3RhZy5yZW1vdmVFdmVudExpc3RlbmVyJiZ0aGlzLl90YWcucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2FucGxheXRocm91Z2giLHRoaXMuX2xvYWRlZEhhbmRsZXIpLHRoaXMuX3RhZy5vbnN0YWxsZWQ9bnVsbCx0aGlzLl90YWcub25wcm9ncmVzcz1udWxsLHRoaXMuVGFnUmVxdWVzdF9fY2xlYW4oKX0sY3JlYXRlanMuTWVkaWFUYWdSZXF1ZXN0PWNyZWF0ZWpzLnByb21vdGUoZSwiVGFnUmVxdWVzdCIpfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlKXt0aGlzLkFic3RyYWN0UmVxdWVzdF9jb25zdHJ1Y3RvcihlKSx0aGlzLl9yZXF1ZXN0PW51bGwsdGhpcy5fbG9hZFRpbWVvdXQ9bnVsbCx0aGlzLl94aHJMZXZlbD0xLHRoaXMuX3Jlc3BvbnNlPW51bGwsdGhpcy5fcmF3UmVzcG9uc2U9bnVsbCx0aGlzLl9jYW5jZWxlZD0hMSx0aGlzLl9oYW5kbGVMb2FkU3RhcnRQcm94eT1jcmVhdGVqcy5wcm94eSh0aGlzLl9oYW5kbGVMb2FkU3RhcnQsdGhpcyksdGhpcy5faGFuZGxlUHJvZ3Jlc3NQcm94eT1jcmVhdGVqcy5wcm94eSh0aGlzLl9oYW5kbGVQcm9ncmVzcyx0aGlzKSx0aGlzLl9oYW5kbGVBYm9ydFByb3h5PWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZUFib3J0LHRoaXMpLHRoaXMuX2hhbmRsZUVycm9yUHJveHk9Y3JlYXRlanMucHJveHkodGhpcy5faGFuZGxlRXJyb3IsdGhpcyksdGhpcy5faGFuZGxlVGltZW91dFByb3h5PWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVRpbWVvdXQsdGhpcyksdGhpcy5faGFuZGxlTG9hZFByb3h5PWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZUxvYWQsdGhpcyksdGhpcy5faGFuZGxlUmVhZHlTdGF0ZUNoYW5nZVByb3h5PWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVJlYWR5U3RhdGVDaGFuZ2UsdGhpcyksIXRoaXMuX2NyZWF0ZVhIUihlKX12YXIgdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5BYnN0cmFjdFJlcXVlc3QpO2UuQUNUSVZFWF9WRVJTSU9OUz1bIk1zeG1sMi5YTUxIVFRQLjYuMCIsIk1zeG1sMi5YTUxIVFRQLjUuMCIsIk1zeG1sMi5YTUxIVFRQLjQuMCIsIk1TWE1MMi5YTUxIVFRQLjMuMCIsIk1TWE1MMi5YTUxIVFRQIiwiTWljcm9zb2Z0LlhNTEhUVFAiXSx0LmdldFJlc3VsdD1mdW5jdGlvbihlKXtyZXR1cm4gZSYmdGhpcy5fcmF3UmVzcG9uc2U/dGhpcy5fcmF3UmVzcG9uc2U6dGhpcy5fcmVzcG9uc2V9LHQuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxlZD0hMCx0aGlzLl9jbGVhbigpLHRoaXMuX3JlcXVlc3QuYWJvcnQoKX0sdC5sb2FkPWZ1bmN0aW9uKCl7aWYobnVsbD09dGhpcy5fcmVxdWVzdClyZXR1cm4gdm9pZCB0aGlzLl9oYW5kbGVFcnJvcigpO3RoaXMuX3JlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigibG9hZHN0YXJ0Iix0aGlzLl9oYW5kbGVMb2FkU3RhcnRQcm94eSwhMSksdGhpcy5fcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIsdGhpcy5faGFuZGxlUHJvZ3Jlc3NQcm94eSwhMSksdGhpcy5fcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsdGhpcy5faGFuZGxlQWJvcnRQcm94eSwhMSksdGhpcy5fcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsdGhpcy5faGFuZGxlRXJyb3JQcm94eSwhMSksdGhpcy5fcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCJ0aW1lb3V0Iix0aGlzLl9oYW5kbGVUaW1lb3V0UHJveHksITEpLHRoaXMuX3JlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsdGhpcy5faGFuZGxlTG9hZFByb3h5LCExKSx0aGlzLl9yZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLHRoaXMuX2hhbmRsZVJlYWR5U3RhdGVDaGFuZ2VQcm94eSwhMSksMT09dGhpcy5feGhyTGV2ZWwmJih0aGlzLl9sb2FkVGltZW91dD1zZXRUaW1lb3V0KGNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVRpbWVvdXQsdGhpcyksdGhpcy5faXRlbS5sb2FkVGltZW91dCkpO3RyeXt0aGlzLl9pdGVtLnZhbHVlcyYmdGhpcy5faXRlbS5tZXRob2QhPWNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkdFVD90aGlzLl9pdGVtLm1ldGhvZD09Y3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuUE9TVCYmdGhpcy5fcmVxdWVzdC5zZW5kKGNyZWF0ZWpzLlJlcXVlc3RVdGlscy5mb3JtYXRRdWVyeVN0cmluZyh0aGlzLl9pdGVtLnZhbHVlcykpOnRoaXMuX3JlcXVlc3Quc2VuZCgpfWNhdGNoKGUpe3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgY3JlYXRlanMuRXJyb3JFdmVudCgiWEhSX1NFTkQiLG51bGwsZSkpfX0sdC5zZXRSZXNwb25zZVR5cGU9ZnVuY3Rpb24oZSl7dGhpcy5fcmVxdWVzdC5yZXNwb25zZVR5cGU9ZX0sdC5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMgaW5zdGFuY2VvZiBGdW5jdGlvbj90aGlzLl9yZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpOm51bGx9LHQuZ2V0UmVzcG9uc2VIZWFkZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3JlcXVlc3QuZ2V0UmVzcG9uc2VIZWFkZXIgaW5zdGFuY2VvZiBGdW5jdGlvbj90aGlzLl9yZXF1ZXN0LmdldFJlc3BvbnNlSGVhZGVyKGUpOm51bGx9LHQuX2hhbmRsZVByb2dyZXNzPWZ1bmN0aW9uKGUpe2lmKGUmJiEoZS5sb2FkZWQ+MCYmMD09ZS50b3RhbCkpe3ZhciB0PW5ldyBjcmVhdGVqcy5Qcm9ncmVzc0V2ZW50KGUubG9hZGVkLGUudG90YWwpO3RoaXMuZGlzcGF0Y2hFdmVudCh0KX19LHQuX2hhbmRsZUxvYWRTdGFydD1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl9sb2FkVGltZW91dCksdGhpcy5kaXNwYXRjaEV2ZW50KCJsb2Fkc3RhcnQiKX0sdC5faGFuZGxlQWJvcnQ9ZnVuY3Rpb24oZSl7dGhpcy5fY2xlYW4oKSx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IGNyZWF0ZWpzLkVycm9yRXZlbnQoIlhIUl9BQk9SVEVEIixudWxsLGUpKX0sdC5faGFuZGxlRXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5fY2xlYW4oKSx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IGNyZWF0ZWpzLkVycm9yRXZlbnQoZS5tZXNzYWdlKSl9LHQuX2hhbmRsZVJlYWR5U3RhdGVDaGFuZ2U9ZnVuY3Rpb24oKXs0PT10aGlzLl9yZXF1ZXN0LnJlYWR5U3RhdGUmJnRoaXMuX2hhbmRsZUxvYWQoKX0sdC5faGFuZGxlTG9hZD1mdW5jdGlvbigpe2lmKCF0aGlzLmxvYWRlZCl7dGhpcy5sb2FkZWQ9ITA7dmFyIGU9dGhpcy5fY2hlY2tFcnJvcigpO2lmKGUpcmV0dXJuIHZvaWQgdGhpcy5faGFuZGxlRXJyb3IoZSk7dGhpcy5fcmVzcG9uc2U9dGhpcy5fZ2V0UmVzcG9uc2UoKSx0aGlzLl9jbGVhbigpLHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgY3JlYXRlanMuRXZlbnQoImNvbXBsZXRlIikpfX0sdC5faGFuZGxlVGltZW91dD1mdW5jdGlvbihlKXt0aGlzLl9jbGVhbigpLHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgY3JlYXRlanMuRXJyb3JFdmVudCgiUFJFTE9BRF9USU1FT1VUIixudWxsLGUpKX0sdC5fY2hlY2tFcnJvcj1mdW5jdGlvbigpe3ZhciBlPXBhcnNlSW50KHRoaXMuX3JlcXVlc3Quc3RhdHVzKTtzd2l0Y2goZSl7Y2FzZSA0MDQ6Y2FzZSAwOnJldHVybiBuZXcgRXJyb3IoZSl9cmV0dXJuIG51bGx9LHQuX2dldFJlc3BvbnNlPWZ1bmN0aW9uKCl7aWYobnVsbCE9dGhpcy5fcmVzcG9uc2UpcmV0dXJuIHRoaXMuX3Jlc3BvbnNlO2lmKG51bGwhPXRoaXMuX3JlcXVlc3QucmVzcG9uc2UpcmV0dXJuIHRoaXMuX3JlcXVlc3QucmVzcG9uc2U7dHJ5e2lmKG51bGwhPXRoaXMuX3JlcXVlc3QucmVzcG9uc2VUZXh0KXJldHVybiB0aGlzLl9yZXF1ZXN0LnJlc3BvbnNlVGV4dH1jYXRjaChlKXt9dHJ5e2lmKG51bGwhPXRoaXMuX3JlcXVlc3QucmVzcG9uc2VYTUwpcmV0dXJuIHRoaXMuX3JlcXVlc3QucmVzcG9uc2VYTUx9Y2F0Y2goZSl7fXJldHVybiBudWxsfSx0Ll9jcmVhdGVYSFI9ZnVuY3Rpb24oZSl7dmFyIHQ9Y3JlYXRlanMuUmVxdWVzdFV0aWxzLmlzQ3Jvc3NEb21haW4oZSksbj17fSxpPW51bGw7aWYod2luZG93LlhNTEh0dHBSZXF1ZXN0KWk9bmV3IFhNTEh0dHBSZXF1ZXN0LHQmJnZvaWQgMD09PWkud2l0aENyZWRlbnRpYWxzJiZ3aW5kb3cuWERvbWFpblJlcXVlc3QmJihpPW5ldyBYRG9tYWluUmVxdWVzdCk7ZWxzZXtmb3IodmFyIHI9MCxvPXMuQUNUSVZFWF9WRVJTSU9OUy5sZW5ndGg7bz5yO3IrKyl7cy5BQ1RJVkVYX1ZFUlNJT05TW3JdO3RyeXtpPW5ldyBBY3RpdmVYT2JqZWN0KGF4VmVyc2lvbnMpO2JyZWFrfWNhdGNoKGEpe319aWYobnVsbD09aSlyZXR1cm4hMX1lLm1pbWVUeXBlJiZpLm92ZXJyaWRlTWltZVR5cGUmJmkub3ZlcnJpZGVNaW1lVHlwZShlLm1pbWVUeXBlKSx0aGlzLl94aHJMZXZlbD0ic3RyaW5nIj09dHlwZW9mIGkucmVzcG9uc2VUeXBlPzI6MTt2YXIgbD1udWxsO2lmKGw9ZS5tZXRob2Q9PWNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkdFVD9jcmVhdGVqcy5SZXF1ZXN0VXRpbHMuYnVpbGRQYXRoKGUuc3JjLGUudmFsdWVzKTplLnNyYyxpLm9wZW4oZS5tZXRob2R8fGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkdFVCxsLCEwKSx0JiZpIGluc3RhbmNlb2YgWE1MSHR0cFJlcXVlc3QmJjE9PXRoaXMuX3hockxldmVsJiYobi5PcmlnaW49bG9jYXRpb24ub3JpZ2luKSxlLnZhbHVlcyYmZS5tZXRob2Q9PWNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLlBPU1QmJihuWyJDb250ZW50LVR5cGUiXT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiksdHx8blsiWC1SZXF1ZXN0ZWQtV2l0aCJdfHwoblsiWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCIpLGUuaGVhZGVycylmb3IodmFyIGMgaW4gZS5oZWFkZXJzKW5bY109ZS5oZWFkZXJzW2NdO2ZvcihjIGluIG4paS5zZXRSZXF1ZXN0SGVhZGVyKGMsbltjXSk7cmV0dXJuIGkgaW5zdGFuY2VvZiBYTUxIdHRwUmVxdWVzdCYmdm9pZCAwIT09ZS53aXRoQ3JlZGVudGlhbHMmJihpLndpdGhDcmVkZW50aWFscz1lLndpdGhDcmVkZW50aWFscyksdGhpcy5fcmVxdWVzdD1pLCEwfSx0Ll9jbGVhbj1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl9sb2FkVGltZW91dCksdGhpcy5fcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2Fkc3RhcnQiLHRoaXMuX2hhbmRsZUxvYWRTdGFydFByb3h5KSx0aGlzLl9yZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoInByb2dyZXNzIix0aGlzLl9oYW5kbGVQcm9ncmVzc1Byb3h5KSx0aGlzLl9yZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoImFib3J0Iix0aGlzLl9oYW5kbGVBYm9ydFByb3h5KSx0aGlzLl9yZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoImVycm9yIix0aGlzLl9oYW5kbGVFcnJvclByb3h5KSx0aGlzLl9yZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoInRpbWVvdXQiLHRoaXMuX2hhbmRsZVRpbWVvdXRQcm94eSksdGhpcy5fcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIix0aGlzLl9oYW5kbGVMb2FkUHJveHkpLHRoaXMuX3JlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsdGhpcy5faGFuZGxlUmVhZHlTdGF0ZUNoYW5nZVByb3h5KX0sdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbUHJlbG9hZEpTIFhIUlJlcXVlc3RdIn0sY3JlYXRlanMuWEhSUmVxdWVzdD1jcmVhdGVqcy5wcm9tb3RlKGUsIkFic3RyYWN0UmVxdWVzdCIpfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlLHQpe3RoaXMuQWJzdHJhY3RNZWRpYUxvYWRlcl9jb25zdHJ1Y3RvcihlLHQsY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuU09VTkQpLGNyZWF0ZWpzLlJlcXVlc3RVdGlscy5pc0F1ZGlvVGFnKGUpP3RoaXMuX3RhZz1lOmNyZWF0ZWpzLlJlcXVlc3RVdGlscy5pc0F1ZGlvVGFnKGUuc3JjKT90aGlzLl90YWc9ZTpjcmVhdGVqcy5SZXF1ZXN0VXRpbHMuaXNBdWRpb1RhZyhlLnRhZykmJih0aGlzLl90YWc9Y3JlYXRlanMuUmVxdWVzdFV0aWxzLmlzQXVkaW9UYWcoZSk/ZTplLnNyYyksbnVsbCE9dGhpcy5fdGFnJiYodGhpcy5fcHJlZmVyWEhSPSExKX12YXIgdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5BYnN0cmFjdE1lZGlhTG9hZGVyKSxuPWU7bi5jYW5Mb2FkSXRlbT1mdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlPT1jcmVhdGVqcy5BYnN0cmFjdExvYWRlci5TT1VORH0sdC5fY3JlYXRlVGFnPWZ1bmN0aW9uKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIik7cmV0dXJuIHQuYXV0b3BsYXk9ITEsdC5wcmVsb2FkPSJub25lIix0LnNyYz1lLHR9LGNyZWF0ZWpzLlNvdW5kTG9hZGVyPWNyZWF0ZWpzLnByb21vdGUoZSwiQWJzdHJhY3RNZWRpYUxvYWRlciIpfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSgpe3Rocm93IlNvdW5kIGNhbm5vdCBiZSBpbnN0YW50aWF0ZWQifWZ1bmN0aW9uIHQoZSx0KXt0aGlzLmluaXQoZSx0KX12YXIgbj1lO24uSU5URVJSVVBUX0FOWT0iYW55IixuLklOVEVSUlVQVF9FQVJMWT0iZWFybHkiLG4uSU5URVJSVVBUX0xBVEU9ImxhdGUiLG4uSU5URVJSVVBUX05PTkU9Im5vbmUiLG4uUExBWV9JTklURUQ9InBsYXlJbml0ZWQiLG4uUExBWV9TVUNDRUVERUQ9InBsYXlTdWNjZWVkZWQiLG4uUExBWV9JTlRFUlJVUFRFRD0icGxheUludGVycnVwdGVkIixuLlBMQVlfRklOSVNIRUQ9InBsYXlGaW5pc2hlZCIsbi5QTEFZX0ZBSUxFRD0icGxheUZhaWxlZCIsbi5TVVBQT1JURURfRVhURU5TSU9OUz1bIm1wMyIsIm9nZyIsIm1wZWciLCJ3YXYiLCJtNGEiLCJtcDQiLCJhaWZmIiwid21hIiwibWlkIl0sbi5FWFRFTlNJT05fTUFQPXttNGE6Im1wNCJ9LG4uRklMRV9QQVRURVJOPS9eKD86KFx3KzopXC97Mn0oXHcrKD86XC5cdyspKlwvPykpPyhbXC8uXSo/KD86W14/XSspP1wvKT8oKD86W15cLz9dKylcLihcdyspKSg/Olw/KFxTKyk/KT8kLyxuLmRlZmF1bHRJbnRlcnJ1cHRCZWhhdmlvcj1uLklOVEVSUlVQVF9OT05FLG4uYWx0ZXJuYXRlRXh0ZW5zaW9ucz1bXSxuLmFjdGl2ZVBsdWdpbj1udWxsLG4uX3BsdWdpbnNSZWdpc3RlcmVkPSExLG4uX2xhc3RJRD0wLG4uX21hc3RlclZvbHVtZT0xLG4uX21hc3Rlck11dGU9ITEsbi5faW5zdGFuY2VzPVtdLG4uX2lkSGFzaD17fSxuLl9wcmVsb2FkSGFzaD17fSxuLmFkZEV2ZW50TGlzdGVuZXI9bnVsbCxuLnJlbW92ZUV2ZW50TGlzdGVuZXI9bnVsbCxuLnJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzPW51bGwsbi5kaXNwYXRjaEV2ZW50PW51bGwsbi5oYXNFdmVudExpc3RlbmVyPW51bGwsbi5fbGlzdGVuZXJzPW51bGwsY3JlYXRlanMuRXZlbnREaXNwYXRjaGVyLmluaXRpYWxpemUobiksbi5nZXRQcmVsb2FkSGFuZGxlcnM9ZnVuY3Rpb24oKXtyZXR1cm57Y2FsbGJhY2s6Y3JlYXRlanMucHJveHkobi5pbml0TG9hZCxuKSx0eXBlczpbInNvdW5kIl0sZXh0ZW5zaW9uczpuLlNVUFBPUlRFRF9FWFRFTlNJT05TfX0sbi5faGFuZGxlTG9hZENvbXBsZXRlPWZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0LmdldEl0ZW0oKS5zcmM7aWYobi5fcHJlbG9hZEhhc2hbdF0pZm9yKHZhciBpPTAscj1uLl9wcmVsb2FkSGFzaFt0XS5sZW5ndGg7cj5pO2krKyl7dmFyIHM9bi5fcHJlbG9hZEhhc2hbdF1baV07aWYobi5fcHJlbG9hZEhhc2hbdF1baV09ITAsbi5oYXNFdmVudExpc3RlbmVyKCJmaWxlbG9hZCIpKXt2YXIgZT1uZXcgY3JlYXRlanMuRXZlbnQoImZpbGVsb2FkIik7ZS5zcmM9cy5zcmMsZS5pZD1zLmlkLGUuZGF0YT1zLmRhdGEsZS5zcHJpdGU9cy5zcHJpdGUsbi5kaXNwYXRjaEV2ZW50KGUpfX19LG4uX2hhbmRsZUxvYWRFcnJvcj1mdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldC5nZXRJdGVtKCkuc3JjO2lmKG4uX3ByZWxvYWRIYXNoW3RdKWZvcih2YXIgaT0wLHI9bi5fcHJlbG9hZEhhc2hbdF0ubGVuZ3RoO3I+aTtpKyspe3ZhciBzPW4uX3ByZWxvYWRIYXNoW3RdW2ldO2lmKG4uX3ByZWxvYWRIYXNoW3RdW2ldPSExLG4uaGFzRXZlbnRMaXN0ZW5lcigiZmlsZWVycm9yIikpe3ZhciBlPW5ldyBjcmVhdGVqcy5FdmVudCgiZmlsZWVycm9yIik7ZS5zcmM9cy5zcmMsZS5pZD1zLmlkLGUuZGF0YT1zLmRhdGEsZS5zcHJpdGU9cy5zcHJpdGUsbi5kaXNwYXRjaEV2ZW50KGUpfX19LG4uX3JlZ2lzdGVyUGx1Z2luPWZ1bmN0aW9uKGUpe3JldHVybiBlLmlzU3VwcG9ydGVkKCk/KG4uYWN0aXZlUGx1Z2luPW5ldyBlLCEwKTohMX0sbi5yZWdpc3RlclBsdWdpbnM9ZnVuY3Rpb24oZSl7bi5fcGx1Z2luc1JlZ2lzdGVyZWQ9ITA7Zm9yKHZhciB0PTAsaT1lLmxlbmd0aDtpPnQ7dCsrKWlmKG4uX3JlZ2lzdGVyUGx1Z2luKGVbdF0pKXJldHVybiEwO3JldHVybiExfSxuLmluaXRpYWxpemVEZWZhdWx0UGx1Z2lucz1mdW5jdGlvbigpe3JldHVybiBudWxsIT1uLmFjdGl2ZVBsdWdpbj8hMDpuLl9wbHVnaW5zUmVnaXN0ZXJlZD8hMTpuLnJlZ2lzdGVyUGx1Z2lucyhbY3JlYXRlanMuV2ViQXVkaW9QbHVnaW4sY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luXSk/ITA6ITF9LG4uaXNSZWFkeT1mdW5jdGlvbigpe3JldHVybiBudWxsIT1uLmFjdGl2ZVBsdWdpbn0sbi5nZXRDYXBhYmlsaXRpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09bi5hY3RpdmVQbHVnaW4/bnVsbDpuLmFjdGl2ZVBsdWdpbi5fY2FwYWJpbGl0aWVzfSxuLmdldENhcGFiaWxpdHk9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PW4uYWN0aXZlUGx1Z2luP251bGw6bi5hY3RpdmVQbHVnaW4uX2NhcGFiaWxpdGllc1tlXX0sbi5pbml0TG9hZD1mdW5jdGlvbihlKXtyZXR1cm4gbi5fcmVnaXN0ZXJTb3VuZChlKX0sbi5fcmVnaXN0ZXJTb3VuZD1mdW5jdGlvbihlKXtpZighbi5pbml0aWFsaXplRGVmYXVsdFBsdWdpbnMoKSlyZXR1cm4hMTt2YXIgaT1uLl9wYXJzZVBhdGgoZS5zcmMpO2lmKG51bGw9PWkpcmV0dXJuITE7ZS5zcmM9aS5zcmMsZS50eXBlPSJzb3VuZCI7dmFyIHI9ZS5kYXRhLHM9bi5hY3RpdmVQbHVnaW4uZGVmYXVsdE51bUNoYW5uZWxzfHxudWxsO2lmKG51bGwhPXImJihpc05hTihyLmNoYW5uZWxzKT9pc05hTihyKXx8KHM9cGFyc2VJbnQocikpOnM9cGFyc2VJbnQoci5jaGFubmVscyksci5hdWRpb1Nwcml0ZSkpZm9yKHZhciBvLGE9ci5hdWRpb1Nwcml0ZS5sZW5ndGg7YS0tOylvPXIuYXVkaW9TcHJpdGVbYV0sbi5faWRIYXNoW28uaWRdPXtzcmM6ZS5zcmMsc3RhcnRUaW1lOnBhcnNlSW50KG8uc3RhcnRUaW1lKSxkdXJhdGlvbjpwYXJzZUludChvLmR1cmF0aW9uKX07bnVsbCE9ZS5pZCYmKG4uX2lkSGFzaFtlLmlkXT17c3JjOmUuc3JjfSk7dmFyIGw9bi5hY3RpdmVQbHVnaW4ucmVnaXN0ZXIoZSxzKTtyZXR1cm4gdC5jcmVhdGUoZS5zcmMscyksbnVsbCE9ciYmaXNOYU4ocik/ZS5kYXRhLmNoYW5uZWxzPXN8fHQubWF4UGVyQ2hhbm5lbCgpOmUuZGF0YT1zfHx0Lm1heFBlckNoYW5uZWwoKSxsLnR5cGUmJihlLnR5cGU9bC50eXBlKSxsfSxuLnJlZ2lzdGVyU291bmQ9ZnVuY3Rpb24oZSx0LGkscil7dmFyIHM9e3NyYzplLGlkOnQsZGF0YTppfTtlIGluc3RhbmNlb2YgT2JqZWN0JiYocj10LHM9ZSkscz1jcmVhdGVqcy5Mb2FkSXRlbS5jcmVhdGUocyksbnVsbCE9ciYmKHMuc3JjPXIrZSk7dmFyIG89bi5fcmVnaXN0ZXJTb3VuZChzKTtpZighbylyZXR1cm4hMTtpZihuLl9wcmVsb2FkSGFzaFtzLnNyY118fChuLl9wcmVsb2FkSGFzaFtzLnNyY109W10pLG4uX3ByZWxvYWRIYXNoW3Muc3JjXS5wdXNoKHMpLDE9PW4uX3ByZWxvYWRIYXNoW3Muc3JjXS5sZW5ndGgpby5vbigiY29tcGxldGUiLGNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZUxvYWRDb21wbGV0ZSx0aGlzKSksby5vbigiZXJyb3IiLGNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZUxvYWRFcnJvcix0aGlzKSksbi5hY3RpdmVQbHVnaW4ucHJlbG9hZChvKTtlbHNlIGlmKDE9PW4uX3ByZWxvYWRIYXNoW3Muc3JjXVswXSlyZXR1cm4hMDtyZXR1cm4gc30sbi5yZWdpc3RlclNvdW5kcz1mdW5jdGlvbihlLHQpe3ZhciBuPVtdO2UucGF0aCYmKHQ/dCs9ZS5wYXRoOnQ9ZS5wYXRoKTtmb3IodmFyIGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspbltpXT1jcmVhdGVqcy5Tb3VuZC5yZWdpc3RlclNvdW5kKGVbaV0uc3JjLGVbaV0uaWQsZVtpXS5kYXRhLHQpO3JldHVybiBufSxuLnJlZ2lzdGVyTWFuaWZlc3Q9ZnVuY3Rpb24oZSx0KXt0cnl7Y29uc29sZS5sb2coImNyZWF0ZWpzLlNvdW5kLnJlZ2lzdGVyTWFuaWZlc3QgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBjcmVhdGVqcy5Tb3VuZC5yZWdpc3RlclNvdW5kcy4iKX1jYXRjaChuKXt9cmV0dXJuIHRoaXMucmVnaXN0ZXJTb3VuZHMoZSx0KX0sbi5yZW1vdmVTb3VuZD1mdW5jdGlvbihlLGkpe2lmKG51bGw9PW4uYWN0aXZlUGx1Z2luKXJldHVybiExO2UgaW5zdGFuY2VvZiBPYmplY3QmJihlPWUuc3JjKSxlPW4uX2dldFNyY0J5SWQoZSkuc3JjLG51bGwhPWkmJihlPWkrZSk7dmFyIHI9bi5fcGFyc2VQYXRoKGUpO2lmKG51bGw9PXIpcmV0dXJuITE7ZT1yLnNyYztmb3IodmFyIHMgaW4gbi5faWRIYXNoKW4uX2lkSGFzaFtzXS5zcmM9PWUmJmRlbGV0ZSBuLl9pZEhhc2hbc107cmV0dXJuIHQucmVtb3ZlU3JjKGUpLGRlbGV0ZSBuLl9wcmVsb2FkSGFzaFtlXSxuLmFjdGl2ZVBsdWdpbi5yZW1vdmVTb3VuZChlKSwhMH0sbi5yZW1vdmVTb3VuZHM9ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXTtlLnBhdGgmJih0P3QrPWUucGF0aDp0PWUucGF0aCk7Zm9yKHZhciBpPTAscj1lLmxlbmd0aDtyPmk7aSsrKW5baV09Y3JlYXRlanMuU291bmQucmVtb3ZlU291bmQoZVtpXS5zcmMsdCk7cmV0dXJuIG59LG4ucmVtb3ZlTWFuaWZlc3Q9ZnVuY3Rpb24oZSx0KXt0cnl7Y29uc29sZS5sb2coImNyZWF0ZWpzLlNvdW5kLnJlbW92ZU1hbmlmZXN0IGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgY3JlYXRlanMuU291bmQucmVtb3ZlU291bmRzLiIpfWNhdGNoKGkpe31yZXR1cm4gbi5yZW1vdmVTb3VuZHMoZSx0KX0sbi5yZW1vdmVBbGxTb3VuZHM9ZnVuY3Rpb24oKXtuLl9pZEhhc2g9e30sbi5fcHJlbG9hZEhhc2g9e30sdC5yZW1vdmVBbGwoKSxuLmFjdGl2ZVBsdWdpbiYmbi5hY3RpdmVQbHVnaW4ucmVtb3ZlQWxsU291bmRzKCl9LG4ubG9hZENvbXBsZXRlPWZ1bmN0aW9uKGUpe2lmKCFuLmlzUmVhZHkoKSlyZXR1cm4hMTt2YXIgdD1uLl9wYXJzZVBhdGgoZSk7cmV0dXJuIGU9dD9uLl9nZXRTcmNCeUlkKHQuc3JjKS5zcmM6bi5fZ2V0U3JjQnlJZChlKS5zcmMsMT09bi5fcHJlbG9hZEhhc2hbZV1bMF19LG4uX3BhcnNlUGF0aD1mdW5jdGlvbihlKXsic3RyaW5nIiE9dHlwZW9mIGUmJihlPWUudG9TdHJpbmcoKSk7dmFyIHQ9ZS5tYXRjaChuLkZJTEVfUEFUVEVSTik7aWYobnVsbD09dClyZXR1cm4hMTtmb3IodmFyIGk9dFs0XSxyPXRbNV0scz1uLmdldENhcGFiaWxpdGllcygpLG89MDshc1tyXTspaWYocj1uLmFsdGVybmF0ZUV4dGVuc2lvbnNbbysrXSxvPm4uYWx0ZXJuYXRlRXh0ZW5zaW9ucy5sZW5ndGgpcmV0dXJuIG51bGw7ZT1lLnJlcGxhY2UoIi4iK3RbNV0sIi4iK3IpO3ZhciBhPXtuYW1lOmksc3JjOmUsZXh0ZW5zaW9uOnJ9O3JldHVybiBhfSxuLnBsYXk9ZnVuY3Rpb24oZSx0LGkscixzLG8sYSxsLGMpe3QgaW5zdGFuY2VvZiBPYmplY3QmJihpPXQuZGVsYXkscj10Lm9mZnNldCxzPXQubG9vcCxvPXQudm9sdW1lLGE9dC5wYW4sbD10LnN0YXJ0VGltZSxjPXQuZHVyYXRpb24sdD10LmludGVycnVwdCk7dmFyIHU9bi5jcmVhdGVJbnN0YW5jZShlLGwsYyksZD1uLl9wbGF5SW5zdGFuY2UodSx0LGkscixzLG8sYSk7cmV0dXJuIGR8fHUuX3BsYXlGYWlsZWQoKSx1fSxuLmNyZWF0ZUluc3RhbmNlPWZ1bmN0aW9uKGUsaSxyKXtpZighbi5pbml0aWFsaXplRGVmYXVsdFBsdWdpbnMoKSlyZXR1cm4gbmV3IGNyZWF0ZWpzLkRlZmF1bHRTb3VuZEluc3RhbmNlKGUsaSxyKTtlPW4uX2dldFNyY0J5SWQoZSk7dmFyIHM9bi5fcGFyc2VQYXRoKGUuc3JjKSxvPW51bGw7cmV0dXJuIG51bGwhPXMmJm51bGwhPXMuc3JjPyh0LmNyZWF0ZShzLnNyYyksbnVsbD09aSYmKGk9ZS5zdGFydFRpbWUpLG89bi5hY3RpdmVQbHVnaW4uY3JlYXRlKHMuc3JjLGkscnx8ZS5kdXJhdGlvbikpOm89bmV3IGNyZWF0ZWpzLkRlZmF1bHRTb3VuZEluc3RhbmNlKGUsaSxyKSxvLnVuaXF1ZUlkPW4uX2xhc3RJRCsrLG99LG4uc2V0Vm9sdW1lPWZ1bmN0aW9uKGUpe2lmKG51bGw9PU51bWJlcihlKSlyZXR1cm4hMTtpZihlPU1hdGgubWF4KDAsTWF0aC5taW4oMSxlKSksbi5fbWFzdGVyVm9sdW1lPWUsIXRoaXMuYWN0aXZlUGx1Z2lufHwhdGhpcy5hY3RpdmVQbHVnaW4uc2V0Vm9sdW1lfHwhdGhpcy5hY3RpdmVQbHVnaW4uc2V0Vm9sdW1lKGUpKWZvcih2YXIgdD10aGlzLl9pbnN0YW5jZXMsaT0wLHI9dC5sZW5ndGg7cj5pO2krKyl0W2ldLnNldE1hc3RlclZvbHVtZShlKX0sbi5nZXRWb2x1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gbi5fbWFzdGVyVm9sdW1lfSxuLnNldE11dGU9ZnVuY3Rpb24oZSl7aWYobnVsbD09ZSlyZXR1cm4hMTtpZih0aGlzLl9tYXN0ZXJNdXRlPWUsIXRoaXMuYWN0aXZlUGx1Z2lufHwhdGhpcy5hY3RpdmVQbHVnaW4uc2V0TXV0ZXx8IXRoaXMuYWN0aXZlUGx1Z2luLnNldE11dGUoZSkpZm9yKHZhciB0PXRoaXMuX2luc3RhbmNlcyxuPTAsaT10Lmxlbmd0aDtpPm47bisrKXRbbl0uc2V0TWFzdGVyTXV0ZShlKTtyZXR1cm4hMH0sbi5nZXRNdXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hc3Rlck11dGV9LG4uc3RvcD1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLl9pbnN0YW5jZXMsdD1lLmxlbmd0aDt0LS07KWVbdF0uc3RvcCgpfSxuLl9wbGF5SW5zdGFuY2U9ZnVuY3Rpb24oZSx0LGkscixzLG8sYSl7aWYodCBpbnN0YW5jZW9mIE9iamVjdCYmKGk9dC5kZWxheSxyPXQub2Zmc2V0LHM9dC5sb29wLG89dC52b2x1bWUsYT10LnBhbix0PXQuaW50ZXJydXB0KSx0PXR8fG4uZGVmYXVsdEludGVycnVwdEJlaGF2aW9yLG51bGw9PWkmJihpPTApLG51bGw9PXImJihyPWUuZ2V0UG9zaXRpb24oKSksbnVsbD09cyYmKHM9ZS5sb29wKSxudWxsPT1vJiYobz1lLnZvbHVtZSksbnVsbD09YSYmKGE9ZS5wYW4pLDA9PWkpe3ZhciBsPW4uX2JlZ2luUGxheWluZyhlLHQscixzLG8sYSk7aWYoIWwpcmV0dXJuITF9ZWxzZXt2YXIgYz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5fYmVnaW5QbGF5aW5nKGUsdCxyLHMsbyxhKX0saSk7ZS5kZWxheVRpbWVvdXRJZD1jfXJldHVybiB0aGlzLl9pbnN0YW5jZXMucHVzaChlKSwhMH0sbi5fYmVnaW5QbGF5aW5nPWZ1bmN0aW9uKGUsbixpLHIscyxvKXtpZighdC5hZGQoZSxuKSlyZXR1cm4hMTt2YXIgYT1lLl9iZWdpblBsYXlpbmcoaSxyLHMsbyk7aWYoIWEpe3ZhciBsPWNyZWF0ZWpzLmluZGV4T2YodGhpcy5faW5zdGFuY2VzLGUpO3JldHVybiBsPi0xJiZ0aGlzLl9pbnN0YW5jZXMuc3BsaWNlKGwsMSksITF9cmV0dXJuITB9LG4uX2dldFNyY0J5SWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uX2lkSGFzaFtlXXx8e3NyYzplfX0sbi5fcGxheUZpbmlzaGVkPWZ1bmN0aW9uKGUpe3QucmVtb3ZlKGUpO3ZhciBuPWNyZWF0ZWpzLmluZGV4T2YodGhpcy5faW5zdGFuY2VzLGUpO24+LTEmJnRoaXMuX2luc3RhbmNlcy5zcGxpY2UobiwxKX0sY3JlYXRlanMuU291bmQ9ZSx0LmNoYW5uZWxzPXt9LHQuY3JlYXRlPWZ1bmN0aW9uKGUsbil7dmFyIGk9dC5nZXQoZSk7cmV0dXJuIG51bGw9PWk/KHQuY2hhbm5lbHNbZV09bmV3IHQoZSxuKSwhMCk6ITF9LHQucmVtb3ZlU3JjPWZ1bmN0aW9uKGUpe3ZhciBuPXQuZ2V0KGUpO3JldHVybiBudWxsPT1uPyExOihuLl9yZW1vdmVBbGwoKSxkZWxldGUgdC5jaGFubmVsc1tlXSwhMCl9LHQucmVtb3ZlQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIHQuY2hhbm5lbHMpdC5jaGFubmVsc1tlXS5fcmVtb3ZlQWxsKCk7dC5jaGFubmVscz17fX0sdC5hZGQ9ZnVuY3Rpb24oZSxuKXt2YXIgaT10LmdldChlLnNyYyk7cmV0dXJuIG51bGw9PWk/ITE6aS5fYWRkKGUsbil9LHQucmVtb3ZlPWZ1bmN0aW9uKGUpe3ZhciBuPXQuZ2V0KGUuc3JjKTtyZXR1cm4gbnVsbD09bj8hMToobi5fcmVtb3ZlKGUpLCEwKX0sdC5tYXhQZXJDaGFubmVsPWZ1bmN0aW9uKCl7cmV0dXJuIGkubWF4RGVmYXVsdH0sdC5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuY2hhbm5lbHNbZV19O3ZhciBpPXQucHJvdG90eXBlO2kuY29uc3RydWN0b3I9dCxpLnNyYz1udWxsLGkubWF4PW51bGwsaS5tYXhEZWZhdWx0PTEwMCxpLmxlbmd0aD0wLGkuaW5pdD1mdW5jdGlvbihlLHQpe3RoaXMuc3JjPWUsdGhpcy5tYXg9dHx8dGhpcy5tYXhEZWZhdWx0LC0xPT10aGlzLm1heCYmKHRoaXMubWF4PXRoaXMubWF4RGVmYXVsdCksdGhpcy5faW5zdGFuY2VzPVtdfSxpLl9nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2luc3RhbmNlc1tlXX0saS5fYWRkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2dldFNsb3QodCxlKT8odGhpcy5faW5zdGFuY2VzLnB1c2goZSksdGhpcy5sZW5ndGgrKywhMCk6ITF9LGkuX3JlbW92ZT1mdW5jdGlvbihlKXt2YXIgdD1jcmVhdGVqcy5pbmRleE9mKHRoaXMuX2luc3RhbmNlcyxlKTtyZXR1cm4tMT09dD8hMToodGhpcy5faW5zdGFuY2VzLnNwbGljZSh0LDEpLHRoaXMubGVuZ3RoLS0sITApfSxpLl9yZW1vdmVBbGw9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5sZW5ndGgtMTtlPj0wO2UtLSl0aGlzLl9pbnN0YW5jZXNbZV0uc3RvcCgpfSxpLl9nZXRTbG90PWZ1bmN0aW9uKHQpe3ZhciBuLGk7aWYodCE9ZS5JTlRFUlJVUFRfTk9ORSYmKGk9dGhpcy5fZ2V0KDApLG51bGw9PWkpKXJldHVybiEwO2Zvcih2YXIgcj0wLHM9dGhpcy5tYXg7cz5yO3IrKyl7aWYobj10aGlzLl9nZXQociksbnVsbD09bilyZXR1cm4hMDtpZihuLnBsYXlTdGF0ZT09ZS5QTEFZX0ZJTklTSEVEfHxuLnBsYXlTdGF0ZT09ZS5QTEFZX0lOVEVSUlVQVEVEfHxuLnBsYXlTdGF0ZT09ZS5QTEFZX0ZBSUxFRCl7aT1uO2JyZWFrfXQhPWUuSU5URVJSVVBUX05PTkUmJih0PT1lLklOVEVSUlVQVF9FQVJMWSYmbi5nZXRQb3NpdGlvbigpPGkuZ2V0UG9zaXRpb24oKXx8dD09ZS5JTlRFUlJVUFRfTEFURSYmbi5nZXRQb3NpdGlvbigpPmkuZ2V0UG9zaXRpb24oKSkmJihpPW4pfXJldHVybiBudWxsIT1pPyhpLl9pbnRlcnJ1cHQoKSx0aGlzLl9yZW1vdmUoaSksITApOiExfSxpLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltTb3VuZCBTb3VuZENoYW5uZWxdIn19KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1mdW5jdGlvbihlLHQsbixpKXt0aGlzLkV2ZW50RGlzcGF0Y2hlcl9jb25zdHJ1Y3RvcigpLHRoaXMuc3JjPWUsdGhpcy51bmlxdWVJZD0tMSx0aGlzLnBsYXlTdGF0ZT1udWxsLHRoaXMuZGVsYXlUaW1lb3V0SWQ9bnVsbCx0aGlzLl9zdGFydFRpbWU9TWF0aC5tYXgoMCx0fHwwKSx0aGlzLl92b2x1bWU9MSxjcmVhdGVqcy5kZWZpbmVQcm9wZXJ0eVN1cHBvcnRlZCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInZvbHVtZSIse2dldDp0aGlzLmdldFZvbHVtZSxzZXQ6dGhpcy5zZXRWb2x1bWV9KSx0aGlzLl9wYW49MCxjcmVhdGVqcy5kZWZpbmVQcm9wZXJ0eVN1cHBvcnRlZCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInBhbiIse2dldDp0aGlzLmdldFBhbixzZXQ6dGhpcy5zZXRQYW59KSx0aGlzLl9kdXJhdGlvbj1NYXRoLm1heCgwLG58fDApLGNyZWF0ZWpzLmRlZmluZVByb3BlcnR5U3VwcG9ydGVkJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiZHVyYXRpb24iLHtnZXQ6dGhpcy5nZXREdXJhdGlvbixzZXQ6dGhpcy5zZXREdXJhdGlvbn0pLHRoaXMuX3BsYXliYWNrUmVzb3VyY2U9bnVsbCxjcmVhdGVqcy5kZWZpbmVQcm9wZXJ0eVN1cHBvcnRlZCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInBsYXliYWNrUmVzb3VyY2UiLHtnZXQ6dGhpcy5nZXRQbGF5YmFja1Jlc291cmNlLHNldDp0aGlzLnNldFBsYXliYWNrUmVzb3VyY2V9KSxpIT09ITEmJmkhPT0hMCYmdGhpcy5zZXRQbGF5YmFja1Jlc291cmNlKGkpLHRoaXMuX3Bvc2l0aW9uPTAsY3JlYXRlanMuZGVmaW5lUHJvcGVydHlTdXBwb3J0ZWQmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJwb3NpdGlvbiIse2dldDp0aGlzLmdldFBvc2l0aW9uLHNldDp0aGlzLnNldFBvc2l0aW9ufSksdGhpcy5fbG9vcD0wLGNyZWF0ZWpzLmRlZmluZVByb3BlcnR5U3VwcG9ydGVkJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywibG9vcCIse2dldDp0aGlzLmdldExvb3Asc2V0OnRoaXMuc2V0TG9vcH0pLHRoaXMuX211dGVkPSExLGNyZWF0ZWpzLmRlZmluZVByb3BlcnR5U3VwcG9ydGVkJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywibXV0ZWQiLHtnZXQ6dGhpcy5nZXRNdXRlZCxzZXQ6dGhpcy5zZXRNdXRlZH0pLHRoaXMuX3BhdXNlZD0hMSxjcmVhdGVqcy5kZWZpbmVQcm9wZXJ0eVN1cHBvcnRlZCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInBhdXNlZCIse2dldDp0aGlzLmdldFBhdXNlZCxzZXQ6dGhpcy5zZXRQYXVzZWR9KX0sdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5FdmVudERpc3BhdGNoZXIpO3QucGxheT1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIHRoaXMucGxheVN0YXRlPT1jcmVhdGVqcy5Tb3VuZC5QTEFZX1NVQ0NFRURFRD8oZSBpbnN0YW5jZW9mIE9iamVjdCYmKG49ZS5vZmZzZXQsaT1lLmxvb3Ascj1lLnZvbHVtZSxzPWUucGFuKSxudWxsIT1uJiZ0aGlzLnNldFBvc2l0aW9uKG4pLG51bGwhPWkmJnRoaXMuc2V0TG9vcChpKSxudWxsIT1yJiZ0aGlzLnNldFZvbHVtZShyKSxudWxsIT1zJiZ0aGlzLnNldFBhbihzKSx2b2lkKHRoaXMuX3BhdXNlZCYmdGhpcy5zZXRQYXVzZWQoITEpKSk6KHRoaXMuX2NsZWFuVXAoKSxjcmVhdGVqcy5Tb3VuZC5fcGxheUluc3RhbmNlKHRoaXMsZSx0LG4saSxyLHMpLHRoaXMpfSx0LnBhdXNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhdXNlZHx8dGhpcy5wbGF5U3RhdGUhPWNyZWF0ZWpzLlNvdW5kLlBMQVlfU1VDQ0VFREVEPyExOih0aGlzLnNldFBhdXNlZCghMCksITApfSx0LnJlc3VtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXVzZWQ/KHRoaXMuc2V0UGF1c2VkKCExKSwhMCk6ITF9LHQuc3RvcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvbj0wLHRoaXMuX3BhdXNlZD0hMSx0aGlzLl9oYW5kbGVTdG9wKCksdGhpcy5fY2xlYW5VcCgpLHRoaXMucGxheVN0YXRlPWNyZWF0ZWpzLlNvdW5kLlBMQVlfRklOSVNIRUQsdGhpc30sdC5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5fY2xlYW5VcCgpLHRoaXMuc3JjPW51bGwsdGhpcy5wbGF5YmFja1Jlc291cmNlPW51bGwsdGhpcy5yZW1vdmVBbGxFdmVudExpc3RlbmVycygpfSx0LnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltBYnN0cmFjdFNvdW5kSW5zdGFuY2VdIn0sdC5nZXRQYXVzZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGF1c2VkfSx0LnNldFBhdXNlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSE9PSEwJiZlIT09ITF8fHRoaXMuX3BhdXNlZD09ZXx8MT09ZSYmdGhpcy5wbGF5U3RhdGUhPWNyZWF0ZWpzLlNvdW5kLlBMQVlfU1VDQ0VFREVEP3ZvaWQgMDoodGhpcy5fcGF1c2VkPWUsZT90aGlzLl9wYXVzZSgpOnRoaXMuX3Jlc3VtZSgpLGNsZWFyVGltZW91dCh0aGlzLmRlbGF5VGltZW91dElkKSx0aGlzKX0sdC5zZXRWb2x1bWU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PXRoaXMuX3ZvbHVtZT90aGlzOih0aGlzLl92b2x1bWU9TWF0aC5tYXgoMCxNYXRoLm1pbigxLGUpKSx0aGlzLl9tdXRlZHx8dGhpcy5fdXBkYXRlVm9sdW1lKCksdGhpcyl9LHQuZ2V0Vm9sdW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZvbHVtZX0sdC5zZXRNdXRlPWZ1bmN0aW9uKGUpe3RoaXMuc2V0TXV0ZWQoZSl9LHQuZ2V0TXV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tdXRlZH0sdC5zZXRNdXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZT09PSEwfHxlPT09ITE/KHRoaXMuX211dGVkPWUsdGhpcy5fdXBkYXRlVm9sdW1lKCksdGhpcyk6dm9pZCAwfSx0LmdldE11dGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX211dGVkfSx0LnNldFBhbj1mdW5jdGlvbihlKXtyZXR1cm4gZT09dGhpcy5fcGFuP3RoaXM6KHRoaXMuX3Bhbj1NYXRoLm1heCgtMSxNYXRoLm1pbigxLGUpKSx0aGlzLl91cGRhdGVQYW4oKSx0aGlzKX0sdC5nZXRQYW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFufSx0LmdldFBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhdXNlZHx8dGhpcy5wbGF5U3RhdGUhPWNyZWF0ZWpzLlNvdW5kLlBMQVlfU1VDQ0VFREVEP3RoaXMuX3Bvc2l0aW9uOnRoaXMuX2NhbGN1bGF0ZUN1cnJlbnRQb3NpdGlvbigpfSx0LnNldFBvc2l0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wb3NpdGlvbj1NYXRoLm1heCgwLGUpLHRoaXMucGxheVN0YXRlPT1jcmVhdGVqcy5Tb3VuZC5QTEFZX1NVQ0NFRURFRCYmdGhpcy5fdXBkYXRlUG9zaXRpb24oKSx0aGlzfSx0LmdldER1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2R1cmF0aW9ufSx0LnNldER1cmF0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiBlPT10aGlzLl9kdXJhdGlvbj90aGlzOih0aGlzLl9kdXJhdGlvbj1NYXRoLm1heCgwLGV8fDApLHRoaXMuX3VwZGF0ZUR1cmF0aW9uKCksdGhpcyl9LHQuc2V0UGxheWJhY2tSZXNvdXJjZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcGxheWJhY2tSZXNvdXJjZT1lLDA9PXRoaXMuX2R1cmF0aW9uJiZ0aGlzLl9zZXREdXJhdGlvbkZyb21Tb3VyY2UoKSx0aGlzfSx0LmdldFBsYXliYWNrUmVzb3VyY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxheWJhY2tSZXNvdXJjZX0sdC5nZXRMb29wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvb3B9LHQuc2V0TG9vcD1mdW5jdGlvbihlKXtudWxsIT10aGlzLl9wbGF5YmFja1Jlc291cmNlJiYoMCE9dGhpcy5fbG9vcCYmMD09ZSYmdGhpcy5fcmVtb3ZlTG9vcGluZyhlKSwwPT10aGlzLl9sb29wJiYwIT1lJiZ0aGlzLl9hZGRMb29waW5nKGUpKSx0aGlzLl9sb29wPWV9LHQuX3NlbmRFdmVudD1mdW5jdGlvbihlKXt2YXIgdD1uZXcgY3JlYXRlanMuRXZlbnQoZSk7dGhpcy5kaXNwYXRjaEV2ZW50KHQpfSx0Ll9jbGVhblVwPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuZGVsYXlUaW1lb3V0SWQpLHRoaXMuX2hhbmRsZUNsZWFuVXAoKSx0aGlzLl9wYXVzZWQ9ITEsY3JlYXRlanMuU291bmQuX3BsYXlGaW5pc2hlZCh0aGlzKX0sdC5faW50ZXJydXB0PWZ1bmN0aW9uKCl7dGhpcy5fY2xlYW5VcCgpLHRoaXMucGxheVN0YXRlPWNyZWF0ZWpzLlNvdW5kLlBMQVlfSU5URVJSVVBURUQsdGhpcy5fc2VuZEV2ZW50KCJpbnRlcnJ1cHRlZCIpfSx0Ll9iZWdpblBsYXlpbmc9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHRoaXMuc2V0UG9zaXRpb24oZSksdGhpcy5zZXRMb29wKHQpLHRoaXMuc2V0Vm9sdW1lKG4pLHRoaXMuc2V0UGFuKGkpLG51bGwhPXRoaXMuX3BsYXliYWNrUmVzb3VyY2UmJnRoaXMuX3Bvc2l0aW9uPHRoaXMuX2R1cmF0aW9uPyh0aGlzLl9wYXVzZWQ9ITEsdGhpcy5faGFuZGxlU291bmRSZWFkeSgpLHRoaXMucGxheVN0YXRlPWNyZWF0ZWpzLlNvdW5kLlBMQVlfU1VDQ0VFREVELHRoaXMuX3NlbmRFdmVudCgic3VjY2VlZGVkIiksITApOih0aGlzLl9wbGF5RmFpbGVkKCksITEpfSx0Ll9wbGF5RmFpbGVkPWZ1bmN0aW9uKCl7dGhpcy5fY2xlYW5VcCgpLHRoaXMucGxheVN0YXRlPWNyZWF0ZWpzLlNvdW5kLlBMQVlfRkFJTEVELHRoaXMuX3NlbmRFdmVudCgiZmFpbGVkIil9LHQuX2hhbmRsZVNvdW5kQ29tcGxldGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9zaXRpb249MCwwIT10aGlzLl9sb29wPyh0aGlzLl9sb29wLS0sdGhpcy5faGFuZGxlTG9vcCgpLHZvaWQgdGhpcy5fc2VuZEV2ZW50KCJsb29wIikpOih0aGlzLl9jbGVhblVwKCksdGhpcy5wbGF5U3RhdGU9Y3JlYXRlanMuU291bmQuUExBWV9GSU5JU0hFRCx2b2lkIHRoaXMuX3NlbmRFdmVudCgiY29tcGxldGUiKSl9LHQuX2hhbmRsZVNvdW5kUmVhZHk9ZnVuY3Rpb24oKXt9LHQuX3VwZGF0ZVZvbHVtZT1mdW5jdGlvbigpe30sdC5fdXBkYXRlUGFuPWZ1bmN0aW9uKCl7fSx0Ll91cGRhdGVEdXJhdGlvbj1mdW5jdGlvbigpe30sdC5fc2V0RHVyYXRpb25Gcm9tU291cmNlPWZ1bmN0aW9uKCl7fSx0Ll9jYWxjdWxhdGVDdXJyZW50UG9zaXRpb249ZnVuY3Rpb24oKXt9LHQuX3VwZGF0ZVBvc2l0aW9uPWZ1bmN0aW9uKCl7fSx0Ll9yZW1vdmVMb29waW5nPWZ1bmN0aW9uKCl7fSx0Ll9hZGRMb29waW5nPWZ1bmN0aW9uKCl7fSx0Ll9wYXVzZT1mdW5jdGlvbigpe30sdC5fcmVzdW1lPWZ1bmN0aW9uKCl7fSx0Ll9oYW5kbGVTdG9wPWZ1bmN0aW9uKCl7fSx0Ll9oYW5kbGVDbGVhblVwPWZ1bmN0aW9uKCl7fSx0Ll9oYW5kbGVMb29wPWZ1bmN0aW9uKCl7fSxjcmVhdGVqcy5BYnN0cmFjdFNvdW5kSW5zdGFuY2U9Y3JlYXRlanMucHJvbW90ZShlLCJFdmVudERpc3BhdGNoZXIiKSxjcmVhdGVqcy5EZWZhdWx0U291bmRJbnN0YW5jZT1jcmVhdGVqcy5BYnN0cmFjdFNvdW5kSW5zdGFuY2V9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1mdW5jdGlvbigpe3RoaXMuX2NhcGFiaWxpdGllcz1udWxsLHRoaXMuX2xvYWRlcnM9e30sdGhpcy5fYXVkaW9Tb3VyY2VzPXt9LHRoaXMuX3NvdW5kSW5zdGFuY2VzPXt9LHRoaXMuX2xvYWRlckNsYXNzLHRoaXMuX3NvdW5kSW5zdGFuY2VDbGFzc30sdD1lLnByb3RvdHlwZTtlLl9jYXBhYmlsaXRpZXM9bnVsbCxlLmlzU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuITB9LHQucmVnaXN0ZXI9ZnVuY3Rpb24oZSl7aWYodGhpcy5fYXVkaW9Tb3VyY2VzW2Uuc3JjXT0hMCx0aGlzLl9zb3VuZEluc3RhbmNlc1tlLnNyY109W10sdGhpcy5fbG9hZGVyc1tlLnNyY10pcmV0dXJuIHRoaXMuX2xvYWRlcnNbZS5zcmNdO3ZhciB0PW5ldyB0aGlzLl9sb2FkZXJDbGFzcyhlKTtyZXR1cm4gdC5vbigiY29tcGxldGUiLGNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVByZWxvYWRDb21wbGV0ZSx0aGlzKSksdGhpcy5fbG9hZGVyc1tlLnNyY109dCx0fSx0LnByZWxvYWQ9ZnVuY3Rpb24oZSl7ZS5vbigiZXJyb3IiLGNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVByZWxvYWRFcnJvcix0aGlzKSksZS5sb2FkKCl9LHQuaXNQcmVsb2FkU3RhcnRlZD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9dGhpcy5fYXVkaW9Tb3VyY2VzW2VdfSx0LmlzUHJlbG9hZENvbXBsZXRlPWZ1bmN0aW9uKGUpe3JldHVybiEobnVsbD09dGhpcy5fYXVkaW9Tb3VyY2VzW2VdfHwxPT10aGlzLl9hdWRpb1NvdXJjZXNbZV0pfSx0LnJlbW92ZVNvdW5kPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX3NvdW5kSW5zdGFuY2VzW2VdKXtmb3IodmFyIHQ9dGhpcy5fc291bmRJbnN0YW5jZXNbZV0ubGVuZ3RoO3QtLTspe3ZhciBuPXRoaXMuX3NvdW5kSW5zdGFuY2VzW2VdW3RdO24uZGVzdHJveSgpfWRlbGV0ZSB0aGlzLl9zb3VuZEluc3RhbmNlc1tlXSxkZWxldGUgdGhpcy5fYXVkaW9Tb3VyY2VzW2VdLHRoaXMuX2xvYWRlcnNbZV0mJnRoaXMuX2xvYWRlcnNbZV0uZGVzdHJveSgpLGRlbGV0ZSB0aGlzLl9sb2FkZXJzW2VdfX0sdC5yZW1vdmVBbGxTb3VuZHM9ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gdGhpcy5fYXVkaW9Tb3VyY2VzKXRoaXMucmVtb3ZlU291bmQoZSl9LHQuY3JlYXRlPWZ1bmN0aW9uKGUsdCxuKXt0aGlzLmlzUHJlbG9hZFN0YXJ0ZWQoZSl8fHRoaXMucHJlbG9hZCh0aGlzLnJlZ2lzdGVyKGUpKTt2YXIgaT1uZXcgdGhpcy5fc291bmRJbnN0YW5jZUNsYXNzKGUsdCxuLHRoaXMuX2F1ZGlvU291cmNlc1tlXSk7cmV0dXJuIHRoaXMuX3NvdW5kSW5zdGFuY2VzW2VdLnB1c2goaSksaX0sdC5zZXRWb2x1bWU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3ZvbHVtZT1lLHRoaXMuX3VwZGF0ZVZvbHVtZSgpLCEwfSx0LmdldFZvbHVtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl92b2x1bWV9LHQuc2V0TXV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl91cGRhdGVWb2x1bWUoKSwhMH0sdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbQWJzdHJhY3RQbHVnaW5dIn0sdC5faGFuZGxlUHJlbG9hZENvbXBsZXRlPWZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0LmdldEl0ZW0oKS5zcmM7dGhpcy5fYXVkaW9Tb3VyY2VzW3RdPWUucmVzdWx0O2Zvcih2YXIgbj0wLGk9dGhpcy5fc291bmRJbnN0YW5jZXNbdF0ubGVuZ3RoO2k+bjtuKyspe3ZhciByPXRoaXMuX3NvdW5kSW5zdGFuY2VzW3RdW25dO3Iuc2V0UGxheWJhY2tSZXNvdXJjZSh0aGlzLl9hdWRpb1NvdXJjZXNbdF0pfX0sdC5faGFuZGxlUHJlbG9hZEVycm9yPWZ1bmN0aW9uKCl7fSx0Ll91cGRhdGVWb2x1bWU9ZnVuY3Rpb24oKXt9LGNyZWF0ZWpzLkFic3RyYWN0UGx1Z2luPWV9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKGUpe3RoaXMuQWJzdHJhY3RMb2FkZXJfY29uc3RydWN0b3IoZSwhMCxjcmVhdGVqcy5BYnN0cmFjdExvYWRlci5TT1VORCl9dmFyIHQ9Y3JlYXRlanMuZXh0ZW5kKGUsY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIpO2UuY29udGV4dD1udWxsLHQudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW1dlYkF1ZGlvTG9hZGVyXSJ9LHQuX2NyZWF0ZVJlcXVlc3Q9ZnVuY3Rpb24oKXt0aGlzLl9yZXF1ZXN0PW5ldyBjcmVhdGVqcy5YSFJSZXF1ZXN0KHRoaXMuX2l0ZW0sITEpLHRoaXMuX3JlcXVlc3Quc2V0UmVzcG9uc2VUeXBlKCJhcnJheWJ1ZmZlciIpfSx0Ll9zZW5kQ29tcGxldGU9ZnVuY3Rpb24oKXtlLmNvbnRleHQuZGVjb2RlQXVkaW9EYXRhKHRoaXMuX3Jhd1Jlc3VsdCxjcmVhdGVqcy5wcm94eSh0aGlzLl9oYW5kbGVBdWRpb0RlY29kZWQsdGhpcyksY3JlYXRlanMucHJveHkodGhpcy5faGFuZGxlRXJyb3IsdGhpcykpfSx0Ll9oYW5kbGVBdWRpb0RlY29kZWQ9ZnVuY3Rpb24oZSl7dGhpcy5fcmVzdWx0PWUsdGhpcy5BYnN0cmFjdExvYWRlcl9fc2VuZENvbXBsZXRlKCl9LGNyZWF0ZWpzLldlYkF1ZGlvTG9hZGVyPWNyZWF0ZWpzLnByb21vdGUoZSwiQWJzdHJhY3RMb2FkZXIiKX0oKSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoZSx0LGkscil7dGhpcy5BYnN0cmFjdFNvdW5kSW5zdGFuY2VfY29uc3RydWN0b3IoZSx0LGksciksdGhpcy5nYWluTm9kZT1uLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMucGFuTm9kZT1uLmNvbnRleHQuY3JlYXRlUGFubmVyKCksdGhpcy5wYW5Ob2RlLnBhbm5pbmdNb2RlbD1uLl9wYW5uaW5nTW9kZWwsdGhpcy5wYW5Ob2RlLmNvbm5lY3QodGhpcy5nYWluTm9kZSksdGhpcy5zb3VyY2VOb2RlPW51bGwsdGhpcy5fc291bmRDb21wbGV0ZVRpbWVvdXQ9bnVsbCx0aGlzLl9zb3VyY2VOb2RlTmV4dD1udWxsLHRoaXMuX3BsYXliYWNrU3RhcnRUaW1lPTAsdGhpcy5fZW5kZWRIYW5kbGVyPWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVNvdW5kQ29tcGxldGUsdGhpcyl9dmFyIHQ9Y3JlYXRlanMuZXh0ZW5kKGUsY3JlYXRlanMuQWJzdHJhY3RTb3VuZEluc3RhbmNlKSxuPWU7bi5jb250ZXh0PW51bGwsbi5kZXN0aW5hdGlvbk5vZGU9bnVsbCxuLl9wYW5uaW5nTW9kZWw9ImVxdWFscG93ZXIiLHQuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuQWJzdHJhY3RTb3VuZEluc3RhbmNlX2Rlc3Ryb3koKSx0aGlzLnBhbk5vZGUuZGlzY29ubmVjdCgwKSx0aGlzLnBhbk5vZGU9bnVsbCx0aGlzLmdhaW5Ob2RlLmRpc2Nvbm5lY3QoMCksdGhpcy5nYWluTm9kZT1udWxsfSx0LnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltXZWJBdWRpb1NvdW5kSW5zdGFuY2VdIn0sdC5fdXBkYXRlUGFuPWZ1bmN0aW9uKCl7dGhpcy5wYW5Ob2RlLnNldFBvc2l0aW9uKHRoaXMuX3BhbiwwLC0uNSl9LHQuX3JlbW92ZUxvb3Bpbmc9ZnVuY3Rpb24oKXt0aGlzLl9zb3VyY2VOb2RlTmV4dD10aGlzLl9jbGVhblVwQXVkaW9Ob2RlKHRoaXMuX3NvdXJjZU5vZGVOZXh0KX0sdC5fYWRkTG9vcGluZz1mdW5jdGlvbigpe3RoaXMucGxheVN0YXRlPT1jcmVhdGVqcy5Tb3VuZC5QTEFZX1NVQ0NFRURFRCYmKHRoaXMuX3NvdXJjZU5vZGVOZXh0PXRoaXMuX2NyZWF0ZUFuZFBsYXlBdWRpb05vZGUodGhpcy5fcGxheWJhY2tTdGFydFRpbWUsMCkpfSx0Ll9zZXREdXJhdGlvbkZyb21Tb3VyY2U9ZnVuY3Rpb24oKXt0aGlzLl9kdXJhdGlvbj0xZTMqdGhpcy5wbGF5YmFja1Jlc291cmNlLmR1cmF0aW9ufSx0Ll9oYW5kbGVDbGVhblVwPWZ1bmN0aW9uKCl7dGhpcy5zb3VyY2VOb2RlJiZ0aGlzLnBsYXlTdGF0ZT09Y3JlYXRlanMuU291bmQuUExBWV9TVUNDRUVERUQmJih0aGlzLnNvdXJjZU5vZGU9dGhpcy5fY2xlYW5VcEF1ZGlvTm9kZSh0aGlzLnNvdXJjZU5vZGUpLHRoaXMuX3NvdXJjZU5vZGVOZXh0PXRoaXMuX2NsZWFuVXBBdWRpb05vZGUodGhpcy5fc291cmNlTm9kZU5leHQpKSwwIT10aGlzLmdhaW5Ob2RlLm51bWJlck9mT3V0cHV0cyYmdGhpcy5nYWluTm9kZS5kaXNjb25uZWN0KDApLGNsZWFyVGltZW91dCh0aGlzLl9zb3VuZENvbXBsZXRlVGltZW91dCksdGhpcy5fcGxheWJhY2tTdGFydFRpbWU9MH0sdC5fY2xlYW5VcEF1ZGlvTm9kZT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmKGUuc3RvcCgwKSxlLmRpc2Nvbm5lY3QoMCksZT1udWxsKSxlfSx0Ll9oYW5kbGVTb3VuZFJlYWR5PWZ1bmN0aW9uKCl7dGhpcy5nYWluTm9kZS5jb25uZWN0KG4uZGVzdGluYXRpb25Ob2RlKTt2YXIgZT0uMDAxKnRoaXMuX2R1cmF0aW9uLHQ9LjAwMSp0aGlzLl9wb3NpdGlvbjt0aGlzLnNvdXJjZU5vZGU9dGhpcy5fY3JlYXRlQW5kUGxheUF1ZGlvTm9kZShuLmNvbnRleHQuY3VycmVudFRpbWUtZSx0KSx0aGlzLl9wbGF5YmFja1N0YXJ0VGltZT10aGlzLnNvdXJjZU5vZGUuc3RhcnRUaW1lLXQsdGhpcy5fc291bmRDb21wbGV0ZVRpbWVvdXQ9c2V0VGltZW91dCh0aGlzLl9lbmRlZEhhbmRsZXIsMWUzKihlLXQpKSwwIT10aGlzLl9sb29wJiYodGhpcy5fc291cmNlTm9kZU5leHQ9dGhpcy5fY3JlYXRlQW5kUGxheUF1ZGlvTm9kZSh0aGlzLl9wbGF5YmFja1N0YXJ0VGltZSwwKSl9LHQuX2NyZWF0ZUFuZFBsYXlBdWRpb05vZGU9ZnVuY3Rpb24oZSx0KXt2YXIgaT1uLmNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7aS5idWZmZXI9dGhpcy5wbGF5YmFja1Jlc291cmNlLGkuY29ubmVjdCh0aGlzLnBhbk5vZGUpO3ZhciByPS4wMDEqdGhpcy5fZHVyYXRpb247cmV0dXJuIGkuc3RhcnRUaW1lPWUrcixpLnN0YXJ0KGkuc3RhcnRUaW1lLHQrLjAwMSp0aGlzLl9zdGFydFRpbWUsci10KSxpfSx0Ll9wYXVzZT1mdW5jdGlvbigpe3RoaXMuX3Bvc2l0aW9uPTFlMyoobi5jb250ZXh0LmN1cnJlbnRUaW1lLXRoaXMuX3BsYXliYWNrU3RhcnRUaW1lKSx0aGlzLnNvdXJjZU5vZGU9dGhpcy5fY2xlYW5VcEF1ZGlvTm9kZSh0aGlzLnNvdXJjZU5vZGUpLHRoaXMuX3NvdXJjZU5vZGVOZXh0PXRoaXMuX2NsZWFuVXBBdWRpb05vZGUodGhpcy5fc291cmNlTm9kZU5leHQpLDAhPXRoaXMuZ2Fpbk5vZGUubnVtYmVyT2ZPdXRwdXRzJiZ0aGlzLmdhaW5Ob2RlLmRpc2Nvbm5lY3QoMCksY2xlYXJUaW1lb3V0KHRoaXMuX3NvdW5kQ29tcGxldGVUaW1lb3V0KX0sdC5fcmVzdW1lPWZ1bmN0aW9uKCl7dGhpcy5faGFuZGxlU291bmRSZWFkeSgpfSx0Ll91cGRhdGVWb2x1bWU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tdXRlZD8wOnRoaXMuX3ZvbHVtZTtlIT10aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWUmJih0aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWU9ZSl9LHQuX2NhbGN1bGF0ZUN1cnJlbnRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiAxZTMqKG4uY29udGV4dC5jdXJyZW50VGltZS10aGlzLl9wbGF5YmFja1N0YXJ0VGltZSl9LHQuX3VwZGF0ZVBvc2l0aW9uPWZ1bmN0aW9uKCl7dGhpcy5zb3VyY2VOb2RlPXRoaXMuX2NsZWFuVXBBdWRpb05vZGUodGhpcy5zb3VyY2VOb2RlKSx0aGlzLl9zb3VyY2VOb2RlTmV4dD10aGlzLl9jbGVhblVwQXVkaW9Ob2RlKHRoaXMuX3NvdXJjZU5vZGVOZXh0KSxjbGVhclRpbWVvdXQodGhpcy5fc291bmRDb21wbGV0ZVRpbWVvdXQpLHRoaXMuX3BhdXNlZHx8dGhpcy5faGFuZGxlU291bmRSZWFkeSgpfSx0Ll9oYW5kbGVMb29wPWZ1bmN0aW9uKCl7dGhpcy5fY2xlYW5VcEF1ZGlvTm9kZSh0aGlzLnNvdXJjZU5vZGUpLHRoaXMuc291cmNlTm9kZT10aGlzLl9zb3VyY2VOb2RlTmV4dCx0aGlzLl9wbGF5YmFja1N0YXJ0VGltZT10aGlzLnNvdXJjZU5vZGUuc3RhcnRUaW1lLHRoaXMuX3NvdXJjZU5vZGVOZXh0PXRoaXMuX2NyZWF0ZUFuZFBsYXlBdWRpb05vZGUodGhpcy5fcGxheWJhY2tTdGFydFRpbWUsMCksdGhpcy5fc291bmRDb21wbGV0ZVRpbWVvdXQ9c2V0VGltZW91dCh0aGlzLl9lbmRlZEhhbmRsZXIsdGhpcy5fZHVyYXRpb24pfSx0Ll91cGRhdGVEdXJhdGlvbj1mdW5jdGlvbigpe3RoaXMuX3BhdXNlKCksdGhpcy5fcmVzdW1lKCl9LGNyZWF0ZWpzLldlYkF1ZGlvU291bmRJbnN0YW5jZT1jcmVhdGVqcy5wcm9tb3RlKGUsIkFic3RyYWN0U291bmRJbnN0YW5jZSIpfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSgpe3RoaXMuQWJzdHJhY3RQbHVnaW5fY29uc3RydWN0b3IoKSx0aGlzLl9wYW5uaW5nTW9kZWw9bi5fcGFubmluZ01vZGVsLHRoaXMuX3ZvbHVtZT0xLHRoaXMuY29udGV4dD1uLmNvbnRleHQsdGhpcy5keW5hbWljc0NvbXByZXNzb3JOb2RlPXRoaXMuY29udGV4dC5jcmVhdGVEeW5hbWljc0NvbXByZXNzb3IoKSx0aGlzLmR5bmFtaWNzQ29tcHJlc3Nvck5vZGUuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pLHRoaXMuZ2Fpbk5vZGU9dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSx0aGlzLmdhaW5Ob2RlLmNvbm5lY3QodGhpcy5keW5hbWljc0NvbXByZXNzb3JOb2RlKSxjcmVhdGVqcy5XZWJBdWRpb1NvdW5kSW5zdGFuY2UuZGVzdGluYXRpb25Ob2RlPXRoaXMuZ2Fpbk5vZGUsdGhpcy5fY2FwYWJpbGl0aWVzPW4uX2NhcGFiaWxpdGllcyx0aGlzLl9sb2FkZXJDbGFzcz1jcmVhdGVqcy5XZWJBdWRpb0xvYWRlcix0aGlzLl9zb3VuZEluc3RhbmNlQ2xhc3M9Y3JlYXRlanMuV2ViQXVkaW9Tb3VuZEluc3RhbmNlLHRoaXMuX2FkZFByb3BzVG9DbGFzc2VzKCl9dmFyIHQ9Y3JlYXRlanMuZXh0ZW5kKGUsY3JlYXRlanMuQWJzdHJhY3RQbHVnaW4pLG49ZTtuLl9jYXBhYmlsaXRpZXM9bnVsbCxuLl9wYW5uaW5nTW9kZWw9ImVxdWFscG93ZXIiLG4uY29udGV4dD1udWxsLG4uaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXt2YXIgZT1jcmVhdGVqcy5Ccm93c2VyRGV0ZWN0LmlzSU9TfHxjcmVhdGVqcy5Ccm93c2VyRGV0ZWN0LmlzQW5kcm9pZHx8Y3JlYXRlanMuQnJvd3NlckRldGVjdC5pc0JsYWNrYmVycnk7cmV0dXJuImZpbGU6IiE9bG9jYXRpb24ucHJvdG9jb2x8fGV8fHRoaXMuX2lzRmlsZVhIUlN1cHBvcnRlZCgpPyhuLl9nZW5lcmF0ZUNhcGFiaWxpdGllcygpLG51bGw9PW4uY29udGV4dD8hMTohMCk6ITF9LG4ucGxheUVtcHR5U291bmQ9ZnVuY3Rpb24oKXt2YXIgZT1uLmNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7ZS5idWZmZXI9bi5jb250ZXh0LmNyZWF0ZUJ1ZmZlcigxLDEsMjIwNTApLGUuY29ubmVjdChuLmNvbnRleHQuZGVzdGluYXRpb24pLGUuc3RhcnQoMCwwLDApfSxuLl9pc0ZpbGVYSFJTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXt2YXIgZT0hMCx0PW5ldyBYTUxIdHRwUmVxdWVzdDt0cnl7dC5vcGVuKCJHRVQiLCJXZWJBdWRpb1BsdWdpblRlc3QuZmFpbCIsITEpfWNhdGNoKG4pe3JldHVybiBlPSExfXQub25lcnJvcj1mdW5jdGlvbigpe2U9ITF9LHQub25sb2FkPWZ1bmN0aW9uKCl7ZT00MDQ9PXRoaXMuc3RhdHVzfHwyMDA9PXRoaXMuc3RhdHVzfHwwPT10aGlzLnN0YXR1cyYmIiIhPXRoaXMucmVzcG9uc2V9O3RyeXt0LnNlbmQoKX1jYXRjaChuKXtlPSExfXJldHVybiBlfSxuLl9nZW5lcmF0ZUNhcGFiaWxpdGllcz1mdW5jdGlvbigpe2lmKG51bGw9PW4uX2NhcGFiaWxpdGllcyl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKTtpZihudWxsPT1lLmNhblBsYXlUeXBlKXJldHVybiBudWxsO2lmKG51bGw9PW4uY29udGV4dClpZih3aW5kb3cuQXVkaW9Db250ZXh0KW4uY29udGV4dD1uZXcgQXVkaW9Db250ZXh0O2Vsc2V7aWYoIXdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpcmV0dXJuIG51bGw7bi5jb250ZXh0PW5ldyB3ZWJraXRBdWRpb0NvbnRleHR9bi5fY29tcGF0aWJpbGl0eVNldFVwKCksbi5wbGF5RW1wdHlTb3VuZCgpLG4uX2NhcGFiaWxpdGllcz17cGFubmluZzohMCx2b2x1bWU6ITAsdHJhY2tzOi0xfTtmb3IodmFyIHQ9Y3JlYXRlanMuU291bmQuU1VQUE9SVEVEX0VYVEVOU0lPTlMsaT1jcmVhdGVqcy5Tb3VuZC5FWFRFTlNJT05fTUFQLHI9MCxzPXQubGVuZ3RoO3M+cjtyKyspe3ZhciBvPXRbcl0sYT1pW29dfHxvO24uX2NhcGFiaWxpdGllc1tvXT0ibm8iIT1lLmNhblBsYXlUeXBlKCJhdWRpby8iK28pJiYiIiE9ZS5jYW5QbGF5VHlwZSgiYXVkaW8vIitvKXx8Im5vIiE9ZS5jYW5QbGF5VHlwZSgiYXVkaW8vIithKSYmIiIhPWUuY2FuUGxheVR5cGUoImF1ZGlvLyIrYSl9bi5jb250ZXh0LmRlc3RpbmF0aW9uLm51bWJlck9mQ2hhbm5lbHM8MiYmKG4uX2NhcGFiaWxpdGllcy5wYW5uaW5nPSExKX19LG4uX2NvbXBhdGliaWxpdHlTZXRVcD1mdW5jdGlvbigpe2lmKG4uX3Bhbm5pbmdNb2RlbD0iZXF1YWxwb3dlciIsIW4uY29udGV4dC5jcmVhdGVHYWluKXtuLmNvbnRleHQuY3JlYXRlR2Fpbj1uLmNvbnRleHQuY3JlYXRlR2Fpbk5vZGU7dmFyIGU9bi5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO2UuX19wcm90b19fLnN0YXJ0PWUuX19wcm90b19fLm5vdGVHcmFpbk9uLGUuX19wcm90b19fLnN0b3A9ZS5fX3Byb3RvX18ubm90ZU9mZixuLl9wYW5uaW5nTW9kZWw9MH19LHQudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW1dlYkF1ZGlvUGx1Z2luXSJ9LHQuX2FkZFByb3BzVG9DbGFzc2VzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fc291bmRJbnN0YW5jZUNsYXNzO2UuY29udGV4dD10aGlzLmNvbnRleHQsZS5kZXN0aW5hdGlvbk5vZGU9dGhpcy5nYWluTm9kZSxlLl9wYW5uaW5nTW9kZWw9dGhpcy5fcGFubmluZ01vZGVsLHRoaXMuX2xvYWRlckNsYXNzLmNvbnRleHQ9dGhpcy5jb250ZXh0fSx0Ll91cGRhdGVWb2x1bWU9ZnVuY3Rpb24oKXt2YXIgZT1jcmVhdGVqcy5Tb3VuZC5fbWFzdGVyTXV0ZT8wOnRoaXMuX3ZvbHVtZTtlIT10aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWUmJih0aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWU9ZSl9LGNyZWF0ZWpzLldlYkF1ZGlvUGx1Z2luPWNyZWF0ZWpzLnByb21vdGUoZSwiQWJzdHJhY3RQbHVnaW4iKX0oKSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoZSl7dGhpcy5zcmM9ZSx0aGlzLmxlbmd0aD0wLHRoaXMuYXZhaWxhYmxlPTAsdGhpcy50YWdzPVtdLHRoaXMuZHVyYXRpb249MH12YXIgdD1lLnByb3RvdHlwZTt0LmNvbnN0cnVjdG9yPWU7dmFyIG49ZTtuLnRhZ3M9e30sbi5nZXQ9ZnVuY3Rpb24odCl7dmFyIGk9bi50YWdzW3RdO3JldHVybiBudWxsPT1pJiYoaT1uLnRhZ3NbdF09bmV3IGUodCkpLGl9LG4ucmVtb3ZlPWZ1bmN0aW9uKGUpe3ZhciB0PW4udGFnc1tlXTtyZXR1cm4gbnVsbD09dD8hMToodC5yZW1vdmVBbGwoKSxkZWxldGUgbi50YWdzW2VdLCEwKX0sbi5nZXRJbnN0YW5jZT1mdW5jdGlvbihlKXt2YXIgdD1uLnRhZ3NbZV07cmV0dXJuIG51bGw9PXQ/bnVsbDp0LmdldCgpfSxuLnNldEluc3RhbmNlPWZ1bmN0aW9uKGUsdCl7dmFyIGk9bi50YWdzW2VdO3JldHVybiBudWxsPT1pP251bGw6aS5zZXQodCl9LG4uZ2V0RHVyYXRpb249ZnVuY3Rpb24oZSl7dmFyIHQ9bi50YWdzW2VdO3JldHVybiBudWxsPT10PzA6dC5nZXREdXJhdGlvbigpfSx0LmFkZD1mdW5jdGlvbihlKXt0aGlzLnRhZ3MucHVzaChlKSx0aGlzLmxlbmd0aCsrLHRoaXMuYXZhaWxhYmxlKyt9LHQucmVtb3ZlQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBlO3RoaXMubGVuZ3RoLS07KWU9dGhpcy50YWdzW3RoaXMubGVuZ3RoXSxlLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKSxkZWxldGUgdGhpcy50YWdzW3RoaXMubGVuZ3RoXTt0aGlzLnNyYz1udWxsLHRoaXMudGFncy5sZW5ndGg9MH0sdC5nZXQ9ZnVuY3Rpb24oKXtpZigwPT10aGlzLnRhZ3MubGVuZ3RoKXJldHVybiBudWxsO3RoaXMuYXZhaWxhYmxlPXRoaXMudGFncy5sZW5ndGg7dmFyIGU9dGhpcy50YWdzLnBvcCgpO3JldHVybiBudWxsPT1lLnBhcmVudE5vZGUmJmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZSksZX0sdC5zZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9Y3JlYXRlanMuaW5kZXhPZih0aGlzLnRhZ3MsZSk7LTE9PXQmJnRoaXMudGFncy5wdXNoKGUpLHRoaXMuYXZhaWxhYmxlPXRoaXMudGFncy5sZW5ndGh9LHQuZ2V0RHVyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kdXJhdGlvbnx8KHRoaXMuZHVyYXRpb249MWUzKnRoaXMudGFnc1t0aGlzLnRhZ3MubGVuZ3RoLTFdLmR1cmF0aW9uKSx0aGlzLmR1cmF0aW9ufSx0LnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltIVE1MQXVkaW9UYWdQb29sXSJ9LGNyZWF0ZWpzLkhUTUxBdWRpb1RhZ1Bvb2w9ZX0oKSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoZSx0LG4saSl7dGhpcy5BYnN0cmFjdFNvdW5kSW5zdGFuY2VfY29uc3RydWN0b3IoZSx0LG4saSksdGhpcy5fYXVkaW9TcHJpdGVTdG9wVGltZT1udWxsLHRoaXMuX2RlbGF5VGltZW91dElkPW51bGwsdGhpcy5fZW5kZWRIYW5kbGVyPWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVNvdW5kQ29tcGxldGUsdGhpcyksdGhpcy5fcmVhZHlIYW5kbGVyPWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVRhZ1JlYWR5LHRoaXMpLHRoaXMuX3N0YWxsZWRIYW5kbGVyPWNyZWF0ZWpzLnByb3h5KHRoaXMucGxheUZhaWxlZCx0aGlzKSx0aGlzLl9hdWRpb1Nwcml0ZUVuZEhhbmRsZXI9Y3JlYXRlanMucHJveHkodGhpcy5faGFuZGxlQXVkaW9TcHJpdGVMb29wLHRoaXMpLHRoaXMuX2xvb3BIYW5kbGVyPWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVNvdW5kQ29tcGxldGUsdGhpcyksbj90aGlzLl9hdWRpb1Nwcml0ZVN0b3BUaW1lPS4wMDEqKHQrbik6dGhpcy5fZHVyYXRpb249Y3JlYXRlanMuSFRNTEF1ZGlvVGFnUG9vbC5nZXREdXJhdGlvbih0aGlzLnNyYyl9dmFyIHQ9Y3JlYXRlanMuZXh0ZW5kKGUsY3JlYXRlanMuQWJzdHJhY3RTb3VuZEluc3RhbmNlKTt0LnNldE1hc3RlclZvbHVtZT1mdW5jdGlvbigpe3RoaXMuX3VwZGF0ZVZvbHVtZSgpfSx0LnNldE1hc3Rlck11dGU9ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVWb2x1bWUoKX0sdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbSFRNTEF1ZGlvU291bmRJbnN0YW5jZV0ifSx0Ll9yZW1vdmVMb29waW5nPWZ1bmN0aW9uKCl7bnVsbCE9dGhpcy5fcGxheWJhY2tSZXNvdXJjZSYmKHRoaXMuX3BsYXliYWNrUmVzb3VyY2UubG9vcD0hMSx0aGlzLl9wbGF5YmFja1Jlc291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luLl9BVURJT19TRUVLRUQsdGhpcy5fbG9vcEhhbmRsZXIsITEpKX0sdC5fYWRkTG9vcGluZz1mdW5jdGlvbigpe251bGw9PXRoaXMuX3BsYXliYWNrUmVzb3VyY2V8fHRoaXMuX2F1ZGlvU3ByaXRlU3RvcFRpbWV8fCh0aGlzLl9wbGF5YmFja1Jlc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luLl9BVURJT19TRUVLRUQsdGhpcy5fbG9vcEhhbmRsZXIsITEpLHRoaXMuX3BsYXliYWNrUmVzb3VyY2UubG9vcD0hMCl9LHQuX2hhbmRsZUNsZWFuVXA9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9wbGF5YmFja1Jlc291cmNlO2lmKG51bGwhPWUpe2UucGF1c2UoKSxlLmxvb3A9ITEsZS5yZW1vdmVFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fQVVESU9fRU5ERUQsdGhpcy5fZW5kZWRIYW5kbGVyLCExKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luLl9BVURJT19SRUFEWSx0aGlzLl9yZWFkeUhhbmRsZXIsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX0FVRElPX1NUQUxMRUQsdGhpcy5fc3RhbGxlZEhhbmRsZXIsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX0FVRElPX1NFRUtFRCx0aGlzLl9sb29wSGFuZGxlciwhMSksZS5yZW1vdmVFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fVElNRV9VUERBVEUsdGhpcy5fYXVkaW9TcHJpdGVFbmRIYW5kbGVyLCExKTt0cnl7ZS5jdXJyZW50VGltZT10aGlzLl9zdGFydFRpbWV9Y2F0Y2godCl7fWNyZWF0ZWpzLkhUTUxBdWRpb1RhZ1Bvb2wuc2V0SW5zdGFuY2UodGhpcy5zcmMsZSksdGhpcy5fcGxheWJhY2tSZXNvdXJjZT1udWxsfX0sdC5fYmVnaW5QbGF5aW5nPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0aGlzLl9wbGF5YmFja1Jlc291cmNlPWNyZWF0ZWpzLkhUTUxBdWRpb1RhZ1Bvb2wuZ2V0SW5zdGFuY2UodGhpcy5zcmMpLHRoaXMuQWJzdHJhY3RTb3VuZEluc3RhbmNlX19iZWdpblBsYXlpbmcoZSx0LG4saSl9LHQuX2hhbmRsZVNvdW5kUmVhZHk9ZnVuY3Rpb24oKXtpZig0IT09dGhpcy5fcGxheWJhY2tSZXNvdXJjZS5yZWFkeVN0YXRlKXt2YXIgZT10aGlzLl9wbGF5YmFja1Jlc291cmNlO3JldHVybiBlLmFkZEV2ZW50TGlzdGVuZXIoY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luLl9BVURJT19SRUFEWSx0aGlzLl9yZWFkeUhhbmRsZXIsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX0FVRElPX1NUQUxMRUQsdGhpcy5fc3RhbGxlZEhhbmRsZXIsITEpLGUucHJlbG9hZD0iYXV0byIsdm9pZCBlLmxvYWQoKX10aGlzLl91cGRhdGVWb2x1bWUoKSx0aGlzLl9wbGF5YmFja1Jlc291cmNlLmN1cnJlbnRUaW1lPS4wMDEqKHRoaXMuX3N0YXJ0VGltZSt0aGlzLl9wb3NpdGlvbiksdGhpcy5fYXVkaW9TcHJpdGVTdG9wVGltZT90aGlzLl9wbGF5YmFja1Jlc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luLl9USU1FX1VQREFURSx0aGlzLl9hdWRpb1Nwcml0ZUVuZEhhbmRsZXIsITEpOih0aGlzLl9wbGF5YmFja1Jlc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luLl9BVURJT19FTkRFRCx0aGlzLl9lbmRlZEhhbmRsZXIsITEpLDAhPXRoaXMuX2xvb3AmJih0aGlzLl9wbGF5YmFja1Jlc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luLl9BVURJT19TRUVLRUQsdGhpcy5fbG9vcEhhbmRsZXIsITEpLHRoaXMuX3BsYXliYWNrUmVzb3VyY2UubG9vcD0hMCkpLHRoaXMuX3BsYXliYWNrUmVzb3VyY2UucGxheSgpfSx0Ll9oYW5kbGVUYWdSZWFkeT1mdW5jdGlvbigpe3RoaXMuX3BsYXliYWNrUmVzb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX0FVRElPX1JFQURZLHRoaXMuX3JlYWR5SGFuZGxlciwhMSksdGhpcy5fcGxheWJhY2tSZXNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fQVVESU9fU1RBTExFRCx0aGlzLl9zdGFsbGVkSGFuZGxlciwhMSksdGhpcy5faGFuZGxlU291bmRSZWFkeSgpfSx0Ll9wYXVzZT1mdW5jdGlvbigpe3RoaXMuX3BsYXliYWNrUmVzb3VyY2UucGF1c2UoKX0sdC5fcmVzdW1lPWZ1bmN0aW9uKCl7dGhpcy5fcGxheWJhY2tSZXNvdXJjZS5wbGF5KCl9LHQuX3VwZGF0ZVZvbHVtZT1mdW5jdGlvbigpe2lmKG51bGwhPXRoaXMuX3BsYXliYWNrUmVzb3VyY2Upe3ZhciBlPXRoaXMuX211dGVkfHxjcmVhdGVqcy5Tb3VuZC5fbWFzdGVyTXV0ZT8wOnRoaXMuX3ZvbHVtZSpjcmVhdGVqcy5Tb3VuZC5fbWFzdGVyVm9sdW1lO2UhPXRoaXMuX3BsYXliYWNrUmVzb3VyY2Uudm9sdW1lJiYodGhpcy5fcGxheWJhY2tSZXNvdXJjZS52b2x1bWU9ZSl9fSx0Ll9jYWxjdWxhdGVDdXJyZW50UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gMWUzKnRoaXMuX3BsYXliYWNrUmVzb3VyY2UuY3VycmVudFRpbWUtdGhpcy5fc3RhcnRUaW1lfSx0Ll91cGRhdGVQb3NpdGlvbj1mdW5jdGlvbigpe3RoaXMuX3BsYXliYWNrUmVzb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX0FVRElPX1NFRUtFRCx0aGlzLl9sb29wSGFuZGxlciwhMSksdGhpcy5fcGxheWJhY2tSZXNvdXJjZS5hZGRFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fQVVESU9fU0VFS0VELHRoaXMuX2hhbmRsZVNldFBvc2l0aW9uU2VlaywhMSk7dHJ5e3RoaXMuX3BsYXliYWNrUmVzb3VyY2UuY3VycmVudFRpbWU9LjAwMSoodGhpcy5fcG9zaXRpb24rdGhpcy5fc3RhcnRUaW1lKX1jYXRjaChlKXt0aGlzLl9oYW5kbGVTZXRQb3NpdGlvblNlZWsobnVsbCl9fSx0Ll9oYW5kbGVTZXRQb3NpdGlvblNlZWs9ZnVuY3Rpb24oKXtudWxsIT10aGlzLl9wbGF5YmFja1Jlc291cmNlJiYodGhpcy5fcGxheWJhY2tSZXNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fQVVESU9fU0VFS0VELHRoaXMuX2hhbmRsZVNldFBvc2l0aW9uU2VlaywhMSksdGhpcy5fcGxheWJhY2tSZXNvdXJjZS5hZGRFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fQVVESU9fU0VFS0VELHRoaXMuX2xvb3BIYW5kbGVyLCExKSl9LHQuX2hhbmRsZUF1ZGlvU3ByaXRlTG9vcD1mdW5jdGlvbigpe3RoaXMuX3BsYXliYWNrUmVzb3VyY2UuY3VycmVudFRpbWU8PXRoaXMuX2F1ZGlvU3ByaXRlU3RvcFRpbWV8fCh0aGlzLl9wbGF5YmFja1Jlc291cmNlLnBhdXNlKCksMD09dGhpcy5fbG9vcD90aGlzLl9oYW5kbGVTb3VuZENvbXBsZXRlKG51bGwpOih0aGlzLl9wb3NpdGlvbj0wLHRoaXMuX2xvb3AtLSx0aGlzLl9wbGF5YmFja1Jlc291cmNlLmN1cnJlbnRUaW1lPS4wMDEqdGhpcy5fc3RhcnRUaW1lLHRoaXMuX3BhdXNlZHx8dGhpcy5fcGxheWJhY2tSZXNvdXJjZS5wbGF5KCksdGhpcy5fc2VuZEV2ZW50KCJsb29wIikpKX0sdC5faGFuZGxlTG9vcD1mdW5jdGlvbigpezA9PXRoaXMuX2xvb3AmJih0aGlzLl9wbGF5YmFja1Jlc291cmNlLmxvb3A9ITEsdGhpcy5fcGxheWJhY2tSZXNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fQVVESU9fU0VFS0VELHRoaXMuX2xvb3BIYW5kbGVyLCExKSl9LHQuX3VwZGF0ZUR1cmF0aW9uPWZ1bmN0aW9uKCl7dGhpcy5fYXVkaW9TcHJpdGVTdG9wVGltZT0uMDAxKihzdGFydFRpbWUrZHVyYXRpb24pLHRoaXMucGxheVN0YXRlPT1jcmVhdGVqcy5Tb3VuZC5QTEFZX1NVQ0NFRURFRCYmKHRoaXMuX3BsYXliYWNrUmVzb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX0FVRElPX0VOREVELHRoaXMuX2VuZGVkSGFuZGxlciwhMSksdGhpcy5fcGxheWJhY2tSZXNvdXJjZS5hZGRFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fVElNRV9VUERBVEUsdGhpcy5fYXVkaW9TcHJpdGVFbmRIYW5kbGVyLCExKSl9LGNyZWF0ZWpzLkhUTUxBdWRpb1NvdW5kSW5zdGFuY2U9Y3JlYXRlanMucHJvbW90ZShlLCJBYnN0cmFjdFNvdW5kSW5zdGFuY2UiKX0oKSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoKXt0aGlzLkFic3RyYWN0UGx1Z2luX2NvbnN0cnVjdG9yKCksdGhpcy5kZWZhdWx0TnVtQ2hhbm5lbHM9Mix0aGlzLl9jYXBhYmlsaXRpZXM9bi5fY2FwYWJpbGl0aWVzLHRoaXMuX2xvYWRlckNsYXNzPWNyZWF0ZWpzLlNvdW5kTG9hZGVyLHRoaXMuX3NvdW5kSW5zdGFuY2VDbGFzcz1jcmVhdGVqcy5IVE1MQXVkaW9Tb3VuZEluc3RhbmNlfXZhciB0PWNyZWF0ZWpzLmV4dGVuZChlLGNyZWF0ZWpzLkFic3RyYWN0UGx1Z2luKSxuPWU7bi5NQVhfSU5TVEFOQ0VTPTMwLG4uX0FVRElPX1JFQURZPSJjYW5wbGF5dGhyb3VnaCIsbi5fQVVESU9fRU5ERUQ9ImVuZGVkIixuLl9BVURJT19TRUVLRUQ9InNlZWtlZCIsbi5fQVVESU9fU1RBTExFRD0ic3RhbGxlZCIsbi5fVElNRV9VUERBVEU9InRpbWV1cGRhdGUiLG4uX2NhcGFiaWxpdGllcz1udWxsLG4uZW5hYmxlSU9TPSExLG4uaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gbi5fZ2VuZXJhdGVDYXBhYmlsaXRpZXMoKSxudWxsPT1uLl9jYXBhYmlsaXRpZXM/ITE6ITB9LG4uX2dlbmVyYXRlQ2FwYWJpbGl0aWVzPWZ1bmN0aW9uKCl7aWYobnVsbD09bi5fY2FwYWJpbGl0aWVzKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpO2lmKG51bGw9PWUuY2FuUGxheVR5cGUpcmV0dXJuIG51bGw7bi5fY2FwYWJpbGl0aWVzPXtwYW5uaW5nOiEwLHZvbHVtZTohMCx0cmFja3M6LTF9O2Zvcih2YXIgdD1jcmVhdGVqcy5Tb3VuZC5TVVBQT1JURURfRVhURU5TSU9OUyxpPWNyZWF0ZWpzLlNvdW5kLkVYVEVOU0lPTl9NQVAscj0wLHM9dC5sZW5ndGg7cz5yO3IrKyl7dmFyIG89dFtyXSxhPWlbb118fG87bi5fY2FwYWJpbGl0aWVzW29dPSJubyIhPWUuY2FuUGxheVR5cGUoImF1ZGlvLyIrbykmJiIiIT1lLmNhblBsYXlUeXBlKCJhdWRpby8iK28pfHwibm8iIT1lLmNhblBsYXlUeXBlKCJhdWRpby8iK2EpJiYiIiE9ZS5jYW5QbGF5VHlwZSgiYXVkaW8vIithKX19fSx0LnJlZ2lzdGVyPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPWNyZWF0ZWpzLkhUTUxBdWRpb1RhZ1Bvb2wuZ2V0KGUuc3JjKSxpPW51bGwscj0wO3Q+cjtyKyspaT10aGlzLl9jcmVhdGVUYWcoZS5zcmMpLG4uYWRkKGkpO3ZhciBzPXRoaXMuQWJzdHJhY3RQbHVnaW5fcmVnaXN0ZXIoZSx0KTtyZXR1cm4gcy5zZXRUYWcoaSksc30sdC5yZW1vdmVTb3VuZD1mdW5jdGlvbihlKXt0aGlzLkFic3RyYWN0UGx1Z2luX3JlbW92ZVNvdW5kKGUpLGNyZWF0ZWpzLkhUTUxBdWRpb1RhZ1Bvb2wucmVtb3ZlKGUpfSx0LmNyZWF0ZT1mdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcy5BYnN0cmFjdFBsdWdpbl9jcmVhdGUoZSx0LG4pO3JldHVybiBpLnNldFBsYXliYWNrUmVzb3VyY2UobnVsbCksaX0sdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbSFRNTEF1ZGlvUGx1Z2luXSJ9LHQuc2V0Vm9sdW1lPXQuZ2V0Vm9sdW1lPXQuc2V0TXV0ZT1udWxsLHQuX2NyZWF0ZVRhZz1mdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpO3JldHVybiB0LmF1dG9wbGF5PSExLHQucHJlbG9hZD0ibm9uZSIsdC5zcmM9ZSx0fSxjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW49Y3JlYXRlanMucHJvbW90ZShlLCJBYnN0cmFjdFBsdWdpbiIpfSgpLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjsiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbImpxdWVyeSJdLGUpOiJ1bmRlZmluZWQiIT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoImpxdWVyeSIpKTplKGpRdWVyeSl9KGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD13aW5kb3cuU2xpY2t8fHt9O3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsaSl7dmFyIHIscyxvLGE9dGhpcztpZihhLmRlZmF1bHRzPXthY2Nlc3NpYmlsaXR5OiEwLGFkYXB0aXZlSGVpZ2h0OiExLGFwcGVuZEFycm93czplKHQpLGFwcGVuZERvdHM6ZSh0KSxhcnJvd3M6ITAsYXNOYXZGb3I6bnVsbCxwcmV2QXJyb3c6JzxidXR0b24gdHlwZT0iYnV0dG9uIiBkYXRhLXJvbGU9Im5vbmUiIGNsYXNzPSJzbGljay1wcmV2IiBhcmlhLWxhYmVsPSJwcmV2aW91cyI+UHJldmlvdXM8L2J1dHRvbj4nLG5leHRBcnJvdzonPGJ1dHRvbiB0eXBlPSJidXR0b24iIGRhdGEtcm9sZT0ibm9uZSIgY2xhc3M9InNsaWNrLW5leHQiIGFyaWEtbGFiZWw9Im5leHQiPk5leHQ8L2J1dHRvbj4nLGF1dG9wbGF5OiExLGF1dG9wbGF5U3BlZWQ6M2UzLGNlbnRlck1vZGU6ITEsY2VudGVyUGFkZGluZzoiNTBweCIsY3NzRWFzZToiZWFzZSIsY3VzdG9tUGFnaW5nOmZ1bmN0aW9uKGUsdCl7cmV0dXJuJzxidXR0b24gdHlwZT0iYnV0dG9uIiBkYXRhLXJvbGU9Im5vbmUiPicrKHQrMSkrIjwvYnV0dG9uPiJ9LGRvdHM6ITEsZG90c0NsYXNzOiJzbGljay1kb3RzIixkcmFnZ2FibGU6ITAsZWFzaW5nOiJsaW5lYXIiLGVkZ2VGcmljdGlvbjouMzUsZmFkZTohMSxmb2N1c09uU2VsZWN0OiExLGluZmluaXRlOiEwLGluaXRpYWxTbGlkZTowLGxhenlMb2FkOiJvbmRlbWFuZCIsbW9iaWxlRmlyc3Q6ITEscGF1c2VPbkhvdmVyOiEwLHBhdXNlT25Eb3RzSG92ZXI6ITEscmVzcG9uZFRvOiJ3aW5kb3ciLHJlc3BvbnNpdmU6bnVsbCxydGw6ITEsc2xpZGU6IiIsc2xpZGVzVG9TaG93OjEsc2xpZGVzVG9TY3JvbGw6MSxzcGVlZDo1MDAsc3dpcGU6ITAsc3dpcGVUb1NsaWRlOiExLHRvdWNoTW92ZTohMCx0b3VjaFRocmVzaG9sZDo1LHVzZUNTUzohMCx2YXJpYWJsZVdpZHRoOiExLHZlcnRpY2FsOiExLHdhaXRGb3JBbmltYXRlOiEwfSxhLmluaXRpYWxzPXthbmltYXRpbmc6ITEsZHJhZ2dpbmc6ITEsYXV0b1BsYXlUaW1lcjpudWxsLGN1cnJlbnREaXJlY3Rpb246MCxjdXJyZW50TGVmdDpudWxsLGN1cnJlbnRTbGlkZTowLGRpcmVjdGlvbjoxLCRkb3RzOm51bGwsbGlzdFdpZHRoOm51bGwsbGlzdEhlaWdodDpudWxsLGxvYWRJbmRleDowLCRuZXh0QXJyb3c6bnVsbCwkcHJldkFycm93Om51bGwsc2xpZGVDb3VudDpudWxsLHNsaWRlV2lkdGg6bnVsbCwkc2xpZGVUcmFjazpudWxsLCRzbGlkZXM6bnVsbCxzbGlkaW5nOiExLHNsaWRlT2Zmc2V0OjAsc3dpcGVMZWZ0Om51bGwsJGxpc3Q6bnVsbCx0b3VjaE9iamVjdDp7fSx0cmFuc2Zvcm1zRW5hYmxlZDohMX0sZS5leHRlbmQoYSxhLmluaXRpYWxzKSxhLmFjdGl2ZUJyZWFrcG9pbnQ9bnVsbCxhLmFuaW1UeXBlPW51bGwsYS5hbmltUHJvcD1udWxsLGEuYnJlYWtwb2ludHM9W10sYS5icmVha3BvaW50U2V0dGluZ3M9W10sYS5jc3NUcmFuc2l0aW9ucz0hMSxhLmhpZGRlbj0iaGlkZGVuIixhLnBhdXNlZD0hMSxhLnBvc2l0aW9uUHJvcD1udWxsLGEucmVzcG9uZFRvPW51bGwsYS5zaG91bGRDbGljaz0hMCxhLiRzbGlkZXI9ZSh0KSxhLiRzbGlkZXNDYWNoZT1udWxsLGEudHJhbnNmb3JtVHlwZT1udWxsLGEudHJhbnNpdGlvblR5cGU9bnVsbCxhLnZpc2liaWxpdHlDaGFuZ2U9InZpc2liaWxpdHljaGFuZ2UiLGEud2luZG93V2lkdGg9MCxhLndpbmRvd1RpbWVyPW51bGwscj1lKHQpLmRhdGEoInNsaWNrIil8fHt9LGEub3B0aW9ucz1lLmV4dGVuZCh7fSxhLmRlZmF1bHRzLHIsaSksYS5jdXJyZW50U2xpZGU9YS5vcHRpb25zLmluaXRpYWxTbGlkZSxhLm9yaWdpbmFsU2V0dGluZ3M9YS5vcHRpb25zLHM9YS5vcHRpb25zLnJlc3BvbnNpdmV8fG51bGwscyYmcy5sZW5ndGg+LTEpe2EucmVzcG9uZFRvPWEub3B0aW9ucy5yZXNwb25kVG98fCJ3aW5kb3ciO2ZvcihvIGluIHMpcy5oYXNPd25Qcm9wZXJ0eShvKSYmKGEuYnJlYWtwb2ludHMucHVzaChzW29dLmJyZWFrcG9pbnQpLGEuYnJlYWtwb2ludFNldHRpbmdzW3Nbb10uYnJlYWtwb2ludF09c1tvXS5zZXR0aW5ncyk7YS5icmVha3BvaW50cy5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGEub3B0aW9ucy5tb2JpbGVGaXJzdD09PSEwP2UtdDp0LWV9KX0idW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50Lm1vekhpZGRlbj8oYS5oaWRkZW49Im1vekhpZGRlbiIsYS52aXNpYmlsaXR5Q2hhbmdlPSJtb3p2aXNpYmlsaXR5Y2hhbmdlIik6InVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudC5tc0hpZGRlbj8oYS5oaWRkZW49Im1zSGlkZGVuIixhLnZpc2liaWxpdHlDaGFuZ2U9Im1zdmlzaWJpbGl0eWNoYW5nZSIpOiJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQud2Via2l0SGlkZGVuJiYoYS5oaWRkZW49IndlYmtpdEhpZGRlbiIsYS52aXNpYmlsaXR5Q2hhbmdlPSJ3ZWJraXR2aXNpYmlsaXR5Y2hhbmdlIiksYS5hdXRvUGxheT1lLnByb3h5KGEuYXV0b1BsYXksYSksYS5hdXRvUGxheUNsZWFyPWUucHJveHkoYS5hdXRvUGxheUNsZWFyLGEpLGEuY2hhbmdlU2xpZGU9ZS5wcm94eShhLmNoYW5nZVNsaWRlLGEpLGEuY2xpY2tIYW5kbGVyPWUucHJveHkoYS5jbGlja0hhbmRsZXIsYSksYS5zZWxlY3RIYW5kbGVyPWUucHJveHkoYS5zZWxlY3RIYW5kbGVyLGEpLGEuc2V0UG9zaXRpb249ZS5wcm94eShhLnNldFBvc2l0aW9uLGEpLGEuc3dpcGVIYW5kbGVyPWUucHJveHkoYS5zd2lwZUhhbmRsZXIsYSksYS5kcmFnSGFuZGxlcj1lLnByb3h5KGEuZHJhZ0hhbmRsZXIsYSksYS5rZXlIYW5kbGVyPWUucHJveHkoYS5rZXlIYW5kbGVyLGEpLGEuYXV0b1BsYXlJdGVyYXRvcj1lLnByb3h5KGEuYXV0b1BsYXlJdGVyYXRvcixhKSxhLmluc3RhbmNlVWlkPW4rKyxhLmh0bWxFeHByPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKikkLyxhLmluaXQoKSxhLmNoZWNrUmVzcG9uc2l2ZSghMCl9dmFyIG49MDtyZXR1cm4gdH0oKSx0LnByb3RvdHlwZS5hZGRTbGlkZT10LnByb3RvdHlwZS5zbGlja0FkZD1mdW5jdGlvbih0LG4saSl7dmFyIHI9dGhpcztpZigiYm9vbGVhbiI9PXR5cGVvZiBuKWk9bixuPW51bGw7ZWxzZSBpZigwPm58fG4+PXIuc2xpZGVDb3VudClyZXR1cm4hMTtyLnVubG9hZCgpLCJudW1iZXIiPT10eXBlb2Ygbj8wPT09biYmMD09PXIuJHNsaWRlcy5sZW5ndGg/ZSh0KS5hcHBlbmRUbyhyLiRzbGlkZVRyYWNrKTppP2UodCkuaW5zZXJ0QmVmb3JlKHIuJHNsaWRlcy5lcShuKSk6ZSh0KS5pbnNlcnRBZnRlcihyLiRzbGlkZXMuZXEobikpOmk9PT0hMD9lKHQpLnByZXBlbmRUbyhyLiRzbGlkZVRyYWNrKTplKHQpLmFwcGVuZFRvKHIuJHNsaWRlVHJhY2spLHIuJHNsaWRlcz1yLiRzbGlkZVRyYWNrLmNoaWxkcmVuKHRoaXMub3B0aW9ucy5zbGlkZSksci4kc2xpZGVUcmFjay5jaGlsZHJlbih0aGlzLm9wdGlvbnMuc2xpZGUpLmRldGFjaCgpLHIuJHNsaWRlVHJhY2suYXBwZW5kKHIuJHNsaWRlcyksci4kc2xpZGVzLmVhY2goZnVuY3Rpb24odCxuKXtlKG4pLmF0dHIoImRhdGEtc2xpY2staW5kZXgiLHQpfSksci4kc2xpZGVzQ2FjaGU9ci4kc2xpZGVzLHIucmVpbml0KCl9LHQucHJvdG90eXBlLmFuaW1hdGVIZWlnaHQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKDE9PT1lLm9wdGlvbnMuc2xpZGVzVG9TaG93JiZlLm9wdGlvbnMuYWRhcHRpdmVIZWlnaHQ9PT0hMCYmZS5vcHRpb25zLnZlcnRpY2FsPT09ITEpe3ZhciB0PWUuJHNsaWRlcy5lcShlLmN1cnJlbnRTbGlkZSkub3V0ZXJIZWlnaHQoITApO2UuJGxpc3QuYW5pbWF0ZSh7aGVpZ2h0OnR9LGUub3B0aW9ucy5zcGVlZCl9fSx0LnByb3RvdHlwZS5hbmltYXRlU2xpZGU9ZnVuY3Rpb24odCxuKXt2YXIgaT17fSxyPXRoaXM7ci5hbmltYXRlSGVpZ2h0KCksci5vcHRpb25zLnJ0bD09PSEwJiZyLm9wdGlvbnMudmVydGljYWw9PT0hMSYmKHQ9LXQpLHIudHJhbnNmb3Jtc0VuYWJsZWQ9PT0hMT9yLm9wdGlvbnMudmVydGljYWw9PT0hMT9yLiRzbGlkZVRyYWNrLmFuaW1hdGUoe2xlZnQ6dH0sci5vcHRpb25zLnNwZWVkLHIub3B0aW9ucy5lYXNpbmcsbik6ci4kc2xpZGVUcmFjay5hbmltYXRlKHt0b3A6dH0sci5vcHRpb25zLnNwZWVkLHIub3B0aW9ucy5lYXNpbmcsbik6ci5jc3NUcmFuc2l0aW9ucz09PSExPyhyLm9wdGlvbnMucnRsPT09ITAmJihyLmN1cnJlbnRMZWZ0PS1yLmN1cnJlbnRMZWZ0KSxlKHthbmltU3RhcnQ6ci5jdXJyZW50TGVmdH0pLmFuaW1hdGUoe2FuaW1TdGFydDp0fSx7ZHVyYXRpb246ci5vcHRpb25zLnNwZWVkLGVhc2luZzpyLm9wdGlvbnMuZWFzaW5nLHN0ZXA6ZnVuY3Rpb24oZSl7ZT1NYXRoLmNlaWwoZSksci5vcHRpb25zLnZlcnRpY2FsPT09ITE/KGlbci5hbmltVHlwZV09InRyYW5zbGF0ZSgiK2UrInB4LCAwcHgpIixyLiRzbGlkZVRyYWNrLmNzcyhpKSk6KGlbci5hbmltVHlwZV09InRyYW5zbGF0ZSgwcHgsIitlKyJweCkiLHIuJHNsaWRlVHJhY2suY3NzKGkpKX0sY29tcGxldGU6ZnVuY3Rpb24oKXtuJiZuLmNhbGwoKX19KSk6KHIuYXBwbHlUcmFuc2l0aW9uKCksdD1NYXRoLmNlaWwodCksci5vcHRpb25zLnZlcnRpY2FsPT09ITE/aVtyLmFuaW1UeXBlXT0idHJhbnNsYXRlM2QoIit0KyJweCwgMHB4LCAwcHgpIjppW3IuYW5pbVR5cGVdPSJ0cmFuc2xhdGUzZCgwcHgsIit0KyJweCwgMHB4KSIsci4kc2xpZGVUcmFjay5jc3MoaSksbiYmc2V0VGltZW91dChmdW5jdGlvbigpe3IuZGlzYWJsZVRyYW5zaXRpb24oKSxuLmNhbGwoKX0sci5vcHRpb25zLnNwZWVkKSl9LHQucHJvdG90eXBlLmFzTmF2Rm9yPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1udWxsIT09bi5vcHRpb25zLmFzTmF2Rm9yP2Uobi5vcHRpb25zLmFzTmF2Rm9yKS5zbGljaygiZ2V0U2xpY2siKTpudWxsO251bGwhPT1pJiZpLnNsaWRlSGFuZGxlcih0LCEwKX0sdC5wcm90b3R5cGUuYXBwbHlUcmFuc2l0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj17fTt0Lm9wdGlvbnMuZmFkZT09PSExP25bdC50cmFuc2l0aW9uVHlwZV09dC50cmFuc2Zvcm1UeXBlKyIgIit0Lm9wdGlvbnMuc3BlZWQrIm1zICIrdC5vcHRpb25zLmNzc0Vhc2U6blt0LnRyYW5zaXRpb25UeXBlXT0ib3BhY2l0eSAiK3Qub3B0aW9ucy5zcGVlZCsibXMgIit0Lm9wdGlvbnMuY3NzRWFzZSx0Lm9wdGlvbnMuZmFkZT09PSExP3QuJHNsaWRlVHJhY2suY3NzKG4pOnQuJHNsaWRlcy5lcShlKS5jc3Mobil9LHQucHJvdG90eXBlLmF1dG9QbGF5PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmF1dG9QbGF5VGltZXImJmNsZWFySW50ZXJ2YWwoZS5hdXRvUGxheVRpbWVyKSxlLnNsaWRlQ291bnQ+ZS5vcHRpb25zLnNsaWRlc1RvU2hvdyYmZS5wYXVzZWQhPT0hMCYmKGUuYXV0b1BsYXlUaW1lcj1zZXRJbnRlcnZhbChlLmF1dG9QbGF5SXRlcmF0b3IsZS5vcHRpb25zLmF1dG9wbGF5U3BlZWQpKX0sdC5wcm90b3R5cGUuYXV0b1BsYXlDbGVhcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5hdXRvUGxheVRpbWVyJiZjbGVhckludGVydmFsKGUuYXV0b1BsYXlUaW1lcil9LHQucHJvdG90eXBlLmF1dG9QbGF5SXRlcmF0b3I9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uub3B0aW9ucy5pbmZpbml0ZT09PSExPzE9PT1lLmRpcmVjdGlvbj8oZS5jdXJyZW50U2xpZGUrMT09PWUuc2xpZGVDb3VudC0xJiYoZS5kaXJlY3Rpb249MCksZS5zbGlkZUhhbmRsZXIoZS5jdXJyZW50U2xpZGUrZS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKSk6KGUuY3VycmVudFNsaWRlLTE9PT0wJiYoZS5kaXJlY3Rpb249MSksZS5zbGlkZUhhbmRsZXIoZS5jdXJyZW50U2xpZGUtZS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKSk6ZS5zbGlkZUhhbmRsZXIoZS5jdXJyZW50U2xpZGUrZS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKX0sdC5wcm90b3R5cGUuYnVpbGRBcnJvd3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3Qub3B0aW9ucy5hcnJvd3M9PT0hMCYmdC5zbGlkZUNvdW50PnQub3B0aW9ucy5zbGlkZXNUb1Nob3cmJih0LiRwcmV2QXJyb3c9ZSh0Lm9wdGlvbnMucHJldkFycm93KSx0LiRuZXh0QXJyb3c9ZSh0Lm9wdGlvbnMubmV4dEFycm93KSx0Lmh0bWxFeHByLnRlc3QodC5vcHRpb25zLnByZXZBcnJvdykmJnQuJHByZXZBcnJvdy5hcHBlbmRUbyh0Lm9wdGlvbnMuYXBwZW5kQXJyb3dzKSx0Lmh0bWxFeHByLnRlc3QodC5vcHRpb25zLm5leHRBcnJvdykmJnQuJG5leHRBcnJvdy5hcHBlbmRUbyh0Lm9wdGlvbnMuYXBwZW5kQXJyb3dzKSx0Lm9wdGlvbnMuaW5maW5pdGUhPT0hMCYmdC4kcHJldkFycm93LmFkZENsYXNzKCJzbGljay1kaXNhYmxlZCIpKX0sdC5wcm90b3R5cGUuYnVpbGREb3RzPWZ1bmN0aW9uKCl7dmFyIHQsbixpPXRoaXM7aWYoaS5vcHRpb25zLmRvdHM9PT0hMCYmaS5zbGlkZUNvdW50Pmkub3B0aW9ucy5zbGlkZXNUb1Nob3cpe2ZvcihuPSc8dWwgY2xhc3M9IicraS5vcHRpb25zLmRvdHNDbGFzcysnIj4nLHQ9MDt0PD1pLmdldERvdENvdW50KCk7dCs9MSluKz0iPGxpPiIraS5vcHRpb25zLmN1c3RvbVBhZ2luZy5jYWxsKHRoaXMsaSx0KSsiPC9saT4iO24rPSI8L3VsPiIsaS4kZG90cz1lKG4pLmFwcGVuZFRvKGkub3B0aW9ucy5hcHBlbmREb3RzKSxpLiRkb3RzLmZpbmQoImxpIikuZmlyc3QoKS5hZGRDbGFzcygic2xpY2stYWN0aXZlIikuYXR0cigiYXJpYS1oaWRkZW4iLCJmYWxzZSIpfX0sdC5wcm90b3R5cGUuYnVpbGRPdXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuJHNsaWRlcz10LiRzbGlkZXIuY2hpbGRyZW4odC5vcHRpb25zLnNsaWRlKyI6bm90KC5zbGljay1jbG9uZWQpIikuYWRkQ2xhc3MoInNsaWNrLXNsaWRlIiksdC5zbGlkZUNvdW50PXQuJHNsaWRlcy5sZW5ndGgsdC4kc2xpZGVzLmVhY2goZnVuY3Rpb24odCxuKXtlKG4pLmF0dHIoImRhdGEtc2xpY2staW5kZXgiLHQpfSksdC4kc2xpZGVzQ2FjaGU9dC4kc2xpZGVzLHQuJHNsaWRlci5hZGRDbGFzcygic2xpY2stc2xpZGVyIiksdC4kc2xpZGVUcmFjaz0wPT09dC5zbGlkZUNvdW50P2UoJzxkaXYgY2xhc3M9InNsaWNrLXRyYWNrIi8+JykuYXBwZW5kVG8odC4kc2xpZGVyKTp0LiRzbGlkZXMud3JhcEFsbCgnPGRpdiBjbGFzcz0ic2xpY2stdHJhY2siLz4nKS5wYXJlbnQoKSx0LiRsaXN0PXQuJHNsaWRlVHJhY2sud3JhcCgnPGRpdiBhcmlhLWxpdmU9InBvbGl0ZSIgY2xhc3M9InNsaWNrLWxpc3QiLz4nKS5wYXJlbnQoKSx0LiRzbGlkZVRyYWNrLmNzcygib3BhY2l0eSIsMCksKHQub3B0aW9ucy5jZW50ZXJNb2RlPT09ITB8fHQub3B0aW9ucy5zd2lwZVRvU2xpZGU9PT0hMCkmJih0Lm9wdGlvbnMuc2xpZGVzVG9TY3JvbGw9MSksZSgiaW1nW2RhdGEtbGF6eV0iLHQuJHNsaWRlcikubm90KCJbc3JjXSIpLmFkZENsYXNzKCJzbGljay1sb2FkaW5nIiksdC5zZXR1cEluZmluaXRlKCksdC5idWlsZEFycm93cygpLHQuYnVpbGREb3RzKCksdC51cGRhdGVEb3RzKCksdC5vcHRpb25zLmFjY2Vzc2liaWxpdHk9PT0hMCYmdC4kbGlzdC5wcm9wKCJ0YWJJbmRleCIsMCksdC5zZXRTbGlkZUNsYXNzZXMoIm51bWJlciI9PXR5cGVvZiB0aGlzLmN1cnJlbnRTbGlkZT90aGlzLmN1cnJlbnRTbGlkZTowKSx0Lm9wdGlvbnMuZHJhZ2dhYmxlPT09ITAmJnQuJGxpc3QuYWRkQ2xhc3MoImRyYWdnYWJsZSIpfSx0LnByb3RvdHlwZS5jaGVja1Jlc3BvbnNpdmU9ZnVuY3Rpb24odCl7dmFyIG4saSxyLHM9dGhpcyxvPXMuJHNsaWRlci53aWR0aCgpLGE9d2luZG93LmlubmVyV2lkdGh8fGUod2luZG93KS53aWR0aCgpO2lmKCJ3aW5kb3ciPT09cy5yZXNwb25kVG8/cj1hOiJzbGlkZXIiPT09cy5yZXNwb25kVG8/cj1vOiJtaW4iPT09cy5yZXNwb25kVG8mJihyPU1hdGgubWluKGEsbykpLHMub3JpZ2luYWxTZXR0aW5ncy5yZXNwb25zaXZlJiZzLm9yaWdpbmFsU2V0dGluZ3MucmVzcG9uc2l2ZS5sZW5ndGg+LTEmJm51bGwhPT1zLm9yaWdpbmFsU2V0dGluZ3MucmVzcG9uc2l2ZSl7aT1udWxsO2ZvcihuIGluIHMuYnJlYWtwb2ludHMpcy5icmVha3BvaW50cy5oYXNPd25Qcm9wZXJ0eShuKSYmKHMub3JpZ2luYWxTZXR0aW5ncy5tb2JpbGVGaXJzdD09PSExP3I8cy5icmVha3BvaW50c1tuXSYmKGk9cy5icmVha3BvaW50c1tuXSk6cj5zLmJyZWFrcG9pbnRzW25dJiYoaT1zLmJyZWFrcG9pbnRzW25dKSk7bnVsbCE9PWk/bnVsbCE9PXMuYWN0aXZlQnJlYWtwb2ludD9pIT09cy5hY3RpdmVCcmVha3BvaW50JiYocy5hY3RpdmVCcmVha3BvaW50PWksInVuc2xpY2siPT09cy5icmVha3BvaW50U2V0dGluZ3NbaV0/cy51bnNsaWNrKCk6KHMub3B0aW9ucz1lLmV4dGVuZCh7fSxzLm9yaWdpbmFsU2V0dGluZ3Mscy5icmVha3BvaW50U2V0dGluZ3NbaV0pLHQ9PT0hMCYmKHMuY3VycmVudFNsaWRlPXMub3B0aW9ucy5pbml0aWFsU2xpZGUpLHMucmVmcmVzaCgpKSk6KHMuYWN0aXZlQnJlYWtwb2ludD1pLCJ1bnNsaWNrIj09PXMuYnJlYWtwb2ludFNldHRpbmdzW2ldP3MudW5zbGljaygpOihzLm9wdGlvbnM9ZS5leHRlbmQoe30scy5vcmlnaW5hbFNldHRpbmdzLHMuYnJlYWtwb2ludFNldHRpbmdzW2ldKSx0PT09ITAmJihzLmN1cnJlbnRTbGlkZT1zLm9wdGlvbnMuaW5pdGlhbFNsaWRlKSxzLnJlZnJlc2goKSkpOm51bGwhPT1zLmFjdGl2ZUJyZWFrcG9pbnQmJihzLmFjdGl2ZUJyZWFrcG9pbnQ9bnVsbCxzLm9wdGlvbnM9cy5vcmlnaW5hbFNldHRpbmdzLHQ9PT0hMCYmKHMuY3VycmVudFNsaWRlPXMub3B0aW9ucy5pbml0aWFsU2xpZGUpLHMucmVmcmVzaCgpKX19LHQucHJvdG90eXBlLmNoYW5nZVNsaWRlPWZ1bmN0aW9uKHQsbil7dmFyIGkscixzLG89dGhpcyxhPWUodC50YXJnZXQpO3N3aXRjaChhLmlzKCJhIikmJnQucHJldmVudERlZmF1bHQoKSxzPW8uc2xpZGVDb3VudCVvLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwhPT0wLGk9cz8wOihvLnNsaWRlQ291bnQtby5jdXJyZW50U2xpZGUpJW8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCx0LmRhdGEubWVzc2FnZSl7Y2FzZSJwcmV2aW91cyI6cj0wPT09aT9vLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGw6by5vcHRpb25zLnNsaWRlc1RvU2hvdy1pLG8uc2xpZGVDb3VudD5vLm9wdGlvbnMuc2xpZGVzVG9TaG93JiZvLnNsaWRlSGFuZGxlcihvLmN1cnJlbnRTbGlkZS1yLCExLG4pO2JyZWFrO2Nhc2UibmV4dCI6cj0wPT09aT9vLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGw6aSxvLnNsaWRlQ291bnQ+by5vcHRpb25zLnNsaWRlc1RvU2hvdyYmby5zbGlkZUhhbmRsZXIoby5jdXJyZW50U2xpZGUrciwhMSxuKTticmVhaztjYXNlImluZGV4Ijp2YXIgbD0wPT09dC5kYXRhLmluZGV4PzA6dC5kYXRhLmluZGV4fHxlKHQudGFyZ2V0KS5wYXJlbnQoKS5pbmRleCgpKm8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtvLnNsaWRlSGFuZGxlcihvLmNoZWNrTmF2aWdhYmxlKGwpLCExLG4pO2JyZWFrO2RlZmF1bHQ6cmV0dXJufX0sdC5wcm90b3R5cGUuY2hlY2tOYXZpZ2FibGU9ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXM7aWYodD1pLmdldE5hdmlnYWJsZUluZGV4ZXMoKSxuPTAsZT50W3QubGVuZ3RoLTFdKWU9dFt0Lmxlbmd0aC0xXTtlbHNlIGZvcih2YXIgciBpbiB0KXtpZihlPHRbcl0pe2U9bjticmVha31uPXRbcl19cmV0dXJuIGV9LHQucHJvdG90eXBlLmNsaWNrSGFuZGxlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3Quc2hvdWxkQ2xpY2s9PT0hMSYmKGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS5zdG9wUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCkpfSx0LnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LmF1dG9QbGF5Q2xlYXIoKSx0LnRvdWNoT2JqZWN0PXt9LGUoIi5zbGljay1jbG9uZWQiLHQuJHNsaWRlcikucmVtb3ZlKCksdC4kZG90cyYmdC4kZG90cy5yZW1vdmUoKSx0LiRwcmV2QXJyb3cmJiJvYmplY3QiIT10eXBlb2YgdC5vcHRpb25zLnByZXZBcnJvdyYmdC4kcHJldkFycm93LnJlbW92ZSgpLHQuJG5leHRBcnJvdyYmIm9iamVjdCIhPXR5cGVvZiB0Lm9wdGlvbnMubmV4dEFycm93JiZ0LiRuZXh0QXJyb3cucmVtb3ZlKCksdC4kc2xpZGVzLnJlbW92ZUNsYXNzKCJzbGljay1zbGlkZSBzbGljay1hY3RpdmUgc2xpY2stY2VudGVyIHNsaWNrLXZpc2libGUiKS5hdHRyKCJhcmlhLWhpZGRlbiIsInRydWUiKS5yZW1vdmVBdHRyKCJkYXRhLXNsaWNrLWluZGV4IikuY3NzKHtwb3NpdGlvbjoiIixsZWZ0OiIiLHRvcDoiIix6SW5kZXg6IiIsb3BhY2l0eToiIix3aWR0aDoiIn0pLHQuJHNsaWRlci5yZW1vdmVDbGFzcygic2xpY2stc2xpZGVyIiksdC4kc2xpZGVyLnJlbW92ZUNsYXNzKCJzbGljay1pbml0aWFsaXplZCIpLHQuJGxpc3Qub2ZmKCIuc2xpY2siKSxlKHdpbmRvdykub2ZmKCIuc2xpY2stIit0Lmluc3RhbmNlVWlkKSxlKGRvY3VtZW50KS5vZmYoIi5zbGljay0iK3QuaW5zdGFuY2VVaWQpLHQuJHNsaWRlci5odG1sKHQuJHNsaWRlcyl9LHQucHJvdG90eXBlLmRpc2FibGVUcmFuc2l0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj17fTtuW3QudHJhbnNpdGlvblR5cGVdPSIiLHQub3B0aW9ucy5mYWRlPT09ITE/dC4kc2xpZGVUcmFjay5jc3Mobik6dC4kc2xpZGVzLmVxKGUpLmNzcyhuKX0sdC5wcm90b3R5cGUuZmFkZVNsaWRlPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztuLmNzc1RyYW5zaXRpb25zPT09ITE/KG4uJHNsaWRlcy5lcShlKS5jc3Moe3pJbmRleDoxZTN9KSxuLiRzbGlkZXMuZXEoZSkuYW5pbWF0ZSh7b3BhY2l0eToxfSxuLm9wdGlvbnMuc3BlZWQsbi5vcHRpb25zLmVhc2luZyx0KSk6KG4uYXBwbHlUcmFuc2l0aW9uKGUpLG4uJHNsaWRlcy5lcShlKS5jc3Moe29wYWNpdHk6MSx6SW5kZXg6MWUzfSksdCYmc2V0VGltZW91dChmdW5jdGlvbigpe24uZGlzYWJsZVRyYW5zaXRpb24oZSksdC5jYWxsKCl9LG4ub3B0aW9ucy5zcGVlZCkpfSx0LnByb3RvdHlwZS5maWx0ZXJTbGlkZXM9dC5wcm90b3R5cGUuc2xpY2tGaWx0ZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztudWxsIT09ZSYmKHQudW5sb2FkKCksdC4kc2xpZGVUcmFjay5jaGlsZHJlbih0aGlzLm9wdGlvbnMuc2xpZGUpLmRldGFjaCgpLHQuJHNsaWRlc0NhY2hlLmZpbHRlcihlKS5hcHBlbmRUbyh0LiRzbGlkZVRyYWNrKSx0LnJlaW5pdCgpKX0sdC5wcm90b3R5cGUuZ2V0Q3VycmVudD10LnByb3RvdHlwZS5zbGlja0N1cnJlbnRTbGlkZT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGUuY3VycmVudFNsaWRlfSx0LnByb3RvdHlwZS5nZXREb3RDb3VudD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD0wLG49MCxpPTA7aWYoZS5vcHRpb25zLmluZmluaXRlPT09ITApaT1NYXRoLmNlaWwoZS5zbGlkZUNvdW50L2Uub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCk7ZWxzZSBpZihlLm9wdGlvbnMuY2VudGVyTW9kZT09PSEwKWk9ZS5zbGlkZUNvdW50O2Vsc2UgZm9yKDt0PGUuc2xpZGVDb3VudDspKytpLHQ9bitlLm9wdGlvbnMuc2xpZGVzVG9TaG93LG4rPWUub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDw9ZS5vcHRpb25zLnNsaWRlc1RvU2hvdz9lLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGw6ZS5vcHRpb25zLnNsaWRlc1RvU2hvdztyZXR1cm4gaS0xfSx0LnByb3RvdHlwZS5nZXRMZWZ0PWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXRoaXMscz0wO3JldHVybiByLnNsaWRlT2Zmc2V0PTAsbj1yLiRzbGlkZXMuZmlyc3QoKS5vdXRlckhlaWdodCgpLHIub3B0aW9ucy5pbmZpbml0ZT09PSEwPyhyLnNsaWRlQ291bnQ+ci5vcHRpb25zLnNsaWRlc1RvU2hvdyYmKHIuc2xpZGVPZmZzZXQ9ci5zbGlkZVdpZHRoKnIub3B0aW9ucy5zbGlkZXNUb1Nob3cqLTEscz1uKnIub3B0aW9ucy5zbGlkZXNUb1Nob3cqLTEpLHIuc2xpZGVDb3VudCVyLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwhPT0wJiZlK3Iub3B0aW9ucy5zbGlkZXNUb1Njcm9sbD5yLnNsaWRlQ291bnQmJnIuc2xpZGVDb3VudD5yLm9wdGlvbnMuc2xpZGVzVG9TaG93JiYoZT5yLnNsaWRlQ291bnQ/KHIuc2xpZGVPZmZzZXQ9KHIub3B0aW9ucy5zbGlkZXNUb1Nob3ctKGUtci5zbGlkZUNvdW50KSkqci5zbGlkZVdpZHRoKi0xLHM9KHIub3B0aW9ucy5zbGlkZXNUb1Nob3ctKGUtci5zbGlkZUNvdW50KSkqbiotMSk6KHIuc2xpZGVPZmZzZXQ9ci5zbGlkZUNvdW50JXIub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCpyLnNsaWRlV2lkdGgqLTEscz1yLnNsaWRlQ291bnQlci5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKm4qLTEpKSk6ZStyLm9wdGlvbnMuc2xpZGVzVG9TaG93PnIuc2xpZGVDb3VudCYmKHIuc2xpZGVPZmZzZXQ9KGUrci5vcHRpb25zLnNsaWRlc1RvU2hvdy1yLnNsaWRlQ291bnQpKnIuc2xpZGVXaWR0aCxzPShlK3Iub3B0aW9ucy5zbGlkZXNUb1Nob3ctci5zbGlkZUNvdW50KSpuKSxyLnNsaWRlQ291bnQ8PXIub3B0aW9ucy5zbGlkZXNUb1Nob3cmJihyLnNsaWRlT2Zmc2V0PTAscz0wKSxyLm9wdGlvbnMuY2VudGVyTW9kZT09PSEwJiZyLm9wdGlvbnMuaW5maW5pdGU9PT0hMD9yLnNsaWRlT2Zmc2V0Kz1yLnNsaWRlV2lkdGgqTWF0aC5mbG9vcihyLm9wdGlvbnMuc2xpZGVzVG9TaG93LzIpLXIuc2xpZGVXaWR0aDpyLm9wdGlvbnMuY2VudGVyTW9kZT09PSEwJiYoci5zbGlkZU9mZnNldD0wLHIuc2xpZGVPZmZzZXQrPXIuc2xpZGVXaWR0aCpNYXRoLmZsb29yKHIub3B0aW9ucy5zbGlkZXNUb1Nob3cvMikpLHQ9ci5vcHRpb25zLnZlcnRpY2FsPT09ITE/ZSpyLnNsaWRlV2lkdGgqLTErci5zbGlkZU9mZnNldDplKm4qLTErcyxyLm9wdGlvbnMudmFyaWFibGVXaWR0aD09PSEwJiYoaT1yLnNsaWRlQ291bnQ8PXIub3B0aW9ucy5zbGlkZXNUb1Nob3d8fHIub3B0aW9ucy5pbmZpbml0ZT09PSExP3IuJHNsaWRlVHJhY2suY2hpbGRyZW4oIi5zbGljay1zbGlkZSIpLmVxKGUpOnIuJHNsaWRlVHJhY2suY2hpbGRyZW4oIi5zbGljay1zbGlkZSIpLmVxKGUrci5vcHRpb25zLnNsaWRlc1RvU2hvdyksdD1pWzBdPy0xKmlbMF0ub2Zmc2V0TGVmdDowLHIub3B0aW9ucy5jZW50ZXJNb2RlPT09ITAmJihpPXIub3B0aW9ucy5pbmZpbml0ZT09PSExP3IuJHNsaWRlVHJhY2suY2hpbGRyZW4oIi5zbGljay1zbGlkZSIpLmVxKGUpOnIuJHNsaWRlVHJhY2suY2hpbGRyZW4oIi5zbGljay1zbGlkZSIpLmVxKGUrci5vcHRpb25zLnNsaWRlc1RvU2hvdysxKSx0PWlbMF0/LTEqaVswXS5vZmZzZXRMZWZ0OjAsdCs9KHIuJGxpc3Qud2lkdGgoKS1pLm91dGVyV2lkdGgoKSkvMikpLHR9LHQucHJvdG90eXBlLmdldE9wdGlvbj10LnByb3RvdHlwZS5zbGlja0dldE9wdGlvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0Lm9wdGlvbnNbZV19LHQucHJvdG90eXBlLmdldE5hdmlnYWJsZUluZGV4ZXM9ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj0wLGk9MCxyPVtdO2Zvcih0Lm9wdGlvbnMuaW5maW5pdGU9PT0hMT8oZT10LnNsaWRlQ291bnQtdC5vcHRpb25zLnNsaWRlc1RvU2hvdysxLHQub3B0aW9ucy5jZW50ZXJNb2RlPT09ITAmJihlPXQuc2xpZGVDb3VudCkpOihuPS0xKnQuc2xpZGVDb3VudCxpPS0xKnQuc2xpZGVDb3VudCxlPTIqdC5zbGlkZUNvdW50KTtlPm47KXIucHVzaChuKSxuPWkrdC5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsLGkrPXQub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDw9dC5vcHRpb25zLnNsaWRlc1RvU2hvdz90Lm9wdGlvbnMuc2xpZGVzVG9TY3JvbGw6dC5vcHRpb25zLnNsaWRlc1RvU2hvdztyZXR1cm4gcn0sdC5wcm90b3R5cGUuZ2V0U2xpY2s9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUuZ2V0U2xpZGVDb3VudD1mdW5jdGlvbigpe3ZhciB0LG4saSxyPXRoaXM7cmV0dXJuIGk9ci5vcHRpb25zLmNlbnRlck1vZGU9PT0hMD9yLnNsaWRlV2lkdGgqTWF0aC5mbG9vcihyLm9wdGlvbnMuc2xpZGVzVG9TaG93LzIpOjAsci5vcHRpb25zLnN3aXBlVG9TbGlkZT09PSEwPyhyLiRzbGlkZVRyYWNrLmZpbmQoIi5zbGljay1zbGlkZSIpLmVhY2goZnVuY3Rpb24odCxzKXtyZXR1cm4gcy5vZmZzZXRMZWZ0LWkrZShzKS5vdXRlcldpZHRoKCkvMj4tMSpyLnN3aXBlTGVmdD8obj1zLCExKTp2b2lkIDB9KSx0PU1hdGguYWJzKGUobikuYXR0cigiZGF0YS1zbGljay1pbmRleCIpLXIuY3VycmVudFNsaWRlKXx8MSk6ci5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsfSx0LnByb3RvdHlwZS5nb1RvPXQucHJvdG90eXBlLnNsaWNrR29Ubz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7bi5jaGFuZ2VTbGlkZSh7ZGF0YTp7bWVzc2FnZToiaW5kZXgiLGluZGV4OnBhcnNlSW50KGUpfX0sdCl9LHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2UodC4kc2xpZGVyKS5oYXNDbGFzcygic2xpY2staW5pdGlhbGl6ZWQiKXx8KGUodC4kc2xpZGVyKS5hZGRDbGFzcygic2xpY2staW5pdGlhbGl6ZWQiKSx0LmJ1aWxkT3V0KCksdC5zZXRQcm9wcygpLHQuc3RhcnRMb2FkKCksdC5sb2FkU2xpZGVyKCksdC5pbml0aWFsaXplRXZlbnRzKCksdC51cGRhdGVBcnJvd3MoKSx0LnVwZGF0ZURvdHMoKSksdC4kc2xpZGVyLnRyaWdnZXIoImluaXQiLFt0XSl9LHQucHJvdG90eXBlLmluaXRBcnJvd0V2ZW50cz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5vcHRpb25zLmFycm93cz09PSEwJiZlLnNsaWRlQ291bnQ+ZS5vcHRpb25zLnNsaWRlc1RvU2hvdyYmKGUuJHByZXZBcnJvdy5vbigiY2xpY2suc2xpY2siLHttZXNzYWdlOiJwcmV2aW91cyJ9LGUuY2hhbmdlU2xpZGUpLGUuJG5leHRBcnJvdy5vbigiY2xpY2suc2xpY2siLHttZXNzYWdlOiJuZXh0In0sZS5jaGFuZ2VTbGlkZSkpfSx0LnByb3RvdHlwZS5pbml0RG90RXZlbnRzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lm9wdGlvbnMuZG90cz09PSEwJiZ0LnNsaWRlQ291bnQ+dC5vcHRpb25zLnNsaWRlc1RvU2hvdyYmZSgibGkiLHQuJGRvdHMpLm9uKCJjbGljay5zbGljayIse21lc3NhZ2U6ImluZGV4In0sdC5jaGFuZ2VTbGlkZSksdC5vcHRpb25zLmRvdHM9PT0hMCYmdC5vcHRpb25zLnBhdXNlT25Eb3RzSG92ZXI9PT0hMCYmdC5vcHRpb25zLmF1dG9wbGF5PT09ITAmJmUoImxpIix0LiRkb3RzKS5vbigibW91c2VlbnRlci5zbGljayIsZnVuY3Rpb24oKXt0LnBhdXNlZD0hMCx0LmF1dG9QbGF5Q2xlYXIoKX0pLm9uKCJtb3VzZWxlYXZlLnNsaWNrIixmdW5jdGlvbigpe3QucGF1c2VkPSExLHQuYXV0b1BsYXkoKX0pfSx0LnByb3RvdHlwZS5pbml0aWFsaXplRXZlbnRzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LmluaXRBcnJvd0V2ZW50cygpLHQuaW5pdERvdEV2ZW50cygpLHQuJGxpc3Qub24oInRvdWNoc3RhcnQuc2xpY2sgbW91c2Vkb3duLnNsaWNrIix7YWN0aW9uOiJzdGFydCJ9LHQuc3dpcGVIYW5kbGVyKSx0LiRsaXN0Lm9uKCJ0b3VjaG1vdmUuc2xpY2sgbW91c2Vtb3ZlLnNsaWNrIix7YWN0aW9uOiJtb3ZlIn0sdC5zd2lwZUhhbmRsZXIpLHQuJGxpc3Qub24oInRvdWNoZW5kLnNsaWNrIG1vdXNldXAuc2xpY2siLHthY3Rpb246ImVuZCJ9LHQuc3dpcGVIYW5kbGVyKSx0LiRsaXN0Lm9uKCJ0b3VjaGNhbmNlbC5zbGljayBtb3VzZWxlYXZlLnNsaWNrIix7YWN0aW9uOiJlbmQifSx0LnN3aXBlSGFuZGxlciksdC4kbGlzdC5vbigiY2xpY2suc2xpY2siLHQuY2xpY2tIYW5kbGVyKSx0Lm9wdGlvbnMuYXV0b3BsYXk9PT0hMCYmKGUoZG9jdW1lbnQpLm9uKHQudmlzaWJpbGl0eUNoYW5nZSxmdW5jdGlvbigpe3QudmlzaWJpbGl0eSgpfSksdC5vcHRpb25zLnBhdXNlT25Ib3Zlcj09PSEwJiYodC4kbGlzdC5vbigibW91c2VlbnRlci5zbGljayIsZnVuY3Rpb24oKXt0LnBhdXNlZD0hMCx0LmF1dG9QbGF5Q2xlYXIoKX0pLHQuJGxpc3Qub24oIm1vdXNlbGVhdmUuc2xpY2siLGZ1bmN0aW9uKCl7dC5wYXVzZWQ9ITEsdC5hdXRvUGxheSgpfSkpKSx0Lm9wdGlvbnMuYWNjZXNzaWJpbGl0eT09PSEwJiZ0LiRsaXN0Lm9uKCJrZXlkb3duLnNsaWNrIix0LmtleUhhbmRsZXIpLHQub3B0aW9ucy5mb2N1c09uU2VsZWN0PT09ITAmJmUodC4kc2xpZGVUcmFjaykuY2hpbGRyZW4oKS5vbigiY2xpY2suc2xpY2siLHQuc2VsZWN0SGFuZGxlciksZSh3aW5kb3cpLm9uKCJvcmllbnRhdGlvbmNoYW5nZS5zbGljay5zbGljay0iK3QuaW5zdGFuY2VVaWQsZnVuY3Rpb24oKXt0LmNoZWNrUmVzcG9uc2l2ZSgpLHQuc2V0UG9zaXRpb24oKX0pLGUod2luZG93KS5vbigicmVzaXplLnNsaWNrLnNsaWNrLSIrdC5pbnN0YW5jZVVpZCxmdW5jdGlvbigpe2Uod2luZG93KS53aWR0aCgpIT09dC53aW5kb3dXaWR0aCYmKGNsZWFyVGltZW91dCh0LndpbmRvd0RlbGF5KSx0LndpbmRvd0RlbGF5PXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC53aW5kb3dXaWR0aD1lKHdpbmRvdykud2lkdGgoKSx0LmNoZWNrUmVzcG9uc2l2ZSgpLHQuc2V0UG9zaXRpb24oKX0sNTApKX0pLGUoIipbZHJhZ2dhYmxlIT10cnVlXSIsdC4kc2xpZGVUcmFjaykub24oImRyYWdzdGFydCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSksZSh3aW5kb3cpLm9uKCJsb2FkLnNsaWNrLnNsaWNrLSIrdC5pbnN0YW5jZVVpZCx0LnNldFBvc2l0aW9uKSxlKGRvY3VtZW50KS5vbigicmVhZHkuc2xpY2suc2xpY2stIit0Lmluc3RhbmNlVWlkLHQuc2V0UG9zaXRpb24pfSx0LnByb3RvdHlwZS5pbml0VUk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uub3B0aW9ucy5hcnJvd3M9PT0hMCYmZS5zbGlkZUNvdW50PmUub3B0aW9ucy5zbGlkZXNUb1Nob3cmJihlLiRwcmV2QXJyb3cuc2hvdygpLGUuJG5leHRBcnJvdy5zaG93KCkpLGUub3B0aW9ucy5kb3RzPT09ITAmJmUuc2xpZGVDb3VudD5lLm9wdGlvbnMuc2xpZGVzVG9TaG93JiZlLiRkb3RzLnNob3coKSxlLm9wdGlvbnMuYXV0b3BsYXk9PT0hMCYmZS5hdXRvUGxheSgpfSx0LnByb3RvdHlwZS5rZXlIYW5kbGVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Mzc9PT1lLmtleUNvZGUmJnQub3B0aW9ucy5hY2Nlc3NpYmlsaXR5PT09ITA/dC5jaGFuZ2VTbGlkZSh7ZGF0YTp7bWVzc2FnZToicHJldmlvdXMifX0pOjM5PT09ZS5rZXlDb2RlJiZ0Lm9wdGlvbnMuYWNjZXNzaWJpbGl0eT09PSEwJiZ0LmNoYW5nZVNsaWRlKHtkYXRhOnttZXNzYWdlOiJuZXh0In19KX0sdC5wcm90b3R5cGUubGF6eUxvYWQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe2UoImltZ1tkYXRhLWxhenldIix0KS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxuPWUodGhpcykuYXR0cigiZGF0YS1sYXp5Iik7dC5sb2FkKGZ1bmN0aW9uKCl7dC5hbmltYXRlKHtvcGFjaXR5OjF9LDIwMCl9KS5jc3Moe29wYWNpdHk6MH0pLmF0dHIoInNyYyIsbikucmVtb3ZlQXR0cigiZGF0YS1sYXp5IikucmVtb3ZlQ2xhc3MoInNsaWNrLWxvYWRpbmciKX0pfXZhciBuLGkscixzLG89dGhpcztvLm9wdGlvbnMuY2VudGVyTW9kZT09PSEwP28ub3B0aW9ucy5pbmZpbml0ZT09PSEwPyhyPW8uY3VycmVudFNsaWRlKyhvLm9wdGlvbnMuc2xpZGVzVG9TaG93LzIrMSkscz1yK28ub3B0aW9ucy5zbGlkZXNUb1Nob3crMik6KHI9TWF0aC5tYXgoMCxvLmN1cnJlbnRTbGlkZS0oby5vcHRpb25zLnNsaWRlc1RvU2hvdy8yKzEpKSxzPTIrKG8ub3B0aW9ucy5zbGlkZXNUb1Nob3cvMisxKStvLmN1cnJlbnRTbGlkZSk6KHI9by5vcHRpb25zLmluZmluaXRlP28ub3B0aW9ucy5zbGlkZXNUb1Nob3crby5jdXJyZW50U2xpZGU6by5jdXJyZW50U2xpZGUscz1yK28ub3B0aW9ucy5zbGlkZXNUb1Nob3csby5vcHRpb25zLmZhZGU9PT0hMCYmKHI+MCYmci0tLHM8PW8uc2xpZGVDb3VudCYmcysrKSksbj1vLiRzbGlkZXIuZmluZCgiLnNsaWNrLXNsaWRlIikuc2xpY2UocixzKSx0KG4pLG8uc2xpZGVDb3VudDw9by5vcHRpb25zLnNsaWRlc1RvU2hvdz8oaT1vLiRzbGlkZXIuZmluZCgiLnNsaWNrLXNsaWRlIiksdChpKSk6by5jdXJyZW50U2xpZGU+PW8uc2xpZGVDb3VudC1vLm9wdGlvbnMuc2xpZGVzVG9TaG93PyhpPW8uJHNsaWRlci5maW5kKCIuc2xpY2stY2xvbmVkIikuc2xpY2UoMCxvLm9wdGlvbnMuc2xpZGVzVG9TaG93KSx0KGkpKTowPT09by5jdXJyZW50U2xpZGUmJihpPW8uJHNsaWRlci5maW5kKCIuc2xpY2stY2xvbmVkIikuc2xpY2UoLTEqby5vcHRpb25zLnNsaWRlc1RvU2hvdyksdChpKSl9LHQucHJvdG90eXBlLmxvYWRTbGlkZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uuc2V0UG9zaXRpb24oKSxlLiRzbGlkZVRyYWNrLmNzcyh7b3BhY2l0eToxfSksZS4kc2xpZGVyLnJlbW92ZUNsYXNzKCJzbGljay1sb2FkaW5nIiksZS5pbml0VUkoKSwicHJvZ3Jlc3NpdmUiPT09ZS5vcHRpb25zLmxhenlMb2FkJiZlLnByb2dyZXNzaXZlTGF6eUxvYWQoKX0sdC5wcm90b3R5cGUubmV4dD10LnByb3RvdHlwZS5zbGlja05leHQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuY2hhbmdlU2xpZGUoe2RhdGE6e21lc3NhZ2U6Im5leHQifX0pfSx0LnByb3RvdHlwZS5wYXVzZT10LnByb3RvdHlwZS5zbGlja1BhdXNlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmF1dG9QbGF5Q2xlYXIoKSxlLnBhdXNlZD0hMH0sdC5wcm90b3R5cGUucGxheT10LnByb3RvdHlwZS5zbGlja1BsYXk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UucGF1c2VkPSExLGUuYXV0b1BsYXkoKX0sdC5wcm90b3R5cGUucG9zdFNsaWRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC4kc2xpZGVyLnRyaWdnZXIoImFmdGVyQ2hhbmdlIixbdCxlXSksdC5hbmltYXRpbmc9ITEsdC5zZXRQb3NpdGlvbigpLHQuc3dpcGVMZWZ0PW51bGwsdC5vcHRpb25zLmF1dG9wbGF5PT09ITAmJnQucGF1c2VkPT09ITEmJnQuYXV0b1BsYXkoKX0sdC5wcm90b3R5cGUucHJldj10LnByb3RvdHlwZS5zbGlja1ByZXY9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuY2hhbmdlU2xpZGUoe2RhdGE6e21lc3NhZ2U6InByZXZpb3VzIn19KX0sdC5wcm90b3R5cGUucHJvZ3Jlc3NpdmVMYXp5TG9hZD1mdW5jdGlvbigpe3ZhciB0LG4saT10aGlzO3Q9ZSgiaW1nW2RhdGEtbGF6eV0iLGkuJHNsaWRlcikubGVuZ3RoLHQ+MCYmKG49ZSgiaW1nW2RhdGEtbGF6eV0iLGkuJHNsaWRlcikuZmlyc3QoKSxuLmF0dHIoInNyYyIsbi5hdHRyKCJkYXRhLWxhenkiKSkucmVtb3ZlQ2xhc3MoInNsaWNrLWxvYWRpbmciKS5sb2FkKGZ1bmN0aW9uKCl7bi5yZW1vdmVBdHRyKCJkYXRhLWxhenkiKSxpLnByb2dyZXNzaXZlTGF6eUxvYWQoKSxpLm9wdGlvbnMuYWRhcHRpdmVIZWlnaHQ9PT0hMCYmaS5zZXRQb3NpdGlvbigpfSkuZXJyb3IoZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIoImRhdGEtbGF6eSIpLGkucHJvZ3Jlc3NpdmVMYXp5TG9hZCgpfSkpfSx0LnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuY3VycmVudFNsaWRlO3QuZGVzdHJveSgpLGUuZXh0ZW5kKHQsdC5pbml0aWFscyksdC5pbml0KCksdC5jaGFuZ2VTbGlkZSh7ZGF0YTp7bWVzc2FnZToiaW5kZXgiLGluZGV4Om59fSwhMCl9LHQucHJvdG90eXBlLnJlaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dC4kc2xpZGVzPXQuJHNsaWRlVHJhY2suY2hpbGRyZW4odC5vcHRpb25zLnNsaWRlKS5hZGRDbGFzcygic2xpY2stc2xpZGUiKSx0LnNsaWRlQ291bnQ9dC4kc2xpZGVzLmxlbmd0aCx0LmN1cnJlbnRTbGlkZT49dC5zbGlkZUNvdW50JiYwIT09dC5jdXJyZW50U2xpZGUmJih0LmN1cnJlbnRTbGlkZT10LmN1cnJlbnRTbGlkZS10Lm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwpLHQuc2xpZGVDb3VudDw9dC5vcHRpb25zLnNsaWRlc1RvU2hvdyYmKHQuY3VycmVudFNsaWRlPTApLHQuc2V0UHJvcHMoKSx0LnNldHVwSW5maW5pdGUoKSx0LmJ1aWxkQXJyb3dzKCksdC51cGRhdGVBcnJvd3MoKSx0LmluaXRBcnJvd0V2ZW50cygpLHQuYnVpbGREb3RzKCksdC51cGRhdGVEb3RzKCksdC5pbml0RG90RXZlbnRzKCksdC5vcHRpb25zLmZvY3VzT25TZWxlY3Q9PT0hMCYmZSh0LiRzbGlkZVRyYWNrKS5jaGlsZHJlbigpLm9uKCJjbGljay5zbGljayIsdC5zZWxlY3RIYW5kbGVyKSx0LnNldFNsaWRlQ2xhc3NlcygwKSx0LnNldFBvc2l0aW9uKCksdC4kc2xpZGVyLnRyaWdnZXIoInJlSW5pdCIsW3RdKX0sdC5wcm90b3R5cGUucmVtb3ZlU2xpZGU9dC5wcm90b3R5cGUuc2xpY2tSZW1vdmU9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXM7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgZT8odD1lLGU9dD09PSEwPzA6aS5zbGlkZUNvdW50LTEpOmU9dD09PSEwPy0tZTplLGkuc2xpZGVDb3VudDwxfHwwPmV8fGU+aS5zbGlkZUNvdW50LTE/ITE6KGkudW5sb2FkKCksbj09PSEwP2kuJHNsaWRlVHJhY2suY2hpbGRyZW4oKS5yZW1vdmUoKTppLiRzbGlkZVRyYWNrLmNoaWxkcmVuKHRoaXMub3B0aW9ucy5zbGlkZSkuZXEoZSkucmVtb3ZlKCksaS4kc2xpZGVzPWkuJHNsaWRlVHJhY2suY2hpbGRyZW4odGhpcy5vcHRpb25zLnNsaWRlKSxpLiRzbGlkZVRyYWNrLmNoaWxkcmVuKHRoaXMub3B0aW9ucy5zbGlkZSkuZGV0YWNoKCksaS4kc2xpZGVUcmFjay5hcHBlbmQoaS4kc2xpZGVzKSxpLiRzbGlkZXNDYWNoZT1pLiRzbGlkZXMsdm9pZCBpLnJlaW5pdCgpKX0sdC5wcm90b3R5cGUuc2V0Q1NTPWZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLHI9e307aS5vcHRpb25zLnJ0bD09PSEwJiYoZT0tZSksdD0ibGVmdCI9PWkucG9zaXRpb25Qcm9wP01hdGguY2VpbChlKSsicHgiOiIwcHgiLG49InRvcCI9PWkucG9zaXRpb25Qcm9wP01hdGguY2VpbChlKSsicHgiOiIwcHgiLHJbaS5wb3NpdGlvblByb3BdPWUsaS50cmFuc2Zvcm1zRW5hYmxlZD09PSExP2kuJHNsaWRlVHJhY2suY3NzKHIpOihyPXt9LGkuY3NzVHJhbnNpdGlvbnM9PT0hMT8ocltpLmFuaW1UeXBlXT0idHJhbnNsYXRlKCIrdCsiLCAiK24rIikiLGkuJHNsaWRlVHJhY2suY3NzKHIpKToocltpLmFuaW1UeXBlXT0idHJhbnNsYXRlM2QoIit0KyIsICIrbisiLCAwcHgpIixpLiRzbGlkZVRyYWNrLmNzcyhyKSkpfSx0LnByb3RvdHlwZS5zZXREaW1lbnNpb25zPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihlLm9wdGlvbnMudmVydGljYWw9PT0hMT9lLm9wdGlvbnMuY2VudGVyTW9kZT09PSEwJiZlLiRsaXN0LmNzcyh7cGFkZGluZzoiMHB4ICIrZS5vcHRpb25zLmNlbnRlclBhZGRpbmd9KTooZS4kbGlzdC5oZWlnaHQoZS4kc2xpZGVzLmZpcnN0KCkub3V0ZXJIZWlnaHQoITApKmUub3B0aW9ucy5zbGlkZXNUb1Nob3cpLGUub3B0aW9ucy5jZW50ZXJNb2RlPT09ITAmJmUuJGxpc3QuY3NzKHtwYWRkaW5nOmUub3B0aW9ucy5jZW50ZXJQYWRkaW5nKyIgMHB4In0pKSxlLmxpc3RXaWR0aD1lLiRsaXN0LndpZHRoKCksZS5saXN0SGVpZ2h0PWUuJGxpc3QuaGVpZ2h0KCksZS5vcHRpb25zLnZlcnRpY2FsPT09ITEmJmUub3B0aW9ucy52YXJpYWJsZVdpZHRoPT09ITEpZS5zbGlkZVdpZHRoPU1hdGguY2VpbChlLmxpc3RXaWR0aC9lLm9wdGlvbnMuc2xpZGVzVG9TaG93KSxlLiRzbGlkZVRyYWNrLndpZHRoKE1hdGguY2VpbChlLnNsaWRlV2lkdGgqZS4kc2xpZGVUcmFjay5jaGlsZHJlbigiLnNsaWNrLXNsaWRlIikubGVuZ3RoKSk7ZWxzZSBpZihlLm9wdGlvbnMudmFyaWFibGVXaWR0aD09PSEwKXt2YXIgdD0wO2Uuc2xpZGVXaWR0aD1NYXRoLmNlaWwoZS5saXN0V2lkdGgvZS5vcHRpb25zLnNsaWRlc1RvU2hvdyksZS4kc2xpZGVUcmFjay5jaGlsZHJlbigiLnNsaWNrLXNsaWRlIikuZWFjaChmdW5jdGlvbigpe3QrPWUubGlzdFdpZHRofSksZS4kc2xpZGVUcmFjay53aWR0aChNYXRoLmNlaWwodCkrMSl9ZWxzZSBlLnNsaWRlV2lkdGg9TWF0aC5jZWlsKGUubGlzdFdpZHRoKSxlLiRzbGlkZVRyYWNrLmhlaWdodChNYXRoLmNlaWwoZS4kc2xpZGVzLmZpcnN0KCkub3V0ZXJIZWlnaHQoITApKmUuJHNsaWRlVHJhY2suY2hpbGRyZW4oIi5zbGljay1zbGlkZSIpLmxlbmd0aCkpO3ZhciBuPWUuJHNsaWRlcy5maXJzdCgpLm91dGVyV2lkdGgoITApLWUuJHNsaWRlcy5maXJzdCgpLndpZHRoKCk7ZS5vcHRpb25zLnZhcmlhYmxlV2lkdGg9PT0hMSYmZS4kc2xpZGVUcmFjay5jaGlsZHJlbigiLnNsaWNrLXNsaWRlIikud2lkdGgoZS5zbGlkZVdpZHRoLW4pfSx0LnByb3RvdHlwZS5zZXRGYWRlPWZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzO24uJHNsaWRlcy5lYWNoKGZ1bmN0aW9uKGkscil7dD1uLnNsaWRlV2lkdGgqaSotMSxuLm9wdGlvbnMucnRsPT09ITA/ZShyKS5jc3Moe3Bvc2l0aW9uOiJyZWxhdGl2ZSIscmlnaHQ6dCx0b3A6MCx6SW5kZXg6ODAwLG9wYWNpdHk6MH0pOmUocikuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUiLGxlZnQ6dCx0b3A6MCx6SW5kZXg6ODAwLG9wYWNpdHk6MH0pfSksbi4kc2xpZGVzLmVxKG4uY3VycmVudFNsaWRlKS5jc3Moe3pJbmRleDo5MDAsb3BhY2l0eToxfSl9LHQucHJvdG90eXBlLnNldEhlaWdodD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoMT09PWUub3B0aW9ucy5zbGlkZXNUb1Nob3cmJmUub3B0aW9ucy5hZGFwdGl2ZUhlaWdodD09PSEwJiZlLm9wdGlvbnMudmVydGljYWw9PT0hMSl7dmFyIHQ9ZS4kc2xpZGVzLmVxKGUuY3VycmVudFNsaWRlKS5vdXRlckhlaWdodCghMCk7ZS4kbGlzdC5jc3MoImhlaWdodCIsdCl9fSx0LnByb3RvdHlwZS5zZXRPcHRpb249dC5wcm90b3R5cGUuc2xpY2tTZXRPcHRpb249ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXM7aS5vcHRpb25zW2VdPXQsbj09PSEwJiYoaS51bmxvYWQoKSxpLnJlaW5pdCgpKX0sdC5wcm90b3R5cGUuc2V0UG9zaXRpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uuc2V0RGltZW5zaW9ucygpLGUuc2V0SGVpZ2h0KCksZS5vcHRpb25zLmZhZGU9PT0hMT9lLnNldENTUyhlLmdldExlZnQoZS5jdXJyZW50U2xpZGUpKTplLnNldEZhZGUoKSxlLiRzbGlkZXIudHJpZ2dlcigic2V0UG9zaXRpb24iLFtlXSl9LHQucHJvdG90eXBlLnNldFByb3BzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWRvY3VtZW50LmJvZHkuc3R5bGU7ZS5wb3NpdGlvblByb3A9ZS5vcHRpb25zLnZlcnRpY2FsPT09ITA/InRvcCI6ImxlZnQiLCJ0b3AiPT09ZS5wb3NpdGlvblByb3A/ZS4kc2xpZGVyLmFkZENsYXNzKCJzbGljay12ZXJ0aWNhbCIpOmUuJHNsaWRlci5yZW1vdmVDbGFzcygic2xpY2stdmVydGljYWwiKSwodm9pZCAwIT09dC5XZWJraXRUcmFuc2l0aW9ufHx2b2lkIDAhPT10Lk1velRyYW5zaXRpb258fHZvaWQgMCE9PXQubXNUcmFuc2l0aW9uKSYmZS5vcHRpb25zLnVzZUNTUz09PSEwJiYoZS5jc3NUcmFuc2l0aW9ucz0hMCksdm9pZCAwIT09dC5PVHJhbnNmb3JtJiYoZS5hbmltVHlwZT0iT1RyYW5zZm9ybSIsZS50cmFuc2Zvcm1UeXBlPSItby10cmFuc2Zvcm0iLGUudHJhbnNpdGlvblR5cGU9Ik9UcmFuc2l0aW9uIix2b2lkIDA9PT10LnBlcnNwZWN0aXZlUHJvcGVydHkmJnZvaWQgMD09PXQud2Via2l0UGVyc3BlY3RpdmUmJihlLmFuaW1UeXBlPSExKSksdm9pZCAwIT09dC5Nb3pUcmFuc2Zvcm0mJihlLmFuaW1UeXBlPSJNb3pUcmFuc2Zvcm0iLGUudHJhbnNmb3JtVHlwZT0iLW1vei10cmFuc2Zvcm0iLGUudHJhbnNpdGlvblR5cGU9Ik1velRyYW5zaXRpb24iLHZvaWQgMD09PXQucGVyc3BlY3RpdmVQcm9wZXJ0eSYmdm9pZCAwPT09dC5Nb3pQZXJzcGVjdGl2ZSYmKGUuYW5pbVR5cGU9ITEpKSx2b2lkIDAhPT10LndlYmtpdFRyYW5zZm9ybSYmKGUuYW5pbVR5cGU9IndlYmtpdFRyYW5zZm9ybSIsZS50cmFuc2Zvcm1UeXBlPSItd2Via2l0LXRyYW5zZm9ybSIsZS50cmFuc2l0aW9uVHlwZT0id2Via2l0VHJhbnNpdGlvbiIsdm9pZCAwPT09dC5wZXJzcGVjdGl2ZVByb3BlcnR5JiZ2b2lkIDA9PT10LndlYmtpdFBlcnNwZWN0aXZlJiYoZS5hbmltVHlwZT0hMSkpLHZvaWQgMCE9PXQubXNUcmFuc2Zvcm0mJihlLmFuaW1UeXBlPSJtc1RyYW5zZm9ybSIsZS50cmFuc2Zvcm1UeXBlPSItbXMtdHJhbnNmb3JtIixlLnRyYW5zaXRpb25UeXBlPSJtc1RyYW5zaXRpb24iLHZvaWQgMD09PXQubXNUcmFuc2Zvcm0mJihlLmFuaW1UeXBlPSExKSksdm9pZCAwIT09dC50cmFuc2Zvcm0mJmUuYW5pbVR5cGUhPT0hMSYmKGUuYW5pbVR5cGU9InRyYW5zZm9ybSIsZS50cmFuc2Zvcm1UeXBlPSJ0cmFuc2Zvcm0iLGUudHJhbnNpdGlvblR5cGU9InRyYW5zaXRpb24iKSxlLnRyYW5zZm9ybXNFbmFibGVkPW51bGwhPT1lLmFuaW1UeXBlJiZlLmFuaW1UeXBlIT09ITF9LHQucHJvdG90eXBlLnNldFNsaWRlQ2xhc3Nlcz1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixzPXRoaXM7cy4kc2xpZGVyLmZpbmQoIi5zbGljay1zbGlkZSIpLnJlbW92ZUNsYXNzKCJzbGljay1hY3RpdmUiKS5hdHRyKCJhcmlhLWhpZGRlbiIsInRydWUiKS5yZW1vdmVDbGFzcygic2xpY2stY2VudGVyIiksbj1zLiRzbGlkZXIuZmluZCgiLnNsaWNrLXNsaWRlIikscy5vcHRpb25zLmNlbnRlck1vZGU9PT0hMD8odD1NYXRoLmZsb29yKHMub3B0aW9ucy5zbGlkZXNUb1Nob3cvMikscy5vcHRpb25zLmluZmluaXRlPT09ITAmJihlPj10JiZlPD1zLnNsaWRlQ291bnQtMS10P3MuJHNsaWRlcy5zbGljZShlLXQsZSt0KzEpLmFkZENsYXNzKCJzbGljay1hY3RpdmUiKS5hdHRyKCJhcmlhLWhpZGRlbiIsImZhbHNlIik6KGk9cy5vcHRpb25zLnNsaWRlc1RvU2hvdytlLG4uc2xpY2UoaS10KzEsaSt0KzIpLmFkZENsYXNzKCJzbGljay1hY3RpdmUiKS5hdHRyKCJhcmlhLWhpZGRlbiIsImZhbHNlIikpLDA9PT1lP24uZXEobi5sZW5ndGgtMS1zLm9wdGlvbnMuc2xpZGVzVG9TaG93KS5hZGRDbGFzcygic2xpY2stY2VudGVyIik6ZT09PXMuc2xpZGVDb3VudC0xJiZuLmVxKHMub3B0aW9ucy5zbGlkZXNUb1Nob3cpLmFkZENsYXNzKCJzbGljay1jZW50ZXIiKSkscy4kc2xpZGVzLmVxKGUpLmFkZENsYXNzKCJzbGljay1jZW50ZXIiKSk6ZT49MCYmZTw9cy5zbGlkZUNvdW50LXMub3B0aW9ucy5zbGlkZXNUb1Nob3c/cy4kc2xpZGVzLnNsaWNlKGUsZStzLm9wdGlvbnMuc2xpZGVzVG9TaG93KS5hZGRDbGFzcygic2xpY2stYWN0aXZlIikuYXR0cigiYXJpYS1oaWRkZW4iLCJmYWxzZSIpOm4ubGVuZ3RoPD1zLm9wdGlvbnMuc2xpZGVzVG9TaG93P24uYWRkQ2xhc3MoInNsaWNrLWFjdGl2ZSIpLmF0dHIoImFyaWEtaGlkZGVuIiwiZmFsc2UiKToocj1zLnNsaWRlQ291bnQlcy5vcHRpb25zLnNsaWRlc1RvU2hvdyxpPXMub3B0aW9ucy5pbmZpbml0ZT09PSEwP3Mub3B0aW9ucy5zbGlkZXNUb1Nob3crZTplLHMub3B0aW9ucy5zbGlkZXNUb1Nob3c9PXMub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCYmcy5zbGlkZUNvdW50LWU8cy5vcHRpb25zLnNsaWRlc1RvU2hvdz9uLnNsaWNlKGktKHMub3B0aW9ucy5zbGlkZXNUb1Nob3ctciksaStyKS5hZGRDbGFzcygic2xpY2stYWN0aXZlIikuYXR0cigiYXJpYS1oaWRkZW4iLCJmYWxzZSIpOm4uc2xpY2UoaSxpK3Mub3B0aW9ucy5zbGlkZXNUb1Nob3cpLmFkZENsYXNzKCJzbGljay1hY3RpdmUiKS5hdHRyKCJhcmlhLWhpZGRlbiIsImZhbHNlIikpLCJvbmRlbWFuZCI9PT1zLm9wdGlvbnMubGF6eUxvYWQmJnMubGF6eUxvYWQoKX0sdC5wcm90b3R5cGUuc2V0dXBJbmZpbml0ZT1mdW5jdGlvbigpe3ZhciB0LG4saSxyPXRoaXM7aWYoci5vcHRpb25zLmZhZGU9PT0hMCYmKHIub3B0aW9ucy5jZW50ZXJNb2RlPSExKSxyLm9wdGlvbnMuaW5maW5pdGU9PT0hMCYmci5vcHRpb25zLmZhZGU9PT0hMSYmKG49bnVsbCxyLnNsaWRlQ291bnQ+ci5vcHRpb25zLnNsaWRlc1RvU2hvdykpe2ZvcihpPXIub3B0aW9ucy5jZW50ZXJNb2RlPT09ITA/ci5vcHRpb25zLnNsaWRlc1RvU2hvdysxOnIub3B0aW9ucy5zbGlkZXNUb1Nob3csdD1yLnNsaWRlQ291bnQ7dD5yLnNsaWRlQ291bnQtaTt0LT0xKW49dC0xLGUoci4kc2xpZGVzW25dKS5jbG9uZSghMCkuYXR0cigiaWQiLCIiKS5hdHRyKCJkYXRhLXNsaWNrLWluZGV4IixuLXIuc2xpZGVDb3VudCkucHJlcGVuZFRvKHIuJHNsaWRlVHJhY2spLmFkZENsYXNzKCJzbGljay1jbG9uZWQiKTtmb3IodD0wO2k+dDt0Kz0xKW49dCxlKHIuJHNsaWRlc1tuXSkuY2xvbmUoITApLmF0dHIoImlkIiwiIikuYXR0cigiZGF0YS1zbGljay1pbmRleCIsbityLnNsaWRlQ291bnQpLmFwcGVuZFRvKHIuJHNsaWRlVHJhY2spLmFkZENsYXNzKCJzbGljay1jbG9uZWQiKTtyLiRzbGlkZVRyYWNrLmZpbmQoIi5zbGljay1jbG9uZWQiKS5maW5kKCJbaWRdIikuZWFjaChmdW5jdGlvbigpe2UodGhpcykuYXR0cigiaWQiLCIiKX0pfX0sdC5wcm90b3R5cGUuc2VsZWN0SGFuZGxlcj1mdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9cGFyc2VJbnQoZSh0LnRhcmdldCkucGFyZW50cygiLnNsaWNrLXNsaWRlIikuYXR0cigiZGF0YS1zbGljay1pbmRleCIpKTtyZXR1cm4gaXx8KGk9MCksbi5zbGlkZUNvdW50PD1uLm9wdGlvbnMuc2xpZGVzVG9TaG93PyhuLiRzbGlkZXIuZmluZCgiLnNsaWNrLXNsaWRlIikucmVtb3ZlQ2xhc3MoInNsaWNrLWFjdGl2ZSIpLmF0dHIoImFyaWEtaGlkZGVuIiwidHJ1ZSIpLG4uJHNsaWRlcy5lcShpKS5hZGRDbGFzcygic2xpY2stYWN0aXZlIikuYXR0cigiYXJpYS1oaWRkZW4iLCJmYWxzZSIpLG4ub3B0aW9ucy5jZW50ZXJNb2RlPT09ITAmJihuLiRzbGlkZXIuZmluZCgiLnNsaWNrLXNsaWRlIikucmVtb3ZlQ2xhc3MoInNsaWNrLWNlbnRlciIpLG4uJHNsaWRlcy5lcShpKS5hZGRDbGFzcygic2xpY2stY2VudGVyIikpLHZvaWQgbi5hc05hdkZvcihpKSk6dm9pZCBuLnNsaWRlSGFuZGxlcihpKX0sdC5wcm90b3R5cGUuc2xpZGVIYW5kbGVyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLHMsbyxhPW51bGwsbD10aGlzO3JldHVybiB0PXR8fCExLGwuYW5pbWF0aW5nPT09ITAmJmwub3B0aW9ucy53YWl0Rm9yQW5pbWF0ZT09PSEwfHxsLm9wdGlvbnMuZmFkZT09PSEwJiZsLmN1cnJlbnRTbGlkZT09PWV8fGwuc2xpZGVDb3VudDw9bC5vcHRpb25zLnNsaWRlc1RvU2hvdz92b2lkIDA6KHQ9PT0hMSYmbC5hc05hdkZvcihlKSxpPWUsYT1sLmdldExlZnQoaSksbz1sLmdldExlZnQobC5jdXJyZW50U2xpZGUpLGwuY3VycmVudExlZnQ9bnVsbD09PWwuc3dpcGVMZWZ0P286bC5zd2lwZUxlZnQsbC5vcHRpb25zLmluZmluaXRlPT09ITEmJmwub3B0aW9ucy5jZW50ZXJNb2RlPT09ITEmJigwPmV8fGU+bC5nZXREb3RDb3VudCgpKmwub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCk/dm9pZChsLm9wdGlvbnMuZmFkZT09PSExJiYoaT1sLmN1cnJlbnRTbGlkZSxuIT09ITA/bC5hbmltYXRlU2xpZGUobyxmdW5jdGlvbigpe2wucG9zdFNsaWRlKGkpfSk6bC5wb3N0U2xpZGUoaSkpKTpsLm9wdGlvbnMuaW5maW5pdGU9PT0hMSYmbC5vcHRpb25zLmNlbnRlck1vZGU9PT0hMCYmKDA+ZXx8ZT5sLnNsaWRlQ291bnQtbC5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKT92b2lkKGwub3B0aW9ucy5mYWRlPT09ITEmJihpPWwuY3VycmVudFNsaWRlLG4hPT0hMD9sLmFuaW1hdGVTbGlkZShvLGZ1bmN0aW9uKCl7bC5wb3N0U2xpZGUoaSl9KTpsLnBvc3RTbGlkZShpKSkpOihsLm9wdGlvbnMuYXV0b3BsYXk9PT0hMCYmY2xlYXJJbnRlcnZhbChsLmF1dG9QbGF5VGltZXIpLHI9MD5pP2wuc2xpZGVDb3VudCVsLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwhPT0wP2wuc2xpZGVDb3VudC1sLnNsaWRlQ291bnQlbC5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsOmwuc2xpZGVDb3VudCtpOmk+PWwuc2xpZGVDb3VudD9sLnNsaWRlQ291bnQlbC5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsIT09MD8wOmktbC5zbGlkZUNvdW50OmksbC5hbmltYXRpbmc9ITAsbC4kc2xpZGVyLnRyaWdnZXIoImJlZm9yZUNoYW5nZSIsW2wsbC5jdXJyZW50U2xpZGUscl0pLHM9bC5jdXJyZW50U2xpZGUsbC5jdXJyZW50U2xpZGU9cixsLnNldFNsaWRlQ2xhc3NlcyhsLmN1cnJlbnRTbGlkZSksbC51cGRhdGVEb3RzKCksbC51cGRhdGVBcnJvd3MoKSxsLm9wdGlvbnMuZmFkZT09PSEwPyhuIT09ITA/bC5mYWRlU2xpZGUocixmdW5jdGlvbigpe2wucG9zdFNsaWRlKHIpfSk6bC5wb3N0U2xpZGUociksdm9pZCBsLmFuaW1hdGVIZWlnaHQoKSk6dm9pZChuIT09ITA/bC5hbmltYXRlU2xpZGUoYSxmdW5jdGlvbigpe2wucG9zdFNsaWRlKHIpfSk6bC5wb3N0U2xpZGUocikpKSl9LHQucHJvdG90eXBlLnN0YXJ0TG9hZD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5vcHRpb25zLmFycm93cz09PSEwJiZlLnNsaWRlQ291bnQ+ZS5vcHRpb25zLnNsaWRlc1RvU2hvdyYmKGUuJHByZXZBcnJvdy5oaWRlKCksZS4kbmV4dEFycm93LmhpZGUoKSksZS5vcHRpb25zLmRvdHM9PT0hMCYmZS5zbGlkZUNvdW50PmUub3B0aW9ucy5zbGlkZXNUb1Nob3cmJmUuJGRvdHMuaGlkZSgpLGUuJHNsaWRlci5hZGRDbGFzcygic2xpY2stbG9hZGluZyIpfSx0LnByb3RvdHlwZS5zd2lwZURpcmVjdGlvbj1mdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9dGhpcztyZXR1cm4gZT1yLnRvdWNoT2JqZWN0LnN0YXJ0WC1yLnRvdWNoT2JqZWN0LmN1clgsdD1yLnRvdWNoT2JqZWN0LnN0YXJ0WS1yLnRvdWNoT2JqZWN0LmN1clksbj1NYXRoLmF0YW4yKHQsZSksaT1NYXRoLnJvdW5kKDE4MCpuL01hdGguUEkpLDA+aSYmKGk9MzYwLU1hdGguYWJzKGkpKSw0NT49aSYmaT49MD9yLm9wdGlvbnMucnRsPT09ITE/ImxlZnQiOiJyaWdodCI6MzYwPj1pJiZpPj0zMTU/ci5vcHRpb25zLnJ0bD09PSExPyJsZWZ0IjoicmlnaHQiOmk+PTEzNSYmMjI1Pj1pP3Iub3B0aW9ucy5ydGw9PT0hMT8icmlnaHQiOiJsZWZ0IjoidmVydGljYWwifSx0LnByb3RvdHlwZS5zd2lwZUVuZD1mdW5jdGlvbihlKXt2YXIgdCxuPXRoaXM7aWYobi5kcmFnZ2luZz0hMSxuLnNob3VsZENsaWNrPW4udG91Y2hPYmplY3Quc3dpcGVMZW5ndGg+MTA/ITE6ITAsdm9pZCAwPT09bi50b3VjaE9iamVjdC5jdXJYKXJldHVybiExO2lmKG4udG91Y2hPYmplY3QuZWRnZUhpdD09PSEwJiZuLiRzbGlkZXIudHJpZ2dlcigiZWRnZSIsW24sbi5zd2lwZURpcmVjdGlvbigpXSksbi50b3VjaE9iamVjdC5zd2lwZUxlbmd0aD49bi50b3VjaE9iamVjdC5taW5Td2lwZSlzd2l0Y2gobi5zd2lwZURpcmVjdGlvbigpKXtjYXNlImxlZnQiOnQ9bi5vcHRpb25zLnN3aXBlVG9TbGlkZT9uLmNoZWNrTmF2aWdhYmxlKG4uY3VycmVudFNsaWRlK24uZ2V0U2xpZGVDb3VudCgpKTpuLmN1cnJlbnRTbGlkZStuLmdldFNsaWRlQ291bnQoKSxuLnNsaWRlSGFuZGxlcih0KSxuLmN1cnJlbnREaXJlY3Rpb249MCxuLnRvdWNoT2JqZWN0PXt9LG4uJHNsaWRlci50cmlnZ2VyKCJzd2lwZSIsW24sImxlZnQiXSk7YnJlYWs7Y2FzZSJyaWdodCI6dD1uLm9wdGlvbnMuc3dpcGVUb1NsaWRlP24uY2hlY2tOYXZpZ2FibGUobi5jdXJyZW50U2xpZGUtbi5nZXRTbGlkZUNvdW50KCkpOm4uY3VycmVudFNsaWRlLW4uZ2V0U2xpZGVDb3VudCgpLG4uc2xpZGVIYW5kbGVyKHQpLG4uY3VycmVudERpcmVjdGlvbj0xLG4udG91Y2hPYmplY3Q9e30sbi4kc2xpZGVyLnRyaWdnZXIoInN3aXBlIixbbiwicmlnaHQiXSl9ZWxzZSBuLnRvdWNoT2JqZWN0LnN0YXJ0WCE9PW4udG91Y2hPYmplY3QuY3VyWCYmKG4uc2xpZGVIYW5kbGVyKG4uY3VycmVudFNsaWRlKSxuLnRvdWNoT2JqZWN0PXt9KX0sdC5wcm90b3R5cGUuc3dpcGVIYW5kbGVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoISh0Lm9wdGlvbnMuc3dpcGU9PT0hMXx8Im9udG91Y2hlbmQiaW4gZG9jdW1lbnQmJnQub3B0aW9ucy5zd2lwZT09PSExfHx0Lm9wdGlvbnMuZHJhZ2dhYmxlPT09ITEmJi0xIT09ZS50eXBlLmluZGV4T2YoIm1vdXNlIikpKXN3aXRjaCh0LnRvdWNoT2JqZWN0LmZpbmdlckNvdW50PWUub3JpZ2luYWxFdmVudCYmdm9pZCAwIT09ZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXM/ZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXMubGVuZ3RoOjEsdC50b3VjaE9iamVjdC5taW5Td2lwZT10Lmxpc3RXaWR0aC90Lm9wdGlvbnMudG91Y2hUaHJlc2hvbGQsZS5kYXRhLmFjdGlvbil7Y2FzZSJzdGFydCI6dC5zd2lwZVN0YXJ0KGUpO2JyZWFrO2Nhc2UibW92ZSI6dC5zd2lwZU1vdmUoZSk7YnJlYWs7Y2FzZSJlbmQiOnQuc3dpcGVFbmQoZSl9fSx0LnByb3RvdHlwZS5zd2lwZU1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIscyxvPXRoaXM7cmV0dXJuIHM9dm9pZCAwIT09ZS5vcmlnaW5hbEV2ZW50P2Uub3JpZ2luYWxFdmVudC50b3VjaGVzOm51bGwsIW8uZHJhZ2dpbmd8fHMmJjEhPT1zLmxlbmd0aD8hMToodD1vLmdldExlZnQoby5jdXJyZW50U2xpZGUpLG8udG91Y2hPYmplY3QuY3VyWD12b2lkIDAhPT1zP3NbMF0ucGFnZVg6ZS5jbGllbnRYLG8udG91Y2hPYmplY3QuY3VyWT12b2lkIDAhPT1zP3NbMF0ucGFnZVk6ZS5jbGllbnRZLG8udG91Y2hPYmplY3Quc3dpcGVMZW5ndGg9TWF0aC5yb3VuZChNYXRoLnNxcnQoTWF0aC5wb3coby50b3VjaE9iamVjdC5jdXJYLW8udG91Y2hPYmplY3Quc3RhcnRYLDIpKSksbj1vLnN3aXBlRGlyZWN0aW9uKCksInZlcnRpY2FsIiE9PW4/KHZvaWQgMCE9PWUub3JpZ2luYWxFdmVudCYmby50b3VjaE9iamVjdC5zd2lwZUxlbmd0aD40JiZlLnByZXZlbnREZWZhdWx0KCkscj0oby5vcHRpb25zLnJ0bD09PSExPzE6LTEpKihvLnRvdWNoT2JqZWN0LmN1clg+by50b3VjaE9iamVjdC5zdGFydFg/MTotMSksaT1vLnRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoLG8udG91Y2hPYmplY3QuZWRnZUhpdD0hMSxvLm9wdGlvbnMuaW5maW5pdGU9PT0hMSYmKDA9PT1vLmN1cnJlbnRTbGlkZSYmInJpZ2h0Ij09PW58fG8uY3VycmVudFNsaWRlPj1vLmdldERvdENvdW50KCkmJiJsZWZ0Ij09PW4pJiYoaT1vLnRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoKm8ub3B0aW9ucy5lZGdlRnJpY3Rpb24sby50b3VjaE9iamVjdC5lZGdlSGl0PSEwKSxvLm9wdGlvbnMudmVydGljYWw9PT0hMT9vLnN3aXBlTGVmdD10K2kqcjpvLnN3aXBlTGVmdD10K2kqKG8uJGxpc3QuaGVpZ2h0KCkvby5saXN0V2lkdGgpKnIsby5vcHRpb25zLmZhZGU9PT0hMHx8by5vcHRpb25zLnRvdWNoTW92ZT09PSExPyExOm8uYW5pbWF0aW5nPT09ITA/KG8uc3dpcGVMZWZ0PW51bGwsITEpOnZvaWQgby5zZXRDU1Moby5zd2lwZUxlZnQpKTp2b2lkIDApfSx0LnByb3RvdHlwZS5zd2lwZVN0YXJ0PWZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcztyZXR1cm4gMSE9PW4udG91Y2hPYmplY3QuZmluZ2VyQ291bnR8fG4uc2xpZGVDb3VudDw9bi5vcHRpb25zLnNsaWRlc1RvU2hvdz8obi50b3VjaE9iamVjdD17fSwhMSk6KHZvaWQgMCE9PWUub3JpZ2luYWxFdmVudCYmdm9pZCAwIT09ZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXMmJih0PWUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdKSxuLnRvdWNoT2JqZWN0LnN0YXJ0WD1uLnRvdWNoT2JqZWN0LmN1clg9dm9pZCAwIT09dD90LnBhZ2VYOmUuY2xpZW50WCxuLnRvdWNoT2JqZWN0LnN0YXJ0WT1uLnRvdWNoT2JqZWN0LmN1clk9dm9pZCAwIT09dD90LnBhZ2VZOmUuY2xpZW50WSx2b2lkKG4uZHJhZ2dpbmc9ITApKX0sdC5wcm90b3R5cGUudW5maWx0ZXJTbGlkZXM9dC5wcm90b3R5cGUuc2xpY2tVbmZpbHRlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7bnVsbCE9PWUuJHNsaWRlc0NhY2hlJiYoZS51bmxvYWQoKSxlLiRzbGlkZVRyYWNrLmNoaWxkcmVuKHRoaXMub3B0aW9ucy5zbGlkZSkuZGV0YWNoKCksZS4kc2xpZGVzQ2FjaGUuYXBwZW5kVG8oZS4kc2xpZGVUcmFjayksZS5yZWluaXQoKSl9LHQucHJvdG90eXBlLnVubG9hZD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7ZSgiLnNsaWNrLWNsb25lZCIsdC4kc2xpZGVyKS5yZW1vdmUoKSx0LiRkb3RzJiZ0LiRkb3RzLnJlbW92ZSgpLHQuJHByZXZBcnJvdyYmIm9iamVjdCIhPXR5cGVvZiB0Lm9wdGlvbnMucHJldkFycm93JiZ0LiRwcmV2QXJyb3cucmVtb3ZlKCksdC4kbmV4dEFycm93JiYib2JqZWN0IiE9dHlwZW9mIHQub3B0aW9ucy5uZXh0QXJyb3cmJnQuJG5leHRBcnJvdy5yZW1vdmUoKSx0LiRzbGlkZXMucmVtb3ZlQ2xhc3MoInNsaWNrLXNsaWRlIHNsaWNrLWFjdGl2ZSBzbGljay12aXNpYmxlIikuYXR0cigiYXJpYS1oaWRkZW4iLCJ0cnVlIikuY3NzKCJ3aWR0aCIsIiIpfSx0LnByb3RvdHlwZS51bnNsaWNrPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmRlc3Ryb3koKX0sdC5wcm90b3R5cGUudXBkYXRlQXJyb3dzPWZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzO2U9TWF0aC5mbG9vcih0Lm9wdGlvbnMuc2xpZGVzVG9TaG93LzIpLHQub3B0aW9ucy5hcnJvd3M9PT0hMCYmdC5vcHRpb25zLmluZmluaXRlIT09ITAmJnQuc2xpZGVDb3VudD50Lm9wdGlvbnMuc2xpZGVzVG9TaG93JiYodC4kcHJldkFycm93LnJlbW92ZUNsYXNzKCJzbGljay1kaXNhYmxlZCIpLHQuJG5leHRBcnJvdy5yZW1vdmVDbGFzcygic2xpY2stZGlzYWJsZWQiKSwwPT09dC5jdXJyZW50U2xpZGU/KHQuJHByZXZBcnJvdy5hZGRDbGFzcygic2xpY2stZGlzYWJsZWQiKSx0LiRuZXh0QXJyb3cucmVtb3ZlQ2xhc3MoInNsaWNrLWRpc2FibGVkIikpOnQuY3VycmVudFNsaWRlPj10LnNsaWRlQ291bnQtdC5vcHRpb25zLnNsaWRlc1RvU2hvdyYmdC5vcHRpb25zLmNlbnRlck1vZGU9PT0hMT8odC4kbmV4dEFycm93LmFkZENsYXNzKCJzbGljay1kaXNhYmxlZCIpLHQuJHByZXZBcnJvdy5yZW1vdmVDbGFzcygic2xpY2stZGlzYWJsZWQiKSk6dC5jdXJyZW50U2xpZGU+PXQuc2xpZGVDb3VudC0xJiZ0Lm9wdGlvbnMuY2VudGVyTW9kZT09PSEwJiYodC4kbmV4dEFycm93LmFkZENsYXNzKCJzbGljay1kaXNhYmxlZCIpLHQuJHByZXZBcnJvdy5yZW1vdmVDbGFzcygic2xpY2stZGlzYWJsZWQiKSkpfSx0LnByb3RvdHlwZS51cGRhdGVEb3RzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztudWxsIT09ZS4kZG90cyYmKGUuJGRvdHMuZmluZCgibGkiKS5yZW1vdmVDbGFzcygic2xpY2stYWN0aXZlIikuYXR0cigiYXJpYS1oaWRkZW4iLCJ0cnVlIiksZS4kZG90cy5maW5kKCJsaSIpLmVxKE1hdGguZmxvb3IoZS5jdXJyZW50U2xpZGUvZS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKSkuYWRkQ2xhc3MoInNsaWNrLWFjdGl2ZSIpLmF0dHIoImFyaWEtaGlkZGVuIiwiZmFsc2UiKSl9LHQucHJvdG90eXBlLnZpc2liaWxpdHk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2RvY3VtZW50W2UuaGlkZGVuXT8oZS5wYXVzZWQ9ITAsZS5hdXRvUGxheUNsZWFyKCkpOihlLnBhdXNlZD0hMSxlLmF1dG9QbGF5KCkpfSxlLmZuLnNsaWNrPWZ1bmN0aW9uKCl7dmFyIGUsbj10aGlzLGk9YXJndW1lbnRzWzBdLHI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLHM9bi5sZW5ndGgsbz0wO2ZvcihvO3M+bztvKyspaWYoIm9iamVjdCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIGk/bltvXS5zbGljaz1uZXcgdChuW29dLGkpOmU9bltvXS5zbGlja1tpXS5hcHBseShuW29dLnNsaWNrLHIpLCJ1bmRlZmluZWQiIT10eXBlb2YgZSlyZXR1cm4gZTtyZXR1cm4gbn0sZShmdW5jdGlvbigpe2UoIltkYXRhLXNsaWNrXSIpLnNsaWNrKCl9KX0pOw==]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 10:53:56 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/wp-login.php]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/wp-login.php]]></path>
    <extension>php</extension>
    <request base64="true"><![CDATA[R0VUIC93cC1sb2dpbi5waHAgSFRUUC8xLjENCkhvc3Q6IDEwLjEwLjEwLjE4DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdDogKi8qDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODEuMC40MDQ0LjEyMiBTYWZhcmkvNTM3LjM2DQpDb25uZWN0aW9uOiBjbG9zZQ0KDQo=]]></request>
    <status>200</status>
    <responselength>3126</responselength>
    <mimetype>HTML</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA1OjIzOjU2IEdNVA0KU2VydmVyOiBBcGFjaGUNClgtUG93ZXJlZC1CeTogUEhQLzUuNS4yOQ0KRXhwaXJlczogV2VkLCAxMSBKYW4gMTk4NCAwNTowMDowMCBHTVQNCkNhY2hlLUNvbnRyb2w6IG5vLWNhY2hlLCBtdXN0LXJldmFsaWRhdGUsIG1heC1hZ2U9MA0KUHJhZ21hOiBuby1jYWNoZQ0KWC1GcmFtZS1PcHRpb25zOiBTQU1FT1JJR0lODQpTZXQtQ29va2llOiB3b3JkcHJlc3NfdGVzdF9jb29raWU9V1ArQ29va2llK2NoZWNrOyBwYXRoPS8NClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KWC1Nb2QtUGFnZXNwZWVkOiAxLjkuMzIuMy00NTIzDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTAsIG5vLWNhY2hlDQpDb250ZW50LUxlbmd0aDogMjY1Nw0KQ29ubmVjdGlvbjogY2xvc2UNCkNvbnRlbnQtVHlwZTogdGV4dC9odG1sOyBjaGFyc2V0PVVURi04DQoNCjwhRE9DVFlQRSBodG1sPgoJPCEtLVtpZiBJRSA4XT4KCQk8aHRtbCB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgY2xhc3M9ImllOCIgbGFuZz0iZW4tVVMiPgoJPCFbZW5kaWZdLS0+Cgk8IS0tW2lmICEoSUUgOCkgXT48IS0tPgoJCTxodG1sIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBsYW5nPSJlbi1VUyI+Cgk8IS0tPCFbZW5kaWZdLS0+Cgk8aGVhZD4KCTxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04Ii8+Cgk8dGl0bGU+dXNlciYjMDM5O3MgQmxvZyEgJnJzYXF1bzsgTG9nIEluPC90aXRsZT4KCTxsaW5rIHJlbD0nc3R5bGVzaGVldCcgaWQ9J2J1dHRvbnMtY3NzJyBocmVmPSdodHRwOi8vMTAuMTAuMTAuMTgvd3AtaW5jbHVkZXMvY3NzL2J1dHRvbnMubWluLmNzcyxxdmVyPTQuMy4xLnBhZ2VzcGVlZC5jZS5aUUVSemNydWJHLmNzcycgdHlwZT0ndGV4dC9jc3MnIG1lZGlhPSdhbGwnLz4KPGxpbmsgcmVsPSdzdHlsZXNoZWV0JyBpZD0nb3Blbi1zYW5zLWNzcycgaHJlZj0naHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PU9wZW4rU2FucyUzQTMwMGl0YWxpYyUyQzQwMGl0YWxpYyUyQzYwMGl0YWxpYyUyQzMwMCUyQzQwMCUyQzYwMCYjMDM4O3N1YnNldD1sYXRpbiUyQ2xhdGluLWV4dCYjMDM4O3Zlcj00LjMuMScgdHlwZT0ndGV4dC9jc3MnIG1lZGlhPSdhbGwnLz4KPGxpbmsgcmVsPSdzdHlsZXNoZWV0JyBpZD0nZGFzaGljb25zLWNzcycgaHJlZj0naHR0cDovLzEwLjEwLjEwLjE4L3dwLWluY2x1ZGVzL2Nzcy9kYXNoaWNvbnMubWluLmNzcyxxdmVyPTQuMy4xLnBhZ2VzcGVlZC5jZS41bC1XMVBVaWV6LmNzcycgdHlwZT0ndGV4dC9jc3MnIG1lZGlhPSdhbGwnLz4KPGxpbmsgcmVsPSdzdHlsZXNoZWV0JyBpZD0nbG9naW4tY3NzJyBocmVmPSdodHRwOi8vMTAuMTAuMTAuMTgvd3AtYWRtaW4vY3NzL2xvZ2luLm1pbi5jc3M/dmVyPTQuMy4xJyB0eXBlPSd0ZXh0L2NzcycgbWVkaWE9J2FsbCcvPgo8bWV0YSBuYW1lPSdyb2JvdHMnIGNvbnRlbnQ9J25vaW5kZXgsZm9sbG93Jy8+Cgk8L2hlYWQ+Cgk8Ym9keSBjbGFzcz0ibG9naW4gbG9naW4tYWN0aW9uLWxvZ2luIHdwLWNvcmUtdWkgIGxvY2FsZS1lbi11cyI+Cgk8ZGl2IGlkPSJsb2dpbiI+CgkJPGgxPjxhIGhyZWY9Imh0dHBzOi8vd29yZHByZXNzLm9yZy8iIHRpdGxlPSJQb3dlcmVkIGJ5IFdvcmRQcmVzcyIgdGFiaW5kZXg9Ii0xIj51c2VyJiMwMzk7cyBCbG9nITwvYT48L2gxPgoJCjxmb3JtIG5hbWU9ImxvZ2luZm9ybSIgaWQ9ImxvZ2luZm9ybSIgYWN0aW9uPSJodHRwOi8vMTAuMTAuMTAuMTgvd3AtbG9naW4ucGhwIiBtZXRob2Q9InBvc3QiPgoJPHA+CgkJPGxhYmVsIGZvcj0idXNlcl9sb2dpbiI+VXNlcm5hbWU8YnIvPgoJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJsb2ciIGlkPSJ1c2VyX2xvZ2luIiBjbGFzcz0iaW5wdXQiIHZhbHVlPSIiIHNpemU9IjIwIi8+PC9sYWJlbD4KCTwvcD4KCTxwPgoJCTxsYWJlbCBmb3I9InVzZXJfcGFzcyI+UGFzc3dvcmQ8YnIvPgoJCTxpbnB1dCB0eXBlPSJwYXNzd29yZCIgbmFtZT0icHdkIiBpZD0idXNlcl9wYXNzIiBjbGFzcz0iaW5wdXQiIHZhbHVlPSIiIHNpemU9IjIwIi8+PC9sYWJlbD4KCTwvcD4KCQk8cCBjbGFzcz0iZm9yZ2V0bWVub3QiPjxsYWJlbCBmb3I9InJlbWVtYmVybWUiPjxpbnB1dCBuYW1lPSJyZW1lbWJlcm1lIiB0eXBlPSJjaGVja2JveCIgaWQ9InJlbWVtYmVybWUiIHZhbHVlPSJmb3JldmVyIi8+IFJlbWVtYmVyIE1lPC9sYWJlbD48L3A+Cgk8cCBjbGFzcz0ic3VibWl0Ij4KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJ3cC1zdWJtaXQiIGlkPSJ3cC1zdWJtaXQiIGNsYXNzPSJidXR0b24gYnV0dG9uLXByaW1hcnkgYnV0dG9uLWxhcmdlIiB2YWx1ZT0iTG9nIEluIi8+CgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icmVkaXJlY3RfdG8iIHZhbHVlPSJodHRwOi8vMTAuMTAuMTAuMTgvd3AtYWRtaW4vIi8+CgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0idGVzdGNvb2tpZSIgdmFsdWU9IjEiLz4KCTwvcD4KPC9mb3JtPgoKPHAgaWQ9Im5hdiI+Cgk8YSBocmVmPSJodHRwOi8vMTAuMTAuMTAuMTgvd3AtbG9naW4ucGhwP2FjdGlvbj1sb3N0cGFzc3dvcmQiIHRpdGxlPSJQYXNzd29yZCBMb3N0IGFuZCBGb3VuZCI+TG9zdCB5b3VyIHBhc3N3b3JkPzwvYT4KPC9wPgoKPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPmZ1bmN0aW9uIHdwX2F0dGVtcHRfZm9jdXMoKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dHJ5e2Q9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfbG9naW4nKTtkLmZvY3VzKCk7ZC5zZWxlY3QoKTt9Y2F0Y2goZSl7fX0sMjAwKTt9CndwX2F0dGVtcHRfZm9jdXMoKTtpZih0eXBlb2Ygd3BPbmxvYWQ9PSdmdW5jdGlvbicpd3BPbmxvYWQoKTs8L3NjcmlwdD4KCgk8cCBpZD0iYmFja3RvYmxvZyI+PGEgaHJlZj0iaHR0cDovLzEwLjEwLjEwLjE4LyIgdGl0bGU9IkFyZSB5b3UgbG9zdD8iPiZsYXJyOyBCYWNrIHRvIHVzZXImIzAzOTtzIEJsb2chPC9hPjwvcD4KCQoJPC9kaXY+CgoJCgkJPGRpdiBjbGFzcz0iY2xlYXIiPjwvZGl2PgoJPC9ib2R5PgoJPC9odG1sPgoJ]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 10:54:19 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/wp-login.php]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[POST]]></method>
    <path><![CDATA[/wp-login.php]]></path>
    <extension>php</extension>
    <request base64="true"><![CDATA[UE9TVCAvd3AtbG9naW4ucGhwIEhUVFAvMS4xDQpIb3N0OiAxMC4xMC4xMC4xOA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgcnY6NjguMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC82OC4wDQpBY2NlcHQ6IHRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsKi8qO3E9MC44DQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC41DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkDQpDb250ZW50LUxlbmd0aDogOTgNCk9yaWdpbjogaHR0cDovLzEwLjEwLjEwLjE4DQpETlQ6IDENCkNvbm5lY3Rpb246IGNsb3NlDQpSZWZlcmVyOiBodHRwOi8vMTAuMTAuMTAuMTgvd3AtbG9naW4ucGhwDQpDb29raWU6IHNfY2M9dHJ1ZTsgc19maWQ9MUQ4N0M0QzVGMUZERDUxOS0yMTg5RjdBRDA4Qjg1QzJFOyBzX25yPTE1OTA2MzcxMzkwMDA7IHNfc3E9JTVCJTVCQiU1RCU1RDsgd29yZHByZXNzX3Rlc3RfY29va2llPVdQK0Nvb2tpZStjaGVjaw0KVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0czogMQ0KDQpsb2c9dGVzdCZwd2Q9dGVzdCZ3cC1zdWJtaXQ9TG9nK0luJnJlZGlyZWN0X3RvPWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRndwLWFkbWluJTJGJnRlc3Rjb29raWU9MQ==]]></request>
    <status>200</status>
    <responselength>4024</responselength>
    <mimetype>HTML</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA1OjI0OjE4IEdNVA0KU2VydmVyOiBBcGFjaGUNClgtUG93ZXJlZC1CeTogUEhQLzUuNS4yOQ0KRXhwaXJlczogV2VkLCAxMSBKYW4gMTk4NCAwNTowMDowMCBHTVQNCkNhY2hlLUNvbnRyb2w6IG5vLWNhY2hlLCBtdXN0LXJldmFsaWRhdGUsIG1heC1hZ2U9MA0KUHJhZ21hOiBuby1jYWNoZQ0KWC1GcmFtZS1PcHRpb25zOiBTQU1FT1JJR0lODQpTZXQtQ29va2llOiB3b3JkcHJlc3NfdGVzdF9jb29raWU9V1ArQ29va2llK2NoZWNrOyBwYXRoPS8NClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KWC1Nb2QtUGFnZXNwZWVkOiAxLjkuMzIuMy00NTIzDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTAsIG5vLWNhY2hlDQpDb250ZW50LUxlbmd0aDogMzU1NQ0KQ29ubmVjdGlvbjogY2xvc2UNCkNvbnRlbnQtVHlwZTogdGV4dC9odG1sOyBjaGFyc2V0PVVURi04DQoNCjwhRE9DVFlQRSBodG1sPgoJPCEtLVtpZiBJRSA4XT4KCQk8aHRtbCB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgY2xhc3M9ImllOCIgbGFuZz0iZW4tVVMiPgoJPCFbZW5kaWZdLS0+Cgk8IS0tW2lmICEoSUUgOCkgXT48IS0tPgoJCTxodG1sIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBsYW5nPSJlbi1VUyI+Cgk8IS0tPCFbZW5kaWZdLS0+Cgk8aGVhZD4KCTxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04Ii8+Cgk8dGl0bGU+dXNlciYjMDM5O3MgQmxvZyEgJnJzYXF1bzsgTG9nIEluPC90aXRsZT4KCTxsaW5rIHJlbD0nc3R5bGVzaGVldCcgaWQ9J2J1dHRvbnMtY3NzJyBocmVmPSdodHRwOi8vMTAuMTAuMTAuMTgvd3AtaW5jbHVkZXMvY3NzL2J1dHRvbnMubWluLmNzcyxxdmVyPTQuMy4xLnBhZ2VzcGVlZC5jZS5aUUVSemNydWJHLmNzcycgdHlwZT0ndGV4dC9jc3MnIG1lZGlhPSdhbGwnLz4KPGxpbmsgcmVsPSdzdHlsZXNoZWV0JyBpZD0nb3Blbi1zYW5zLWNzcycgaHJlZj0naHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PU9wZW4rU2FucyUzQTMwMGl0YWxpYyUyQzQwMGl0YWxpYyUyQzYwMGl0YWxpYyUyQzMwMCUyQzQwMCUyQzYwMCYjMDM4O3N1YnNldD1sYXRpbiUyQ2xhdGluLWV4dCYjMDM4O3Zlcj00LjMuMScgdHlwZT0ndGV4dC9jc3MnIG1lZGlhPSdhbGwnLz4KPGxpbmsgcmVsPSdzdHlsZXNoZWV0JyBpZD0nZGFzaGljb25zLWNzcycgaHJlZj0naHR0cDovLzEwLjEwLjEwLjE4L3dwLWluY2x1ZGVzL2Nzcy9kYXNoaWNvbnMubWluLmNzcz92ZXI9NC4zLjEnIHR5cGU9J3RleHQvY3NzJyBtZWRpYT0nYWxsJy8+CjxsaW5rIHJlbD0nc3R5bGVzaGVldCcgaWQ9J2xvZ2luLWNzcycgaHJlZj0naHR0cDovLzEwLjEwLjEwLjE4L3dwLWFkbWluL2Nzcy9sb2dpbi5taW4uY3NzP3Zlcj00LjMuMScgdHlwZT0ndGV4dC9jc3MnIG1lZGlhPSdhbGwnLz4KPG1ldGEgbmFtZT0ncm9ib3RzJyBjb250ZW50PSdub2luZGV4LGZvbGxvdycvPgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+YWRkTG9hZEV2ZW50PWZ1bmN0aW9uKGZ1bmMpe2lmKHR5cGVvZiBqUXVlcnkhPSJ1bmRlZmluZWQiKWpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuYyk7ZWxzZSBpZih0eXBlb2Ygd3BPbmxvYWQhPSdmdW5jdGlvbicpe3dwT25sb2FkPWZ1bmM7fWVsc2V7dmFyIG9sZG9ubG9hZD13cE9ubG9hZDt3cE9ubG9hZD1mdW5jdGlvbigpe29sZG9ubG9hZCgpO2Z1bmMoKTt9fX07ZnVuY3Rpb24gcyhpZCxwb3Mpe2coaWQpLmxlZnQ9cG9zKydweCc7fQpmdW5jdGlvbiBnKGlkKXtyZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnN0eWxlO30KZnVuY3Rpb24gc2hha2UoaWQsYSxkKXtjPWEuc2hpZnQoKTtzKGlkLGMpO2lmKGEubGVuZ3RoPjApe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzaGFrZShpZCxhLGQpO30sZCk7fWVsc2V7dHJ5e2coaWQpLnBvc2l0aW9uPSdzdGF0aWMnO3dwX2F0dGVtcHRfZm9jdXMoKTt9Y2F0Y2goZSl7fX19CmFkZExvYWRFdmVudChmdW5jdGlvbigpe3ZhciBwPW5ldyBBcnJheSgxNSwzMCwxNSwwLC0xNSwtMzAsLTE1LDApO3A9cC5jb25jYXQocC5jb25jYXQocCkpO3ZhciBpPWRvY3VtZW50LmZvcm1zWzBdLmlkO2coaSkucG9zaXRpb249J3JlbGF0aXZlJztzaGFrZShpLHAsMjApO30pOzwvc2NyaXB0PgoJPC9oZWFkPgoJPGJvZHkgY2xhc3M9ImxvZ2luIGxvZ2luLWFjdGlvbi1sb2dpbiB3cC1jb3JlLXVpICBsb2NhbGUtZW4tdXMiPgoJPGRpdiBpZD0ibG9naW4iPgoJCTxoMT48YSBocmVmPSJodHRwczovL3dvcmRwcmVzcy5vcmcvIiB0aXRsZT0iUG93ZXJlZCBieSBXb3JkUHJlc3MiIHRhYmluZGV4PSItMSI+dXNlciYjMDM5O3MgQmxvZyE8L2E+PC9oMT4KCTxkaXYgaWQ9ImxvZ2luX2Vycm9yIj4JPHN0cm9uZz5FUlJPUjwvc3Ryb25nPjogSW52YWxpZCB1c2VybmFtZS4gPGEgaHJlZj0iaHR0cDovLzEwLjEwLjEwLjE4L3dwLWxvZ2luLnBocD9hY3Rpb249bG9zdHBhc3N3b3JkIj5Mb3N0IHlvdXIgcGFzc3dvcmQ/PC9hPjxici8+CjwvZGl2PgoKPGZvcm0gbmFtZT0ibG9naW5mb3JtIiBpZD0ibG9naW5mb3JtIiBhY3Rpb249Imh0dHA6Ly8xMC4xMC4xMC4xOC93cC1sb2dpbi5waHAiIG1ldGhvZD0icG9zdCI+Cgk8cD4KCQk8bGFiZWwgZm9yPSJ1c2VyX2xvZ2luIj5Vc2VybmFtZTxici8+CgkJPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImxvZyIgaWQ9InVzZXJfbG9naW4iIGFyaWEtZGVzY3JpYmVkYnk9ImxvZ2luX2Vycm9yIiBjbGFzcz0iaW5wdXQiIHZhbHVlPSIiIHNpemU9IjIwIi8+PC9sYWJlbD4KCTwvcD4KCTxwPgoJCTxsYWJlbCBmb3I9InVzZXJfcGFzcyI+UGFzc3dvcmQ8YnIvPgoJCTxpbnB1dCB0eXBlPSJwYXNzd29yZCIgbmFtZT0icHdkIiBpZD0idXNlcl9wYXNzIiBhcmlhLWRlc2NyaWJlZGJ5PSJsb2dpbl9lcnJvciIgY2xhc3M9ImlucHV0IiB2YWx1ZT0iIiBzaXplPSIyMCIvPjwvbGFiZWw+Cgk8L3A+CgkJPHAgY2xhc3M9ImZvcmdldG1lbm90Ij48bGFiZWwgZm9yPSJyZW1lbWJlcm1lIj48aW5wdXQgbmFtZT0icmVtZW1iZXJtZSIgdHlwZT0iY2hlY2tib3giIGlkPSJyZW1lbWJlcm1lIiB2YWx1ZT0iZm9yZXZlciIvPiBSZW1lbWJlciBNZTwvbGFiZWw+PC9wPgoJPHAgY2xhc3M9InN1Ym1pdCI+CgkJPGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0id3Atc3VibWl0IiBpZD0id3Atc3VibWl0IiBjbGFzcz0iYnV0dG9uIGJ1dHRvbi1wcmltYXJ5IGJ1dHRvbi1sYXJnZSIgdmFsdWU9IkxvZyBJbiIvPgoJCTxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InJlZGlyZWN0X3RvIiB2YWx1ZT0iaHR0cDovLzEwLjEwLjEwLjE4L3dwLWFkbWluLyIvPgoJCTxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InRlc3Rjb29raWUiIHZhbHVlPSIxIi8+Cgk8L3A+CjwvZm9ybT4KCjxwIGlkPSJuYXYiPgoJPGEgaHJlZj0iaHR0cDovLzEwLjEwLjEwLjE4L3dwLWxvZ2luLnBocD9hY3Rpb249bG9zdHBhc3N3b3JkIiB0aXRsZT0iUGFzc3dvcmQgTG9zdCBhbmQgRm91bmQiPkxvc3QgeW91ciBwYXNzd29yZD88L2E+CjwvcD4KCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij5mdW5jdGlvbiB3cF9hdHRlbXB0X2ZvY3VzKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3RyeXtkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyX2xvZ2luJyk7aWYoZC52YWx1ZSE9JycpCmQudmFsdWU9Jyc7ZC5mb2N1cygpO2Quc2VsZWN0KCk7fWNhdGNoKGUpe319LDIwMCk7fQp3cF9hdHRlbXB0X2ZvY3VzKCk7aWYodHlwZW9mIHdwT25sb2FkPT0nZnVuY3Rpb24nKXdwT25sb2FkKCk7PC9zY3JpcHQ+CgoJPHAgaWQ9ImJhY2t0b2Jsb2ciPjxhIGhyZWY9Imh0dHA6Ly8xMC4xMC4xMC4xOC8iIHRpdGxlPSJBcmUgeW91IGxvc3Q/Ij4mbGFycjsgQmFjayB0byB1c2VyJiMwMzk7cyBCbG9nITwvYT48L3A+CgkKCTwvZGl2PgoKCQoJCTxkaXYgY2xhc3M9ImNsZWFyIj48L2Rpdj4KCTwvYm9keT4KCTwvaHRtbD4KCQ==]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 11:04:56 IST 2020</time>
    <url><![CDATA[http://detectportal.firefox.com/success.txt]]></url>
    <host ip="23.32.28.74">detectportal.firefox.com</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/success.txt]]></path>
    <extension>txt</extension>
    <request base64="true"><![CDATA[R0VUIC9zdWNjZXNzLnR4dCBIVFRQLzEuMQ0KSG9zdDogZGV0ZWN0cG9ydGFsLmZpcmVmb3guY29tDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBydjo2OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzY4LjANCkFjY2VwdDogKi8qDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC41DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkNhY2hlLUNvbnRyb2w6IG5vLWNhY2hlDQpQcmFnbWE6IG5vLWNhY2hlDQpETlQ6IDENCkNvbm5lY3Rpb246IGNsb3NlDQoNCg==]]></request>
    <status>200</status>
    <responselength>402</responselength>
    <mimetype>text</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvcGxhaW4NCkNvbnRlbnQtTGVuZ3RoOiA4DQpMYXN0LU1vZGlmaWVkOiBNb24sIDE1IE1heSAyMDE3IDE4OjA0OjQwIEdNVA0KRVRhZzogImFlNzgwNTg1ZjQ5Yjk0Y2UxNDQ0ZWI3ZDI4OTA2MTIzIg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNClNlcnZlcjogQW1hem9uUzMNClgtQW16LUNmLVBvcDogU0lOMi1DMQ0KWC1BbXotQ2YtSWQ6IGFFeXJ1ZjB1OHlQTTdJM1o4X25BNjlGQ3J0em04a3FuWWhmTDI3S3VhUFZEYnItbkJSbkRvZz09DQpDYWNoZS1Db250cm9sOiBuby1jYWNoZSwgbm8tc3RvcmUsIG11c3QtcmV2YWxpZGF0ZQ0KRGF0ZTogVGh1LCAyOCBNYXkgMjAyMCAwNTozNDo1MyBHTVQNCkNvbm5lY3Rpb246IGNsb3NlDQoNCnN1Y2Nlc3MK]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 10:46:18 IST 2020</time>
    <url><![CDATA[http://oimg.nbcuni.com/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s11665258784903?AQB=1&ndh=1&t=28%2F4%2F2020%205%3A16%3A13%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up%20%3A%20Loading%20Sequence&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Features&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up&c6=http%3A%2F%2F10.10.10.18%2F&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up%20%3A%20Loading%20Sequence&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up%20%3A%20Loading%20Sequence&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Features&v43=http%3A%2F%2F10.10.10.18%2F&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CFeatures%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&pid=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Inform%20Gallery%20%3A%20Photo%201&pidt=1&oid=%0A%09%0A%09%09%0A%09%09%0A%09%0A&oidt=3&ot=SUBMIT&AQE=1]]></url>
    <host ip="13.235.4.163">oimg.nbcuni.com</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s11665258784903?AQB=1&ndh=1&t=28%2F4%2F2020%205%3A16%3A13%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up%20%3A%20Loading%20Sequence&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Features&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up&c6=http%3A%2F%2F10.10.10.18%2F&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up%20%3A%20Loading%20Sequence&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up%20%3A%20Loading%20Sequence&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Features&v43=http%3A%2F%2F10.10.10.18%2F&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CFeatures%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&pid=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Inform%20Gallery%20%3A%20Photo%201&pidt=1&oid=%0A%09%0A%09%09%0A%09%09%0A%09%0A&oidt=3&ot=SUBMIT&AQE=1]]></path>
    <extension>null</extension>
    <request base64="true"><![CDATA[R0VUIC9iL3NzL25iY3VnbG9iYWwsbmJjdXVzYW5ldHdvcmtkLzEvSC4yNy41L3MxMTY2NTI1ODc4NDkwMz9BUUI9MSZuZGg9MSZ0PTI4JTJGNCUyRjIwMjAlMjA1JTNBMTYlM0ExMyUyMDQlMjAwJmZpZD0xRDg3QzRDNUYxRkRENTE5LTIxODlGN0FEMDhCODVDMkUmY2U9VVRGLTgmbnM9bmJjdW5pdmVyc2FsJnBhZ2VOYW1lPU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEVtYWlsJTIwU2lnbi1VcCUyMCUzQSUyMExvYWRpbmclMjBTZXF1ZW5jZSZnPWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRiZjYz1VU0Qmc2VydmVyPTEwLjEwLjEwLjE4JmV2ZW50cz1ldmVudDYmYzI9RHJhbWEmYzM9RmVhdHVyZXMmYzQ9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JnY0PUQlM0RjNCZjNT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBFbWFpbCUyMFNpZ24tVXAmYzY9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGJmM4PUNhYmxlJnY4PUNhYmxlJmM5PVVTQSUyME5ldHdvcmsmdjk9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwRW1haWwlMjBTaWduLVVwJTIwJTNBJTIwTG9hZGluZyUyMFNlcXVlbmNlJmMxMD1Nci4lMjBSb2JvdCZ2MTA9RCUzRGMxMCZjMTE9TXIuJTIwUm9ib3QlMjAlN0MlMjBNci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBFbWFpbCUyMFNpZ24tVXAlMjAlM0ElMjBMb2FkaW5nJTIwU2VxdWVuY2UmYzEyPVVTQSUyME5ldHdvcmslMjAlN0MlMjBNci4lMjBSb2JvdCZjMTM9UmVwZWF0JmMzMj1OZXclMjBTaXRlJnYzMj1GZWF0dXJlcyZ2NDM9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGJnY0NT1VU0ElMjBOZXR3b3JrJmM2MD1Ob3QlMjBTcG9uc29yZWQmYzY4PUQlM0R2NjgmdjY4PURlc2t0b3AlMjBMYXJnZSZjNjk9RCUzRHY2OSZ2Njk9NTg0JmM3MD1EJTNEdjcwJnY3MD0xMzQyJmM3MT1EJTNEdjcxJnY3MT1EZXNrdG9wJmgxPUNhYmxlJTdDVVNBJTIwTmV0d29yayU3Q01yLiUyMFJvYm90JmgyPURyYW1hJTdDTXIuJTIwUm9ib3QlN0NGZWF0dXJlcyU3Q01yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCZoMz0xMC4xMC4xMC4xOCZzPTEzNDJ4NTg0JmM9MjQmaj0xLjYmdj1OJms9WSZidz0xMzQyJmJoPTU4NCZwaWQ9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwSW5mb3JtJTIwR2FsbGVyeSUyMCUzQSUyMFBob3RvJTIwMSZwaWR0PTEmb2lkPSUwQSUwOSUwQSUwOSUwOSUwQSUwOSUwOSUwQSUwOSUwQSZvaWR0PTMmb3Q9U1VCTUlUJkFRRT0xIEhUVFAvMS4xDQpIb3N0OiBvaW1nLm5iY3VuaS5jb20NClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IHJ2OjY4LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvNjguMA0KQWNjZXB0OiBpbWFnZS93ZWJwLCovKg0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuNQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpETlQ6IDENCkNvbm5lY3Rpb246IGNsb3NlDQpSZWZlcmVyOiBodHRwOi8vMTAuMTAuMTAuMTgvDQoNCg==]]></request>
    <status>302</status>
    <responselength>2135</responselength>
    <mimetype></mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMzAyIEZvdW5kDQp4c2VydmVyOiBhbmVkZ2UtNWQ4ZjU4ODRjYy0yOXhmNQ0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQp4LWM6IG1hc3Rlci0xMjgxLkkzNGRhZWQuTTAtNDA2DQpkYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA1OjE2OjE2IEdNVA0KY29udGVudC10eXBlOiB0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgNCmV4cGlyZXM6IFdlZCwgMjcgTWF5IDIwMjAgMDU6MTY6MTcgR01UDQpsYXN0LW1vZGlmaWVkOiBGcmksIDI5IE1heSAyMDIwIDA1OjE2OjE3IEdNVA0KcHJhZ21hOiBuby1jYWNoZQ0KcDNwOiBDUD0iVGhpcyBpcyBub3QgYSBQM1AgcG9saWN5Ig0Kc2VydmVyOiBqYWcNCnNldC1jb29raWU6IHNfdmk9W0NTXXYxfDJGNjdBNDkwODUxNTkzMUUtNDAwMDA3RDIyQjJFQzNFNFtDRV07IFBhdGg9LzsgRG9tYWluPW5iY3VuaS5jb207IE1heC1BZ2U9NjMwNzIwMDA7IEV4cGlyZXM9U2F0LCAyOCBNYXkgMjAyMiAwNToxNjoxNiBHTVQ7IA0KbG9jYXRpb246IGh0dHA6Ly9vaW1nLm5iY3VuaS5jb20vYi9zcy9uYmN1Z2xvYmFsLG5iY3V1c2FuZXR3b3JrZC8xL0guMjcuNS9zMTE2NjUyNTg3ODQ5MDM/QVFCPTEmcGNjcj10cnVlJnZpZG49MkY2N0E0OTA4NTE1OTMxRS00MDAwMDdEMjJCMkVDM0U0Jm5kaD0xJnQ9MjglMkY0JTJGMjAyMCUyMDUlM0ExNiUzQTEzJTIwNCUyMDAmZmlkPTFEODdDNEM1RjFGREQ1MTktMjE4OUY3QUQwOEI4NUMyRSZjZT1VVEYtOCZucz1uYmN1bml2ZXJzYWwmcGFnZU5hbWU9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwRW1haWwlMjBTaWduLVVwJTIwJTNBJTIwTG9hZGluZyUyMFNlcXVlbmNlJmc9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGJmNjPVVTRCZzZXJ2ZXI9MTAuMTAuMTAuMTgmZXZlbnRzPWV2ZW50NiZjMj1EcmFtYSZjMz1GZWF0dXJlcyZjND1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QmdjQ9RCUzRGM0JmM1PU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEVtYWlsJTIwU2lnbi1VcCZjNj1odHRwJTNBJTJGJTJGMTAuMTAuMTAuMTglMkYmYzg9Q2FibGUmdjg9Q2FibGUmYzk9VVNBJTIwTmV0d29yayZ2OT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBFbWFpbCUyMFNpZ24tVXAlMjAlM0ElMjBMb2FkaW5nJTIwU2VxdWVuY2UmYzEwPU1yLiUyMFJvYm90JnYxMD1EJTNEYzEwJmMxMT1Nci4lMjBSb2JvdCUyMCU3QyUyME1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEVtYWlsJTIwU2lnbi1VcCUyMCUzQSUyMExvYWRpbmclMjBTZXF1ZW5jZSZjMTI9VVNBJTIwTmV0d29yayUyMCU3QyUyME1yLiUyMFJvYm90JmMxMz1SZXBlYXQmYzMyPU5ldyUyMFNpdGUmdjMyPUZlYXR1cmVzJnY0Mz1odHRwJTNBJTJGJTJGMTAuMTAuMTAuMTglMkYmdjQ1PVVTQSUyME5ldHdvcmsmYzYwPU5vdCUyMFNwb25zb3JlZCZjNjg9RCUzRHY2OCZ2Njg9RGVza3RvcCUyMExhcmdlJmM2OT1EJTNEdjY5JnY2OT01ODQmYzcwPUQlM0R2NzAmdjcwPTEzNDImYzcxPUQlM0R2NzEmdjcxPURlc2t0b3AmaDE9Q2FibGUlN0NVU0ElMjBOZXR3b3JrJTdDTXIuJTIwUm9ib3QmaDI9RHJhbWElN0NNci4lMjBSb2JvdCU3Q0ZlYXR1cmVzJTdDTXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JmgzPTEwLjEwLjEwLjE4JnM9MTM0Mng1ODQmYz0yNCZqPTEuNiZ2PU4maz1ZJmJ3PTEzNDImYmg9NTg0JnBpZD1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBJbmZvcm0lMjBHYWxsZXJ5JTIwJTNBJTIwUGhvdG8lMjAxJnBpZHQ9MSZvaWQ9JTBBJTA5JTBBJTA5JTA5JTBBJTA5JTA5JTBBJTA5JTBBJm9pZHQ9MyZvdD1TVUJNSVQmQVFFPTENCmNvbnRlbnQtbGVuZ3RoOiAwDQpjYWNoZS1jb250cm9sOiBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbm8tdHJhbnNmb3JtLCBwcml2YXRlDQp4LXhzcy1wcm90ZWN0aW9uOiAxOyBtb2RlPWJsb2NrDQp4LWNvbnRlbnQtdHlwZS1vcHRpb25zOiBub3NuaWZmDQpjb25uZWN0aW9uOiBjbG9zZQ0KDQo=]]></response>
    <comment></comment>
  </item>
</items>
