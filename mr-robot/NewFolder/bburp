<?xml version="1.0"?>
<!DOCTYPE items [
<!ELEMENT items (item*)>
<!ATTLIST items burpVersion CDATA "">
<!ATTLIST items exportTime CDATA "">
<!ELEMENT item (time, url, host, port, protocol, method, path, extension, request, status, responselength, mimetype, response, comment)>
<!ELEMENT time (#PCDATA)>
<!ELEMENT url (#PCDATA)>
<!ELEMENT host (#PCDATA)>
<!ATTLIST host ip CDATA "">
<!ELEMENT port (#PCDATA)>
<!ELEMENT protocol (#PCDATA)>
<!ELEMENT method (#PCDATA)>
<!ELEMENT path (#PCDATA)>
<!ELEMENT extension (#PCDATA)>
<!ELEMENT request (#PCDATA)>
<!ATTLIST request base64 (true|false) "false">
<!ELEMENT status (#PCDATA)>
<!ELEMENT responselength (#PCDATA)>
<!ELEMENT mimetype (#PCDATA)>
<!ELEMENT response (#PCDATA)>
<!ATTLIST response base64 (true|false) "false">
<!ELEMENT comment (#PCDATA)>
]>
<items burpVersion="2020.4" exportTime="Thu May 28 10:23:21 IST 2020">
  <item>
    <time>Thu May 28 09:48:48 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/]]></path>
    <extension>null</extension>
    <request base64="true"><![CDATA[R0VUIC8gSFRUUC8xLjENCkhvc3Q6IDEwLjEwLjEwLjE4DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBydjo2OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzY4LjANCkFjY2VwdDogdGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCwqLyo7cT0wLjgNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KRE5UOiAxDQpDb25uZWN0aW9uOiBjbG9zZQ0KQ29va2llOiBzX2NjPXRydWU7IHNfZmlkPTFEODdDNEM1RjFGREQ1MTktMjE4OUY3QUQwOEI4NUMyRTsgc19ucj0xNTkwNjM3MTM5MDAwOyBzX3NxPSU1QiU1QkIlNUQlNUQNClVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHM6IDENCkNhY2hlLUNvbnRyb2w6IG1heC1hZ2U9MA0KDQo=]]></request>
    <status>200</status>
    <responselength>1468</responselength>
    <mimetype>HTML</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA0OjE4OjQ3IEdNVA0KU2VydmVyOiBBcGFjaGUNClgtRnJhbWUtT3B0aW9uczogU0FNRU9SSUdJTg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KWC1Nb2QtUGFnZXNwZWVkOiAxLjkuMzIuMy00NTIzDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTAsIG5vLWNhY2hlDQpDb250ZW50LUxlbmd0aDogMTE4OA0KQ29ubmVjdGlvbjogY2xvc2UNCkNvbnRlbnQtVHlwZTogdGV4dC9odG1sDQoNCjwhZG9jdHlwZSBodG1sPgo8IS0tClwgICAvL35+XCB8ICAgfCAgICAvXCAgfH5+XHx+fiAgfFwgIHwgL35+XH5+fH5+ICAgIC9cICB8ICAvfn5cIHxcICB8fH5+CiBcIC98ICAgIHx8ICAgfCAgIC9fX1wgfF9fL3wtLSAgfCBcIHx8ICAgIHwgfCAgICAgL19fXCB8IHwgICAgfHwgXCB8fC0tCiAgfCAgXF9fLyAgXF8vICAgLyAgICBcfCAgXHxfXyAgfCAgXHwgXF9fLyAgfCAgICAvICAgIFx8X19cX18vIHwgIFx8fF9fCi0tPgo8aHRtbCBjbGFzcz0ibm8tanMiIGxhbmc9IiI+CiAgPGhlYWQ+CiAgICAKCiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9ImNzcy9BLm1haW4tNjAwYTk3OTEuY3NzLnBhZ2VzcGVlZC5jZi5KSzZublpwU2QyLmNzcyI+CgogICAgPHNjcmlwdCBzcmM9ImpzL3ZlbmRvci92ZW5kb3ItNDhjYTQ1NWMuanMucGFnZXNwZWVkLmptLlY3UWZ3NmJkNUMuanMiPjwvc2NyaXB0PgoKICAgIDxzY3JpcHQ+dmFyIFVTRVJfSVA9JzIwOC4xODUuMTE1LjYnO3ZhciBCQVNFX1VSTD0naW5kZXguaHRtbCc7dmFyIFJFVFVSTl9VUkw9J2luZGV4Lmh0bWwnO3ZhciBSRURJUkVDVD1mYWxzZTt3aW5kb3cubG9nPWZ1bmN0aW9uKCl7bG9nLmhpc3Rvcnk9bG9nLmhpc3Rvcnl8fFtdO2xvZy5oaXN0b3J5LnB1c2goYXJndW1lbnRzKTtpZih0aGlzLmNvbnNvbGUpe2NvbnNvbGUubG9nKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO319Ozwvc2NyaXB0PgoKICA8L2hlYWQ+CiAgPGJvZHk+CiAgICA8IS0tW2lmIGx0IElFIDldPgogICAgICA8cCBjbGFzcz0iYnJvd3NlcnVwZ3JhZGUiPllvdSBhcmUgdXNpbmcgYW4gPHN0cm9uZz5vdXRkYXRlZDwvc3Ryb25nPiBicm93c2VyLiBQbGVhc2UgPGEgaHJlZj0iaHR0cDovL2Jyb3dzZWhhcHB5LmNvbS8iPnVwZ3JhZGUgeW91ciBicm93c2VyPC9hPiB0byBpbXByb3ZlIHlvdXIgZXhwZXJpZW5jZS48L3A+CiAgICAKCiAgICA8IS0tIEdvb2dsZSBQbHVzIGNvbmZpcm1hdGlvbiAtLT4KICAgIDxkaXYgaWQ9ImFwcCI+PC9kaXY+CgogICAgCiAgICA8c2NyaXB0IHNyYz0ianMvc19jb2RlLmpzLnBhZ2VzcGVlZC5qbS5JNzhjZkhRcGJRLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJqcy9tYWluLWFjYmEwNmE1LmpzLnBhZ2VzcGVlZC5qbS5ZZFNiMnoxcmloLmpzIj48L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg==]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 09:48:53 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/audio/beep.ogg]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/audio/beep.ogg]]></path>
    <extension>ogg</extension>
    <request base64="true"><![CDATA[R0VUIC9hdWRpby9iZWVwLm9nZyBIVFRQLzEuMQ0KSG9zdDogMTAuMTAuMTAuMTgNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IHJ2OjY4LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvNjguMA0KQWNjZXB0OiAqLyoNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KWC1SZXF1ZXN0ZWQtV2l0aDogWE1MSHR0cFJlcXVlc3QNCkROVDogMQ0KQ29ubmVjdGlvbjogY2xvc2UNClJlZmVyZXI6IGh0dHA6Ly8xMC4xMC4xMC4xOC8NCkNvb2tpZTogc19jYz10cnVlOyBzX2ZpZD0xRDg3QzRDNUYxRkRENTE5LTIxODlGN0FEMDhCODVDMkU7IHNfbnI9MTU5MDYzNzEzOTAwMDsgc19zcT0lNUIlNUJCJTVEJTVEDQpJZi1Nb2RpZmllZC1TaW5jZTogTW9uLCAyOCBTZXAgMjAxNSAyMDoyOTozMiBHTVQNCklmLU5vbmUtTWF0Y2g6ICIxNTkwLTUyMGQ0OGUwZTIzMDAiDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTANCg0K]]></request>
    <status>304</status>
    <responselength>129</responselength>
    <mimetype></mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMzA0IE5vdCBNb2RpZmllZA0KRGF0ZTogVGh1LCAyOCBNYXkgMjAyMCAwNDoxODo1MiBHTVQNClNlcnZlcjogQXBhY2hlDQpDb25uZWN0aW9uOiBjbG9zZQ0KRVRhZzogIjE1OTAtNTIwZDQ4ZTBlMjMwMCINCg0K]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 09:48:52 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/audio/beep2.ogg]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/audio/beep2.ogg]]></path>
    <extension>ogg</extension>
    <request base64="true"><![CDATA[R0VUIC9hdWRpby9iZWVwMi5vZ2cgSFRUUC8xLjENCkhvc3Q6IDEwLjEwLjEwLjE4DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBydjo2OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzY4LjANCkFjY2VwdDogKi8qDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC41DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNClgtUmVxdWVzdGVkLVdpdGg6IFhNTEh0dHBSZXF1ZXN0DQpETlQ6IDENCkNvbm5lY3Rpb246IGNsb3NlDQpSZWZlcmVyOiBodHRwOi8vMTAuMTAuMTAuMTgvDQpDb29raWU6IHNfY2M9dHJ1ZTsgc19maWQ9MUQ4N0M0QzVGMUZERDUxOS0yMTg5RjdBRDA4Qjg1QzJFOyBzX25yPTE1OTA2MzcxMzkwMDA7IHNfc3E9JTVCJTVCQiU1RCU1RA0KSWYtTW9kaWZpZWQtU2luY2U6IE1vbiwgMjggU2VwIDIwMTUgMjA6Mjk6MzMgR01UDQpJZi1Ob25lLU1hdGNoOiAiMTRkMC01MjBkNDhlMWQ2NTQwIg0KQ2FjaGUtQ29udHJvbDogbWF4LWFnZT0wDQoNCg==]]></request>
    <status>304</status>
    <responselength>129</responselength>
    <mimetype></mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMzA0IE5vdCBNb2RpZmllZA0KRGF0ZTogVGh1LCAyOCBNYXkgMjAyMCAwNDoxODo1MiBHTVQNClNlcnZlcjogQXBhY2hlDQpDb25uZWN0aW9uOiBjbG9zZQ0KRVRhZzogIjE0ZDAtNTIwZDQ4ZTFkNjU0MCINCg0K]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 09:48:52 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/audio/hum_loop.ogg]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/audio/hum_loop.ogg]]></path>
    <extension>ogg</extension>
    <request base64="true"><![CDATA[R0VUIC9hdWRpby9odW1fbG9vcC5vZ2cgSFRUUC8xLjENCkhvc3Q6IDEwLjEwLjEwLjE4DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBydjo2OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzY4LjANCkFjY2VwdDogKi8qDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC41DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNClgtUmVxdWVzdGVkLVdpdGg6IFhNTEh0dHBSZXF1ZXN0DQpETlQ6IDENCkNvbm5lY3Rpb246IGNsb3NlDQpSZWZlcmVyOiBodHRwOi8vMTAuMTAuMTAuMTgvDQpDb29raWU6IHNfY2M9dHJ1ZTsgc19maWQ9MUQ4N0M0QzVGMUZERDUxOS0yMTg5RjdBRDA4Qjg1QzJFOyBzX25yPTE1OTA2MzcxMzkwMDA7IHNfc3E9JTVCJTVCQiU1RCU1RA0KSWYtTW9kaWZpZWQtU2luY2U6IE1vbiwgMjggU2VwIDIwMTUgMjA6Mjk6MzMgR01UDQpJZi1Ob25lLU1hdGNoOiAiNDJmZTEtNTIwZDQ4ZTFkNjU0MCINCkNhY2hlLUNvbnRyb2w6IG1heC1hZ2U9MA0KDQo=]]></request>
    <status>304</status>
    <responselength>130</responselength>
    <mimetype></mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMzA0IE5vdCBNb2RpZmllZA0KRGF0ZTogVGh1LCAyOCBNYXkgMjAyMCAwNDoxODo1MSBHTVQNClNlcnZlcjogQXBhY2hlDQpDb25uZWN0aW9uOiBjbG9zZQ0KRVRhZzogIjQyZmUxLTUyMGQ0OGUxZDY1NDAiDQoNCg==]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 09:48:53 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/audio/type.ogg]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/audio/type.ogg]]></path>
    <extension>ogg</extension>
    <request base64="true"><![CDATA[R0VUIC9hdWRpby90eXBlLm9nZyBIVFRQLzEuMQ0KSG9zdDogMTAuMTAuMTAuMTgNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IHJ2OjY4LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvNjguMA0KQWNjZXB0OiAqLyoNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KWC1SZXF1ZXN0ZWQtV2l0aDogWE1MSHR0cFJlcXVlc3QNCkROVDogMQ0KQ29ubmVjdGlvbjogY2xvc2UNClJlZmVyZXI6IGh0dHA6Ly8xMC4xMC4xMC4xOC8NCkNvb2tpZTogc19jYz10cnVlOyBzX2ZpZD0xRDg3QzRDNUYxRkRENTE5LTIxODlGN0FEMDhCODVDMkU7IHNfbnI9MTU5MDYzNzEzOTAwMDsgc19zcT0lNUIlNUJCJTVEJTVEDQpJZi1Nb2RpZmllZC1TaW5jZTogTW9uLCAyOCBTZXAgMjAxNSAyMDoyOTozMyBHTVQNCklmLU5vbmUtTWF0Y2g6ICIxMjIzLTUyMGQ0OGUxZDY1NDAiDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTANCg0K]]></request>
    <status>304</status>
    <responselength>129</responselength>
    <mimetype></mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMzA0IE5vdCBNb2RpZmllZA0KRGF0ZTogVGh1LCAyOCBNYXkgMjAyMCAwNDoxODo1MiBHTVQNClNlcnZlcjogQXBhY2hlDQpDb25uZWN0aW9uOiBjbG9zZQ0KRVRhZzogIjEyMjMtNTIwZDQ4ZTFkNjU0MCINCg0K]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 09:48:51 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/favicon.ico]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/favicon.ico]]></path>
    <extension>ico</extension>
    <request base64="true"><![CDATA[R0VUIC9mYXZpY29uLmljbyBIVFRQLzEuMQ0KSG9zdDogMTAuMTAuMTAuMTgNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IHJ2OjY4LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvNjguMA0KQWNjZXB0OiBpbWFnZS93ZWJwLCovKg0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuNQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpETlQ6IDENCkNvbm5lY3Rpb246IGNsb3NlDQpDb29raWU6IHNfY2M9dHJ1ZTsgc19maWQ9MUQ4N0M0QzVGMUZERDUxOS0yMTg5RjdBRDA4Qjg1QzJFOyBzX25yPTE1OTA2MzcxMzkwMDA7IHNfc3E9JTVCJTVCQiU1RCU1RA0KQ2FjaGUtQ29udHJvbDogbWF4LWFnZT0wDQoNCg==]]></request>
    <status>200</status>
    <responselength>205</responselength>
    <mimetype></mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA0OjE4OjUwIEdNVA0KU2VydmVyOiBBcGFjaGUNClgtUG93ZXJlZC1CeTogUEhQLzUuNS4yOQ0KWC1GcmFtZS1PcHRpb25zOiBTQU1FT1JJR0lODQpDb250ZW50LUxlbmd0aDogMA0KQ29ubmVjdGlvbjogY2xvc2UNCkNvbnRlbnQtVHlwZTogaW1hZ2Uvdm5kLm1pY3Jvc29mdC5pY29uDQoNCg==]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 09:48:50 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/js/main-acba06a5.js.pagespeed.jm.YdSb2z1rih.js]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/js/main-acba06a5.js.pagespeed.jm.YdSb2z1rih.js]]></path>
    <extension>js</extension>
    <request base64="true"><![CDATA[R0VUIC9qcy9tYWluLWFjYmEwNmE1LmpzLnBhZ2VzcGVlZC5qbS5ZZFNiMnoxcmloLmpzIEhUVFAvMS4xDQpIb3N0OiAxMC4xMC4xMC4xOA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgcnY6NjguMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC82OC4wDQpBY2NlcHQ6ICovKg0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuNQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpETlQ6IDENCkNvbm5lY3Rpb246IGNsb3NlDQpSZWZlcmVyOiBodHRwOi8vMTAuMTAuMTAuMTgvDQpDb29raWU6IHNfY2M9dHJ1ZTsgc19maWQ9MUQ4N0M0QzVGMUZERDUxOS0yMTg5RjdBRDA4Qjg1QzJFOyBzX25yPTE1OTA2MzcxMzkwMDA7IHNfc3E9JTVCJTVCQiU1RCU1RA0KDQo=]]></request>
    <status>200</status>
    <responselength>496341</responselength>
    <mimetype>script</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA0OjE4OjQ4IEdNVA0KU2VydmVyOiBBcGFjaGUNClgtRnJhbWUtT3B0aW9uczogU0FNRU9SSUdJTg0KTGFzdC1Nb2RpZmllZDogU2F0LCAxNCBOb3YgMjAxNSAyMTowMjozMSBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNCkV4cGlyZXM6IFRodSwgMjggTWF5IDIwMjAgMDQ6MjM6MjggR01UDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTMwMCxwcml2YXRlDQpDb25uZWN0aW9uOiBjbG9zZQ0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpDb250ZW50LUxlbmd0aDogNDk1OTkyDQoNCiEgZnVuY3Rpb24gdChlLCBuLCByKSB7CiAgICBmdW5jdGlvbiBpKGEsIHMpIHsKICAgICAgICBpZiAoIW5bYV0pIHsKICAgICAgICAgICAgaWYgKCFlW2FdKSB7CiAgICAgICAgICAgICAgICB2YXIgdSA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHJlcXVpcmUgJiYgcmVxdWlyZTsKICAgICAgICAgICAgICAgIGlmICghcyAmJiB1KSByZXR1cm4gdShhLCAhMCk7CiAgICAgICAgICAgICAgICBpZiAobykgcmV0dXJuIG8oYSwgITApOwogICAgICAgICAgICAgICAgdmFyIGMgPSBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIiArIGEgKyAiJyIpOwogICAgICAgICAgICAgICAgdGhyb3cgYy5jb2RlID0gIk1PRFVMRV9OT1RfRk9VTkQiLCBjCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGwgPSBuW2FdID0gewogICAgICAgICAgICAgICAgZXhwb3J0czoge30KICAgICAgICAgICAgfTsKICAgICAgICAgICAgZVthXVswXS5jYWxsKGwuZXhwb3J0cywgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBlW2FdWzFdW3RdOwogICAgICAgICAgICAgICAgcmV0dXJuIGkobiA/IG4gOiB0KQogICAgICAgICAgICB9LCBsLCBsLmV4cG9ydHMsIHQsIGUsIG4sIHIpCiAgICAgICAgfQogICAgICAgIHJldHVybiBuW2FdLmV4cG9ydHMKICAgIH0KICAgIGZvciAodmFyIG8gPSAiZnVuY3Rpb24iID09IHR5cGVvZiByZXF1aXJlICYmIHJlcXVpcmUsIGEgPSAwOyBhIDwgci5sZW5ndGg7IGErKykgaShyW2FdKTsKICAgIHJldHVybiBpCn0oewogICAgMTogW2Z1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgdmFyIHIgPSB0KCIuL3ZpZXdzL0FwcFZpZXciKTsKICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1GcmFtZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQodCwgMWUzIC8gNjApCiAgICAgICAgICAgIH0KICAgICAgICB9KCksICQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciB0ID0gJCgiI2FwcCIpOwogICAgICAgICAgICBuZXcgcih7CiAgICAgICAgICAgICAgICBlbDogdAogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LCB7CiAgICAgICAgIi4vdmlld3MvQXBwVmlldyI6IDYKICAgIH1dLAogICAgMjogW2Z1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgdmFyIHIgPSBbewogICAgICAgICAgICAgICAgZGlzcGxheTogITEsCiAgICAgICAgICAgICAgICBuYXZpZ2F0ZTogITEsCiAgICAgICAgICAgICAgICByZWdleDogL15oZWxwJC9pLAogICAgICAgICAgICAgICAgbGFiZWw6ICJoZWxwIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiU2hvdyBjb21tYW5kcyIsCiAgICAgICAgICAgICAgICBvbnNlbGVjdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5TWVudSgpLCB0aGlzLnJ1bigpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICExLAogICAgICAgICAgICAgICAgbmF2aWdhdGU6ICEwLAogICAgICAgICAgICAgICAgcmVnZXg6IC9eNDIwJC9pLAogICAgICAgICAgICAgICAgbGFiZWw6ICI0MjAiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICBvbnNlbGVjdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCJpbnN0cnVjdGlvbnM6Y2hhbmdlIiwgIjQyMCIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICEwLAogICAgICAgICAgICAgICAgbmF2aWdhdGU6ICExLAogICAgICAgICAgICAgICAgcmVnZXg6IC9ecHJlcGFyZSQvaSwKICAgICAgICAgICAgICAgIGxhYmVsOiAicHJlcGFyZSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgIG9uc2VsZWN0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoImluc3RydWN0aW9uczpjaGFuZ2UiLCAicHJlcGFyZSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICEwLAogICAgICAgICAgICAgICAgbmF2aWdhdGU6ICEwLAogICAgICAgICAgICAgICAgcmVnZXg6IC9eZnNvY2lldHkkL2ksCiAgICAgICAgICAgICAgICBsYWJlbDogImZzb2NpZXR5IiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgb25zZWxlY3Q6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigiaW5zdHJ1Y3Rpb25zOmNoYW5nZSIsICJmc29jaWV0eSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICEwLAogICAgICAgICAgICAgICAgbmF2aWdhdGU6ICEwLAogICAgICAgICAgICAgICAgcmVnZXg6IC9eaW5mb3JtJC9pLAogICAgICAgICAgICAgICAgbGFiZWw6ICJpbmZvcm0iLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICBvbnNlbGVjdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCJpbnN0cnVjdGlvbnM6Y2hhbmdlIiwgImluZm9ybSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICEwLAogICAgICAgICAgICAgICAgbmF2aWdhdGU6ICEwLAogICAgICAgICAgICAgICAgcmVnZXg6IC9ecXVlc3Rpb24kL2ksCiAgICAgICAgICAgICAgICBsYWJlbDogInF1ZXN0aW9uIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgb25zZWxlY3Q6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigiaW5zdHJ1Y3Rpb25zOmNoYW5nZSIsICJxdWVzdGlvbiIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICEwLAogICAgICAgICAgICAgICAgbmF2aWdhdGU6ICEwLAogICAgICAgICAgICAgICAgcmVnZXg6IC9ed2FrZXVwJC9pLAogICAgICAgICAgICAgICAgbGFiZWw6ICJ3YWtldXAiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICBvbnNlbGVjdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCJpbnN0cnVjdGlvbnM6Y2hhbmdlIiwgIndha2V1cCIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICEwLAogICAgICAgICAgICAgICAgbmF2aWdhdGU6ICEwLAogICAgICAgICAgICAgICAgcmVnZXg6IC9eam9pbiQvaSwKICAgICAgICAgICAgICAgIGxhYmVsOiAiam9pbiIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgIG9uc2VsZWN0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYWNrLm9tbmkoIkVtYWlsIFNpZ24tVXAiLCAiSW50cm8gVGV4dCIpLCB0aGlzLnRyaWdnZXIoImluc3RydWN0aW9uczpjaGFuZ2UiLCAiam9pbiIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1dLAogICAgICAgICAgICBpID0gewogICAgICAgICAgICAgICAgZGlzcGxheU1lbnU6ICEwLAogICAgICAgICAgICAgICAgcHJlZml4OiAicm9vdEBmc29jaWV0eTp+IyAiLAogICAgICAgICAgICAgICAgdHlwZTogInVzZXJQcm9tcHQiLAogICAgICAgICAgICAgICAgZGVsYXk6IDEwMCwKICAgICAgICAgICAgICAgIHByZWZpeFdlaWdodDogNzAwLAogICAgICAgICAgICAgICAgb3B0aW9uczogewogICAgICAgICAgICAgICAgICAgIGNvbW1hbmRzOiByCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG8gPSB7CiAgICAgICAgICAgICAgICBpbml0aWFsOiBbewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIHBsYXlTb3VuZDogImluaXQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJHUlVCIGxvYWRpbmcuIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMWUzCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIldlbGNvbWUgdG8gR1JVQiEiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyZTMKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICBjbGVhcjogITAsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDI1MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICBjbGVhcjogITAsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIkxvYWRpbmcgTGludXggMy4yLjAtNC1hbWQ2NCAuLi4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA2MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiTG9hZGluZyBpbml0aWFsIHJhbWRpc2sgIC4uLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDFlMwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIGNsZWFyOiAhMCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXI6ICEwLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJMb2FkaW5nLCBwbGVhc2Ugd2FpdCAuLi4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIlsgICAgMi4xOTQ3ODVdIHNkIDA6MDowOjA6IFtzZGFdIEFzc3VtaW5nIGRyaXZlIGNhY2hlOiB3cml0ZSB0aHJvdWdoIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMTAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIlsgICAgMi4xOTUyODRdIHNkIDA6MDowOjA6IFtzZGFdIEFzc3VtaW5nIGRyaXZlIGNhY2hlOiB3cml0ZSB0aHJvdWdoIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMTAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIlsgICAgMi4xOTYxNjNdIHNkIDA6MDowOjA6IFtzZGFdIEFzc3VtaW5nIGRyaXZlIGNhY2hlOiB3cml0ZSB0aHJvdWdoIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMTAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIklOSVQ6IHZlcnNpb24gMi44OCBib290aW5nIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogODAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1s8c3BhbiBjbGFzcz0iYmwiPmluZm88L3NwYW4+XSBVc2luZyBtYWtlZmlsZS1zdHlsZSBjb25jdXJyZW50IGJvb3QgaW4gcnVubGV2ZWwgUy4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1sgPHNwYW4gY2xhc3M9ImduIj5vazwvc3Bhbj4gXSBTdGFydGluZyB0aGUgaG90IHBsdWcgZXZlbnRzIGRpc3BhdGNoZXI6IHVkZXZkLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDQwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIi4uLi5dIFN5bnRoZXNpemluZyB0aGUgaW5pdGlhbCBob3RwbHVnIGV2ZW50cy4uLlsgICAgMi43MDA2MDldIHBpaXhfc21idXMgMDAwMDowMDowNy4zOiBIb3N0IFNNQnVzIGNvbnRyb2xsZXIgbm90IGVuYWJsZWQhIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogImRvbmUuIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiWyA8c3BhbiBjbGFzcz1cImduXCI+b2s8L3NwYW4+IF0gV2FpdGluZyBmb3IgL2RldiB0byBiZSBmdWxseSBwb3B1bGF0ZWQuLi5bICAgIDMuMDYxNDg0XSBFcnJvcjogRHJpdmVyICdwYyBzcGtyJyBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQsIGFib3J0aW5nLi4uIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiZG9uZS4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIFNldHRpbmcgcHJlbGltaW5hcnkga2V5bWFwLi4uZG9uZS4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIEFjdGl2YXRpbmcgc3dhcC4uLmRvbmUuJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIlsuLi4uXSBDaGVja2luZyByb290IGZpbGUgc3lzdGVtLi4uZnNjayBmcm9tIHV0aWwtbGludXggMi4yMC4xIC9kZXYvc2RhMTogY2xlYW4sIDM4MTkwLzEyNTY2NDAgZmlsZXMsIDM0MTk5My81MDE2ODMyIGJsb2NrcyIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDQwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogImRvbmUuIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWzxzcGFuIGNsYXNzPSJibCI+aW5mbzwvc3Bhbj5dIExvYWRpbmcga2VybmVsIG1vZHVsZSBsb29wLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDQwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1sgPHNwYW4gY2xhc3M9ImduIj5vazwvc3Bhbj4gXSBDbGVhbmluZyB1cCB0ZW1wb3JhcnkgZmlsZXMuLi4gL3RtcC4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA0MAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gQWN0aXZhdGluZyBsdm0gYW5kIG1kIHN3YXAuLi5kb25lLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDQwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIlsuLi4uXSBDaGVja2luZyBmaWxlIHN5c3RlbXMuLi5mc2NrIGZyb20gdXRpbC1saW51eCAyLjIwLjEiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA4MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiZG9uZS4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiWy4uLi5dIE1vdW50aW5nIGxvY2FsIGZpbGVzeXN0ZW1zLi4uZG9uZS4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA1MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIEFjdGl2YXRpbmcgc3dhcGZpbGUgc3dhcC4uLmRvbmUuJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogMTAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1sgPHNwYW4gY2xhc3M9ImduIj5vazwvc3Bhbj4gXSBDbGVhbmluZyB1cCB0ZW1wb3JhcnkgZmlsZXMuLi4uJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogMjAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIFNldHRpbmcga2VybmVsIHZhcmlhYmxlcyAuLi5kb25lLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDEwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gQ29uZmlndXJpbmcgbmV0d29yayBpbnRlcmZhY2VzLi4uZG9uZS4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA1MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIFN0YXJ0aW5nIHJwY2JpbmQgZGFlbW9uLi4uLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gU3RhcnRpbmcgTkZTIGNvbW1vbiB1dGlsaXRpZXM6IHN0YXRkIGlkbWFwZC4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIENsZWFuaW5nIHVwIHRlbXBvcmFyeSBmaWxlcy4uLi5kb25lLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbPHNwYW4gY2xhc3M9ImJsIj5pbmZvPC9zcGFuPl0gU2V0dGluZyBjb25zb2xlIHNjcmVlbiBtb2Rlcy4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA0MAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbPHNwYW4gY2xhc3M9ImJsIj5pbmZvPC9zcGFuPl0gU2tpcHBpbmcgZm9udCBhbmQga2V5bWFwIHNldHVwIChoYW5kbGVkIGJ5IGNvbnNvbGUtc2V0dXApLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDEwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIlsuLi4uXSBTZXR0aW5nIHVwIGNvbnNvbGUgZm9udCBhbmQga2V5bWFwLi4uZG9uZS4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA0MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiSU5JVDogRW50ZXJpbmcgcnVubGV2ZWw6IDIiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxZTMKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWzxzcGFuIGNsYXNzPSJibCI+aW5mbzwvc3Bhbj5dIFVzaW5nIG1ha2VmaWxlLXN0eWxlIGNvbmN1cnJlbnQgYm9vdCBpbiBydW5sZXZlbCAyLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDkwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1sgPHNwYW4gY2xhc3M9ImduIj5vazwvc3Bhbj4gXSBTdGFydGluZyBORlMgY29tbW9uIHV0bGl0aWVzOiBzdGF0ZCBpZG1hcGQuJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogMjAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIFN0YXJ0aW5nIHJwY2JpbmQgZGFlbW9uLi4uWy4uLi5dIEFscmVhZHkgcnVubmluZy4uJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogMTAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIFN0YXJ0aW5nIGVuaGFuY2VkIHN5c2xvZ2Q6IHJzeXNsb2dkLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDMwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gU3RhcnRpbmcgZGVmZXJyZWQgZXhlY3V0aW9uIHNjaGVkdWxlcjogYXRkLicsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDMwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gU3RhcnRpbmcgQUNQSSBzZXJ2aWNlcy4uLi4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIFN0YXJ0aW5nIHBlcmlvZGljIGNvbW1hbmQgc2NoZWR1bGVyOiBjcm9uJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogODAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIFN0YXJ0aW5nIHN5c3RlbSBtZXNzYWdlIGJ1czogZGJ1cycsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDFlMwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gU3RhcnRpbmcgQXZhaGkgbUROUy9ETlMtU0QgRGFlbW9uOiBhdmFoaS1kYWVtb24uJywKICAgICAgICAgICAgICAgICAgICBkZWxheTogNDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnWyA8c3BhbiBjbGFzcz0iZ24iPm9rPC9zcGFuPiBdIFN0YXJ0aW5nIENvbW1vbiBVbml4IFByaW50aW5nIFN5c3RlbTogY3Vwc2QnLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA5MAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdbIDxzcGFuIGNsYXNzPSJnbiI+b2s8L3NwYW4+IF0gU3RhcnRpbmcgTVRBOiBleGltNC4nLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIGNsZWFyOiAhMCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiRGViaWFuIEdOVS9MaW51eCA3IG1ycm9ib3QgdHR5bCIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDFlMwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICImbmJzcCIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDQwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogInJvb3QiLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogIm1ycm9ib3QgbG9naW46ICIsCiAgICAgICAgICAgICAgICAgICAgcGxheVNvdW5kOiAiaW5pdCIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDE1MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAidHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAi4oCi4oCi4oCi4oCi4oCi4oCi4oCi4oCi4oCi4oCi4oCiIiwKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICJwYXNzd29yZDogIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNTAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXI6ICEwLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICIiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyNTAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICBjbGVhcjogITAsCiAgICAgICAgICAgICAgICAgICAgdGltZTogITAsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICIjMDA4YzIzIiwKICAgICAgICAgICAgICAgICAgICBwcmVmaXhDb2xvcjogIiMwMDhjMjMiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICItIS0gZnJpZW5kXyBbZnJpZW5kX0AiICsgVVNFUl9JUCArICJdIGhhcyBqb2luZWQgI2Zzb2NpZXR5LiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDFlMwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICImbmJzcDsiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0aW1lOiAhMCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAidHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiSGVsbG8gZnJpZW5kLiIsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAiPG1yLiByb2JvdD4iLAogICAgICAgICAgICAgICAgICAgIHByZWZpeENvbG9yOiAiIzAwOGMyMyIsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4V2VpZ2h0OiA3MDAsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDgwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjb250aW51ZVR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIklmIHlvdSd2ZSBjb21lLCB5b3UndmUgY29tZSBmb3IgYSByZWFzb24uIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMWUzCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiWW91IG1heSBub3QgYmUgYWJsZSB0byBleHBsYWluIGl0IHlldCwiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiYnV0IHRoZXJlJ3MgYSBwYXJ0IG9mIHlvdSB0aGF0J3MgZXhoYXVzdGVkIHdpdGggdGhpcyB3b3JsZC4uLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjb250aW51ZVR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogImEgd29ybGQgdGhhdCBkZWNpZGVzIHdoZXJlIHlvdSB3b3JrLCIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDFlMwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjb250aW51ZVR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIndobyB5b3Ugc2VlLCIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjb250aW51ZVR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogImFuZCBob3cgeW91IGVtcHR5IGFuZCBmaWxsIHlvdXIgZGVwcmVzc2luZyBiYW5rIGFjY291bnQuIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogODAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiRXZlbiB0aGUgSW50ZXJuZXQgY29ubmVjdGlvbiB5b3UncmUgdXNpbmcgdG8gcmVhZCB0aGlzIGlzIGNvc3RpbmcgeW91LCBzbG93bHkgY2hpcHBpbmcgYXdheSBhdCB5b3VyIGV4aXN0ZW5jZS4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxZTMKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY29udGludWVUeXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJUaGVyZSBhcmUgdGhpbmdzIHlvdSB3YW50IHRvIHNheS4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA2MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY29udGludWVUeXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJTb29uIEkgd2lsbCBnaXZlIHlvdSBhIHZvaWNlLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDYwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjb250aW51ZVR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIlRvZGF5IHlvdXIgZWR1Y2F0aW9uIGJlZ2lucy4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA2MDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAibWVudU9wdGlvbnMiLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZHM6IHIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA1MDAKICAgICAgICAgICAgICAgIH0sIGldLAogICAgICAgICAgICAgICAgam9pbjogW3sKICAgICAgICAgICAgICAgICAgICBjbGVhcjogITAsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIGNsZWFyOiAhMCwKICAgICAgICAgICAgICAgICAgICB0aW1lOiAhMCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAidHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICI8bXIuIHJvYm90PiIsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4Q29sb3I6ICIjMDA4YzIzIiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiaGVsbG8gZnJpZW5kIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHRpbWU6ICEwLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ0eXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogIjxtci4gcm9ib3Q+IiwKICAgICAgICAgICAgICAgICAgICBwcmVmaXhDb2xvcjogIiMwMDhjMjMiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJ5b3UgZG9uJ3Qga25vdyBtZSwgYnV0IEkndmUgYmVlbiB3YXRjaGluZyB5b3UuIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMTIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjb250aW51ZVR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogImkga25vdyB5b3UgZmVlbCBsaWtlIHlvdSBoYXZlIG5vIHZvaWNlLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDJlMwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjb250aW51ZVR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogImkga25vdyB5b3UgZmVlbCB0cmFwcGVkLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDFlMwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjb250aW51ZVR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogImkga25vdyB5b3UgZmVlbCBjb250cm9sbGVkLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDEyMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY29udGludWVUeXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJidXQgaeKAmXZlIGJlZW4gZmlnaHRpbmcgZm9yIHlvdS4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiYWxsIG9mIHlvdS4iLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAxMjAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNvbnRpbnVlVHlwZWRUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiaXQncyB0aW1lIHRvIGJyZWFrIGZyZWUgZnJvbSBvdXIgY29ycG9yYXRlIG1hc3RlcnMuIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMTIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjb250aW51ZVR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogInlvdSd2ZSBiZWVuIGEgc2xhdmUgdG8gdGhlaXIgZGVidCBmYXIgdG9vIGxvbmcuIiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogMTIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHRpbWU6ICEwLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ0eXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogIjxtci4gcm9ib3Q+IiwKICAgICAgICAgICAgICAgICAgICBwcmVmaXhDb2xvcjogIiMwMDhjMjMiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJpZiB5b3UncmUgcmVhZHkgdG8gam9pbiBtZSwgZW50ZXIgeW91ciBlbWFpbCBhZGRyZXNzLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDFlMwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICImbmJzcDsiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyMDAKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0aW1lOiAhMCwKICAgICAgICAgICAgICAgICAgICBwcmVmaXhDb2xvcjogIiMwMDhjMjMiLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogIjxmcmllbmRfXz4iLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlbWFpbFByb21wdCIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICBlbWFpbEVycm9yOiBbewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIHBsYXlTb3VuZDogImluY29ycmVjdCIsCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICJyZWQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJFcnJvcjogSW52YWxpZCBlbWFpbC4gVHJ5IGFnYWluLiIKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB0aW1lOiAhMCwKICAgICAgICAgICAgICAgICAgICBwcmVmaXhDb2xvcjogIiMwMDhjMjMiLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogIjxmcmllbmRfXz4iLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlbWFpbFByb21wdCIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICBlbWFpbFN1Y2Nlc3M6IFt7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImJhc2ljVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIiZuYnNwOyIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHRpbWU6ICEwLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ0eXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogIjxtci4gcm9ib3Q+IiwKICAgICAgICAgICAgICAgICAgICBwcmVmaXhDb2xvcjogIiMwMDhjMjMiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJ3ZSB3aWxsIGJlIGluIHRvdWNoLiIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDFlMwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIGNsZWFyOiAhMCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFzaWNUZXh0IiwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAiJm5ic3A7IiwKICAgICAgICAgICAgICAgICAgICBkZWxheTogM2UzCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ0VudGVyIGNvbW1hbmQuIFR5cGUgImhlbHAiIHRvIHNlZSBhIGxpc3Qgb2YgY29tbWFuZHMuJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICJyb290QGZzb2NpZXR5On4jICIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXNpY1RleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICImbmJzcDsiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiAyMDAKICAgICAgICAgICAgICAgIH0sIGldLAogICAgICAgICAgICAgICAgcXVlc3Rpb246IFt7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImltYWdlR2FsbGVyeSIsCiAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeU5hbWU6ICJGU29jaWV0eSBHYWxsZXJ5IiwKICAgICAgICAgICAgICAgICAgICB0cmFjazogewogICAgICAgICAgICAgICAgICAgICAgICBwcm9wMzogIkdhbGxlcnkiLAogICAgICAgICAgICAgICAgICAgICAgICBwcm9wNTogIk1yLiBSb2JvdCA6IFdobyBJcyBNci4gUm9ib3QgOiBGU29jaWV0eSBHYWxsZXJ5IiwKICAgICAgICAgICAgICAgICAgICAgICAgcGFnZU5hbWU6ICJNci4gUm9ib3QgOiBXaG8gaXMgTXIuIFJvYm90IDogRlNvY2lldHkgR2FsbGVyeSA6IFBob3RvIDEiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBpbWFnZXM6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogImltYWdlcy9xdWVzdGlvbi9qZWZmZXJzb24uanBnIgogICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiAiaW1hZ2VzL3F1ZXN0aW9uL3N0ZWFscy5qcGciCiAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICBzcmM6ICJpbWFnZXMvcXVlc3Rpb24vbWFkb2ZmLmpwZyIKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogImltYWdlcy9xdWVzdGlvbi9vd25lZC5qcGciCiAgICAgICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDgwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ0eXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdFbnRlciBjb21tYW5kLiBUeXBlICJoZWxwIiB0byBzZWUgYSBsaXN0IG9mIGNvbW1hbmRzLicsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAicm9vdEBmc29jaWV0eTp+IyAiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA1MDAKICAgICAgICAgICAgICAgIH0sIGldLAogICAgICAgICAgICAgICAgZnNvY2lldHk6IFt7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9OYW1lOiAiZnNvY2lldHkiLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJmdWxsc2NyZWVuVmlkZW8iLAogICAgICAgICAgICAgICAgICAgIGNvdmVyOiAhMCwKICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBbewogICAgICAgICAgICAgICAgICAgICAgICBzcmM6ICJ2aWRlby9mc29jaWV0eS53ZWJtIiwKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInZpZGVvL3dlYm0iCiAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICBzcmM6ICJ2aWRlby9mc29jaWV0eS5tcDQiLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAidmlkZW8vbXA0IgogICAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICAgIHRyYWNrOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AzOiAiVmlkZW8iCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNDAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ0VudGVyIGNvbW1hbmQuIFR5cGUgImhlbHAiIHRvIHNlZSBhIGxpc3Qgb2YgY29tbWFuZHMuJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICJyb290QGZzb2NpZXR5On4jICIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfSwgaV0sCiAgICAgICAgICAgICAgICBwcmVwYXJlOiBbewogICAgICAgICAgICAgICAgICAgIHZpZGVvTmFtZTogInByZXBhcmUiLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJmdWxsc2NyZWVuVmlkZW8iLAogICAgICAgICAgICAgICAgICAgIGNvdmVyOiAhMCwKICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBbewogICAgICAgICAgICAgICAgICAgICAgICBzcmM6ICJ2aWRlby9wcmVwYXJlLndlYm0iLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAidmlkZW8vd2VibSIKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogInZpZGVvL3ByZXBhcmUubXA0IiwKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInZpZGVvL21wNCIKICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICB0cmFjazogewogICAgICAgICAgICAgICAgICAgICAgICBwcm9wMzogIlZpZGVvIgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDQwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ0eXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdFbnRlciBjb21tYW5kLiBUeXBlICJoZWxwIiB0byBzZWUgYSBsaXN0IG9mIGNvbW1hbmRzLicsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAicm9vdEBmc29jaWV0eTp+IyAiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA1MDAKICAgICAgICAgICAgICAgIH0sIGldLAogICAgICAgICAgICAgICAgd2FrZXVwOiBbewogICAgICAgICAgICAgICAgICAgIHZpZGVvTmFtZTogIndha2V1cCIsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImZ1bGxzY3JlZW5WaWRlbyIsCiAgICAgICAgICAgICAgICAgICAgY292ZXI6ICEwLAogICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogInZpZGVvL3dha2V1cC53ZWJtIiwKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInZpZGVvL3dlYm0iCiAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICBzcmM6ICJ2aWRlby93YWtldXAubXA0IiwKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInZpZGVvL21wNCIKICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICB0cmFjazogewogICAgICAgICAgICAgICAgICAgICAgICBwcm9wMzogIlZpZGVvIgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDgwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ0eXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdFbnRlciBjb21tYW5kLiBUeXBlICJoZWxwIiB0byBzZWUgYSBsaXN0IG9mIGNvbW1hbmRzLicsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAicm9vdEBmc29jaWV0eTp+IyAiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA1MDAKICAgICAgICAgICAgICAgIH0sIGldLAogICAgICAgICAgICAgICAgNDIwOiBbewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJpbWFnZUdhbGxlcnkiLAogICAgICAgICAgICAgICAgICAgIGdhbGxlcnlOYW1lOiAiNDIwIEhpZGRlbiBJbWFnZSIsCiAgICAgICAgICAgICAgICAgICAgdHJhY2s6IHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvcDM6ICJHYWxsZXJ5IiwKICAgICAgICAgICAgICAgICAgICAgICAgcHJvcDU6ICJNci4gUm9ib3QgOiBXaG8gaXMgTXIuIFJvYm90IDogNDIwIEhpZGRlbiBJbWFnZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VOYW1lOiAiTXIuIFJvYm90IDogV2hvIGlzIE1yLiBSb2JvdCA6IDQyMCBIaWRkZW4gSW1hZ2UiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBpbWFnZXM6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogImltYWdlcy80MjAvNDIwLmpwZyIKICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICBkZWxheTogNDAwCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ0VudGVyIGNvbW1hbmQuIFR5cGUgImhlbHAiIHRvIHNlZSBhIGxpc3Qgb2YgY29tbWFuZHMuJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICJyb290QGZzb2NpZXR5On4jICIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfSwgaV0sCiAgICAgICAgICAgICAgICBpbmZvcm06IFt7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImltYWdlR2FsbGVyeSIsCiAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeU5hbWU6ICJJbmZvcm0gR2FsbGVyeSIsCiAgICAgICAgICAgICAgICAgICAgdHJhY2s6IHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvcDM6ICJHYWxsZXJ5IiwKICAgICAgICAgICAgICAgICAgICAgICAgcHJvcDU6ICJNci4gUm9ib3QgOiBXaG8gSXMgTXIuIFJvYm90IDogSW5mb3JtIEdhbGxlcnkiLAogICAgICAgICAgICAgICAgICAgICAgICBwYWdlTmFtZTogIk1yLiBSb2JvdCA6IFdobyBpcyBNci4gUm9ib3QgOiBJbmZvcm0gR2FsbGVyeSA6IFBob3RvIDEiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBpbWFnZXM6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogImltYWdlcy9oZWFkbGluZXMvZGVmbGF0ZWdhdGUuanBnIgogICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiAiaW1hZ2VzL2hlYWRsaW5lcy9iaWxsaW9uYWlyZS5qcGciCiAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICBzcmM6ICJpbWFnZXMvaGVhZGxpbmVzL2NyZWRpdGNhcmRzMi5qcGciCiAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICBzcmM6ICJpbWFnZXMvaGVhZGxpbmVzL21ldGdhbGEuanBnIgogICAgICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInR5cGVkVGV4dCIsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ0VudGVyIGNvbW1hbmQuIFR5cGUgImhlbHAiIHRvIHNlZSBhIGxpc3Qgb2YgY29tbWFuZHMuJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICJyb290QGZzb2NpZXR5On4jICIsCiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMAogICAgICAgICAgICAgICAgfSwgaV0sCiAgICAgICAgICAgICAgICBtZW51UHJvbXB0OiBbewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ0eXBlZFRleHQiLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdFbnRlciBjb21tYW5kLiBUeXBlICJoZWxwIiB0byBzZWUgYSBsaXN0IG9mIGNvbW1hbmRzLicsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAicm9vdEBmc29jaWV0eTp+IyAiLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA1MDAKICAgICAgICAgICAgICAgIH0sIGldLAogICAgICAgICAgICAgICAgbGl2ZTogW3sKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiYmFja2JvbmVWaWV3IiwKICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGRlbGF5OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgdmlldzogIkxpdmUiCiAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICB9OwogICAgICAgIGUuZXhwb3J0cyA9IG8KICAgIH0sIHt9XSwKICAgIDM6IFtmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBlID0gdCgiaG9nYW4uanMiKSwKICAgICAgICAgICAgICAgIG4gPSB7fTsKICAgICAgICAgICAgcmV0dXJuIG4uYXBwID0gbmV3IGUuVGVtcGxhdGUoewogICAgICAgICAgICAgICAgY29kZTogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciByID0gdGhpczsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5iKG4gPSBuIHx8ICIiKSwgci5iKCc8ZGl2IGNsYXNzPSJ0ZXJtaW5hbC13cmFwcGVyIj4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCcgIDxkaXYgY2xhc3M9InRlcm1pbmFsLWNvbnRlbnQiPjwvZGl2PicpLCByLmIoIlxuIiArIG4pLCByLmIoJyAgPHRleHRhcmVhIGF1dG9jYXBpdGFsaXplPSJvZmYiIGlkPSJoaWRkZW4tdGV4dGFyZWEiPjwvdGV4dGFyZWE+JyksIHIuYigiXG4iICsgbiksIHIuYigiPC9kaXY+IiksIHIuYigiXG4iICsgbiksIHIuYignPGZvb3Rlcj48ZGl2IGNsYXNzPSJmb290ZXItbGlua3MiPjxzcGFuPjxhIGhyZWY9IiIgdGFyZ2V0PSJfYmxhbmsiPjwvYT48L3NwYW4+PHNwYW4+PGEgaHJlZj0iIiB0YXJnZXQ9Il9ibGFuayI+PC9hPjwvc3Bhbj48L2Rpdj48L2Zvb3Rlcj4nKSwgci5mbCgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFydGlhbHM6IHt9LAogICAgICAgICAgICAgICAgc3Viczoge30KICAgICAgICAgICAgfSksIG4uYXJyb3cgPSBuZXcgZS5UZW1wbGF0ZSh7CiAgICAgICAgICAgICAgICBjb2RlOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByLmIobiA9IG4gfHwgIiIpLCByLmIoJzxidXR0b24gY2xhc3M9IicpLCByLmIoci52KHIuZigiYnV0dG9uQ2xhc3MiLCB0LCBlLCAwKSkpLCByLmIoJyI+JyksIHIuYigiXG4iICsgbiksIHIuYignCTxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNSAyMCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSI+JyksIHIuYigiXG4iICsgbiksIHIuYignCSAgPHBvbHlnb24gcG9pbnRzPSInKSwgci5iKHIudihyLmYoInBvbHlnb25Qb2ludHMiLCB0LCBlLCAwKSkpLCByLmIoJyIgLz4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCIJPC9zdmc+IiksIHIuYigiXG4iICsgbiksIHIuYigiPC9idXR0b24+IiksIHIuZmwoKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBhcnRpYWxzOiB7fSwKICAgICAgICAgICAgICAgIHN1YnM6IHt9CiAgICAgICAgICAgIH0pLCBuLmNsb3NlID0gbmV3IGUuVGVtcGxhdGUoewogICAgICAgICAgICAgICAgY29kZTogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciByID0gdGhpczsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5iKG4gPSBuIHx8ICIiKSwgci5iKCc8YnV0dG9uIGNsYXNzPSJidG4tY2xvc2UiPicpLCByLmIoIlxuIiArIG4pLCByLmIoJwk8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgMTUgMjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPicpLCByLmIoIlxuIiArIG4pLCByLmIoJwkgIDxwb2x5Z29uIHBvaW50cz0iMCw0IDQsMCAxOSwxNSAxNSwxOSAiLz4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCcJCTxwb2x5Z29uIHBvaW50cz0iMTUsMCAxOSw0IDQsMTkgMCwxNSAiLz4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCIJPC9zdmc+IiksIHIuYigiXG4iICsgbiksIHIuYigiPC9idXR0b24+IiksIHIuZmwoKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBhcnRpYWxzOiB7fSwKICAgICAgICAgICAgICAgIHN1YnM6IHt9CiAgICAgICAgICAgIH0pLCBuLmltYWdlZ2FsbGVyeSA9IG5ldyBlLlRlbXBsYXRlKHsKICAgICAgICAgICAgICAgIGNvZGU6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuYihuID0gbiB8fCAiIiksIHIuYignPGJ1dHRvbiBjbGFzcz0iYnRuLWNsb3NlIj4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCcJPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDE1IDIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIj4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCcJCTxwb2x5Z29uIHBvaW50cz0iMCwzIDMsMCAxOCwxNCAxNCwxOCAiLz4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCcJCTxwb2x5Z29uIHBvaW50cz0iMTQsMCAxOCwzIDMsMTggMCwxNCAiLz4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCIJPC9zdmc+IiksIHIuYigiXG4iICsgbiksIHIuYigiPC9idXR0b24+IiksIHIuYigiXG4iICsgbiksIHIuYignPGRpdiBjbGFzcz0iaW1hZ2UtZ2FsbGVyeSI+JyksIHIuYigiXG4iICsgbiksIHIucyhyLmYoImltYWdlcyIsIHQsIGUsIDEpLCB0LCBlLCAwLCAyNzQsIDQxMiwgInt7IH19IikgJiYgKHIucnModCwgZSwgZnVuY3Rpb24odCwgZSwgcikgewogICAgICAgICAgICAgICAgICAgICAgICByLmIoJwk8ZGl2IGNsYXNzPSJpbWFnZS1pdGVtIj4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCcJCTxpbWcgc3JjPSInKSwgci5iKHIudihyLmYoInNyYyIsIHQsIGUsIDApKSksIHIuYignIiAvPicpLCByLmIoIlxuIiArIG4pLCByLnMoci5mKCJjYXB0aW9uIiwgdCwgZSwgMSksIHQsIGUsIDAsIDMzOSwgMzkwLCAie3sgfX0iKSAmJiAoci5ycyh0LCBlLCBmdW5jdGlvbih0LCBlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmIoJwkJCTxkaXYgY2xhc3M9ImltYWdlLWNhcHRpb24iPicpLCByLmIoci52KHIuZigiY2FwdGlvbiIsIHQsIGUsIDApKSksIHIuYigiPC9kaXY+IiksIHIuYigiXG4iICsgbikKICAgICAgICAgICAgICAgICAgICAgICAgfSksIHQucG9wKCkpLCByLmIoIgk8L2Rpdj4iKSwgci5iKCJcbiIgKyBuKQogICAgICAgICAgICAgICAgICAgIH0pLCB0LnBvcCgpKSwgci5iKCI8L2Rpdj4iKSwgci5mbCgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFydGlhbHM6IHt9LAogICAgICAgICAgICAgICAgc3Viczoge30KICAgICAgICAgICAgfSksIG4uaW5saW5laW1hZ2UgPSBuZXcgZS5UZW1wbGF0ZSh7CiAgICAgICAgICAgICAgICBjb2RlOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByLmIobiA9IG4gfHwgIiIpLCByLmIoJzxkaXYgY2xhc3M9ImlubGluZS1pbWFnZSI+PGltZyBzcmM9IicpLCByLmIoci52KHIuZigiaW1hZ2UiLCB0LCBlLCAwKSkpLCByLmIoJyIgLz48L2Rpdj4nKSwgci5mbCgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFydGlhbHM6IHt9LAogICAgICAgICAgICAgICAgc3Viczoge30KICAgICAgICAgICAgfSksIG4ubWVudSA9IG5ldyBlLlRlbXBsYXRlKHsKICAgICAgICAgICAgICAgIGNvZGU6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuYihuID0gbiB8fCAiIiksIHIuYignPGRpdiBjbGFzcz0ibGluZSI+Jm5ic3A7PC9kaXY+JyksIHIuYigiXG4iICsgbiksIHIuYignPGRpdiBjbGFzcz0ibGluZSI+JyksIHIuYigiXG4iICsgbiksIHIuYigiPHN0cm9uZz5Db21tYW5kczo8L3N0cm9uZz4iKSwgci5iKCJcbiIgKyBuKSwgci5iKCI8L2Rpdj4iKSwgci5iKCJcbiIgKyBuKSwgci5iKCc8ZGl2IGNsYXNzPSJsaW5lIj4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCcJPGRpdiBjbGFzcz0ibWVudSI+JyksIHIuYigiXG4iICsgbiksIHIucyhyLmYoImNvbW1hbmRzIiwgdCwgZSwgMSksIHQsIGUsIDAsIDEzNywgMjA2LCAie3sgfX0iKSAmJiAoci5ycyh0LCBlLCBmdW5jdGlvbih0LCBlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHIucyhyLmYoImRpc3BsYXkiLCB0LCBlLCAxKSwgdCwgZSwgMCwgMTUyLCAxOTIsICJ7eyB9fSIpICYmIChyLnJzKHQsIGUsIGZ1bmN0aW9uKHQsIGUsIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuYignCQkJPGRpdiBjbGFzcz0ibGluZSI+JyksIHIuYihyLnYoci5mKCJsYWJlbCIsIHQsIGUsIDApKSksIHIuYigiPC9kaXY+IiksIHIuYigiXG4iICsgbikKICAgICAgICAgICAgICAgICAgICAgICAgfSksIHQucG9wKCkpCiAgICAgICAgICAgICAgICAgICAgfSksIHQucG9wKCkpLCByLmIoIgk8L2Rpdj4iKSwgci5iKCJcbiIgKyBuKSwgci5iKCI8L2Rpdj4iKSwgci5iKCJcbiIgKyBuKSwgci5iKCc8ZGl2IGNsYXNzPSJsaW5lIj4mbmJzcDs8L2Rpdj4nKSwgci5mbCgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFydGlhbHM6IHt9LAogICAgICAgICAgICAgICAgc3Viczoge30KICAgICAgICAgICAgfSksIG4udmlkZW8gPSBuZXcgZS5UZW1wbGF0ZSh7CiAgICAgICAgICAgICAgICBjb2RlOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByLmIobiA9IG4gfHwgIiIpLCByLmIoJzxidXR0b24gY2xhc3M9ImJ0bi1wbGF5Ij48L2J1dHRvbj4nKSwgci5iKCJcbiIgKyBuKSwgci5iKCc8dmlkZW8gaWQ9InJvYm90LXZpZGVvIiB3aWR0aD0iMTYwMCIgaGVpZ2h0PSI5MDAiIHByZWxvYWQ9ImF1dG8iIGF1dG9wbGF5PicpLCByLmIoIlxuIiArIG4pLCByLnMoci5mKCJzb3VyY2VzIiwgdCwgZSwgMSksIHQsIGUsIDAsIDEyMywgMTY2LCAie3sgfX0iKSAmJiAoci5ycyh0LCBlLCBmdW5jdGlvbih0LCBlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHIuYignCQk8c291cmNlIHNyYz0iJyksIHIuYihyLnYoci5mKCJzcmMiLCB0LCBlLCAwKSkpLCByLmIoJyIgdHlwZT0iJyksIHIuYihyLnYoci5mKCJ0eXBlIiwgdCwgZSwgMCkpKSwgci5iKCciPicpLCByLmIoIlxuIiArIG4pCiAgICAgICAgICAgICAgICAgICAgfSksIHQucG9wKCkpLCByLmIoIglZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgdmlkZW8gdGFnLiIpLCByLmIoIlxuIiArIG4pLCByLmIoIjwvdmlkZW8+IiksIHIuZmwoKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBhcnRpYWxzOiB7fSwKICAgICAgICAgICAgICAgIHN1YnM6IHt9CiAgICAgICAgICAgIH0pLCBuCiAgICAgICAgfSgpCiAgICB9LCB7CiAgICAgICAgImhvZ2FuLmpzIjogMTMKICAgIH1dLAogICAgNDogW2Z1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgdmFyIHIgPSB0KCJxIiksCiAgICAgICAgICAgIGkgPSB0KCJsb2Rhc2giKSwKICAgICAgICAgICAgbyA9IHQoIi4vdGVtcGxhdGVzIiksCiAgICAgICAgICAgIGEgPSB0KCJiYWNrYm9uZSIpLkV2ZW50cywKICAgICAgICAgICAgcyA9IHQoIi4vaW5zdHJ1Y3Rpb25zIiksCiAgICAgICAgICAgIHUgPSB0KCIuL3RyYWNrIiksCiAgICAgICAgICAgIGMgPSB0KCIuL3ZpZXdzL0ltYWdlR2FsbGVyeSIpLAogICAgICAgICAgICBsID0gdCgiLi92aWV3cy9GdWxsU2NyZWVuVmlkZW8iKSwKICAgICAgICAgICAgZiA9IHt9LAogICAgICAgICAgICBwID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHQgKiBULCAxMCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBwKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHIuZGVmZXIoKTsKICAgICAgICAgICAgICAgICAgICBxLmh0bWwodCksIGUucmVzb2x2ZSgpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gaCh0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSByLmRlZmVyKCk7CiAgICAgICAgICAgICAgICAgICAgdCAmJiAiIiAhPT0gdCAmJiBQLmh0bWwodCksIGUucmVzb2x2ZSgpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZCh0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAiIjsKICAgICAgICAgICAgICAgICAgICB0LnRpbWUgJiYgKGUgKz0gYigpICsgIiAiKSwgdC5wcmVmaXggJiYgKGUgKz0gdC5wcmVmaXggKyAiICIpLCB0LnByZWZpeENvbG9yICYmIFAuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHQucHJlZml4Q29sb3IKICAgICAgICAgICAgICAgICAgICB9KSwgdC5wcmVmaXhXZWlnaHQgJiYgUC5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICBmb250V2VpZ2h0OiB0LnByZWZpeFdlaWdodAogICAgICAgICAgICAgICAgICAgIH0pLCBQLnRleHQoZSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnKCkgewogICAgICAgICAgICAgICAgICAgIE4uZm9jdXMoKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHYodCkgewogICAgICAgICAgICAgICAgICAgIEkgJiYgKHQucHJldmVudERlZmF1bHQoKSwgZygpKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHkodCkgewogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbUZyYW1lKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbihvKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgbysrCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBuKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcS50ZXh0KGEgKyB0LnN1YnN0cigwLCBuKyspKSwgdC5sZW5ndGggPD0gbiAtIDEgPyBpLnJlc29sdmUoKSA6IGUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHIuZGVmZXIoKSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IDEsCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBxLnRleHQoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSgpLCBpLnByb21pc2UKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtKCkgewogICAgICAgICAgICAgICAgICAgIEEuc2Nyb2xsVG9wKFMub3V0ZXJIZWlnaHQoKSAtIEEub3V0ZXJIZWlnaHQoKSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBiKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbmV3IERhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSAodC5nZXRIb3VycygpIDwgMTAgPyAiMCIgOiAiIikgKyB0LmdldEhvdXJzKCksCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAodC5nZXRNaW51dGVzKCkgPCAxMCA/ICIwIiA6ICIiKSArIHQuZ2V0TWludXRlcygpLAogICAgICAgICAgICAgICAgICAgICAgICByID0gZSArICI6IiArIG47CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB4KCkgewogICAgICAgICAgICAgICAgICAgIG0oKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHcgPSBbXTsKICAgICAgICAgICAgICAgIHRoaXMucm91dGVyID0gZSwgdGhpcy5oYXNJbml0aWFsaXplZCA9ICExLCB0aGlzLmZpcnN0Qm9vdCA9ICEwOwogICAgICAgICAgICAgICAgdmFyIF8gPSBSRURJUkVDVCA/ICIvbWVudSIgOiAiLyIsCiAgICAgICAgICAgICAgICAgICAgayA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xlYXJUaW1lb3V0cygpLCB0aGlzLmNsZWFyKCksIHRoaXMuY2xlYXJQb3B1cHMoKSwgbG9nKCJST1VURToiLCB0KSwgUkVESVJFQ1QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiIiA9PT0gdCB8fCAibGl2ZSIgPT09IHQpIHJldHVybiB2b2lkKHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gQkFTRV9VUkwgKyAiL2xpdmUvIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIm1lbnUiICE9PSB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJ1bmRlZmluZWQiID09IHR5cGVvZiBzW3RdKSByZXR1cm4gdm9pZCh3aW5kb3cubG9jYXRpb24uaHJlZiA9IEJBU0VfVVJMICsgIi9saXZlLyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQoc1t0XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLmZpcnN0Qm9vdCA/ICh0aGlzLmZpcnN0Qm9vdCA9ICExLCB0aGlzLnRyYWNrLm9tbmkoIkVtYWlsIFNpZ24tVXAiLCAiTG9hZGluZyBTZXF1ZW5jZSIpLCB0aGlzLnN0YXJ0KHMuaW5pdGlhbCkpIDogdGhpcy5zdGFydChzLm1lbnVQcm9tcHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIiIgIT09IHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgidW5kZWZpbmVkIiA9PSB0eXBlb2Ygc1t0XSkgcmV0dXJuIHZvaWQod2luZG93LmxvY2F0aW9uLmhyZWYgPSBCQVNFX1VSTCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0KHNbdF0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoImxpdmUiID09PSB0KSByZXR1cm4gdm9pZCh3aW5kb3cubG9jYXRpb24uaHJlZiA9IEJBU0VfVVJMICsgIi9saXZlLyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJzdEJvb3QgPyAodGhpcy5maXJzdEJvb3QgPSAhMSwgdGhpcy50cmFjay5vbW5pKCJFbWFpbCBTaWduLVVwIiwgIkxvYWRpbmcgU2VxdWVuY2UiKSwgdGhpcy5zdGFydChzLmluaXRpYWwpKSA6IHRoaXMuc3RhcnQocy5tZW51UHJvbXB0KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGdhKCJzZW5kIiwgInBhZ2V2aWV3IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogIi8iICsgdAogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSwKICAgICAgICAgICAgICAgICAgICBUID0gLjM7CiAgICAgICAgICAgICAgICBpLmV4dGVuZCh0aGlzLCBhKTsKICAgICAgICAgICAgICAgIHZhciBFLCBqID0gJCh3aW5kb3cpLAogICAgICAgICAgICAgICAgICAgIEMgPSAkKGRvY3VtZW50KSwKICAgICAgICAgICAgICAgICAgICBTID0gdCwKICAgICAgICAgICAgICAgICAgICBBID0gJCgiLnRlcm1pbmFsLXdyYXBwZXIiKSwKICAgICAgICAgICAgICAgICAgICBOID0gJCgiI2hpZGRlbi10ZXh0YXJlYSIpLAogICAgICAgICAgICAgICAgICAgIFIgPSAwLAogICAgICAgICAgICAgICAgICAgIEkgPSAhMSwKICAgICAgICAgICAgICAgICAgICBPID0ge30sCiAgICAgICAgICAgICAgICAgICAgTCA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy50cmFjayA9IG5ldyB1OwogICAgICAgICAgICAgICAgdmFyIEQgPSAkKCI8c3BhbiAvPiIpLmFkZENsYXNzKCJwcm9tcHQiKS5odG1sKCImbmJzcDsiKSwKICAgICAgICAgICAgICAgICAgICBQID0gJCgiPHNwYW4gLz4iKS5hZGRDbGFzcygicHJlZml4IiksCiAgICAgICAgICAgICAgICAgICAgcSA9ICQoIjxzcGFuIC8+IikuYWRkQ2xhc3MoImlucHV0IiksCiAgICAgICAgICAgICAgICAgICAgSCA9ICQoIjxkaXYgLz4iKS5hZGRDbGFzcygibGluZSIpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucnVuRXhpdCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXIoKQogICAgICAgICAgICAgICAgfSwgdGhpcy5hcHBlbmQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgUy5hcHBlbmQodCkKICAgICAgICAgICAgICAgIH0sIHRoaXMuY2xlYXJUaW1lb3V0cyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJUaW1lb3V0KHRoaXMuaXRlbVRpbWVvdXQpLCB0aGlzLmNsZWFyVGltZW91dCh0aGlzLnR5cGVUaW1lb3V0KQogICAgICAgICAgICAgICAgfSwgdGhpcy5jbGVhclRpbWVvdXQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgIm51bWJlciIgPT0gdHlwZW9mIHQgJiYgd2luZG93LmNsZWFyVGltZW91dCh0KQogICAgICAgICAgICAgICAgfSwgdGhpcy5jaGFuZ2VJbnN0cnVjdGlvbnMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclRpbWVvdXRzKCksIHRoaXMuY2xlYXIoKSwgdGhpcy5jbGVhclBvcHVwcygpLCB0aGlzLnN0YXJ0KHNbdF0pCiAgICAgICAgICAgICAgICB9LCB0aGlzLm9uKCJleGl0IiwgdGhpcy5ydW5FeGl0LmJpbmQodGhpcykpLCB0aGlzLm9uKCJpbnN0cnVjdGlvbnM6Y2hhbmdlIiwgdGhpcy5jaGFuZ2VJbnN0cnVjdGlvbnMpLCB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVycygpLCB0aGlzLmNsZWFyKCksIHRoaXMuaGFzSW5pdGlhbGl6ZWQgPSAhMAogICAgICAgICAgICAgICAgfSwgdGhpcy5zdGFydCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBSID0gMCwgRSA9IHQsIHRoaXMucnVuKCkKICAgICAgICAgICAgICAgIH0sIHRoaXMucnVuID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBFW1JdOwogICAgICAgICAgICAgICAgICAgIHRoaXMucnVuSXRlbSh0KQogICAgICAgICAgICAgICAgfSwgdGhpcy5ydW5JdGVtID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiB0ICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIHRoaXNbdC50eXBlXSAmJiAodGhpcy5pdGVtVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3QudHlwZV0odCkKICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIG4odC5kZWxheSkpKQogICAgICAgICAgICAgICAgfSwgdGhpcy5tZW51T3B0aW9ucyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBPID0gdC5vcHRpb25zLCB0aGlzLmRpc3BsYXlNZW51KCksIHRoaXMubmV4dEl0ZW0oKQogICAgICAgICAgICAgICAgfSwgdGhpcy50eXBlZFRleHQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdC5jbGVhciAmJiB0aGlzLmNsZWFyKCksIHQucGxheVNvdW5kICYmIGNyZWF0ZWpzLlNvdW5kLnBsYXkodC5wbGF5U291bmQpOwogICAgICAgICAgICAgICAgICAgIHZhciBlID0gMDsKICAgICAgICAgICAgICAgICAgICB0LnByZWZpeCAmJiAoaChkKHQpKSwgZSA9IDEyMDApLCB0aGlzLnR5cGVUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHkodC5jb250ZW50KS50aGVuKHRoaXMuaGFuZGxlVHlwaW5nLmJpbmQodGhpcykpCiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCBlKQogICAgICAgICAgICAgICAgfSwgdGhpcy5pbWFnZUdhbGxlcnkgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgRC5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBjKHsKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VzOiB0LmltYWdlcywKICAgICAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeU5hbWU6IHQuZ2FsbGVyeU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrOiB0LnRyYWNrCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdy5wdXNoKGUpLCBlLiRlbC5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwCiAgICAgICAgICAgICAgICAgICAgfSksIGUub24oImxvYWRlZCIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBlLiRlbC5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0pLCBlLm9uKCJjbG9zZWQiLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVOZXdMaW5lKCksIHRoaXMubmV4dEl0ZW0oKSwgdGhpcy5yb3V0ZXIubmF2aWdhdGUoXywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpLCAkKCIjYXBwIikuYXBwZW5kKGUucmVuZGVyKCkuYWRkTGlzdGVuZXJzKCkuJGVsKQogICAgICAgICAgICAgICAgfSwgdGhpcy5oYW5kbGVUeXBpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAiY29udGludWVUeXBlZFRleHQiID09PSBFW1IgKyAxXS50eXBlID8gdGhpcy5uZXh0SXRlbSgpIDogKHRoaXMuaGFuZGxlTmV3TGluZSgpLCB0aGlzLm5leHRJdGVtKCkpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmNsZWFyUG9wdXBzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDAsIGUgPSB3Lmxlbmd0aDsgZSA+IHQ7IHQrKykgd1t0XS5yZW1vdmVFbCgpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmJhY2tib25lVmlldyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBmW3Qudmlld10odC5vcHRpb25zKTsKICAgICAgICAgICAgICAgICAgICB3LnB1c2goZSksIGUub24oImNsb3NlZCIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU5ld0xpbmUoKSwgdGhpcy5uZXh0SXRlbSgpLCB0aGlzLnJvdXRlci5uYXZpZ2F0ZShfLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAhMAogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSksICQoIiNhcHAiKS5hcHBlbmQoZS5yZW5kZXIoKS5hZGRMaXN0ZW5lcnMoKS4kZWwpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmZ1bGxzY3JlZW5WaWRlbyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBELnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IGwoewogICAgICAgICAgICAgICAgICAgICAgICB2aWRlb05hbWU6IHQudmlkZW9OYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiB0LnNvdXJjZXMsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyOiB0LmNvdmVyLAogICAgICAgICAgICAgICAgICAgICAgICB0cmFjazogdC50cmFjawogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHcucHVzaChlKSwgZS5vbigiZW5kZWQiLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVOZXdMaW5lKCksIHRoaXMubmV4dEl0ZW0oKQogICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSksICQoIiNhcHAiKS5hcHBlbmQoZS5yZW5kZXIoKS5hZGRMaXN0ZW5lcnMoKS4kZWwpLCBlLnBsYXkoKQogICAgICAgICAgICAgICAgfSwgdGhpcy5jb250aW51ZVR5cGVkVGV4dCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB0Lm5ld2xpbmUgJiYgdGhpcy5oYW5kbGVOZXdMaW5lKCksIHkoIiAiICsgdC5jb250ZW50KS50aGVuKHRoaXMuaGFuZGxlVHlwaW5nLmJpbmQodGhpcykpCiAgICAgICAgICAgICAgICB9LCB0aGlzLmJhc2ljVGV4dCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB0LmNsZWFyICYmIHRoaXMuY2xlYXIoKSwgdC50cmFjayAmJiB0aGlzLnRyYWNrLm9tbmkodm9pZCAwLCB2b2lkIDAsIHQudHJhY2spLCBoKGQodCkpLCBwKHQuY29udGVudCksIHQuY2xhc3NOYW1lICYmIHEuYWRkQ2xhc3ModC5jbGFzc05hbWUpLCB0LmNvbG9yICYmIHEuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHQuY29sb3IKICAgICAgICAgICAgICAgICAgICB9KSwgdC5wbGF5U291bmQgJiYgY3JlYXRlanMuU291bmQucGxheSh0LnBsYXlTb3VuZCksIHRoaXMuaGFuZGxlTmV3TGluZSgpLCBxLnJlbW92ZUNsYXNzKHQuY2xhc3NOYW1lKSwgZSB8fCB0aGlzLm5leHRJdGVtKCkKICAgICAgICAgICAgICAgIH0sIHRoaXMuaW5saW5lSW1hZ2UgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdC5jbGVhciAmJiB0aGlzLmNsZWFyKCksIHQudHJhY2sgJiYgdGhpcy50cmFjay5vbW5pKHZvaWQgMCwgdm9pZCAwLCB0LnRyYWNrKTsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG5ldyBJbWFnZTsKICAgICAgICAgICAgICAgICAgICBuLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBtKCkKICAgICAgICAgICAgICAgICAgICB9LCBuLnNyYyA9IHQuY29udGVudCwgcChvLmlubGluZWltYWdlLnJlbmRlcih7CiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiB0LmNvbnRlbnQKICAgICAgICAgICAgICAgICAgICB9KSksIHQuY2xhc3NOYW1lICYmIHEuYWRkQ2xhc3ModC5jbGFzc05hbWUpLCB0LmNvbG9yICYmIHEuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHQuY29sb3IKICAgICAgICAgICAgICAgICAgICB9KSwgdC5wbGF5U291bmQgJiYgY3JlYXRlanMuU291bmQucGxheSh0LnBsYXlTb3VuZCksIHRoaXMuaGFuZGxlTmV3TGluZSgpLCBxLnJlbW92ZUNsYXNzKHQuY2xhc3NOYW1lKSwgbSgpLCBlIHx8IHRoaXMubmV4dEl0ZW0oKQogICAgICAgICAgICAgICAgfSwgdGhpcy51c2VyUHJvbXB0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIGgoZCh0KSksIHRoaXMucHJvbXB0KHQub3B0aW9ucykKICAgICAgICAgICAgICAgIH0sIHRoaXMuZW1haWxQcm9tcHQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgaChkKHQpKSwgZygpLCBJID0gITAKICAgICAgICAgICAgICAgIH0sIHRoaXMubmV4dEl0ZW0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBSKyssIHRoaXMucnVuKCkKICAgICAgICAgICAgICAgIH0sIHRoaXMuY2xlYXIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBTLmVtcHR5KCksIHRoaXMuc3RhcnRMaW5lKCkKICAgICAgICAgICAgICAgIH0sIHRoaXMuc3RhcnRMaW5lID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgSC5hcHBlbmQoUCkuYXBwZW5kKHEpLmFwcGVuZChEKSwgUy5hcHBlbmQoSCkKICAgICAgICAgICAgICAgIH0sIHRoaXMucHJvbXB0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIE8gPSB0LCBJID0gITAsIGcoKQogICAgICAgICAgICAgICAgfSwgdGhpcy5zdWJtaXQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBJID0gITEsIHRoaXMuaGFuZGxlTmV3TGluZSgpLCBOLmJsdXIoKSwgImVtYWlsUHJvbXB0IiA9PT0gRVtSXS50eXBlID8gdGhpcy5pbnRlcnByZXRFbWFpbChMW0wubGVuZ3RoIC0gMV0uaW5wdXQpIDogdGhpcy5pbnRlcnByZXQoTFtMLmxlbmd0aCAtIDFdLmlucHV0KQogICAgICAgICAgICAgICAgfSwgdGhpcy5oYW5kbGVOZXdMaW5lID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9yZUNvbW1hbmQoKSwgcS5lbXB0eSgpLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAiaW5oZXJpdCIKICAgICAgICAgICAgICAgICAgICB9KSwgUC5lbXB0eSgpLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAiaW5oZXJpdCIKICAgICAgICAgICAgICAgICAgICB9KSwgTi52YWwoIiIpLCB0aGlzLnN0YXJ0TGluZSgpLCBtKCkKICAgICAgICAgICAgICAgIH0sIHRoaXMuaW50ZXJwcmV0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwLCBuID0gTy5jb21tYW5kcy5sZW5ndGg7IG4gPiBlOyBlKyspCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Lm1hdGNoKE8uY29tbWFuZHNbZV0ucmVnZXgpKSByZXR1cm4gY3JlYXRlanMuU291bmQucGxheSgiaW5pdCIpLCBPLmNvbW1hbmRzW2VdLm5hdmlnYXRlICYmIHRoaXMucm91dGVyLm5hdmlnYXRlKCIvIiArIHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBPLmNvbW1hbmRzW2VdLm9uc2VsZWN0LmNhbGwodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheUVycm9yKCkKICAgICAgICAgICAgICAgIH0sIHRoaXMuaW50ZXJwcmV0RW1haWwgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCJlbWFpbDpzdWJtaXQiLCB0KQogICAgICAgICAgICAgICAgfSwgdGhpcy5kaXNwbGF5TWVudSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIEQucmVtb3ZlKCksIHRoaXMuc3RvcmVDb21tYW5kKCksIHRoaXMuYmFzaWNUZXh0KHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogby5tZW51LnJlbmRlcih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kczogTy5jb21tYW5kcwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0sICEwKQogICAgICAgICAgICAgICAgfSwgdGhpcy5kaXNwbGF5RXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU5ld0xpbmUoKSwgY3JlYXRlanMuU291bmQucGxheSgiaW5jb3JyZWN0IiksIHEudGV4dCgiRXJyb3I6IENvbW1hbmQgbm90IHJlY29nbml6ZWQuIFR5cGUgaGVscCBmb3IgYSBsaXN0IG9mIGNvbW1hbmRzLiIpLmFkZENsYXNzKCJlcnJvciIpLCB0aGlzLmhhbmRsZU5ld0xpbmUoKSwgdGhpcy5ydW4oKQogICAgICAgICAgICAgICAgfSwgdGhpcy5zdG9yZUNvbW1hbmQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBELnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gSC5jbG9uZSgpOwogICAgICAgICAgICAgICAgICAgIFMuYXBwZW5kKHQpLCBMLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogcS50ZXh0KCksCiAgICAgICAgICAgICAgICAgICAgICAgIGVsOiB0CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sIHRoaXMuYWRkTGlzdGVuZXJzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgQy5vbigia2V5ZG93biIsIHRoaXMua2V5ZG93bkhhbmRsZXIuYmluZCh0aGlzKSksIEMub24oImtleXVwIiwgdGhpcy5rZXl1cEhhbmRsZXIuYmluZCh0aGlzKSksIEMub24oImNsaWNrIiwgdiksIEMub24oInRvdWNoc3RhcnQiLCAiLmxpbmU6bGFzdCIsIHYpLCBqLm9uKCJyZXNpemUiLCB4KSwgTi5vbigiaW5wdXQiLCB0aGlzLmhhbmRsZVRleHRJbnB1dCkKICAgICAgICAgICAgICAgIH0sIHRoaXMua2V5ZG93bkhhbmRsZXIgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0LmtleUNvZGUgPyB0LmtleUNvZGUgOiB0LndoaWNoOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAxMyA9PT0gZSA/ICh0LnByZXZlbnREZWZhdWx0KCksIHZvaWQgdGhpcy5zdWJtaXQoKSkgOiB2b2lkIDAKICAgICAgICAgICAgICAgIH0sIHRoaXMua2V5dXBIYW5kbGVyID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gdC5rZXlDb2RlID8gdC5rZXlDb2RlIDogdC53aGljaDsKICAgICAgICAgICAgICAgICAgICAoOCA9PT0gZSB8fCA0NiA9PT0gZSkgJiYgdGhpcy5oYW5kbGVUZXh0SW5wdXQoKQogICAgICAgICAgICAgICAgfSwgdGhpcy5oYW5kbGVUZXh0SW5wdXQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBJICYmIHEudGV4dChOLnZhbCgpKQogICAgICAgICAgICAgICAgfSwgdGhpcy5iYWNrc3BhY2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoSSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHEudGV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICBxLnRleHQodC5zdWJzdHJpbmcoMCwgdC5sZW5ndGggLSAxKSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCB0aGlzLmluaXQoKSwgdGhpcy5yb3V0ZXIub24oInJvdXRlIiwgayksIHRoaXMKICAgICAgICAgICAgfTsKICAgICAgICBlLmV4cG9ydHMgPSBwCiAgICB9LCB7CiAgICAgICAgIi4vaW5zdHJ1Y3Rpb25zIjogMiwKICAgICAgICAiLi90ZW1wbGF0ZXMiOiAzLAogICAgICAgICIuL3RyYWNrIjogNSwKICAgICAgICAiLi92aWV3cy9GdWxsU2NyZWVuVmlkZW8iOiA3LAogICAgICAgICIuL3ZpZXdzL0ltYWdlR2FsbGVyeSI6IDgsCiAgICAgICAgYmFja2JvbmU6IDksCiAgICAgICAgbG9kYXNoOiAxNiwKICAgICAgICBxOiAxNwogICAgfV0sCiAgICA1OiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICB2YXIgciA9IHQoImxvZGFzaCIpLAogICAgICAgICAgICBpID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB0aGlzLm9tbmkgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5udWxsaWZ5KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAiTXIuIFJvYm90IiwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9ICJXaG8gSXMgTXIuIFJvYm90IiwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIGUgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSAoaSArICIgOiAiICsgbyArICIgOiAiICsgZS5qb2luKCIgOiAiKSkucmVwbGFjZSgvXCA6ICQvLCAiIikKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzLnBhZ2VOYW1lID0gYSh0LCBlKSwgcy5wcm9wMiA9ICJEcmFtYSIsIHMucHJvcDMgPSAiRmVhdHVyZXMiLCBzLnByb3A0ID0gaSArICIgOiAiICsgbywgcy5wcm9wNSA9IGkgKyAiIDogIiArIG8gKyAiIDogIiArIHQsIHMucHJvcDggPSAiQ2FibGUiLCBzLnByb3A5ID0gIlVTQSBOZXR3b3JrIiwgcy5wcm9wMTAgPSBpLCBzLnByb3AzMiA9ICJOZXcgU2l0ZSIsIHMucHJvcDYwID0gIk5vdCBTcG9uc29yZWQiLCAoIkZTb2NpZXR5IEdhbGxlcnkiID09PSB0IHx8ICI0MjAgSGlkZGVuIEltYWdlIiA9PT0gdCkgJiYgKHMucHJvcDMgPSAiR2FsbGVyeSIpLCAidW5kZWZpbmVkIiAhPSB0eXBlb2YgbiAmJiByLmV4dGVuZChzLCBuKSwgZSA/ICgiVmlkZW8iID09PSBlLnN1YlNlY3Rpb24gJiYgKHMucHJvcDMgPSAiVmlkZW8iKSwgLTEgIT09IGUuaW5kZXhPZigiQW5zd2VyIikgPyAocy5saW5rVHJhY2tWYXJzID0gImV2ZW50cyxldmVudDYscHJvcDU5LGVWYXI1OSIsIHMubGlua1RyYWNrRXZlbnRzID0gImV2ZW50NixldmVudDg5Iiwgcy5ldmVudHMgPSAiZXZlbnQ2LGV2ZW50ODkiLCBzLnByb3A1OSA9IHMuZVZhcjU5ID0gdCArICIgOiAiICsgZSwgcy50KHMsICJvIiwgIkFuc3dlciIpKSA6IC0xICE9PSBlLmluZGV4T2YoIlF1ZXN0aW9uIikgPyAocy5saW5rVHJhY2tWYXJzID0gImV2ZW50cyxldmVudDYscHJvcDU4LGVWYXI1OCIsIHMubGlua1RyYWNrRXZlbnRzID0gImV2ZW50NixldmVudDg4Iiwgcy5ldmVudHMgPSAiZXZlbnQ2LGV2ZW50ODgiLCBzLnByb3A1OCA9IHMuZVZhcjU4ID0gdCArICIgOiAiICsgZSwgcy50KHMsICJvIiwgIlBvbGwiKSkgOiAtMSAhPT0gZS5pbmRleE9mKCJWaWV3IFByb2dyZXNzIikgPyAocy5wYWdlTmFtZSA9IGkgKyAiIDogIiArIG8gKyAiIDogVmlldyBQcm9ncmVzcyIsIHMudHJhY2socywgIm8iLCBzLnBhZ2VOYW1lKSkgOiBzLnRyYWNrKHMsICJvIiwgcy5wYWdlTmFtZSkpIDogcy50cmFjayhzLCAibyIsIHMucGFnZU5hbWUpLCBsb2cocywgcy5wYWdlTmFtZSwgcy5wcm9wMywgcy5wcm9wNCwgcy5wcm9wNSkKICAgICAgICAgICAgICAgIH0sIHRoaXMuY2xpY2sgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5udWxsaWZ5KCksIHMubGlua1RyYWNrVmFycyA9ICJldmVudHMsZVZhcjY1LHByb3A2NSIsIHMubGlua1RyYWNrRXZlbnRzID0gImV2ZW50NjUiLCBzLmV2ZW50cyA9ICJldmVudDY1Iiwgcy5lVmFyNjUgPSBzLnByb3A2NSA9IHQsIHMudGwodGhpcywgIm8iLCAiUGFnZSBJdGVtIENsaWNrIiksIHMubWFuYWdlVmFycygiY2xlYXJWYXJzIiwgcy5saW5rVHJhY2tWYXJzLCAxKQogICAgICAgICAgICAgICAgfSwgdGhpcy5udWxsaWZ5ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcy5wYWdlTmFtZSA9ICIiLCBzLnByb3AyID0gIiIsIHMucHJvcDMgPSAiIiwgcy5wcm9wNCA9ICIiLCBzLnByb3A1ID0gIiIsIHMucHJvcDggPSAiIiwgcy5wcm9wOSA9ICIiLCBzLnByb3AxMCA9ICIiLCBzLnByb3AzMSA9ICIiLCBzLnByb3AzMiA9ICIiLCBzLnByb3A1OCA9ICIiLCBzLnByb3A1OSA9ICIiLCBzLnByb3A2MCA9ICIiLCBzLmVWYXI1OCA9ICIiLCBzLmVWYXI1OSA9ICIiLCBzLmVWYXI3MyA9ICIiLCBzLmVWYXI3NCA9ICIiLCBzLmV2ZW50cyA9ICIiLCBzLmxpbmtUcmFja1ZhcnMgPSAiTm9uZSIsIHMubGlua1RyYWNrRXZlbnRzID0gIk5vbmUiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgZS5leHBvcnRzID0gaQogICAgfSwgewogICAgICAgIGxvZGFzaDogMTYKICAgIH1dLAogICAgNjogW2Z1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgdmFyIHIgPSB0KCJsb2Rhc2giKSwKICAgICAgICAgICAgaSA9IHQoImJhY2tib25lIiksCiAgICAgICAgICAgIG8gPSB0KCIuLi90ZW1wbGF0ZXMiKSwKICAgICAgICAgICAgYSA9IHQoIi4uL3Rlcm1pbmFsIiksCiAgICAgICAgICAgIHMgPSB0KCIuLi9pbnN0cnVjdGlvbnMiKSwKICAgICAgICAgICAgdSA9IHQoInN1cGVyYWdlbnQiKTsKICAgICAgICBpLiQgPSAkOwogICAgICAgIHZhciBjID0gaS5Sb3V0ZXIuZXh0ZW5kKHsKICAgICAgICAgICAgICAgIHJvdXRlczogewogICAgICAgICAgICAgICAgICAgICIiOiAiIiwKICAgICAgICAgICAgICAgICAgICBpbmZvcm06ICJpbmZvcm0iLAogICAgICAgICAgICAgICAgICAgIDQyMDogIjQyMCIsCiAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb246ICJxdWVzdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgd2FrZXVwOiAid2FrZXVwIiwKICAgICAgICAgICAgICAgICAgICBqb2luOiAiam9pbiIsCiAgICAgICAgICAgICAgICAgICAgcHJlcGFyZTogInByZXBhcmUiLAogICAgICAgICAgICAgICAgICAgIGZzb2NpZXR5OiAiZnNvY2lldHkiLAogICAgICAgICAgICAgICAgICAgIG1lbnU6ICJtZW51IiwKICAgICAgICAgICAgICAgICAgICAiKnBhdGgiOiAiZGVmYXVsdCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGwgPSBpLlZpZXcuZXh0ZW5kKHsKICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBvLmFwcCwKICAgICAgICAgICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHIuYmluZEFsbCh0aGlzKSwgdGhpcy5yb3V0ZXIgPSBuZXcgYywgdGhpcy5yZW5kZXIoKSwgdGhpcy5wcmVwYXJlU291bmRzKCksIHRoaXMudGVybWluYWwgPSBuZXcgYSh0aGlzLiQoIi50ZXJtaW5hbC1jb250ZW50IiksIHRoaXMucm91dGVyKSwgdGhpcy5hZGRIYW5kbGVycygpLCBpLmhpc3Rvcnkuc3RhcnQoewogICAgICAgICAgICAgICAgICAgICAgICBwdXNoU3RhdGU6ICEwCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwcmVwYXJlU291bmRzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBjcmVhdGVqcy5Tb3VuZC5pbml0aWFsaXplRGVmYXVsdFBsdWdpbnMoKSB8fCBsb2coIm5vIHNvdW5kcyIpOwogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gIi9hdWRpby8iLAogICAgICAgICAgICAgICAgICAgICAgICBlID0gW3sKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogImh1bV9sb29wLm9nZyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogImh1bSIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiAiYmVlcDIub2dnIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiaW5jb3JyZWN0IgogICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM6ICJiZWVwLm9nZyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogImluaXQiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogInR5cGUub2dnIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAidHlwZSIKICAgICAgICAgICAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgICAgICAgY3JlYXRlanMuU291bmQuYWx0ZXJuYXRlRXh0ZW5zaW9ucyA9IFsibXAzIl0sIGNyZWF0ZWpzLlNvdW5kLnJlZ2lzdGVyU291bmRzKGUsIHQpLCBjcmVhdGVqcy5Tb3VuZC5zZXRWb2x1bWUoLjQpLCAkKHdpbmRvdykub24oImNsaWNrIHRvdWNoc3RhcnQga2V5ZG93biBrZXlwcmVzcyIsIHRoaXMuaW5pdEF1ZGlvKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluaXRBdWRpbzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBjcmVhdGVqcy5Tb3VuZC5wbGF5KCJodW0iKTsKICAgICAgICAgICAgICAgICAgICB0LnBhdXNlKCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhZGRIYW5kbGVyczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXJtaW5hbC5vbigidmlkZW86cGxheSIsIHRoaXMuc3RhcnRWaWRlbyksIHRoaXMudGVybWluYWwub24oImVtYWlsOnN1Ym1pdCIsIHRoaXMuc3VibWl0RW1haWwpLCB0aGlzLnRlcm1pbmFsLmNsZWFyKCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdWJtaXRFbWFpbDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUodCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IC9eKChbXjw+KClbXF1cXC4sOzpcc0BcIl0rKFwuW148PigpW1xdXFwuLDs6XHNAXCJdKykqKXwoXCIuK1wiKSlAKChcW1swLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cXSl8KChbYS16QS1aXC0wLTldK1wuKStbYS16QS1aXXsyLH0pKSQvOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS50ZXN0KHQpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGUodCkgPyB0aGlzLnBvc3RFbWFpbCh0KSA6IHRoaXMuaGFuZGxlRW1haWxFcnJvcigpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaGFuZGxlRW1haWxFcnJvcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXJtaW5hbC5zdGFydChzLmVtYWlsRXJyb3IpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcG9zdEVtYWlsOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdS5wb3N0KCIiKS50eXBlKCJmb3JtIikuc2VuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0CiAgICAgICAgICAgICAgICAgICAgfSkuZW5kKHRoaXMuaGFuZGxlRW1haWxSZXNwb25zZSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBoYW5kbGVFbWFpbFJlc3BvbnNlOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgLy8iZXJyb3IiID09PSB0LmJvZHkudHlwZSA/IHRoaXMuaGFuZGxlRW1haWxFcnJvcigpIDogdGhpcy5oYW5kbGVFbWFpbFN1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgIHRoaXMudGVybWluYWwuc3RhcnQocy5lbWFpbFN1Y2Nlc3MpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaGFuZGxlRW1haWxTdWNjZXNzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRlcm1pbmFsLnN0YXJ0KHMuZW1haWxTdWNjZXNzKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlLnJlbmRlcigpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICBlLmV4cG9ydHMgPSBsCiAgICB9LCB7CiAgICAgICAgIi4uL2luc3RydWN0aW9ucyI6IDIsCiAgICAgICAgIi4uL3RlbXBsYXRlcyI6IDMsCiAgICAgICAgIi4uL3Rlcm1pbmFsIjogNCwKICAgICAgICBiYWNrYm9uZTogOSwKICAgICAgICBsb2Rhc2g6IDE2LAogICAgICAgIHN1cGVyYWdlbnQ6IDE4CiAgICB9XSwKICAgIDc6IFtmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgInVzZSBzdHJpY3QiOwogICAgICAgIHZhciByID0gdCgibG9kYXNoIiksCiAgICAgICAgICAgIGkgPSB0KCJiYWNrYm9uZSIpLAogICAgICAgICAgICBvID0gdCgiLi4vdGVtcGxhdGVzIiksCiAgICAgICAgICAgIGEgPSB0KCIuLi90cmFjayIpLAogICAgICAgICAgICBzID0gbmV3IGE7CiAgICAgICAgaS4kID0gJDsKICAgICAgICB2YXIgdSA9ICQod2luZG93KSwKICAgICAgICAgICAgYyA9IGkuVmlldy5leHRlbmQoewogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAidmlkZW8tY29udGFpbmVyIiwKICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBvLnZpZGVvLAogICAgICAgICAgICAgICAgZXZlbnRzOiB7CiAgICAgICAgICAgICAgICAgICAgImNsaWNrIHZpZGVvIjogInBsYXkiLAogICAgICAgICAgICAgICAgICAgICJjbGljayAuYnRuLXBsYXkiOiAicGxheSIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgci5iaW5kQWxsKHRoaXMpLCByLmV4dGVuZCh0aGlzLCB0KSwgci5leHRlbmQodGhpcywgaS5FdmVudHMpLCBzLm9tbmkodGhpcy52aWRlb05hbWUsIHZvaWQgMCwgdGhpcy50cmFjaykKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvblZpZGVvRW5kOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVycygpLCB0aGlzLnRyaWdnZXIoImVuZGVkIiksIHRoaXMucmVtb3ZlRWwoKSwgcy5vbW5pKCJIZWxwIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZW1vdmVFbDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcnMoKSwgdGhpcy51bmJpbmQoKSwgdGhpcy5yZW1vdmUoKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVyczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kKCJ2aWRlbyIpLm9mZigiZW5kZWQiLCB0aGlzLm9uVmlkZW9FbmQpLCB1Lm9mZigicmVzaXplIiwgdGhpcy5oYW5kbGVSZXNpemUpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGxheTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJCgidmlkZW8iKVswXS5wbGF5KCksIHRoaXMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhZGRMaXN0ZW5lcnM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiQoInZpZGVvIikub24oImVuZGVkIiwgdGhpcy5vblZpZGVvRW5kKSwgdGhpcy4kKCJ2aWRlbyIpLm9uKCJwbGF5IiwgdGhpcy5yZW1vdmVQbGF5QnV0dG9uKSwgdS5vbigicmVzaXplIiwgdGhpcy5oYW5kbGVSZXNpemUpLCB0aGlzCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVtb3ZlUGxheUJ1dHRvbjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kKCJidXR0b24uYnRuLXBsYXkiKS5yZW1vdmUoKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGhhbmRsZVJlc2l6ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB1LndpZHRoKCksCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB1LmhlaWdodCgpLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gdCwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0IC8gZSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHRoaXMuYXNwZWN0UmF0aW8gfHwgMTYgLyA5OwogICAgICAgICAgICAgICAgICAgIHRoaXMuY292ZXIgPyBpID4gbyA/IChyID0gdCAqICgxIC8gbyksIHRoaXMuJGVsLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0LAogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogLSgociAtIGUpIC8gMiksCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDAKICAgICAgICAgICAgICAgICAgICB9KSkgOiAobiA9IGUgKiBvLCB0aGlzLiRlbC5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogbiwKICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBlLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAtKChuIC0gdCkgLyAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAwCiAgICAgICAgICAgICAgICAgICAgfSkpIDogaSA+IG8gPyB0aGlzLiRlbC5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBlICogbywKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogIjUwJSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogIjUwJSIsCiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IC0oZSAqIG8gLyAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiAtKGUgLyAyKQogICAgICAgICAgICAgICAgICAgIH0pIDogdGhpcy4kZWwuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogdCAqICgxIC8gbyksCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICI1MCUiLAogICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICI1MCUiLAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAtKHQgLyAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiAtKHQgKiAoMSAvIG8pIC8gMikKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZS5yZW5kZXIoewogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiB0aGlzLnNvdXJjZXMKICAgICAgICAgICAgICAgICAgICB9KSksIHRoaXMuaGFuZGxlUmVzaXplKCksIHRoaXMuJGVsLmZhZGVJbigpLCB0aGlzCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIGUuZXhwb3J0cyA9IGMKICAgIH0sIHsKICAgICAgICAiLi4vdGVtcGxhdGVzIjogMywKICAgICAgICAiLi4vdHJhY2siOiA1LAogICAgICAgIGJhY2tib25lOiA5LAogICAgICAgIGxvZGFzaDogMTYKICAgIH1dLAogICAgODogW2Z1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgdmFyIHIgPSB0KCJsb2Rhc2giKSwKICAgICAgICAgICAgaSA9IHQoImJhY2tib25lIiksCiAgICAgICAgICAgIG8gPSB0KCIuLi90ZW1wbGF0ZXMiKSwKICAgICAgICAgICAgYSA9IHQoIi4uL3RyYWNrIiksCiAgICAgICAgICAgIHMgPSBuZXcgYTsKICAgICAgICAkLmZuLmNvbnRhaW5pZnkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzLnBhcmVudCgpLAogICAgICAgICAgICAgICAgZSA9IHRoaXMsCiAgICAgICAgICAgICAgICBuID0gdC53aWR0aCgpIC8gdC5oZWlnaHQoKSwKICAgICAgICAgICAgICAgIHIgPSBlLmdldCgwKS5uYXR1cmFsV2lkdGggLyBlLmdldCgwKS5uYXR1cmFsSGVpZ2h0OwogICAgICAgICAgICBuID4gciA/IGUuY3NzKHsKICAgICAgICAgICAgICAgIGxlZnQ6ICh0LndpZHRoKCkgLSB0LmhlaWdodCgpICogcikgLyAyLAogICAgICAgICAgICAgICAgdG9wOiAwLAogICAgICAgICAgICAgICAgaGVpZ2h0OiB0LmhlaWdodCgpLAogICAgICAgICAgICAgICAgd2lkdGg6IHQuaGVpZ2h0KCkgKiByCiAgICAgICAgICAgIH0pIDogZS5jc3MoewogICAgICAgICAgICAgICAgdG9wOiAodC5oZWlnaHQoKSAtIHQud2lkdGgoKSAqICgxIC8gcikpIC8gMiwKICAgICAgICAgICAgICAgIGxlZnQ6IDAsCiAgICAgICAgICAgICAgICBoZWlnaHQ6IHQud2lkdGgoKSAqICgxIC8gciksCiAgICAgICAgICAgICAgICB3aWR0aDogdC53aWR0aCgpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwgaS4kID0gJDsKICAgICAgICB2YXIgdSA9IGkuVmlldy5leHRlbmQoewogICAgICAgICAgICBjbGFzc05hbWU6ICJpbWFnZS1jb250YWluZXIiLAogICAgICAgICAgICB0ZW1wbGF0ZTogby5pbWFnZWdhbGxlcnksCiAgICAgICAgICAgIGV2ZW50czogewogICAgICAgICAgICAgICAgImNsaWNrIC5idG4tY2xvc2UiOiAiY2xvc2VHYWxsZXJ5IgogICAgICAgICAgICB9LAogICAgICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByLmJpbmRBbGwodGhpcyksIHIuZXh0ZW5kKHRoaXMsIHQpLCByLmV4dGVuZCh0aGlzLCBpLkV2ZW50cyksIHRoaXMuaW1hZ2VzTG9hZGVkID0gMCwgdGhpcy5wcmVsb2FkSW1hZ2VzKCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xvc2VHYWxsZXJ5OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigiY2xvc2VkIiksIHRoaXMuJCgiLmltYWdlLWdhbGxlcnkiKS5zbGljaygidW5zbGljayIpLCB0aGlzLnJlbW92ZUVsKCksIHMub21uaSgiSGVscCIpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFkZExpc3RlbmVyczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgICAgICB9LAogICAgICAgICAgICByZXNpemVJbWFnZXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdGhpcy4kaW1hZ2VzLmVhY2goZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICQoZSkuY29udGFpbmlmeSgpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICByZW1vdmVMaXN0ZW5lcnM6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgICAgIHByZWxvYWRJbWFnZXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDAsIGUgPSB0aGlzLmltYWdlcy5sZW5ndGg7IGUgPiB0OyB0KyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG5ldyBJbWFnZTsKICAgICAgICAgICAgICAgICAgICBuLm9ubG9hZCA9IHRoaXMub25JbWFnZUxvYWQsIG4uc3JjID0gdGhpcy5pbWFnZXNbdF0uc3JjCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNsaWRlQ2hhbmdlOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICBzLm9tbmkodGhpcy5nYWxsZXJ5TmFtZSwgIlBob3RvICIgKyAobiArIDEpLCB7CiAgICAgICAgICAgICAgICAgICAgcHJvcDM6ICJHYWxsZXJ5IgogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW5pdENhcm91c2VsOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy4kKCIuaW1hZ2UtZ2FsbGVyeSIpOwogICAgICAgICAgICAgICAgcmV0dXJuIHQuc2xpY2soewogICAgICAgICAgICAgICAgICAgIGRvdHM6ICEwLAogICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSwKICAgICAgICAgICAgICAgICAgICBwcmV2QXJyb3c6IG8uYXJyb3cucmVuZGVyKHsKICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uQ2xhc3M6ICJzbGljay1wcmV2IiwKICAgICAgICAgICAgICAgICAgICAgICAgcG9seWdvblBvaW50czogIjE1LDAgMTUsMjAsIDAgMTAiCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgbmV4dEFycm93OiBvLmFycm93LnJlbmRlcih7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbkNsYXNzOiAic2xpY2stbmV4dCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlnb25Qb2ludHM6ICIwLDAgMCwyMCwgMTUgMTAiCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pLCB0aGlzLiRpbWFnZXMgPSB0aGlzLiQoIi5pbWFnZS1pdGVtIGltZyIpLCB0Lm9uKCJzZXRQb3NpdGlvbiIsIHRoaXMucmVzaXplSW1hZ2VzKSwgdC5vbigiYWZ0ZXJDaGFuZ2UiLCB0aGlzLnNsaWRlQ2hhbmdlKSwgdGhpcy5yZXNpemVJbWFnZXMoKSwgdGhpcy5pbWFnZXMubGVuZ3RoID4gMSA/IHMub21uaSh0aGlzLmdhbGxlcnlOYW1lLCAiUGhvdG8gMSIsIHRoaXMudHJhY2spIDogcy5vbW5pKHRoaXMuZ2FsbGVyeU5hbWUsIHZvaWQgMCwgdGhpcy50cmFjayksIHRoaXMKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25JbWFnZUxvYWQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdGhpcy5pbWFnZXNMb2FkZWQrKywgdGhpcy5pbWFnZXNMb2FkZWQgPT09IHRoaXMuaW1hZ2VzLmxlbmd0aCAmJiAodGhpcy5pbml0Q2Fyb3VzZWwoKSwgdGhpcy50cmlnZ2VyKCJsb2FkZWQiKSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVtb3ZlRWw6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcnMoKSwgdGhpcy51bmJpbmQoKSwgdGhpcy5yZW1vdmUoKQogICAgICAgICAgICB9LAogICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZS5yZW5kZXIoewogICAgICAgICAgICAgICAgICAgIGltYWdlczogdGhpcy5pbWFnZXMKICAgICAgICAgICAgICAgIH0pKSwgdGhpcwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgZS5leHBvcnRzID0gdQogICAgfSwgewogICAgICAgICIuLi90ZW1wbGF0ZXMiOiAzLAogICAgICAgICIuLi90cmFjayI6IDUsCiAgICAgICAgYmFja2JvbmU6IDksCiAgICAgICAgbG9kYXNoOiAxNgogICAgfV0sCiAgICA5OiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICEgZnVuY3Rpb24ocikgewogICAgICAgICAgICAgICAgdmFyIGkgPSAib2JqZWN0IiA9PSB0eXBlb2Ygc2VsZiAmJiBzZWxmLnNlbGYgPT0gc2VsZiAmJiBzZWxmIHx8ICJvYmplY3QiID09IHR5cGVvZiBlICYmIGUuZ2xvYmFsID09IGUgJiYgZTsKICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCkgZGVmaW5lKFsidW5kZXJzY29yZSIsICJqcXVlcnkiLCAiZXhwb3J0cyJdLCBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgaS5CYWNrYm9uZSA9IHIoaSwgbiwgdCwgZSkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZWxzZSBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbywgYSA9IHQoInVuZGVyc2NvcmUiKTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBvID0gdCgianF1ZXJ5IikKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChzKSB7fQogICAgICAgICAgICAgICAgICAgIHIoaSwgbiwgYSwgbykKICAgICAgICAgICAgICAgIH0gZWxzZSBpLkJhY2tib25lID0gcihpLCB7fSwgaS5fLCBpLmpRdWVyeSB8fCBpLlplcHRvIHx8IGkuZW5kZXIgfHwgaS4kKQogICAgICAgICAgICB9KGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgIHZhciBpID0gdC5CYWNrYm9uZSwKICAgICAgICAgICAgICAgICAgICBvID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwogICAgICAgICAgICAgICAgZS5WRVJTSU9OID0gIjEuMi4zIiwgZS4kID0gciwgZS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuQmFja2JvbmUgPSBpLCB0aGlzCiAgICAgICAgICAgICAgICB9LCBlLmVtdWxhdGVIVFRQID0gITEsIGUuZW11bGF0ZUpTT04gPSAhMTsKICAgICAgICAgICAgICAgIHZhciBhID0gZnVuY3Rpb24odCwgZSwgcikgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuW2VdKHRoaXNbcl0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbltlXSh0aGlzW3JdLCB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5bZV0odGhpc1tyXSwgdSh0LCB0aGlzKSwgaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuW2VdKHRoaXNbcl0sIHUodCwgdGhpcyksIGksIG8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IG8uY2FsbChhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC51bnNoaWZ0KHRoaXNbcl0pLCBuW2VdLmFwcGx5KG4sIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzID0gZnVuY3Rpb24odCwgZSwgcikgewogICAgICAgICAgICAgICAgICAgICAgICBuLmVhY2goZSwgZnVuY3Rpb24oZSwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbltpXSAmJiAodC5wcm90b3R5cGVbaV0gPSBhKGUsIGksIHIpKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uaXNGdW5jdGlvbih0KSA/IHQgOiBuLmlzT2JqZWN0KHQpICYmICFlLl9pc01vZGVsKHQpID8gYyh0KSA6IG4uaXNTdHJpbmcodCkgPyBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5nZXQodCkKICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHQKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gbi5tYXRjaGVzKHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUodC5hdHRyaWJ1dGVzKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBsID0gZS5FdmVudHMgPSB7fSwKICAgICAgICAgICAgICAgICAgICBmID0gL1xzKy8sCiAgICAgICAgICAgICAgICAgICAgcCA9IGZ1bmN0aW9uKHQsIGUsIHIsIGksIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEsIHMgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAociAmJiAib2JqZWN0IiA9PSB0eXBlb2YgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBpICYmICJjb250ZXh0IiBpbiBvICYmIHZvaWQgMCA9PT0gby5jb250ZXh0ICYmIChvLmNvbnRleHQgPSBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYSA9IG4ua2V5cyhyKTsgcyA8IGEubGVuZ3RoOyBzKyspIGUgPSBwKHQsIGUsIGFbc10sIHJbYVtzXV0sIG8pCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAociAmJiBmLnRlc3QocikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGEgPSByLnNwbGl0KGYpOyBzIDwgYS5sZW5ndGg7IHMrKykgZSA9IHQoZSwgYVtzXSwgaSwgbyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgZSA9IHQoZSwgciwgaSwgbyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGwub24gPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgodGhpcywgdCwgZSwgbikKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgaCA9IGZ1bmN0aW9uKHQsIGUsIG4sIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodC5fZXZlbnRzID0gcChkLCB0Ll9ldmVudHMgfHwge30sIGUsIG4sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHg6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc6IGkKICAgICAgICAgICAgICAgICAgICAgICAgfSksIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0Ll9saXN0ZW5lcnMgfHwgKHQuX2xpc3RlbmVycyA9IHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgb1tpLmlkXSA9IGkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBsLmxpc3RlblRvID0gZnVuY3Rpb24odCwgZSwgcikgewogICAgICAgICAgICAgICAgICAgIGlmICghdCkgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0Ll9saXN0ZW5JZCB8fCAodC5fbGlzdGVuSWQgPSBuLnVuaXF1ZUlkKCJsIikpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gdGhpcy5fbGlzdGVuaW5nVG8gfHwgKHRoaXMuX2xpc3RlbmluZ1RvID0ge30pLAogICAgICAgICAgICAgICAgICAgICAgICBhID0gb1tpXTsKICAgICAgICAgICAgICAgICAgICBpZiAoIWEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB0aGlzLl9saXN0ZW5JZCB8fCAodGhpcy5fbGlzdGVuSWQgPSBuLnVuaXF1ZUlkKCJsIikpOwogICAgICAgICAgICAgICAgICAgICAgICBhID0gb1tpXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iajogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iaklkOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmdUbzogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgodCwgZSwgciwgdGhpcywgYSksIHRoaXMKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgZCA9IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAobikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRbZV0gfHwgKHRbZV0gPSBbXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gci5jb250ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHIuY3R4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHIubGlzdGVuaW5nOwogICAgICAgICAgICAgICAgICAgICAgICBzICYmIHMuY291bnQrKywgaS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eDogbyB8fCBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuaW5nOiBzCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbC5vZmYgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V2ZW50cyA/ICh0aGlzLl9ldmVudHMgPSBwKGcsIHRoaXMuX2V2ZW50cywgdCwgZSwgewogICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBuLAogICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnM6IHRoaXMuX2xpc3RlbmVycwogICAgICAgICAgICAgICAgICAgIH0pLCB0aGlzKSA6IHRoaXMKICAgICAgICAgICAgICAgIH0sIGwuc3RvcExpc3RlbmluZyA9IGZ1bmN0aW9uKHQsIGUsIHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuX2xpc3RlbmluZ1RvOwogICAgICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbyA9IHQgPyBbdC5fbGlzdGVuSWRdIDogbi5rZXlzKGkpLCBhID0gMDsgYSA8IG8ubGVuZ3RoOyBhKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBpW29bYV1dOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXMpIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBzLm9iai5vZmYoZSwgciwgdGhpcykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uaXNFbXB0eShpKSAmJiAodGhpcy5fbGlzdGVuaW5nVG8gPSB2b2lkIDApLCB0aGlzCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIGcgPSBmdW5jdGlvbih0LCBlLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8sIGEgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGkuY29udGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBpLmxpc3RlbmVyczsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgfHwgciB8fCBzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gZSA/IFtlXSA6IG4ua2V5cyh0KTsgYSA8IGMubGVuZ3RoOyBhKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gY1thXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IHRbZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsKSBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBmID0gW10sIHAgPSAwOyBwIDwgbC5sZW5ndGg7IHArKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IGxbcF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgJiYgciAhPT0gaC5jYWxsYmFjayAmJiByICE9PSBoLmNhbGxiYWNrLl9jYWxsYmFjayB8fCBzICYmIHMgIT09IGguY29udGV4dCA/IGYucHVzaChoKSA6IChvID0gaC5saXN0ZW5pbmcsIG8gJiYgMCA9PT0gLS1vLmNvdW50ICYmIChkZWxldGUgdVtvLmlkXSwgZGVsZXRlIG8ubGlzdGVuaW5nVG9bby5vYmpJZF0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLmxlbmd0aCA/IHRbZV0gPSBmIDogZGVsZXRlIHRbZV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnNpemUodCkgPyB0IDogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IG4ua2V5cyh1KTsgYSA8IGQubGVuZ3RoOyBhKyspIG8gPSB1W2RbYV1dLCBkZWxldGUgdVtvLmlkXSwgZGVsZXRlIG8ubGlzdGVuaW5nVG9bby5vYmpJZF0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbC5vbmNlID0gZnVuY3Rpb24odCwgZSwgcikgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gcCh2LCB7fSwgdCwgZSwgbi5iaW5kKHRoaXMub2ZmLCB0aGlzKSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub24oaSwgdm9pZCAwLCByKQogICAgICAgICAgICAgICAgfSwgbC5saXN0ZW5Ub09uY2UgPSBmdW5jdGlvbih0LCBlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBwKHYsIHt9LCBlLCByLCBuLmJpbmQodGhpcy5zdG9wTGlzdGVuaW5nLCB0aGlzLCB0KSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuVG8odCwgaSkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgdiA9IGZ1bmN0aW9uKHQsIGUsIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRbZV0gPSBuLm9uY2UoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKGUsIG8pLCByLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG8uX2NhbGxiYWNrID0gcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGwudHJpZ2dlciA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2V2ZW50cykgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IE1hdGgubWF4KDAsIGFyZ3VtZW50cy5sZW5ndGggLSAxKSwgbiA9IEFycmF5KGUpLCByID0gMDsgZSA+IHI7IHIrKykgbltyXSA9IGFyZ3VtZW50c1tyICsgMV07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHAoeSwgdGhpcy5fZXZlbnRzLCB0LCB2b2lkIDAsIG4pLCB0aGlzCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIHkgPSBmdW5jdGlvbih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRbZV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHQuYWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiBvICYmIChvID0gby5zbGljZSgpKSwgaSAmJiBtKGksIHIpLCBvICYmIG0obywgW2VdLmNvbmNhdChyKSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgbSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIgPSAtMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0Lmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGVbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gZVsyXTsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyArK3IgPCBpOykobiA9IHRbcl0pLmNhbGxiYWNrLmNhbGwobi5jdHgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgKytyIDwgaTspKG4gPSB0W3JdKS5jYWxsYmFjay5jYWxsKG4uY3R4LCBvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ICsrciA8IGk7KShuID0gdFtyXSkuY2FsbGJhY2suY2FsbChuLmN0eCwgbywgYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyArK3IgPCBpOykobiA9IHRbcl0pLmNhbGxiYWNrLmNhbGwobi5jdHgsIG8sIGEsIHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ICsrciA8IGk7KShuID0gdFtyXSkuY2FsbGJhY2suYXBwbHkobi5jdHgsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGwuYmluZCA9IGwub24sIGwudW5iaW5kID0gbC5vZmYsIG4uZXh0ZW5kKGUsIGwpOwogICAgICAgICAgICAgICAgdmFyIGIgPSBlLk1vZGVsID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciByID0gdCB8fCB7fTsKICAgICAgICAgICAgICAgICAgICBlIHx8IChlID0ge30pLCB0aGlzLmNpZCA9IG4udW5pcXVlSWQodGhpcy5jaWRQcmVmaXgpLCB0aGlzLmF0dHJpYnV0ZXMgPSB7fSwgZS5jb2xsZWN0aW9uICYmICh0aGlzLmNvbGxlY3Rpb24gPSBlLmNvbGxlY3Rpb24pLCBlLnBhcnNlICYmIChyID0gdGhpcy5wYXJzZShyLCBlKSB8fCB7fSksIHIgPSBuLmRlZmF1bHRzKHt9LCByLCBuLnJlc3VsdCh0aGlzLCAiZGVmYXVsdHMiKSksIHRoaXMuc2V0KHIsIGUpLCB0aGlzLmNoYW5nZWQgPSB7fSwgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBuLmV4dGVuZChiLnByb3RvdHlwZSwgbCwgewogICAgICAgICAgICAgICAgICAgIGNoYW5nZWQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGlkQXR0cmlidXRlOiAiaWQiLAogICAgICAgICAgICAgICAgICAgIGNpZFByZWZpeDogImMiLAogICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgICAgICAgICAgICAgdG9KU09OOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmNsb25lKHRoaXMuYXR0cmlidXRlcykKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHN5bmM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zeW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW3RdCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlc2NhcGU6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZXNjYXBlKHRoaXMuZ2V0KHQpKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgaGFzOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9IHRoaXMuZ2V0KHQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBtYXRjaGVzOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhIW4uaXRlcmF0ZWUodCwgdGhpcykodGhpcy5hdHRyaWJ1dGVzKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbih0LCBlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQpIHJldHVybiB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJvYmplY3QiID09IHR5cGVvZiB0ID8gKGkgPSB0LCByID0gZSkgOiAoaSA9IHt9KVt0XSA9IGUsIHIgfHwgKHIgPSB7fSksICF0aGlzLl92YWxpZGF0ZShpLCByKSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHIudW5zZXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gci5zaWxlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gdGhpcy5fY2hhbmdpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NoYW5naW5nID0gITAsIHUgfHwgKHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyA9IG4uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKSwgdGhpcy5jaGFuZ2VkID0ge30pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHRoaXMuYXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0aGlzLmNoYW5nZWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwIGluIGkpIGUgPSBpW3BdLCBuLmlzRXF1YWwoY1twXSwgZSkgfHwgcy5wdXNoKHApLCBuLmlzRXF1YWwoZltwXSwgZSkgPyBkZWxldGUgbFtwXSA6IGxbcF0gPSBlLCBvID8gZGVsZXRlIGNbcF0gOiBjW3BdID0gZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaWQgPSB0aGlzLmdldCh0aGlzLmlkQXR0cmlidXRlKSwgIWEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMubGVuZ3RoICYmICh0aGlzLl9wZW5kaW5nID0gcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBoID0gMDsgaCA8IHMubGVuZ3RoOyBoKyspIHRoaXMudHJpZ2dlcigiY2hhbmdlOiIgKyBzW2hdLCB0aGlzLCBjW3NbaF1dLCByKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1KSByZXR1cm4gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IHRoaXMuX3BlbmRpbmc7KSByID0gdGhpcy5fcGVuZGluZywgdGhpcy5fcGVuZGluZyA9ICExLCB0aGlzLnRyaWdnZXIoImNoYW5nZSIsIHRoaXMsIHIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcGVuZGluZyA9ICExLCB0aGlzLl9jaGFuZ2luZyA9ICExLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB1bnNldDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXQodCwgdm9pZCAwLCBuLmV4dGVuZCh7fSwgZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zZXQ6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgY2xlYXI6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciBpbiB0aGlzLmF0dHJpYnV0ZXMpIGVbcl0gPSB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldChlLCBuLmV4dGVuZCh7fSwgdCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zZXQ6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlZDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0ID8gIW4uaXNFbXB0eSh0aGlzLmNoYW5nZWQpIDogbi5oYXModGhpcy5jaGFuZ2VkLCB0KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZEF0dHJpYnV0ZXM6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0KSByZXR1cm4gdGhpcy5oYXNDaGFuZ2VkKCkgPyBuLmNsb25lKHRoaXMuY2hhbmdlZCkgOiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLl9jaGFuZ2luZyA/IHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyA6IHRoaXMuYXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmlzRXF1YWwoZVtpXSwgbykgfHwgKHJbaV0gPSBvKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnNpemUocikgPyByIDogITEKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHByZXZpb3VzOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9IHQgJiYgdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzID8gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzW3RdIDogbnVsbAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNBdHRyaWJ1dGVzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uY2xvbmUodGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZmV0Y2g6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IG4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlOiAhMAogICAgICAgICAgICAgICAgICAgICAgICB9LCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQuc3VjY2VzczsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuc3VjY2VzcyA9IGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdC5wYXJzZSA/IGUucGFyc2UobiwgdCkgOiBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc2V0KGksIHQpID8gKHIgJiYgci5jYWxsKHQuY29udGV4dCwgZSwgbiwgdCksIHZvaWQgZS50cmlnZ2VyKCJzeW5jIiwgZSwgbiwgdCkpIDogITEKICAgICAgICAgICAgICAgICAgICAgICAgfSwgRih0aGlzLCB0KSwgdGhpcy5zeW5jKCJyZWFkIiwgdGhpcywgdCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHNhdmU6IGZ1bmN0aW9uKHQsIGUsIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT0gdCB8fCAib2JqZWN0IiA9PSB0eXBlb2YgdCA/IChpID0gdCwgciA9IGUpIDogKGkgPSB7fSlbdF0gPSBlLCByID0gbi5leHRlbmQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGU6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2U6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHIpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHIud2FpdDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgJiYgIW8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZXQoaSwgcikpIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLl92YWxpZGF0ZShpLCByKSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gci5zdWNjZXNzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHRoaXMuYXR0cmlidXRlczsKICAgICAgICAgICAgICAgICAgICAgICAgci5zdWNjZXNzID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5hdHRyaWJ1dGVzID0gdTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gci5wYXJzZSA/IGEucGFyc2UodCwgcikgOiB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8gJiYgKGUgPSBuLmV4dGVuZCh7fSwgaSwgZSkpLCBlICYmICFhLnNldChlLCByKSA/ICExIDogKHMgJiYgcy5jYWxsKHIuY29udGV4dCwgYSwgdCwgciksIHZvaWQgYS50cmlnZ2VyKCJzeW5jIiwgYSwgdCwgcikpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIEYodGhpcywgciksIGkgJiYgbyAmJiAodGhpcy5hdHRyaWJ1dGVzID0gbi5leHRlbmQoe30sIHUsIGkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB0aGlzLmlzTmV3KCkgPyAiY3JlYXRlIiA6IHIucGF0Y2ggPyAicGF0Y2giIDogInVwZGF0ZSI7CiAgICAgICAgICAgICAgICAgICAgICAgICJwYXRjaCIgIT09IGMgfHwgci5hdHRycyB8fCAoci5hdHRycyA9IGkpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IHRoaXMuc3luYyhjLCB0aGlzLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlcyA9IHUsIGwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHQgPyBuLmNsb25lKHQpIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0LnN1Y2Nlc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdC53YWl0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcExpc3RlbmluZygpLCBlLnRyaWdnZXIoImRlc3Ryb3kiLCBlLCBlLmNvbGxlY3Rpb24sIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB0LnN1Y2Nlc3MgPSBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmIG8oKSwgciAmJiByLmNhbGwodC5jb250ZXh0LCBlLCBuLCB0KSwgZS5pc05ldygpIHx8IGUudHJpZ2dlcigic3luYyIsIGUsIG4sIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzTmV3KCkgPyBuLmRlZmVyKHQuc3VjY2VzcykgOiAoRih0aGlzLCB0KSwgYSA9IHRoaXMuc3luYygiZGVsZXRlIiwgdGhpcywgdCkpLCBpIHx8IG8oKSwgYQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdXJsOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBuLnJlc3VsdCh0aGlzLCAidXJsUm9vdCIpIHx8IG4ucmVzdWx0KHRoaXMuY29sbGVjdGlvbiwgInVybCIpIHx8IE0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNOZXcoKSkgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5nZXQodGhpcy5pZEF0dHJpYnV0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnJlcGxhY2UoL1teXC9dJC8sICIkJi8iKSArIGVuY29kZVVSSUNvbXBvbmVudChlKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNsb25lOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuYXR0cmlidXRlcykKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGlzTmV3OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLmhhcyh0aGlzLmlkQXR0cmlidXRlKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsaWRhdGUoe30sIG4uZGVmYXVsdHMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGU6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQpKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX3ZhbGlkYXRlOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZS52YWxpZGF0ZSB8fCAhdGhpcy52YWxpZGF0ZSkgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgICAgICAgICB0ID0gbi5leHRlbmQoe30sIHRoaXMuYXR0cmlidXRlcywgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdGhpcy52YWxpZGF0aW9uRXJyb3IgPSB0aGlzLnZhbGlkYXRlKHQsIGUpIHx8IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID8gKHRoaXMudHJpZ2dlcigiaW52YWxpZCIsIHRoaXMsIHIsIG4uZXh0ZW5kKGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcjogcgogICAgICAgICAgICAgICAgICAgICAgICB9KSksICExKSA6ICEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2YXIgeCA9IHsKICAgICAgICAgICAgICAgICAgICBrZXlzOiAxLAogICAgICAgICAgICAgICAgICAgIHZhbHVlczogMSwKICAgICAgICAgICAgICAgICAgICBwYWlyczogMSwKICAgICAgICAgICAgICAgICAgICBpbnZlcnQ6IDEsCiAgICAgICAgICAgICAgICAgICAgcGljazogMCwKICAgICAgICAgICAgICAgICAgICBvbWl0OiAwLAogICAgICAgICAgICAgICAgICAgIGNoYWluOiAxLAogICAgICAgICAgICAgICAgICAgIGlzRW1wdHk6IDEKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBzKGIsIHgsICJhdHRyaWJ1dGVzIik7CiAgICAgICAgICAgICAgICB2YXIgdyA9IGUuQ29sbGVjdGlvbiA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSB8fCAoZSA9IHt9KSwgZS5tb2RlbCAmJiAodGhpcy5tb2RlbCA9IGUubW9kZWwpLCB2b2lkIDAgIT09IGUuY29tcGFyYXRvciAmJiAodGhpcy5jb21wYXJhdG9yID0gZS5jb21wYXJhdG9yKSwgdGhpcy5fcmVzZXQoKSwgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHQgJiYgdGhpcy5yZXNldCh0LCBuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWxlbnQ6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUpKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgXyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgYWRkOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2U6ICEwCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBrID0gewogICAgICAgICAgICAgICAgICAgICAgICBhZGQ6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICByZW1vdmU6ICExCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBUID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBuID0gTWF0aC5taW4oTWF0aC5tYXgobiwgMCksIHQubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IEFycmF5KHQubGVuZ3RoIC0gbiksIGkgPSBlLmxlbmd0aCwgbyA9IDA7IG8gPCByLmxlbmd0aDsgbysrKSByW29dID0gdFtvICsgbl07CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobyA9IDA7IGkgPiBvOyBvKyspIHRbbyArIG5dID0gZVtvXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gMDsgbyA8IHIubGVuZ3RoOyBvKyspIHRbbyArIGkgKyBuXSA9IHJbb10KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbi5leHRlbmQody5wcm90b3R5cGUsIGwsIHsKICAgICAgICAgICAgICAgICAgICBtb2RlbDogYiwKICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHt9LAogICAgICAgICAgICAgICAgICAgIHRvSlNPTjogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUudG9KU09OKHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzeW5jOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc3luYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0KHQsIG4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlOiAhMQogICAgICAgICAgICAgICAgICAgICAgICB9LCBlLCBrKSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlID0gbi5leHRlbmQoe30sIGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9ICFuLmlzQXJyYXkodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSByID8gW3RdIDogbi5jbG9uZSh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLl9yZW1vdmVNb2RlbHModCwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhZS5zaWxlbnQgJiYgaSAmJiB0aGlzLnRyaWdnZXIoInVwZGF0ZSIsIHRoaXMsIGUpLCByID8gaVswXSA6IGkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gbi5kZWZhdWx0cyh7fSwgZSwgXyksIGUucGFyc2UgJiYgIXRoaXMuX2lzTW9kZWwodCkgJiYgKHQgPSB0aGlzLnBhcnNlKHQsIGUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gIW4uaXNBcnJheSh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSByID8gW3RdIDogdC5zbGljZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBlLmF0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBpICYmIChpID0gK2kpLCAwID4gaSAmJiAoaSArPSB0aGlzLmxlbmd0aCArIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbywgYSA9IFtdLCBzID0gW10sIHUgPSBbXSwgYyA9IHt9LCBsID0gZS5hZGQsIGYgPSBlLm1lcmdlLCBwID0gZS5yZW1vdmUsIGggPSAhMSwgZCA9IHRoaXMuY29tcGFyYXRvciAmJiBudWxsID09IGkgJiYgZS5zb3J0ICE9PSAhMSwgZyA9IG4uaXNTdHJpbmcodGhpcy5jb21wYXJhdG9yKSA/IHRoaXMuY29tcGFyYXRvciA6IG51bGwsIHYgPSAwOyB2IDwgdC5sZW5ndGg7IHYrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0W3ZdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0gdGhpcy5nZXQobyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYgJiYgbyAhPT0geSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSB0aGlzLl9pc01vZGVsKG8pID8gby5hdHRyaWJ1dGVzIDogbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucGFyc2UgJiYgKG0gPSB5LnBhcnNlKG0sIGUpKSwgeS5zZXQobSwgZSksIGQgJiYgIWggJiYgKGggPSB5Lmhhc0NoYW5nZWQoZykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY1t5LmNpZF0gfHwgKGNbeS5jaWRdID0gITAsIGEucHVzaCh5KSksIHRbdl0gPSB5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGwgJiYgKG8gPSB0W3ZdID0gdGhpcy5fcHJlcGFyZU1vZGVsKG8sIGUpLCBvICYmIChzLnB1c2gobyksIHRoaXMuX2FkZFJlZmVyZW5jZShvLCBlKSwgY1tvLmNpZF0gPSAhMCwgYS5wdXNoKG8pKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2ID0gMDsgdiA8IHRoaXMubGVuZ3RoOyB2KyspIG8gPSB0aGlzLm1vZGVsc1t2XSwgY1tvLmNpZF0gfHwgdS5wdXNoKG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUubGVuZ3RoICYmIHRoaXMuX3JlbW92ZU1vZGVscyh1LCBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gIWQgJiYgbCAmJiBwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEubGVuZ3RoICYmIHggPyAoYiA9IHRoaXMubGVuZ3RoICE9IGEubGVuZ3RoIHx8IG4uc29tZSh0aGlzLm1vZGVscywgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCAhPT0gYVtlXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB0aGlzLm1vZGVscy5sZW5ndGggPSAwLCBUKHRoaXMubW9kZWxzLCBhLCAwKSwgdGhpcy5sZW5ndGggPSB0aGlzLm1vZGVscy5sZW5ndGgpIDogcy5sZW5ndGggJiYgKGQgJiYgKGggPSAhMCksIFQodGhpcy5tb2RlbHMsIHMsIG51bGwgPT0gaSA/IHRoaXMubGVuZ3RoIDogaSksIHRoaXMubGVuZ3RoID0gdGhpcy5tb2RlbHMubGVuZ3RoKSwgaCAmJiB0aGlzLnNvcnQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWxlbnQ6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksICFlLnNpbGVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodiA9IDA7IHYgPCBzLmxlbmd0aDsgdisrKSBudWxsICE9IGkgJiYgKGUuaW5kZXggPSBpICsgdiksIG8gPSBzW3ZdLCBvLnRyaWdnZXIoImFkZCIsIG8sIHRoaXMsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChoIHx8IGIpICYmIHRoaXMudHJpZ2dlcigic29ydCIsIHRoaXMsIGUpLCAocy5sZW5ndGggfHwgdS5sZW5ndGgpICYmIHRoaXMudHJpZ2dlcigidXBkYXRlIiwgdGhpcywgZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID8gdFswXSA6IHQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGUgPyBuLmNsb25lKGUpIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgdGhpcy5tb2RlbHMubGVuZ3RoOyByKyspIHRoaXMuX3JlbW92ZVJlZmVyZW5jZSh0aGlzLm1vZGVsc1tyXSwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnByZXZpb3VzTW9kZWxzID0gdGhpcy5tb2RlbHMsIHRoaXMuX3Jlc2V0KCksIHQgPSB0aGlzLmFkZCh0LCBuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWxlbnQ6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUpKSwgZS5zaWxlbnQgfHwgdGhpcy50cmlnZ2VyKCJyZXNldCIsIHRoaXMsIGUpLCB0CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwdXNoOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZCh0LCBuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdDogdGhpcy5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZSkpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwb3A6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmF0KHRoaXMubGVuZ3RoIC0gMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbW92ZShlLCB0KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdW5zaGlmdDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGQodCwgbi5leHRlbmQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXQ6IDAKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZSkpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzaGlmdDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuYXQoMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbW92ZShlLCB0KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2xpY2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5hcHBseSh0aGlzLm1vZGVscywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQpIHJldHVybiB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5tb2RlbElkKHRoaXMuX2lzTW9kZWwodCkgPyB0LmF0dHJpYnV0ZXMgOiB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2J5SWRbdF0gfHwgdGhpcy5fYnlJZFtlXSB8fCB0aGlzLl9ieUlkW3QuY2lkXQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYXQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgPiB0ICYmICh0ICs9IHRoaXMubGVuZ3RoKSwgdGhpcy5tb2RlbHNbdF0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHdoZXJlOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW2UgPyAiZmluZCIgOiAiZmlsdGVyIl0odCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZpbmRXaGVyZTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53aGVyZSh0LCAhMCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHNvcnQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmNvbXBhcmF0b3I7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZSkgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3Qgc29ydCBhIHNldCB3aXRob3V0IGEgY29tcGFyYXRvciIpOwogICAgICAgICAgICAgICAgICAgICAgICB0IHx8ICh0ID0ge30pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5pc0Z1bmN0aW9uKGUpICYmIChlID0gbi5iaW5kKGUsIHRoaXMpKSwgMSA9PT0gciB8fCBuLmlzU3RyaW5nKGUpID8gdGhpcy5tb2RlbHMgPSB0aGlzLnNvcnRCeShlKSA6IHRoaXMubW9kZWxzLnNvcnQoZSksIHQuc2lsZW50IHx8IHRoaXMudHJpZ2dlcigic29ydCIsIHRoaXMsIHQpLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwbHVjazogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5pbnZva2UodGhpcy5tb2RlbHMsICJnZXQiLCB0KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZmV0Y2g6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IG4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlOiAhMAogICAgICAgICAgICAgICAgICAgICAgICB9LCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0LnN1Y2Nlc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuc3VjY2VzcyA9IGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdC5yZXNldCA/ICJyZXNldCIgOiAic2V0IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbaV0obiwgdCksIGUgJiYgZS5jYWxsKHQuY29udGV4dCwgciwgbiwgdCksIHIudHJpZ2dlcigic3luYyIsIHIsIG4sIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIEYodGhpcywgdCksIHRoaXMuc3luYygicmVhZCIsIHRoaXMsIHQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGUgPyBuLmNsb25lKGUpIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZS53YWl0OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA9IHRoaXMuX3ByZXBhcmVNb2RlbCh0LCBlKSwgIXQpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgciB8fCB0aGlzLmFkZCh0LCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUuc3VjY2VzczsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc3VjY2VzcyA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgJiYgaS5hZGQodCwgbiksIG8gJiYgby5jYWxsKG4uY29udGV4dCwgdCwgZSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdC5zYXZlKG51bGwsIGUpLCB0CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwYXJzZTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgY2xvbmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5tb2RlbHMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyYXRvcjogdGhpcy5jb21wYXJhdG9yCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBtb2RlbElkOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0W3RoaXMubW9kZWwucHJvdG90eXBlLmlkQXR0cmlidXRlIHx8ICJpZCJdCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfcmVzZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aCA9IDAsIHRoaXMubW9kZWxzID0gW10sIHRoaXMuX2J5SWQgPSB7fQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX3ByZXBhcmVNb2RlbDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNNb2RlbCh0KSkgcmV0dXJuIHQuY29sbGVjdGlvbiB8fCAodC5jb2xsZWN0aW9uID0gdGhpcyksIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlID8gbi5jbG9uZShlKSA6IHt9LCBlLmNvbGxlY3Rpb24gPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG5ldyB0aGlzLm1vZGVsKHQsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci52YWxpZGF0aW9uRXJyb3IgPyAodGhpcy50cmlnZ2VyKCJpbnZhbGlkIiwgdGhpcywgci52YWxpZGF0aW9uRXJyb3IsIGUpLCAhMSkgOiByCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfcmVtb3ZlTW9kZWxzOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSBbXSwgciA9IDA7IHIgPCB0Lmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuZ2V0KHRbcl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRoaXMuaW5kZXhPZihpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVscy5zcGxpY2UobywgMSksIHRoaXMubGVuZ3RoLS0sIGUuc2lsZW50IHx8IChlLmluZGV4ID0gbywgaS50cmlnZ2VyKCJyZW1vdmUiLCBpLCB0aGlzLCBlKSksIG4ucHVzaChpKSwgdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKGksIGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubGVuZ3RoID8gbiA6ICExCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfaXNNb2RlbDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9hZGRSZWZlcmVuY2U6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYnlJZFt0LmNpZF0gPSB0OwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMubW9kZWxJZCh0LmF0dHJpYnV0ZXMpOwogICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IG4gJiYgKHRoaXMuX2J5SWRbbl0gPSB0KSwgdC5vbigiYWxsIiwgdGhpcy5fb25Nb2RlbEV2ZW50LCB0aGlzKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX3JlbW92ZVJlZmVyZW5jZTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fYnlJZFt0LmNpZF07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5tb2RlbElkKHQuYXR0cmlidXRlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gbiAmJiBkZWxldGUgdGhpcy5fYnlJZFtuXSwgdGhpcyA9PT0gdC5jb2xsZWN0aW9uICYmIGRlbGV0ZSB0LmNvbGxlY3Rpb24sIHQub2ZmKCJhbGwiLCB0aGlzLl9vbk1vZGVsRXZlbnQsIHRoaXMpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfb25Nb2RlbEV2ZW50OiBmdW5jdGlvbih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiYWRkIiAhPT0gdCAmJiAicmVtb3ZlIiAhPT0gdCB8fCBuID09PSB0aGlzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoImRlc3Ryb3kiID09PSB0ICYmIHRoaXMucmVtb3ZlKGUsIHIpLCAiY2hhbmdlIiA9PT0gdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5tb2RlbElkKGUucHJldmlvdXNBdHRyaWJ1dGVzKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdGhpcy5tb2RlbElkKGUuYXR0cmlidXRlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAhPT0gbyAmJiAobnVsbCAhPSBpICYmIGRlbGV0ZSB0aGlzLl9ieUlkW2ldLCBudWxsICE9IG8gJiYgKHRoaXMuX2J5SWRbb10gPSBlKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHZhciBFID0gewogICAgICAgICAgICAgICAgICAgIGZvckVhY2g6IDMsCiAgICAgICAgICAgICAgICAgICAgZWFjaDogMywKICAgICAgICAgICAgICAgICAgICBtYXA6IDMsCiAgICAgICAgICAgICAgICAgICAgY29sbGVjdDogMywKICAgICAgICAgICAgICAgICAgICByZWR1Y2U6IDQsCiAgICAgICAgICAgICAgICAgICAgZm9sZGw6IDQsCiAgICAgICAgICAgICAgICAgICAgaW5qZWN0OiA0LAogICAgICAgICAgICAgICAgICAgIHJlZHVjZVJpZ2h0OiA0LAogICAgICAgICAgICAgICAgICAgIGZvbGRyOiA0LAogICAgICAgICAgICAgICAgICAgIGZpbmQ6IDMsCiAgICAgICAgICAgICAgICAgICAgZGV0ZWN0OiAzLAogICAgICAgICAgICAgICAgICAgIGZpbHRlcjogMywKICAgICAgICAgICAgICAgICAgICBzZWxlY3Q6IDMsCiAgICAgICAgICAgICAgICAgICAgcmVqZWN0OiAzLAogICAgICAgICAgICAgICAgICAgIGV2ZXJ5OiAzLAogICAgICAgICAgICAgICAgICAgIGFsbDogMywKICAgICAgICAgICAgICAgICAgICBzb21lOiAzLAogICAgICAgICAgICAgICAgICAgIGFueTogMywKICAgICAgICAgICAgICAgICAgICBpbmNsdWRlOiAzLAogICAgICAgICAgICAgICAgICAgIGluY2x1ZGVzOiAzLAogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zOiAzLAogICAgICAgICAgICAgICAgICAgIGludm9rZTogMCwKICAgICAgICAgICAgICAgICAgICBtYXg6IDMsCiAgICAgICAgICAgICAgICAgICAgbWluOiAzLAogICAgICAgICAgICAgICAgICAgIHRvQXJyYXk6IDEsCiAgICAgICAgICAgICAgICAgICAgc2l6ZTogMSwKICAgICAgICAgICAgICAgICAgICBmaXJzdDogMywKICAgICAgICAgICAgICAgICAgICBoZWFkOiAzLAogICAgICAgICAgICAgICAgICAgIHRha2U6IDMsCiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbDogMywKICAgICAgICAgICAgICAgICAgICByZXN0OiAzLAogICAgICAgICAgICAgICAgICAgIHRhaWw6IDMsCiAgICAgICAgICAgICAgICAgICAgZHJvcDogMywKICAgICAgICAgICAgICAgICAgICBsYXN0OiAzLAogICAgICAgICAgICAgICAgICAgIHdpdGhvdXQ6IDAsCiAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZTogMCwKICAgICAgICAgICAgICAgICAgICBpbmRleE9mOiAzLAogICAgICAgICAgICAgICAgICAgIHNodWZmbGU6IDEsCiAgICAgICAgICAgICAgICAgICAgbGFzdEluZGV4T2Y6IDMsCiAgICAgICAgICAgICAgICAgICAgaXNFbXB0eTogMSwKICAgICAgICAgICAgICAgICAgICBjaGFpbjogMSwKICAgICAgICAgICAgICAgICAgICBzYW1wbGU6IDMsCiAgICAgICAgICAgICAgICAgICAgcGFydGl0aW9uOiAzLAogICAgICAgICAgICAgICAgICAgIGdyb3VwQnk6IDMsCiAgICAgICAgICAgICAgICAgICAgY291bnRCeTogMywKICAgICAgICAgICAgICAgICAgICBzb3J0Qnk6IDMsCiAgICAgICAgICAgICAgICAgICAgaW5kZXhCeTogMwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHModywgRSwgIm1vZGVscyIpOwogICAgICAgICAgICAgICAgdmFyIGogPSBlLlZpZXcgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2lkID0gbi51bmlxdWVJZCgidmlldyIpLCBuLmV4dGVuZCh0aGlzLCBuLnBpY2sodCwgUykpLCB0aGlzLl9lbnN1cmVFbGVtZW50KCksIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBDID0gL14oXFMrKVxzKiguKikkLywKICAgICAgICAgICAgICAgICAgICBTID0gWyJtb2RlbCIsICJjb2xsZWN0aW9uIiwgImVsIiwgImlkIiwgImF0dHJpYnV0ZXMiLCAiY2xhc3NOYW1lIiwgInRhZ05hbWUiLCAiZXZlbnRzIl07CiAgICAgICAgICAgICAgICBuLmV4dGVuZChqLnByb3RvdHlwZSwgbCwgewogICAgICAgICAgICAgICAgICAgIHRhZ05hbWU6ICJkaXYiLAogICAgICAgICAgICAgICAgICAgICQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGVsLmZpbmQodCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZW1vdmVFbGVtZW50KCksIHRoaXMuc3RvcExpc3RlbmluZygpLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfcmVtb3ZlRWxlbWVudDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsLnJlbW92ZSgpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzZXRFbGVtZW50OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVuZGVsZWdhdGVFdmVudHMoKSwgdGhpcy5fc2V0RWxlbWVudCh0KSwgdGhpcy5kZWxlZ2F0ZUV2ZW50cygpLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfc2V0RWxlbWVudDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbCA9IHQgaW5zdGFuY2VvZiBlLiQgPyB0IDogZS4kKHQpLCB0aGlzLmVsID0gdGhpcy4kZWxbMF0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlbGVnYXRlRXZlbnRzOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0IHx8ICh0ID0gbi5yZXN1bHQodGhpcywgImV2ZW50cyIpKSwgIXQpIHJldHVybiB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZGVsZWdhdGVFdmVudHMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSBpbiB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRbZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5pc0Z1bmN0aW9uKHIpIHx8IChyID0gdGhpc1tyXSksIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGUubWF0Y2goQyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZShpWzFdLCBpWzJdLCBuLmJpbmQociwgdGhpcykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlbGVnYXRlOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRlbC5vbih0ICsgIi5kZWxlZ2F0ZUV2ZW50cyIgKyB0aGlzLmNpZCwgZSwgbiksIHRoaXMKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHVuZGVsZWdhdGVFdmVudHM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZWwgJiYgdGhpcy4kZWwub2ZmKCIuZGVsZWdhdGVFdmVudHMiICsgdGhpcy5jaWQpLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB1bmRlbGVnYXRlOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRlbC5vZmYodCArICIuZGVsZWdhdGVFdmVudHMiICsgdGhpcy5jaWQsIGUsIG4pLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfY3JlYXRlRWxlbWVudDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX2Vuc3VyZUVsZW1lbnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbCkgdGhpcy5zZXRFbGVtZW50KG4ucmVzdWx0KHRoaXMsICJlbCIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IG4uZXh0ZW5kKHt9LCBuLnJlc3VsdCh0aGlzLCAiYXR0cmlidXRlcyIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaWQgJiYgKHQuaWQgPSBuLnJlc3VsdCh0aGlzLCAiaWQiKSksIHRoaXMuY2xhc3NOYW1lICYmICh0WyJjbGFzcyJdID0gbi5yZXN1bHQodGhpcywgImNsYXNzTmFtZSIpKSwgdGhpcy5zZXRFbGVtZW50KHRoaXMuX2NyZWF0ZUVsZW1lbnQobi5yZXN1bHQodGhpcywgInRhZ05hbWUiKSkpLCB0aGlzLl9zZXRBdHRyaWJ1dGVzKHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9zZXRBdHRyaWJ1dGVzOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsLmF0dHIodCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwgZS5zeW5jID0gZnVuY3Rpb24odCwgciwgaSkgewogICAgICAgICAgICAgICAgICAgIHZhciBvID0gQVt0XTsKICAgICAgICAgICAgICAgICAgICBuLmRlZmF1bHRzKGkgfHwgKGkgPSB7fSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgZW11bGF0ZUhUVFA6IGUuZW11bGF0ZUhUVFAsCiAgICAgICAgICAgICAgICAgICAgICAgIGVtdWxhdGVKU09OOiBlLmVtdWxhdGVKU09OCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGlmIChpLnVybCB8fCAoYS51cmwgPSBuLnJlc3VsdChyLCAidXJsIikgfHwgTSgpKSwgbnVsbCAhPSBpLmRhdGEgfHwgIXIgfHwgImNyZWF0ZSIgIT09IHQgJiYgInVwZGF0ZSIgIT09IHQgJiYgInBhdGNoIiAhPT0gdCB8fCAoYS5jb250ZW50VHlwZSA9ICJhcHBsaWNhdGlvbi9qc29uIiwgYS5kYXRhID0gSlNPTi5zdHJpbmdpZnkoaS5hdHRycyB8fCByLnRvSlNPTihpKSkpLCBpLmVtdWxhdGVKU09OICYmIChhLmNvbnRlbnRUeXBlID0gImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsIGEuZGF0YSA9IGEuZGF0YSA/IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiBhLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHt9KSwgaS5lbXVsYXRlSFRUUCAmJiAoIlBVVCIgPT09IG8gfHwgIkRFTEVURSIgPT09IG8gfHwgIlBBVENIIiA9PT0gbykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYS50eXBlID0gIlBPU1QiLCBpLmVtdWxhdGVKU09OICYmIChhLmRhdGEuX21ldGhvZCA9IG8pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGkuYmVmb3JlU2VuZDsKICAgICAgICAgICAgICAgICAgICAgICAgaS5iZWZvcmVTZW5kID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuc2V0UmVxdWVzdEhlYWRlcigiWC1IVFRQLU1ldGhvZC1PdmVycmlkZSIsIG8pLCBzID8gcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgIkdFVCIgPT09IGEudHlwZSB8fCBpLmVtdWxhdGVKU09OIHx8IChhLnByb2Nlc3NEYXRhID0gITEpOwogICAgICAgICAgICAgICAgICAgIHZhciB1ID0gaS5lcnJvcjsKICAgICAgICAgICAgICAgICAgICBpLmVycm9yID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBpLnRleHRTdGF0dXMgPSBlLCBpLmVycm9yVGhyb3duID0gbiwgdSAmJiB1LmNhbGwoaS5jb250ZXh0LCB0LCBlLCBuKQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBpLnhociA9IGUuYWpheChuLmV4dGVuZChhLCBpKSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIudHJpZ2dlcigicmVxdWVzdCIsIHIsIGMsIGkpLCBjCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIEEgPSB7CiAgICAgICAgICAgICAgICAgICAgY3JlYXRlOiAiUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiAiUFVUIiwKICAgICAgICAgICAgICAgICAgICBwYXRjaDogIlBBVENIIiwKICAgICAgICAgICAgICAgICAgICAiZGVsZXRlIjogIkRFTEVURSIsCiAgICAgICAgICAgICAgICAgICAgcmVhZDogIkdFVCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBlLmFqYXggPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS4kLmFqYXguYXBwbHkoZS4kLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIE4gPSBlLlJvdXRlciA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdCB8fCAodCA9IHt9KSwgdC5yb3V0ZXMgJiYgKHRoaXMucm91dGVzID0gdC5yb3V0ZXMpLCB0aGlzLl9iaW5kUm91dGVzKCksIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBSID0gL1woKC4qPylcKS9nLAogICAgICAgICAgICAgICAgICAgIEkgPSAvKFwoXD8pPzpcdysvZywKICAgICAgICAgICAgICAgICAgICBPID0gL1wqXHcrL2csCiAgICAgICAgICAgICAgICAgICAgTCA9IC9bXC17fVxbXF0rPy4sXFxcXiR8I1xzXS9nOwogICAgICAgICAgICAgICAgbi5leHRlbmQoTi5wcm90b3R5cGUsIGwsIHsKICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHt9LAogICAgICAgICAgICAgICAgICAgIHJvdXRlOiBmdW5jdGlvbih0LCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4uaXNSZWdFeHAodCkgfHwgKHQgPSB0aGlzLl9yb3V0ZVRvUmVnRXhwKHQpKSwgbi5pc0Z1bmN0aW9uKHIpICYmIChpID0gciwgciA9ICIiKSwgaSB8fCAoaSA9IHRoaXNbcl0pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmhpc3Rvcnkucm91dGUodCwgZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBvLl9leHRyYWN0UGFyYW1ldGVycyh0LCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uZXhlY3V0ZShpLCBhLCByKSAhPT0gITEgJiYgKG8udHJpZ2dlci5hcHBseShvLCBbInJvdXRlOiIgKyByXS5jb25jYXQoYSkpLCBvLnRyaWdnZXIoInJvdXRlIiwgciwgYSksIGUuaGlzdG9yeS50cmlnZ2VyKCJyb3V0ZSIsIG8sIHIsIGEpKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgdGhpcwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZTogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB0ICYmIHQuYXBwbHkodGhpcywgZSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG5hdmlnYXRlOiBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmhpc3RvcnkubmF2aWdhdGUodCwgbiksIHRoaXMKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9iaW5kUm91dGVzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucm91dGVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvdXRlcyA9IG4ucmVzdWx0KHRoaXMsICJyb3V0ZXMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQsIGUgPSBuLmtleXModGhpcy5yb3V0ZXMpOyBudWxsICE9ICh0ID0gZS5wb3AoKSk7KSB0aGlzLnJvdXRlKHQsIHRoaXMucm91dGVzW3RdKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfcm91dGVUb1JlZ0V4cDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IHQucmVwbGFjZShMLCAiXFwkJiIpLnJlcGxhY2UoUiwgIig/OiQxKT8iKS5yZXBsYWNlKEksIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID8gdCA6ICIoW14vP10rKSIKICAgICAgICAgICAgICAgICAgICAgICAgfSkucmVwbGFjZShPLCAiKFteP10qPykiKSwgbmV3IFJlZ0V4cCgiXiIgKyB0ICsgIig/OlxcPyhbXFxzXFxTXSopKT8kIikKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9leHRyYWN0UGFyYW1ldGVyczogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQuZXhlYyhlKS5zbGljZSgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubWFwKHIsIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID09PSByLmxlbmd0aCAtIDEgPyB0IHx8IG51bGwgOiB0ID8gZGVjb2RlVVJJQ29tcG9uZW50KHQpIDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdmFyIEQgPSBlLkhpc3RvcnkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVycyA9IFtdLCB0aGlzLmNoZWNrVXJsID0gbi5iaW5kKHRoaXMuY2hlY2tVcmwsIHRoaXMpLCAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ICYmICh0aGlzLmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLCB0aGlzLmhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIFAgPSAvXlsjXC9dfFxzKyQvZywKICAgICAgICAgICAgICAgICAgICAkID0gL15cLyt8XC8rJC9nLAogICAgICAgICAgICAgICAgICAgIHEgPSAvIy4qJC87CiAgICAgICAgICAgICAgICBELnN0YXJ0ZWQgPSAhMSwgbi5leHRlbmQoRC5wcm90b3R5cGUsIGwsIHsKICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbDogNTAsCiAgICAgICAgICAgICAgICAgICAgYXRSb290OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1teXC9dJC8sICIkJi8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IHRoaXMucm9vdCAmJiAhdGhpcy5nZXRTZWFyY2goKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hSb290OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmRlY29kZUZyYWdtZW50KHRoaXMubG9jYXRpb24ucGF0aG5hbWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHQuc2xpY2UoMCwgdGhpcy5yb290Lmxlbmd0aCAtIDEpICsgIi8iOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9PT0gdGhpcy5yb290CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWNvZGVGcmFnbWVudDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJKHQucmVwbGFjZSgvJTI1L2csICIlMjUyNSIpKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZ2V0U2VhcmNoOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmxvY2F0aW9uLmhyZWYucmVwbGFjZSgvIy4qLywgIiIpLm1hdGNoKC9cPy4rLyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID8gdFswXSA6ICIiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBnZXRIYXNoOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gKHQgfHwgdGhpcykubG9jYXRpb24uaHJlZi5tYXRjaCgvIyguKikkLyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID8gZVsxXSA6ICIiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBnZXRQYXRoOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmRlY29kZUZyYWdtZW50KHRoaXMubG9jYXRpb24ucGF0aG5hbWUgKyB0aGlzLmdldFNlYXJjaCgpKS5zbGljZSh0aGlzLnJvb3QubGVuZ3RoIC0gMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiLyIgPT09IHQuY2hhckF0KDApID8gdC5zbGljZSgxKSA6IHQKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGdldEZyYWdtZW50OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgJiYgKHQgPSB0aGlzLl91c2VQdXNoU3RhdGUgfHwgIXRoaXMuX3dhbnRzSGFzaENoYW5nZSA/IHRoaXMuZ2V0UGF0aCgpIDogdGhpcy5nZXRIYXNoKCkpLCB0LnJlcGxhY2UoUCwgIiIpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzdGFydDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoRC5zdGFydGVkKSB0aHJvdyBuZXcgRXJyb3IoIkJhY2tib25lLmhpc3RvcnkgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChELnN0YXJ0ZWQgPSAhMCwgdGhpcy5vcHRpb25zID0gbi5leHRlbmQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3Q6ICIvIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5vcHRpb25zLCB0KSwgdGhpcy5yb290ID0gdGhpcy5vcHRpb25zLnJvb3QsIHRoaXMuX3dhbnRzSGFzaENoYW5nZSA9IHRoaXMub3B0aW9ucy5oYXNoQ2hhbmdlICE9PSAhMSwgdGhpcy5faGFzSGFzaENoYW5nZSA9ICJvbmhhc2hjaGFuZ2UiIGluIHdpbmRvdyAmJiAodm9pZCAwID09PSBkb2N1bWVudC5kb2N1bWVudE1vZGUgfHwgZG9jdW1lbnQuZG9jdW1lbnRNb2RlID4gNyksIHRoaXMuX3VzZUhhc2hDaGFuZ2UgPSB0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgdGhpcy5faGFzSGFzaENoYW5nZSwgdGhpcy5fd2FudHNQdXNoU3RhdGUgPSAhIXRoaXMub3B0aW9ucy5wdXNoU3RhdGUsIHRoaXMuX2hhc1B1c2hTdGF0ZSA9ICEoIXRoaXMuaGlzdG9yeSB8fCAhdGhpcy5oaXN0b3J5LnB1c2hTdGF0ZSksIHRoaXMuX3VzZVB1c2hTdGF0ZSA9IHRoaXMuX3dhbnRzUHVzaFN0YXRlICYmIHRoaXMuX2hhc1B1c2hTdGF0ZSwgdGhpcy5mcmFnbWVudCA9IHRoaXMuZ2V0RnJhZ21lbnQoKSwgdGhpcy5yb290ID0gKCIvIiArIHRoaXMucm9vdCArICIvIikucmVwbGFjZSgkLCAiLyIpLCB0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgdGhpcy5fd2FudHNQdXNoU3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5faGFzUHVzaFN0YXRlICYmICF0aGlzLmF0Um9vdCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnJvb3Quc2xpY2UoMCwgLTEpIHx8ICIvIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5yZXBsYWNlKGUgKyAiIyIgKyB0aGlzLmdldFBhdGgoKSksICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9oYXNQdXNoU3RhdGUgJiYgdGhpcy5hdFJvb3QoKSAmJiB0aGlzLm5hdmlnYXRlKHRoaXMuZ2V0SGFzaCgpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZTogITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9oYXNIYXNoQ2hhbmdlICYmIHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiAhdGhpcy5fdXNlUHVzaFN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpLCB0aGlzLmlmcmFtZS5zcmMgPSAiamF2YXNjcmlwdDowIiwgdGhpcy5pZnJhbWUuc3R5bGUuZGlzcGxheSA9ICJub25lIiwgdGhpcy5pZnJhbWUudGFiSW5kZXggPSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZG9jdW1lbnQuYm9keSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gci5pbnNlcnRCZWZvcmUodGhpcy5pZnJhbWUsIHIuZmlyc3RDaGlsZCkuY29udGVudFdpbmRvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuZG9jdW1lbnQub3BlbigpLCBpLmRvY3VtZW50LmNsb3NlKCksIGkubG9jYXRpb24uaGFzaCA9ICIjIiArIHRoaXMuZnJhZ21lbnQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyIHx8IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRhY2hFdmVudCgib24iICsgdCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZVB1c2hTdGF0ZSA/IG8oInBvcHN0YXRlIiwgdGhpcy5jaGVja1VybCwgITEpIDogdGhpcy5fdXNlSGFzaENoYW5nZSAmJiAhdGhpcy5pZnJhbWUgPyBvKCJoYXNoY2hhbmdlIiwgdGhpcy5jaGVja1VybCwgITEpIDogdGhpcy5fd2FudHNIYXNoQ2hhbmdlICYmICh0aGlzLl9jaGVja1VybEludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5jaGVja1VybCwgdGhpcy5pbnRlcnZhbCkpLCB0aGlzLm9wdGlvbnMuc2lsZW50ID8gdm9pZCAwIDogdGhpcy5sb2FkVXJsKCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyIHx8IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXRhY2hFdmVudCgib24iICsgdCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXNlUHVzaFN0YXRlID8gdCgicG9wc3RhdGUiLCB0aGlzLmNoZWNrVXJsLCAhMSkgOiB0aGlzLl91c2VIYXNoQ2hhbmdlICYmICF0aGlzLmlmcmFtZSAmJiB0KCJoYXNoY2hhbmdlIiwgdGhpcy5jaGVja1VybCwgITEpLCB0aGlzLmlmcmFtZSAmJiAoZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmlmcmFtZSksIHRoaXMuaWZyYW1lID0gbnVsbCksIHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwgJiYgY2xlYXJJbnRlcnZhbCh0aGlzLl9jaGVja1VybEludGVydmFsKSwgRC5zdGFydGVkID0gITEKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJvdXRlOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMudW5zaGlmdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBjaGVja1VybDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuZ2V0RnJhZ21lbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPT09IHRoaXMuZnJhZ21lbnQgJiYgdGhpcy5pZnJhbWUgJiYgKGUgPSB0aGlzLmdldEhhc2godGhpcy5pZnJhbWUuY29udGVudFdpbmRvdykpLCBlID09PSB0aGlzLmZyYWdtZW50ID8gITEgOiAodGhpcy5pZnJhbWUgJiYgdGhpcy5uYXZpZ2F0ZShlKSwgdm9pZCB0aGlzLmxvYWRVcmwoKSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGxvYWRVcmw6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2hSb290KCkgPyAodCA9IHRoaXMuZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KHQpLCBuLnNvbWUodGhpcy5oYW5kbGVycywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucm91dGUudGVzdCh0KSA/IChlLmNhbGxiYWNrKHQpLCAhMCkgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogITEKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG5hdmlnYXRlOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghRC5zdGFydGVkKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgJiYgZSAhPT0gITAgfHwgKGUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAhIWUKICAgICAgICAgICAgICAgICAgICAgICAgfSksIHQgPSB0aGlzLmdldEZyYWdtZW50KHQgfHwgIiIpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMucm9vdDsKICAgICAgICAgICAgICAgICAgICAgICAgKCIiID09PSB0IHx8ICI/IiA9PT0gdC5jaGFyQXQoMCkpICYmIChuID0gbi5zbGljZSgwLCAtMSkgfHwgIi8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBuICsgdDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPSB0aGlzLmRlY29kZUZyYWdtZW50KHQucmVwbGFjZShxLCAiIikpLCB0aGlzLmZyYWdtZW50ICE9PSB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFnbWVudCA9IHQsIHRoaXMuX3VzZVB1c2hTdGF0ZSkgdGhpcy5oaXN0b3J5W2UucmVwbGFjZSA/ICJyZXBsYWNlU3RhdGUiIDogInB1c2hTdGF0ZSJdKHt9LCBkb2N1bWVudC50aXRsZSwgcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3dhbnRzSGFzaENoYW5nZSkgcmV0dXJuIHRoaXMubG9jYXRpb24uYXNzaWduKHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl91cGRhdGVIYXNoKHRoaXMubG9jYXRpb24sIHQsIGUucmVwbGFjZSksIHRoaXMuaWZyYW1lICYmIHQgIT09IHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZS5jb250ZW50V2luZG93KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucmVwbGFjZSB8fCAoaS5kb2N1bWVudC5vcGVuKCksIGkuZG9jdW1lbnQuY2xvc2UoKSksIHRoaXMuX3VwZGF0ZUhhc2goaS5sb2NhdGlvbiwgdCwgZS5yZXBsYWNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnRyaWdnZXIgPyB0aGlzLmxvYWRVcmwodCkgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX3VwZGF0ZUhhc2g6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdC5ocmVmLnJlcGxhY2UoLyhqYXZhc2NyaXB0OnwjKS4qJC8sICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucmVwbGFjZShyICsgIiMiICsgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHQuaGFzaCA9ICIjIiArIGUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwgZS5oaXN0b3J5ID0gbmV3IEQ7CiAgICAgICAgICAgICAgICB2YXIgSCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciwgaSA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgciA9IHQgJiYgbi5oYXModCwgImNvbnN0cnVjdG9yIikgPyB0LmNvbnN0cnVjdG9yIDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICB9LCBuLmV4dGVuZChyLCBpLCBlKTsKICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yID0gcgogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8ucHJvdG90eXBlID0gaS5wcm90b3R5cGUsIHIucHJvdG90eXBlID0gbmV3IG8sIHQgJiYgbi5leHRlbmQoci5wcm90b3R5cGUsIHQpLCByLl9fc3VwZXJfXyA9IGkucHJvdG90eXBlLCByCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgYi5leHRlbmQgPSB3LmV4dGVuZCA9IE4uZXh0ZW5kID0gai5leHRlbmQgPSBELmV4dGVuZCA9IEg7CiAgICAgICAgICAgICAgICB2YXIgTSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgInVybCIgcHJvcGVydHkgb3IgZnVuY3Rpb24gbXVzdCBiZSBzcGVjaWZpZWQnKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgRiA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlLmVycm9yOwogICAgICAgICAgICAgICAgICAgICAgICBlLmVycm9yID0gZnVuY3Rpb24ocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiBuLmNhbGwoZS5jb250ZXh0LCB0LCByLCBlKSwgdC50cmlnZ2VyKCJlcnJvciIsIHQsIHIsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgfSkKICAgICAgICB9KS5jYWxsKHRoaXMsICJ1bmRlZmluZWQiICE9IHR5cGVvZiBnbG9iYWwgPyBnbG9iYWwgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygc2VsZiA/IHNlbGYgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDoge30pCiAgICB9LCB7CiAgICAgICAganF1ZXJ5OiAxNSwKICAgICAgICB1bmRlcnNjb3JlOiAxMAogICAgfV0sCiAgICAxMDogW2Z1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIHQodCkgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gZShlLCBuLCByLCBpLCBvLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICg7IG8gPj0gMCAmJiBhID4gbzsgbyArPSB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gaSA/IGlbb10gOiBvOwogICAgICAgICAgICAgICAgICAgICAgICByID0gbihyLCBlW3NdLCBzLCBlKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4sIHIsIGksIG8pIHsKICAgICAgICAgICAgICAgICAgICByID0gdyhyLCBvLCA0KTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9ICFTKG4pICYmIHgua2V5cyhuKSwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IChhIHx8IG4pLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHQgPiAwID8gMCA6IHMgLSAxOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoIDwgMyAmJiAoaSA9IG5bYSA/IGFbdV0gOiB1XSwgdSArPSB0KSwgZShuLCByLCBpLCBhLCB1LCBzKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiByKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgbiA9IF8obiwgcik7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IEMoZSksIG8gPSB0ID4gMCA/IDAgOiBpIC0gMTsgbyA+PSAwICYmIGkgPiBvOyBvICs9IHQpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuKGVbb10sIG8sIGUpKSByZXR1cm4gbzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24ociwgaSwgbykgewogICAgICAgICAgICAgICAgICAgIHZhciBhID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IEMocik7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJudW1iZXIiID09IHR5cGVvZiBvKSB0ID4gMCA/IGEgPSBvID49IDAgPyBvIDogTWF0aC5tYXgobyArIHMsIGEpIDogcyA9IG8gPj0gMCA/IE1hdGgubWluKG8gKyAxLCBzKSA6IG8gKyBzICsgMTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChuICYmIG8gJiYgcykgcmV0dXJuIG8gPSBuKHIsIGkpLCByW29dID09PSBpID8gbyA6IC0xOwogICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpKSByZXR1cm4gbyA9IGUocC5jYWxsKHIsIGEsIHMpLCB4LmlzTmFOKSwgbyA+PSAwID8gbyArIGEgOiAtMTsKICAgICAgICAgICAgICAgICAgICBmb3IgKG8gPSB0ID4gMCA/IGEgOiBzIC0gMTsgbyA+PSAwICYmIHMgPiBvOyBvICs9IHQpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyW29dID09PSBpKSByZXR1cm4gbzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gbyh0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IE8ubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgIHIgPSB0LmNvbnN0cnVjdG9yLAogICAgICAgICAgICAgICAgICAgIGkgPSB4LmlzRnVuY3Rpb24ocikgJiYgci5wcm90b3R5cGUgfHwgYywKICAgICAgICAgICAgICAgICAgICBvID0gImNvbnN0cnVjdG9yIjsKICAgICAgICAgICAgICAgIGZvciAoeC5oYXModCwgbykgJiYgIXguY29udGFpbnMoZSwgbykgJiYgZS5wdXNoKG8pOyBuLS07KSBvID0gT1tuXSwgbyBpbiB0ICYmIHRbb10gIT09IGlbb10gJiYgIXguY29udGFpbnMoZSwgbykgJiYgZS5wdXNoKG8pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGEgPSB0aGlzLAogICAgICAgICAgICAgICAgcyA9IGEuXywKICAgICAgICAgICAgICAgIHUgPSBBcnJheS5wcm90b3R5cGUsCiAgICAgICAgICAgICAgICBjID0gT2JqZWN0LnByb3RvdHlwZSwKICAgICAgICAgICAgICAgIGwgPSBGdW5jdGlvbi5wcm90b3R5cGUsCiAgICAgICAgICAgICAgICBmID0gdS5wdXNoLAogICAgICAgICAgICAgICAgcCA9IHUuc2xpY2UsCiAgICAgICAgICAgICAgICBoID0gYy50b1N0cmluZywKICAgICAgICAgICAgICAgIGQgPSBjLmhhc093blByb3BlcnR5LAogICAgICAgICAgICAgICAgZyA9IEFycmF5LmlzQXJyYXksCiAgICAgICAgICAgICAgICB2ID0gT2JqZWN0LmtleXMsCiAgICAgICAgICAgICAgICB5ID0gbC5iaW5kLAogICAgICAgICAgICAgICAgbSA9IE9iamVjdC5jcmVhdGUsCiAgICAgICAgICAgICAgICBiID0gZnVuY3Rpb24oKSB7fSwKICAgICAgICAgICAgICAgIHggPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiB4ID8gdCA6IHRoaXMgaW5zdGFuY2VvZiB4ID8gdm9pZCh0aGlzLl93cmFwcGVkID0gdCkgOiBuZXcgeCh0KQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIG4gPyAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIGUgJiYgZS5leHBvcnRzICYmIChuID0gZS5leHBvcnRzID0geCksIG4uXyA9IHgpIDogYS5fID0geCwgeC5WRVJTSU9OID0gIjEuOC4zIjsKICAgICAgICAgICAgdmFyIHcgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChudWxsID09IG4gPyAzIDogbikgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNhbGwoZSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuY2FsbChlLCBuLCByKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4sIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5jYWxsKGUsIG4sIHIsIGkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obiwgciwgaSwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNhbGwoZSwgbiwgciwgaSwgbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseShlLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF8gPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCA/IHguaWRlbnRpdHkgOiB4LmlzRnVuY3Rpb24odCkgPyB3KHQsIGUsIG4pIDogeC5pc09iamVjdCh0KSA/IHgubWF0Y2hlcih0KSA6IHgucHJvcGVydHkodCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIHguaXRlcmF0ZWUgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gXyh0LCBlLCAxIC8gMCkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIGsgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBhcmd1bWVudHMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMiA+IHIgfHwgbnVsbCA9PSBuKSByZXR1cm4gbjsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IHIgPiBpOyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBvID0gYXJndW1lbnRzW2ldLCBhID0gdChvKSwgcyA9IGEubGVuZ3RoLCB1ID0gMDsgcyA+IHU7IHUrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gYVt1XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlICYmIHZvaWQgMCAhPT0gbltjXSB8fCAobltjXSA9IG9bY10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF4LmlzT2JqZWN0KHQpKSByZXR1cm4ge307CiAgICAgICAgICAgICAgICAgICAgaWYgKG0pIHJldHVybiBtKHQpOwogICAgICAgICAgICAgICAgICAgIGIucHJvdG90eXBlID0gdDsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBiOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBiLnByb3RvdHlwZSA9IG51bGwsIGUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBFID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IGUgPyB2b2lkIDAgOiBlW3RdCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGogPSBNYXRoLnBvdygyLCA1MykgLSAxLAogICAgICAgICAgICAgICAgQyA9IEUoImxlbmd0aCIpLAogICAgICAgICAgICAgICAgUyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IEModCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJudW1iZXIiID09IHR5cGVvZiBlICYmIGUgPj0gMCAmJiBqID49IGUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIHguZWFjaCA9IHguZm9yRWFjaCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIGUgPSB3KGUsIG4pOwogICAgICAgICAgICAgICAgdmFyIHIsIGk7CiAgICAgICAgICAgICAgICBpZiAoUyh0KSkKICAgICAgICAgICAgICAgICAgICBmb3IgKHIgPSAwLCBpID0gdC5sZW5ndGg7IGkgPiByOyByKyspIGUodFtyXSwgciwgdCk7CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHgua2V5cyh0KTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHIgPSAwLCBpID0gby5sZW5ndGg7IGkgPiByOyByKyspIGUodFtvW3JdXSwgb1tyXSwgdCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgIH0sIHgubWFwID0geC5jb2xsZWN0ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgZSA9IF8oZSwgbik7CiAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gIVModCkgJiYgeC5rZXlzKHQpLCBpID0gKHIgfHwgdCkubGVuZ3RoLCBvID0gQXJyYXkoaSksIGEgPSAwOyBpID4gYTsgYSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSByID8gclthXSA6IGE7CiAgICAgICAgICAgICAgICAgICAgb1thXSA9IGUodFtzXSwgcywgdCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgIH0sIHgucmVkdWNlID0geC5mb2xkbCA9IHguaW5qZWN0ID0gdCgxKSwgeC5yZWR1Y2VSaWdodCA9IHguZm9sZHIgPSB0KC0xKSwgeC5maW5kID0geC5kZXRlY3QgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgICAgIHJldHVybiByID0gUyh0KSA/IHguZmluZEluZGV4KHQsIGUsIG4pIDogeC5maW5kS2V5KHQsIGUsIG4pLCB2b2lkIDAgIT09IHIgJiYgLTEgIT09IHIgPyB0W3JdIDogdm9pZCAwCiAgICAgICAgICAgIH0sIHguZmlsdGVyID0geC5zZWxlY3QgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IFtdOwogICAgICAgICAgICAgICAgcmV0dXJuIGUgPSBfKGUsIG4pLCB4LmVhY2godCwgZnVuY3Rpb24odCwgbiwgaSkgewogICAgICAgICAgICAgICAgICAgIGUodCwgbiwgaSkgJiYgci5wdXNoKHQpCiAgICAgICAgICAgICAgICB9KSwgcgogICAgICAgICAgICB9LCB4LnJlamVjdCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiB4LmZpbHRlcih0LCB4Lm5lZ2F0ZShfKGUpKSwgbikKICAgICAgICAgICAgfSwgeC5ldmVyeSA9IHguYWxsID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgZSA9IF8oZSwgbik7CiAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gIVModCkgJiYgeC5rZXlzKHQpLCBpID0gKHIgfHwgdCkubGVuZ3RoLCBvID0gMDsgaSA+IG87IG8rKykgewogICAgICAgICAgICAgICAgICAgIHZhciBhID0gciA/IHJbb10gOiBvOwogICAgICAgICAgICAgICAgICAgIGlmICghZSh0W2FdLCBhLCB0KSkgcmV0dXJuICExCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gITAKICAgICAgICAgICAgfSwgeC5zb21lID0geC5hbnkgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICBlID0gXyhlLCBuKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAhUyh0KSAmJiB4LmtleXModCksIGkgPSAociB8fCB0KS5sZW5ndGgsIG8gPSAwOyBpID4gbzsgbysrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSByID8gcltvXSA6IG87CiAgICAgICAgICAgICAgICAgICAgaWYgKGUodFthXSwgYSwgdCkpIHJldHVybiAhMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgIH0sIHguY29udGFpbnMgPSB4LmluY2x1ZGVzID0geC5pbmNsdWRlID0gZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgcmV0dXJuIFModCkgfHwgKHQgPSB4LnZhbHVlcyh0KSksICgibnVtYmVyIiAhPSB0eXBlb2YgbiB8fCByKSAmJiAobiA9IDApLCB4LmluZGV4T2YodCwgZSwgbikgPj0gMAogICAgICAgICAgICB9LCB4Lmludm9rZSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gcC5jYWxsKGFyZ3VtZW50cywgMiksCiAgICAgICAgICAgICAgICAgICAgciA9IHguaXNGdW5jdGlvbihlKTsKICAgICAgICAgICAgICAgIHJldHVybiB4Lm1hcCh0LCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSByID8gZSA6IHRbZV07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gaSA/IGkgOiBpLmFwcGx5KHQsIG4pCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LCB4LnBsdWNrID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHgubWFwKHQsIHgucHJvcGVydHkoZSkpCiAgICAgICAgICAgIH0sIHgud2hlcmUgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4geC5maWx0ZXIodCwgeC5tYXRjaGVyKGUpKQogICAgICAgICAgICB9LCB4LmZpbmRXaGVyZSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB4LmZpbmQodCwgeC5tYXRjaGVyKGUpKQogICAgICAgICAgICB9LCB4Lm1heCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByLCBpLCBvID0gLSgxIC8gMCksCiAgICAgICAgICAgICAgICAgICAgYSA9IC0oMSAvIDApOwogICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZSAmJiBudWxsICE9IHQpIHsKICAgICAgICAgICAgICAgICAgICB0ID0gUyh0KSA/IHQgOiB4LnZhbHVlcyh0KTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzID0gMCwgdSA9IHQubGVuZ3RoOyB1ID4gczsgcysrKSByID0gdFtzXSwgciA+IG8gJiYgKG8gPSByKQogICAgICAgICAgICAgICAgfSBlbHNlIGUgPSBfKGUsIG4pLCB4LmVhY2godCwgZnVuY3Rpb24odCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIGkgPSBlKHQsIG4sIHIpLCAoaSA+IGEgfHwgaSA9PT0gLSgxIC8gMCkgJiYgbyA9PT0gLSgxIC8gMCkpICYmIChvID0gdCwgYSA9IGkpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgIH0sIHgubWluID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHIsIGksIG8gPSAxIC8gMCwKICAgICAgICAgICAgICAgICAgICBhID0gMSAvIDA7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBlICYmIG51bGwgIT0gdCkgewogICAgICAgICAgICAgICAgICAgIHQgPSBTKHQpID8gdCA6IHgudmFsdWVzKHQpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwLCB1ID0gdC5sZW5ndGg7IHUgPiBzOyBzKyspIHIgPSB0W3NdLCBvID4gciAmJiAobyA9IHIpCiAgICAgICAgICAgICAgICB9IGVsc2UgZSA9IF8oZSwgbiksIHguZWFjaCh0LCBmdW5jdGlvbih0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgaSA9IGUodCwgbiwgciksIChhID4gaSB8fCBpID09PSAxIC8gMCAmJiBvID09PSAxIC8gMCkgJiYgKG8gPSB0LCBhID0gaSkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgfSwgeC5zaHVmZmxlID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgZSwgbiA9IFModCkgPyB0IDogeC52YWx1ZXModCksIHIgPSBuLmxlbmd0aCwgaSA9IEFycmF5KHIpLCBvID0gMDsgciA+IG87IG8rKykgZSA9IHgucmFuZG9tKDAsIG8pLCBlICE9PSBvICYmIChpW29dID0gaVtlXSksIGlbZV0gPSBuW29dOwogICAgICAgICAgICAgICAgcmV0dXJuIGkKICAgICAgICAgICAgfSwgeC5zYW1wbGUgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBlIHx8IG4gPyAoUyh0KSB8fCAodCA9IHgudmFsdWVzKHQpKSwgdFt4LnJhbmRvbSh0Lmxlbmd0aCAtIDEpXSkgOiB4LnNodWZmbGUodCkuc2xpY2UoMCwgTWF0aC5tYXgoMCwgZSkpCiAgICAgICAgICAgIH0sIHguc29ydEJ5ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgcmV0dXJuIGUgPSBfKGUsIG4pLCB4LnBsdWNrKHgubWFwKHQsIGZ1bmN0aW9uKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgIGNyaXRlcmlhOiBlKHQsIG4sIHIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LmNyaXRlcmlhLAogICAgICAgICAgICAgICAgICAgICAgICByID0gZS5jcml0ZXJpYTsKICAgICAgICAgICAgICAgICAgICBpZiAobiAhPT0gcikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA+IHIgfHwgdm9pZCAwID09PSBuKSByZXR1cm4gMTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgPiBuIHx8IHZvaWQgMCA9PT0gcikgcmV0dXJuIC0xCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmluZGV4IC0gZS5pbmRleAogICAgICAgICAgICAgICAgfSksICJ2YWx1ZSIpCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBBID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHt9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuID0gXyhuLCByKSwgeC5lYWNoKGUsIGZ1bmN0aW9uKHIsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBuKHIsIG8sIGUpOwogICAgICAgICAgICAgICAgICAgICAgICB0KGksIHIsIGEpCiAgICAgICAgICAgICAgICAgICAgfSksIGkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgeC5ncm91cEJ5ID0gQShmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB4Lmhhcyh0LCBuKSA/IHRbbl0ucHVzaChlKSA6IHRbbl0gPSBbZV0KICAgICAgICAgICAgfSksIHguaW5kZXhCeSA9IEEoZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgdFtuXSA9IGUKICAgICAgICAgICAgfSksIHguY291bnRCeSA9IEEoZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgeC5oYXModCwgbikgPyB0W25dKysgOiB0W25dID0gMQogICAgICAgICAgICB9KSwgeC50b0FycmF5ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQgPyB4LmlzQXJyYXkodCkgPyBwLmNhbGwodCkgOiBTKHQpID8geC5tYXAodCwgeC5pZGVudGl0eSkgOiB4LnZhbHVlcyh0KSA6IFtdCiAgICAgICAgICAgIH0sIHguc2l6ZSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyAwIDogUyh0KSA/IHQubGVuZ3RoIDogeC5rZXlzKHQpLmxlbmd0aAogICAgICAgICAgICB9LCB4LnBhcnRpdGlvbiA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIGUgPSBfKGUsIG4pOwogICAgICAgICAgICAgICAgdmFyIHIgPSBbXSwKICAgICAgICAgICAgICAgICAgICBpID0gW107CiAgICAgICAgICAgICAgICByZXR1cm4geC5lYWNoKHQsIGZ1bmN0aW9uKHQsIG4sIG8pIHsKICAgICAgICAgICAgICAgICAgICAoZSh0LCBuLCBvKSA/IHIgOiBpKS5wdXNoKHQpCiAgICAgICAgICAgICAgICB9KSwgW3IsIGldCiAgICAgICAgICAgIH0sIHguZmlyc3QgPSB4LmhlYWQgPSB4LnRha2UgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0ID8gdm9pZCAwIDogbnVsbCA9PSBlIHx8IG4gPyB0WzBdIDogeC5pbml0aWFsKHQsIHQubGVuZ3RoIC0gZSkKICAgICAgICAgICAgfSwgeC5pbml0aWFsID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgcmV0dXJuIHAuY2FsbCh0LCAwLCBNYXRoLm1heCgwLCB0Lmxlbmd0aCAtIChudWxsID09IGUgfHwgbiA/IDEgOiBlKSkpCiAgICAgICAgICAgIH0sIHgubGFzdCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyB2b2lkIDAgOiBudWxsID09IGUgfHwgbiA/IHRbdC5sZW5ndGggLSAxXSA6IHgucmVzdCh0LCBNYXRoLm1heCgwLCB0Lmxlbmd0aCAtIGUpKQogICAgICAgICAgICB9LCB4LnJlc3QgPSB4LnRhaWwgPSB4LmRyb3AgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcC5jYWxsKHQsIG51bGwgPT0gZSB8fCBuID8gMSA6IGUpCiAgICAgICAgICAgIH0sIHguY29tcGFjdCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB4LmZpbHRlcih0LCB4LmlkZW50aXR5KQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgTiA9IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBbXSwgbyA9IDAsIGEgPSByIHx8IDAsIHMgPSBDKHQpOyBzID4gYTsgYSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSB0W2FdOwogICAgICAgICAgICAgICAgICAgIGlmIChTKHUpICYmICh4LmlzQXJyYXkodSkgfHwgeC5pc0FyZ3VtZW50cyh1KSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSB8fCAodSA9IE4odSwgZSwgbikpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gdS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaS5sZW5ndGggKz0gbDsgbCA+IGM7KSBpW28rK10gPSB1W2MrK10KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbiB8fCAoaVtvKytdID0gdSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBpCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHguZmxhdHRlbiA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBOKHQsIGUsICExKQogICAgICAgICAgICB9LCB4LndpdGhvdXQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4geC5kaWZmZXJlbmNlKHQsIHAuY2FsbChhcmd1bWVudHMsIDEpKQogICAgICAgICAgICB9LCB4LnVuaXEgPSB4LnVuaXF1ZSA9IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgIHguaXNCb29sZWFuKGUpIHx8IChyID0gbiwgbiA9IGUsIGUgPSAhMSksIG51bGwgIT0gbiAmJiAobiA9IF8obiwgcikpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IFtdLCBvID0gW10sIGEgPSAwLCBzID0gQyh0KTsgcyA+IGE7IGErKykgewogICAgICAgICAgICAgICAgICAgIHZhciB1ID0gdFthXSwKICAgICAgICAgICAgICAgICAgICAgICAgYyA9IG4gPyBuKHUsIGEsIHQpIDogdTsKICAgICAgICAgICAgICAgICAgICBlID8gKGEgJiYgbyA9PT0gYyB8fCBpLnB1c2godSksIG8gPSBjKSA6IG4gPyB4LmNvbnRhaW5zKG8sIGMpIHx8IChvLnB1c2goYyksIGkucHVzaCh1KSkgOiB4LmNvbnRhaW5zKGksIHUpIHx8IGkucHVzaCh1KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGkKICAgICAgICAgICAgfSwgeC51bmlvbiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHgudW5pcShOKGFyZ3VtZW50cywgITAsICEwKSkKICAgICAgICAgICAgfSwgeC5pbnRlcnNlY3Rpb24gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gW10sIG4gPSBhcmd1bWVudHMubGVuZ3RoLCByID0gMCwgaSA9IEModCk7IGkgPiByOyByKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRbcl07CiAgICAgICAgICAgICAgICAgICAgaWYgKCF4LmNvbnRhaW5zKGUsIG8pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSAxOyBuID4gYSAmJiB4LmNvbnRhaW5zKGFyZ3VtZW50c1thXSwgbyk7IGErKyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGEgPT09IG4gJiYgZS5wdXNoKG8pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgfSwgeC5kaWZmZXJlbmNlID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSBOKGFyZ3VtZW50cywgITAsICEwLCAxKTsKICAgICAgICAgICAgICAgIHJldHVybiB4LmZpbHRlcih0LCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF4LmNvbnRhaW5zKGUsIHQpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LCB4LnppcCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHgudW56aXAoYXJndW1lbnRzKQogICAgICAgICAgICB9LCB4LnVuemlwID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IHQgJiYgeC5tYXgodCwgQykubGVuZ3RoIHx8IDAsIG4gPSBBcnJheShlKSwgciA9IDA7IGUgPiByOyByKyspIG5bcl0gPSB4LnBsdWNrKHQsIHIpOwogICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgfSwgeC5vYmplY3QgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0ge30sIHIgPSAwLCBpID0gQyh0KTsgaSA+IHI7IHIrKykgZSA/IG5bdFtyXV0gPSBlW3JdIDogblt0W3JdWzBdXSA9IHRbcl1bMV07CiAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICB9LCB4LmZpbmRJbmRleCA9IHIoMSksIHguZmluZExhc3RJbmRleCA9IHIoLTEpLCB4LnNvcnRlZEluZGV4ID0gZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgbiA9IF8obiwgciwgMSk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gbihlKSwgbyA9IDAsIGEgPSBDKHQpOyBhID4gbzspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IE1hdGguZmxvb3IoKG8gKyBhKSAvIDIpOwogICAgICAgICAgICAgICAgICAgIG4odFtzXSkgPCBpID8gbyA9IHMgKyAxIDogYSA9IHMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgIH0sIHguaW5kZXhPZiA9IGkoMSwgeC5maW5kSW5kZXgsIHguc29ydGVkSW5kZXgpLCB4Lmxhc3RJbmRleE9mID0gaSgtMSwgeC5maW5kTGFzdEluZGV4KSwgeC5yYW5nZSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIG51bGwgPT0gZSAmJiAoZSA9IHQgfHwgMCwgdCA9IDApLCBuID0gbiB8fCAxOwogICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IE1hdGgubWF4KE1hdGguY2VpbCgoZSAtIHQpIC8gbiksIDApLCBpID0gQXJyYXkociksIG8gPSAwOyByID4gbzsgbysrLCB0ICs9IG4pIGlbb10gPSB0OwogICAgICAgICAgICAgICAgcmV0dXJuIGkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIFIgPSBmdW5jdGlvbih0LCBlLCBuLCByLCBpKSB7CiAgICAgICAgICAgICAgICBpZiAoIShyIGluc3RhbmNlb2YgZSkpIHJldHVybiB0LmFwcGx5KG4sIGkpOwogICAgICAgICAgICAgICAgdmFyIG8gPSBUKHQucHJvdG90eXBlKSwKICAgICAgICAgICAgICAgICAgICBhID0gdC5hcHBseShvLCBpKTsKICAgICAgICAgICAgICAgIHJldHVybiB4LmlzT2JqZWN0KGEpID8gYSA6IG8KICAgICAgICAgICAgfTsKICAgICAgICAgICAgeC5iaW5kID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgaWYgKHkgJiYgdC5iaW5kID09PSB5KSByZXR1cm4geS5hcHBseSh0LCBwLmNhbGwoYXJndW1lbnRzLCAxKSk7CiAgICAgICAgICAgICAgICBpZiAoIXguaXNGdW5jdGlvbih0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcigiQmluZCBtdXN0IGJlIGNhbGxlZCBvbiBhIGZ1bmN0aW9uIik7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHAuY2FsbChhcmd1bWVudHMsIDIpLAogICAgICAgICAgICAgICAgICAgIHIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFIodCwgciwgZSwgdGhpcywgbi5jb25jYXQocC5jYWxsKGFyZ3VtZW50cykpKQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICB9LCB4LnBhcnRpYWwgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IHAuY2FsbChhcmd1bWVudHMsIDEpLAogICAgICAgICAgICAgICAgICAgIG4gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDAsIGkgPSBlLmxlbmd0aCwgbyA9IEFycmF5KGkpLCBhID0gMDsgaSA+IGE7IGErKykgb1thXSA9IGVbYV0gPT09IHggPyBhcmd1bWVudHNbcisrXSA6IGVbYV07CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyByIDwgYXJndW1lbnRzLmxlbmd0aDspIG8ucHVzaChhcmd1bWVudHNbcisrXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSKHQsIG4sIHRoaXMsIHRoaXMsIG8pCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgIH0sIHguYmluZEFsbCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHZhciBlLCBuLCByID0gYXJndW1lbnRzLmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmICgxID49IHIpIHRocm93IG5ldyBFcnJvcigiYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lcyIpOwogICAgICAgICAgICAgICAgZm9yIChlID0gMTsgciA+IGU7IGUrKykgbiA9IGFyZ3VtZW50c1tlXSwgdFtuXSA9IHguYmluZCh0W25dLCB0KTsKICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgIH0sIHgubWVtb2l6ZSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gZnVuY3Rpb24ocikgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gbi5jYWNoZSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9ICIiICsgKGUgPyBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiByKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5oYXMoaSwgbykgfHwgKGlbb10gPSB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpLCBpW29dCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIG4uY2FjaGUgPSB7fSwgbgogICAgICAgICAgICB9LCB4LmRlbGF5ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBwLmNhbGwoYXJndW1lbnRzLCAyKTsKICAgICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmFwcGx5KG51bGwsIG4pCiAgICAgICAgICAgICAgICB9LCBlKQogICAgICAgICAgICB9LCB4LmRlZmVyID0geC5wYXJ0aWFsKHguZGVsYXksIHgsIDEpLCB4LnRocm90dGxlID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHIsIGksIG8sIGEgPSBudWxsLAogICAgICAgICAgICAgICAgICAgIHMgPSAwOwogICAgICAgICAgICAgICAgbiB8fCAobiA9IHt9KTsKICAgICAgICAgICAgICAgIHZhciB1ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcyA9IG4ubGVhZGluZyA9PT0gITEgPyAwIDogeC5ub3coKSwgYSA9IG51bGwsIG8gPSB0LmFwcGx5KHIsIGkpLCBhIHx8IChyID0gaSA9IG51bGwpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBjID0geC5ub3coKTsKICAgICAgICAgICAgICAgICAgICBzIHx8IG4ubGVhZGluZyAhPT0gITEgfHwgKHMgPSBjKTsKICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGUgLSAoYyAtIHMpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByID0gdGhpcywgaSA9IGFyZ3VtZW50cywgMCA+PSBsIHx8IGwgPiBlID8gKGEgJiYgKGNsZWFyVGltZW91dChhKSwgYSA9IG51bGwpLCBzID0gYywgbyA9IHQuYXBwbHkociwgaSksIGEgfHwgKHIgPSBpID0gbnVsbCkpIDogYSB8fCBuLnRyYWlsaW5nID09PSAhMSB8fCAoYSA9IHNldFRpbWVvdXQodSwgbCkpLCBvCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHguZGVib3VuY2UgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciwgaSwgbywgYSwgcywgdSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBjID0geC5ub3coKSAtIGE7CiAgICAgICAgICAgICAgICAgICAgZSA+IGMgJiYgYyA+PSAwID8gciA9IHNldFRpbWVvdXQodSwgZSAtIGMpIDogKHIgPSBudWxsLCBuIHx8IChzID0gdC5hcHBseShvLCBpKSwgciB8fCAobyA9IGkgPSBudWxsKSkpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIG8gPSB0aGlzLCBpID0gYXJndW1lbnRzLCBhID0geC5ub3coKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IG4gJiYgIXI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgfHwgKHIgPSBzZXRUaW1lb3V0KHUsIGUpKSwgYyAmJiAocyA9IHQuYXBwbHkobywgaSksIG8gPSBpID0gbnVsbCksIHMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgeC53cmFwID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHgucGFydGlhbChlLCB0KQogICAgICAgICAgICB9LCB4Lm5lZ2F0ZSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXQuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB4LmNvbXBvc2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gYXJndW1lbnRzLAogICAgICAgICAgICAgICAgICAgIGUgPSB0Lmxlbmd0aCAtIDE7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IGUsIHIgPSB0W2VdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IG4tLTspIHIgPSB0W25dLmNhbGwodGhpcywgcik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgeC5hZnRlciA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLS10IDwgMSA/IGUuYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IHZvaWQgMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB4LmJlZm9yZSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAtLXQgPiAwICYmIChuID0gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSwgMSA+PSB0ICYmIChlID0gbnVsbCksIG4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgeC5vbmNlID0geC5wYXJ0aWFsKHguYmVmb3JlLCAyKTsKICAgICAgICAgICAgdmFyIEkgPSAhewogICAgICAgICAgICAgICAgICAgIHRvU3RyaW5nOiBudWxsCiAgICAgICAgICAgICAgICB9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCJ0b1N0cmluZyIpLAogICAgICAgICAgICAgICAgTyA9IFsidmFsdWVPZiIsICJpc1Byb3RvdHlwZU9mIiwgInRvU3RyaW5nIiwgInByb3BlcnR5SXNFbnVtZXJhYmxlIiwgImhhc093blByb3BlcnR5IiwgInRvTG9jYWxlU3RyaW5nIl07CiAgICAgICAgICAgIHgua2V5cyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIGlmICgheC5pc09iamVjdCh0KSkgcmV0dXJuIFtdOwogICAgICAgICAgICAgICAgaWYgKHYpIHJldHVybiB2KHQpOwogICAgICAgICAgICAgICAgdmFyIGUgPSBbXTsKICAgICAgICAgICAgICAgIGZvciAodmFyIG4gaW4gdCkgeC5oYXModCwgbikgJiYgZS5wdXNoKG4pOwogICAgICAgICAgICAgICAgcmV0dXJuIEkgJiYgbyh0LCBlKSwgZQogICAgICAgICAgICB9LCB4LmFsbEtleXMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBpZiAoIXguaXNPYmplY3QodCkpIHJldHVybiBbXTsKICAgICAgICAgICAgICAgIHZhciBlID0gW107CiAgICAgICAgICAgICAgICBmb3IgKHZhciBuIGluIHQpIGUucHVzaChuKTsKICAgICAgICAgICAgICAgIHJldHVybiBJICYmIG8odCwgZSksIGUKICAgICAgICAgICAgfSwgeC52YWx1ZXMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0geC5rZXlzKHQpLCBuID0gZS5sZW5ndGgsIHIgPSBBcnJheShuKSwgaSA9IDA7IG4gPiBpOyBpKyspIHJbaV0gPSB0W2VbaV1dOwogICAgICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAgICAgfSwgeC5tYXBPYmplY3QgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICBlID0gXyhlLCBuKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIsIGkgPSB4LmtleXModCksIG8gPSBpLmxlbmd0aCwgYSA9IHt9LCBzID0gMDsgbyA+IHM7IHMrKykgciA9IGlbc10sIGFbcl0gPSBlKHRbcl0sIHIsIHQpOwogICAgICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICAgICAgfSwgeC5wYWlycyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSB4LmtleXModCksIG4gPSBlLmxlbmd0aCwgciA9IEFycmF5KG4pLCBpID0gMDsgbiA+IGk7IGkrKykgcltpXSA9IFtlW2ldLCB0W2VbaV1dXTsKICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgIH0sIHguaW52ZXJ0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IHt9LCBuID0geC5rZXlzKHQpLCByID0gMCwgaSA9IG4ubGVuZ3RoOyBpID4gcjsgcisrKSBlW3RbbltyXV1dID0gbltyXTsKICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgIH0sIHguZnVuY3Rpb25zID0geC5tZXRob2RzID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSBbXTsKICAgICAgICAgICAgICAgIGZvciAodmFyIG4gaW4gdCkgeC5pc0Z1bmN0aW9uKHRbbl0pICYmIGUucHVzaChuKTsKICAgICAgICAgICAgICAgIHJldHVybiBlLnNvcnQoKQogICAgICAgICAgICB9LCB4LmV4dGVuZCA9IGsoeC5hbGxLZXlzKSwgeC5leHRlbmRPd24gPSB4LmFzc2lnbiA9IGsoeC5rZXlzKSwgeC5maW5kS2V5ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgZSA9IF8oZSwgbik7CiAgICAgICAgICAgICAgICBmb3IgKHZhciByLCBpID0geC5rZXlzKHQpLCBvID0gMCwgYSA9IGkubGVuZ3RoOyBhID4gbzsgbysrKQogICAgICAgICAgICAgICAgICAgIGlmIChyID0gaVtvXSwgZSh0W3JdLCByLCB0KSkgcmV0dXJuIHIKICAgICAgICAgICAgfSwgeC5waWNrID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHIsIGksIG8gPSB7fSwKICAgICAgICAgICAgICAgICAgICBhID0gdDsKICAgICAgICAgICAgICAgIGlmIChudWxsID09IGEpIHJldHVybiBvOwogICAgICAgICAgICAgICAgeC5pc0Z1bmN0aW9uKGUpID8gKGkgPSB4LmFsbEtleXMoYSksIHIgPSB3KGUsIG4pKSA6IChpID0gTihhcmd1bWVudHMsICExLCAhMSwgMSksIHIgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgaW4gbgogICAgICAgICAgICAgICAgfSwgYSA9IE9iamVjdChhKSk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBzID0gMCwgdSA9IGkubGVuZ3RoOyB1ID4gczsgcysrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBpW3NdLAogICAgICAgICAgICAgICAgICAgICAgICBsID0gYVtjXTsKICAgICAgICAgICAgICAgICAgICByKGwsIGMsIGEpICYmIChvW2NdID0gbCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgIH0sIHgub21pdCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIGlmICh4LmlzRnVuY3Rpb24oZSkpIGUgPSB4Lm5lZ2F0ZShlKTsKICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciByID0geC5tYXAoTihhcmd1bWVudHMsICExLCAhMSwgMSksIFN0cmluZyk7CiAgICAgICAgICAgICAgICAgICAgZSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF4LmNvbnRhaW5zKHIsIGUpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHgucGljayh0LCBlLCBuKQogICAgICAgICAgICB9LCB4LmRlZmF1bHRzID0gayh4LmFsbEtleXMsICEwKSwgeC5jcmVhdGUgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IFQodCk7CiAgICAgICAgICAgICAgICByZXR1cm4gZSAmJiB4LmV4dGVuZE93bihuLCBlKSwgbgogICAgICAgICAgICB9LCB4LmNsb25lID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHguaXNPYmplY3QodCkgPyB4LmlzQXJyYXkodCkgPyB0LnNsaWNlKCkgOiB4LmV4dGVuZCh7fSwgdCkgOiB0CiAgICAgICAgICAgIH0sIHgudGFwID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUodCksIHQKICAgICAgICAgICAgfSwgeC5pc01hdGNoID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSB4LmtleXMoZSksCiAgICAgICAgICAgICAgICAgICAgciA9IG4ubGVuZ3RoOwogICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuICFyOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IE9iamVjdCh0KSwgbyA9IDA7IHIgPiBvOyBvKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG5bb107CiAgICAgICAgICAgICAgICAgICAgaWYgKGVbYV0gIT09IGlbYV0gfHwgIShhIGluIGkpKSByZXR1cm4gITEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiAhMAogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgTCA9IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgIGlmICh0ID09PSBlKSByZXR1cm4gMCAhPT0gdCB8fCAxIC8gdCA9PT0gMSAvIGU7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0IHx8IG51bGwgPT0gZSkgcmV0dXJuIHQgPT09IGU7CiAgICAgICAgICAgICAgICB0IGluc3RhbmNlb2YgeCAmJiAodCA9IHQuX3dyYXBwZWQpLCBlIGluc3RhbmNlb2YgeCAmJiAoZSA9IGUuX3dyYXBwZWQpOwogICAgICAgICAgICAgICAgdmFyIGkgPSBoLmNhbGwodCk7CiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaC5jYWxsKGUpKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGkpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICJbb2JqZWN0IFJlZ0V4cF0iOgogICAgICAgICAgICAgICAgICAgIGNhc2UgIltvYmplY3QgU3RyaW5nXSI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiIiArIHQgPT0gIiIgKyBlOwogICAgICAgICAgICAgICAgICAgIGNhc2UgIltvYmplY3QgTnVtYmVyXSI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiArdCAhPT0gK3QgPyArZSAhPT0gK2UgOiAwID09PSArdCA/IDEgLyArdCA9PT0gMSAvIGUgOiArdCA9PT0gK2U7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiW29iamVjdCBEYXRlXSI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiW29iamVjdCBCb29sZWFuXSI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiArdCA9PT0gK2UKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBvID0gIltvYmplY3QgQXJyYXldIiA9PT0gaTsKICAgICAgICAgICAgICAgIGlmICghbykgewogICAgICAgICAgICAgICAgICAgIGlmICgib2JqZWN0IiAhPSB0eXBlb2YgdCB8fCAib2JqZWN0IiAhPSB0eXBlb2YgZSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gdC5jb25zdHJ1Y3RvciwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGUuY29uc3RydWN0b3I7CiAgICAgICAgICAgICAgICAgICAgaWYgKGEgIT09IHMgJiYgISh4LmlzRnVuY3Rpb24oYSkgJiYgYSBpbnN0YW5jZW9mIGEgJiYgeC5pc0Z1bmN0aW9uKHMpICYmIHMgaW5zdGFuY2VvZiBzKSAmJiAiY29uc3RydWN0b3IiIGluIHQgJiYgImNvbnN0cnVjdG9yIiBpbiBlKSByZXR1cm4gITEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG4gPSBuIHx8IFtdLCByID0gciB8fCBbXTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHUgPSBuLmxlbmd0aDsgdS0tOykKICAgICAgICAgICAgICAgICAgICBpZiAoblt1XSA9PT0gdCkgcmV0dXJuIHJbdV0gPT09IGU7CiAgICAgICAgICAgICAgICBpZiAobi5wdXNoKHQpLCByLnB1c2goZSksIG8pIHsKICAgICAgICAgICAgICAgICAgICBpZiAodSA9IHQubGVuZ3RoLCB1ICE9PSBlLmxlbmd0aCkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgIGZvciAoOyB1LS07KQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUwodFt1XSwgZVt1XSwgbiwgcikpIHJldHVybiAhMQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYywgbCA9IHgua2V5cyh0KTsKICAgICAgICAgICAgICAgICAgICBpZiAodSA9IGwubGVuZ3RoLCB4LmtleXMoZSkubGVuZ3RoICE9PSB1KSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgZm9yICg7IHUtLTspCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID0gbFt1XSwgIXguaGFzKGUsIGMpIHx8ICFMKHRbY10sIGVbY10sIG4sIHIpKSByZXR1cm4gITEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBuLnBvcCgpLCByLnBvcCgpLCAhMAogICAgICAgICAgICB9OwogICAgICAgICAgICB4LmlzRXF1YWwgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gTCh0LCBlKQogICAgICAgICAgICB9LCB4LmlzRW1wdHkgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0ID8gITAgOiBTKHQpICYmICh4LmlzQXJyYXkodCkgfHwgeC5pc1N0cmluZyh0KSB8fCB4LmlzQXJndW1lbnRzKHQpKSA/IDAgPT09IHQubGVuZ3RoIDogMCA9PT0geC5rZXlzKHQpLmxlbmd0aAogICAgICAgICAgICB9LCB4LmlzRWxlbWVudCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAhKCF0IHx8IDEgIT09IHQubm9kZVR5cGUpCiAgICAgICAgICAgIH0sIHguaXNBcnJheSA9IGcgfHwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuICJbb2JqZWN0IEFycmF5XSIgPT09IGguY2FsbCh0KQogICAgICAgICAgICB9LCB4LmlzT2JqZWN0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSB0eXBlb2YgdDsKICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09PSBlIHx8ICJvYmplY3QiID09PSBlICYmICEhdAogICAgICAgICAgICB9LCB4LmVhY2goWyJBcmd1bWVudHMiLCAiRnVuY3Rpb24iLCAiU3RyaW5nIiwgIk51bWJlciIsICJEYXRlIiwgIlJlZ0V4cCIsICJFcnJvciJdLCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB4WyJpcyIgKyB0XSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaC5jYWxsKGUpID09PSAiW29iamVjdCAiICsgdCArICJdIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgeC5pc0FyZ3VtZW50cyhhcmd1bWVudHMpIHx8ICh4LmlzQXJndW1lbnRzID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHguaGFzKHQsICJjYWxsZWUiKQogICAgICAgICAgICB9KSwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgLy4vICYmICJvYmplY3QiICE9IHR5cGVvZiBJbnQ4QXJyYXkgJiYgKHguaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiB0IHx8ICExCiAgICAgICAgICAgIH0pLCB4LmlzRmluaXRlID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGlzRmluaXRlKHQpICYmICFpc05hTihwYXJzZUZsb2F0KHQpKQogICAgICAgICAgICB9LCB4LmlzTmFOID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHguaXNOdW1iZXIodCkgJiYgdCAhPT0gK3QKICAgICAgICAgICAgfSwgeC5pc0Jvb2xlYW4gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gITAgfHwgdCA9PT0gITEgfHwgIltvYmplY3QgQm9vbGVhbl0iID09PSBoLmNhbGwodCkKICAgICAgICAgICAgfSwgeC5pc051bGwgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PT0gdAogICAgICAgICAgICB9LCB4LmlzVW5kZWZpbmVkID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdAogICAgICAgICAgICB9LCB4LmhhcyA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9IHQgJiYgZC5jYWxsKHQsIGUpCiAgICAgICAgICAgIH0sIHgubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGEuXyA9IHMsIHRoaXMKICAgICAgICAgICAgfSwgeC5pZGVudGl0eSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgIH0sIHguY29uc3RhbnQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgeC5ub29wID0gZnVuY3Rpb24oKSB7fSwgeC5wcm9wZXJ0eSA9IEUsIHgucHJvcGVydHlPZiA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyBmdW5jdGlvbigpIHt9IDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0W2VdCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHgubWF0Y2hlciA9IHgubWF0Y2hlcyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0ID0geC5leHRlbmRPd24oe30sIHQpLAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHguaXNNYXRjaChlLCB0KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgeC50aW1lcyA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByID0gQXJyYXkoTWF0aC5tYXgoMCwgdCkpOwogICAgICAgICAgICAgICAgZSA9IHcoZSwgbiwgMSk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgdCA+IGk7IGkrKykgcltpXSA9IGUoaSk7CiAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICB9LCB4LnJhbmRvbSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IGUgJiYgKGUgPSB0LCB0ID0gMCksIHQgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoZSAtIHQgKyAxKSkKICAgICAgICAgICAgfSwgeC5ub3cgPSBEYXRlLm5vdyB8fCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiAobmV3IERhdGUpLmdldFRpbWUoKQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgRCA9IHsKICAgICAgICAgICAgICAgICAgICAiJiI6ICImYW1wOyIsCiAgICAgICAgICAgICAgICAgICAgIjwiOiAiJmx0OyIsCiAgICAgICAgICAgICAgICAgICAgIj4iOiAiJmd0OyIsCiAgICAgICAgICAgICAgICAgICAgJyInOiAiJnF1b3Q7IiwKICAgICAgICAgICAgICAgICAgICAiJyI6ICImI3gyNzsiLAogICAgICAgICAgICAgICAgICAgICJgIjogIiYjeDYwOyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBQID0geC5pbnZlcnQoRCksCiAgICAgICAgICAgICAgICAkID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRbZV0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgbiA9ICIoPzoiICsgeC5rZXlzKHQpLmpvaW4oInwiKSArICIpIiwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IFJlZ0V4cChuKSwKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IFJlZ0V4cChuLCAiZyIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gbnVsbCA9PSB0ID8gIiIgOiAiIiArIHQsIHIudGVzdCh0KSA/IHQucmVwbGFjZShpLCBlKSA6IHQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB4LmVzY2FwZSA9ICQoRCksIHgudW5lc2NhcGUgPSAkKFApLCB4LnJlc3VsdCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByID0gbnVsbCA9PSB0ID8gdm9pZCAwIDogdFtlXTsKICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IHIgJiYgKHIgPSBuKSwgeC5pc0Z1bmN0aW9uKHIpID8gci5jYWxsKHQpIDogcgogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgcSA9IDA7CiAgICAgICAgICAgIHgudW5pcXVlSWQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9ICsrcSArICIiOwogICAgICAgICAgICAgICAgcmV0dXJuIHQgPyB0ICsgZSA6IGUKICAgICAgICAgICAgfSwgeC50ZW1wbGF0ZVNldHRpbmdzID0gewogICAgICAgICAgICAgICAgZXZhbHVhdGU6IC88JShbXHNcU10rPyklPi9nLAogICAgICAgICAgICAgICAgaW50ZXJwb2xhdGU6IC88JT0oW1xzXFNdKz8pJT4vZywKICAgICAgICAgICAgICAgIGVzY2FwZTogLzwlLShbXHNcU10rPyklPi9nCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBIID0gLyguKV4vLAogICAgICAgICAgICAgICAgTSA9IHsKICAgICAgICAgICAgICAgICAgICAiJyI6ICInIiwKICAgICAgICAgICAgICAgICAgICAiXFwiOiAiXFwiLAogICAgICAgICAgICAgICAgICAgICJcciI6ICJyIiwKICAgICAgICAgICAgICAgICAgICAiXG4iOiAibiIsCiAgICAgICAgICAgICAgICAgICAgIlx1MjAyOCI6ICJ1MjAyOCIsCiAgICAgICAgICAgICAgICAgICAgIlx1MjAyOSI6ICJ1MjAyOSIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBGID0gL1xcfCd8XHJ8XG58XHUyMDI4fFx1MjAyOS9nLAogICAgICAgICAgICAgICAgQiA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIlxcIiArIE1bdF0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIHgudGVtcGxhdGUgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAhZSAmJiBuICYmIChlID0gbiksIGUgPSB4LmRlZmF1bHRzKHt9LCBlLCB4LnRlbXBsYXRlU2V0dGluZ3MpOwogICAgICAgICAgICAgICAgdmFyIHIgPSBSZWdFeHAoWyhlLmVzY2FwZSB8fCBIKS5zb3VyY2UsIChlLmludGVycG9sYXRlIHx8IEgpLnNvdXJjZSwgKGUuZXZhbHVhdGUgfHwgSCkuc291cmNlXS5qb2luKCJ8IikgKyAifCQiLCAiZyIpLAogICAgICAgICAgICAgICAgICAgIGkgPSAwLAogICAgICAgICAgICAgICAgICAgIG8gPSAiX19wKz0nIjsKICAgICAgICAgICAgICAgIHQucmVwbGFjZShyLCBmdW5jdGlvbihlLCBuLCByLCBhLCBzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8gKz0gdC5zbGljZShpLCBzKS5yZXBsYWNlKEYsIEIpLCBpID0gcyArIGUubGVuZ3RoLCBuID8gbyArPSAiJytcbigoX190PSgiICsgbiArICIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcbiciIDogciA/IG8gKz0gIicrXG4oKF9fdD0oIiArIHIgKyAiKSk9PW51bGw/Jyc6X190KStcbiciIDogYSAmJiAobyArPSAiJztcbiIgKyBhICsgIlxuX19wKz0nIiksIGUKICAgICAgICAgICAgICAgIH0pLCBvICs9ICInO1xuIiwgZS52YXJpYWJsZSB8fCAobyA9ICJ3aXRoKG9ianx8e30pe1xuIiArIG8gKyAifVxuIiksIG8gPSAidmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLHByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XG4iICsgbyArICJyZXR1cm4gX19wO1xuIjsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBuZXcgRnVuY3Rpb24oZS52YXJpYWJsZSB8fCAib2JqIiwgIl8iLCBvKQogICAgICAgICAgICAgICAgfSBjYXRjaCAocykgewogICAgICAgICAgICAgICAgICAgIHRocm93IHMuc291cmNlID0gbywgcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHUgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmNhbGwodGhpcywgdCwgeCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGMgPSBlLnZhcmlhYmxlIHx8ICJvYmoiOwogICAgICAgICAgICAgICAgcmV0dXJuIHUuc291cmNlID0gImZ1bmN0aW9uKCIgKyBjICsgIil7XG4iICsgbyArICJ9IiwgdQogICAgICAgICAgICB9LCB4LmNoYWluID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSB4KHQpOwogICAgICAgICAgICAgICAgcmV0dXJuIGUuX2NoYWluID0gITAsIGUKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIFUgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdC5fY2hhaW4gPyB4KGUpLmNoYWluKCkgOiBlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHgubWl4aW4gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB4LmVhY2goeC5mdW5jdGlvbnModCksIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHhbZV0gPSB0W2VdOwogICAgICAgICAgICAgICAgICAgIHgucHJvdG90eXBlW2VdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gW3RoaXMuX3dyYXBwZWRdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZi5hcHBseSh0LCBhcmd1bWVudHMpLCBVKHRoaXMsIG4uYXBwbHkoeCwgdCkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwgeC5taXhpbih4KSwgeC5lYWNoKFsicG9wIiwgInB1c2giLCAicmV2ZXJzZSIsICJzaGlmdCIsICJzb3J0IiwgInNwbGljZSIsICJ1bnNoaWZ0Il0sIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gdVt0XTsKICAgICAgICAgICAgICAgIHgucHJvdG90eXBlW3RdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLl93cmFwcGVkOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmFwcGx5KG4sIGFyZ3VtZW50cyksICJzaGlmdCIgIT09IHQgJiYgInNwbGljZSIgIT09IHQgfHwgMCAhPT0gbi5sZW5ndGggfHwgZGVsZXRlIG5bMF0sIFUodGhpcywgbikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIHguZWFjaChbImNvbmNhdCIsICJqb2luIiwgInNsaWNlIl0sIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gdVt0XTsKICAgICAgICAgICAgICAgIHgucHJvdG90eXBlW3RdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFUodGhpcywgZS5hcHBseSh0aGlzLl93cmFwcGVkLCBhcmd1bWVudHMpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgeC5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl93cmFwcGVkCiAgICAgICAgICAgIH0sIHgucHJvdG90eXBlLnZhbHVlT2YgPSB4LnByb3RvdHlwZS50b0pTT04gPSB4LnByb3RvdHlwZS52YWx1ZSwgeC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiAiIiArIHRoaXMuX3dyYXBwZWQKICAgICAgICAgICAgfSwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgJiYgZGVmaW5lKCJ1bmRlcnNjb3JlIiwgW10sIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHgKICAgICAgICAgICAgfSkKICAgICAgICB9KS5jYWxsKHRoaXMpCiAgICB9LCB7fV0sCiAgICAxMTogW2Z1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICBmdW5jdGlvbiByKCkgewogICAgICAgICAgICBpZiAoIXMpIHsKICAgICAgICAgICAgICAgIHMgPSAhMDsKICAgICAgICAgICAgICAgIGZvciAodmFyIHQsIGUgPSBhLmxlbmd0aDsgZTspIHsKICAgICAgICAgICAgICAgICAgICB0ID0gYSwgYSA9IFtdOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAtMTsgKytuIDwgZTspIHRbbl0oKTsKICAgICAgICAgICAgICAgICAgICBlID0gYS5sZW5ndGgKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHMgPSAhMQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpKCkge30KICAgICAgICB2YXIgbyA9IGUuZXhwb3J0cyA9IHt9LAogICAgICAgICAgICBhID0gW10sCiAgICAgICAgICAgIHMgPSAhMTsKICAgICAgICBvLm5leHRUaWNrID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICBhLnB1c2godCksIHMgfHwgc2V0VGltZW91dChyLCAwKQogICAgICAgIH0sIG8udGl0bGUgPSAiYnJvd3NlciIsIG8uYnJvd3NlciA9ICEwLCBvLmVudiA9IHt9LCBvLmFyZ3YgPSBbXSwgby52ZXJzaW9uID0gIiIsIG8udmVyc2lvbnMgPSB7fSwgby5vbiA9IGksIG8uYWRkTGlzdGVuZXIgPSBpLCBvLm9uY2UgPSBpLCBvLm9mZiA9IGksIG8ucmVtb3ZlTGlzdGVuZXIgPSBpLCBvLnJlbW92ZUFsbExpc3RlbmVycyA9IGksIG8uZW1pdCA9IGksIG8uYmluZGluZyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCIpCiAgICAgICAgfSwgby5jd2QgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuICIvIgogICAgICAgIH0sIG8uY2hkaXIgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkIikKICAgICAgICB9LCBvLnVtYXNrID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgfQogICAgfSwge31dLAogICAgMTI6IFtmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgISBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIGUodCkgewogICAgICAgICAgICAgICAgIn0iID09PSB0Lm4uc3Vic3RyKHQubi5sZW5ndGggLSAxKSAmJiAodC5uID0gdC5uLnN1YnN0cmluZygwLCB0Lm4ubGVuZ3RoIC0gMSkpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIG4odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQudHJpbSA/IHQudHJpbSgpIDogdC5yZXBsYWNlKC9eXHMqfFxzKiQvZywgIiIpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHIodCwgZSwgbikgewogICAgICAgICAgICAgICAgaWYgKGUuY2hhckF0KG4pICE9IHQuY2hhckF0KDApKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gMSwgaSA9IHQubGVuZ3RoOyBpID4gcjsgcisrKQogICAgICAgICAgICAgICAgICAgIGlmIChlLmNoYXJBdChuICsgcikgIT0gdC5jaGFyQXQocikpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgIHJldHVybiAhMAogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpKGUsIG4sIHIsIHMpIHsKICAgICAgICAgICAgICAgIHZhciB1ID0gW10sCiAgICAgICAgICAgICAgICAgICAgYyA9IG51bGwsCiAgICAgICAgICAgICAgICAgICAgbCA9IG51bGwsCiAgICAgICAgICAgICAgICAgICAgZiA9IG51bGw7CiAgICAgICAgICAgICAgICBmb3IgKGwgPSByW3IubGVuZ3RoIC0gMV07IGUubGVuZ3RoID4gMDspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZiA9IGUuc2hpZnQoKSwgbCAmJiAiPCIgPT0gbC50YWcgJiYgIShmLnRhZyBpbiB3KSkgdGhyb3cgbmV3IEVycm9yKCJJbGxlZ2FsIGNvbnRlbnQgaW4gPCBzdXBlciB0YWcuIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHQudGFnc1tmLnRhZ10gPD0gdC50YWdzLiQgfHwgbyhmLCBzKSkgci5wdXNoKGYpLCBmLm5vZGVzID0gaShlLCBmLnRhZywgciwgcyk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiLyIgPT0gZi50YWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSByLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCJDbG9zaW5nIHRhZyB3aXRob3V0IG9wZW5lcjogLyIgKyBmLm4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPSByLnBvcCgpLCBmLm4gIT0gYy5uICYmICFhKGYubiwgYy5uLCBzKSkgdGhyb3cgbmV3IEVycm9yKCJOZXN0aW5nIGVycm9yOiAiICsgYy5uICsgIiB2cy4gIiArIGYubik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYy5lbmQgPSBmLmksIHUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAiXG4iID09IGYudGFnICYmIChmLmxhc3QgPSAwID09IGUubGVuZ3RoIHx8ICJcbiIgPT0gZVswXS50YWcpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHUucHVzaChmKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHIubGVuZ3RoID4gMCkgdGhyb3cgbmV3IEVycm9yKCJtaXNzaW5nIGNsb3NpbmcgdGFnOiAiICsgci5wb3AoKS5uKTsKICAgICAgICAgICAgICAgIHJldHVybiB1CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIG8odCwgZSkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIHIgPSBlLmxlbmd0aDsgciA+IG47IG4rKykKICAgICAgICAgICAgICAgICAgICBpZiAoZVtuXS5vID09IHQubikgcmV0dXJuIHQudGFnID0gIiMiLCAhMAogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBhKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAwLCBpID0gbi5sZW5ndGg7IGkgPiByOyByKyspCiAgICAgICAgICAgICAgICAgICAgaWYgKG5bcl0uYyA9PSB0ICYmIG5bcl0ubyA9PSBlKSByZXR1cm4gITAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcyh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IFtdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiB0KSBlLnB1c2goJyInICsgYyhuKSArICciOiBmdW5jdGlvbihjLHAsdCxpKSB7JyArIHRbbl0gKyAifSIpOwogICAgICAgICAgICAgICAgcmV0dXJuICJ7ICIgKyBlLmpvaW4oIiwiKSArICIgfSIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gdSh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IFtdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiB0LnBhcnRpYWxzKSBlLnB1c2goJyInICsgYyhuKSArICciOntuYW1lOiInICsgYyh0LnBhcnRpYWxzW25dLm5hbWUpICsgJyIsICcgKyB1KHQucGFydGlhbHNbbl0pICsgIn0iKTsKICAgICAgICAgICAgICAgIHJldHVybiAicGFydGlhbHM6IHsiICsgZS5qb2luKCIsIikgKyAifSwgc3ViczogIiArIHModC5zdWJzKQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBjKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0LnJlcGxhY2UobSwgIlxcXFwiKS5yZXBsYWNlKGcsICdcXCInKS5yZXBsYWNlKHYsICJcXG4iKS5yZXBsYWNlKHksICJcXHIiKS5yZXBsYWNlKGIsICJcXHUyMDI4IikucmVwbGFjZSh4LCAiXFx1MjAyOSIpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGwodCkgewogICAgICAgICAgICAgICAgcmV0dXJuIH50LmluZGV4T2YoIi4iKSA/ICJkIiA6ICJmIgogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBmKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gIjwiICsgKGUucHJlZml4IHx8ICIiKSwKICAgICAgICAgICAgICAgICAgICByID0gbiArIHQubiArIF8rKzsKICAgICAgICAgICAgICAgIHJldHVybiBlLnBhcnRpYWxzW3JdID0gewogICAgICAgICAgICAgICAgICAgIG5hbWU6IHQubiwKICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsczoge30KICAgICAgICAgICAgICAgIH0sIGUuY29kZSArPSAndC5iKHQucnAoIicgKyBjKHIpICsgJyIsYyxwLCInICsgKHQuaW5kZW50IHx8ICIiKSArICciKSk7JywgcgogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwKHQsIGUpIHsKICAgICAgICAgICAgICAgIGUuY29kZSArPSAidC5iKHQudCh0LiIgKyBsKHQubikgKyAnKCInICsgYyh0Lm4pICsgJyIsYyxwLDApKSk7JwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBoKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAidC5iKCIgKyB0ICsgIik7IgogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBkID0gL1xTLywKICAgICAgICAgICAgICAgIGcgPSAvXCIvZywKICAgICAgICAgICAgICAgIHYgPSAvXG4vZywKICAgICAgICAgICAgICAgIHkgPSAvXHIvZywKICAgICAgICAgICAgICAgIG0gPSAvXFwvZywKICAgICAgICAgICAgICAgIGIgPSAvXHUyMDI4LywKICAgICAgICAgICAgICAgIHggPSAvXHUyMDI5LzsKICAgICAgICAgICAgdC50YWdzID0gewogICAgICAgICAgICAgICAgIiMiOiAxLAogICAgICAgICAgICAgICAgIl4iOiAyLAogICAgICAgICAgICAgICAgIjwiOiAzLAogICAgICAgICAgICAgICAgJDogNCwKICAgICAgICAgICAgICAgICIvIjogNSwKICAgICAgICAgICAgICAgICIhIjogNiwKICAgICAgICAgICAgICAgICI+IjogNywKICAgICAgICAgICAgICAgICI9IjogOCwKICAgICAgICAgICAgICAgIF92OiA5LAogICAgICAgICAgICAgICAgInsiOiAxMCwKICAgICAgICAgICAgICAgICImIjogMTEsCiAgICAgICAgICAgICAgICBfdDogMTIKICAgICAgICAgICAgfSwgdC5zY2FuID0gZnVuY3Rpb24oaSwgbykgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gYSgpIHsKICAgICAgICAgICAgICAgICAgICBtLmxlbmd0aCA+IDAgJiYgKGIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogIl90IiwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbmV3IFN0cmluZyhtKQogICAgICAgICAgICAgICAgICAgIH0pLCBtID0gIiIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcygpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gITAsIG4gPSBfOyBuIDwgYi5sZW5ndGg7IG4rKykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPSB0LnRhZ3NbYltuXS50YWddIDwgdC50YWdzLl92IHx8ICJfdCIgPT0gYltuXS50YWcgJiYgbnVsbCA9PT0gYltuXS50ZXh0Lm1hdGNoKGQpLCAhZSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gdSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGEoKSwgdCAmJiBzKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4sIHIgPSBfOyByIDwgYi5sZW5ndGg7IHIrKykgYltyXS50ZXh0ICYmICgobiA9IGJbciArIDFdKSAmJiAiPiIgPT0gbi50YWcgJiYgKG4uaW5kZW50ID0gYltyXS50ZXh0LnRvU3RyaW5nKCkpLCBiLnNwbGljZShyLCAxKSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBlIHx8IGIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogIlxuIgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHggPSAhMSwgXyA9IGIubGVuZ3RoCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gYyh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAiPSIgKyBULAogICAgICAgICAgICAgICAgICAgICAgICBpID0gdC5pbmRleE9mKHIsIGUpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gbih0LnN1YnN0cmluZyh0LmluZGV4T2YoIj0iLCBlKSArIDEsIGkpKS5zcGxpdCgiICIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBrID0gb1swXSwgVCA9IG9bby5sZW5ndGggLSAxXSwgaSArIHIubGVuZ3RoIC0gMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGwgPSBpLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICBmID0gMCwKICAgICAgICAgICAgICAgICAgICBwID0gMSwKICAgICAgICAgICAgICAgICAgICBoID0gMiwKICAgICAgICAgICAgICAgICAgICBnID0gZiwKICAgICAgICAgICAgICAgICAgICB2ID0gbnVsbCwKICAgICAgICAgICAgICAgICAgICB5ID0gbnVsbCwKICAgICAgICAgICAgICAgICAgICBtID0gIiIsCiAgICAgICAgICAgICAgICAgICAgYiA9IFtdLAogICAgICAgICAgICAgICAgICAgIHggPSAhMSwKICAgICAgICAgICAgICAgICAgICB3ID0gMCwKICAgICAgICAgICAgICAgICAgICBfID0gMCwKICAgICAgICAgICAgICAgICAgICBrID0gInt7IiwKICAgICAgICAgICAgICAgICAgICBUID0gIn19IjsKICAgICAgICAgICAgICAgIGZvciAobyAmJiAobyA9IG8uc3BsaXQoIiAiKSwgayA9IG9bMF0sIFQgPSBvWzFdKSwgdyA9IDA7IGwgPiB3OyB3KyspIGcgPT0gZiA/IHIoaywgaSwgdykgPyAoLS13LCBhKCksIGcgPSBwKSA6ICJcbiIgPT0gaS5jaGFyQXQodykgPyB1KHgpIDogbSArPSBpLmNoYXJBdCh3KSA6IGcgPT0gcCA/ICh3ICs9IGsubGVuZ3RoIC0gMSwgeSA9IHQudGFnc1tpLmNoYXJBdCh3ICsgMSldLCB2ID0geSA/IGkuY2hhckF0KHcgKyAxKSA6ICJfdiIsICI9IiA9PSB2ID8gKHcgPSBjKGksIHcpLCBnID0gZikgOiAoeSAmJiB3KyssIGcgPSBoKSwgeCA9IHcpIDogcihULCBpLCB3KSA/IChiLnB1c2goewogICAgICAgICAgICAgICAgICAgIHRhZzogdiwKICAgICAgICAgICAgICAgICAgICBuOiBuKG0pLAogICAgICAgICAgICAgICAgICAgIG90YWc6IGssCiAgICAgICAgICAgICAgICAgICAgY3RhZzogVCwKICAgICAgICAgICAgICAgICAgICBpOiAiLyIgPT0gdiA/IHggLSBrLmxlbmd0aCA6IHcgKyBULmxlbmd0aAogICAgICAgICAgICAgICAgfSksIG0gPSAiIiwgdyArPSBULmxlbmd0aCAtIDEsIGcgPSBmLCAieyIgPT0gdiAmJiAoIn19IiA9PSBUID8gdysrIDogZShiW2IubGVuZ3RoIC0gMV0pKSkgOiBtICs9IGkuY2hhckF0KHcpOwogICAgICAgICAgICAgICAgcmV0dXJuIHUoeCwgITApLCBiCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciB3ID0gewogICAgICAgICAgICAgICAgX3Q6ICEwLAogICAgICAgICAgICAgICAgIlxuIjogITAsCiAgICAgICAgICAgICAgICAkOiAhMCwKICAgICAgICAgICAgICAgICIvIjogITAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdC5zdHJpbmdpZnkgPSBmdW5jdGlvbihlLCBuLCByKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIntjb2RlOiBmdW5jdGlvbiAoYyxwLGkpIHsgIiArIHQud3JhcE1haW4oZS5jb2RlKSArICIgfSwiICsgdShlKSArICJ9IgogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgXyA9IDA7CiAgICAgICAgICAgIHQuZ2VuZXJhdGUgPSBmdW5jdGlvbihlLCBuLCByKSB7CiAgICAgICAgICAgICAgICBfID0gMDsKICAgICAgICAgICAgICAgIHZhciBpID0gewogICAgICAgICAgICAgICAgICAgIGNvZGU6ICIiLAogICAgICAgICAgICAgICAgICAgIHN1YnM6IHt9LAogICAgICAgICAgICAgICAgICAgIHBhcnRpYWxzOiB7fQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiB0LndhbGsoZSwgaSksIHIuYXNTdHJpbmcgPyB0aGlzLnN0cmluZ2lmeShpLCBuLCByKSA6IHRoaXMubWFrZVRlbXBsYXRlKGksIG4sIHIpCiAgICAgICAgICAgIH0sIHQud3JhcE1haW4gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ3ZhciB0PXRoaXM7dC5iKGk9aXx8IiIpOycgKyB0ICsgInJldHVybiB0LmZsKCk7IgogICAgICAgICAgICB9LCB0LnRlbXBsYXRlID0gdC5UZW1wbGF0ZSwgdC5tYWtlVGVtcGxhdGUgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXMubWFrZVBhcnRpYWxzKHQpOwogICAgICAgICAgICAgICAgcmV0dXJuIHIuY29kZSA9IG5ldyBGdW5jdGlvbigiYyIsICJwIiwgImkiLCB0aGlzLndyYXBNYWluKHQuY29kZSkpLCBuZXcgdGhpcy50ZW1wbGF0ZShyLCBlLCB0aGlzLCBuKQogICAgICAgICAgICB9LCB0Lm1ha2VQYXJ0aWFscyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHZhciBlLCBuID0gewogICAgICAgICAgICAgICAgICAgIHN1YnM6IHt9LAogICAgICAgICAgICAgICAgICAgIHBhcnRpYWxzOiB0LnBhcnRpYWxzLAogICAgICAgICAgICAgICAgICAgIG5hbWU6IHQubmFtZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGZvciAoZSBpbiBuLnBhcnRpYWxzKSBuLnBhcnRpYWxzW2VdID0gdGhpcy5tYWtlUGFydGlhbHMobi5wYXJ0aWFsc1tlXSk7CiAgICAgICAgICAgICAgICBmb3IgKGUgaW4gdC5zdWJzKSBuLnN1YnNbZV0gPSBuZXcgRnVuY3Rpb24oImMiLCAicCIsICJ0IiwgImkiLCB0LnN1YnNbZV0pOwogICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgfSwgdC5jb2RlZ2VuID0gewogICAgICAgICAgICAgICAgIiMiOiBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgbi5jb2RlICs9ICJpZih0LnModC4iICsgbChlLm4pICsgJygiJyArIGMoZS5uKSArICciLGMscCwxKSxjLHAsMCwnICsgZS5pICsgIiwiICsgZS5lbmQgKyAnLCInICsgZS5vdGFnICsgIiAiICsgZS5jdGFnICsgJyIpKXt0LnJzKGMscCxmdW5jdGlvbihjLHAsdCl7JywgdC53YWxrKGUubm9kZXMsIG4pLCBuLmNvZGUgKz0gIn0pO2MucG9wKCk7fSIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAiXiI6IGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICBuLmNvZGUgKz0gImlmKCF0LnModC4iICsgbChlLm4pICsgJygiJyArIGMoZS5uKSArICciLGMscCwxKSxjLHAsMSwwLDAsIiIpKXsnLCB0LndhbGsoZS5ub2RlcywgbiksIG4uY29kZSArPSAifTsiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgIj4iOiBmLAogICAgICAgICAgICAgICAgIjwiOiBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpYWxzOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICBpblBhcnRpYWw6ICEwCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0LndhbGsoZS5ub2Rlcywgcik7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBuLnBhcnRpYWxzW2YoZSwgbildOwogICAgICAgICAgICAgICAgICAgIGkuc3VicyA9IHIuc3VicywgaS5wYXJ0aWFscyA9IHIucGFydGlhbHMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAkOiBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGFydGlhbHM6IG4ucGFydGlhbHMsCiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeDogZS5uCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0LndhbGsoZS5ub2RlcywgciksIG4uc3Vic1tlLm5dID0gci5jb2RlLCBuLmluUGFydGlhbCB8fCAobi5jb2RlICs9ICd0LnN1YigiJyArIGMoZS5uKSArICciLGMscCxpKTsnKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICJcbiI6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBlLmNvZGUgKz0gaCgnIlxcbiInICsgKHQubGFzdCA/ICIiIDogIiArIGkiKSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfdjogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIGUuY29kZSArPSAidC5iKHQudih0LiIgKyBsKHQubikgKyAnKCInICsgYyh0Lm4pICsgJyIsYyxwLDApKSk7JwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF90OiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5jb2RlICs9IGgoJyInICsgYyh0LnRleHQpICsgJyInKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICJ7IjogcCwKICAgICAgICAgICAgICAgICImIjogcAogICAgICAgICAgICB9LCB0LndhbGsgPSBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciByLCBpID0gMCwgbyA9IGUubGVuZ3RoOyBvID4gaTsgaSsrKSByID0gdC5jb2RlZ2VuW2VbaV0udGFnXSwgciAmJiByKGVbaV0sIG4pOwogICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgfSwgdC5wYXJzZSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBuID0gbiB8fCB7fSwgaSh0LCAiIiwgW10sIG4uc2VjdGlvblRhZ3MgfHwgW10pCiAgICAgICAgICAgIH0sIHQuY2FjaGUgPSB7fSwgdC5jYWNoZUtleSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBbdCwgISFlLmFzU3RyaW5nLCAhIWUuZGlzYWJsZUxhbWJkYSwgZS5kZWxpbWl0ZXJzLCAhIWUubW9kZWxHZXRdLmpvaW4oInx8IikKICAgICAgICAgICAgfSwgdC5jb21waWxlID0gZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgbiA9IG4gfHwge307CiAgICAgICAgICAgICAgICB2YXIgciA9IHQuY2FjaGVLZXkoZSwgbiksCiAgICAgICAgICAgICAgICAgICAgaSA9IHRoaXMuY2FjaGVbcl07CiAgICAgICAgICAgICAgICBpZiAoaSkgewogICAgICAgICAgICAgICAgICAgIHZhciBvID0gaS5wYXJ0aWFsczsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhIGluIG8pIGRlbGV0ZSBvW2FdLmluc3RhbmNlOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaSA9IHRoaXMuZ2VuZXJhdGUodGhpcy5wYXJzZSh0aGlzLnNjYW4oZSwgbi5kZWxpbWl0ZXJzKSwgZSwgbiksIGUsIG4pLCB0aGlzLmNhY2hlW3JdID0gaQogICAgICAgICAgICB9CiAgICAgICAgfSgidW5kZWZpbmVkIiAhPSB0eXBlb2YgbiA/IG4gOiBIb2dhbikKICAgIH0sIHt9XSwKICAgIDEzOiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgIHZhciByID0gdCgiLi9jb21waWxlciIpOwogICAgICAgIHIuVGVtcGxhdGUgPSB0KCIuL3RlbXBsYXRlIikuVGVtcGxhdGUsIHIudGVtcGxhdGUgPSByLlRlbXBsYXRlLCBlLmV4cG9ydHMgPSByCiAgICB9LCB7CiAgICAgICAgIi4vY29tcGlsZXIiOiAxMiwKICAgICAgICAiLi90ZW1wbGF0ZSI6IDE0CiAgICB9XSwKICAgIDE0OiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgIHZhciByID0ge307CiAgICAgICAgISBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIGUodCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHI7CiAgICAgICAgICAgICAgICByZXR1cm4gZSAmJiAib2JqZWN0IiA9PSB0eXBlb2YgZSAmJiAodm9pZCAwICE9PSBlW3RdID8gciA9IGVbdF0gOiBuICYmIGUuZ2V0ICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUuZ2V0ICYmIChyID0gZS5nZXQodCkpKSwgcgogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBuKHQsIGUsIG4sIHIsIGksIG8pIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGEoKSB7fQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHMoKSB7fQogICAgICAgICAgICAgICAgYS5wcm90b3R5cGUgPSB0LCBzLnByb3RvdHlwZSA9IHQuc3ViczsKICAgICAgICAgICAgICAgIHZhciB1LCBjID0gbmV3IGE7CiAgICAgICAgICAgICAgICBjLnN1YnMgPSBuZXcgcywgYy5zdWJzVGV4dCA9IHt9LCBjLmJ1ZiA9ICIiLCByID0gciB8fCB7fSwgYy5zdGFja1N1YnMgPSByLCBjLnN1YnNUZXh0ID0gbzsKICAgICAgICAgICAgICAgIGZvciAodSBpbiBlKSByW3VdIHx8IChyW3VdID0gZVt1XSk7CiAgICAgICAgICAgICAgICBmb3IgKHUgaW4gcikgYy5zdWJzW3VdID0gclt1XTsKICAgICAgICAgICAgICAgIGkgPSBpIHx8IHt9LCBjLnN0YWNrUGFydGlhbHMgPSBpOwogICAgICAgICAgICAgICAgZm9yICh1IGluIG4pIGlbdV0gfHwgKGlbdV0gPSBuW3VdKTsKICAgICAgICAgICAgICAgIGZvciAodSBpbiBpKSBjLnBhcnRpYWxzW3VdID0gaVt1XTsKICAgICAgICAgICAgICAgIHJldHVybiBjCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHIodCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhudWxsID09PSB0IHx8IHZvaWQgMCA9PT0gdCA/ICIiIDogdCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaSh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdCA9IHIodCksIGwudGVzdCh0KSA/IHQucmVwbGFjZShvLCAiJmFtcDsiKS5yZXBsYWNlKGEsICImbHQ7IikucmVwbGFjZShzLCAiJmd0OyIpLnJlcGxhY2UodSwgIiYjMzk7IikucmVwbGFjZShjLCAiJnF1b3Q7IikgOiB0CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdC5UZW1wbGF0ZSA9IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgIHQgPSB0IHx8IHt9LCB0aGlzLnIgPSB0LmNvZGUgfHwgdGhpcy5yLCB0aGlzLmMgPSBuLCB0aGlzLm9wdGlvbnMgPSByIHx8IHt9LCB0aGlzLnRleHQgPSBlIHx8ICIiLCB0aGlzLnBhcnRpYWxzID0gdC5wYXJ0aWFscyB8fCB7fSwgdGhpcy5zdWJzID0gdC5zdWJzIHx8IHt9LCB0aGlzLmJ1ZiA9ICIiCiAgICAgICAgICAgIH0sIHQuVGVtcGxhdGUucHJvdG90eXBlID0gewogICAgICAgICAgICAgICAgcjogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAiIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHY6IGksCiAgICAgICAgICAgICAgICB0OiByLAogICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmkoW3RdLCBlIHx8IHt9LCBuKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJpOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucih0LCBlLCBuKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGVwOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzLnBhcnRpYWxzW3RdLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gZVtyLm5hbWVdOwogICAgICAgICAgICAgICAgICAgIGlmIChyLmluc3RhbmNlICYmIHIuYmFzZSA9PSBpKSByZXR1cm4gci5pbnN0YW5jZTsKICAgICAgICAgICAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmMpIHRocm93IG5ldyBFcnJvcigiTm8gY29tcGlsZXIgYXZhaWxhYmxlLiIpOwogICAgICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5jLmNvbXBpbGUoaSwgdGhpcy5vcHRpb25zKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoIWkpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcnRpYWxzW3RdLmJhc2UgPSBpLCByLnN1YnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZS5zdGFja1RleHQgfHwgKGUuc3RhY2tUZXh0ID0ge30pOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGtleSBpbiByLnN1YnMpIGUuc3RhY2tUZXh0W2tleV0gfHwgKGUuc3RhY2tUZXh0W2tleV0gPSB2b2lkIDAgIT09IHRoaXMuYWN0aXZlU3ViICYmIGUuc3RhY2tUZXh0W3RoaXMuYWN0aXZlU3ViXSA/IGUuc3RhY2tUZXh0W3RoaXMuYWN0aXZlU3ViXSA6IHRoaXMudGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBuKGksIHIuc3Vicywgci5wYXJ0aWFscywgdGhpcy5zdGFja1N1YnMsIHRoaXMuc3RhY2tQYXJ0aWFscywgZS5zdGFja1RleHQpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnRpYWxzW3RdLmluc3RhbmNlID0gaSwgaQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJwOiBmdW5jdGlvbih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmVwKHQsIG4pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBpID8gaS5yaShlLCBuLCByKSA6ICIiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcnM6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRbdC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICBpZiAoIWYocikpIHJldHVybiB2b2lkIG4odCwgZSwgdGhpcyk7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByLmxlbmd0aDsgaSsrKSB0LnB1c2gocltpXSksIG4odCwgZSwgdGhpcyksIHQucG9wKCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzOiBmdW5jdGlvbih0LCBlLCBuLCByLCBpLCBvLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkgJiYgMCA9PT0gdC5sZW5ndGggPyAhMSA6ICgiZnVuY3Rpb24iID09IHR5cGVvZiB0ICYmICh0ID0gdGhpcy5tcyh0LCBlLCBuLCByLCBpLCBvLCBhKSksIHMgPSAhIXQsICFyICYmIHMgJiYgZSAmJiBlLnB1c2goIm9iamVjdCIgPT0gdHlwZW9mIHQgPyB0IDogZVtlLmxlbmd0aCAtIDFdKSwgcykKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkOiBmdW5jdGlvbih0LCBuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG8sIGEgPSB0LnNwbGl0KCIuIiksCiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB0aGlzLmYoYVswXSwgbiwgciwgaSksCiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB0aGlzLm9wdGlvbnMubW9kZWxHZXQsCiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGlmICgiLiIgPT09IHQgJiYgZihuW24ubGVuZ3RoIC0gMl0pKSBzID0gbltuLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IDE7IGwgPCBhLmxlbmd0aDsgbCsrKSBvID0gZShhW2xdLCBzLCB1KSwgdm9pZCAwICE9PSBvID8gKGMgPSBzLCBzID0gbykgOiBzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgJiYgIXMgPyAhMSA6IChpIHx8ICJmdW5jdGlvbiIgIT0gdHlwZW9mIHMgfHwgKG4ucHVzaChjKSwgcyA9IHRoaXMubXYocywgbiwgciksIG4ucG9wKCkpLCBzKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGY6IGZ1bmN0aW9uKHQsIG4sIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBvID0gITEsIGEgPSBudWxsLCBzID0gITEsIHUgPSB0aGlzLm9wdGlvbnMubW9kZWxHZXQsIGMgPSBuLmxlbmd0aCAtIDE7IGMgPj0gMDsgYy0tKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSA9IG5bY10sIG8gPSBlKHQsIGEsIHUpLCB2b2lkIDAgIT09IG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcyA/IChpIHx8ICJmdW5jdGlvbiIgIT0gdHlwZW9mIG8gfHwgKG8gPSB0aGlzLm12KG8sIG4sIHIpKSwgbykgOiBpID8gITEgOiAiIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxzOiBmdW5jdGlvbih0LCBlLCBuLCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB0aGlzLm9wdGlvbnMuZGVsaW1pdGVyczsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmRlbGltaXRlcnMgPSBvLCB0aGlzLmIodGhpcy5jdChyKHQuY2FsbChlLCBpKSksIGUsIG4pKSwgdGhpcy5vcHRpb25zLmRlbGltaXRlcnMgPSBhLCAhMQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGN0OiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXNhYmxlTGFtYmRhKSB0aHJvdyBuZXcgRXJyb3IoIkxhbWJkYSBmZWF0dXJlcyBkaXNhYmxlZC4iKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jLmNvbXBpbGUodCwgdGhpcy5vcHRpb25zKS5yZW5kZXIoZSwgbikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBiOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWYgKz0gdAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZsOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuYnVmOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZiA9ICIiLCB0CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbXM6IGZ1bmN0aW9uKHQsIGUsIG4sIHIsIGksIG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcywgdSA9IGVbZS5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHQuY2FsbCh1KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgYyA/IHIgPyAhMCA6IChzID0gdGhpcy5hY3RpdmVTdWIgJiYgdGhpcy5zdWJzVGV4dCAmJiB0aGlzLnN1YnNUZXh0W3RoaXMuYWN0aXZlU3ViXSA/IHRoaXMuc3Vic1RleHRbdGhpcy5hY3RpdmVTdWJdIDogdGhpcy50ZXh0LCB0aGlzLmxzKGMsIHUsIG4sIHMuc3Vic3RyaW5nKGksIG8pLCBhKSkgOiBjCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbXY6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGVbZS5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHQuY2FsbChpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgbyA/IHRoaXMuY3QocihvLmNhbGwoaSkpLCBpLCBuKSA6IG8KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdWI6IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuc3Vic1t0XTsKICAgICAgICAgICAgICAgICAgICBpICYmICh0aGlzLmFjdGl2ZVN1YiA9IHQsIGkoZSwgbiwgdGhpcywgciksIHRoaXMuYWN0aXZlU3ViID0gITEpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBvID0gLyYvZywKICAgICAgICAgICAgICAgIGEgPSAvPC9nLAogICAgICAgICAgICAgICAgcyA9IC8+L2csCiAgICAgICAgICAgICAgICB1ID0gL1wnL2csCiAgICAgICAgICAgICAgICBjID0gL1wiL2csCiAgICAgICAgICAgICAgICBsID0gL1smPD5cIlwnXS8sCiAgICAgICAgICAgICAgICBmID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJbb2JqZWN0IEFycmF5XSIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KQogICAgICAgICAgICAgICAgfQogICAgICAgIH0oInVuZGVmaW5lZCIgIT0gdHlwZW9mIG4gPyBuIDogcikKICAgIH0sIHt9XSwKICAgIDE1OiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICEgZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAib2JqZWN0IiA9PSB0eXBlb2YgZSAmJiAib2JqZWN0IiA9PSB0eXBlb2YgZS5leHBvcnRzID8gZS5leHBvcnRzID0gdC5kb2N1bWVudCA/IG4odCwgITApIDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgaWYgKCF0LmRvY3VtZW50KSB0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKTsKICAgICAgICAgICAgICAgIHJldHVybiBuKHQpCiAgICAgICAgICAgIH0gOiBuKHQpCiAgICAgICAgfSgidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICBmdW5jdGlvbiBuKHQpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gImxlbmd0aCIgaW4gdCAmJiB0Lmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICBuID0gWi50eXBlKHQpOwogICAgICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT09IG4gfHwgWi5pc1dpbmRvdyh0KSA/ICExIDogMSA9PT0gdC5ub2RlVHlwZSAmJiBlID8gITAgOiAiYXJyYXkiID09PSBuIHx8IDAgPT09IGUgfHwgIm51bWJlciIgPT0gdHlwZW9mIGUgJiYgZSA+IDAgJiYgZSAtIDEgaW4gdAogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiByKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIGlmIChaLmlzRnVuY3Rpb24oZSkpIHJldHVybiBaLmdyZXAodCwgZnVuY3Rpb24odCwgcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhIWUuY2FsbCh0LCByLCB0KSAhPT0gbgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAoZS5ub2RlVHlwZSkgcmV0dXJuIFouZ3JlcCh0LCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IGUgIT09IG4KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0LnRlc3QoZSkpIHJldHVybiBaLmZpbHRlcihlLCB0LCBuKTsKICAgICAgICAgICAgICAgICAgICBlID0gWi5maWx0ZXIoZSwgdCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBaLmdyZXAodCwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBWLmNhbGwoZSwgdCkgPj0gMCAhPT0gbgogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaSh0LCBlKSB7CiAgICAgICAgICAgICAgICBmb3IgKDsKICAgICAgICAgICAgICAgICAgICAodCA9IHRbZV0pICYmIDEgIT09IHQubm9kZVR5cGU7KTsKICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIG8odCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSBkdFt0XSA9IHt9OwogICAgICAgICAgICAgICAgcmV0dXJuIFouZWFjaCh0Lm1hdGNoKGh0KSB8fCBbXSwgZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgIGVbbl0gPSAhMAogICAgICAgICAgICAgICAgfSksIGUKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gYSgpIHsKICAgICAgICAgICAgICAgIFEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGEsICExKSwgdC5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIiwgYSwgITEpLCBaLnJlYWR5KCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcygpIHsKICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmNhY2hlID0ge30sIDAsIHsKICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge30KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwgdGhpcy5leHBhbmRvID0gWi5leHBhbmRvICsgcy51aWQrKwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiB1KHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByOwogICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbiAmJiAxID09PSB0Lm5vZGVUeXBlKQogICAgICAgICAgICAgICAgICAgIGlmIChyID0gImRhdGEtIiArIGUucmVwbGFjZSh4dCwgIi0kMSIpLnRvTG93ZXJDYXNlKCksIG4gPSB0LmdldEF0dHJpYnV0ZShyKSwgInN0cmluZyIgPT0gdHlwZW9mIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAidHJ1ZSIgPT09IG4gPyAhMCA6ICJmYWxzZSIgPT09IG4gPyAhMSA6ICJudWxsIiA9PT0gbiA/IG51bGwgOiArbiArICIiID09PSBuID8gK24gOiBidC50ZXN0KG4pID8gWi5wYXJzZUpTT04obikgOiBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGkpIHt9CiAgICAgICAgICAgICAgICAgICAgICAgIG10LnNldCh0LCBlLCBuKQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBuID0gdm9pZCAwOwogICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gYygpIHsKICAgICAgICAgICAgICAgIHJldHVybiAhMAogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBsKCkgewogICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGYoKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBRLmFjdGl2ZUVsZW1lbnQKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHt9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHAodCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIFoubm9kZU5hbWUodCwgInRhYmxlIikgJiYgWi5ub2RlTmFtZSgxMSAhPT0gZS5ub2RlVHlwZSA/IGUgOiBlLmZpcnN0Q2hpbGQsICJ0ciIpID8gdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXSB8fCB0LmFwcGVuZENoaWxkKHQub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKSA6IHQKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaCh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdC50eXBlID0gKG51bGwgIT09IHQuZ2V0QXR0cmlidXRlKCJ0eXBlIikpICsgIi8iICsgdC50eXBlLCB0CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGQodCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSBQdC5leGVjKHQudHlwZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZSA/IHQudHlwZSA9IGVbMV0gOiB0LnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpLCB0CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGcodCwgZSkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIHIgPSB0Lmxlbmd0aDsgciA+IG47IG4rKykgeXQuc2V0KHRbbl0sICJnbG9iYWxFdmFsIiwgIWUgfHwgeXQuZ2V0KGVbbl0sICJnbG9iYWxFdmFsIikpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHYodCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG4sIHIsIGksIG8sIGEsIHMsIHUsIGM7CiAgICAgICAgICAgICAgICBpZiAoMSA9PT0gZS5ub2RlVHlwZSkgewogICAgICAgICAgICAgICAgICAgIGlmICh5dC5oYXNEYXRhKHQpICYmIChvID0geXQuYWNjZXNzKHQpLCBhID0geXQuc2V0KGUsIG8pLCBjID0gby5ldmVudHMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhLmhhbmRsZSwgYS5ldmVudHMgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpIGluIGMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG4gPSAwLCByID0gY1tpXS5sZW5ndGg7IHIgPiBuOyBuKyspIFouZXZlbnQuYWRkKGUsIGksIGNbaV1bbl0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIG10Lmhhc0RhdGEodCkgJiYgKHMgPSBtdC5hY2Nlc3ModCksIHUgPSBaLmV4dGVuZCh7fSwgcyksIG10LnNldChlLCB1KSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24geSh0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPyB0LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUgfHwgIioiKSA6IHQucXVlcnlTZWxlY3RvckFsbCA/IHQucXVlcnlTZWxlY3RvckFsbChlIHx8ICIqIikgOiBbXTsKICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IGUgfHwgZSAmJiBaLm5vZGVOYW1lKHQsIGUpID8gWi5tZXJnZShbdF0sIG4pIDogbgogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBtKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgImlucHV0IiA9PT0gbiAmJiBUdC50ZXN0KHQudHlwZSkgPyBlLmNoZWNrZWQgPSB0LmNoZWNrZWQgOiAoImlucHV0IiA9PT0gbiB8fCAidGV4dGFyZWEiID09PSBuKSAmJiAoZS5kZWZhdWx0VmFsdWUgPSB0LmRlZmF1bHRWYWx1ZSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gYihlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciwgaSA9IFoobi5jcmVhdGVFbGVtZW50KGUpKS5hcHBlbmRUbyhuLmJvZHkpLAogICAgICAgICAgICAgICAgICAgIG8gPSB0LmdldERlZmF1bHRDb21wdXRlZFN0eWxlICYmIChyID0gdC5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZShpWzBdKSkgPyByLmRpc3BsYXkgOiBaLmNzcyhpWzBdLCAiZGlzcGxheSIpOwogICAgICAgICAgICAgICAgcmV0dXJuIGkuZGV0YWNoKCksIG8KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24geCh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IFEsCiAgICAgICAgICAgICAgICAgICAgbiA9IE10W3RdOwogICAgICAgICAgICAgICAgcmV0dXJuIG4gfHwgKG4gPSBiKHQsIGUpLCAibm9uZSIgIT09IG4gJiYgbiB8fCAoSHQgPSAoSHQgfHwgWigiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIpKS5hcHBlbmRUbyhlLmRvY3VtZW50RWxlbWVudCksIGUgPSBIdFswXS5jb250ZW50RG9jdW1lbnQsIGUud3JpdGUoKSwgZS5jbG9zZSgpLCBuID0gYih0LCBlKSwgSHQuZGV0YWNoKCkpLCBNdFt0XSA9IG4pLCBuCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHcodCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHIsIGksIG8sIGEsIHMgPSB0LnN0eWxlOwogICAgICAgICAgICAgICAgcmV0dXJuIG4gPSBuIHx8IFV0KHQpLCBuICYmIChhID0gbi5nZXRQcm9wZXJ0eVZhbHVlKGUpIHx8IG5bZV0pLCBuICYmICgiIiAhPT0gYSB8fCBaLmNvbnRhaW5zKHQub3duZXJEb2N1bWVudCwgdCkgfHwgKGEgPSBaLnN0eWxlKHQsIGUpKSwgQnQudGVzdChhKSAmJiBGdC50ZXN0KGUpICYmIChyID0gcy53aWR0aCwgaSA9IHMubWluV2lkdGgsIG8gPSBzLm1heFdpZHRoLCBzLm1pbldpZHRoID0gcy5tYXhXaWR0aCA9IHMud2lkdGggPSBhLCBhID0gbi53aWR0aCwgcy53aWR0aCA9IHIsIHMubWluV2lkdGggPSBpLCBzLm1heFdpZHRoID0gbykpLCB2b2lkIDAgIT09IGEgPyBhICsgIiIgOiBhCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIF8odCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCgpID8gdm9pZCBkZWxldGUgdGhpcy5nZXQgOiAodGhpcy5nZXQgPSBlKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBrKHQsIGUpIHsKICAgICAgICAgICAgICAgIGlmIChlIGluIHQpIHJldHVybiBlOwogICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IGVbMF0udG9VcHBlckNhc2UoKSArIGUuc2xpY2UoMSksIHIgPSBlLCBpID0gSnQubGVuZ3RoOyBpLS07KQogICAgICAgICAgICAgICAgICAgIGlmIChlID0gSnRbaV0gKyBuLCBlIGluIHQpIHJldHVybiBlOwogICAgICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gVCh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IHp0LmV4ZWMoZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gciA/IE1hdGgubWF4KDAsIHJbMV0gLSAobiB8fCAwKSkgKyAoclsyXSB8fCAicHgiKSA6IGUKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gRSh0LCBlLCBuLCByLCBpKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBvID0gbiA9PT0gKHIgPyAiYm9yZGVyIiA6ICJjb250ZW50IikgPyA0IDogIndpZHRoIiA9PT0gZSA/IDEgOiAwLCBhID0gMDsgNCA+IG87IG8gKz0gMikgIm1hcmdpbiIgPT09IG4gJiYgKGEgKz0gWi5jc3ModCwgbiArIF90W29dLCAhMCwgaSkpLCByID8gKCJjb250ZW50IiA9PT0gbiAmJiAoYSAtPSBaLmNzcyh0LCAicGFkZGluZyIgKyBfdFtvXSwgITAsIGkpKSwgIm1hcmdpbiIgIT09IG4gJiYgKGEgLT0gWi5jc3ModCwgImJvcmRlciIgKyBfdFtvXSArICJXaWR0aCIsICEwLCBpKSkpIDogKGEgKz0gWi5jc3ModCwgInBhZGRpbmciICsgX3Rbb10sICEwLCBpKSwgInBhZGRpbmciICE9PSBuICYmIChhICs9IFouY3NzKHQsICJib3JkZXIiICsgX3Rbb10gKyAiV2lkdGgiLCAhMCwgaSkpKTsKICAgICAgICAgICAgICAgIHJldHVybiBhCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGoodCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHIgPSAhMCwKICAgICAgICAgICAgICAgICAgICBpID0gIndpZHRoIiA9PT0gZSA/IHQub2Zmc2V0V2lkdGggOiB0Lm9mZnNldEhlaWdodCwKICAgICAgICAgICAgICAgICAgICBvID0gVXQodCksCiAgICAgICAgICAgICAgICAgICAgYSA9ICJib3JkZXItYm94IiA9PT0gWi5jc3ModCwgImJveFNpemluZyIsICExLCBvKTsKICAgICAgICAgICAgICAgIGlmICgwID49IGkgfHwgbnVsbCA9PSBpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPSB3KHQsIGUsIG8pLCAoMCA+IGkgfHwgbnVsbCA9PSBpKSAmJiAoaSA9IHQuc3R5bGVbZV0pLCBCdC50ZXN0KGkpKSByZXR1cm4gaTsKICAgICAgICAgICAgICAgICAgICByID0gYSAmJiAoWS5ib3hTaXppbmdSZWxpYWJsZSgpIHx8IGkgPT09IHQuc3R5bGVbZV0pLCBpID0gcGFyc2VGbG9hdChpKSB8fCAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaSArIEUodCwgZSwgbiB8fCAoYSA/ICJib3JkZXIiIDogImNvbnRlbnQiKSwgciwgbykgKyAicHgiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIEModCwgZSkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgbiwgciwgaSwgbyA9IFtdLCBhID0gMCwgcyA9IHQubGVuZ3RoOyBzID4gYTsgYSsrKSByID0gdFthXSwgci5zdHlsZSAmJiAob1thXSA9IHl0LmdldChyLCAib2xkZGlzcGxheSIpLCBuID0gci5zdHlsZS5kaXNwbGF5LCBlID8gKG9bYV0gfHwgIm5vbmUiICE9PSBuIHx8IChyLnN0eWxlLmRpc3BsYXkgPSAiIiksICIiID09PSByLnN0eWxlLmRpc3BsYXkgJiYga3QocikgJiYgKG9bYV0gPSB5dC5hY2Nlc3MociwgIm9sZGRpc3BsYXkiLCB4KHIubm9kZU5hbWUpKSkpIDogKGkgPSBrdChyKSwgIm5vbmUiID09PSBuICYmIGkgfHwgeXQuc2V0KHIsICJvbGRkaXNwbGF5IiwgaSA/IG4gOiBaLmNzcyhyLCAiZGlzcGxheSIpKSkpOwogICAgICAgICAgICAgICAgZm9yIChhID0gMDsgcyA+IGE7IGErKykgciA9IHRbYV0sIHIuc3R5bGUgJiYgKGUgJiYgIm5vbmUiICE9PSByLnN0eWxlLmRpc3BsYXkgJiYgIiIgIT09IHIuc3R5bGUuZGlzcGxheSB8fCAoci5zdHlsZS5kaXNwbGF5ID0gZSA/IG9bYV0gfHwgIiIgOiAibm9uZSIpKTsKICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIFModCwgZSwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTLnByb3RvdHlwZS5pbml0KHQsIGUsIG4sIHIsIGkpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIEEoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBZdCA9IHZvaWQgMAogICAgICAgICAgICAgICAgfSksIFl0ID0gWi5ub3coKQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBOKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuLCByID0gMCwKICAgICAgICAgICAgICAgICAgICBpID0gewogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHQKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZm9yIChlID0gZSA/IDEgOiAwOyA0ID4gcjsgciArPSAyIC0gZSkgbiA9IF90W3JdLCBpWyJtYXJnaW4iICsgbl0gPSBpWyJwYWRkaW5nIiArIG5dID0gdDsKICAgICAgICAgICAgICAgIHJldHVybiBlICYmIChpLm9wYWNpdHkgPSBpLndpZHRoID0gdCksIGkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gUih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciByLCBpID0gKG5lW2VdIHx8IFtdKS5jb25jYXQobmVbIioiXSksIG8gPSAwLCBhID0gaS5sZW5ndGg7IGEgPiBvOyBvKyspCiAgICAgICAgICAgICAgICAgICAgaWYgKHIgPSBpW29dLmNhbGwobiwgZSwgdCkpIHJldHVybiByCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIEkodCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHIsIGksIG8sIGEsIHMsIHUsIGMsIGwsIGYgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgIHAgPSB7fSwKICAgICAgICAgICAgICAgICAgICBoID0gdC5zdHlsZSwKICAgICAgICAgICAgICAgICAgICBkID0gdC5ub2RlVHlwZSAmJiBrdCh0KSwKICAgICAgICAgICAgICAgICAgICBnID0geXQuZ2V0KHQsICJmeHNob3ciKTsKICAgICAgICAgICAgICAgIG4ucXVldWUgfHwgKHMgPSBaLl9xdWV1ZUhvb2tzKHQsICJmeCIpLCBudWxsID09IHMudW5xdWV1ZWQgJiYgKHMudW5xdWV1ZWQgPSAwLCB1ID0gcy5lbXB0eS5maXJlLCBzLmVtcHR5LmZpcmUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBzLnVucXVldWVkIHx8IHUoKQogICAgICAgICAgICAgICAgfSksIHMudW5xdWV1ZWQrKywgZi5hbHdheXMoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgZi5hbHdheXMoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMudW5xdWV1ZWQtLSwgWi5xdWV1ZSh0LCAiZngiKS5sZW5ndGggfHwgcy5lbXB0eS5maXJlKCkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSkpLCAxID09PSB0Lm5vZGVUeXBlICYmICgiaGVpZ2h0IiBpbiBlIHx8ICJ3aWR0aCIgaW4gZSkgJiYgKG4ub3ZlcmZsb3cgPSBbaC5vdmVyZmxvdywgaC5vdmVyZmxvd1gsIGgub3ZlcmZsb3dZXSwgYyA9IFouY3NzKHQsICJkaXNwbGF5IiksIGwgPSAibm9uZSIgPT09IGMgPyB5dC5nZXQodCwgIm9sZGRpc3BsYXkiKSB8fCB4KHQubm9kZU5hbWUpIDogYywgImlubGluZSIgPT09IGwgJiYgIm5vbmUiID09PSBaLmNzcyh0LCAiZmxvYXQiKSAmJiAoaC5kaXNwbGF5ID0gImlubGluZS1ibG9jayIpKSwgbi5vdmVyZmxvdyAmJiAoaC5vdmVyZmxvdyA9ICJoaWRkZW4iLCBmLmFsd2F5cyhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBoLm92ZXJmbG93ID0gbi5vdmVyZmxvd1swXSwgaC5vdmVyZmxvd1ggPSBuLm92ZXJmbG93WzFdLCBoLm92ZXJmbG93WSA9IG4ub3ZlcmZsb3dbMl0KICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIGZvciAociBpbiBlKQogICAgICAgICAgICAgICAgICAgIGlmIChpID0gZVtyXSwgS3QuZXhlYyhpKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsZXRlIGVbcl0sIG8gPSBvIHx8ICJ0b2dnbGUiID09PSBpLCBpID09PSAoZCA/ICJoaWRlIiA6ICJzaG93IikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgic2hvdyIgIT09IGkgfHwgIWcgfHwgdm9pZCAwID09PSBnW3JdKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAhMAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHBbcl0gPSBnICYmIGdbcl0gfHwgWi5zdHlsZSh0LCByKQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBjID0gdm9pZCAwOwogICAgICAgICAgICAgICAgaWYgKFouaXNFbXB0eU9iamVjdChwKSkgImlubGluZSIgPT09ICgibm9uZSIgPT09IGMgPyB4KHQubm9kZU5hbWUpIDogYykgJiYgKGguZGlzcGxheSA9IGMpOwogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZyA/ICJoaWRkZW4iIGluIGcgJiYgKGQgPSBnLmhpZGRlbikgOiBnID0geXQuYWNjZXNzKHQsICJmeHNob3ciLCB7fSksIG8gJiYgKGcuaGlkZGVuID0gIWQpLCBkID8gWih0KS5zaG93KCkgOiBmLmRvbmUoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFoodCkuaGlkZSgpCiAgICAgICAgICAgICAgICAgICAgfSksIGYuZG9uZShmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHl0LnJlbW92ZSh0LCAiZnhzaG93Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZSBpbiBwKSBaLnN0eWxlKHQsIGUsIHBbZV0pCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgZm9yIChyIGluIHApIGEgPSBSKGQgPyBnW3JdIDogMCwgciwgZiksIHIgaW4gZyB8fCAoZ1tyXSA9IGEuc3RhcnQsIGQgJiYgKGEuZW5kID0gYS5zdGFydCwgYS5zdGFydCA9ICJ3aWR0aCIgPT09IHIgfHwgImhlaWdodCIgPT09IHIgPyAxIDogMCkpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIE8odCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG4sIHIsIGksIG8sIGE7CiAgICAgICAgICAgICAgICBmb3IgKG4gaW4gdCkKICAgICAgICAgICAgICAgICAgICBpZiAociA9IFouY2FtZWxDYXNlKG4pLCBpID0gZVtyXSwgbyA9IHRbbl0sIFouaXNBcnJheShvKSAmJiAoaSA9IG9bMV0sIG8gPSB0W25dID0gb1swXSksIG4gIT09IHIgJiYgKHRbcl0gPSBvLCBkZWxldGUgdFtuXSksIGEgPSBaLmNzc0hvb2tzW3JdLCBhICYmICJleHBhbmQiIGluIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGEuZXhwYW5kKG8pLCBkZWxldGUgdFtyXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChuIGluIG8pIG4gaW4gdCB8fCAodFtuXSA9IG9bbl0sIGVbbl0gPSBpKQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBlW3JdID0gaQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBMKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByLCBpLCBvID0gMCwKICAgICAgICAgICAgICAgICAgICBhID0gZWUubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgIHMgPSBaLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdS5lbGVtCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgdSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gWXQgfHwgQSgpLCBuID0gTWF0aC5tYXgoMCwgYy5zdGFydFRpbWUgKyBjLmR1cmF0aW9uIC0gZSksIHIgPSBuIC8gYy5kdXJhdGlvbiB8fCAwLCBvID0gMSAtIHIsIGEgPSAwLCB1ID0gYy50d2VlbnMubGVuZ3RoOyB1ID4gYTsgYSsrKSBjLnR3ZWVuc1thXS5ydW4obyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzLm5vdGlmeVdpdGgodCwgW2MsIG8sIG5dKSwgMSA+IG8gJiYgdSA/IG4gOiAocy5yZXNvbHZlV2l0aCh0LCBbY10pLCAhMSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGMgPSBzLnByb21pc2UoewogICAgICAgICAgICAgICAgICAgICAgICBlbGVtOiB0LAogICAgICAgICAgICAgICAgICAgICAgICBwcm9wczogWi5leHRlbmQoe30sIGUpLAogICAgICAgICAgICAgICAgICAgICAgICBvcHRzOiBaLmV4dGVuZCghMCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lhbEVhc2luZzoge30KICAgICAgICAgICAgICAgICAgICAgICAgfSwgbiksCiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsUHJvcGVydGllczogZSwKICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxPcHRpb25zOiBuLAogICAgICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWU6IFl0IHx8IEEoKSwKICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IG4uZHVyYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVR3ZWVuOiBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IFouVHdlZW4odCwgYy5vcHRzLCBlLCBuLCBjLm9wdHMuc3BlY2lhbEVhc2luZ1tlXSB8fCBjLm9wdHMuZWFzaW5nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjLnR3ZWVucy5wdXNoKHIpLCByCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZSA/IGMudHdlZW5zLmxlbmd0aCA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSkgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAhMDsgciA+IG47IG4rKykgYy50d2VlbnNbbl0ucnVuKDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPyBzLnJlc29sdmVXaXRoKHQsIFtjLCBlXSkgOiBzLnJlamVjdFdpdGgodCwgW2MsIGVdKSwgdGhpcwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgbCA9IGMucHJvcHM7CiAgICAgICAgICAgICAgICBmb3IgKE8obCwgYy5vcHRzLnNwZWNpYWxFYXNpbmcpOyBhID4gbzsgbysrKQogICAgICAgICAgICAgICAgICAgIGlmIChyID0gZWVbb10uY2FsbChjLCB0LCBsLCBjLm9wdHMpKSByZXR1cm4gcjsKICAgICAgICAgICAgICAgIHJldHVybiBaLm1hcChsLCBSLCBjKSwgWi5pc0Z1bmN0aW9uKGMub3B0cy5zdGFydCkgJiYgYy5vcHRzLnN0YXJ0LmNhbGwodCwgYyksIFouZngudGltZXIoWi5leHRlbmQodSwgewogICAgICAgICAgICAgICAgICAgIGVsZW06IHQsCiAgICAgICAgICAgICAgICAgICAgYW5pbTogYywKICAgICAgICAgICAgICAgICAgICBxdWV1ZTogYy5vcHRzLnF1ZXVlCiAgICAgICAgICAgICAgICB9KSksIGMucHJvZ3Jlc3MoYy5vcHRzLnByb2dyZXNzKS5kb25lKGMub3B0cy5kb25lLCBjLm9wdHMuY29tcGxldGUpLmZhaWwoYy5vcHRzLmZhaWwpLmFsd2F5cyhjLm9wdHMuYWx3YXlzKQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBEKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgIT0gdHlwZW9mIGUgJiYgKG4gPSBlLCBlID0gIioiKTsKICAgICAgICAgICAgICAgICAgICB2YXIgciwgaSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLnRvTG93ZXJDYXNlKCkubWF0Y2goaHQpIHx8IFtdOwogICAgICAgICAgICAgICAgICAgIGlmIChaLmlzRnVuY3Rpb24obikpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyByID0gb1tpKytdOykgIisiID09PSByWzBdID8gKHIgPSByLnNsaWNlKDEpIHx8ICIqIiwgKHRbcl0gPSB0W3JdIHx8IFtdKS51bnNoaWZ0KG4pKSA6ICh0W3JdID0gdFtyXSB8fCBbXSkucHVzaChuKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBQKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGkocykgewogICAgICAgICAgICAgICAgICAgIHZhciB1OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBvW3NdID0gITAsIFouZWFjaCh0W3NdIHx8IFtdLCBmdW5jdGlvbih0LCBzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gcyhlLCBuLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJzdHJpbmciICE9IHR5cGVvZiBjIHx8IGEgfHwgb1tjXSA/IGEgPyAhKHUgPSBjKSA6IHZvaWQgMCA6IChlLmRhdGFUeXBlcy51bnNoaWZ0KGMpLCBpKGMpLCAhMSkKICAgICAgICAgICAgICAgICAgICB9KSwgdQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG8gPSB7fSwKICAgICAgICAgICAgICAgICAgICBhID0gdCA9PT0gYmU7CiAgICAgICAgICAgICAgICByZXR1cm4gaShlLmRhdGFUeXBlc1swXSkgfHwgIW9bIioiXSAmJiBpKCIqIikKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gJCh0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiwgciwgaSA9IFouYWpheFNldHRpbmdzLmZsYXRPcHRpb25zIHx8IHt9OwogICAgICAgICAgICAgICAgZm9yIChuIGluIGUpIHZvaWQgMCAhPT0gZVtuXSAmJiAoKGlbbl0gPyB0IDogciB8fCAociA9IHt9KSlbbl0gPSBlW25dKTsKICAgICAgICAgICAgICAgIHJldHVybiByICYmIFouZXh0ZW5kKCEwLCB0LCByKSwgdAogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBxKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIsIGksIG8sIGEsIHMgPSB0LmNvbnRlbnRzLCB1ID0gdC5kYXRhVHlwZXM7CiAgICAgICAgICAgICAgICAgICAgIioiID09PSB1WzBdOykgdS5zaGlmdCgpLCB2b2lkIDAgPT09IHIgJiYgKHIgPSB0Lm1pbWVUeXBlIHx8IGUuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTsKICAgICAgICAgICAgICAgIGlmIChyKQogICAgICAgICAgICAgICAgICAgIGZvciAoaSBpbiBzKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc1tpXSAmJiBzW2ldLnRlc3QocikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUudW5zaGlmdChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh1WzBdIGluIG4pIG8gPSB1WzBdOwogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChpIGluIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1WzBdIHx8IHQuY29udmVydGVyc1tpICsgIiAiICsgdVswXV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBhIHx8IChhID0gaSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbyA9IG8gfHwgYQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG8gPyAobyAhPT0gdVswXSAmJiB1LnVuc2hpZnQobyksIG5bb10pIDogdm9pZCAwCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIEgodCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgdmFyIGksIG8sIGEsIHMsIHUsIGMgPSB7fSwKICAgICAgICAgICAgICAgICAgICBsID0gdC5kYXRhVHlwZXMuc2xpY2UoKTsKICAgICAgICAgICAgICAgIGlmIChsWzFdKQogICAgICAgICAgICAgICAgICAgIGZvciAoYSBpbiB0LmNvbnZlcnRlcnMpIGNbYS50b0xvd2VyQ2FzZSgpXSA9IHQuY29udmVydGVyc1thXTsKICAgICAgICAgICAgICAgIGZvciAobyA9IGwuc2hpZnQoKTsgbzspCiAgICAgICAgICAgICAgICAgICAgaWYgKHQucmVzcG9uc2VGaWVsZHNbb10gJiYgKG5bdC5yZXNwb25zZUZpZWxkc1tvXV0gPSBlKSwgIXUgJiYgciAmJiB0LmRhdGFGaWx0ZXIgJiYgKGUgPSB0LmRhdGFGaWx0ZXIoZSwgdC5kYXRhVHlwZSkpLCB1ID0gbywgbyA9IGwuc2hpZnQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCIqIiA9PT0gbykgbyA9IHU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCIqIiAhPT0gdSAmJiB1ICE9PSBvKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGEgPSBjW3UgKyAiICIgKyBvXSB8fCBjWyIqICIgKyBvXSwgIWEpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSBpbiBjKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgPSBpLnNwbGl0KCIgIiksIHNbMV0gPT09IG8gJiYgKGEgPSBjW3UgKyAiICIgKyBzWzBdXSB8fCBjWyIqICIgKyBzWzBdXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID09PSAhMCA/IGEgPSBjW2ldIDogY1tpXSAhPT0gITAgJiYgKG8gPSBzWzBdLCBsLnVuc2hpZnQoc1sxXSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGEgIT09ICEwKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSAmJiB0WyJ0aHJvd3MiXSkgZSA9IGEoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBhKGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6ICJwYXJzZXJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGEgPyBmIDogIk5vIGNvbnZlcnNpb24gZnJvbSAiICsgdSArICIgdG8gIiArIG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IGUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gTSh0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICB2YXIgaTsKICAgICAgICAgICAgICAgIGlmIChaLmlzQXJyYXkoZSkpIFouZWFjaChlLCBmdW5jdGlvbihlLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgbiB8fCBUZS50ZXN0KHQpID8gcih0LCBpKSA6IE0odCArICJbIiArICgib2JqZWN0IiA9PSB0eXBlb2YgaSA/IGUgOiAiIikgKyAiXSIsIGksIG4sIHIpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKG4gfHwgIm9iamVjdCIgIT09IFoudHlwZShlKSkgcih0LCBlKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBmb3IgKGkgaW4gZSkgTSh0ICsgIlsiICsgaSArICJdIiwgZVtpXSwgbiwgcikKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gRih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gWi5pc1dpbmRvdyh0KSA/IHQgOiA5ID09PSB0Lm5vZGVUeXBlICYmIHQuZGVmYXVsdFZpZXcKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgQiA9IFtdLAogICAgICAgICAgICAgICAgVSA9IEIuc2xpY2UsCiAgICAgICAgICAgICAgICBXID0gQi5jb25jYXQsCiAgICAgICAgICAgICAgICB6ID0gQi5wdXNoLAogICAgICAgICAgICAgICAgViA9IEIuaW5kZXhPZiwKICAgICAgICAgICAgICAgIEcgPSB7fSwKICAgICAgICAgICAgICAgIFggPSBHLnRvU3RyaW5nLAogICAgICAgICAgICAgICAgSiA9IEcuaGFzT3duUHJvcGVydHksCiAgICAgICAgICAgICAgICBZID0ge30sCiAgICAgICAgICAgICAgICBRID0gdC5kb2N1bWVudCwKICAgICAgICAgICAgICAgIEsgPSAiMi4xLjQiLAogICAgICAgICAgICAgICAgWiA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFouZm4uaW5pdCh0LCBlKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHR0ID0gL15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLAogICAgICAgICAgICAgICAgZXQgPSAvXi1tcy0vLAogICAgICAgICAgICAgICAgbnQgPSAvLShbXGRhLXpdKS9naSwKICAgICAgICAgICAgICAgIHJ0ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnRvVXBwZXJDYXNlKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIFouZm4gPSBaLnByb3RvdHlwZSA9IHsKICAgICAgICAgICAgICAgIGpxdWVyeTogSywKICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBaLAogICAgICAgICAgICAgICAgc2VsZWN0b3I6ICIiLAogICAgICAgICAgICAgICAgbGVuZ3RoOiAwLAogICAgICAgICAgICAgICAgdG9BcnJheTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFUuY2FsbCh0aGlzKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9IHQgPyAwID4gdCA/IHRoaXNbdCArIHRoaXMubGVuZ3RoXSA6IHRoaXNbdF0gOiBVLmNhbGwodGhpcykKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwdXNoU3RhY2s6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IFoubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLCB0KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wcmV2T2JqZWN0ID0gdGhpcywgZS5jb250ZXh0ID0gdGhpcy5jb250ZXh0LCBlCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZWFjaDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBaLmVhY2godGhpcywgdCwgZSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBtYXA6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoU3RhY2soWi5tYXAodGhpcywgZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5jYWxsKGUsIG4sIGUpCiAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2xpY2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2hTdGFjayhVLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZmlyc3Q6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVxKDApCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbGFzdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXEoLTEpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZXE6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gK3QgKyAoMCA+IHQgPyBlIDogMCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKG4gPj0gMCAmJiBlID4gbiA/IFt0aGlzW25dXSA6IFtdKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGVuZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJldk9iamVjdCB8fCB0aGlzLmNvbnN0cnVjdG9yKG51bGwpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcHVzaDogeiwKICAgICAgICAgICAgICAgIHNvcnQ6IEIuc29ydCwKICAgICAgICAgICAgICAgIHNwbGljZTogQi5zcGxpY2UKICAgICAgICAgICAgfSwgWi5leHRlbmQgPSBaLmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIHQsIGUsIG4sIHIsIGksIG8sIGEgPSBhcmd1bWVudHNbMF0gfHwge30sCiAgICAgICAgICAgICAgICAgICAgcyA9IDEsCiAgICAgICAgICAgICAgICAgICAgdSA9IGFyZ3VtZW50cy5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgYyA9ICExOwogICAgICAgICAgICAgICAgZm9yICgiYm9vbGVhbiIgPT0gdHlwZW9mIGEgJiYgKGMgPSBhLCBhID0gYXJndW1lbnRzW3NdIHx8IHt9LCBzKyspLCAib2JqZWN0IiA9PSB0eXBlb2YgYSB8fCBaLmlzRnVuY3Rpb24oYSkgfHwgKGEgPSB7fSksIHMgPT09IHUgJiYgKGEgPSB0aGlzLCBzLS0pOyB1ID4gczsgcysrKQogICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9ICh0ID0gYXJndW1lbnRzW3NdKSkKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChlIGluIHQpIG4gPSBhW2VdLCByID0gdFtlXSwgYSAhPT0gciAmJiAoYyAmJiByICYmIChaLmlzUGxhaW5PYmplY3QocikgfHwgKGkgPSBaLmlzQXJyYXkocikpKSA/IChpID8gKGkgPSAhMSwgbyA9IG4gJiYgWi5pc0FycmF5KG4pID8gbiA6IFtdKSA6IG8gPSBuICYmIFouaXNQbGFpbk9iamVjdChuKSA/IG4gOiB7fSwgYVtlXSA9IFouZXh0ZW5kKGMsIG8sIHIpKSA6IHZvaWQgMCAhPT0gciAmJiAoYVtlXSA9IHIpKTsKICAgICAgICAgICAgICAgIHJldHVybiBhCiAgICAgICAgICAgIH0sIFouZXh0ZW5kKHsKICAgICAgICAgICAgICAgIGV4cGFuZG86ICJqUXVlcnkiICsgKEsgKyBNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCAiIiksCiAgICAgICAgICAgICAgICBpc1JlYWR5OiAhMCwKICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHQpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbm9vcDogZnVuY3Rpb24oKSB7fSwKICAgICAgICAgICAgICAgIGlzRnVuY3Rpb246IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PT0gWi50eXBlKHQpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheSwKICAgICAgICAgICAgICAgIGlzV2luZG93OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdCAmJiB0ID09PSB0LndpbmRvdwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGlzTnVtZXJpYzogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhWi5pc0FycmF5KHQpICYmIHQgLSBwYXJzZUZsb2F0KHQpICsgMSA+PSAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaXNQbGFpbk9iamVjdDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAib2JqZWN0IiAhPT0gWi50eXBlKHQpIHx8IHQubm9kZVR5cGUgfHwgWi5pc1dpbmRvdyh0KSA/ICExIDogdC5jb25zdHJ1Y3RvciAmJiAhSi5jYWxsKHQuY29uc3RydWN0b3IucHJvdG90eXBlLCAiaXNQcm90b3R5cGVPZiIpID8gITEgOiAhMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGlzRW1wdHlPYmplY3Q6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGUgaW4gdCkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAhMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0ID8gdCArICIiIDogIm9iamVjdCIgPT0gdHlwZW9mIHQgfHwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgdCA/IEdbWC5jYWxsKHQpXSB8fCAib2JqZWN0IiA6IHR5cGVvZiB0CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ2xvYmFsRXZhbDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlLCBuID0gZXZhbDsKICAgICAgICAgICAgICAgICAgICB0ID0gWi50cmltKHQpLCB0ICYmICgxID09PSB0LmluZGV4T2YoInVzZSBzdHJpY3QiKSA/IChlID0gUS5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSwgZS50ZXh0ID0gdCwgUS5oZWFkLmFwcGVuZENoaWxkKGUpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSkpIDogbih0KSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjYW1lbENhc2U6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5yZXBsYWNlKGV0LCAibXMtIikucmVwbGFjZShudCwgcnQpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbm9kZU5hbWU6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5ub2RlTmFtZSAmJiB0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IGUudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGVhY2g6IGZ1bmN0aW9uKHQsIGUsIHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSwgbyA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0Lmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IG4odCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgYSA+IG8gJiYgKGkgPSBlLmFwcGx5KHRbb10sIHIpLCBpICE9PSAhMSk7IG8rKyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobyBpbiB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID0gZS5hcHBseSh0W29dLCByKSwgaSA9PT0gITEpIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgYSA+IG8gJiYgKGkgPSBlLmNhbGwodFtvXSwgbywgdFtvXSksIGkgIT09ICExKTsgbysrKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobyBpbiB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPSBlLmNhbGwodFtvXSwgbywgdFtvXSksIGkgPT09ICExKSBicmVhazsgcmV0dXJuIHQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0cmltOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCA/ICIiIDogKHQgKyAiIikucmVwbGFjZSh0dCwgIiIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbWFrZUFycmF5OiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlIHx8IFtdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9IHQgJiYgKG4oT2JqZWN0KHQpKSA/IFoubWVyZ2UociwgInN0cmluZyIgPT0gdHlwZW9mIHQgPyBbdF0gOiB0KSA6IHouY2FsbChyLCB0KSksIHIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbkFycmF5OiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gZSA/IC0xIDogVi5jYWxsKGUsIHQsIG4pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbWVyZ2U6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gK2UubGVuZ3RoLCByID0gMCwgaSA9IHQubGVuZ3RoOyBuID4gcjsgcisrKSB0W2krK10gPSBlW3JdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0Lmxlbmd0aCA9IGksIHQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBncmVwOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciwgaSA9IFtdLCBvID0gMCwgYSA9IHQubGVuZ3RoLCBzID0gIW47IGEgPiBvOyBvKyspIHIgPSAhZSh0W29dLCBvKSwgciAhPT0gcyAmJiBpLnB1c2godFtvXSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBtYXA6IGZ1bmN0aW9uKHQsIGUsIHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSwgbyA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0Lmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IG4odCksCiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBbXTsKICAgICAgICAgICAgICAgICAgICBpZiAocykKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGEgPiBvOyBvKyspIGkgPSBlKHRbb10sIG8sIHIpLCBudWxsICE9IGkgJiYgdS5wdXNoKGkpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvIGluIHQpIGkgPSBlKHRbb10sIG8sIHIpLCBudWxsICE9IGkgJiYgdS5wdXNoKGkpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBXLmFwcGx5KFtdLCB1KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGd1aWQ6IDEsCiAgICAgICAgICAgICAgICBwcm94eTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAic3RyaW5nIiA9PSB0eXBlb2YgZSAmJiAobiA9IHRbZV0sIGUgPSB0LCB0ID0gbiksIFouaXNGdW5jdGlvbih0KSA/IChyID0gVS5jYWxsKGFyZ3VtZW50cywgMiksIGkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYXBwbHkoZSB8fCB0aGlzLCByLmNvbmNhdChVLmNhbGwoYXJndW1lbnRzKSkpCiAgICAgICAgICAgICAgICAgICAgfSwgaS5ndWlkID0gdC5ndWlkID0gdC5ndWlkIHx8IFouZ3VpZCsrLCBpKSA6IHZvaWQgMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG5vdzogRGF0ZS5ub3csCiAgICAgICAgICAgICAgICBzdXBwb3J0OiBZCiAgICAgICAgICAgIH0pLCBaLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IiLnNwbGl0KCIgIiksIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIEdbIltvYmplY3QgIiArIGUgKyAiXSJdID0gZS50b0xvd2VyQ2FzZSgpCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgaXQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSwgbywgYSwgcywgdSwgYywgZiwgaCwgZCwgZzsKICAgICAgICAgICAgICAgICAgICBpZiAoKGUgPyBlLm93bmVyRG9jdW1lbnQgfHwgZSA6IE0pICE9PSBJICYmIFIoZSksIGUgPSBlIHx8IEksIG4gPSBuIHx8IFtdLCBzID0gZS5ub2RlVHlwZSwgInN0cmluZyIgIT0gdHlwZW9mIHQgfHwgIXQgfHwgMSAhPT0gcyAmJiA5ICE9PSBzICYmIDExICE9PSBzKSByZXR1cm4gbjsKICAgICAgICAgICAgICAgICAgICBpZiAoIXIgJiYgTCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMTEgIT09IHMgJiYgKGkgPSBtdC5leGVjKHQpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhID0gaVsxXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICg5ID09PSBzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvID0gZS5nZXRFbGVtZW50QnlJZChhKSwgIW8gfHwgIW8ucGFyZW50Tm9kZSkgcmV0dXJuIG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvLmlkID09PSBhKSByZXR1cm4gbi5wdXNoKG8pLCBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLm93bmVyRG9jdW1lbnQgJiYgKG8gPSBlLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSkpICYmIHEoZSwgbykgJiYgby5pZCA9PT0gYSkgcmV0dXJuIG4ucHVzaChvKSwgbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaVsyXSkgcmV0dXJuIEsuYXBwbHkobiwgZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0KSksIG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChhID0gaVszXSkgJiYgdy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSByZXR1cm4gSy5hcHBseShuLCBlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSkpLCBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3LnFzYSAmJiAoIUQgfHwgIUQudGVzdCh0KSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoID0gZiA9IEgsIGQgPSBlLCBnID0gMSAhPT0gcyAmJiB0LCAxID09PSBzICYmICJvYmplY3QiICE9PSBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGMgPSBFKHQpLCAoZiA9IGUuZ2V0QXR0cmlidXRlKCJpZCIpKSA/IGggPSBmLnJlcGxhY2UoeHQsICJcXCQmIikgOiBlLnNldEF0dHJpYnV0ZSgiaWQiLCBoKSwgaCA9ICJbaWQ9JyIgKyBoICsgIiddICIsIHUgPSBjLmxlbmd0aDsgdS0tOykgY1t1XSA9IGggKyBwKGNbdV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBidC50ZXN0KHQpICYmIGwoZS5wYXJlbnROb2RlKSB8fCBlLCBnID0gYy5qb2luKCIsIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnKSB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBLLmFwcGx5KG4sIGQucXVlcnlTZWxlY3RvckFsbChnKSksIG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHYpIHt9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgfHwgZS5yZW1vdmVBdHRyaWJ1dGUoImlkIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gQyh0LnJlcGxhY2UodXQsICIkMSIpLCBlLCBuLCByKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG4oKSB7CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdChuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnB1c2gobiArICIgIikgPiBfLmNhY2hlTGVuZ3RoICYmIGRlbGV0ZSB0W2Uuc2hpZnQoKV0sIHRbbiArICIgIl0gPSByCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBlID0gW107CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiByKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdFtIXSA9ICEwLCB0CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBJLmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhIXQoZSkKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUucGFyZW50Tm9kZSAmJiBlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSksIGUgPSBudWxsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG8odCwgZSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSB0LnNwbGl0KCJ8IiksIHIgPSB0Lmxlbmd0aDsgci0tOykgXy5hdHRySGFuZGxlW25bcl1dID0gZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGEodCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gZSAmJiB0LAogICAgICAgICAgICAgICAgICAgICAgICByID0gbiAmJiAxID09PSB0Lm5vZGVUeXBlICYmIDEgPT09IGUubm9kZVR5cGUgJiYgKH5lLnNvdXJjZUluZGV4IHx8IEcpIC0gKH50LnNvdXJjZUluZGV4IHx8IEcpOwogICAgICAgICAgICAgICAgICAgIGlmIChyKSByZXR1cm4gcjsKICAgICAgICAgICAgICAgICAgICBpZiAobikKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IG4gPSBuLm5leHRTaWJsaW5nOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID09PSBlKSByZXR1cm4gLTE7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPyAxIDogLTEKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJpbnB1dCIgPT09IG4gJiYgZS50eXBlID09PSB0CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHUodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCJpbnB1dCIgPT09IG4gfHwgImJ1dHRvbiIgPT09IG4pICYmIGUudHlwZSA9PT0gdAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcihmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID0gK2UsIHIoZnVuY3Rpb24obiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSwgbyA9IHQoW10sIG4ubGVuZ3RoLCBlKSwgYSA9IG8ubGVuZ3RoOyBhLS07KSBuW2kgPSBvW2FdXSAmJiAobltpXSA9ICEocltpXSA9IG5baV0pKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gbCh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgJiYgInVuZGVmaW5lZCIgIT0gdHlwZW9mIHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgJiYgdAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGYoKSB7fQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHAodCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwLCBuID0gdC5sZW5ndGgsIHIgPSAiIjsgbiA+IGU7IGUrKykgciArPSB0W2VdLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gaCh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlLmRpciwKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG4gJiYgInBhcmVudE5vZGUiID09PSByLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gQisrOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmZpcnN0ID8gZnVuY3Rpb24oZSwgbiwgbykgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgZSA9IGVbcl07KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IGUubm9kZVR5cGUgfHwgaSkgcmV0dXJuIHQoZSwgbiwgbykKICAgICAgICAgICAgICAgICAgICB9IDogZnVuY3Rpb24oZSwgbiwgYSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcywgdSwgYyA9IFtGLCBvXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBlID0gZVtyXTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgxID09PSBlLm5vZGVUeXBlIHx8IGkpICYmIHQoZSwgbiwgYSkpIHJldHVybiAhMAogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBlID0gZVtyXTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IGUubm9kZVR5cGUgfHwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodSA9IGVbSF0gfHwgKGVbSF0gPSB7fSksIChzID0gdVtyXSkgJiYgc1swXSA9PT0gRiAmJiBzWzFdID09PSBvKSByZXR1cm4gY1syXSA9IHNbMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1W3JdID0gYywgY1syXSA9IHQoZSwgbiwgYSkpIHJldHVybiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZCh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQubGVuZ3RoID4gMSA/IGZ1bmN0aW9uKGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHQubGVuZ3RoOyBpLS07KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0W2ldKGUsIG4sIHIpKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMAogICAgICAgICAgICAgICAgICAgIH0gOiB0WzBdCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZyh0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG8gPSBuLmxlbmd0aDsgbyA+IGk7IGkrKykgZSh0LCBuW2ldLCByKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHYodCwgZSwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG8sIGEgPSBbXSwgcyA9IDAsIHUgPSB0Lmxlbmd0aCwgYyA9IG51bGwgIT0gZTsgdSA+IHM7IHMrKykobyA9IHRbc10pICYmICghbiB8fCBuKG8sIHIsIGkpKSAmJiAoYS5wdXNoKG8pLCBjICYmIGUucHVzaChzKSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB5KHQsIGUsIG4sIGksIG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSAmJiAhaVtIXSAmJiAoaSA9IHkoaSkpLCBvICYmICFvW0hdICYmIChvID0geShvLCBhKSksIHIoZnVuY3Rpb24ociwgYSwgcywgdSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYywgbCwgZiwgcCA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGEubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHIgfHwgZyhlIHx8ICIqIiwgcy5ub2RlVHlwZSA/IFtzXSA6IHMsIFtdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAhdCB8fCAhciAmJiBlID8geSA6IHYoeSwgcCwgdCwgcywgdSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gbiA/IG8gfHwgKHIgPyB0IDogZCB8fCBpKSA/IFtdIDogYSA6IG07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuICYmIG4obSwgYiwgcywgdSksIGkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGMgPSB2KGIsIGgpLCBpKGMsIFtdLCBzLCB1KSwgbCA9IGMubGVuZ3RoOyBsLS07KShmID0gY1tsXSkgJiYgKGJbaFtsXV0gPSAhKG1baFtsXV0gPSBmKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyB8fCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjID0gW10sIGwgPSBiLmxlbmd0aDsgbC0tOykoZiA9IGJbbF0pICYmIGMucHVzaChtW2xdID0gZik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8obnVsbCwgYiA9IFtdLCBjLCB1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGwgPSBiLmxlbmd0aDsgbC0tOykoZiA9IGJbbF0pICYmIChjID0gbyA/IHR0KHIsIGYpIDogcFtsXSkgPiAtMSAmJiAocltjXSA9ICEoYVtjXSA9IGYpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgYiA9IHYoYiA9PT0gYSA/IGIuc3BsaWNlKGQsIGIubGVuZ3RoKSA6IGIpLCBvID8gbyhudWxsLCBhLCBiLCB1KSA6IEsuYXBwbHkoYSwgYikKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG0odCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUsIG4sIHIsIGkgPSB0Lmxlbmd0aCwgbyA9IF8ucmVsYXRpdmVbdFswXS50eXBlXSwgYSA9IG8gfHwgXy5yZWxhdGl2ZVsiICJdLCBzID0gbyA/IDEgOiAwLCB1ID0gaChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gZQogICAgICAgICAgICAgICAgICAgICAgICB9LCBhLCAhMCksIGMgPSBoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0dChlLCB0KSA+IC0xCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGEsICEwKSwgbCA9IFtmdW5jdGlvbih0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9ICFvICYmIChyIHx8IG4gIT09IFMpIHx8ICgoZSA9IG4pLm5vZGVUeXBlID8gdSh0LCBuLCByKSA6IGModCwgbiwgcikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPSBudWxsLCBpCiAgICAgICAgICAgICAgICAgICAgICAgIH1dOyBpID4gczsgcysrKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IF8ucmVsYXRpdmVbdFtzXS50eXBlXSkgbCA9IFtoKGQobCksIG4pXTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IF8uZmlsdGVyW3Rbc10udHlwZV0uYXBwbHkobnVsbCwgdFtzXS5tYXRjaGVzKSwgbltIXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAociA9ICsrczsgaSA+IHIgJiYgIV8ucmVsYXRpdmVbdFtyXS50eXBlXTsgcisrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShzID4gMSAmJiBkKGwpLCBzID4gMSAmJiBwKHQuc2xpY2UoMCwgcyAtIDEpLmNvbmNhdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiICIgPT09IHRbcyAtIDJdLnR5cGUgPyAiKiIgOiAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKS5yZXBsYWNlKHV0LCAiJDEiKSwgbiwgciA+IHMgJiYgbSh0LnNsaWNlKHMsIHIpKSwgaSA+IHIgJiYgbSh0ID0gdC5zbGljZShyKSksIGkgPiByICYmIHAodCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2gobikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBkKGwpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gYih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBuLmxlbmd0aCA+IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0Lmxlbmd0aCA+IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBmdW5jdGlvbihyLCBhLCBzLCB1LCBjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCwgZiwgcCwgaCA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9ICIwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gciAmJiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IFMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IHIgfHwgbyAmJiBfLmZpbmQuVEFHKCIqIiwgYyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IEYgKz0gbnVsbCA9PSBtID8gMSA6IE1hdGgucmFuZG9tKCkgfHwgLjEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IGIubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjICYmIChTID0gYSAhPT0gSSAmJiBhKTsgZCAhPT0gdyAmJiBudWxsICE9IChsID0gYltkXSk7IGQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvICYmIGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChmID0gMDsgcCA9IHRbZisrXTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocChsLCBhLCBzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUucHVzaChsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjICYmIChGID0geCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiAoKGwgPSAhcCAmJiBsKSAmJiBoLS0sIHIgJiYgZy5wdXNoKGwpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGggKz0gZCwgaSAmJiBkICE9PSBoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChmID0gMDsgcCA9IG5bZisrXTspIHAoZywgeSwgYSwgcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGggPiAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGQtLTspIGdbZF0gfHwgeVtkXSB8fCAoeVtkXSA9IFkuY2FsbCh1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSB2KHkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEsuYXBwbHkodSwgeSksIGMgJiYgIXIgJiYgeS5sZW5ndGggPiAwICYmIGggKyBuLmxlbmd0aCA+IDEgJiYgZS51bmlxdWVTb3J0KHUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYyAmJiAoRiA9IHgsIFMgPSBtKSwgZwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBpID8gcihhKSA6IGEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciB4LCB3LCBfLCBrLCBULCBFLCBqLCBDLCBTLCBBLCBOLCBSLCBJLCBPLCBMLCBELCBQLCAkLCBxLCBIID0gInNpenpsZSIgKyAxICogbmV3IERhdGUsCiAgICAgICAgICAgICAgICAgICAgTSA9IHQuZG9jdW1lbnQsCiAgICAgICAgICAgICAgICAgICAgRiA9IDAsCiAgICAgICAgICAgICAgICAgICAgQiA9IDAsCiAgICAgICAgICAgICAgICAgICAgVSA9IG4oKSwKICAgICAgICAgICAgICAgICAgICBXID0gbigpLAogICAgICAgICAgICAgICAgICAgIHogPSBuKCksCiAgICAgICAgICAgICAgICAgICAgViA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IGUgJiYgKE4gPSAhMCksIDAKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIEcgPSAxIDw8IDMxLAogICAgICAgICAgICAgICAgICAgIFggPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICAgICAgICAgICAgICAgICAgICBKID0gW10sCiAgICAgICAgICAgICAgICAgICAgWSA9IEoucG9wLAogICAgICAgICAgICAgICAgICAgIFEgPSBKLnB1c2gsCiAgICAgICAgICAgICAgICAgICAgSyA9IEoucHVzaCwKICAgICAgICAgICAgICAgICAgICBaID0gSi5zbGljZSwKICAgICAgICAgICAgICAgICAgICB0dCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIHIgPSB0Lmxlbmd0aDsgciA+IG47IG4rKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0W25dID09PSBlKSByZXR1cm4gbjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBldCA9ICJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsCiAgICAgICAgICAgICAgICAgICAgbnQgPSAiW1xceDIwXFx0XFxyXFxuXFxmXSIsCiAgICAgICAgICAgICAgICAgICAgcnQgPSAiKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLAogICAgICAgICAgICAgICAgICAgIGl0ID0gcnQucmVwbGFjZSgidyIsICJ3IyIpLAogICAgICAgICAgICAgICAgICAgIG90ID0gIlxcWyIgKyBudCArICIqKCIgKyBydCArICIpKD86IiArIG50ICsgIiooWypeJHwhfl0/PSkiICsgbnQgKyAiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiICsgaXQgKyAiKSl8KSIgKyBudCArICIqXFxdIiwKICAgICAgICAgICAgICAgICAgICBhdCA9ICI6KCIgKyBydCArICIpKD86XFwoKCgnKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IiArIG90ICsgIikqKXwuKilcXCl8KSIsCiAgICAgICAgICAgICAgICAgICAgc3QgPSBuZXcgUmVnRXhwKG50ICsgIisiLCAiZyIpLAogICAgICAgICAgICAgICAgICAgIHV0ID0gbmV3IFJlZ0V4cCgiXiIgKyBudCArICIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiICsgbnQgKyAiKyQiLCAiZyIpLAogICAgICAgICAgICAgICAgICAgIGN0ID0gbmV3IFJlZ0V4cCgiXiIgKyBudCArICIqLCIgKyBudCArICIqIiksCiAgICAgICAgICAgICAgICAgICAgbHQgPSBuZXcgUmVnRXhwKCJeIiArIG50ICsgIiooWz4rfl18IiArIG50ICsgIikiICsgbnQgKyAiKiIpLAogICAgICAgICAgICAgICAgICAgIGZ0ID0gbmV3IFJlZ0V4cCgiPSIgKyBudCArICIqKFteXFxdJ1wiXSo/KSIgKyBudCArICIqXFxdIiwgImciKSwKICAgICAgICAgICAgICAgICAgICBwdCA9IG5ldyBSZWdFeHAoYXQpLAogICAgICAgICAgICAgICAgICAgIGh0ID0gbmV3IFJlZ0V4cCgiXiIgKyBpdCArICIkIiksCiAgICAgICAgICAgICAgICAgICAgZHQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIElEOiBuZXcgUmVnRXhwKCJeIygiICsgcnQgKyAiKSIpLAogICAgICAgICAgICAgICAgICAgICAgICBDTEFTUzogbmV3IFJlZ0V4cCgiXlxcLigiICsgcnQgKyAiKSIpLAogICAgICAgICAgICAgICAgICAgICAgICBUQUc6IG5ldyBSZWdFeHAoIl4oIiArIHJ0LnJlcGxhY2UoInciLCAidyoiKSArICIpIiksCiAgICAgICAgICAgICAgICAgICAgICAgIEFUVFI6IG5ldyBSZWdFeHAoIl4iICsgb3QpLAogICAgICAgICAgICAgICAgICAgICAgICBQU0VVRE86IG5ldyBSZWdFeHAoIl4iICsgYXQpLAogICAgICAgICAgICAgICAgICAgICAgICBDSElMRDogbmV3IFJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIiArIG50ICsgIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiICsgbnQgKyAiKig/OihbKy1dfCkiICsgbnQgKyAiKihcXGQrKXwpKSIgKyBudCArICIqXFwpfCkiLCAiaSIpLAogICAgICAgICAgICAgICAgICAgICAgICBib29sOiBuZXcgUmVnRXhwKCJeKD86IiArIGV0ICsgIikkIiwgImkiKSwKICAgICAgICAgICAgICAgICAgICAgICAgbmVlZHNDb250ZXh0OiBuZXcgUmVnRXhwKCJeIiArIG50ICsgIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIgKyBudCArICIqKCg/Oi1cXGQpP1xcZCopIiArIG50ICsgIipcXCl8KSg/PVteLV18JCkiLCAiaSIpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBndCA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksCiAgICAgICAgICAgICAgICAgICAgdnQgPSAvXmhcZCQvaSwKICAgICAgICAgICAgICAgICAgICB5dCA9IC9eW157XStce1xzKlxbbmF0aXZlIFx3LywKICAgICAgICAgICAgICAgICAgICBtdCA9IC9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sCiAgICAgICAgICAgICAgICAgICAgYnQgPSAvWyt+XS8sCiAgICAgICAgICAgICAgICAgICAgeHQgPSAvJ3xcXC9nLAogICAgICAgICAgICAgICAgICAgIHd0ID0gbmV3IFJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IiArIG50ICsgIj98KCIgKyBudCArICIpfC4pIiwgImlnIiksCiAgICAgICAgICAgICAgICAgICAgX3QgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gIjB4IiArIGUgLSA2NTUzNjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgIT09IHIgfHwgbiA/IGUgOiAwID4gciA/IFN0cmluZy5mcm9tQ2hhckNvZGUociArIDY1NTM2KSA6IFN0cmluZy5mcm9tQ2hhckNvZGUociA+PiAxMCB8IDU1Mjk2LCAxMDIzICYgciB8IDU2MzIwKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAga3QgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgUigpCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgSy5hcHBseShKID0gWi5jYWxsKE0uY2hpbGROb2RlcyksIE0uY2hpbGROb2RlcyksIEpbTS5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGUKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKFR0KSB7CiAgICAgICAgICAgICAgICAgICAgSyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHk6IEoubGVuZ3RoID8gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgUS5hcHBseSh0LCBaLmNhbGwoZSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gdC5sZW5ndGgsIHIgPSAwOyB0W24rK10gPSBlW3IrK107KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQubGVuZ3RoID0gbiAtIDEKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHcgPSBlLnN1cHBvcnQgPSB7fSwgVCA9IGUuaXNYTUwgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0ICYmICh0Lm93bmVyRG9jdW1lbnQgfHwgdCkuZG9jdW1lbnRFbGVtZW50OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlID8gIkhUTUwiICE9PSBlLm5vZGVOYW1lIDogITEKICAgICAgICAgICAgICAgIH0sIFIgPSBlLnNldERvY3VtZW50ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlLCBuLCByID0gdCA/IHQub3duZXJEb2N1bWVudCB8fCB0IDogTTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAhPT0gSSAmJiA5ID09PSByLm5vZGVUeXBlICYmIHIuZG9jdW1lbnRFbGVtZW50ID8gKEkgPSByLCBPID0gci5kb2N1bWVudEVsZW1lbnQsIG4gPSByLmRlZmF1bHRWaWV3LCBuICYmIG4gIT09IG4udG9wICYmIChuLmFkZEV2ZW50TGlzdGVuZXIgPyBuLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsIGt0LCAhMSkgOiBuLmF0dGFjaEV2ZW50ICYmIG4uYXR0YWNoRXZlbnQoIm9udW5sb2FkIiwga3QpKSwgTCA9ICFUKHIpLCB3LmF0dHJpYnV0ZXMgPSBpKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuY2xhc3NOYW1lID0gImkiLCAhdC5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpCiAgICAgICAgICAgICAgICAgICAgfSksIHcuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBpKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYXBwZW5kQ2hpbGQoci5jcmVhdGVDb21tZW50KCIiKSksICF0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgfSksIHcuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHl0LnRlc3Qoci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSwgdy5nZXRCeUlkID0gaShmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPLmFwcGVuZENoaWxkKHQpLmlkID0gSCwgIXIuZ2V0RWxlbWVudHNCeU5hbWUgfHwgIXIuZ2V0RWxlbWVudHNCeU5hbWUoSCkubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgfSksIHcuZ2V0QnlJZCA/IChfLmZpbmQuSUQgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgZS5nZXRFbGVtZW50QnlJZCAmJiBMKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGUuZ2V0RWxlbWVudEJ5SWQodCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiAmJiBuLnBhcmVudE5vZGUgPyBbbl0gOiBbXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgXy5maWx0ZXIuSUQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdC5yZXBsYWNlKHd0LCBfdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5nZXRBdHRyaWJ1dGUoImlkIikgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pIDogKGRlbGV0ZSBfLmZpbmQuSUQsIF8uZmlsdGVyLklEID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQucmVwbGFjZSh3dCwgX3QpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSAidW5kZWZpbmVkIiAhPSB0eXBlb2YgdC5nZXRBdHRyaWJ1dGVOb2RlICYmIHQuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuICYmIG4udmFsdWUgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCBfLmZpbmQuVEFHID0gdy5nZXRFbGVtZW50c0J5VGFnTmFtZSA/IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJ1bmRlZmluZWQiICE9IHR5cGVvZiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lID8gZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0KSA6IHcucXNhID8gZS5xdWVyeVNlbGVjdG9yQWxsKHQpIDogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgfSA6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIgPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiKiIgPT09IHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBuID0gb1tpKytdOykgMSA9PT0gbi5ub2RlVHlwZSAmJiByLnB1c2gobik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICAgICAgfSwgXy5maW5kLkNMQVNTID0gdy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEwgPyBlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUodCkgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICB9LCBQID0gW10sIEQgPSBbXSwgKHcucXNhID0geXQudGVzdChyLnF1ZXJ5U2VsZWN0b3JBbGwpKSAmJiAoaShmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIE8uYXBwZW5kQ2hpbGQodCkuaW5uZXJIVE1MID0gIjxhIGlkPSciICsgSCArICInPjwvYT48c2VsZWN0IGlkPSciICsgSCArICItXGZdJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsIHQucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGggJiYgRC5wdXNoKCJbKl4kXT0iICsgbnQgKyAiKig/OicnfFwiXCIpIiksIHQucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aCB8fCBELnB1c2goIlxcWyIgKyBudCArICIqKD86dmFsdWV8IiArIGV0ICsgIikiKSwgdC5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIgKyBIICsgIi1dIikubGVuZ3RoIHx8IEQucHVzaCgifj0iKSwgdC5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aCB8fCBELnB1c2goIjpjaGVja2VkIiksIHQucXVlcnlTZWxlY3RvckFsbCgiYSMiICsgSCArICIrKiIpLmxlbmd0aCB8fCBELnB1c2goIi4jLitbK35dIikKICAgICAgICAgICAgICAgICAgICB9KSwgaShmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gci5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwogICAgICAgICAgICAgICAgICAgICAgICBlLnNldEF0dHJpYnV0ZSgidHlwZSIsICJoaWRkZW4iKSwgdC5hcHBlbmRDaGlsZChlKS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCAiRCIpLCB0LnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPWRdIikubGVuZ3RoICYmIEQucHVzaCgibmFtZSIgKyBudCArICIqWypeJHwhfl0/PSIpLCB0LnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RoIHx8IEQucHVzaCgiOmVuYWJsZWQiLCAiOmRpc2FibGVkIiksIHQucXVlcnlTZWxlY3RvckFsbCgiKiw6eCIpLCBELnB1c2goIiwuKjoiKQogICAgICAgICAgICAgICAgICAgIH0pKSwgKHcubWF0Y2hlc1NlbGVjdG9yID0geXQudGVzdCgkID0gTy5tYXRjaGVzIHx8IE8ud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IE8ubW96TWF0Y2hlc1NlbGVjdG9yIHx8IE8ub01hdGNoZXNTZWxlY3RvciB8fCBPLm1zTWF0Y2hlc1NlbGVjdG9yKSkgJiYgaShmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHcuZGlzY29ubmVjdGVkTWF0Y2ggPSAkLmNhbGwodCwgImRpdiIpLCAkLmNhbGwodCwgIltzIT0nJ106eCIpLCBQLnB1c2goIiE9IiwgYXQpCiAgICAgICAgICAgICAgICAgICAgfSksIEQgPSBELmxlbmd0aCAmJiBuZXcgUmVnRXhwKEQuam9pbigifCIpKSwgUCA9IFAubGVuZ3RoICYmIG5ldyBSZWdFeHAoUC5qb2luKCJ8IikpLCBlID0geXQudGVzdChPLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSwgcSA9IGUgfHwgeXQudGVzdChPLmNvbnRhaW5zKSA/IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSA5ID09PSB0Lm5vZGVUeXBlID8gdC5kb2N1bWVudEVsZW1lbnQgOiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGUgJiYgZS5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gciB8fCAhKCFyIHx8IDEgIT09IHIubm9kZVR5cGUgfHwgIShuLmNvbnRhaW5zID8gbi5jb250YWlucyhyKSA6IHQuY29tcGFyZURvY3VtZW50UG9zaXRpb24gJiYgMTYgJiB0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHIpKSkKICAgICAgICAgICAgICAgICAgICB9IDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBlID0gZS5wYXJlbnROb2RlOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9PT0gdCkgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgICAgICB9LCBWID0gZSA/IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPT09IGUpIHJldHVybiBOID0gITAsIDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gIXQuY29tcGFyZURvY3VtZW50UG9zaXRpb24gLSAhZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPyBuIDogKG4gPSAodC5vd25lckRvY3VtZW50IHx8IHQpID09PSAoZS5vd25lckRvY3VtZW50IHx8IGUpID8gdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKSA6IDEsIDEgJiBuIHx8ICF3LnNvcnREZXRhY2hlZCAmJiBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpID09PSBuID8gdCA9PT0gciB8fCB0Lm93bmVyRG9jdW1lbnQgPT09IE0gJiYgcShNLCB0KSA/IC0xIDogZSA9PT0gciB8fCBlLm93bmVyRG9jdW1lbnQgPT09IE0gJiYgcShNLCBlKSA/IDEgOiBBID8gdHQoQSwgdCkgLSB0dChBLCBlKSA6IDAgOiA0ICYgbiA/IC0xIDogMSkKICAgICAgICAgICAgICAgICAgICB9IDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA9PT0gZSkgcmV0dXJuIE4gPSAhMCwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIGkgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHQucGFyZW50Tm9kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLnBhcmVudE5vZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gW3RdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IFtlXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvIHx8ICFzKSByZXR1cm4gdCA9PT0gciA/IC0xIDogZSA9PT0gciA/IDEgOiBvID8gLTEgOiBzID8gMSA6IEEgPyB0dChBLCB0KSAtIHR0KEEsIGUpIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT09IHMpIHJldHVybiBhKHQsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG4gPSB0OyBuID0gbi5wYXJlbnROb2RlOykgdS51bnNoaWZ0KG4pOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG4gPSBlOyBuID0gbi5wYXJlbnROb2RlOykgYy51bnNoaWZ0KG4pOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgdVtpXSA9PT0gY1tpXTspIGkrKzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgPyBhKHVbaV0sIGNbaV0pIDogdVtpXSA9PT0gTSA/IC0xIDogY1tpXSA9PT0gTSA/IDEgOiAwCiAgICAgICAgICAgICAgICAgICAgfSwgcikgOiBJCiAgICAgICAgICAgICAgICB9LCBlLm1hdGNoZXMgPSBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUodCwgbnVsbCwgbnVsbCwgbikKICAgICAgICAgICAgICAgIH0sIGUubWF0Y2hlc1NlbGVjdG9yID0gZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgIGlmICgodC5vd25lckRvY3VtZW50IHx8IHQpICE9PSBJICYmIFIodCksIG4gPSBuLnJlcGxhY2UoZnQsICI9JyQxJ10iKSwgdy5tYXRjaGVzU2VsZWN0b3IgJiYgTCAmJiAoIVAgfHwgIVAudGVzdChuKSkgJiYgKCFEIHx8ICFELnRlc3QobikpKSB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9ICQuY2FsbCh0LCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgfHwgdy5kaXNjb25uZWN0ZWRNYXRjaCB8fCB0LmRvY3VtZW50ICYmIDExICE9PSB0LmRvY3VtZW50Lm5vZGVUeXBlKSByZXR1cm4gcgogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGkpIHt9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUobiwgSSwgbnVsbCwgW3RdKS5sZW5ndGggPiAwCiAgICAgICAgICAgICAgICB9LCBlLmNvbnRhaW5zID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAodC5vd25lckRvY3VtZW50IHx8IHQpICE9PSBJICYmIFIodCksIHEodCwgZSkKICAgICAgICAgICAgICAgIH0sIGUuYXR0ciA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAodC5vd25lckRvY3VtZW50IHx8IHQpICE9PSBJICYmIFIodCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBfLmF0dHJIYW5kbGVbZS50b0xvd2VyQ2FzZSgpXSwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IG4gJiYgWC5jYWxsKF8uYXR0ckhhbmRsZSwgZS50b0xvd2VyQ2FzZSgpKSA/IG4odCwgZSwgIUwpIDogdm9pZCAwOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgIT09IHIgPyByIDogdy5hdHRyaWJ1dGVzIHx8ICFMID8gdC5nZXRBdHRyaWJ1dGUoZSkgOiAociA9IHQuZ2V0QXR0cmlidXRlTm9kZShlKSkgJiYgci5zcGVjaWZpZWQgPyByLnZhbHVlIDogbnVsbAogICAgICAgICAgICAgICAgfSwgZS5lcnJvciA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIgKyB0KQogICAgICAgICAgICAgICAgfSwgZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlLCBuID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgICAgICAgICBpZiAoTiA9ICF3LmRldGVjdER1cGxpY2F0ZXMsIEEgPSAhdy5zb3J0U3RhYmxlICYmIHQuc2xpY2UoMCksIHQuc29ydChWKSwgTikgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgZSA9IHRbaSsrXTspIGUgPT09IHRbaV0gJiYgKHIgPSBuLnB1c2goaSkpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgci0tOykgdC5zcGxpY2UobltyXSwgMSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEEgPSBudWxsLCB0CiAgICAgICAgICAgICAgICB9LCBrID0gZS5nZXRUZXh0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlLCBuID0gIiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gdC5ub2RlVHlwZTsKICAgICAgICAgICAgICAgICAgICBpZiAoaSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gaSB8fCA5ID09PSBpIHx8IDExID09PSBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIHQudGV4dENvbnRlbnQpIHJldHVybiB0LnRleHRDb250ZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh0ID0gdC5maXJzdENoaWxkOyB0OyB0ID0gdC5uZXh0U2libGluZykgbiArPSBrKHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoMyA9PT0gaSB8fCA0ID09PSBpKSByZXR1cm4gdC5ub2RlVmFsdWUKICAgICAgICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGUgPSB0W3IrK107KSBuICs9IGsoZSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgIH0sIF8gPSBlLnNlbGVjdG9ycyA9IHsKICAgICAgICAgICAgICAgICAgICBjYWNoZUxlbmd0aDogNTAsCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlUHNldWRvOiByLAogICAgICAgICAgICAgICAgICAgIG1hdGNoOiBkdCwKICAgICAgICAgICAgICAgICAgICBhdHRySGFuZGxlOiB7fSwKICAgICAgICAgICAgICAgICAgICBmaW5kOiB7fSwKICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZTogewogICAgICAgICAgICAgICAgICAgICAgICAiPiI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcjogInBhcmVudE5vZGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3Q6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICIgIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyOiAicGFyZW50Tm9kZSIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgIisiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXI6ICJwcmV2aW91c1NpYmxpbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3Q6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICJ+IjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyOiAicHJldmlvdXNTaWJsaW5nIgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwcmVGaWx0ZXI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgQVRUUjogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRbMV0gPSB0WzFdLnJlcGxhY2Uod3QsIF90KSwgdFszXSA9ICh0WzNdIHx8IHRbNF0gfHwgdFs1XSB8fCAiIikucmVwbGFjZSh3dCwgX3QpLCAifj0iID09PSB0WzJdICYmICh0WzNdID0gIiAiICsgdFszXSArICIgIiksIHQuc2xpY2UoMCwgNCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgQ0hJTEQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0WzFdID0gdFsxXS50b0xvd2VyQ2FzZSgpLCAibnRoIiA9PT0gdFsxXS5zbGljZSgwLCAzKSA/ICh0WzNdIHx8IGUuZXJyb3IodFswXSksIHRbNF0gPSArKHRbNF0gPyB0WzVdICsgKHRbNl0gfHwgMSkgOiAyICogKCJldmVuIiA9PT0gdFszXSB8fCAib2RkIiA9PT0gdFszXSkpLCB0WzVdID0gKyh0WzddICsgdFs4XSB8fCAib2RkIiA9PT0gdFszXSkpIDogdFszXSAmJiBlLmVycm9yKHRbMF0pLCB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFBTRVVETzogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG4gPSAhdFs2XSAmJiB0WzJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR0LkNISUxELnRlc3QodFswXSkgPyBudWxsIDogKHRbM10gPyB0WzJdID0gdFs0XSB8fCB0WzVdIHx8ICIiIDogbiAmJiBwdC50ZXN0KG4pICYmIChlID0gRShuLCAhMCkpICYmIChlID0gbi5pbmRleE9mKCIpIiwgbi5sZW5ndGggLSBlKSAtIG4ubGVuZ3RoKSAmJiAodFswXSA9IHRbMF0uc2xpY2UoMCwgZSksIHRbMl0gPSBuLnNsaWNlKDAsIGUpKSwgdC5zbGljZSgwLCAzKSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIFRBRzogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0LnJlcGxhY2Uod3QsIF90KS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIqIiA9PT0gdCA/IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5ub2RlTmFtZSAmJiB0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgQ0xBU1M6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gVVt0ICsgIiAiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IFJlZ0V4cCgiKF58IiArIG50ICsgIikiICsgdCArICIoIiArIG50ICsgInwkKSIpKSAmJiBVKHQsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS50ZXN0KCJzdHJpbmciID09IHR5cGVvZiB0LmNsYXNzTmFtZSAmJiB0LmNsYXNzTmFtZSB8fCAidW5kZWZpbmVkIiAhPSB0eXBlb2YgdC5nZXRBdHRyaWJ1dGUgJiYgdC5nZXRBdHRyaWJ1dGUoImNsYXNzIikgfHwgIiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBBVFRSOiBmdW5jdGlvbih0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZS5hdHRyKGksIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IG8gPyAiIT0iID09PSBuIDogbiA/IChvICs9ICIiLCAiPSIgPT09IG4gPyBvID09PSByIDogIiE9IiA9PT0gbiA/IG8gIT09IHIgOiAiXj0iID09PSBuID8gciAmJiAwID09PSBvLmluZGV4T2YocikgOiAiKj0iID09PSBuID8gciAmJiBvLmluZGV4T2YocikgPiAtMSA6ICIkPSIgPT09IG4gPyByICYmIG8uc2xpY2UoLXIubGVuZ3RoKSA9PT0gciA6ICJ+PSIgPT09IG4gPyAoIiAiICsgby5yZXBsYWNlKHN0LCAiICIpICsgIiAiKS5pbmRleE9mKHIpID4gLTEgOiAifD0iID09PSBuID8gbyA9PT0gciB8fCBvLnNsaWNlKDAsIHIubGVuZ3RoICsgMSkgPT09IHIgKyAiLSIgOiAhMSkgOiAhMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBDSElMRDogZnVuY3Rpb24odCwgZSwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSAibnRoIiAhPT0gdC5zbGljZSgwLCAzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gImxhc3QiICE9PSB0LnNsaWNlKC00KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gIm9mLXR5cGUiID09PSBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgPT09IHIgJiYgMCA9PT0gaSA/IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISF0LnBhcmVudE5vZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBmdW5jdGlvbihlLCBuLCB1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMsIGwsIGYsIHAsIGgsIGQsIGcgPSBvICE9PSBhID8gIm5leHRTaWJsaW5nIiA6ICJwcmV2aW91c1NpYmxpbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gZS5wYXJlbnROb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gcyAmJiBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAhdSAmJiAhczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGc7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChmID0gZTsgZiA9IGZbZ107KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyA/IGYubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0geSA6IDEgPT09IGYubm9kZVR5cGUpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gZyA9ICJvbmx5IiA9PT0gdCAmJiAhZCAmJiAibmV4dFNpYmxpbmciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA9IFthID8gdi5maXJzdENoaWxkIDogdi5sYXN0Q2hpbGRdLCBhICYmIG0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobCA9IHZbSF0gfHwgKHZbSF0gPSB7fSksIGMgPSBsW3RdIHx8IFtdLCBoID0gY1swXSA9PT0gRiAmJiBjWzFdLCBwID0gY1swXSA9PT0gRiAmJiBjWzJdLCBmID0gaCAmJiB2LmNoaWxkTm9kZXNbaF07IGYgPSArK2ggJiYgZiAmJiBmW2ddIHx8IChwID0gaCA9IDApIHx8IGQucG9wKCk7KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxID09PSBmLm5vZGVUeXBlICYmICsrcCAmJiBmID09PSBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbdF0gPSBbRiwgaCwgcF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG0gJiYgKGMgPSAoZVtIXSB8fCAoZVtIXSA9IHt9KSlbdF0pICYmIGNbMF0gPT09IEYpIHAgPSBjWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZiA9ICsraCAmJiBmICYmIGZbZ10gfHwgKHAgPSBoID0gMCkgfHwgZC5wb3AoKSkgJiYgKChzID8gZi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSB5IDogMSAhPT0gZi5ub2RlVHlwZSkgfHwgISsrcCB8fCAobSAmJiAoKGZbSF0gfHwgKGZbSF0gPSB7fSkpW3RdID0gW0YsIHBdKSwgZiAhPT0gZSkpOyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwIC09IGksIHAgPT09IHIgfHwgcCAlIHIgPT09IDAgJiYgcCAvIHIgPj0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUFNFVURPOiBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSwgbyA9IF8ucHNldWRvc1t0XSB8fCBfLnNldEZpbHRlcnNbdC50b0xvd2VyQ2FzZSgpXSB8fCBlLmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIgKyB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvW0hdID8gbyhuKSA6IG8ubGVuZ3RoID4gMSA/IChpID0gW3QsIHQsICIiLCBuXSwgXy5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KHQudG9Mb3dlckNhc2UoKSkgPyByKGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByLCBpID0gbyh0LCBuKSwgYSA9IGkubGVuZ3RoOyBhLS07KSByID0gdHQodCwgaVthXSksIHRbcl0gPSAhKGVbcl0gPSBpW2FdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8odCwgMCwgaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIDogbwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwc2V1ZG9zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vdDogcihmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gaih0LnJlcGxhY2UodXQsICIkMSIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpW0hdID8gcihmdW5jdGlvbih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbywgYSA9IGkodCwgbnVsbCwgciwgW10pLCBzID0gdC5sZW5ndGg7IHMtLTspKG8gPSBhW3NdKSAmJiAodFtzXSA9ICEoZVtzXSA9IG8pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBmdW5jdGlvbih0LCByLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbMF0gPSB0LCBpKGUsIG51bGwsIG8sIG4pLCBlWzBdID0gbnVsbCwgIW4ucG9wKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGhhczogcihmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlKHQsIG4pLmxlbmd0aCA+IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zOiByKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gdC5yZXBsYWNlKHd0LCBfdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUudGV4dENvbnRlbnQgfHwgZS5pbm5lclRleHQgfHwgayhlKSkuaW5kZXhPZih0KSA+IC0xCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgbGFuZzogcihmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaHQudGVzdCh0IHx8ICIiKSB8fCBlLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiICsgdCksIHQgPSB0LnJlcGxhY2Uod3QsIF90KS50b0xvd2VyQ2FzZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IEwgPyBlLmxhbmcgOiBlLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKSB8fCBlLmdldEF0dHJpYnV0ZSgibGFuZyIpKSByZXR1cm4gbiA9IG4udG9Mb3dlckNhc2UoKSwgbiA9PT0gdCB8fCAwID09PSBuLmluZGV4T2YodCArICItIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoZSA9IGUucGFyZW50Tm9kZSkgJiYgMSA9PT0gZS5ub2RlVHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LmxvY2F0aW9uICYmIHQubG9jYXRpb24uaGFzaDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuICYmIG4uc2xpY2UoMSkgPT09IGUuaWQKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcm9vdDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IE8KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXM6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSBJLmFjdGl2ZUVsZW1lbnQgJiYgKCFJLmhhc0ZvY3VzIHx8IEkuaGFzRm9jdXMoKSkgJiYgISEodC50eXBlIHx8IHQuaHJlZiB8fCB+dC50YWJJbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuZGlzYWJsZWQgPT09ICExCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5kaXNhYmxlZCA9PT0gITAKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImlucHV0IiA9PT0gZSAmJiAhIXQuY2hlY2tlZCB8fCAib3B0aW9uIiA9PT0gZSAmJiAhIXQuc2VsZWN0ZWQKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnBhcmVudE5vZGUgJiYgdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsIHQuc2VsZWN0ZWQgPT09ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHQgPSB0LmZpcnN0Q2hpbGQ7IHQ7IHQgPSB0Lm5leHRTaWJsaW5nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Lm5vZGVUeXBlIDwgNikgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFfLnBzZXVkb3MuZW1wdHkodCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdnQudGVzdCh0Lm5vZGVOYW1lKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGd0LnRlc3QodC5ub2RlTmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiaW5wdXQiID09PSBlICYmICJidXR0b24iID09PSB0LnR5cGUgfHwgImJ1dHRvbiIgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImlucHV0IiA9PT0gdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICYmICJ0ZXh0IiA9PT0gdC50eXBlICYmIChudWxsID09IChlID0gdC5nZXRBdHRyaWJ1dGUoInR5cGUiKSkgfHwgInRleHQiID09PSBlLnRvTG93ZXJDYXNlKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0OiBjKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFswXQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdDogYyhmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2UgLSAxXQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgZXE6IGMoZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFswID4gbiA/IG4gKyBlIDogbl0KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW46IGMoZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IGUgPiBuOyBuICs9IDIpIHQucHVzaChuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBvZGQ6IGMoZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDE7IGUgPiBuOyBuICs9IDIpIHQucHVzaChuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBsdDogYyhmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gMCA+IG4gPyBuICsgZSA6IG47IC0tciA+PSAwOykgdC5wdXNoKHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGd0OiBjKGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAwID4gbiA/IG4gKyBlIDogbjsgKytyIDwgZTspIHQucHVzaChyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgXy5wc2V1ZG9zLm50aCA9IF8ucHNldWRvcy5lcTsKICAgICAgICAgICAgICAgIGZvciAoeCBpbiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlvOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tib3g6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTogITAKICAgICAgICAgICAgICAgICAgICB9KSBfLnBzZXVkb3NbeF0gPSBzKHgpOwogICAgICAgICAgICAgICAgZm9yICh4IGluIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3VibWl0OiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXQ6ICEwCiAgICAgICAgICAgICAgICAgICAgfSkgXy5wc2V1ZG9zW3hdID0gdSh4KTsKICAgICAgICAgICAgICAgIHJldHVybiBmLnByb3RvdHlwZSA9IF8uZmlsdGVycyA9IF8ucHNldWRvcywgXy5zZXRGaWx0ZXJzID0gbmV3IGYsIEUgPSBlLnRva2VuaXplID0gZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciByLCBpLCBvLCBhLCBzLCB1LCBjLCBsID0gV1t0ICsgIiAiXTsKICAgICAgICAgICAgICAgICAgICBpZiAobCkgcmV0dXJuIG4gPyAwIDogbC5zbGljZSgwKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHMgPSB0LCB1ID0gW10sIGMgPSBfLnByZUZpbHRlcjsgczspIHsKICAgICAgICAgICAgICAgICAgICAgICAgKCFyIHx8IChpID0gY3QuZXhlYyhzKSkpICYmIChpICYmIChzID0gcy5zbGljZShpWzBdLmxlbmd0aCkgfHwgcyksIHUucHVzaChvID0gW10pKSwgciA9ICExLCAoaSA9IGx0LmV4ZWMocykpICYmIChyID0gaS5zaGlmdCgpLCBvLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpWzBdLnJlcGxhY2UodXQsICIgIikKICAgICAgICAgICAgICAgICAgICAgICAgfSksIHMgPSBzLnNsaWNlKHIubGVuZ3RoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYSBpbiBfLmZpbHRlcikgIShpID0gZHRbYV0uZXhlYyhzKSkgfHwgY1thXSAmJiAhKGkgPSBjW2FdKGkpKSB8fCAociA9IGkuc2hpZnQoKSwgby5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXM6IGkKICAgICAgICAgICAgICAgICAgICAgICAgfSksIHMgPSBzLnNsaWNlKHIubGVuZ3RoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcikgYnJlYWsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPyBzLmxlbmd0aCA6IHMgPyBlLmVycm9yKHQpIDogVyh0LCB1KS5zbGljZSgwKQogICAgICAgICAgICAgICAgfSwgaiA9IGUuY29tcGlsZSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB6W3QgKyAiICJdOwogICAgICAgICAgICAgICAgICAgIGlmICghbykgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgfHwgKGUgPSBFKHQpKSwgbiA9IGUubGVuZ3RoOyBuLS07KSBvID0gbShlW25dKSwgb1tIXSA/IHIucHVzaChvKSA6IGkucHVzaChvKTsKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHoodCwgYihpLCByKSksIG8uc2VsZWN0b3IgPSB0CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICB9LCBDID0gZS5zZWxlY3QgPSBmdW5jdGlvbih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGksIG8sIGEsIHMsIHUsIGMgPSAiZnVuY3Rpb24iID09IHR5cGVvZiB0ICYmIHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGYgPSAhciAmJiBFKHQgPSBjLnNlbGVjdG9yIHx8IHQpOwogICAgICAgICAgICAgICAgICAgIGlmIChuID0gbiB8fCBbXSwgMSA9PT0gZi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPSBmWzBdID0gZlswXS5zbGljZSgwKSwgby5sZW5ndGggPiAyICYmICJJRCIgPT09IChhID0gb1swXSkudHlwZSAmJiB3LmdldEJ5SWQgJiYgOSA9PT0gZS5ub2RlVHlwZSAmJiBMICYmIF8ucmVsYXRpdmVbb1sxXS50eXBlXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPSAoXy5maW5kLklEKGEubWF0Y2hlc1swXS5yZXBsYWNlKHd0LCBfdCksIGUpIHx8IFtdKVswXSwgIWUpIHJldHVybiBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyAmJiAoZSA9IGUucGFyZW50Tm9kZSksIHQgPSB0LnNsaWNlKG8uc2hpZnQoKS52YWx1ZS5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gZHQubmVlZHNDb250ZXh0LnRlc3QodCkgPyAwIDogby5sZW5ndGg7IGktLSAmJiAoYSA9IG9baV0sICFfLnJlbGF0aXZlW3MgPSBhLnR5cGVdKTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHUgPSBfLmZpbmRbc10pICYmIChyID0gdShhLm1hdGNoZXNbMF0ucmVwbGFjZSh3dCwgX3QpLCBidC50ZXN0KG9bMF0udHlwZSkgJiYgbChlLnBhcmVudE5vZGUpIHx8IGUpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvLnNwbGljZShpLCAxKSwgdCA9IHIubGVuZ3RoICYmIHAobyksICF0KSByZXR1cm4gSy5hcHBseShuLCByKSwgbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGMgfHwgaih0LCBmKSkociwgZSwgIUwsIG4sIGJ0LnRlc3QodCkgJiYgbChlLnBhcmVudE5vZGUpIHx8IGUpLCBuCiAgICAgICAgICAgICAgICB9LCB3LnNvcnRTdGFibGUgPSBILnNwbGl0KCIiKS5zb3J0KFYpLmpvaW4oIiIpID09PSBILCB3LmRldGVjdER1cGxpY2F0ZXMgPSAhIU4sIFIoKSwgdy5zb3J0RGV0YWNoZWQgPSBpKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSAmIHQuY29tcGFyZURvY3VtZW50UG9zaXRpb24oSS5jcmVhdGVFbGVtZW50KCJkaXYiKSkKICAgICAgICAgICAgICAgIH0pLCBpKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pbm5lckhUTUwgPSAiPGEgaHJlZj0nIyc+PC9hPiIsICIjIiA9PT0gdC5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpCiAgICAgICAgICAgICAgICB9KSB8fCBvKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIiwgZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuID8gdm9pZCAwIDogdC5nZXRBdHRyaWJ1dGUoZSwgInR5cGUiID09PSBlLnRvTG93ZXJDYXNlKCkgPyAxIDogMikKICAgICAgICAgICAgICAgIH0pLCB3LmF0dHJpYnV0ZXMgJiYgaShmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaW5uZXJIVE1MID0gIjxpbnB1dC8+IiwgdC5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCAiIiksICIiID09PSB0LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpCiAgICAgICAgICAgICAgICB9KSB8fCBvKCJ2YWx1ZSIsIGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiB8fCAiaW5wdXQiICE9PSB0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPyB2b2lkIDAgOiB0LmRlZmF1bHRWYWx1ZQogICAgICAgICAgICAgICAgfSksIGkoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpCiAgICAgICAgICAgICAgICB9KSB8fCBvKGV0LCBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPyB2b2lkIDAgOiB0W2VdID09PSAhMCA/IGUudG9Mb3dlckNhc2UoKSA6IChyID0gdC5nZXRBdHRyaWJ1dGVOb2RlKGUpKSAmJiByLnNwZWNpZmllZCA/IHIudmFsdWUgOiBudWxsCiAgICAgICAgICAgICAgICB9KSwgZQogICAgICAgICAgICB9KHQpOwogICAgICAgICAgICBaLmZpbmQgPSBpdCwgWi5leHByID0gaXQuc2VsZWN0b3JzLCBaLmV4cHJbIjoiXSA9IFouZXhwci5wc2V1ZG9zLCBaLnVuaXF1ZSA9IGl0LnVuaXF1ZVNvcnQsIFoudGV4dCA9IGl0LmdldFRleHQsIFouaXNYTUxEb2MgPSBpdC5pc1hNTCwgWi5jb250YWlucyA9IGl0LmNvbnRhaW5zOwogICAgICAgICAgICB2YXIgb3QgPSBaLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LAogICAgICAgICAgICAgICAgYXQgPSAvXjwoXHcrKVxzKlwvPz4oPzo8XC9cMT58KSQvLAogICAgICAgICAgICAgICAgc3QgPSAvXi5bXjojXFtcLixdKiQvOwogICAgICAgICAgICBaLmZpbHRlciA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByID0gZVswXTsKICAgICAgICAgICAgICAgIHJldHVybiBuICYmICh0ID0gIjpub3QoIiArIHQgKyAiKSIpLCAxID09PSBlLmxlbmd0aCAmJiAxID09PSByLm5vZGVUeXBlID8gWi5maW5kLm1hdGNoZXNTZWxlY3RvcihyLCB0KSA/IFtyXSA6IFtdIDogWi5maW5kLm1hdGNoZXModCwgWi5ncmVwKGUsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSA9PT0gdC5ub2RlVHlwZQogICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgIH0sIFouZm4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgIGZpbmQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSwgbiA9IHRoaXMubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICByID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIGlmICgic3RyaW5nIiAhPSB0eXBlb2YgdCkgcmV0dXJuIHRoaXMucHVzaFN0YWNrKFoodCkuZmlsdGVyKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSAwOyBuID4gZTsgZSsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFouY29udGFpbnMoaVtlXSwgdGhpcykpIHJldHVybiAhMAogICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSAwOyBuID4gZTsgZSsrKSBaLmZpbmQodCwgaVtlXSwgcik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPSB0aGlzLnB1c2hTdGFjayhuID4gMSA/IFoudW5pcXVlKHIpIDogciksIHIuc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yID8gdGhpcy5zZWxlY3RvciArICIgIiArIHQgOiB0LCByCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZmlsdGVyOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKHIodGhpcywgdCB8fCBbXSwgITEpKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG5vdDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2hTdGFjayhyKHRoaXMsIHQgfHwgW10sICEwKSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpczogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhIXIodGhpcywgInN0cmluZyIgPT0gdHlwZW9mIHQgJiYgb3QudGVzdCh0KSA/IFoodCkgOiB0IHx8IFtdLCAhMSkubGVuZ3RoCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgdXQsIGN0ID0gL14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLywKICAgICAgICAgICAgICAgIGx0ID0gWi5mbi5pbml0ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuLCByOwogICAgICAgICAgICAgICAgICAgIGlmICghdCkgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gIjwiID09PSB0WzBdICYmICI+IiA9PT0gdFt0Lmxlbmd0aCAtIDFdICYmIHQubGVuZ3RoID49IDMgPyBbbnVsbCwgdCwgbnVsbF0gOiBjdC5leGVjKHQpLCAhbiB8fCAhblsxXSAmJiBlKSByZXR1cm4gIWUgfHwgZS5qcXVlcnkgPyAoZSB8fCB1dCkuZmluZCh0KSA6IHRoaXMuY29uc3RydWN0b3IoZSkuZmluZCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5bMV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlID0gZSBpbnN0YW5jZW9mIFogPyBlWzBdIDogZSwgWi5tZXJnZSh0aGlzLCBaLnBhcnNlSFRNTChuWzFdLCBlICYmIGUubm9kZVR5cGUgPyBlLm93bmVyRG9jdW1lbnQgfHwgZSA6IFEsICEwKSksIGF0LnRlc3QoblsxXSkgJiYgWi5pc1BsYWluT2JqZWN0KGUpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobiBpbiBlKSBaLmlzRnVuY3Rpb24odGhpc1tuXSkgPyB0aGlzW25dKGVbbl0pIDogdGhpcy5hdHRyKG4sIGVbbl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciA9IFEuZ2V0RWxlbWVudEJ5SWQoblsyXSksIHIgJiYgci5wYXJlbnROb2RlICYmICh0aGlzLmxlbmd0aCA9IDEsIHRoaXNbMF0gPSByKSwgdGhpcy5jb250ZXh0ID0gUSwgdGhpcy5zZWxlY3RvciA9IHQsIHRoaXMKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQubm9kZVR5cGUgPyAodGhpcy5jb250ZXh0ID0gdGhpc1swXSA9IHQsIHRoaXMubGVuZ3RoID0gMSwgdGhpcykgOiBaLmlzRnVuY3Rpb24odCkgPyAidW5kZWZpbmVkIiAhPSB0eXBlb2YgdXQucmVhZHkgPyB1dC5yZWFkeSh0KSA6IHQoWikgOiAodm9pZCAwICE9PSB0LnNlbGVjdG9yICYmICh0aGlzLnNlbGVjdG9yID0gdC5zZWxlY3RvciwgdGhpcy5jb250ZXh0ID0gdC5jb250ZXh0KSwgWi5tYWtlQXJyYXkodCwgdGhpcykpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICBsdC5wcm90b3R5cGUgPSBaLmZuLCB1dCA9IFooUSk7CiAgICAgICAgICAgIHZhciBmdCA9IC9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLAogICAgICAgICAgICAgICAgcHQgPSB7CiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46ICEwLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiAhMCwKICAgICAgICAgICAgICAgICAgICBuZXh0OiAhMCwKICAgICAgICAgICAgICAgICAgICBwcmV2OiAhMAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgWi5leHRlbmQoewogICAgICAgICAgICAgICAgZGlyOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IFtdLCBpID0gdm9pZCAwICE9PSBuOwogICAgICAgICAgICAgICAgICAgICAgICAodCA9IHRbZV0pICYmIDkgIT09IHQubm9kZVR5cGU7KQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gdC5ub2RlVHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgJiYgWih0KS5pcyhuKSkgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLnB1c2godCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2libGluZzogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSBbXTsgdDsgdCA9IHQubmV4dFNpYmxpbmcpIDEgPT09IHQubm9kZVR5cGUgJiYgdCAhPT0gZSAmJiBuLnB1c2godCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZm4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgIGhhczogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gWih0LCB0aGlzKSwKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDA7IG4gPiB0OyB0KyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoWi5jb250YWlucyh0aGlzLCBlW3RdKSkgcmV0dXJuICEwCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjbG9zZXN0OiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiwgciA9IDAsIGkgPSB0aGlzLmxlbmd0aCwgbyA9IFtdLCBhID0gb3QudGVzdCh0KSB8fCAic3RyaW5nIiAhPSB0eXBlb2YgdCA/IFoodCwgZSB8fCB0aGlzLmNvbnRleHQpIDogMDsgaSA+IHI7IHIrKykKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChuID0gdGhpc1tyXTsgbiAmJiBuICE9PSBlOyBuID0gbi5wYXJlbnROb2RlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4ubm9kZVR5cGUgPCAxMSAmJiAoYSA/IGEuaW5kZXgobikgPiAtMSA6IDEgPT09IG4ubm9kZVR5cGUgJiYgWi5maW5kLm1hdGNoZXNTZWxlY3RvcihuLCB0KSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2gobik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoU3RhY2soby5sZW5ndGggPiAxID8gWi51bmlxdWUobykgOiBvKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluZGV4OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPyAic3RyaW5nIiA9PSB0eXBlb2YgdCA/IFYuY2FsbChaKHQpLCB0aGlzWzBdKSA6IFYuY2FsbCh0aGlzLCB0LmpxdWVyeSA/IHRbMF0gOiB0KSA6IHRoaXNbMF0gJiYgdGhpc1swXS5wYXJlbnROb2RlID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFkZDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2hTdGFjayhaLnVuaXF1ZShaLm1lcmdlKHRoaXMuZ2V0KCksIFoodCwgZSkpKSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhZGRCYWNrOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkKG51bGwgPT0gdCA/IHRoaXMucHJldk9iamVjdCA6IHRoaXMucHJldk9iamVjdC5maWx0ZXIodCkpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmVhY2goewogICAgICAgICAgICAgICAgcGFyZW50OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0LnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgJiYgMTEgIT09IGUubm9kZVR5cGUgPyBlIDogbnVsbAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBhcmVudHM6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWi5kaXIodCwgInBhcmVudE5vZGUiKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBhcmVudHNVbnRpbDogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBaLmRpcih0LCAicGFyZW50Tm9kZSIsIG4pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpKHQsICJuZXh0U2libGluZyIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcHJldjogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpKHQsICJwcmV2aW91c1NpYmxpbmciKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG5leHRBbGw6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWi5kaXIodCwgIm5leHRTaWJsaW5nIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwcmV2QWxsOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouZGlyKHQsICJwcmV2aW91c1NpYmxpbmciKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG5leHRVbnRpbDogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBaLmRpcih0LCAibmV4dFNpYmxpbmciLCBuKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHByZXZVbnRpbDogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBaLmRpcih0LCAicHJldmlvdXNTaWJsaW5nIiwgbikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzaWJsaW5nczogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBaLnNpYmxpbmcoKHQucGFyZW50Tm9kZSB8fCB7fSkuZmlyc3RDaGlsZCwgdCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjaGlsZHJlbjogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBaLnNpYmxpbmcodC5maXJzdENoaWxkKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuY29udGVudERvY3VtZW50IHx8IFoubWVyZ2UoW10sIHQuY2hpbGROb2RlcykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgWi5mblt0XSA9IGZ1bmN0aW9uKG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IFoubWFwKHRoaXMsIGUsIG4pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAiVW50aWwiICE9PSB0LnNsaWNlKC01KSAmJiAociA9IG4pLCByICYmICJzdHJpbmciID09IHR5cGVvZiByICYmIChpID0gWi5maWx0ZXIociwgaSkpLCB0aGlzLmxlbmd0aCA+IDEgJiYgKHB0W3RdIHx8IFoudW5pcXVlKGkpLCBmdC50ZXN0KHQpICYmIGkucmV2ZXJzZSgpKSwgdGhpcy5wdXNoU3RhY2soaSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBodCA9IC9cUysvZywKICAgICAgICAgICAgICAgIGR0ID0ge307CiAgICAgICAgICAgIFouQ2FsbGJhY2tzID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdCA9ICJzdHJpbmciID09IHR5cGVvZiB0ID8gZHRbdF0gfHwgbyh0KSA6IFouZXh0ZW5kKHt9LCB0KTsKICAgICAgICAgICAgICAgIHZhciBlLCBuLCByLCBpLCBhLCBzLCB1ID0gW10sCiAgICAgICAgICAgICAgICAgICAgYyA9ICF0Lm9uY2UgJiYgW10sCiAgICAgICAgICAgICAgICAgICAgbCA9IGZ1bmN0aW9uKG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChlID0gdC5tZW1vcnkgJiYgbywgbiA9ICEwLCBzID0gaSB8fCAwLCBpID0gMCwgYSA9IHUubGVuZ3RoLCByID0gITA7IHUgJiYgYSA+IHM7IHMrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1W3NdLmFwcGx5KG9bMF0sIG9bMV0pID09PSAhMSAmJiB0LnN0b3BPbkZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9ICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAhMSwgdSAmJiAoYyA/IGMubGVuZ3RoICYmIGwoYy5zaGlmdCgpKSA6IGUgPyB1ID0gW10gOiBmLmRpc2FibGUoKSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGYgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgISBmdW5jdGlvbiBvKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWi5lYWNoKGUsIGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gWi50eXBlKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PT0gciA/IHQudW5pcXVlICYmIGYuaGFzKG4pIHx8IHUucHVzaChuKSA6IG4gJiYgbi5sZW5ndGggJiYgInN0cmluZyIgIT09IHIgJiYgbyhuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oYXJndW1lbnRzKSwgciA/IGEgPSB1Lmxlbmd0aCA6IGUgJiYgKGkgPSBuLCBsKGUpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1ICYmIFouZWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobiA9IFouaW5BcnJheShlLCB1LCBuKSkgPiAtMTspIHUuc3BsaWNlKG4sIDEpLCByICYmIChhID49IG4gJiYgYS0tLCBzID49IG4gJiYgcy0tKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaGFzOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA/IFouaW5BcnJheSh0LCB1KSA+IC0xIDogISghdSB8fCAhdS5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1ID0gW10sIGEgPSAwLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUgPSBjID0gZSA9IHZvaWQgMCwgdGhpcwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgbG9jazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYyA9IHZvaWQgMCwgZSB8fCBmLmRpc2FibGUoKSwgdGhpcwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBsb2NrZWQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFjCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVXaXRoOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXUgfHwgbiAmJiAhYyB8fCAoZSA9IGUgfHwgW10sIGUgPSBbdCwgZS5zbGljZSA/IGUuc2xpY2UoKSA6IGVdLCByID8gYy5wdXNoKGUpIDogbChlKSksIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZi5maXJlV2l0aCh0aGlzLCBhcmd1bWVudHMpLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVkOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhIW4KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gZgogICAgICAgICAgICB9LCBaLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBEZWZlcnJlZDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJyZXNvbHZlIiwgImRvbmUiLCBaLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwgInJlc29sdmVkIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbInJlamVjdCIsICJmYWlsIiwgWi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksICJyZWplY3RlZCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJub3RpZnkiLCAicHJvZ3Jlc3MiLCBaLkNhbGxiYWNrcygibWVtb3J5IildCiAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAicGVuZGluZyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHdheXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLmRvbmUoYXJndW1lbnRzKS5mYWlsKGFyZ3VtZW50cyksIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVuOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGFyZ3VtZW50czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWi5EZWZlcnJlZChmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFouZWFjaChlLCBmdW5jdGlvbihlLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IFouaXNGdW5jdGlvbih0W2VdKSAmJiB0W2VdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaVtvWzFdXShmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGEgJiYgYS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgWi5pc0Z1bmN0aW9uKHQucHJvbWlzZSkgPyB0LnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpIDogbltvWzBdICsgIldpdGgiXSh0aGlzID09PSByID8gbi5wcm9taXNlKCkgOiB0aGlzLCBhID8gW3RdIDogYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIHQgPSBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkucHJvbWlzZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9IHQgPyBaLmV4dGVuZCh0LCByKSA6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHt9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiByLnBpcGUgPSByLnRoZW4sIFouZWFjaChlLCBmdW5jdGlvbih0LCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gb1syXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBvWzNdOwogICAgICAgICAgICAgICAgICAgICAgICByW29bMV1dID0gYS5hZGQsIHMgJiYgYS5hZGQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gcwogICAgICAgICAgICAgICAgICAgICAgICB9LCBlWzEgXiB0XVsyXS5kaXNhYmxlLCBlWzJdWzJdLmxvY2spLCBpW29bMF1dID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaVtvWzBdICsgIldpdGgiXSh0aGlzID09PSBpID8gciA6IHRoaXMsIGFyZ3VtZW50cyksIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgfSwgaVtvWzBdICsgIldpdGgiXSA9IGEuZmlyZVdpdGgKICAgICAgICAgICAgICAgICAgICB9KSwgci5wcm9taXNlKGkpLCB0ICYmIHQuY2FsbChpLCBpKSwgaQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHdoZW46IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSwgbiwgciwgaSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBVLmNhbGwoYXJndW1lbnRzKSwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG8ubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICBzID0gMSAhPT0gYSB8fCB0ICYmIFouaXNGdW5jdGlvbih0LnByb21pc2UpID8gYSA6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSAxID09PSBzID8gdCA6IFouRGVmZXJyZWQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGZ1bmN0aW9uKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgblt0XSA9IHRoaXMsIHJbdF0gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IFUuY2FsbChhcmd1bWVudHMpIDogaSwgciA9PT0gZSA/IHUubm90aWZ5V2l0aChuLCByKSA6IC0tcyB8fCB1LnJlc29sdmVXaXRoKG4sIHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgaWYgKGEgPiAxKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSBuZXcgQXJyYXkoYSksIG4gPSBuZXcgQXJyYXkoYSksIHIgPSBuZXcgQXJyYXkoYSk7IGEgPiBpOyBpKyspIG9baV0gJiYgWi5pc0Z1bmN0aW9uKG9baV0ucHJvbWlzZSkgPyBvW2ldLnByb21pc2UoKS5kb25lKGMoaSwgciwgbykpLmZhaWwodS5yZWplY3QpLnByb2dyZXNzKGMoaSwgbiwgZSkpIDogLS1zOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBzIHx8IHUucmVzb2x2ZVdpdGgociwgbyksIHUucHJvbWlzZSgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgZ3Q7CiAgICAgICAgICAgIFouZm4ucmVhZHkgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gWi5yZWFkeS5wcm9taXNlKCkuZG9uZSh0KSwgdGhpcwogICAgICAgICAgICB9LCBaLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBpc1JlYWR5OiAhMSwKICAgICAgICAgICAgICAgIHJlYWR5V2FpdDogMSwKICAgICAgICAgICAgICAgIGhvbGRSZWFkeTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHQgPyBaLnJlYWR5V2FpdCsrIDogWi5yZWFkeSghMCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZWFkeTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICh0ID09PSAhMCA/IC0tWi5yZWFkeVdhaXQgOiBaLmlzUmVhZHkpIHx8IChaLmlzUmVhZHkgPSAhMCwgdCAhPT0gITAgJiYgLS1aLnJlYWR5V2FpdCA+IDAgfHwgKGd0LnJlc29sdmVXaXRoKFEsIFtaXSksIFouZm4udHJpZ2dlckhhbmRsZXIgJiYgKFooUSkudHJpZ2dlckhhbmRsZXIoInJlYWR5IiksIFooUSkub2ZmKCJyZWFkeSIpKSkpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLnJlYWR5LnByb21pc2UgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZ3QgfHwgKGd0ID0gWi5EZWZlcnJlZCgpLCAiY29tcGxldGUiID09PSBRLnJlYWR5U3RhdGUgPyBzZXRUaW1lb3V0KFoucmVhZHkpIDogKFEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGEsICExKSwgdC5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgYSwgITEpKSksIGd0LnByb21pc2UoZSkKICAgICAgICAgICAgfSwgWi5yZWFkeS5wcm9taXNlKCk7CiAgICAgICAgICAgIHZhciB2dCA9IFouYWNjZXNzID0gZnVuY3Rpb24odCwgZSwgbiwgciwgaSwgbywgYSkgewogICAgICAgICAgICAgICAgdmFyIHMgPSAwLAogICAgICAgICAgICAgICAgICAgIHUgPSB0Lmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICBjID0gbnVsbCA9PSBuOwogICAgICAgICAgICAgICAgaWYgKCJvYmplY3QiID09PSBaLnR5cGUobikpIHsKICAgICAgICAgICAgICAgICAgICBpID0gITA7CiAgICAgICAgICAgICAgICAgICAgZm9yIChzIGluIG4pIFouYWNjZXNzKHQsIGUsIHMsIG5bc10sICEwLCBvLCBhKQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2b2lkIDAgIT09IHIgJiYgKGkgPSAhMCwgWi5pc0Z1bmN0aW9uKHIpIHx8IChhID0gITApLCBjICYmIChhID8gKGUuY2FsbCh0LCByKSwgZSA9IG51bGwpIDogKGMgPSBlLCBlID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYy5jYWxsKFoodCksIG4pCiAgICAgICAgICAgICAgICAgICAgfSkpLCBlKSkKICAgICAgICAgICAgICAgICAgICBmb3IgKDsgdSA+IHM7IHMrKykgZSh0W3NdLCBuLCBhID8gciA6IHIuY2FsbCh0W3NdLCBzLCBlKHRbc10sIG4pKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gaSA/IHQgOiBjID8gZS5jYWxsKHQpIDogdSA/IGUodFswXSwgbikgOiBvCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIFouYWNjZXB0RGF0YSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAxID09PSB0Lm5vZGVUeXBlIHx8IDkgPT09IHQubm9kZVR5cGUgfHwgISt0Lm5vZGVUeXBlCiAgICAgICAgICAgIH0sIHMudWlkID0gMSwgcy5hY2NlcHRzID0gWi5hY2NlcHREYXRhLCBzLnByb3RvdHlwZSA9IHsKICAgICAgICAgICAgICAgIGtleTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIGlmICghcy5hY2NlcHRzKHQpKSByZXR1cm4gMDsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHt9LAogICAgICAgICAgICAgICAgICAgICAgICBuID0gdFt0aGlzLmV4cGFuZG9dOwogICAgICAgICAgICAgICAgICAgIGlmICghbikgewogICAgICAgICAgICAgICAgICAgICAgICBuID0gcy51aWQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVbdGhpcy5leHBhbmRvXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZVt0aGlzLmV4cGFuZG9dID0gbiwgWi5leHRlbmQodCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVtuXSB8fCAodGhpcy5jYWNoZVtuXSA9IHt9KSwgbgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciByLCBpID0gdGhpcy5rZXkodCksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0aGlzLmNhY2hlW2ldOwogICAgICAgICAgICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkgb1tlXSA9IG47CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoWi5pc0VtcHR5T2JqZWN0KG8pKSBaLmV4dGVuZCh0aGlzLmNhY2hlW2ldLCBlKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAociBpbiBlKSBvW3JdID0gZVtyXTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5jYWNoZVt0aGlzLmtleSh0KV07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZSA/IG4gOiBuW2VdCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYWNjZXNzOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZSB8fCBlICYmICJzdHJpbmciID09IHR5cGVvZiBlICYmIHZvaWQgMCA9PT0gbiA/IChyID0gdGhpcy5nZXQodCwgZSksIHZvaWQgMCAhPT0gciA/IHIgOiB0aGlzLmdldCh0LCBaLmNhbWVsQ2FzZShlKSkpIDogKHRoaXMuc2V0KHQsIGUsIG4pLCB2b2lkIDAgIT09IG4gPyBuIDogZSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgaSwgbyA9IHRoaXMua2V5KHQpLAogICAgICAgICAgICAgICAgICAgICAgICBhID0gdGhpcy5jYWNoZVtvXTsKICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBlKSB0aGlzLmNhY2hlW29dID0ge307CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFouaXNBcnJheShlKSA/IHIgPSBlLmNvbmNhdChlLm1hcChaLmNhbWVsQ2FzZSkpIDogKGkgPSBaLmNhbWVsQ2FzZShlKSwgZSBpbiBhID8gciA9IFtlLCBpXSA6IChyID0gaSwgciA9IHIgaW4gYSA/IFtyXSA6IHIubWF0Y2goaHQpIHx8IFtdKSksIG4gPSByLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IG4tLTspIGRlbGV0ZSBhW3Jbbl1dCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGhhc0RhdGE6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIVouaXNFbXB0eU9iamVjdCh0aGlzLmNhY2hlW3RbdGhpcy5leHBhbmRvXV0gfHwge30pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZGlzY2FyZDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHRbdGhpcy5leHBhbmRvXSAmJiBkZWxldGUgdGhpcy5jYWNoZVt0W3RoaXMuZXhwYW5kb11dCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciB5dCA9IG5ldyBzLAogICAgICAgICAgICAgICAgbXQgPSBuZXcgcywKICAgICAgICAgICAgICAgIGJ0ID0gL14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLywKICAgICAgICAgICAgICAgIHh0ID0gLyhbQS1aXSkvZzsKICAgICAgICAgICAgWi5leHRlbmQoewogICAgICAgICAgICAgICAgaGFzRGF0YTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBtdC5oYXNEYXRhKHQpIHx8IHl0Lmhhc0RhdGEodCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkYXRhOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG10LmFjY2Vzcyh0LCBlLCBuKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlbW92ZURhdGE6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBtdC5yZW1vdmUodCwgZSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfZGF0YTogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB5dC5hY2Nlc3ModCwgZSwgbikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfcmVtb3ZlRGF0YTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHl0LnJlbW92ZSh0LCBlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5mbi5leHRlbmQoewogICAgICAgICAgICAgICAgZGF0YTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBpLCBvID0gdGhpc1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG8gJiYgby5hdHRyaWJ1dGVzOwogICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubGVuZ3RoICYmIChpID0gbXQuZ2V0KG8pLCAxID09PSBvLm5vZGVUeXBlICYmICF5dC5nZXQobywgImhhc0RhdGFBdHRycyIpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChuID0gYS5sZW5ndGg7IG4tLTspIGFbbl0gJiYgKHIgPSBhW25dLm5hbWUsIDAgPT09IHIuaW5kZXhPZigiZGF0YS0iKSAmJiAociA9IFouY2FtZWxDYXNlKHIuc2xpY2UoNSkpLCB1KG8sIHIsIGlbcl0pKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5dC5zZXQobywgImhhc0RhdGFBdHRycyIsICEwKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiAib2JqZWN0IiA9PSB0eXBlb2YgdCA/IHRoaXMuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbXQuc2V0KHRoaXMsIHQpCiAgICAgICAgICAgICAgICAgICAgfSkgOiB2dCh0aGlzLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByID0gWi5jYW1lbENhc2UodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvICYmIHZvaWQgMCA9PT0gZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPSBtdC5nZXQobywgdCksIHZvaWQgMCAhPT0gbikgcmV0dXJuIG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IG10LmdldChvLCByKSwgdm9pZCAwICE9PSBuKSByZXR1cm4gbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gdShvLCByLCB2b2lkIDApLCB2b2lkIDAgIT09IG4pIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG10LmdldCh0aGlzLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG10LnNldCh0aGlzLCByLCBlKSwgLTEgIT09IHQuaW5kZXhPZigiLSIpICYmIHZvaWQgMCAhPT0gbiAmJiBtdC5zZXQodGhpcywgdCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9LCBudWxsLCBlLCBhcmd1bWVudHMubGVuZ3RoID4gMSwgbnVsbCwgITApCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVtb3ZlRGF0YTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG10LnJlbW92ZSh0aGlzLCB0KQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBxdWV1ZTogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciByOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID8gKGUgPSAoZSB8fCAiZngiKSArICJxdWV1ZSIsIHIgPSB5dC5nZXQodCwgZSksIG4gJiYgKCFyIHx8IFouaXNBcnJheShuKSA/IHIgPSB5dC5hY2Nlc3ModCwgZSwgWi5tYWtlQXJyYXkobikpIDogci5wdXNoKG4pKSwgciB8fCBbXSkgOiB2b2lkIDAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkZXF1ZXVlOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZSA9IGUgfHwgImZ4IjsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IFoucXVldWUodCwgZSksCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBuLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG4uc2hpZnQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFouX3F1ZXVlSG9va3ModCwgZSksCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFouZGVxdWV1ZSh0LCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICJpbnByb2dyZXNzIiA9PT0gaSAmJiAoaSA9IG4uc2hpZnQoKSwgci0tKSwgaSAmJiAoImZ4IiA9PT0gZSAmJiBuLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSwgZGVsZXRlIG8uc3RvcCwgaS5jYWxsKHQsIGEsIG8pKSwgIXIgJiYgbyAmJiBvLmVtcHR5LmZpcmUoKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9xdWV1ZUhvb2tzOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlICsgInF1ZXVlSG9va3MiOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB5dC5nZXQodCwgbikgfHwgeXQuYWNjZXNzKHQsIG4sIHsKICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHk6IFouQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHl0LnJlbW92ZSh0LCBbZSArICJxdWV1ZSIsIG5dKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmZuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBxdWV1ZTogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gMjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gInN0cmluZyIgIT0gdHlwZW9mIHQgJiYgKGUgPSB0LCB0ID0gImZ4Iiwgbi0tKSwgYXJndW1lbnRzLmxlbmd0aCA8IG4gPyBaLnF1ZXVlKHRoaXNbMF0sIHQpIDogdm9pZCAwID09PSBlID8gdGhpcyA6IHRoaXMuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBaLnF1ZXVlKHRoaXMsIHQsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICBaLl9xdWV1ZUhvb2tzKHRoaXMsIHQpLCAiZngiID09PSB0ICYmICJpbnByb2dyZXNzIiAhPT0gblswXSAmJiBaLmRlcXVldWUodGhpcywgdCkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRlcXVldWU6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBaLmRlcXVldWUodGhpcywgdCkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNsZWFyUXVldWU6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZSh0IHx8ICJmeCIsIFtdKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHByb21pc2U6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciA9IDEsCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBaLkRlZmVycmVkKCksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICBhID0gdGhpcy5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tciB8fCBpLnJlc29sdmVXaXRoKG8sIFtvXSkKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBmb3IgKCJzdHJpbmciICE9IHR5cGVvZiB0ICYmIChlID0gdCwgdCA9IHZvaWQgMCksIHQgPSB0IHx8ICJmeCI7IGEtLTspIG4gPSB5dC5nZXQob1thXSwgdCArICJxdWV1ZUhvb2tzIiksIG4gJiYgbi5lbXB0eSAmJiAocisrLCBuLmVtcHR5LmFkZChzKSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMoKSwgaS5wcm9taXNlKGUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgd3QgPSAvWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvLnNvdXJjZSwKICAgICAgICAgICAgICAgIF90ID0gWyJUb3AiLCAiUmlnaHQiLCAiQm90dG9tIiwgIkxlZnQiXSwKICAgICAgICAgICAgICAgIGt0ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gZSB8fCB0LCAibm9uZSIgPT09IFouY3NzKHQsICJkaXNwbGF5IikgfHwgIVouY29udGFpbnModC5vd25lckRvY3VtZW50LCB0KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFR0ID0gL14oPzpjaGVja2JveHxyYWRpbykkL2k7CiAgICAgICAgICAgICEgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IFEuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLAogICAgICAgICAgICAgICAgICAgIGUgPSB0LmFwcGVuZENoaWxkKFEuY3JlYXRlRWxlbWVudCgiZGl2IikpLAogICAgICAgICAgICAgICAgICAgIG4gPSBRLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgICAgICAgICAgICBuLnNldEF0dHJpYnV0ZSgidHlwZSIsICJyYWRpbyIpLCBuLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsICJjaGVja2VkIiksIG4uc2V0QXR0cmlidXRlKCJuYW1lIiwgInQiKSwgZS5hcHBlbmRDaGlsZChuKSwgWS5jaGVja0Nsb25lID0gZS5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsIGUuaW5uZXJIVE1MID0gIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iLCBZLm5vQ2xvbmVDaGVja2VkID0gISFlLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZQogICAgICAgICAgICB9KCk7CiAgICAgICAgICAgIHZhciBFdCA9ICJ1bmRlZmluZWQiOwogICAgICAgICAgICBZLmZvY3VzaW5CdWJibGVzID0gIm9uZm9jdXNpbiIgaW4gdDsKICAgICAgICAgICAgdmFyIGp0ID0gL15rZXkvLAogICAgICAgICAgICAgICAgQ3QgPSAvXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnUpfGNsaWNrLywKICAgICAgICAgICAgICAgIFN0ID0gL14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLAogICAgICAgICAgICAgICAgQXQgPSAvXihbXi5dKikoPzpcLiguKyl8KSQvOwogICAgICAgICAgICBaLmV2ZW50ID0gewogICAgICAgICAgICAgICAgZ2xvYmFsOiB7fSwKICAgICAgICAgICAgICAgIGFkZDogZnVuY3Rpb24odCwgZSwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgIHZhciBvLCBhLCBzLCB1LCBjLCBsLCBmLCBwLCBoLCBkLCBnLCB2ID0geXQuZ2V0KHQpOwogICAgICAgICAgICAgICAgICAgIGlmICh2KQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG4uaGFuZGxlciAmJiAobyA9IG4sIG4gPSBvLmhhbmRsZXIsIGkgPSBvLnNlbGVjdG9yKSwgbi5ndWlkIHx8IChuLmd1aWQgPSBaLmd1aWQrKyksICh1ID0gdi5ldmVudHMpIHx8ICh1ID0gdi5ldmVudHMgPSB7fSksIChhID0gdi5oYW5kbGUpIHx8IChhID0gdi5oYW5kbGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBaICE9PSBFdCAmJiBaLmV2ZW50LnRyaWdnZXJlZCAhPT0gZS50eXBlID8gWi5ldmVudC5kaXNwYXRjaC5hcHBseSh0LCBhcmd1bWVudHMpIDogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgZSA9IChlIHx8ICIiKS5tYXRjaChodCkgfHwgWyIiXSwgYyA9IGUubGVuZ3RoOyBjLS07KSBzID0gQXQuZXhlYyhlW2NdKSB8fCBbXSwgaCA9IGcgPSBzWzFdLCBkID0gKHNbMl0gfHwgIiIpLnNwbGl0KCIuIikuc29ydCgpLCBoICYmIChmID0gWi5ldmVudC5zcGVjaWFsW2hdIHx8IHt9LCBoID0gKGkgPyBmLmRlbGVnYXRlVHlwZSA6IGYuYmluZFR5cGUpIHx8IGgsIGYgPSBaLmV2ZW50LnNwZWNpYWxbaF0gfHwge30sIGwgPSBaLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ1R5cGU6IGcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcjogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd1aWQ6IG4uZ3VpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVlZHNDb250ZXh0OiBpICYmIFouZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogZC5qb2luKCIuIikKICAgICAgICAgICAgICAgICAgICAgICAgfSwgbyksIChwID0gdVtoXSkgfHwgKHAgPSB1W2hdID0gW10sIHAuZGVsZWdhdGVDb3VudCA9IDAsIGYuc2V0dXAgJiYgZi5zZXR1cC5jYWxsKHQsIHIsIGQsIGEpICE9PSAhMSB8fCB0LmFkZEV2ZW50TGlzdGVuZXIgJiYgdC5hZGRFdmVudExpc3RlbmVyKGgsIGEsICExKSksIGYuYWRkICYmIChmLmFkZC5jYWxsKHQsIGwpLCBsLmhhbmRsZXIuZ3VpZCB8fCAobC5oYW5kbGVyLmd1aWQgPSBuLmd1aWQpKSwgaSA/IHAuc3BsaWNlKHAuZGVsZWdhdGVDb3VudCsrLCAwLCBsKSA6IHAucHVzaChsKSwgWi5ldmVudC5nbG9iYWxbaF0gPSAhMCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKHQsIGUsIG4sIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbywgYSwgcywgdSwgYywgbCwgZiwgcCwgaCwgZCwgZywgdiA9IHl0Lmhhc0RhdGEodCkgJiYgeXQuZ2V0KHQpOwogICAgICAgICAgICAgICAgICAgIGlmICh2ICYmICh1ID0gdi5ldmVudHMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZSA9IChlIHx8ICIiKS5tYXRjaChodCkgfHwgWyIiXSwgYyA9IGUubGVuZ3RoOyBjLS07KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgPSBBdC5leGVjKGVbY10pIHx8IFtdLCBoID0gZyA9IHNbMV0sIGQgPSAoc1syXSB8fCAiIikuc3BsaXQoIi4iKS5zb3J0KCksIGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGYgPSBaLmV2ZW50LnNwZWNpYWxbaF0gfHwge30sIGggPSAociA/IGYuZGVsZWdhdGVUeXBlIDogZi5iaW5kVHlwZSkgfHwgaCwgcCA9IHVbaF0gfHwgW10sIHMgPSBzWzJdICYmIG5ldyBSZWdFeHAoIihefFxcLikiICsgZC5qb2luKCJcXC4oPzouKlxcLnwpIikgKyAiKFxcLnwkKSIpLCBhID0gbyA9IHAubGVuZ3RoOyBvLS07KSBsID0gcFtvXSwgIWkgJiYgZyAhPT0gbC5vcmlnVHlwZSB8fCBuICYmIG4uZ3VpZCAhPT0gbC5ndWlkIHx8IHMgJiYgIXMudGVzdChsLm5hbWVzcGFjZSkgfHwgciAmJiByICE9PSBsLnNlbGVjdG9yICYmICgiKioiICE9PSByIHx8ICFsLnNlbGVjdG9yKSB8fCAocC5zcGxpY2UobywgMSksIGwuc2VsZWN0b3IgJiYgcC5kZWxlZ2F0ZUNvdW50LS0sIGYucmVtb3ZlICYmIGYucmVtb3ZlLmNhbGwodCwgbCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgJiYgIXAubGVuZ3RoICYmIChmLnRlYXJkb3duICYmIGYudGVhcmRvd24uY2FsbCh0LCBkLCB2LmhhbmRsZSkgIT09ICExIHx8IFoucmVtb3ZlRXZlbnQodCwgaCwgdi5oYW5kbGUpLCBkZWxldGUgdVtoXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaCBpbiB1KSBaLmV2ZW50LnJlbW92ZSh0LCBoICsgZVtjXSwgbiwgciwgITApOwogICAgICAgICAgICAgICAgICAgICAgICBaLmlzRW1wdHlPYmplY3QodSkgJiYgKGRlbGV0ZSB2LmhhbmRsZSwgeXQucmVtb3ZlKHQsICJldmVudHMiKSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdHJpZ2dlcjogZnVuY3Rpb24oZSwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgIHZhciBvLCBhLCBzLCB1LCBjLCBsLCBmLCBwID0gW3IgfHwgUV0sCiAgICAgICAgICAgICAgICAgICAgICAgIGggPSBKLmNhbGwoZSwgInR5cGUiKSA/IGUudHlwZSA6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBKLmNhbGwoZSwgIm5hbWVzcGFjZSIpID8gZS5uYW1lc3BhY2Uuc3BsaXQoIi4iKSA6IFtdOwogICAgICAgICAgICAgICAgICAgIGlmIChhID0gcyA9IHIgPSByIHx8IFEsIDMgIT09IHIubm9kZVR5cGUgJiYgOCAhPT0gci5ub2RlVHlwZSAmJiAhU3QudGVzdChoICsgWi5ldmVudC50cmlnZ2VyZWQpICYmIChoLmluZGV4T2YoIi4iKSA+PSAwICYmIChkID0gaC5zcGxpdCgiLiIpLCBoID0gZC5zaGlmdCgpLCBkLnNvcnQoKSksIGMgPSBoLmluZGV4T2YoIjoiKSA8IDAgJiYgIm9uIiArIGgsIGUgPSBlW1ouZXhwYW5kb10gPyBlIDogbmV3IFouRXZlbnQoaCwgIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgZSksIGUuaXNUcmlnZ2VyID0gaSA/IDIgOiAzLCBlLm5hbWVzcGFjZSA9IGQuam9pbigiLiIpLCBlLm5hbWVzcGFjZV9yZSA9IGUubmFtZXNwYWNlID8gbmV3IFJlZ0V4cCgiKF58XFwuKSIgKyBkLmpvaW4oIlxcLig/Oi4qXFwufCkiKSArICIoXFwufCQpIikgOiBudWxsLCBlLnJlc3VsdCA9IHZvaWQgMCwgZS50YXJnZXQgfHwgKGUudGFyZ2V0ID0gciksIG4gPSBudWxsID09IG4gPyBbZV0gOiBaLm1ha2VBcnJheShuLCBbZV0pLCBmID0gWi5ldmVudC5zcGVjaWFsW2hdIHx8IHt9LCBpIHx8ICFmLnRyaWdnZXIgfHwgZi50cmlnZ2VyLmFwcGx5KHIsIG4pICE9PSAhMSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpICYmICFmLm5vQnViYmxlICYmICFaLmlzV2luZG93KHIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHUgPSBmLmRlbGVnYXRlVHlwZSB8fCBoLCBTdC50ZXN0KHUgKyBoKSB8fCAoYSA9IGEucGFyZW50Tm9kZSk7IGE7IGEgPSBhLnBhcmVudE5vZGUpIHAucHVzaChhKSwgcyA9IGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID09PSAoci5vd25lckRvY3VtZW50IHx8IFEpICYmIHAucHVzaChzLmRlZmF1bHRWaWV3IHx8IHMucGFyZW50V2luZG93IHx8IHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhID0gcFtvKytdKSAmJiAhZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpOykgZS50eXBlID0gbyA+IDEgPyB1IDogZi5iaW5kVHlwZSB8fCBoLCBsID0gKHl0LmdldChhLCAiZXZlbnRzIikgfHwge30pW2UudHlwZV0gJiYgeXQuZ2V0KGEsICJoYW5kbGUiKSwgbCAmJiBsLmFwcGx5KGEsIG4pLCBsID0gYyAmJiBhW2NdLCBsICYmIGwuYXBwbHkgJiYgWi5hY2NlcHREYXRhKGEpICYmIChlLnJlc3VsdCA9IGwuYXBwbHkoYSwgbiksIGUucmVzdWx0ID09PSAhMSAmJiBlLnByZXZlbnREZWZhdWx0KCkpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS50eXBlID0gaCwgaSB8fCBlLmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8IGYuX2RlZmF1bHQgJiYgZi5fZGVmYXVsdC5hcHBseShwLnBvcCgpLCBuKSAhPT0gITEgfHwgIVouYWNjZXB0RGF0YShyKSB8fCBjICYmIFouaXNGdW5jdGlvbihyW2hdKSAmJiAhWi5pc1dpbmRvdyhyKSAmJiAocyA9IHJbY10sIHMgJiYgKHJbY10gPSBudWxsKSwgWi5ldmVudC50cmlnZ2VyZWQgPSBoLCByW2hdKCksIFouZXZlbnQudHJpZ2dlcmVkID0gdm9pZCAwLCBzICYmIChyW2NdID0gcykpLCBlLnJlc3VsdAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkaXNwYXRjaDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHQgPSBaLmV2ZW50LmZpeCh0KTsKICAgICAgICAgICAgICAgICAgICB2YXIgZSwgbiwgciwgaSwgbywgYSA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICBzID0gVS5jYWxsKGFyZ3VtZW50cyksCiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSAoeXQuZ2V0KHRoaXMsICJldmVudHMiKSB8fCB7fSlbdC50eXBlXSB8fCBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgYyA9IFouZXZlbnQuc3BlY2lhbFt0LnR5cGVdIHx8IHt9OwogICAgICAgICAgICAgICAgICAgIGlmIChzWzBdID0gdCwgdC5kZWxlZ2F0ZVRhcmdldCA9IHRoaXMsICFjLnByZURpc3BhdGNoIHx8IGMucHJlRGlzcGF0Y2guY2FsbCh0aGlzLCB0KSAhPT0gITEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChhID0gWi5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsIHQsIHUpLCBlID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpID0gYVtlKytdKSAmJiAhdC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodC5jdXJyZW50VGFyZ2V0ID0gaS5lbGVtLCBuID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobyA9IGkuaGFuZGxlcnNbbisrXSkgJiYgIXQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKTspKCF0Lm5hbWVzcGFjZV9yZSB8fCB0Lm5hbWVzcGFjZV9yZS50ZXN0KG8ubmFtZXNwYWNlKSkgJiYgKHQuaGFuZGxlT2JqID0gbywgdC5kYXRhID0gby5kYXRhLCByID0gKChaLmV2ZW50LnNwZWNpYWxbby5vcmlnVHlwZV0gfHwge30pLmhhbmRsZSB8fCBvLmhhbmRsZXIpLmFwcGx5KGkuZWxlbSwgcyksIHZvaWQgMCAhPT0gciAmJiAodC5yZXN1bHQgPSByKSA9PT0gITEgJiYgKHQucHJldmVudERlZmF1bHQoKSwgdC5zdG9wUHJvcGFnYXRpb24oKSkpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYy5wb3N0RGlzcGF0Y2ggJiYgYy5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLCB0KSwgdC5yZXN1bHQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaGFuZGxlcnM6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgaSwgbywgYSA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICBzID0gZS5kZWxlZ2F0ZUNvdW50LAogICAgICAgICAgICAgICAgICAgICAgICB1ID0gdC50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHMgJiYgdS5ub2RlVHlwZSAmJiAoIXQuYnV0dG9uIHx8ICJjbGljayIgIT09IHQudHlwZSkpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyB1ICE9PSB0aGlzOyB1ID0gdS5wYXJlbnROb2RlIHx8IHRoaXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodS5kaXNhYmxlZCAhPT0gITAgfHwgImNsaWNrIiAhPT0gdC50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyID0gW10sIG4gPSAwOyBzID4gbjsgbisrKSBvID0gZVtuXSwgaSA9IG8uc2VsZWN0b3IgKyAiICIsIHZvaWQgMCA9PT0gcltpXSAmJiAocltpXSA9IG8ubmVlZHNDb250ZXh0ID8gWihpLCB0aGlzKS5pbmRleCh1KSA+PSAwIDogWi5maW5kKGksIHRoaXMsIG51bGwsIFt1XSkubGVuZ3RoKSwgcltpXSAmJiByLnB1c2gobyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5sZW5ndGggJiYgYS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbTogdSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnM6IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBzIDwgZS5sZW5ndGggJiYgYS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbTogdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnM6IGUuc2xpY2UocykKICAgICAgICAgICAgICAgICAgICB9KSwgYQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHByb3BzOiAiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLAogICAgICAgICAgICAgICAgZml4SG9va3M6IHt9LAogICAgICAgICAgICAgICAga2V5SG9va3M6IHsKICAgICAgICAgICAgICAgICAgICBwcm9wczogImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGUiLnNwbGl0KCIgIiksCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQud2hpY2ggJiYgKHQud2hpY2ggPSBudWxsICE9IGUuY2hhckNvZGUgPyBlLmNoYXJDb2RlIDogZS5rZXlDb2RlKSwgdAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBtb3VzZUhvb2tzOiB7CiAgICAgICAgICAgICAgICAgICAgcHJvcHM6ICJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBpLCBvID0gZS5idXR0b247CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQucGFnZVggJiYgbnVsbCAhPSBlLmNsaWVudFggJiYgKG4gPSB0LnRhcmdldC5vd25lckRvY3VtZW50IHx8IFEsIHIgPSBuLmRvY3VtZW50RWxlbWVudCwgaSA9IG4uYm9keSwgdC5wYWdlWCA9IGUuY2xpZW50WCArIChyICYmIHIuc2Nyb2xsTGVmdCB8fCBpICYmIGkuc2Nyb2xsTGVmdCB8fCAwKSAtIChyICYmIHIuY2xpZW50TGVmdCB8fCBpICYmIGkuY2xpZW50TGVmdCB8fCAwKSwgdC5wYWdlWSA9IGUuY2xpZW50WSArIChyICYmIHIuc2Nyb2xsVG9wIHx8IGkgJiYgaS5zY3JvbGxUb3AgfHwgMCkgLSAociAmJiByLmNsaWVudFRvcCB8fCBpICYmIGkuY2xpZW50VG9wIHx8IDApKSwgdC53aGljaCB8fCB2b2lkIDAgPT09IG8gfHwgKHQud2hpY2ggPSAxICYgbyA/IDEgOiAyICYgbyA/IDMgOiA0ICYgbyA/IDIgOiAwKSwgdAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmaXg6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodFtaLmV4cGFuZG9dKSByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICB2YXIgZSwgbiwgciwgaSA9IHQudHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLmZpeEhvb2tzW2ldOwogICAgICAgICAgICAgICAgICAgIGZvciAoYSB8fCAodGhpcy5maXhIb29rc1tpXSA9IGEgPSBDdC50ZXN0KGkpID8gdGhpcy5tb3VzZUhvb2tzIDoganQudGVzdChpKSA/IHRoaXMua2V5SG9va3MgOiB7fSksIHIgPSBhLnByb3BzID8gdGhpcy5wcm9wcy5jb25jYXQoYS5wcm9wcykgOiB0aGlzLnByb3BzLCB0ID0gbmV3IFouRXZlbnQobyksIGUgPSByLmxlbmd0aDsgZS0tOykgbiA9IHJbZV0sIHRbbl0gPSBvW25dOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnRhcmdldCB8fCAodC50YXJnZXQgPSBRKSwgMyA9PT0gdC50YXJnZXQubm9kZVR5cGUgJiYgKHQudGFyZ2V0ID0gdC50YXJnZXQucGFyZW50Tm9kZSksIGEuZmlsdGVyID8gYS5maWx0ZXIodCwgbykgOiB0CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3BlY2lhbDogewogICAgICAgICAgICAgICAgICAgIGxvYWQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgbm9CdWJibGU6ICEwCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBmb2N1czogewogICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzICE9PSBmKCkgJiYgdGhpcy5mb2N1cyA/ICh0aGlzLmZvY3VzKCksICExKSA6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBkZWxlZ2F0ZVR5cGU6ICJmb2N1c2luIgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYmx1cjogewogICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzID09PSBmKCkgJiYgdGhpcy5ibHVyID8gKHRoaXMuYmx1cigpLCAhMSkgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGVsZWdhdGVUeXBlOiAiZm9jdXNvdXQiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBjbGljazogewogICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiY2hlY2tib3giID09PSB0aGlzLnR5cGUgJiYgdGhpcy5jbGljayAmJiBaLm5vZGVOYW1lKHRoaXMsICJpbnB1dCIpID8gKHRoaXMuY2xpY2soKSwgITEpIDogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF9kZWZhdWx0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWi5ub2RlTmFtZSh0LnRhcmdldCwgImEiKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBiZWZvcmV1bmxvYWQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgcG9zdERpc3BhdGNoOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHQucmVzdWx0ICYmIHQub3JpZ2luYWxFdmVudCAmJiAodC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gdC5yZXN1bHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2ltdWxhdGU6IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IFouZXh0ZW5kKG5ldyBaLkV2ZW50LCBuLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2ltdWxhdGVkOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDoge30KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByID8gWi5ldmVudC50cmlnZ2VyKGksIG51bGwsIGUpIDogWi5ldmVudC5kaXNwYXRjaC5jYWxsKGUsIGkpLCBpLmlzRGVmYXVsdFByZXZlbnRlZCgpICYmIG4ucHJldmVudERlZmF1bHQoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBaLnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgdC5yZW1vdmVFdmVudExpc3RlbmVyICYmIHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLCBuLCAhMSkKICAgICAgICAgICAgfSwgWi5FdmVudCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgWi5FdmVudCA/ICh0ICYmIHQudHlwZSA/ICh0aGlzLm9yaWdpbmFsRXZlbnQgPSB0LCB0aGlzLnR5cGUgPSB0LnR5cGUsIHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gdC5kZWZhdWx0UHJldmVudGVkIHx8IHZvaWQgMCA9PT0gdC5kZWZhdWx0UHJldmVudGVkICYmIHQucmV0dXJuVmFsdWUgPT09ICExID8gYyA6IGwpIDogdGhpcy50eXBlID0gdCwgZSAmJiBaLmV4dGVuZCh0aGlzLCBlKSwgdGhpcy50aW1lU3RhbXAgPSB0ICYmIHQudGltZVN0YW1wIHx8IFoubm93KCksIHZvaWQodGhpc1taLmV4cGFuZG9dID0gITApKSA6IG5ldyBaLkV2ZW50KHQsIGUpCiAgICAgICAgICAgIH0sIFouRXZlbnQucHJvdG90eXBlID0gewogICAgICAgICAgICAgICAgaXNEZWZhdWx0UHJldmVudGVkOiBsLAogICAgICAgICAgICAgICAgaXNQcm9wYWdhdGlvblN0b3BwZWQ6IGwsCiAgICAgICAgICAgICAgICBpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDogbCwKICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMub3JpZ2luYWxFdmVudDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGMsIHQgJiYgdC5wcmV2ZW50RGVmYXVsdCAmJiB0LnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5vcmlnaW5hbEV2ZW50OwogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSBjLCB0ICYmIHQuc3RvcFByb3BhZ2F0aW9uICYmIHQuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5vcmlnaW5hbEV2ZW50OwogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSBjLCB0ICYmIHQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uICYmIHQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksIHRoaXMuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgWi5lYWNoKHsKICAgICAgICAgICAgICAgIG1vdXNlZW50ZXI6ICJtb3VzZW92ZXIiLAogICAgICAgICAgICAgICAgbW91c2VsZWF2ZTogIm1vdXNlb3V0IiwKICAgICAgICAgICAgICAgIHBvaW50ZXJlbnRlcjogInBvaW50ZXJvdmVyIiwKICAgICAgICAgICAgICAgIHBvaW50ZXJsZWF2ZTogInBvaW50ZXJvdXQiCiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIFouZXZlbnQuc3BlY2lhbFt0XSA9IHsKICAgICAgICAgICAgICAgICAgICBkZWxlZ2F0ZVR5cGU6IGUsCiAgICAgICAgICAgICAgICAgICAgYmluZFR5cGU6IGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0LnJlbGF0ZWRUYXJnZXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5oYW5kbGVPYmo7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoIWkgfHwgaSAhPT0gciAmJiAhWi5jb250YWlucyhyLCBpKSkgJiYgKHQudHlwZSA9IG8ub3JpZ1R5cGUsIG4gPSBvLmhhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdC50eXBlID0gZSksIG4KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBZLmZvY3VzaW5CdWJibGVzIHx8IFouZWFjaCh7CiAgICAgICAgICAgICAgICBmb2N1czogImZvY3VzaW4iLAogICAgICAgICAgICAgICAgYmx1cjogImZvY3Vzb3V0IgogICAgICAgICAgICB9LCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBaLmV2ZW50LnNpbXVsYXRlKGUsIHQudGFyZ2V0LCBaLmV2ZW50LmZpeCh0KSwgITApCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgWi5ldmVudC5zcGVjaWFsW2VdID0gewogICAgICAgICAgICAgICAgICAgIHNldHVwOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB5dC5hY2Nlc3MociwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGkgfHwgci5hZGRFdmVudExpc3RlbmVyKHQsIG4sICEwKSwgeXQuYWNjZXNzKHIsIGUsIChpIHx8IDApICsgMSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHRlYXJkb3duOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB5dC5hY2Nlc3MociwgZSkgLSAxOwogICAgICAgICAgICAgICAgICAgICAgICBpID8geXQuYWNjZXNzKHIsIGUsIGkpIDogKHIucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LCBuLCAhMCksIHl0LnJlbW92ZShyLCBlKSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmZuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBvbjogZnVuY3Rpb24odCwgZSwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgIHZhciBvLCBhOwogICAgICAgICAgICAgICAgICAgIGlmICgib2JqZWN0IiA9PSB0eXBlb2YgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAic3RyaW5nIiAhPSB0eXBlb2YgZSAmJiAobiA9IG4gfHwgZSwgZSA9IHZvaWQgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYSBpbiB0KSB0aGlzLm9uKGEsIGUsIG4sIHRbYV0sIGkpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBuICYmIG51bGwgPT0gciA/IChyID0gZSwgbiA9IGUgPSB2b2lkIDApIDogbnVsbCA9PSByICYmICgic3RyaW5nIiA9PSB0eXBlb2YgZSA/IChyID0gbiwgbiA9IHZvaWQgMCkgOiAociA9IG4sIG4gPSBlLCBlID0gdm9pZCAwKSksIHIgPT09ICExKSByID0gbDsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghcikgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgPT09IGkgJiYgKG8gPSByLCByID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWigpLm9mZih0KSwgby5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgfSwgci5ndWlkID0gby5ndWlkIHx8IChvLmd1aWQgPSBaLmd1aWQrKykpLCB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFouZXZlbnQuYWRkKHRoaXMsIHQsIHIsIG4sIGUpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbmU6IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vbih0LCBlLCBuLCByLCAxKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9mZjogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciByLCBpOwogICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIHQucHJldmVudERlZmF1bHQgJiYgdC5oYW5kbGVPYmopIHJldHVybiByID0gdC5oYW5kbGVPYmosIFoodC5kZWxlZ2F0ZVRhcmdldCkub2ZmKHIubmFtZXNwYWNlID8gci5vcmlnVHlwZSArICIuIiArIHIubmFtZXNwYWNlIDogci5vcmlnVHlwZSwgci5zZWxlY3Rvciwgci5oYW5kbGVyKSwgdGhpczsKICAgICAgICAgICAgICAgICAgICBpZiAoIm9iamVjdCIgPT0gdHlwZW9mIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpIGluIHQpIHRoaXMub2ZmKGksIGUsIHRbaV0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUgPT09ICExIHx8ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUpICYmIChuID0gZSwgZSA9IHZvaWQgMCksIG4gPT09ICExICYmIChuID0gbCksIHRoaXMuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgWi5ldmVudC5yZW1vdmUodGhpcywgdCwgbiwgZSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBaLmV2ZW50LnRyaWdnZXIodCwgZSwgdGhpcykKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzWzBdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuID8gWi5ldmVudC50cmlnZ2VyKHQsIGUsIG4sICEwKSA6IHZvaWQgMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIE50ID0gLzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1x3Ol0rKVtePl0qKVwvPi9naSwKICAgICAgICAgICAgICAgIFJ0ID0gLzwoW1x3Ol0rKS8sCiAgICAgICAgICAgICAgICBJdCA9IC88fCYjP1x3KzsvLAogICAgICAgICAgICAgICAgT3QgPSAvPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLAogICAgICAgICAgICAgICAgTHQgPSAvY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSwKICAgICAgICAgICAgICAgIER0ID0gL14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLAogICAgICAgICAgICAgICAgUHQgPSAvXnRydWVcLyguKikvLAogICAgICAgICAgICAgICAgJHQgPSAvXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2csCiAgICAgICAgICAgICAgICBxdCA9IHsKICAgICAgICAgICAgICAgICAgICBvcHRpb246IFsxLCAiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsICI8L3NlbGVjdD4iXSwKICAgICAgICAgICAgICAgICAgICB0aGVhZDogWzEsICI8dGFibGU+IiwgIjwvdGFibGU+Il0sCiAgICAgICAgICAgICAgICAgICAgY29sOiBbMiwgIjx0YWJsZT48Y29sZ3JvdXA+IiwgIjwvY29sZ3JvdXA+PC90YWJsZT4iXSwKICAgICAgICAgICAgICAgICAgICB0cjogWzIsICI8dGFibGU+PHRib2R5PiIsICI8L3Rib2R5PjwvdGFibGU+Il0sCiAgICAgICAgICAgICAgICAgICAgdGQ6IFszLCAiPHRhYmxlPjx0Ym9keT48dHI+IiwgIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLAogICAgICAgICAgICAgICAgICAgIF9kZWZhdWx0OiBbMCwgIiIsICIiXQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgcXQub3B0Z3JvdXAgPSBxdC5vcHRpb24sIHF0LnRib2R5ID0gcXQudGZvb3QgPSBxdC5jb2xncm91cCA9IHF0LmNhcHRpb24gPSBxdC50aGVhZCwgcXQudGggPSBxdC50ZCwgWi5leHRlbmQoewogICAgICAgICAgICAgICAgY2xvbmU6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciwgaSwgbywgYSwgcyA9IHQuY2xvbmVOb2RlKCEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgdSA9IFouY29udGFpbnModC5vd25lckRvY3VtZW50LCB0KTsKICAgICAgICAgICAgICAgICAgICBpZiAoIShZLm5vQ2xvbmVDaGVja2VkIHx8IDEgIT09IHQubm9kZVR5cGUgJiYgMTEgIT09IHQubm9kZVR5cGUgfHwgWi5pc1hNTERvYyh0KSkpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYSA9IHkocyksIG8gPSB5KHQpLCByID0gMCwgaSA9IG8ubGVuZ3RoOyBpID4gcjsgcisrKSBtKG9bcl0sIGFbcl0pOwogICAgICAgICAgICAgICAgICAgIGlmIChlKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobyA9IG8gfHwgeSh0KSwgYSA9IGEgfHwgeShzKSwgciA9IDAsIGkgPSBvLmxlbmd0aDsgaSA+IHI7IHIrKykgdihvW3JdLCBhW3JdKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB2KHQsIHMpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBhID0geShzLCAic2NyaXB0IiksIGEubGVuZ3RoID4gMCAmJiBnKGEsICF1ICYmIHkodCwgInNjcmlwdCIpKSwgcwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJ1aWxkRnJhZ21lbnQ6IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpLCBvLCBhLCBzLCB1LCBjLCBsID0gZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksIGYgPSBbXSwgcCA9IDAsIGggPSB0Lmxlbmd0aDsgaCA+IHA7IHArKykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPSB0W3BdLCBpIHx8IDAgPT09IGkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIm9iamVjdCIgPT09IFoudHlwZShpKSkgWi5tZXJnZShmLCBpLm5vZGVUeXBlID8gW2ldIDogaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChJdC50ZXN0KGkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobyA9IG8gfHwgbC5hcHBlbmRDaGlsZChlLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSwgYSA9IChSdC5leGVjKGkpIHx8IFsiIiwgIiJdKVsxXS50b0xvd2VyQ2FzZSgpLCBzID0gcXRbYV0gfHwgcXQuX2RlZmF1bHQsIG8uaW5uZXJIVE1MID0gc1sxXSArIGkucmVwbGFjZShOdCwgIjwkMT48LyQyPiIpICsgc1syXSwgYyA9IHNbMF07IGMtLTspIG8gPSBvLmxhc3RDaGlsZDsKICAgICAgICAgICAgICAgICAgICAgICAgWi5tZXJnZShmLCBvLmNoaWxkTm9kZXMpLCBvID0gbC5maXJzdENoaWxkLCBvLnRleHRDb250ZW50ID0gIiIKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgZi5wdXNoKGUuY3JlYXRlVGV4dE5vZGUoaSkpOwogICAgICAgICAgICAgICAgICAgIGZvciAobC50ZXh0Q29udGVudCA9ICIiLCBwID0gMDsgaSA9IGZbcCsrXTspCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoIXIgfHwgLTEgPT09IFouaW5BcnJheShpLCByKSkgJiYgKHUgPSBaLmNvbnRhaW5zKGkub3duZXJEb2N1bWVudCwgaSksIG8gPSB5KGwuYXBwZW5kQ2hpbGQoaSksICJzY3JpcHQiKSwgdSAmJiBnKG8pLCBuKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYyA9IDA7IGkgPSBvW2MrK107KSBEdC50ZXN0KGkudHlwZSB8fCAiIikgJiYgbi5wdXNoKGkpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY2xlYW5EYXRhOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSwgbiwgciwgaSwgbyA9IFouZXZlbnQuc3BlY2lhbCwgYSA9IDA7IHZvaWQgMCAhPT0gKG4gPSB0W2FdKTsgYSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChaLmFjY2VwdERhdGEobikgJiYgKGkgPSBuW3l0LmV4cGFuZG9dLCBpICYmIChlID0geXQuY2FjaGVbaV0pKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuZXZlbnRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAociBpbiBlLmV2ZW50cykgb1tyXSA/IFouZXZlbnQucmVtb3ZlKG4sIHIpIDogWi5yZW1vdmVFdmVudChuLCByLCBlLmhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5dC5jYWNoZVtpXSAmJiBkZWxldGUgeXQuY2FjaGVbaV0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbXQuY2FjaGVbblttdC5leHBhbmRvXV0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmZuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZ0KHRoaXMsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdCA/IFoudGV4dCh0aGlzKSA6IHRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgKDEgPT09IHRoaXMubm9kZVR5cGUgfHwgMTEgPT09IHRoaXMubm9kZVR5cGUgfHwgOSA9PT0gdGhpcy5ub2RlVHlwZSkgJiYgKHRoaXMudGV4dENvbnRlbnQgPSB0KQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0sIG51bGwsIHQsIGFyZ3VtZW50cy5sZW5ndGgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYXBwZW5kOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IHRoaXMubm9kZVR5cGUgfHwgMTEgPT09IHRoaXMubm9kZVR5cGUgfHwgOSA9PT0gdGhpcy5ub2RlVHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBwKHRoaXMsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5hcHBlbmRDaGlsZCh0KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwcmVwZW5kOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IHRoaXMubm9kZVR5cGUgfHwgMTEgPT09IHRoaXMubm9kZVR5cGUgfHwgOSA9PT0gdGhpcy5ub2RlVHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBwKHRoaXMsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5pbnNlcnRCZWZvcmUodCwgZS5maXJzdENoaWxkKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBiZWZvcmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUgJiYgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0LCB0aGlzKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYWZ0ZXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUgJiYgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0LCB0aGlzLm5leHRTaWJsaW5nKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiwgciA9IHQgPyBaLmZpbHRlcih0LCB0aGlzKSA6IHRoaXMsIGkgPSAwOyBudWxsICE9IChuID0gcltpXSk7IGkrKykgZSB8fCAxICE9PSBuLm5vZGVUeXBlIHx8IFouY2xlYW5EYXRhKHkobikpLCBuLnBhcmVudE5vZGUgJiYgKGUgJiYgWi5jb250YWlucyhuLm93bmVyRG9jdW1lbnQsIG4pICYmIGcoeShuLCAic2NyaXB0IikpLCBuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobikpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZW1wdHk6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQsIGUgPSAwOyBudWxsICE9ICh0ID0gdGhpc1tlXSk7IGUrKykgMSA9PT0gdC5ub2RlVHlwZSAmJiAoWi5jbGVhbkRhdGEoeSh0LCAhMSkpLCB0LnRleHRDb250ZW50ID0gIiIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY2xvbmU6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IG51bGwgPT0gdCA/ICExIDogdCwgZSA9IG51bGwgPT0gZSA/IHQgOiBlLCB0aGlzLm1hcChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouY2xvbmUodGhpcywgdCwgZSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGh0bWw6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdnQodGhpcywgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXNbMF0gfHwge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCAmJiAxID09PSBlLm5vZGVUeXBlKSByZXR1cm4gZS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgdCAmJiAhT3QudGVzdCh0KSAmJiAhcXRbKFJ0LmV4ZWModCkgfHwgWyIiLCAiIl0pWzFdLnRvTG93ZXJDYXNlKCldKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gdC5yZXBsYWNlKE50LCAiPCQxPjwvJDI+Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyByID4gbjsgbisrKSBlID0gdGhpc1tuXSB8fCB7fSwgMSA9PT0gZS5ub2RlVHlwZSAmJiAoWi5jbGVhbkRhdGEoeShlLCAhMSkpLCBlLmlubmVySFRNTCA9IHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChpKSB7fQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGUgJiYgdGhpcy5lbXB0eSgpLmFwcGVuZCh0KQogICAgICAgICAgICAgICAgICAgIH0sIG51bGwsIHQsIGFyZ3VtZW50cy5sZW5ndGgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gYXJndW1lbnRzWzBdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0ID0gdGhpcy5wYXJlbnROb2RlLCBaLmNsZWFuRGF0YSh5KHRoaXMpKSwgdCAmJiB0LnJlcGxhY2VDaGlsZChlLCB0aGlzKQogICAgICAgICAgICAgICAgICAgIH0pLCB0ICYmICh0Lmxlbmd0aCB8fCB0Lm5vZGVUeXBlKSA/IHRoaXMgOiB0aGlzLnJlbW92ZSgpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZGV0YWNoOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlKHQsICEwKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRvbU1hbmlwOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdCA9IFcuYXBwbHkoW10sIHQpOwogICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBpLCBvLCBhLCBzLCB1ID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHRoaXMubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICBsID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGMgLSAxLAogICAgICAgICAgICAgICAgICAgICAgICBwID0gdFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgZyA9IFouaXNGdW5jdGlvbihwKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZyB8fCBjID4gMSAmJiAic3RyaW5nIiA9PSB0eXBlb2YgcCAmJiAhWS5jaGVja0Nsb25lICYmIEx0LnRlc3QocCkpIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGwuZXEobik7CiAgICAgICAgICAgICAgICAgICAgICAgIGcgJiYgKHRbMF0gPSBwLmNhbGwodGhpcywgbiwgci5odG1sKCkpKSwgci5kb21NYW5pcCh0LCBlKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGlmIChjICYmIChuID0gWi5idWlsZEZyYWdtZW50KHQsIHRoaXNbMF0ub3duZXJEb2N1bWVudCwgITEsIHRoaXMpLCByID0gbi5maXJzdENoaWxkLCAxID09PSBuLmNoaWxkTm9kZXMubGVuZ3RoICYmIChuID0gciksIHIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IFoubWFwKHkobiwgInNjcmlwdCIpLCBoKSwgbyA9IGkubGVuZ3RoOyBjID4gdTsgdSsrKSBhID0gbiwgdSAhPT0gZiAmJiAoYSA9IFouY2xvbmUoYSwgITAsICEwKSwgbyAmJiBaLm1lcmdlKGksIHkoYSwgInNjcmlwdCIpKSksIGUuY2FsbCh0aGlzW3VdLCBhLCB1KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHMgPSBpW2kubGVuZ3RoIC0gMV0ub3duZXJEb2N1bWVudCwgWi5tYXAoaSwgZCksIHUgPSAwOyBvID4gdTsgdSsrKSBhID0gaVt1XSwgRHQudGVzdChhLnR5cGUgfHwgIiIpICYmICF5dC5hY2Nlc3MoYSwgImdsb2JhbEV2YWwiKSAmJiBaLmNvbnRhaW5zKHMsIGEpICYmIChhLnNyYyA/IFouX2V2YWxVcmwgJiYgWi5fZXZhbFVybChhLnNyYykgOiBaLmdsb2JhbEV2YWwoYS50ZXh0Q29udGVudC5yZXBsYWNlKCR0LCAiIikpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5lYWNoKHsKICAgICAgICAgICAgICAgIGFwcGVuZFRvOiAiYXBwZW5kIiwKICAgICAgICAgICAgICAgIHByZXBlbmRUbzogInByZXBlbmQiLAogICAgICAgICAgICAgICAgaW5zZXJ0QmVmb3JlOiAiYmVmb3JlIiwKICAgICAgICAgICAgICAgIGluc2VydEFmdGVyOiAiYWZ0ZXIiLAogICAgICAgICAgICAgICAgcmVwbGFjZUFsbDogInJlcGxhY2VXaXRoIgogICAgICAgICAgICB9LCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICBaLmZuW3RdID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4sIHIgPSBbXSwgaSA9IFoodCksIG8gPSBpLmxlbmd0aCAtIDEsIGEgPSAwOyBvID49IGE7IGErKykgbiA9IGEgPT09IG8gPyB0aGlzIDogdGhpcy5jbG9uZSghMCksIFooaVthXSlbZV0obiksIHouYXBwbHkociwgbi5nZXQoKSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKHIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgSHQsIE10ID0ge30sCiAgICAgICAgICAgICAgICBGdCA9IC9ebWFyZ2luLywKICAgICAgICAgICAgICAgIEJ0ID0gbmV3IFJlZ0V4cCgiXigiICsgd3QgKyAiKSg/IXB4KVthLXolXSskIiwgImkiKSwKICAgICAgICAgICAgICAgIFV0ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcub3BlbmVyID8gZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZSwgbnVsbCkgOiB0LmdldENvbXB1dGVkU3R5bGUoZSwgbnVsbCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICEgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlKCkgewogICAgICAgICAgICAgICAgICAgIGEuc3R5bGUuY3NzVGV4dCA9ICItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjElO3RvcDoxJTtib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3dpZHRoOjRweDtwb3NpdGlvbjphYnNvbHV0ZSIsIGEuaW5uZXJIVE1MID0gIiIsIGkuYXBwZW5kQ2hpbGQobyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0LmdldENvbXB1dGVkU3R5bGUoYSwgbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgbiA9ICIxJSIgIT09IGUudG9wLCByID0gIjRweCIgPT09IGUud2lkdGgsIGkucmVtb3ZlQ2hpbGQobykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBuLCByLCBpID0gUS5kb2N1bWVudEVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgbyA9IFEuY3JlYXRlRWxlbWVudCgiZGl2IiksCiAgICAgICAgICAgICAgICAgICAgYSA9IFEuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgICBhLnN0eWxlICYmIChhLnN0eWxlLmJhY2tncm91bmRDbGlwID0gImNvbnRlbnQtYm94IiwgYS5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwID0gIiIsIFkuY2xlYXJDbG9uZVN0eWxlID0gImNvbnRlbnQtYm94IiA9PT0gYS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCwgby5zdHlsZS5jc3NUZXh0ID0gImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIiwgby5hcHBlbmRDaGlsZChhKSwgdC5nZXRDb21wdXRlZFN0eWxlICYmIFouZXh0ZW5kKFksIHsKICAgICAgICAgICAgICAgICAgICBwaXhlbFBvc2l0aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUoKSwgbgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYm94U2l6aW5nUmVsaWFibGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSByICYmIGUoKSwgcgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVsaWFibGVNYXJnaW5SaWdodDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlLCBuID0gYS5hcHBlbmRDaGlsZChRLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uc3R5bGUuY3NzVGV4dCA9IGEuc3R5bGUuY3NzVGV4dCA9ICItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjAiLCBuLnN0eWxlLm1hcmdpblJpZ2h0ID0gbi5zdHlsZS53aWR0aCA9ICIwIiwgYS5zdHlsZS53aWR0aCA9ICIxcHgiLCBpLmFwcGVuZENoaWxkKG8pLCBlID0gIXBhcnNlRmxvYXQodC5nZXRDb21wdXRlZFN0eWxlKG4sIG51bGwpLm1hcmdpblJpZ2h0KSwgaS5yZW1vdmVDaGlsZChvKSwgYS5yZW1vdmVDaGlsZChuKSwgZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICB9KCksIFouc3dhcCA9IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgIHZhciBpLCBvLCBhID0ge307CiAgICAgICAgICAgICAgICBmb3IgKG8gaW4gZSkgYVtvXSA9IHQuc3R5bGVbb10sIHQuc3R5bGVbb10gPSBlW29dOwogICAgICAgICAgICAgICAgaSA9IG4uYXBwbHkodCwgciB8fCBbXSk7CiAgICAgICAgICAgICAgICBmb3IgKG8gaW4gZSkgdC5zdHlsZVtvXSA9IGFbb107CiAgICAgICAgICAgICAgICByZXR1cm4gaQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgV3QgPSAvXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sCiAgICAgICAgICAgICAgICB6dCA9IG5ldyBSZWdFeHAoIl4oIiArIHd0ICsgIikoLiopJCIsICJpIiksCiAgICAgICAgICAgICAgICBWdCA9IG5ldyBSZWdFeHAoIl4oWystXSk9KCIgKyB3dCArICIpIiwgImkiKSwKICAgICAgICAgICAgICAgIEd0ID0gewogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAiYWJzb2x1dGUiLAogICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6ICJoaWRkZW4iLAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICJibG9jayIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBYdCA9IHsKICAgICAgICAgICAgICAgICAgICBsZXR0ZXJTcGFjaW5nOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodDogIjQwMCIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBKdCA9IFsiV2Via2l0IiwgIk8iLCAiTW96IiwgIm1zIl07CiAgICAgICAgICAgIFouZXh0ZW5kKHsKICAgICAgICAgICAgICAgIGNzc0hvb2tzOiB7CiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogewogICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB3KHQsICJvcGFjaXR5Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIiID09PSBuID8gIjEiIDogbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNzc051bWJlcjogewogICAgICAgICAgICAgICAgICAgIGNvbHVtbkNvdW50OiAhMCwKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogITAsCiAgICAgICAgICAgICAgICAgICAgZmxleEdyb3c6ICEwLAogICAgICAgICAgICAgICAgICAgIGZsZXhTaHJpbms6ICEwLAogICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICEwLAogICAgICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6ICEwLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICEwLAogICAgICAgICAgICAgICAgICAgIG9yZGVyOiAhMCwKICAgICAgICAgICAgICAgICAgICBvcnBoYW5zOiAhMCwKICAgICAgICAgICAgICAgICAgICB3aWRvd3M6ICEwLAogICAgICAgICAgICAgICAgICAgIHpJbmRleDogITAsCiAgICAgICAgICAgICAgICAgICAgem9vbTogITAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjc3NQcm9wczogewogICAgICAgICAgICAgICAgICAgICJmbG9hdCI6ICJjc3NGbG9hdCIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdHlsZTogZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIDMgIT09IHQubm9kZVR5cGUgJiYgOCAhPT0gdC5ub2RlVHlwZSAmJiB0LnN0eWxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpLCBvLCBhLCBzID0gWi5jYW1lbENhc2UoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gdC5zdHlsZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPSBaLmNzc1Byb3BzW3NdIHx8IChaLmNzc1Byb3BzW3NdID0gayh1LCBzKSksIGEgPSBaLmNzc0hvb2tzW2VdIHx8IFouY3NzSG9va3Nbc10sIHZvaWQgMCA9PT0gbiA/IGEgJiYgImdldCIgaW4gYSAmJiB2b2lkIDAgIT09IChpID0gYS5nZXQodCwgITEsIHIpKSA/IGkgOiB1W2VdIDogKG8gPSB0eXBlb2YgbiwgInN0cmluZyIgPT09IG8gJiYgKGkgPSBWdC5leGVjKG4pKSAmJiAobiA9IChpWzFdICsgMSkgKiBpWzJdICsgcGFyc2VGbG9hdChaLmNzcyh0LCBlKSksIG8gPSAibnVtYmVyIiksIG51bGwgIT0gbiAmJiBuID09PSBuICYmICgibnVtYmVyIiAhPT0gbyB8fCBaLmNzc051bWJlcltzXSB8fCAobiArPSAicHgiKSwgWS5jbGVhckNsb25lU3R5bGUgfHwgIiIgIT09IG4gfHwgMCAhPT0gZS5pbmRleE9mKCJiYWNrZ3JvdW5kIikgfHwgKHVbZV0gPSAiaW5oZXJpdCIpLCBhICYmICJzZXQiIGluIGEgJiYgdm9pZCAwID09PSAobiA9IGEuc2V0KHQsIG4sIHIpKSB8fCAodVtlXSA9IG4pKSwgdm9pZCAwKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjc3M6IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSwgbywgYSwgcyA9IFouY2FtZWxDYXNlKGUpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlID0gWi5jc3NQcm9wc1tzXSB8fCAoWi5jc3NQcm9wc1tzXSA9IGsodC5zdHlsZSwgcykpLCBhID0gWi5jc3NIb29rc1tlXSB8fCBaLmNzc0hvb2tzW3NdLCBhICYmICJnZXQiIGluIGEgJiYgKGkgPSBhLmdldCh0LCAhMCwgbikpLCB2b2lkIDAgPT09IGkgJiYgKGkgPSB3KHQsIGUsIHIpKSwgIm5vcm1hbCIgPT09IGkgJiYgZSBpbiBYdCAmJiAoaSA9IFh0W2VdKSwgIiIgPT09IG4gfHwgbiA/IChvID0gcGFyc2VGbG9hdChpKSwgbiA9PT0gITAgfHwgWi5pc051bWVyaWMobykgPyBvIHx8IDAgOiBpKSA6IGkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZWFjaChbImhlaWdodCIsICJ3aWR0aCJdLCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICBaLmNzc0hvb2tzW2VdID0gewogICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24odCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA/IFd0LnRlc3QoWi5jc3ModCwgImRpc3BsYXkiKSkgJiYgMCA9PT0gdC5vZmZzZXRXaWR0aCA/IFouc3dhcCh0LCBHdCwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaih0LCBlLCByKQogICAgICAgICAgICAgICAgICAgICAgICB9KSA6IGoodCwgZSwgcikgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24odCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHIgJiYgVXQodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUKHQsIG4sIHIgPyBFKHQsIGUsIHIsICJib3JkZXItYm94IiA9PT0gWi5jc3ModCwgImJveFNpemluZyIsICExLCBpKSwgaSkgOiAwKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouY3NzSG9va3MubWFyZ2luUmlnaHQgPSBfKFkucmVsaWFibGVNYXJnaW5SaWdodCwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUgPyBaLnN3YXAodCwgewogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICJpbmxpbmUtYmxvY2siCiAgICAgICAgICAgICAgICB9LCB3LCBbdCwgIm1hcmdpblJpZ2h0Il0pIDogdm9pZCAwCiAgICAgICAgICAgIH0pLCBaLmVhY2goewogICAgICAgICAgICAgICAgbWFyZ2luOiAiIiwKICAgICAgICAgICAgICAgIHBhZGRpbmc6ICIiLAogICAgICAgICAgICAgICAgYm9yZGVyOiAiV2lkdGgiCiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIFouY3NzSG9va3NbdCArIGVdID0gewogICAgICAgICAgICAgICAgICAgIGV4cGFuZDogZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gMCwgaSA9IHt9LCBvID0gInN0cmluZyIgPT0gdHlwZW9mIG4gPyBuLnNwbGl0KCIgIikgOiBbbl07IDQgPiByOyByKyspIGlbdCArIF90W3JdICsgZV0gPSBvW3JdIHx8IG9bciAtIDJdIHx8IG9bMF07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgRnQudGVzdCh0KSB8fCAoWi5jc3NIb29rc1t0ICsgZV0uc2V0ID0gVCkKICAgICAgICAgICAgfSksIFouZm4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgIGNzczogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB2dCh0aGlzLCBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByLCBpLCBvID0ge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFouaXNBcnJheShlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyID0gVXQodCksIGkgPSBlLmxlbmd0aDsgaSA+IGE7IGErKykgb1tlW2FdXSA9IFouY3NzKHQsIGVbYV0sICExLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gbiA/IFouc3R5bGUodCwgZSwgbikgOiBaLmNzcyh0LCBlKQogICAgICAgICAgICAgICAgICAgIH0sIHQsIGUsIGFyZ3VtZW50cy5sZW5ndGggPiAxKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBDKHRoaXMsICEwKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBDKHRoaXMpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdG9nZ2xlOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJib29sZWFuIiA9PSB0eXBlb2YgdCA/IHQgPyB0aGlzLnNob3coKSA6IHRoaXMuaGlkZSgpIDogdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBrdCh0aGlzKSA/IFoodGhpcykuc2hvdygpIDogWih0aGlzKS5oaWRlKCkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5Ud2VlbiA9IFMsIFMucHJvdG90eXBlID0gewogICAgICAgICAgICAgICAgY29uc3RydWN0b3I6IFMsCiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbih0LCBlLCBuLCByLCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtID0gdCwgdGhpcy5wcm9wID0gbiwgdGhpcy5lYXNpbmcgPSBpIHx8ICJzd2luZyIsIHRoaXMub3B0aW9ucyA9IGUsIHRoaXMuc3RhcnQgPSB0aGlzLm5vdyA9IHRoaXMuY3VyKCksIHRoaXMuZW5kID0gciwgdGhpcy51bml0ID0gbyB8fCAoWi5jc3NOdW1iZXJbbl0gPyAiIiA6ICJweCIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY3VyOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IFMucHJvcEhvb2tzW3RoaXMucHJvcF07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgJiYgdC5nZXQgPyB0LmdldCh0aGlzKSA6IFMucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlLCBuID0gUy5wcm9wSG9va3NbdGhpcy5wcm9wXTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uID8gdGhpcy5wb3MgPSBlID0gWi5lYXNpbmdbdGhpcy5lYXNpbmddKHQsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAqIHQsIDAsIDEsIHRoaXMub3B0aW9ucy5kdXJhdGlvbikgOiB0aGlzLnBvcyA9IGUgPSB0LCB0aGlzLm5vdyA9ICh0aGlzLmVuZCAtIHRoaXMuc3RhcnQpICogZSArIHRoaXMuc3RhcnQsIHRoaXMub3B0aW9ucy5zdGVwICYmIHRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLCB0aGlzLm5vdywgdGhpcyksIG4gJiYgbi5zZXQgPyBuLnNldCh0aGlzKSA6IFMucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSwgdGhpcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBTLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZSA9IFMucHJvdG90eXBlLCBTLnByb3BIb29rcyA9IHsKICAgICAgICAgICAgICAgIF9kZWZhdWx0OiB7CiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0LmVsZW1bdC5wcm9wXSB8fCB0LmVsZW0uc3R5bGUgJiYgbnVsbCAhPSB0LmVsZW0uc3R5bGVbdC5wcm9wXSA/IChlID0gWi5jc3ModC5lbGVtLCB0LnByb3AsICIiKSwgZSAmJiAiYXV0byIgIT09IGUgPyBlIDogMCkgOiB0LmVsZW1bdC5wcm9wXQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFouZnguc3RlcFt0LnByb3BdID8gWi5meC5zdGVwW3QucHJvcF0odCkgOiB0LmVsZW0uc3R5bGUgJiYgKG51bGwgIT0gdC5lbGVtLnN0eWxlW1ouY3NzUHJvcHNbdC5wcm9wXV0gfHwgWi5jc3NIb29rc1t0LnByb3BdKSA/IFouc3R5bGUodC5lbGVtLCB0LnByb3AsIHQubm93ICsgdC51bml0KSA6IHQuZWxlbVt0LnByb3BdID0gdC5ub3cKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIFMucHJvcEhvb2tzLnNjcm9sbFRvcCA9IFMucHJvcEhvb2tzLnNjcm9sbExlZnQgPSB7CiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB0LmVsZW0ubm9kZVR5cGUgJiYgdC5lbGVtLnBhcmVudE5vZGUgJiYgKHQuZWxlbVt0LnByb3BdID0gdC5ub3cpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIFouZWFzaW5nID0gewogICAgICAgICAgICAgICAgbGluZWFyOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzd2luZzogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAuNSAtIE1hdGguY29zKHQgKiBNYXRoLlBJKSAvIDIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgWi5meCA9IFMucHJvdG90eXBlLmluaXQsIFouZnguc3RlcCA9IHt9OwogICAgICAgICAgICB2YXIgWXQsIFF0LCBLdCA9IC9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLywKICAgICAgICAgICAgICAgIFp0ID0gbmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiICsgd3QgKyAiKShbYS16JV0qKSQiLCAiaSIpLAogICAgICAgICAgICAgICAgdGUgPSAvcXVldWVIb29rcyQvLAogICAgICAgICAgICAgICAgZWUgPSBbSV0sCiAgICAgICAgICAgICAgICBuZSA9IHsKICAgICAgICAgICAgICAgICAgICAiKiI6IFtmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5jcmVhdGVUd2Vlbih0LCBlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBuLmN1cigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IFp0LmV4ZWMoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gaSAmJiBpWzNdIHx8IChaLmNzc051bWJlclt0XSA/ICIiIDogInB4IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gKFouY3NzTnVtYmVyW3RdIHx8ICJweCIgIT09IG8gJiYgK3IpICYmIFp0LmV4ZWMoWi5jc3Mobi5lbGVtLCB0KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSAyMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgJiYgYVszXSAhPT0gbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG8gfHwgYVszXSwgaSA9IGkgfHwgW10sIGEgPSArciB8fCAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG8gcyA9IHMgfHwgIi41IiwgYSAvPSBzLCBaLnN0eWxlKG4uZWxlbSwgdCwgYSArIG8pOyB3aGlsZSAocyAhPT0gKHMgPSBuLmN1cigpIC8gcikgJiYgMSAhPT0gcyAmJiAtLXUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgJiYgKGEgPSBuLnN0YXJ0ID0gK2EgfHwgK3IgfHwgMCwgbi51bml0ID0gbywgbi5lbmQgPSBpWzFdID8gYSArIChpWzFdICsgMSkgKiBpWzJdIDogK2lbMl0pLCBuCiAgICAgICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIFouQW5pbWF0aW9uID0gWi5leHRlbmQoTCwgewogICAgICAgICAgICAgICAgICAgIHR3ZWVuZXI6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgWi5pc0Z1bmN0aW9uKHQpID8gKGUgPSB0LCB0ID0gWyIqIl0pIDogdCA9IHQuc3BsaXQoIiAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiwgciA9IDAsIGkgPSB0Lmxlbmd0aDsgaSA+IHI7IHIrKykgbiA9IHRbcl0sIG5lW25dID0gbmVbbl0gfHwgW10sIG5lW25dLnVuc2hpZnQoZSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHByZWZpbHRlcjogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlID8gZWUudW5zaGlmdCh0KSA6IGVlLnB1c2godCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwgWi5zcGVlZCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQgJiYgIm9iamVjdCIgPT0gdHlwZW9mIHQgPyBaLmV4dGVuZCh7fSwgdCkgOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBuIHx8ICFuICYmIGUgfHwgWi5pc0Z1bmN0aW9uKHQpICYmIHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0LAogICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IG4gJiYgZSB8fCBlICYmICFaLmlzRnVuY3Rpb24oZSkgJiYgZQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuZHVyYXRpb24gPSBaLmZ4Lm9mZiA/IDAgOiAibnVtYmVyIiA9PSB0eXBlb2Ygci5kdXJhdGlvbiA/IHIuZHVyYXRpb24gOiByLmR1cmF0aW9uIGluIFouZnguc3BlZWRzID8gWi5meC5zcGVlZHNbci5kdXJhdGlvbl0gOiBaLmZ4LnNwZWVkcy5fZGVmYXVsdCwgKG51bGwgPT0gci5xdWV1ZSB8fCByLnF1ZXVlID09PSAhMCkgJiYgKHIucXVldWUgPSAiZngiKSwgci5vbGQgPSByLmNvbXBsZXRlLCByLmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFouaXNGdW5jdGlvbihyLm9sZCkgJiYgci5vbGQuY2FsbCh0aGlzKSwgci5xdWV1ZSAmJiBaLmRlcXVldWUodGhpcywgci5xdWV1ZSkKICAgICAgICAgICAgICAgICAgICB9LCByCiAgICAgICAgICAgICAgICB9LCBaLmZuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgZmFkZVRvOiBmdW5jdGlvbih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcihrdCkuY3NzKCJvcGFjaXR5IiwgMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogZQogICAgICAgICAgICAgICAgICAgICAgICB9LCB0LCBuLCByKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZTogZnVuY3Rpb24odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IFouaXNFbXB0eU9iamVjdCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBaLnNwZWVkKGUsIG4sIHIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gTCh0aGlzLCBaLmV4dGVuZCh7fSwgdCksIG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpIHx8IHl0LmdldCh0aGlzLCAiZmluaXNoIikpICYmIGUuc3RvcCghMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmZpbmlzaCA9IGEsIGkgfHwgby5xdWV1ZSA9PT0gITEgPyB0aGlzLmVhY2goYSkgOiB0aGlzLnF1ZXVlKG8ucXVldWUsIGEpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzdG9wOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0LnN0b3A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdC5zdG9wLCBlKG4pCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAic3RyaW5nIiAhPSB0eXBlb2YgdCAmJiAobiA9IGUsIGUgPSB0LCB0ID0gdm9pZCAwKSwgZSAmJiB0ICE9PSAhMSAmJiB0aGlzLnF1ZXVlKHQgfHwgImZ4IiwgW10pLCB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBudWxsICE9IHQgJiYgdCArICJxdWV1ZUhvb2tzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gWi50aW1lcnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHl0LmdldCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpKSBhW2ldICYmIGFbaV0uc3RvcCAmJiByKGFbaV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSBpbiBhKSBhW2ldICYmIGFbaV0uc3RvcCAmJiB0ZS50ZXN0KGkpICYmIHIoYVtpXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBvLmxlbmd0aDsgaS0tOykgb1tpXS5lbGVtICE9PSB0aGlzIHx8IG51bGwgIT0gdCAmJiBvW2ldLnF1ZXVlICE9PSB0IHx8IChvW2ldLmFuaW0uc3RvcChuKSwgZSA9ICExLCBvLnNwbGljZShpLCAxKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSB8fCAhbikgJiYgWi5kZXF1ZXVlKHRoaXMsIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBmaW5pc2g6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgIT09ICExICYmICh0ID0gdCB8fCAiZngiKSwgdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG4gPSB5dC5nZXQodGhpcyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG5bdCArICJxdWV1ZSJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBuW3QgKyAicXVldWVIb29rcyJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBaLnRpbWVycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gciA/IHIubGVuZ3RoIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobi5maW5pc2ggPSAhMCwgWi5xdWV1ZSh0aGlzLCB0LCBbXSksIGkgJiYgaS5zdG9wICYmIGkuc3RvcC5jYWxsKHRoaXMsICEwKSwgZSA9IG8ubGVuZ3RoOyBlLS07KSBvW2VdLmVsZW0gPT09IHRoaXMgJiYgb1tlXS5xdWV1ZSA9PT0gdCAmJiAob1tlXS5hbmltLnN0b3AoITApLCBvLnNwbGljZShlLCAxKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSAwOyBhID4gZTsgZSsrKSByW2VdICYmIHJbZV0uZmluaXNoICYmIHJbZV0uZmluaXNoLmNhbGwodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbi5maW5pc2gKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwgWi5lYWNoKFsidG9nZ2xlIiwgInNob3ciLCAiaGlkZSJdLCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBaLmZuW2VdOwogICAgICAgICAgICAgICAgICAgIFouZm5bZV0gPSBmdW5jdGlvbih0LCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgfHwgImJvb2xlYW4iID09IHR5cGVvZiB0ID8gbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogdGhpcy5hbmltYXRlKE4oZSwgITApLCB0LCByLCBpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLCBaLmVhY2goewogICAgICAgICAgICAgICAgICAgIHNsaWRlRG93bjogTigic2hvdyIpLAogICAgICAgICAgICAgICAgICAgIHNsaWRlVXA6IE4oImhpZGUiKSwKICAgICAgICAgICAgICAgICAgICBzbGlkZVRvZ2dsZTogTigidG9nZ2xlIiksCiAgICAgICAgICAgICAgICAgICAgZmFkZUluOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICJzaG93IgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZmFkZU91dDogewogICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAiaGlkZSIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZhZGVUb2dnbGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogInRvZ2dsZSIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgWi5mblt0XSA9IGZ1bmN0aW9uKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0ZShlLCB0LCBuLCByKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLCBaLnRpbWVycyA9IFtdLCBaLmZ4LnRpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCwgZSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBaLnRpbWVyczsKICAgICAgICAgICAgICAgICAgICBmb3IgKFl0ID0gWi5ub3coKTsgZSA8IG4ubGVuZ3RoOyBlKyspIHQgPSBuW2VdLCB0KCkgfHwgbltlXSAhPT0gdCB8fCBuLnNwbGljZShlLS0sIDEpOwogICAgICAgICAgICAgICAgICAgIG4ubGVuZ3RoIHx8IFouZnguc3RvcCgpLCBZdCA9IHZvaWQgMAogICAgICAgICAgICAgICAgfSwgWi5meC50aW1lciA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBaLnRpbWVycy5wdXNoKHQpLCB0KCkgPyBaLmZ4LnN0YXJ0KCkgOiBaLnRpbWVycy5wb3AoKQogICAgICAgICAgICAgICAgfSwgWi5meC5pbnRlcnZhbCA9IDEzLCBaLmZ4LnN0YXJ0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgUXQgfHwgKFF0ID0gc2V0SW50ZXJ2YWwoWi5meC50aWNrLCBaLmZ4LmludGVydmFsKSkKICAgICAgICAgICAgICAgIH0sIFouZnguc3RvcCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoUXQpLCBRdCA9IG51bGwKICAgICAgICAgICAgICAgIH0sIFouZnguc3BlZWRzID0gewogICAgICAgICAgICAgICAgICAgIHNsb3c6IDYwMCwKICAgICAgICAgICAgICAgICAgICBmYXN0OiAyMDAsCiAgICAgICAgICAgICAgICAgICAgX2RlZmF1bHQ6IDQwMAogICAgICAgICAgICAgICAgfSwgWi5mbi5kZWxheSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IFouZnggPyBaLmZ4LnNwZWVkc1t0XSB8fCB0IDogdCwgZSA9IGUgfHwgImZ4IiwgdGhpcy5xdWV1ZShlLCBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gc2V0VGltZW91dChlLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgbi5zdG9wID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBRLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBRLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5hcHBlbmRDaGlsZChRLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTsKICAgICAgICAgICAgICAgICAgICB0LnR5cGUgPSAiY2hlY2tib3giLCBZLmNoZWNrT24gPSAiIiAhPT0gdC52YWx1ZSwgWS5vcHRTZWxlY3RlZCA9IG4uc2VsZWN0ZWQsIGUuZGlzYWJsZWQgPSAhMCwgWS5vcHREaXNhYmxlZCA9ICFuLmRpc2FibGVkLCB0ID0gUS5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLCB0LnZhbHVlID0gInQiLCB0LnR5cGUgPSAicmFkaW8iLCBZLnJhZGlvVmFsdWUgPSAidCIgPT09IHQudmFsdWUKICAgICAgICAgICAgICAgIH0oKTsKICAgICAgICAgICAgdmFyIHJlLCBpZSwgb2UgPSBaLmV4cHIuYXR0ckhhbmRsZTsKICAgICAgICAgICAgWi5mbi5leHRlbmQoewogICAgICAgICAgICAgICAgYXR0cjogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB2dCh0aGlzLCBaLmF0dHIsIHQsIGUsIGFyZ3VtZW50cy5sZW5ndGggPiAxKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlbW92ZUF0dHI6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBaLnJlbW92ZUF0dHIodGhpcywgdCkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5leHRlbmQoewogICAgICAgICAgICAgICAgYXR0cjogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciByLCBpLCBvID0gdC5ub2RlVHlwZTsKICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiAzICE9PSBvICYmIDggIT09IG8gJiYgMiAhPT0gbykgcmV0dXJuIHR5cGVvZiB0LmdldEF0dHJpYnV0ZSA9PT0gRXQgPyBaLnByb3AodCwgZSwgbikgOiAoMSA9PT0gbyAmJiBaLmlzWE1MRG9jKHQpIHx8IChlID0gZS50b0xvd2VyQ2FzZSgpLCByID0gWi5hdHRySG9va3NbZV0gfHwgKFouZXhwci5tYXRjaC5ib29sLnRlc3QoZSkgPyBpZSA6IHJlKSksIHZvaWQgMCA9PT0gbiA/IHIgJiYgImdldCIgaW4gciAmJiBudWxsICE9PSAoaSA9IHIuZ2V0KHQsIGUpKSA/IGkgOiAoaSA9IFouZmluZC5hdHRyKHQsIGUpLCBudWxsID09IGkgPyB2b2lkIDAgOiBpKSA6IG51bGwgIT09IG4gPyByICYmICJzZXQiIGluIHIgJiYgdm9pZCAwICE9PSAoaSA9IHIuc2V0KHQsIG4sIGUpKSA/IGkgOiAodC5zZXRBdHRyaWJ1dGUoZSwgbiArICIiKSwgbikgOiB2b2lkIFoucmVtb3ZlQXR0cih0LCBlKSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZW1vdmVBdHRyOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHIsIGkgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gZSAmJiBlLm1hdGNoKGh0KTsKICAgICAgICAgICAgICAgICAgICBpZiAobyAmJiAxID09PSB0Lm5vZGVUeXBlKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgbiA9IG9baSsrXTspIHIgPSBaLnByb3BGaXhbbl0gfHwgbiwgWi5leHByLm1hdGNoLmJvb2wudGVzdChuKSAmJiAodFtyXSA9ICExKSwgdC5yZW1vdmVBdHRyaWJ1dGUobikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhdHRySG9va3M6IHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFZLnJhZGlvVmFsdWUgJiYgInJhZGlvIiA9PT0gZSAmJiBaLm5vZGVOYW1lKHQsICJpbnB1dCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnNldEF0dHJpYnV0ZSgidHlwZSIsIGUpLCBuICYmICh0LnZhbHVlID0gbiksIGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIGllID0gewogICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPT09ICExID8gWi5yZW1vdmVBdHRyKHQsIG4pIDogdC5zZXRBdHRyaWJ1dGUobiwgbiksIG4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgWi5lYWNoKFouZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IG9lW2VdIHx8IFouZmluZC5hdHRyOwogICAgICAgICAgICAgICAgb2VbZV0gPSBmdW5jdGlvbih0LCBlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGksIG87CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgfHwgKG8gPSBvZVtlXSwgb2VbZV0gPSBpLCBpID0gbnVsbCAhPSBuKHQsIGUsIHIpID8gZS50b0xvd2VyQ2FzZSgpIDogbnVsbCwgb2VbZV0gPSBvKSwgaQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIGFlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaTsKICAgICAgICAgICAgWi5mbi5leHRlbmQoewogICAgICAgICAgICAgICAgcHJvcDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB2dCh0aGlzLCBaLnByb3AsIHQsIGUsIGFyZ3VtZW50cy5sZW5ndGggPiAxKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlbW92ZVByb3A6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpc1taLnByb3BGaXhbdF0gfHwgdF0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5leHRlbmQoewogICAgICAgICAgICAgICAgcHJvcEZpeDogewogICAgICAgICAgICAgICAgICAgICJmb3IiOiAiaHRtbEZvciIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzIjogImNsYXNzTmFtZSIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwcm9wOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIsIGksIG8sIGEgPSB0Lm5vZGVUeXBlOwogICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIDMgIT09IGEgJiYgOCAhPT0gYSAmJiAyICE9PSBhKSByZXR1cm4gbyA9IDEgIT09IGEgfHwgIVouaXNYTUxEb2ModCksIG8gJiYgKGUgPSBaLnByb3BGaXhbZV0gfHwgZSwgaSA9IFoucHJvcEhvb2tzW2VdKSwgdm9pZCAwICE9PSBuID8gaSAmJiAic2V0IiBpbiBpICYmIHZvaWQgMCAhPT0gKHIgPSBpLnNldCh0LCBuLCBlKSkgPyByIDogdFtlXSA9IG4gOiBpICYmICJnZXQiIGluIGkgJiYgbnVsbCAhPT0gKHIgPSBpLmdldCh0LCBlKSkgPyByIDogdFtlXQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHByb3BIb29rczogewogICAgICAgICAgICAgICAgICAgIHRhYkluZGV4OiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaGFzQXR0cmlidXRlKCJ0YWJpbmRleCIpIHx8IGFlLnRlc3QodC5ub2RlTmFtZSkgfHwgdC5ocmVmID8gdC50YWJJbmRleCA6IC0xCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBZLm9wdFNlbGVjdGVkIHx8IChaLnByb3BIb29rcy5zZWxlY3RlZCA9IHsKICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gdC5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlICYmIGUucGFyZW50Tm9kZSAmJiBlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCwgbnVsbAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5lYWNoKFsidGFiSW5kZXgiLCAicmVhZE9ubHkiLCAibWF4TGVuZ3RoIiwgImNlbGxTcGFjaW5nIiwgImNlbGxQYWRkaW5nIiwgInJvd1NwYW4iLCAiY29sU3BhbiIsICJ1c2VNYXAiLCAiZnJhbWVCb3JkZXIiLCAiY29udGVudEVkaXRhYmxlIl0sIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgWi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV0gPSB0aGlzCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgc2UgPSAvW1x0XHJcblxmXS9nOwogICAgICAgICAgICBaLmZuLmV4dGVuZCh7CiAgICAgICAgICAgICAgICBhZGRDbGFzczogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlLCBuLCByLCBpLCBvLCBhLCBzID0gInN0cmluZyIgPT0gdHlwZW9mIHQgJiYgdCwKICAgICAgICAgICAgICAgICAgICAgICAgdSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB0aGlzLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICBpZiAoWi5pc0Z1bmN0aW9uKHQpKSByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgWih0aGlzKS5hZGRDbGFzcyh0LmNhbGwodGhpcywgZSwgdGhpcy5jbGFzc05hbWUpKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGlmIChzKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSAodCB8fCAiIikubWF0Y2goaHQpIHx8IFtdOyBjID4gdTsgdSsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPSB0aGlzW3VdLCByID0gMSA9PT0gbi5ub2RlVHlwZSAmJiAobi5jbGFzc05hbWUgPyAoIiAiICsgbi5jbGFzc05hbWUgKyAiICIpLnJlcGxhY2Uoc2UsICIgIikgOiAiICIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gMDsgaSA9IGVbbysrXTspIHIuaW5kZXhPZigiICIgKyBpICsgIiAiKSA8IDAgJiYgKHIgKz0gaSArICIgIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFoudHJpbShyKSwgbi5jbGFzc05hbWUgIT09IGEgJiYgKG4uY2xhc3NOYW1lID0gYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG4sIHIsIGksIG8sIGEsIHMgPSAwID09PSBhcmd1bWVudHMubGVuZ3RoIHx8ICJzdHJpbmciID09IHR5cGVvZiB0ICYmIHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICBjID0gdGhpcy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgaWYgKFouaXNGdW5jdGlvbih0KSkgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFoodGhpcykucmVtb3ZlQ2xhc3ModC5jYWxsKHRoaXMsIGUsIHRoaXMuY2xhc3NOYW1lKSkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAocykKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChlID0gKHQgfHwgIiIpLm1hdGNoKGh0KSB8fCBbXTsgYyA+IHU7IHUrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gdGhpc1t1XSwgciA9IDEgPT09IG4ubm9kZVR5cGUgJiYgKG4uY2xhc3NOYW1lID8gKCIgIiArIG4uY2xhc3NOYW1lICsgIiAiKS5yZXBsYWNlKHNlLCAiICIpIDogIiIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gMDsgaSA9IGVbbysrXTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyByLmluZGV4T2YoIiAiICsgaSArICIgIikgPj0gMDspIHIgPSByLnJlcGxhY2UoIiAiICsgaSArICIgIiwgIiAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdCA/IFoudHJpbShyKSA6ICIiLCBuLmNsYXNzTmFtZSAhPT0gYSAmJiAobi5jbGFzc05hbWUgPSBhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHR5cGVvZiB0OwogICAgICAgICAgICAgICAgICAgIHJldHVybiAiYm9vbGVhbiIgPT0gdHlwZW9mIGUgJiYgInN0cmluZyIgPT09IG4gPyBlID8gdGhpcy5hZGRDbGFzcyh0KSA6IHRoaXMucmVtb3ZlQ2xhc3ModCkgOiBaLmlzRnVuY3Rpb24odCkgPyB0aGlzLmVhY2goZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICBaKHRoaXMpLnRvZ2dsZUNsYXNzKHQuY2FsbCh0aGlzLCBuLCB0aGlzLmNsYXNzTmFtZSwgZSksIGUpCiAgICAgICAgICAgICAgICAgICAgfSkgOiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgic3RyaW5nIiA9PT0gbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUsIHIgPSAwLCBpID0gWih0aGlzKSwgbyA9IHQubWF0Y2goaHQpIHx8IFtdOyBlID0gb1tyKytdOykgaS5oYXNDbGFzcyhlKSA/IGkucmVtb3ZlQ2xhc3MoZSkgOiBpLmFkZENsYXNzKGUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlKG4gPT09IEV0IHx8ICJib29sZWFuIiA9PT0gbikgJiYgKHRoaXMuY2xhc3NOYW1lICYmIHl0LnNldCh0aGlzLCAiX19jbGFzc05hbWVfXyIsIHRoaXMuY2xhc3NOYW1lKSwgdGhpcy5jbGFzc05hbWUgPSB0aGlzLmNsYXNzTmFtZSB8fCB0ID09PSAhMSA/ICIiIDogeXQuZ2V0KHRoaXMsICJfX2NsYXNzTmFtZV9fIikgfHwgIiIpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBoYXNDbGFzczogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAiICIgKyB0ICsgIiAiLCBuID0gMCwgciA9IHRoaXMubGVuZ3RoOyByID4gbjsgbisrKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gdGhpc1tuXS5ub2RlVHlwZSAmJiAoIiAiICsgdGhpc1tuXS5jbGFzc05hbWUgKyAiICIpLnJlcGxhY2Uoc2UsICIgIikuaW5kZXhPZihlKSA+PSAwKSByZXR1cm4gITA7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgdWUgPSAvXHIvZzsKICAgICAgICAgICAgWi5mbi5leHRlbmQoewogICAgICAgICAgICAgICAgdmFsOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG4sIHIsIGkgPSB0aGlzWzBdOyB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gciA9IFouaXNGdW5jdGlvbih0KSwgdGhpcy5lYWNoKGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgMSA9PT0gdGhpcy5ub2RlVHlwZSAmJiAoaSA9IHIgPyB0LmNhbGwodGhpcywgbiwgWih0aGlzKS52YWwoKSkgOiB0LCBudWxsID09IGkgPyBpID0gIiIgOiAibnVtYmVyIiA9PSB0eXBlb2YgaSA/IGkgKz0gIiIgOiBaLmlzQXJyYXkoaSkgJiYgKGkgPSBaLm1hcChpLCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCA/ICIiIDogdCArICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIGUgPSBaLnZhbEhvb2tzW3RoaXMudHlwZV0gfHwgWi52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLCBlICYmICJzZXQiIGluIGUgJiYgdm9pZCAwICE9PSBlLnNldCh0aGlzLCBpLCAidmFsdWUiKSB8fCAodGhpcy52YWx1ZSA9IGkpKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkpIHJldHVybiBlID0gWi52YWxIb29rc1tpLnR5cGVdIHx8IFoudmFsSG9va3NbaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSwgZSAmJiAiZ2V0IiBpbiBlICYmIHZvaWQgMCAhPT0gKG4gPSBlLmdldChpLCAidmFsdWUiKSkgPyBuIDogKG4gPSBpLnZhbHVlLCAic3RyaW5nIiA9PSB0eXBlb2YgbiA/IG4ucmVwbGFjZSh1ZSwgIiIpIDogbnVsbCA9PSBuID8gIiIgOiBuKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZXh0ZW5kKHsKICAgICAgICAgICAgICAgIHZhbEhvb2tzOiB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBaLmZpbmQuYXR0cih0LCAidmFsdWUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9IGUgPyBlIDogWi50cmltKFoudGV4dCh0KSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSwgbiwgciA9IHQub3B0aW9ucywgaSA9IHQuc2VsZWN0ZWRJbmRleCwgbyA9ICJzZWxlY3Qtb25lIiA9PT0gdC50eXBlIHx8IDAgPiBpLCBhID0gbyA/IG51bGwgOiBbXSwgcyA9IG8gPyBpICsgMSA6IHIubGVuZ3RoLCB1ID0gMCA+IGkgPyBzIDogbyA/IGkgOiAwOyBzID4gdTsgdSsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID0gclt1XSwgKG4uc2VsZWN0ZWQgfHwgdSA9PT0gaSkgJiYgKFkub3B0RGlzYWJsZWQgPyAhbi5kaXNhYmxlZCA6IG51bGwgPT09IG4uZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpKSAmJiAoIW4ucGFyZW50Tm9kZS5kaXNhYmxlZCB8fCAhWi5ub2RlTmFtZShuLnBhcmVudE5vZGUsICJvcHRncm91cCIpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9IFoobikudmFsKCksIG8pIHJldHVybiBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnB1c2goZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4sIHIsIGkgPSB0Lm9wdGlvbnMsIG8gPSBaLm1ha2VBcnJheShlKSwgYSA9IGkubGVuZ3RoOyBhLS07KSByID0gaVthXSwgKHIuc2VsZWN0ZWQgPSBaLmluQXJyYXkoci52YWx1ZSwgbykgPj0gMCkgJiYgKG4gPSAhMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiB8fCAodC5zZWxlY3RlZEluZGV4ID0gLTEpLCBvCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmVhY2goWyJyYWRpbyIsICJjaGVja2JveCJdLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIFoudmFsSG9va3NbdGhpc10gPSB7CiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBaLmlzQXJyYXkoZSkgPyB0LmNoZWNrZWQgPSBaLmluQXJyYXkoWih0KS52YWwoKSwgZSkgPj0gMCA6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIFkuY2hlY2tPbiB8fCAoWi52YWxIb29rc1t0aGlzXS5nZXQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT09IHQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpID8gIm9uIiA6IHQudmFsdWUKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pLCBaLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIFouZm5bZV0gPSBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAwID8gdGhpcy5vbihlLCBudWxsLCB0LCBuKSA6IHRoaXMudHJpZ2dlcihlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWi5mbi5leHRlbmQoewogICAgICAgICAgICAgICAgaG92ZXI6IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tb3VzZWVudGVyKHQpLm1vdXNlbGVhdmUoZSB8fCB0KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJpbmQ6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vbih0LCBudWxsLCBlLCBuKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHVuYmluZDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9mZih0LCBudWxsLCBlKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRlbGVnYXRlOiBmdW5jdGlvbih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub24oZSwgdCwgbiwgcikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB1bmRlbGVnYXRlOiBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgPT09IGFyZ3VtZW50cy5sZW5ndGggPyB0aGlzLm9mZih0LCAiKioiKSA6IHRoaXMub2ZmKGUsIHQgfHwgIioqIiwgbikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBjZSA9IFoubm93KCksCiAgICAgICAgICAgICAgICBsZSA9IC9cPy87CiAgICAgICAgICAgIFoucGFyc2VKU09OID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodCArICIiKQogICAgICAgICAgICB9LCBaLnBhcnNlWE1MID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIGUsIG47CiAgICAgICAgICAgICAgICBpZiAoIXQgfHwgInN0cmluZyIgIT0gdHlwZW9mIHQpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBuID0gbmV3IERPTVBhcnNlciwgZSA9IG4ucGFyc2VGcm9tU3RyaW5nKHQsICJ0ZXh0L3htbCIpCiAgICAgICAgICAgICAgICB9IGNhdGNoIChyKSB7CiAgICAgICAgICAgICAgICAgICAgZSA9IHZvaWQgMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuICghZSB8fCBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aCkgJiYgWi5lcnJvcigiSW52YWxpZCBYTUw6ICIgKyB0KSwgZQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgZmUgPSAvIy4qJC8sCiAgICAgICAgICAgICAgICBwZSA9IC8oWz8mXSlfPVteJl0qLywKICAgICAgICAgICAgICAgIGhlID0gL14oLio/KTpbIFx0XSooW15cclxuXSopJC9nbSwKICAgICAgICAgICAgICAgIGRlID0gL14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sCiAgICAgICAgICAgICAgICBnZSA9IC9eKD86R0VUfEhFQUQpJC8sCiAgICAgICAgICAgICAgICB2ZSA9IC9eXC9cLy8sCiAgICAgICAgICAgICAgICB5ZSA9IC9eKFtcdy4rLV0rOikoPzpcL1wvKD86W15cLz8jXSpAfCkoW15cLz8jOl0qKSg/OjooXGQrKXwpfCkvLAogICAgICAgICAgICAgICAgbWUgPSB7fSwKICAgICAgICAgICAgICAgIGJlID0ge30sCiAgICAgICAgICAgICAgICB4ZSA9ICIqLyIuY29uY2F0KCIqIiksCiAgICAgICAgICAgICAgICB3ZSA9IHQubG9jYXRpb24uaHJlZiwKICAgICAgICAgICAgICAgIF9lID0geWUuZXhlYyh3ZS50b0xvd2VyQ2FzZSgpKSB8fCBbXTsKICAgICAgICAgICAgWi5leHRlbmQoewogICAgICAgICAgICAgICAgYWN0aXZlOiAwLAogICAgICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiB7fSwKICAgICAgICAgICAgICAgIGV0YWc6IHt9LAogICAgICAgICAgICAgICAgYWpheFNldHRpbmdzOiB7CiAgICAgICAgICAgICAgICAgICAgdXJsOiB3ZSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiR0VUIiwKICAgICAgICAgICAgICAgICAgICBpc0xvY2FsOiBkZS50ZXN0KF9lWzFdKSwKICAgICAgICAgICAgICAgICAgICBnbG9iYWw6ICEwLAogICAgICAgICAgICAgICAgICAgIHByb2Nlc3NEYXRhOiAhMCwKICAgICAgICAgICAgICAgICAgICBhc3luYzogITAsCiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLAogICAgICAgICAgICAgICAgICAgIGFjY2VwdHM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgIioiOiB4ZSwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogInRleHQvcGxhaW4iLAogICAgICAgICAgICAgICAgICAgICAgICBodG1sOiAidGV4dC9odG1sIiwKICAgICAgICAgICAgICAgICAgICAgICAgeG1sOiAiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGpzb246ICJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBjb250ZW50czogewogICAgICAgICAgICAgICAgICAgICAgICB4bWw6IC94bWwvLAogICAgICAgICAgICAgICAgICAgICAgICBodG1sOiAvaHRtbC8sCiAgICAgICAgICAgICAgICAgICAgICAgIGpzb246IC9qc29uLwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VGaWVsZHM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgeG1sOiAicmVzcG9uc2VYTUwiLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAicmVzcG9uc2VUZXh0IiwKICAgICAgICAgICAgICAgICAgICAgICAganNvbjogInJlc3BvbnNlSlNPTiIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNvbnZlcnRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgIiogdGV4dCI6IFN0cmluZywKICAgICAgICAgICAgICAgICAgICAgICAgInRleHQgaHRtbCI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAidGV4dCBqc29uIjogWi5wYXJzZUpTT04sCiAgICAgICAgICAgICAgICAgICAgICAgICJ0ZXh0IHhtbCI6IFoucGFyc2VYTUwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZsYXRPcHRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogITAsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6ICEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFqYXhTZXR1cDogZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlID8gJCgkKHQsIFouYWpheFNldHRpbmdzKSwgZSkgOiAkKFouYWpheFNldHRpbmdzLCB0KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFqYXhQcmVmaWx0ZXI6IEQobWUpLAogICAgICAgICAgICAgICAgYWpheFRyYW5zcG9ydDogRChiZSksCiAgICAgICAgICAgICAgICBhamF4OiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbih0LCBlLCBuLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1LCBsLCB5LCBtLCB4LCBfID0gZTsKICAgICAgICAgICAgICAgICAgICAgICAgMiAhPT0gYiAmJiAoYiA9IDIsIHMgJiYgY2xlYXJUaW1lb3V0KHMpLCByID0gdm9pZCAwLCBvID0gYSB8fCAiIiwgdy5yZWFkeVN0YXRlID0gdCA+IDAgPyA0IDogMCwgdSA9IHQgPj0gMjAwICYmIDMwMCA+IHQgfHwgMzA0ID09PSB0LCBuICYmIChtID0gcShmLCB3LCBuKSksIG0gPSBIKGYsIG0sIHcsIHUpLCB1ID8gKGYuaWZNb2RpZmllZCAmJiAoeCA9IHcuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSwgeCAmJiAoWi5sYXN0TW9kaWZpZWRbaV0gPSB4KSwgeCA9IHcuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSwgeCAmJiAoWi5ldGFnW2ldID0geCkpLCAyMDQgPT09IHQgfHwgIkhFQUQiID09PSBmLnR5cGUgPyBfID0gIm5vY29udGVudCIgOiAzMDQgPT09IHQgPyBfID0gIm5vdG1vZGlmaWVkIiA6IChfID0gbS5zdGF0ZSwgbCA9IG0uZGF0YSwgeSA9IG0uZXJyb3IsIHUgPSAheSkpIDogKHkgPSBfLCAodCB8fCAhXykgJiYgKF8gPSAiZXJyb3IiLCAwID4gdCAmJiAodCA9IDApKSksIHcuc3RhdHVzID0gdCwgdy5zdGF0dXNUZXh0ID0gKGUgfHwgXykgKyAiIiwgdSA/IGQucmVzb2x2ZVdpdGgocCwgW2wsIF8sIHddKSA6IGQucmVqZWN0V2l0aChwLCBbdywgXywgeV0pLCB3LnN0YXR1c0NvZGUodiksIHYgPSB2b2lkIDAsIGMgJiYgaC50cmlnZ2VyKHUgPyAiYWpheFN1Y2Nlc3MiIDogImFqYXhFcnJvciIsIFt3LCBmLCB1ID8gbCA6IHldKSwgZy5maXJlV2l0aChwLCBbdywgX10pLCBjICYmIChoLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsIFt3LCBmXSksIC0tWi5hY3RpdmUgfHwgWi5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpKSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgIm9iamVjdCIgPT0gdHlwZW9mIHQgJiYgKGUgPSB0LCB0ID0gdm9pZCAwKSwgZSA9IGUgfHwge307CiAgICAgICAgICAgICAgICAgICAgdmFyIHIsIGksIG8sIGEsIHMsIHUsIGMsIGwsIGYgPSBaLmFqYXhTZXR1cCh7fSwgZSksCiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBmLmNvbnRleHQgfHwgZiwKICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGYuY29udGV4dCAmJiAocC5ub2RlVHlwZSB8fCBwLmpxdWVyeSkgPyBaKHApIDogWi5ldmVudCwKICAgICAgICAgICAgICAgICAgICAgICAgZCA9IFouRGVmZXJyZWQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgZyA9IFouQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLAogICAgICAgICAgICAgICAgICAgICAgICB2ID0gZi5zdGF0dXNDb2RlIHx8IHt9LAogICAgICAgICAgICAgICAgICAgICAgICB5ID0ge30sCiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgYiA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHggPSAiY2FuY2VsZWQiLAogICAgICAgICAgICAgICAgICAgICAgICB3ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHlTdGF0ZTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFJlc3BvbnNlSGVhZGVyOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDIgPT09IGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChhID0ge307IGUgPSBoZS5leGVjKG8pOykgYVtlWzFdLnRvTG93ZXJDYXNlKCldID0gZVsyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGFbdC50b0xvd2VyQ2FzZSgpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBlID8gbnVsbCA6IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRBbGxSZXNwb25zZUhlYWRlcnM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAyID09PSBiID8gbyA6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIgfHwgKHQgPSBtW25dID0gbVtuXSB8fCB0LCB5W3RdID0gZSksIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVycmlkZU1pbWVUeXBlOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIgfHwgKGYubWltZVR5cGUgPSB0KSwgdGhpcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDIgPiBiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChlIGluIHQpIHZbZV0gPSBbdltlXSwgdFtlXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugdy5hbHdheXModFt3LnN0YXR1c10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQgfHwgeDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAmJiByLmFib3J0KGUpLCBuKDAsIGUpLCB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgaWYgKGQucHJvbWlzZSh3KS5jb21wbGV0ZSA9IGcuYWRkLCB3LnN1Y2Nlc3MgPSB3LmRvbmUsIHcuZXJyb3IgPSB3LmZhaWwsIGYudXJsID0gKCh0IHx8IGYudXJsIHx8IHdlKSArICIiKS5yZXBsYWNlKGZlLCAiIikucmVwbGFjZSh2ZSwgX2VbMV0gKyAiLy8iKSwgZi50eXBlID0gZS5tZXRob2QgfHwgZS50eXBlIHx8IGYubWV0aG9kIHx8IGYudHlwZSwgZi5kYXRhVHlwZXMgPSBaLnRyaW0oZi5kYXRhVHlwZSB8fCAiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goaHQpIHx8IFsiIl0sIG51bGwgPT0gZi5jcm9zc0RvbWFpbiAmJiAodSA9IHllLmV4ZWMoZi51cmwudG9Mb3dlckNhc2UoKSksIGYuY3Jvc3NEb21haW4gPSAhKCF1IHx8IHVbMV0gPT09IF9lWzFdICYmIHVbMl0gPT09IF9lWzJdICYmICh1WzNdIHx8ICgiaHR0cDoiID09PSB1WzFdID8gIjgwIiA6ICI0NDMiKSkgPT09IChfZVszXSB8fCAoImh0dHA6IiA9PT0gX2VbMV0gPyAiODAiIDogIjQ0MyIpKSkpLCBmLmRhdGEgJiYgZi5wcm9jZXNzRGF0YSAmJiAic3RyaW5nIiAhPSB0eXBlb2YgZi5kYXRhICYmIChmLmRhdGEgPSBaLnBhcmFtKGYuZGF0YSwgZi50cmFkaXRpb25hbCkpLCBQKG1lLCBmLCBlLCB3KSwgMiA9PT0gYikgcmV0dXJuIHc7CiAgICAgICAgICAgICAgICAgICAgYyA9IFouZXZlbnQgJiYgZi5nbG9iYWwsIGMgJiYgMCA9PT0gWi5hY3RpdmUrKyAmJiBaLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLCBmLnR5cGUgPSBmLnR5cGUudG9VcHBlckNhc2UoKSwgZi5oYXNDb250ZW50ID0gIWdlLnRlc3QoZi50eXBlKSwgaSA9IGYudXJsLCBmLmhhc0NvbnRlbnQgfHwgKGYuZGF0YSAmJiAoaSA9IGYudXJsICs9IChsZS50ZXN0KGkpID8gIiYiIDogIj8iKSArIGYuZGF0YSwgZGVsZXRlIGYuZGF0YSksIGYuY2FjaGUgPT09ICExICYmIChmLnVybCA9IHBlLnRlc3QoaSkgPyBpLnJlcGxhY2UocGUsICIkMV89IiArIGNlKyspIDogaSArIChsZS50ZXN0KGkpID8gIiYiIDogIj8iKSArICJfPSIgKyBjZSsrKSksIGYuaWZNb2RpZmllZCAmJiAoWi5sYXN0TW9kaWZpZWRbaV0gJiYgdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsIFoubGFzdE1vZGlmaWVkW2ldKSwgWi5ldGFnW2ldICYmIHcuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsIFouZXRhZ1tpXSkpLCAoZi5kYXRhICYmIGYuaGFzQ29udGVudCAmJiBmLmNvbnRlbnRUeXBlICE9PSAhMSB8fCBlLmNvbnRlbnRUeXBlKSAmJiB3LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsIGYuY29udGVudFR5cGUpLCB3LnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsIGYuZGF0YVR5cGVzWzBdICYmIGYuYWNjZXB0c1tmLmRhdGFUeXBlc1swXV0gPyBmLmFjY2VwdHNbZi5kYXRhVHlwZXNbMF1dICsgKCIqIiAhPT0gZi5kYXRhVHlwZXNbMF0gPyAiLCAiICsgeGUgKyAiOyBxPTAuMDEiIDogIiIpIDogZi5hY2NlcHRzWyIqIl0pOwogICAgICAgICAgICAgICAgICAgIGZvciAobCBpbiBmLmhlYWRlcnMpIHcuc2V0UmVxdWVzdEhlYWRlcihsLCBmLmhlYWRlcnNbbF0pOwogICAgICAgICAgICAgICAgICAgIGlmIChmLmJlZm9yZVNlbmQgJiYgKGYuYmVmb3JlU2VuZC5jYWxsKHAsIHcsIGYpID09PSAhMSB8fCAyID09PSBiKSkgcmV0dXJuIHcuYWJvcnQoKTsKICAgICAgICAgICAgICAgICAgICB4ID0gImFib3J0IjsKICAgICAgICAgICAgICAgICAgICBmb3IgKGwgaW4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IDEKICAgICAgICAgICAgICAgICAgICAgICAgfSkgd1tsXShmW2xdKTsKICAgICAgICAgICAgICAgICAgICBpZiAociA9IFAoYmUsIGYsIGUsIHcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHcucmVhZHlTdGF0ZSA9IDEsIGMgJiYgaC50cmlnZ2VyKCJhamF4U2VuZCIsIFt3LCBmXSksIGYuYXN5bmMgJiYgZi50aW1lb3V0ID4gMCAmJiAocyA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LmFib3J0KCJ0aW1lb3V0IikKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZi50aW1lb3V0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gMSwgci5zZW5kKHksIG4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKF8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKDIgPiBiKSkgdGhyb3cgXzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4oLTEsIF8pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbigtMSwgIk5vIFRyYW5zcG9ydCIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB3CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ2V0SlNPTjogZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBaLmdldCh0LCBlLCBuLCAianNvbiIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ2V0U2NyaXB0OiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouZ2V0KHQsIHZvaWQgMCwgZSwgInNjcmlwdCIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmVhY2goWyJnZXQiLCAicG9zdCJdLCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICBaW2VdID0gZnVuY3Rpb24odCwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBaLmlzRnVuY3Rpb24obikgJiYgKGkgPSBpIHx8IHIsIHIgPSBuLCBuID0gdm9pZCAwKSwgWi5hamF4KHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB0LAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogaSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogcgogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLl9ldmFsVXJsID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFouYWpheCh7CiAgICAgICAgICAgICAgICAgICAgdXJsOiB0LAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAic2NyaXB0IiwKICAgICAgICAgICAgICAgICAgICBhc3luYzogITEsCiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsOiAhMSwKICAgICAgICAgICAgICAgICAgICAidGhyb3dzIjogITAKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sIFouZm4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgIHdyYXBBbGw6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWi5pc0Z1bmN0aW9uKHQpID8gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgWih0aGlzKS53cmFwQWxsKHQuY2FsbCh0aGlzLCBlKSkKICAgICAgICAgICAgICAgICAgICB9KSA6ICh0aGlzWzBdICYmIChlID0gWih0LCB0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSwgdGhpc1swXS5wYXJlbnROb2RlICYmIGUuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLCBlLm1hcChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IHRoaXM7IHQuZmlyc3RFbGVtZW50Q2hpbGQ7KSB0ID0gdC5maXJzdEVsZW1lbnRDaGlsZDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICB9KS5hcHBlbmQodGhpcykpLCB0aGlzKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHdyYXBJbm5lcjogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBaLmlzRnVuY3Rpb24odCkgPyB0aGlzLmVhY2goZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBaKHRoaXMpLndyYXBJbm5lcih0LmNhbGwodGhpcywgZSkpCiAgICAgICAgICAgICAgICAgICAgfSkgOiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gWih0aGlzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmNvbnRlbnRzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG4ubGVuZ3RoID8gbi53cmFwQWxsKHQpIDogZS5hcHBlbmQodCkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHdyYXA6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IFouaXNGdW5jdGlvbih0KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgWih0aGlzKS53cmFwQWxsKGUgPyB0LmNhbGwodGhpcywgbikgOiB0KQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdW53cmFwOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBaLm5vZGVOYW1lKHRoaXMsICJib2R5IikgfHwgWih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpCiAgICAgICAgICAgICAgICAgICAgfSkuZW5kKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZXhwci5maWx0ZXJzLmhpZGRlbiA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0Lm9mZnNldFdpZHRoIDw9IDAgJiYgdC5vZmZzZXRIZWlnaHQgPD0gMAogICAgICAgICAgICB9LCBaLmV4cHIuZmlsdGVycy52aXNpYmxlID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuICFaLmV4cHIuZmlsdGVycy5oaWRkZW4odCkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIGtlID0gLyUyMC9nLAogICAgICAgICAgICAgICAgVGUgPSAvXFtcXSQvLAogICAgICAgICAgICAgICAgRWUgPSAvXHI/XG4vZywKICAgICAgICAgICAgICAgIGplID0gL14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLAogICAgICAgICAgICAgICAgQ2UgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7CiAgICAgICAgICAgIFoucGFyYW0gPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiwgciA9IFtdLAogICAgICAgICAgICAgICAgICAgIGkgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBaLmlzRnVuY3Rpb24oZSkgPyBlKCkgOiBudWxsID09IGUgPyAiIiA6IGUsIHJbci5sZW5ndGhdID0gZW5jb2RlVVJJQ29tcG9uZW50KHQpICsgIj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGUpCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGUgJiYgKGUgPSBaLmFqYXhTZXR0aW5ncyAmJiBaLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCksIFouaXNBcnJheSh0KSB8fCB0LmpxdWVyeSAmJiAhWi5pc1BsYWluT2JqZWN0KHQpKSBaLmVhY2godCwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaSh0aGlzLm5hbWUsIHRoaXMudmFsdWUpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBmb3IgKG4gaW4gdCkgTShuLCB0W25dLCBlLCBpKTsKICAgICAgICAgICAgICAgIHJldHVybiByLmpvaW4oIiYiKS5yZXBsYWNlKGtlLCAiKyIpCiAgICAgICAgICAgIH0sIFouZm4uZXh0ZW5kKHsKICAgICAgICAgICAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFoucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNlcmlhbGl6ZUFycmF5OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gWi5wcm9wKHRoaXMsICJlbGVtZW50cyIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA/IFoubWFrZUFycmF5KHQpIDogdGhpcwogICAgICAgICAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLnR5cGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWUgJiYgIVoodGhpcykuaXMoIjpkaXNhYmxlZCIpICYmIENlLnRlc3QodGhpcy5ub2RlTmFtZSkgJiYgIWplLnRlc3QodCkgJiYgKHRoaXMuY2hlY2tlZCB8fCAhVHQudGVzdCh0KSkKICAgICAgICAgICAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IFoodGhpcykudmFsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDogWi5pc0FycmF5KG4pID8gWi5tYXAobiwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQucmVwbGFjZShFZSwgIlxyXG4iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGUubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuLnJlcGxhY2UoRWUsICJcclxuIikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLmdldCgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmFqYXhTZXR0aW5ncy54aHIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdAogICAgICAgICAgICAgICAgfSBjYXRjaCAodCkge30KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIFNlID0gMCwKICAgICAgICAgICAgICAgIEFlID0ge30sCiAgICAgICAgICAgICAgICBOZSA9IHsKICAgICAgICAgICAgICAgICAgICAwOiAyMDAsCiAgICAgICAgICAgICAgICAgICAgMTIyMzogMjA0CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgUmUgPSBaLmFqYXhTZXR0aW5ncy54aHIoKTsKICAgICAgICAgICAgdC5hdHRhY2hFdmVudCAmJiB0LmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgdCBpbiBBZSkgQWVbdF0oKQogICAgICAgICAgICB9KSwgWS5jb3JzID0gISFSZSAmJiAid2l0aENyZWRlbnRpYWxzIiBpbiBSZSwgWS5hamF4ID0gUmUgPSAhIVJlLCBaLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIGU7CiAgICAgICAgICAgICAgICByZXR1cm4gWS5jb3JzIHx8IFJlICYmICF0LmNyb3NzRG9tYWluID8gewogICAgICAgICAgICAgICAgICAgIHNlbmQ6IGZ1bmN0aW9uKG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGksIG8gPSB0LnhocigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9ICsrU2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvLm9wZW4odC50eXBlLCB0LnVybCwgdC5hc3luYywgdC51c2VybmFtZSwgdC5wYXNzd29yZCksIHQueGhyRmllbGRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpIGluIHQueGhyRmllbGRzKSBvW2ldID0gdC54aHJGaWVsZHNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIHQubWltZVR5cGUgJiYgby5vdmVycmlkZU1pbWVUeXBlICYmIG8ub3ZlcnJpZGVNaW1lVHlwZSh0Lm1pbWVUeXBlKSwgdC5jcm9zc0RvbWFpbiB8fCBuWyJYLVJlcXVlc3RlZC1XaXRoIl0gfHwgKG5bIlgtUmVxdWVzdGVkLVdpdGgiXSA9ICJYTUxIdHRwUmVxdWVzdCIpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgaW4gbikgby5zZXRSZXF1ZXN0SGVhZGVyKGksIG5baV0pOwogICAgICAgICAgICAgICAgICAgICAgICBlID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgJiYgKGRlbGV0ZSBBZVthXSwgZSA9IG8ub25sb2FkID0gby5vbmVycm9yID0gbnVsbCwgImFib3J0IiA9PT0gdCA/IG8uYWJvcnQoKSA6ICJlcnJvciIgPT09IHQgPyByKG8uc3RhdHVzLCBvLnN0YXR1c1RleHQpIDogcihOZVtvLnN0YXR1c10gfHwgby5zdGF0dXMsIG8uc3RhdHVzVGV4dCwgInN0cmluZyIgPT0gdHlwZW9mIG8ucmVzcG9uc2VUZXh0ID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBvLnJlc3BvbnNlVGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiB2b2lkIDAsIG8uZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCBvLm9ubG9hZCA9IGUoKSwgby5vbmVycm9yID0gZSgiZXJyb3IiKSwgZSA9IEFlW2FdID0gZSgiYWJvcnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uc2VuZCh0Lmhhc0NvbnRlbnQgJiYgdC5kYXRhIHx8IG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB0aHJvdyBzCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGFib3J0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSAmJiBlKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IDogdm9pZCAwCiAgICAgICAgICAgIH0pLCBaLmFqYXhTZXR1cCh7CiAgICAgICAgICAgICAgICBhY2NlcHRzOiB7CiAgICAgICAgICAgICAgICAgICAgc2NyaXB0OiAidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY29udGVudHM6IHsKICAgICAgICAgICAgICAgICAgICBzY3JpcHQ6IC8oPzpqYXZhfGVjbWEpc2NyaXB0LwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNvbnZlcnRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAidGV4dCBzY3JpcHQiOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBaLmdsb2JhbEV2YWwodCksIHQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gdC5jYWNoZSAmJiAodC5jYWNoZSA9ICExKSwgdC5jcm9zc0RvbWFpbiAmJiAodC50eXBlID0gIkdFVCIpCiAgICAgICAgICAgIH0pLCBaLmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIGlmICh0LmNyb3NzRG9tYWluKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG47CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VuZDogZnVuY3Rpb24ociwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IFooIjxzY3JpcHQ+IikucHJvcCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmM6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJzZXQ6IHQuc2NyaXB0Q2hhcnNldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM6IHQudXJsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5vbigibG9hZCBlcnJvciIsIG4gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZW1vdmUoKSwgbiA9IG51bGwsIHQgJiYgaSgiZXJyb3IiID09PSB0LnR5cGUgPyA0MDQgOiAyMDAsIHQudHlwZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBRLmhlYWQuYXBwZW5kQ2hpbGQoZVswXSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiBuKCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBJZSA9IFtdLAogICAgICAgICAgICAgICAgT2UgPSAvKD0pXD8oPz0mfCQpfFw/XD8vOwogICAgICAgICAgICBaLmFqYXhTZXR1cCh7CiAgICAgICAgICAgICAgICBqc29ucDogImNhbGxiYWNrIiwKICAgICAgICAgICAgICAgIGpzb25wQ2FsbGJhY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gSWUucG9wKCkgfHwgWi5leHBhbmRvICsgIl8iICsgY2UrKzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1t0XSA9ICEwLCB0CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLCBmdW5jdGlvbihlLCBuLCByKSB7CiAgICAgICAgICAgICAgICB2YXIgaSwgbywgYSwgcyA9IGUuanNvbnAgIT09ICExICYmIChPZS50ZXN0KGUudXJsKSA/ICJ1cmwiIDogInN0cmluZyIgPT0gdHlwZW9mIGUuZGF0YSAmJiAhKGUuY29udGVudFR5cGUgfHwgIiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpICYmIE9lLnRlc3QoZS5kYXRhKSAmJiAiZGF0YSIpOwogICAgICAgICAgICAgICAgcmV0dXJuIHMgfHwgImpzb25wIiA9PT0gZS5kYXRhVHlwZXNbMF0gPyAoaSA9IGUuanNvbnBDYWxsYmFjayA9IFouaXNGdW5jdGlvbihlLmpzb25wQ2FsbGJhY2spID8gZS5qc29ucENhbGxiYWNrKCkgOiBlLmpzb25wQ2FsbGJhY2ssIHMgPyBlW3NdID0gZVtzXS5yZXBsYWNlKE9lLCAiJDEiICsgaSkgOiBlLmpzb25wICE9PSAhMSAmJiAoZS51cmwgKz0gKGxlLnRlc3QoZS51cmwpID8gIiYiIDogIj8iKSArIGUuanNvbnAgKyAiPSIgKyBpKSwgZS5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgfHwgWi5lcnJvcihpICsgIiB3YXMgbm90IGNhbGxlZCIpLCBhWzBdCiAgICAgICAgICAgICAgICB9LCBlLmRhdGFUeXBlc1swXSA9ICJqc29uIiwgbyA9IHRbaV0sIHRbaV0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBhID0gYXJndW1lbnRzCiAgICAgICAgICAgICAgICB9LCByLmFsd2F5cyhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0W2ldID0gbywgZVtpXSAmJiAoZS5qc29ucENhbGxiYWNrID0gbi5qc29ucENhbGxiYWNrLCBJZS5wdXNoKGkpKSwgYSAmJiBaLmlzRnVuY3Rpb24obykgJiYgbyhhWzBdKSwgYSA9IG8gPSB2b2lkIDAKICAgICAgICAgICAgICAgIH0pLCAic2NyaXB0IikgOiB2b2lkIDAKICAgICAgICAgICAgfSksIFoucGFyc2VIVE1MID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgaWYgKCF0IHx8ICJzdHJpbmciICE9IHR5cGVvZiB0KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICJib29sZWFuIiA9PSB0eXBlb2YgZSAmJiAobiA9IGUsIGUgPSAhMSksIGUgPSBlIHx8IFE7CiAgICAgICAgICAgICAgICB2YXIgciA9IGF0LmV4ZWModCksCiAgICAgICAgICAgICAgICAgICAgaSA9ICFuICYmIFtdOwogICAgICAgICAgICAgICAgcmV0dXJuIHIgPyBbZS5jcmVhdGVFbGVtZW50KHJbMV0pXSA6IChyID0gWi5idWlsZEZyYWdtZW50KFt0XSwgZSwgaSksIGkgJiYgaS5sZW5ndGggJiYgWihpKS5yZW1vdmUoKSwgWi5tZXJnZShbXSwgci5jaGlsZE5vZGVzKSkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIExlID0gWi5mbi5sb2FkOwogICAgICAgICAgICBaLmZuLmxvYWQgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICBpZiAoInN0cmluZyIgIT0gdHlwZW9mIHQgJiYgTGUpIHJldHVybiBMZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgdmFyIHIsIGksIG8sIGEgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgIHMgPSB0LmluZGV4T2YoIiAiKTsKICAgICAgICAgICAgICAgIHJldHVybiBzID49IDAgJiYgKHIgPSBaLnRyaW0odC5zbGljZShzKSksIHQgPSB0LnNsaWNlKDAsIHMpKSwgWi5pc0Z1bmN0aW9uKGUpID8gKG4gPSBlLCBlID0gdm9pZCAwKSA6IGUgJiYgIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgKGkgPSAiUE9TVCIpLCBhLmxlbmd0aCA+IDAgJiYgWi5hamF4KHsKICAgICAgICAgICAgICAgICAgICB1cmw6IHQsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogaSwKICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogImh0bWwiLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IGUKICAgICAgICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIG8gPSBhcmd1bWVudHMsIGEuaHRtbChyID8gWigiPGRpdj4iKS5hcHBlbmQoWi5wYXJzZUhUTUwodCkpLmZpbmQocikgOiB0KQogICAgICAgICAgICAgICAgfSkuY29tcGxldGUobiAmJiBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgYS5lYWNoKG4sIG8gfHwgW3QucmVzcG9uc2VUZXh0LCBlLCB0XSkKICAgICAgICAgICAgICAgIH0pLCB0aGlzCiAgICAgICAgICAgIH0sIFouZWFjaChbImFqYXhTdGFydCIsICJhamF4U3RvcCIsICJhamF4Q29tcGxldGUiLCAiYWpheEVycm9yIiwgImFqYXhTdWNjZXNzIiwgImFqYXhTZW5kIl0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIFouZm5bZV0gPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub24oZSwgdCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZXhwci5maWx0ZXJzLmFuaW1hdGVkID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFouZ3JlcChaLnRpbWVycywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSBlLmVsZW0KICAgICAgICAgICAgICAgIH0pLmxlbmd0aAogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgRGUgPSB0LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgICAgICAgICAgWi5vZmZzZXQgPSB7CiAgICAgICAgICAgICAgICBzZXRPZmZzZXQ6IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciwgaSwgbywgYSwgcywgdSwgYywgbCA9IFouY3NzKHQsICJwb3NpdGlvbiIpLAogICAgICAgICAgICAgICAgICAgICAgICBmID0gWih0KSwKICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHt9OwogICAgICAgICAgICAgICAgICAgICJzdGF0aWMiID09PSBsICYmICh0LnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIiksIHMgPSBmLm9mZnNldCgpLCBvID0gWi5jc3ModCwgInRvcCIpLCB1ID0gWi5jc3ModCwgImxlZnQiKSwgYyA9ICgiYWJzb2x1dGUiID09PSBsIHx8ICJmaXhlZCIgPT09IGwpICYmIChvICsgdSkuaW5kZXhPZigiYXV0byIpID4gLTEsIGMgPyAociA9IGYucG9zaXRpb24oKSwgYSA9IHIudG9wLCBpID0gci5sZWZ0KSA6IChhID0gcGFyc2VGbG9hdChvKSB8fCAwLCBpID0gcGFyc2VGbG9hdCh1KSB8fCAwKSwgWi5pc0Z1bmN0aW9uKGUpICYmIChlID0gZS5jYWxsKHQsIG4sIHMpKSwgbnVsbCAhPSBlLnRvcCAmJiAocC50b3AgPSBlLnRvcCAtIHMudG9wICsgYSksIG51bGwgIT0gZS5sZWZ0ICYmIChwLmxlZnQgPSBlLmxlZnQgLSBzLmxlZnQgKyBpKSwgInVzaW5nIiBpbiBlID8gZS51c2luZy5jYWxsKHQsIHApIDogZi5jc3MocCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgWi5mbi5leHRlbmQoewogICAgICAgICAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB2b2lkIDAgPT09IHQgPyB0aGlzIDogdGhpcy5lYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgWi5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsIHQsIGUpCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG4sIHIgPSB0aGlzWzBdLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBvID0gciAmJiByLm93bmVyRG9jdW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKG8pIHJldHVybiBlID0gby5kb2N1bWVudEVsZW1lbnQsIFouY29udGFpbnMoZSwgcikgPyAodHlwZW9mIHIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICE9PSBFdCAmJiAoaSA9IHIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLCBuID0gRihvKSwgewogICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGkudG9wICsgbi5wYWdlWU9mZnNldCAtIGUuY2xpZW50VG9wLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBpLmxlZnQgKyBuLnBhZ2VYT2Zmc2V0IC0gZS5jbGllbnRMZWZ0CiAgICAgICAgICAgICAgICAgICAgfSkgOiBpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcG9zaXRpb246IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCBlLCBuID0gdGhpc1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiZml4ZWQiID09PSBaLmNzcyhuLCAicG9zaXRpb24iKSA/IGUgPSBuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogKHQgPSB0aGlzLm9mZnNldFBhcmVudCgpLCBlID0gdGhpcy5vZmZzZXQoKSwgWi5ub2RlTmFtZSh0WzBdLCAiaHRtbCIpIHx8IChyID0gdC5vZmZzZXQoKSksIHIudG9wICs9IFouY3NzKHRbMF0sICJib3JkZXJUb3BXaWR0aCIsICEwKSwgci5sZWZ0ICs9IFouY3NzKHRbMF0sICJib3JkZXJMZWZ0V2lkdGgiLCAhMCkpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGUudG9wIC0gci50b3AgLSBaLmNzcyhuLCAibWFyZ2luVG9wIiwgITApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogZS5sZWZ0IC0gci5sZWZ0IC0gWi5jc3MobiwgIm1hcmdpbkxlZnQiLCAhMCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IHRoaXMub2Zmc2V0UGFyZW50IHx8IERlOyB0ICYmICFaLm5vZGVOYW1lKHQsICJodG1sIikgJiYgInN0YXRpYyIgPT09IFouY3NzKHQsICJwb3NpdGlvbiIpOykgdCA9IHQub2Zmc2V0UGFyZW50OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCB8fCBEZQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBaLmVhY2goewogICAgICAgICAgICAgICAgc2Nyb2xsTGVmdDogInBhZ2VYT2Zmc2V0IiwKICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogInBhZ2VZT2Zmc2V0IgogICAgICAgICAgICB9LCBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9ICJwYWdlWU9mZnNldCIgPT09IG47CiAgICAgICAgICAgICAgICBaLmZuW2VdID0gZnVuY3Rpb24oaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB2dCh0aGlzLCBmdW5jdGlvbihlLCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gRihlKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gbyA/IGEgPyBhW25dIDogZVtpXSA6IHZvaWQoYSA/IGEuc2Nyb2xsVG8ociA/IHQucGFnZVhPZmZzZXQgOiBvLCByID8gbyA6IHQucGFnZVlPZmZzZXQpIDogZVtpXSA9IG8pCiAgICAgICAgICAgICAgICAgICAgfSwgZSwgaSwgYXJndW1lbnRzLmxlbmd0aCwgbnVsbCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFouZWFjaChbInRvcCIsICJsZWZ0Il0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgIFouY3NzSG9va3NbZV0gPSBfKFkucGl4ZWxQb3NpdGlvbiwgZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuID8gKG4gPSB3KHQsIGUpLCBCdC50ZXN0KG4pID8gWih0KS5wb3NpdGlvbigpW2VdICsgInB4IiA6IG4pIDogdm9pZCAwCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KSwgWi5lYWNoKHsKICAgICAgICAgICAgICAgIEhlaWdodDogImhlaWdodCIsCiAgICAgICAgICAgICAgICBXaWR0aDogIndpZHRoIgogICAgICAgICAgICB9LCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICBaLmVhY2goewogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICJpbm5lciIgKyB0LAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGUsCiAgICAgICAgICAgICAgICAgICAgIiI6ICJvdXRlciIgKyB0CiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgWi5mbltyXSA9IGZ1bmN0aW9uKHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBhcmd1bWVudHMubGVuZ3RoICYmIChuIHx8ICJib29sZWFuIiAhPSB0eXBlb2YgciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gbiB8fCAociA9PT0gITAgfHwgaSA9PT0gITAgPyAibWFyZ2luIiA6ICJib3JkZXIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZ0KHRoaXMsIGZ1bmN0aW9uKGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFouaXNXaW5kb3coZSkgPyBlLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IiArIHRdIDogOSA9PT0gZS5ub2RlVHlwZSA/IChpID0gZS5kb2N1bWVudEVsZW1lbnQsIE1hdGgubWF4KGUuYm9keVsic2Nyb2xsIiArIHRdLCBpWyJzY3JvbGwiICsgdF0sIGUuYm9keVsib2Zmc2V0IiArIHRdLCBpWyJvZmZzZXQiICsgdF0sIGlbImNsaWVudCIgKyB0XSkpIDogdm9pZCAwID09PSByID8gWi5jc3MoZSwgbiwgYSkgOiBaLnN0eWxlKGUsIG4sIHIsIGEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGUsIG8gPyByIDogdm9pZCAwLCBvLCBudWxsKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pLCBaLmZuLnNpemUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxlbmd0aAogICAgICAgICAgICB9LCBaLmZuLmFuZFNlbGYgPSBaLmZuLmFkZEJhY2ssICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kICYmIGRlZmluZSgianF1ZXJ5IiwgW10sIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFoKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBQZSA9IHQualF1ZXJ5LAogICAgICAgICAgICAgICAgJGUgPSB0LiQ7CiAgICAgICAgICAgIHJldHVybiBaLm5vQ29uZmxpY3QgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdC4kID09PSBaICYmICh0LiQgPSAkZSksIGUgJiYgdC5qUXVlcnkgPT09IFogJiYgKHQualF1ZXJ5ID0gUGUpLCBaCiAgICAgICAgICAgIH0sIHR5cGVvZiBlID09PSBFdCAmJiAodC5qUXVlcnkgPSB0LiQgPSBaKSwgWgogICAgICAgIH0pCiAgICB9LCB7fV0sCiAgICAxNjogW2Z1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAoZnVuY3Rpb24odCkgewogICAgICAgICAgICAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiByKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodCAhPT0gZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG51bGwgPT09IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdCA9PT0gRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0ID09PSB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG51bGwgPT09IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZSA9PT0gRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlID09PSBlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA+IGUgJiYgIW8gfHwgIWkgfHwgbiAmJiAhYSAmJiBzIHx8IHIgJiYgcykgcmV0dXJuIDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlID4gdCAmJiAhbiB8fCAhcyB8fCBvICYmICFyICYmIGkgfHwgYSAmJiBpKSByZXR1cm4gLTEKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gdC5sZW5ndGgsIGkgPSBuID8gciA6IC0xOyBuID8gaS0tIDogKytpIDwgcjspCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKHRbaV0sIGksIHQpKSByZXR1cm4gaTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZSAhPT0gZSkgcmV0dXJuIHYodCwgbik7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IG4gLSAxLCBpID0gdC5sZW5ndGg7ICsrciA8IGk7KQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodFtyXSA9PT0gZSkgcmV0dXJuIHI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gYSh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIHQgfHwgITEKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0ID8gIiIgOiB0ICsgIiIKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB1KHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gLTEsIHIgPSB0Lmxlbmd0aDsgKytuIDwgciAmJiBlLmluZGV4T2YodC5jaGFyQXQobikpID4gLTE7KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGModCwgZSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSB0Lmxlbmd0aDsgbi0tICYmIGUuaW5kZXhPZih0LmNoYXJBdChuKSkgPiAtMTspOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gbCh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIodC5jcml0ZXJpYSwgZS5jcml0ZXJpYSkgfHwgdC5pbmRleCAtIGUuaW5kZXgKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gLTEsIG8gPSB0LmNyaXRlcmlhLCBhID0gZS5jcml0ZXJpYSwgcyA9IG8ubGVuZ3RoLCB1ID0gbi5sZW5ndGg7ICsraSA8IHM7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gcihvW2ldLCBhW2ldKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID49IHUpIHJldHVybiBjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBuW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMgKiAoImFzYyIgPT09IGwgfHwgbCA9PT0gITAgPyAxIDogLTEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaW5kZXggLSBlLmluZGV4CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcCh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFd0W3RdCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gaCh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHp0W3RdCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZCh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPyB0ID0gWHRbdF0gOiBuICYmICh0ID0gSnRbdF0pLCAiXFwiICsgdAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGcodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAiXFwiICsgSnRbdF0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB2KHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gdC5sZW5ndGgsIGkgPSBlICsgKG4gPyAwIDogLTEpOyBuID8gaS0tIDogKytpIDwgcjspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0W2ldOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobyAhPT0gbykgcmV0dXJuIGkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24geSh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhdCAmJiAib2JqZWN0IiA9PSB0eXBlb2YgdAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG0odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAxNjAgPj0gdCAmJiB0ID49IDkgJiYgMTMgPj0gdCB8fCAzMiA9PSB0IHx8IDE2MCA9PSB0IHx8IDU3NjAgPT0gdCB8fCA2MTU4ID09IHQgfHwgdCA+PSA4MTkyICYmICg4MjAyID49IHQgfHwgODIzMiA9PSB0IHx8IDgyMzMgPT0gdCB8fCA4MjM5ID09IHQgfHwgODI4NyA9PSB0IHx8IDEyMjg4ID09IHQgfHwgNjUyNzkgPT0gdCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBiKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gLTEsIHIgPSB0Lmxlbmd0aCwgaSA9IC0xLCBvID0gW107ICsrbiA8IHI7KSB0W25dID09PSBlICYmICh0W25dID0gVywgb1srK2ldID0gbik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB4KHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuLCByID0gLTEsIGkgPSB0Lmxlbmd0aCwgbyA9IC0xLCBhID0gW107ICsrciA8IGk7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gdFtyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBlID8gZShzLCByLCB0KSA6IHM7CiAgICAgICAgICAgICAgICAgICAgICAgIHIgJiYgbiA9PT0gdSB8fCAobiA9IHUsIGFbKytvXSA9IHMpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBhCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gdyh0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IC0xLCBuID0gdC5sZW5ndGg7ICsrZSA8IG4gJiYgbSh0LmNoYXJDb2RlQXQoZSkpOyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBfKHQpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gdC5sZW5ndGg7IGUtLSAmJiBtKHQuY2hhckNvZGVBdChlKSk7KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGsodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBWdFt0XQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFQodCkgewogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUodCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoeSh0KSAmJiAhQXModCkgJiYgISh0IGluc3RhbmNlb2YgUSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgbSkgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWEuY2FsbCh0LCAiX19jaGFpbl9fIikgJiYgZWEuY2FsbCh0LCAiX193cmFwcGVkX18iKSkgcmV0dXJuIGhyKHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBtKHQpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBuKCkge30KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX193cmFwcGVkX18gPSB0LCB0aGlzLl9fYWN0aW9uc19fID0gbiB8fCBbXSwgdGhpcy5fX2NoYWluX18gPSAhIWUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFEodCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9fd3JhcHBlZF9fID0gdCwgdGhpcy5fX2FjdGlvbnNfXyA9IFtdLCB0aGlzLl9fZGlyX18gPSAxLCB0aGlzLl9fZmlsdGVyZWRfXyA9ICExLCB0aGlzLl9faXRlcmF0ZWVzX18gPSBbXSwgdGhpcy5fX3Rha2VDb3VudF9fID0gU2EsIHRoaXMuX192aWV3c19fID0gW10KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGV0KCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IG5ldyBRKHRoaXMuX193cmFwcGVkX18pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5fX2FjdGlvbnNfXyA9IHRlKHRoaXMuX19hY3Rpb25zX18pLCB0Ll9fZGlyX18gPSB0aGlzLl9fZGlyX18sIHQuX19maWx0ZXJlZF9fID0gdGhpcy5fX2ZpbHRlcmVkX18sIHQuX19pdGVyYXRlZXNfXyA9IHRlKHRoaXMuX19pdGVyYXRlZXNfXyksIHQuX190YWtlQ291bnRfXyA9IHRoaXMuX190YWtlQ291bnRfXywgdC5fX3ZpZXdzX18gPSB0ZSh0aGlzLl9fdmlld3NfXyksIHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJ0KCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fX2ZpbHRlcmVkX18pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbmV3IFEodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0Ll9fZGlyX18gPSAtMSwgdC5fX2ZpbHRlcmVkX18gPSAhMAogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgdCA9IHRoaXMuY2xvbmUoKSwgdC5fX2Rpcl9fICo9IC0xOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gV3QoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5fX3dyYXBwZWRfXy52YWx1ZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHRoaXMuX19kaXJfXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBBcyh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAwID4gZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBuID8gdC5sZW5ndGggOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFZuKDAsIGksIHRoaXMuX192aWV3c19fKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBvLnN0YXJ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IG8uZW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHMgLSBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHIgPyBzIDogYSAtIDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gdGhpcy5fX2l0ZXJhdGVlc19fLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGwubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0ga2EodSwgdGhpcy5fX3Rha2VDb3VudF9fKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuIHx8IE0gPiBpIHx8IGkgPT0gdSAmJiBoID09IHUpIHJldHVybiBubihyICYmIG4gPyB0LnJldmVyc2UoKSA6IHQsIHRoaXMuX19hY3Rpb25zX18pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICB0OiBmb3IgKDsgdS0tICYmIGggPiBwOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyArPSBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZyA9IC0xLCB2ID0gdFtjXTsgKytnIDwgZjspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IGxbZ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSB5Lml0ZXJhdGVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0geS50eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gbSh2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYiA9PSBCKSB2ID0geDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgheCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYiA9PSBGKSBjb250aW51ZSB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZFtwKytdID0gdgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB6dCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFfXyA9IHt9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBWdCh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhcyh0KSAmJiBkZWxldGUgdGhpcy5fX2RhdGFfX1t0XQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gR3QodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIl9fcHJvdG9fXyIgPT0gdCA/IEUgOiB0aGlzLl9fZGF0YV9fW3RdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBYdCh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiX19wcm90b19fIiAhPSB0ICYmIGVhLmNhbGwodGhpcy5fX2RhdGFfXywgdCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEp0KHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJfX3Byb3RvX18iICE9IHQgJiYgKHRoaXMuX19kYXRhX19bdF0gPSBlKSwgdGhpcwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gWXQodCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQgPyB0Lmxlbmd0aCA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodGhpcy5kYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2g6IHlhKG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldDogbmV3IGZhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyBlLS07KSB0aGlzLnB1c2godFtlXSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFF0KHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LmRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gInN0cmluZyIgPT0gdHlwZW9mIGUgfHwgTGkoZSkgPyBuLnNldC5oYXMoZSkgOiBuLmhhc2hbZV07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID8gMCA6IC0xCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBLdCh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAic3RyaW5nIiA9PSB0eXBlb2YgdCB8fCBMaSh0KSA/IGUuc2V0LmFkZCh0KSA6IGUuaGFzaFt0XSA9ICEwCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBadCh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAtMSwgciA9IHQubGVuZ3RoLCBpID0gLTEsIG8gPSBlLmxlbmd0aCwgYSA9IEZvKHIgKyBvKTsgKytuIDwgcjspIGFbbl0gPSB0W25dOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgKytpIDwgbzspIGFbbisrXSA9IGVbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB0ZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZSB8fCAoZSA9IEZvKHIpKTsgKytuIDwgcjspIGVbbl0gPSB0W25dOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZWUodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gLTEsIHIgPSB0Lmxlbmd0aDsgKytuIDwgciAmJiBlKHRbbl0sIG4sIHQpICE9PSAhMTspOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaWUodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gdC5sZW5ndGg7IG4tLSAmJiBlKHRbbl0sIG4sIHQpICE9PSAhMTspOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gb2UodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gLTEsIHIgPSB0Lmxlbmd0aDsgKytuIDwgcjspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUodFtuXSwgbiwgdCkpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBhZSh0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAtMSwgbyA9IHQubGVuZ3RoLCBhID0gciwgcyA9IGE7ICsraSA8IG87KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IHRbaV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9ICtlKHUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbihjLCBhKSAmJiAoYSA9IGMsIHMgPSB1KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAtMSwgciA9IHQubGVuZ3RoLCBpID0gLTEsIG8gPSBbXTsgKytuIDwgcjspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gdFtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUoYSwgbiwgdCkgJiYgKG9bKytpXSA9IGEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVlKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IC0xLCByID0gdC5sZW5ndGgsIGkgPSBGbyhyKTsgKytuIDwgcjspIGlbbl0gPSBlKHRbbl0sIG4sIHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2UodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gLTEsIHIgPSBlLmxlbmd0aCwgaSA9IHQubGVuZ3RoOyArK24gPCByOykgdFtpICsgbl0gPSBlW25dOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbGUodCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHIgJiYgbyAmJiAobiA9IHRbKytpXSk7ICsraSA8IG87KSBuID0gZShuLCB0W2ldLCBpLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZlKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyICYmIGkgJiYgKG4gPSB0Wy0taV0pOyBpLS07KSBuID0gZShuLCB0W2ldLCBpLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHBlKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IC0xLCByID0gdC5sZW5ndGg7ICsrbiA8IHI7KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUodFtuXSwgbiwgdCkpIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBoZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSB0Lmxlbmd0aCwgciA9IDA7IG4tLTspIHIgKz0gK2UodFtuXSkgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IEUgPyBlIDogdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2UodCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCAhPT0gRSAmJiBlYS5jYWxsKHIsIG4pID8gdCA6IGUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHZlKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IC0xLCBpID0gTXMoZSksIG8gPSBpLmxlbmd0aDsgKytyIDwgbzspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gaVtyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gdFthXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gbihzLCBlW2FdLCBhLCB0LCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1ID09PSB1ID8gdSA9PT0gcyA6IHMgIT09IHMpICYmIChzICE9PSBFIHx8IGEgaW4gdCkgfHwgKHRbYV0gPSB1KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB5ZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IGUgPyB0IDogYmUoZSwgTXMoZSksIHQpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBtZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAtMSwgciA9IG51bGwgPT0gdCwgaSA9ICFyICYmIFFuKHQpLCBvID0gaSA/IHQubGVuZ3RoIDogMCwgYSA9IGUubGVuZ3RoLCBzID0gRm8oYSk7ICsrbiA8IGE7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IGVbbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID8gc1tuXSA9IEtuKHUsIG8pID8gdFt1XSA6IEUgOiBzW25dID0gciA/IEUgOiB0W3VdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGJlKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbiB8fCAobiA9IHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IC0xLCBpID0gZS5sZW5ndGg7ICsrciA8IGk7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGVbcl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuW29dID0gdFtvXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB4ZSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdHlwZW9mIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHIgPyBlID09PSBFID8gdCA6IGFuKHQsIGUsIG4pIDogbnVsbCA9PSB0ID8gU28gOiAib2JqZWN0IiA9PSByID8gSGUodCkgOiBlID09PSBFID8gTG8odCkgOiBNZSh0LCBlKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gd2UodCwgZSwgbiwgciwgaSwgbywgYSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgczsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gJiYgKHMgPSBpID8gbih0LCByLCBpKSA6IG4odCkpLCBzICE9PSBFKSByZXR1cm4gczsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFMaSh0KSkgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gQXModCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyA9IEduKHQpLCAhZSkgcmV0dXJuIHRlKHQsIHMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHJhLmNhbGwodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGMgPT0gWTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjICE9IFogJiYgYyAhPSB6ICYmICghbCB8fCBpKSkgcmV0dXJuIFV0W2NdID8gSm4odCwgYywgZSkgOiBpID8gdCA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgPSBYbihsID8ge30gOiB0KSwgIWUpIHJldHVybiB5ZShzLCB0KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG8gfHwgKG8gPSBbXSksIGEgfHwgKGEgPSBbXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGYgPSBvLmxlbmd0aDsgZi0tOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvW2ZdID09IHQpIHJldHVybiBhW2ZdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5wdXNoKHQpLCBhLnB1c2gocyksICh1ID8gZWUgOiBSZSkodCwgZnVuY3Rpb24ociwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc1tpXSA9IHdlKHIsIGUsIG4sIGksIHQsIG8sIGEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBzCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBfZSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiB0KSB0aHJvdyBuZXcgWW8oVSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYShmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuYXBwbHkoRSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGtlKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0ID8gdC5sZW5ndGggOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW4pIHJldHVybiByOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFVuKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gYSA9PSBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHMgJiYgZS5sZW5ndGggPj0gTSA/IGduKGUpIDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBlLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgdSAmJiAoYSA9IFF0LCBzID0gITEsIGUgPSB1KTsKICAgICAgICAgICAgICAgICAgICAgICAgdDogZm9yICg7ICsraSA8IG47KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IHRbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyAmJiBsID09PSBsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZiA9IGM7IGYtLTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlW2ZdID09PSBsKSBjb250aW51ZSB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIucHVzaChsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGEoZSwgbCwgMCkgPCAwICYmIHIucHVzaChsKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBUZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gITA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQYSh0LCBmdW5jdGlvbih0LCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA9ICEhZSh0LCByLCBpKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRWUodCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gaTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBhKHQsIGZ1bmN0aW9uKHQsIGEsIHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gK2UodCwgYSwgcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobih1LCBpKSB8fCB1ID09PSByICYmIHUgPT09IG8pICYmIChpID0gdSwgbyA9IHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBvCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBqZSh0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobiA9IG51bGwgPT0gbiA/IDAgOiArbiB8fCAwLCAwID4gbiAmJiAobiA9IC1uID4gaSA/IDAgOiBpICsgbiksIHIgPSByID09PSBFIHx8IHIgPiBpID8gaSA6ICtyIHx8IDAsIDAgPiByICYmIChyICs9IGkpLCBpID0gbiA+IHIgPyAwIDogciA+Pj4gMCwgbiA+Pj49IDA7IGkgPiBuOykgdFtuKytdID0gZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIENlKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBhKHQsIGZ1bmN0aW9uKHQsIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUodCwgciwgaSkgJiYgbi5wdXNoKHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBTZSh0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbih0LCBmdW5jdGlvbih0LCBuLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSh0LCBuLCBvKSA/IChpID0gciA/IG4gOiB0LCAhMSkgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgfSksIGkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEFlKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgciB8fCAociA9IFtdKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IC0xLCBvID0gdC5sZW5ndGg7ICsraSA8IG87KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHRbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5KGEpICYmIFFuKGEpICYmIChuIHx8IEFzKGEpIHx8IEVpKGEpKSA/IGUgPyBBZShhLCBlLCBuLCByKSA6IGNlKHIsIGEpIDogbiB8fCAocltyLmxlbmd0aF0gPSBhKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBOZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBxYSh0LCBlLCB0bykKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFJlKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHFhKHQsIGUsIE1zKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gSWUodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSGEodCwgZSwgTXMpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBPZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAtMSwgciA9IGUubGVuZ3RoLCBpID0gLTEsIG8gPSBbXTsgKytuIDwgcjspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gZVtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9pKHRbYV0pICYmIChvWysraV0gPSBhKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBMZSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gIT09IEUgJiYgbiBpbiBmcih0KSAmJiAoZSA9IFtuXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gMCwgaSA9IGUubGVuZ3RoOyBudWxsICE9IHQgJiYgaSA+IHI7KSB0ID0gdFtlW3IrK11dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgJiYgciA9PSBpID8gdCA6IEUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRGUodCwgZSwgbiwgciwgaSwgbykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gZSA/ICEwIDogbnVsbCA9PSB0IHx8IG51bGwgPT0gZSB8fCAhTGkodCkgJiYgIXkoZSkgPyB0ICE9PSB0ICYmIGUgIT09IGUgOiBQZSh0LCBlLCBEZSwgbiwgciwgaSwgbykKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFBlKHQsIGUsIG4sIHIsIGksIG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBBcyh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBBcyhlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBWLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IFY7CiAgICAgICAgICAgICAgICAgICAgICAgIHMgfHwgKGMgPSByYS5jYWxsKHQpLCBjID09IHogPyBjID0gWiA6IGMgIT0gWiAmJiAocyA9IFVpKHQpKSksIHUgfHwgKGwgPSByYS5jYWxsKGUpLCBsID09IHogPyBsID0gWiA6IGwgIT0gWiAmJiAodSA9IFVpKGUpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gYyA9PSBaLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGwgPT0gWiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBjID09IGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoICYmICFzICYmICFmKSByZXR1cm4gSG4odCwgZSwgYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBmICYmIGVhLmNhbGwodCwgIl9fd3JhcHBlZF9fIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IHAgJiYgZWEuY2FsbChlLCAiX193cmFwcGVkX18iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkIHx8IGcpIHJldHVybiBuKGQgPyB0LnZhbHVlKCkgOiB0LCBnID8gZS52YWx1ZSgpIDogZSwgciwgaSwgbywgYSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWgpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgbyB8fCAobyA9IFtdKSwgYSB8fCAoYSA9IFtdKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdiA9IG8ubGVuZ3RoOyB2LS07KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9bdl0gPT0gdCkgcmV0dXJuIGFbdl0gPT0gZTsKICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKHQpLCBhLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0gKHMgPyBxbiA6IE1uKSh0LCBlLCBuLCByLCBpLCBvLCBhKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8ucG9wKCksIGEucG9wKCksIHkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICRlKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9ICFuOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0KSByZXR1cm4gIWk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodCA9IGZyKHQpOyByLS07KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGVbcl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyAmJiBhWzJdID8gYVsxXSAhPT0gdFthWzBdXSA6ICEoYVswXSBpbiB0KSkgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ICsrciA8IGk7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZVtyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gYVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gdFtzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gYVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvICYmIGFbMl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodSA9PT0gRSAmJiAhKHMgaW4gdCkpIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IG4gPyBuKHUsIGMsIHMpIDogRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShsID09PSBFID8gRGUoYywgdSwgbiwgITApIDogbCkpIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcWUodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IFFuKHQpID8gRm8odC5sZW5ndGgpIDogW107CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQYSh0LCBmdW5jdGlvbih0LCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWysrbl0gPSBlKHQsIGksIG8pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCByCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBIZSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gV24odCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxID09IGUubGVuZ3RoICYmIGVbMF1bMl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZVswXVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZVswXVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCA/ICExIDogdFtuXSA9PT0gciAmJiAociAhPT0gRSB8fCBuIGluIGZyKHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGUodCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTWUodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IEFzKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRyKHQpICYmIHJyKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHQgKyAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBwcih0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBvKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvID0gZnIobyksIChuIHx8ICFyKSAmJiAhKGEgaW4gbykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPSAxID09IHQubGVuZ3RoID8gbyA6IExlKG8sIFhlKHQsIDAsIC0xKSksIG51bGwgPT0gbykgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0ganIodCksIG8gPSBmcihvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb1thXSA9PT0gZSA/IGUgIT09IEUgfHwgYSBpbiBvIDogRGUoZSwgb1thXSwgRSwgITApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBGZSh0LCBlLCBuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghTGkodCkpIHJldHVybiB0OwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IFFuKGUpICYmIChBcyhlKSB8fCBVaShlKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gbyA/IEUgOiBNcyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVlKGEgfHwgZSwgZnVuY3Rpb24ocywgdSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgJiYgKHUgPSBzLCBzID0gZVt1XSksIHkocykpIHIgfHwgKHIgPSBbXSksIGkgfHwgKGkgPSBbXSksIEJlKHQsIGUsIHUsIEZlLCBuLCByLCBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gdFt1XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG4gPyBuKGMsIHMsIHUsIHQsIGUpIDogRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGwgPT09IEU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiAmJiAobCA9IHMpLCBsID09PSBFICYmICghbyB8fCB1IGluIHQpIHx8ICFmICYmIChsID09PSBsID8gbCA9PT0gYyA6IGMgIT09IGMpIHx8ICh0W3VdID0gbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksIHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEJlKHQsIGUsIG4sIHIsIGksIG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IG8ubGVuZ3RoLCB1ID0gZVtuXTsgcy0tOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvW3NdID09IHUpIHJldHVybiB2b2lkKHRbbl0gPSBhW3NdKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB0W25dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGkgPyBpKGMsIHUsIG4sIHQsIGUpIDogRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBsID09PSBFOwogICAgICAgICAgICAgICAgICAgICAgICBmICYmIChsID0gdSwgUW4odSkgJiYgKEFzKHUpIHx8IFVpKHUpKSA/IGwgPSBBcyhjKSA/IGMgOiBRbihjKSA/IHRlKGMpIDogW10gOiBNaSh1KSB8fCBFaSh1KSA/IGwgPSBFaShjKSA/IFhpKGMpIDogTWkoYykgPyBjIDoge30gOiBmID0gITEpLCBvLnB1c2godSksIGEucHVzaChsKSwgZiA/IHRbbl0gPSByKGwsIHUsIGksIG8sIGEpIDogKGwgPT09IGwgPyBsICE9PSBjIDogYyA9PT0gYykgJiYgKHRbbl0gPSBsKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gVWUodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gZSA/IEUgOiBlW3RdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFdlKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0ICsgIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gcHIodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIExlKG4sIHQsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB6ZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSB0ID8gZS5sZW5ndGggOiAwOyBuLS07KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGVbbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociAhPSBpICYmIEtuKHIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSByOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhLmNhbGwodCwgciwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gVmUodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCArIG1hKGphKCkgKiAoZSAtIHQgKyAxKSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEdlKHQsIGUsIG4sIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkodCwgZnVuY3Rpb24odCwgaSwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHIgPyAociA9ICExLCB0KSA6IGUobiwgdCwgaSwgbykKICAgICAgICAgICAgICAgICAgICAgICAgfSksIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFhlKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAtMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IG51bGwgPT0gZSA/IDAgOiArZSB8fCAwLCAwID4gZSAmJiAoZSA9IC1lID4gaSA/IDAgOiBpICsgZSksIG4gPSBuID09PSBFIHx8IG4gPiBpID8gaSA6ICtuIHx8IDAsIDAgPiBuICYmIChuICs9IGkpLCBpID0gZSA+IG4gPyAwIDogbiAtIGUgPj4+IDAsIGUgPj4+PSAwOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBvID0gRm8oaSk7ICsrciA8IGk7KSBvW3JdID0gdFtyICsgZV07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBKZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGEodCwgZnVuY3Rpb24odCwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPSBlKHQsIHIsIGkpLCAhbgogICAgICAgICAgICAgICAgICAgICAgICB9KSwgISFuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBZZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodC5zb3J0KGUpOyBuLS07KSB0W25dID0gdFtuXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFFlKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBGbigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IC0xOwogICAgICAgICAgICAgICAgICAgICAgICBlID0gdWUoZSwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIodCkKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gcWUodCwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB1ZShlLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcml0ZXJpYTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogKytpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWWUobywgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCwgZSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEtlKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSAwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGEodCwgZnVuY3Rpb24odCwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiArPSArZSh0LCByLCBpKSB8fCAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBaZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gVW4oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0Lmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSByID09IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gYSAmJiBpID49IE0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gcyA/IGduKCkgOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICB1ID8gKHIgPSBRdCwgYSA9ICExKSA6IChzID0gITEsIHUgPSBlID8gW10gOiBjKTsKICAgICAgICAgICAgICAgICAgICAgICAgdDogZm9yICg7ICsrbiA8IGk7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IHRbbl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGUgPyBlKGwsIG4sIHQpIDogbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhICYmIGwgPT09IGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwID0gdS5sZW5ndGg7IHAtLTspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1W3BdID09PSBmKSBjb250aW51ZSB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgJiYgdS5wdXNoKGYpLCBjLnB1c2gobCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSByKHUsIGYsIDApIDwgMCAmJiAoKGUgfHwgcykgJiYgdS5wdXNoKGYpLCBjLnB1c2gobCkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRuKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IC0xLCByID0gZS5sZW5ndGgsIGkgPSBGbyhyKTsgKytuIDwgcjspIGlbbl0gPSB0W2Vbbl1dOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZW4odCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gdC5sZW5ndGgsIG8gPSByID8gaSA6IC0xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIgPyBvLS0gOiArK28gPCBpKSAmJiBlKHRbb10sIG8sIHQpOyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID8gWGUodCwgciA/IDAgOiBvLCByID8gbyArIDEgOiBpKSA6IFhlKHQsIHIgPyBvICsgMSA6IDAsIHIgPyBpIDogbykKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG5uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0OwogICAgICAgICAgICAgICAgICAgICAgICBuIGluc3RhbmNlb2YgUSAmJiAobiA9IG4udmFsdWUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAtMSwgaSA9IGUubGVuZ3RoOyArK3IgPCBpOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBlW3JdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG8uZnVuYy5hcHBseShvLnRoaXNBcmcsIGNlKFtuXSwgby5hcmdzKSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcm4odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdCA/IHQubGVuZ3RoIDogcjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJudW1iZXIiID09IHR5cGVvZiBlICYmIGUgPT09IGUgJiYgUmEgPj0gaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGkgPiByOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gciArIGkgPj4+IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0W29dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuID8gZSA+PSBhIDogZSA+IGEpICYmIG51bGwgIT09IGEgPyByID0gbyArIDEgOiBpID0gbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb24odCwgZSwgU28sIG4pCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBuKGUpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbyA9IHQgPyB0Lmxlbmd0aCA6IDAsIGEgPSBlICE9PSBlLCBzID0gbnVsbCA9PT0gZSwgdSA9IGUgPT09IEU7IG8gPiBpOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBtYSgoaSArIG8pIC8gMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG4odFtjXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGwgIT09IEUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGwgPT09IGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSkgdmFyIGggPSBwIHx8IHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGggPSBzID8gcCAmJiBmICYmIChyIHx8IG51bGwgIT0gbCkgOiB1ID8gcCAmJiAociB8fCBmKSA6IG51bGwgPT0gbCA/ICExIDogciA/IGUgPj0gbCA6IGUgPiBsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA/IGkgPSBjICsgMSA6IG8gPSBjCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGthKG8sIE5hKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYW4odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgdCkgcmV0dXJuIFNvOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9PT0gRSkgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNhbGwoZSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNhbGwoZSwgbiwgciwgaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuLCByLCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNhbGwoZSwgbiwgciwgaSwgbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuLCByLCBpLCBvLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNhbGwoZSwgbiwgciwgaSwgbywgYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYXBwbHkoZSwgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IGFhKHQuYnl0ZUxlbmd0aCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gbmV3IGRhKGUpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5zZXQobmV3IGRhKHQpKSwgZQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdW4odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gbi5sZW5ndGgsIGkgPSAtMSwgbyA9IF9hKHQubGVuZ3RoIC0gciwgMCksIGEgPSAtMSwgcyA9IGUubGVuZ3RoLCB1ID0gRm8ocyArIG8pOyArK2EgPCBzOykgdVthXSA9IGVbYV07CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyArK2kgPCByOykgdVtuW2ldXSA9IHRbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBvLS07KSB1W2ErK10gPSB0W2krK107CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAtMSwgaSA9IG4ubGVuZ3RoLCBvID0gLTEsIGEgPSBfYSh0Lmxlbmd0aCAtIGksIDApLCBzID0gLTEsIHUgPSBlLmxlbmd0aCwgYyA9IEZvKGEgKyB1KTsgKytvIDwgYTspIGNbb10gPSB0W29dOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gbzsgKytzIDwgdTspIGNbbCArIHNdID0gZVtzXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ICsrciA8IGk7KSBjW2wgKyBuW3JdXSA9IHRbbysrXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGxuKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4sIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZSA/IGUoKSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgPSBGbihyLCBpLCAzKSwgQXMobikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSA9IC0xLCBzID0gbi5sZW5ndGg7ICsrYSA8IHM7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gblthXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdChvLCB1LCByKHUsIGEsIG4pLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBQYShuLCBmdW5jdGlvbihlLCBuLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQobywgZSwgcihlLCBuLCBpKSwgaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZuKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlpKGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG51bGwgPT0gZSA/IDAgOiBuLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gaSA+IDIgPyBuW2kgLSAyXSA6IEUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGkgPiAyID8gblsyXSA6IEUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGkgPiAxID8gbltpIC0gMV0gOiBFOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICgiZnVuY3Rpb24iID09IHR5cGVvZiBvID8gKG8gPSBhbihvLCBzLCA1KSwgaSAtPSAyKSA6IChvID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgcyA/IHMgOiBFLCBpIC09IG8gPyAxIDogMCksIGEgJiYgWm4oblswXSwgblsxXSwgYSkgJiYgKG8gPSAzID4gaSA/IEUgOiBvLCBpID0gMSk7ICsrciA8IGk7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBuW3JdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgJiYgdChlLCB1LCBvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHBuKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gbiA/IEJhKG4pIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbnIoaSkpIHJldHVybiB0KG4sIHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbyA9IGUgPyBpIDogLTEsIGEgPSBmcihuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA/IG8tLSA6ICsrbyA8IGkpICYmIHIoYVtvXSwgbywgYSkgIT09ICExOyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBobih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gZnIoZSksIG8gPSByKGUpLCBhID0gby5sZW5ndGgsIHMgPSB0ID8gYSA6IC0xOyB0ID8gcy0tIDogKytzIDwgYTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IG9bc107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4oaVt1XSwgdSwgaSkgPT09ICExKSBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZG4odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBuKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzICYmIHRoaXMgIT09IG5lICYmIHRoaXMgaW5zdGFuY2VvZiBuID8gciA6IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5hcHBseShlLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB5bih0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGduKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlhICYmIGZhID8gbmV3IFl0KHQpIDogbnVsbAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdm4odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IC0xLCByID0gRW8obG8oZSkpLCBpID0gci5sZW5ndGgsIG8gPSAiIjsgKytuIDwgaTspIG8gPSB0KG8sIHJbbl0sIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24geW4odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGFyZ3VtZW50czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdChlWzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdChlWzBdLCBlWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdChlWzBdLCBlWzFdLCBlWzJdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdChlWzBdLCBlWzFdLCBlWzJdLCBlWzNdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdChlWzBdLCBlWzFdLCBlWzJdLCBlWzNdLCBlWzRdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdChlWzBdLCBlWzFdLCBlWzJdLCBlWzNdLCBlWzRdLCBlWzVdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdChlWzBdLCBlWzFdLCBlWzJdLCBlWzNdLCBlWzRdLCBlWzVdLCBlWzZdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBEYSh0LnByb3RvdHlwZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQuYXBwbHkobiwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTGkocikgPyByIDogbgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBtbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUobiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiBabihuLCByLCBpKSAmJiAociA9IEUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSAkbihuLCB0LCBFLCBFLCBFLCBFLCBFLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvLnBsYWNlaG9sZGVyID0gZS5wbGFjZWhvbGRlciwgbwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBibih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5aShmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG5bMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSByID8gciA6IChuLnB1c2goZSksIHQuYXBwbHkoRSwgbikpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB4bih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuLCByLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAmJiBabihuLCByLCBpKSAmJiAociA9IEUpLCByID0gRm4ociwgaSwgMyksIDEgPT0gci5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gQXMobikgPyBuIDogbHIobik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBhZShuLCByLCB0LCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW4ubGVuZ3RoIHx8IG8gIT09IGUpIHJldHVybiBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRWUobiwgciwgdCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gd24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obiwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgPSBGbihyLCBvLCAzKSwgQXMobikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGkobiwgciwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPiAtMSA/IG5bYV0gOiBFCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU2UobiwgciwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gX24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgJiYgZS5sZW5ndGggPyAobiA9IEZuKG4sIHIsIDMpLCBpKGUsIG4sIHQpKSA6IC0xCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGtuKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID0gRm4obiwgciwgMyksIFNlKGUsIG4sIHQsICEwKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBUbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUsIG4gPSBhcmd1bWVudHMubGVuZ3RoLCByID0gdCA/IG4gOiAtMSwgaSA9IDAsIG8gPSBGbyhuKTsgdCA/IHItLSA6ICsrciA8IG47KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBvW2krK10gPSBhcmd1bWVudHNbcl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGEpIHRocm93IG5ldyBZbyhVKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZSAmJiBtLnByb3RvdHlwZS50aHJ1ICYmICJ3cmFwcGVyIiA9PSBCbihhKSAmJiAoZSA9IG5ldyBtKFtdLCAhMCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHIgPSBlID8gLTEgOiBuOyArK3IgPCBuOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBvW3JdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gQm4oYSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSAid3JhcHBlciIgPT0gcyA/IEZhKGEpIDogRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gdSAmJiBlcih1WzBdKSAmJiB1WzFdID09IChMIHwgTiB8IEkgfCBEKSAmJiAhdVs0XS5sZW5ndGggJiYgMSA9PSB1WzldID8gZVtCbih1WzBdKV0uYXBwbHkoZSwgdVszXSkgOiAxID09IGEubGVuZ3RoICYmIGVyKGEpID8gZVtzXSgpIDogZS50aHJ1KGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBhcmd1bWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0WzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlICYmIDEgPT0gdC5sZW5ndGggJiYgQXMocikgJiYgci5sZW5ndGggPj0gTSkgcmV0dXJuIGUucGxhbnQocikudmFsdWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgYSA9IG4gPyBvW2ldLmFwcGx5KHRoaXMsIHQpIDogcjsgKytpIDwgbjspIGEgPSBvW2ldLmNhbGwodGhpcywgYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRW4odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIHIgJiYgaSA9PT0gRSAmJiBBcyhuKSA/IHQobiwgcikgOiBlKG4sIGFuKHIsIGksIDMpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBqbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCJmdW5jdGlvbiIgIT0gdHlwZW9mIG4gfHwgciAhPT0gRSkgJiYgKG4gPSBhbihuLCByLCAzKSksIHQoZSwgbiwgdG8pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIENuKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgbiB8fCByICE9PSBFKSAmJiAobiA9IGFuKG4sIHIsIDMpKSwgdChlLCBuKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBTbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPSBGbihuLCByLCAzKSwgUmUoZSwgZnVuY3Rpb24oZSwgciwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gbihlLCByLCBvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdCA/IGEgOiByLCBlID0gdCA/IGUgOiBhLCBpW3JdID0gZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQW4odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPSBzKGUpLCAodCA/IGUgOiAiIikgKyBPbihlLCBuLCByKSArICh0ID8gIiIgOiBlKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBObih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0geWkoZnVuY3Rpb24obiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBiKHIsIGUucGxhY2Vob2xkZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRuKG4sIHQsIEUsIHIsIGkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUm4odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obiwgciwgaSwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBhcmd1bWVudHMubGVuZ3RoIDwgMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiByICYmIG8gPT09IEUgJiYgQXMobikgPyB0KG4sIHIsIGksIGEpIDogR2UobiwgRm4ociwgbywgNCksIGksIGEsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEluKHQsIGUsIG4sIHIsIGksIG8sIGEsIHMsIHUsIGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG0gPSBhcmd1bWVudHMubGVuZ3RoLCB4ID0gbSwgdyA9IEZvKG0pOyB4LS07KSB3W3hdID0gYXJndW1lbnRzW3hdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgJiYgKHcgPSB1bih3LCByLCBpKSksIG8gJiYgKHcgPSBjbih3LCBvLCBhKSksIGQgfHwgdikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfID0gbC5wbGFjZWhvbGRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IGIodywgXyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG0gLT0gay5sZW5ndGgsIGMgPiBtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBUID0gcyA/IHRlKHMpIDogRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogPSBfYShjIC0gbSwgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBID0gZCA/IGsgOiBFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTiA9IGQgPyBFIDogaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFIgPSBkID8gdyA6IEUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMID0gZCA/IEUgOiB3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlIHw9IGQgPyBJIDogTywgZSAmPSB+KGQgPyBPIDogSSksIGcgfHwgKGUgJj0gfihDIHwgUykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRCA9IFt0LCBlLCBuLCBSLCBBLCBMLCBOLCBULCB1LCBqXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAgPSBJbi5hcHBseShFLCBEKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVyKHQpICYmIFVhKFAsIEQpLCBQLnBsYWNlaG9sZGVyID0gXywgUAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkID0gcCA/IG4gOiB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBoID8gJFt0XSA6IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcyAmJiAodyA9IHVyKHcsIHMpKSwgZiAmJiB1IDwgdy5sZW5ndGggJiYgKHcubGVuZ3RoID0gdSksIHRoaXMgJiYgdGhpcyAhPT0gbmUgJiYgdGhpcyBpbnN0YW5jZW9mIGwgJiYgKHEgPSB5IHx8IHluKHQpKSwgcS5hcHBseSgkLCB3KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gZSAmIEwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gZSAmIEMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gZSAmIFMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gZSAmIE4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gZSAmIEEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gZSAmIFIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gaCA/IEUgOiB5bih0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGwKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPSArZSwgciA+PSBlIHx8ICF4YShlKSkgcmV0dXJuICIiOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGUgLSByOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA9IG51bGwgPT0gbiA/ICIgIiA6IG4gKyAiIiwgeW8obiwgdmEoaSAvIG4ubGVuZ3RoKSkuc2xpY2UoMCwgaSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIExuKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAtMSwgcyA9IGFyZ3VtZW50cy5sZW5ndGgsIHUgPSAtMSwgYyA9IHIubGVuZ3RoLCBsID0gRm8oYyArIHMpOyArK3UgPCBjOykgbFt1XSA9IHJbdV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgcy0tOykgbFt1KytdID0gYXJndW1lbnRzWysrZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IHRoaXMgJiYgdGhpcyAhPT0gbmUgJiYgdGhpcyBpbnN0YW5jZW9mIGkgPyBhIDogdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmLmFwcGx5KG8gPyBuIDogdGhpcywgbCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGUgJiBDLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHluKHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRG4odCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHpvW3RdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPSBuID09PSBFID8gMCA6ICtuIHx8IDAsIG4gPyAobiA9IGNhKDEwLCBuKSwgZSh0ICogbikgLyBuKSA6IGUodCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUG4odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBGbihyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHIgJiYgbyA9PT0geGUgPyBybihlLCBuLCB0KSA6IG9uKGUsIG4sIG8ociwgaSwgMSksIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICRuKHQsIGUsIG4sIHIsIGksIG8sIGEsIHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBlICYgUzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1ICYmICJmdW5jdGlvbiIgIT0gdHlwZW9mIHQpIHRocm93IG5ldyBZbyhVKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSByID8gci5sZW5ndGggOiAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyB8fCAoZSAmPSB+KEkgfCBPKSwgciA9IGkgPSBFKSwgYyAtPSBpID8gaS5sZW5ndGggOiAwLCBlICYgTykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGkgPSBFCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSB1ID8gRSA6IEZhKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IFt0LCBlLCBuLCByLCBpLCBsLCBmLCBvLCBhLCBzXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAgJiYgKGlyKGgsIHApLCBlID0gaFsxXSwgcyA9IGhbOV0pLCBoWzldID0gbnVsbCA9PSBzID8gdSA/IDAgOiB0Lmxlbmd0aCA6IF9hKHMgLSBjLCAwKSB8fCAwLCBlID09IEMpIHZhciBkID0gZG4oaFswXSwgaFsyXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgZCA9IGUgIT0gSSAmJiBlICE9IChDIHwgSSkgfHwgaFs0XS5sZW5ndGggPyBJbi5hcHBseShFLCBoKSA6IExuLmFwcGx5KEUsIGgpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IHAgPyBNYSA6IFVhOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZyhkLCBoKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcW4odCwgZSwgbiwgciwgaSwgbywgYSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHQubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGUubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodSAhPSBjICYmICEoaSAmJiBjID4gdSkpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ICsrcyA8IHU7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IHRbc10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGVbc10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHIgPyByKGkgPyBmIDogbCwgaSA/IGwgOiBmLCBzKSA6IEU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocCAhPT0gRSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwZShlLCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbCA9PT0gdCB8fCBuKGwsIHQsIHIsIGksIG8sIGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSByZXR1cm4gITEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobCAhPT0gZiAmJiAhbihsLCBmLCByLCBpLCBvLCBhKSkgcmV0dXJuICExCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBIbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBHOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBYOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiArdCA9PSArZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgSjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5uYW1lID09IGUubmFtZSAmJiB0Lm1lc3NhZ2UgPT0gZS5tZXNzYWdlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBLOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ICE9ICt0ID8gZSAhPSArZSA6IHQgPT0gK2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHR0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBudDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PSBlICsgIiIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE1uKHQsIGUsIG4sIHIsIGksIG8sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBNcyh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBzLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBNcyhlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBjLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUgIT0gbCAmJiAhaSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBmID0gdTsgZi0tOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSBzW2ZdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaSA/IHAgaW4gZSA6IGVhLmNhbGwoZSwgcCkpKSByZXR1cm4gITEKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBoID0gaTsgKytmIDwgdTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBzW2ZdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB0W3BdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBlW3BdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSByID8gcihpID8gZyA6IGQsIGkgPyBkIDogZywgcCkgOiBFOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodiA9PT0gRSA/IG4oZCwgZywgciwgaSwgbywgYSkgOiB2KSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaCB8fCAoaCA9ICJjb25zdHJ1Y3RvciIgPT0gcCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0gdC5jb25zdHJ1Y3RvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gZS5jb25zdHJ1Y3RvcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5ICE9IG0gJiYgImNvbnN0cnVjdG9yIiBpbiB0ICYmICJjb25zdHJ1Y3RvciIgaW4gZSAmJiAhKCJmdW5jdGlvbiIgPT0gdHlwZW9mIHkgJiYgeSBpbnN0YW5jZW9mIHkgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgbSAmJiBtIGluc3RhbmNlb2YgbSkpIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRm4odCwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGUuY2FsbGJhY2sgfHwgam87CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpID0gaSA9PT0gam8gPyB4ZSA6IGksIHIgPyBpKHQsIG4sIHIpIDogaQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQm4odCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gdC5uYW1lLCBuID0gTGFbZV0sIHIgPSBuID8gbi5sZW5ndGggOiAwOyByLS07KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG5bcl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGkuZnVuYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IG8gfHwgbyA9PSB0KSByZXR1cm4gaS5uYW1lCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFVuKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBlLmluZGV4T2YgfHwgVHI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpID0gaSA9PT0gVHIgPyBvIDogaSwgdCA/IGkodCwgbiwgcikgOiBpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBXbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSBlbyh0KSwgbiA9IGUubGVuZ3RoOyBuLS07KSBlW25dWzJdID0gcnIoZVtuXVsxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB6bih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gbnVsbCA9PSB0ID8gRSA6IHRbZV07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkaShuKSA/IG4gOiBFCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBWbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAtMSwgaSA9IG4ubGVuZ3RoOyArK3IgPCBpOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBuW3JdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBvLnNpemU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG8udHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImRyb3AiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICs9IGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImRyb3BSaWdodCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgLT0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAidGFrZSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBrYShlLCB0ICsgYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInRha2VSaWdodCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBfYSh0LCBlIC0gYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gR24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG5ldyB0LmNvbnN0cnVjdG9yKGUpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSAmJiAic3RyaW5nIiA9PSB0eXBlb2YgdFswXSAmJiBlYS5jYWxsKHQsICJpbmRleCIpICYmIChuLmluZGV4ID0gdC5pbmRleCwgbi5pbnB1dCA9IHQuaW5wdXQpLCBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBYbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdC5jb25zdHJ1Y3RvcjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgZSBpbnN0YW5jZW9mIGUgfHwgKGUgPSBHbyksIG5ldyBlCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBKbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdC5jb25zdHJ1Y3RvcjsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGl0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzbih0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgWDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHIoK3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBvdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgYXQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHN0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB1dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgY3Q6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBmdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgcHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdC5idWZmZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyByKG4gPyBzbihpKSA6IGksIHQuYnl0ZU9mZnNldCwgdC5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBLOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBudDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHIodCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHR0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gbmV3IHIodC5zb3VyY2UsIEl0LmV4ZWModCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ubGFzdEluZGV4ID0gdC5sYXN0SW5kZXgKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gWW4odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBudWxsID09IHQgfHwgdHIoZSwgdCkgfHwgKGUgPSBwcihlKSwgdCA9IDEgPT0gZS5sZW5ndGggPyB0IDogTGUodCwgWGUoZSwgMCwgLTEpKSwgZSA9IGpyKGUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBudWxsID09IHQgPyB0IDogdFtlXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gciA/IEUgOiByLmFwcGx5KHQsIG4pCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBRbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9IHQgJiYgbnIoQmEodCkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBLbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gIm51bWJlciIgPT0gdHlwZW9mIHQgfHwgRHQudGVzdCh0KSA/ICt0IDogLTEsIGUgPSBudWxsID09IGUgPyBJYSA6IGUsIHQgPiAtMSAmJiB0ICUgMSA9PSAwICYmIGUgPiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBabih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghTGkobikpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0eXBlb2YgZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJudW1iZXIiID09IHIgPyBRbihuKSAmJiBLbihlLCBuLmxlbmd0aCkgOiAic3RyaW5nIiA9PSByICYmIGUgaW4gbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBuW2VdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IHQgPyB0ID09PSBpIDogaSAhPT0gaQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdHIodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHR5cGVvZiB0OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoInN0cmluZyIgPT0gbiAmJiBFdC50ZXN0KHQpIHx8ICJudW1iZXIiID09IG4pIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFzKHQpKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gIVR0LnRlc3QodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByIHx8IG51bGwgIT0gZSAmJiB0IGluIGZyKGUpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBlcih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gQm4odCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG4gaW4gUS5wcm90b3R5cGUpKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gZVtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPT09IHIpIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBGYShyKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhaSAmJiB0ID09PSBpWzBdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBucih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAibnVtYmVyIiA9PSB0eXBlb2YgdCAmJiB0ID4gLTEgJiYgdCAlIDEgPT0gMCAmJiBJYSA+PSB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBycih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSB0ICYmICFMaSh0KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaXIodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBuIHwgciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBMID4gaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSByID09IEwgJiYgbiA9PSBOIHx8IHIgPT0gTCAmJiBuID09IEQgJiYgdFs3XS5sZW5ndGggPD0gZVs4XSB8fCByID09IChMIHwgRCkgJiYgbiA9PSBOOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW8gJiYgIWEpIHJldHVybiB0OwogICAgICAgICAgICAgICAgICAgICAgICByICYgQyAmJiAodFsyXSA9IGVbMl0sIGkgfD0gbiAmIEMgPyAwIDogQSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gZVszXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gdFszXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbM10gPSB1ID8gdW4odSwgcywgZVs0XSkgOiB0ZShzKSwgdFs0XSA9IHUgPyBiKHRbM10sIFcpIDogdGUoZVs0XSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcyA9IGVbNV0sIHMgJiYgKHUgPSB0WzVdLCB0WzVdID0gdSA/IGNuKHUsIHMsIGVbNl0pIDogdGUocyksIHRbNl0gPSB1ID8gYih0WzVdLCBXKSA6IHRlKGVbNl0pKSwgcyA9IGVbN10sIHMgJiYgKHRbN10gPSB0ZShzKSksIHIgJiBMICYmICh0WzhdID0gbnVsbCA9PSB0WzhdID8gZVs4XSA6IGthKHRbOF0sIGVbOF0pKSwgbnVsbCA9PSB0WzldICYmICh0WzldID0gZVs5XSksIHRbMF0gPSBlWzBdLCB0WzFdID0gaSwgdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gb3IodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gRSA/IGUgOiBOcyh0LCBlLCBvcikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFyKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGZyKHQpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gLTEsIHIgPSBlLmxlbmd0aCwgaSA9IHt9OyArK24gPCByOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBlW25dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyBpbiB0ICYmIChpW29dID0gdFtvXSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc3IodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTmUodCwgZnVuY3Rpb24odCwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSh0LCByLCBpKSAmJiAobltyXSA9IHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSB0Lmxlbmd0aCwgciA9IGthKGUubGVuZ3RoLCBuKSwgaSA9IHRlKHQpOyByLS07KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGVbcl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W3JdID0gS24obywgbikgPyBpW29dIDogRQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjcih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSB0byh0KSwgbiA9IGUubGVuZ3RoLCByID0gbiAmJiB0Lmxlbmd0aCwgaSA9ICEhciAmJiBucihyKSAmJiAoQXModCkgfHwgRWkodCkpLCBvID0gLTEsIGEgPSBbXTsgKytvIDwgbjspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gZVtvXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpICYmIEtuKHMsIHIpIHx8IGVhLmNhbGwodCwgcykpICYmIGEucHVzaChzKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBscih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyBbXSA6IFFuKHQpID8gTGkodCkgPyB0IDogR28odCkgOiBvbyh0KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZnIodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTGkodCkgPyB0IDogR28odCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHByKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFzKHQpKSByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHModCkucmVwbGFjZShqdCwgZnVuY3Rpb24odCwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKHIgPyBpLnJlcGxhY2UoTnQsICIkMSIpIDogbiB8fCB0KQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgZQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaHIodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIFEgPyB0LmNsb25lKCkgOiBuZXcgbSh0Ll9fd3JhcHBlZF9fLCB0Ll9fY2hhaW5fXywgdGUodC5fX2FjdGlvbnNfXykpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkcih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSAobiA/IFpuKHQsIGUsIG4pIDogbnVsbCA9PSBlKSA/IDEgOiBfYShtYShlKSB8fCAxLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDAsIGkgPSB0ID8gdC5sZW5ndGggOiAwLCBvID0gLTEsIGEgPSBGbyh2YShpIC8gZSkpOyBpID4gcjspIGFbKytvXSA9IFhlKHQsIHIsIHIgKz0gZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBncih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAtMSwgbiA9IHQgPyB0Lmxlbmd0aCA6IDAsIHIgPSAtMSwgaSA9IFtdOyArK2UgPCBuOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0W2VdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyAmJiAoaVsrK3JdID0gbykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdnIodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQgPyB0Lmxlbmd0aCA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID8gKChuID8gWm4odCwgZSwgbikgOiBudWxsID09IGUpICYmIChlID0gMSksIFhlKHQsIDAgPiBlID8gMCA6IGUpKSA6IFtdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB5cih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdCA/IHQubGVuZ3RoIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPyAoKG4gPyBabih0LCBlLCBuKSA6IG51bGwgPT0gZSkgJiYgKGUgPSAxKSwgZSA9IHIgLSAoK2UgfHwgMCksIFhlKHQsIDAsIDAgPiBlID8gMCA6IGUpKSA6IFtdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBtcih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ICYmIHQubGVuZ3RoID8gZW4odCwgRm4oZSwgbiwgMyksICEwLCAhMCkgOiBbXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYnIodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCAmJiB0Lmxlbmd0aCA/IGVuKHQsIEZuKGUsIG4sIDMpLCAhMCkgOiBbXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24geHIodCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHQgPyB0Lmxlbmd0aCA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpID8gKG4gJiYgIm51bWJlciIgIT0gdHlwZW9mIG4gJiYgWm4odCwgZSwgbikgJiYgKG4gPSAwLCByID0gaSksIGplKHQsIGUsIG4sIHIpKSA6IFtdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB3cih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID8gdFswXSA6IEUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9yKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0ID8gdC5sZW5ndGggOiAwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiAmJiBabih0LCBlLCBuKSAmJiAoZSA9ICExKSwgciA/IEFlKHQsIGUpIDogW10KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGtyKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0ID8gdC5sZW5ndGggOiAwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA/IEFlKHQsICEwKSA6IFtdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBUcih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdCA/IHQubGVuZ3RoIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyKSByZXR1cm4gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgibnVtYmVyIiA9PSB0eXBlb2YgbikgbiA9IDAgPiBuID8gX2EociArIG4sIDApIDogbjsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBybih0LCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID4gaSAmJiAoZSA9PT0gZSA/IGUgPT09IHRbaV0gOiB0W2ldICE9PSB0W2ldKSA/IGkgOiAtMQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvKHQsIGUsIG4gfHwgMCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEVyKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlyKHQsIDEpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBqcih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdCA/IHQubGVuZ3RoIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPyB0W2UgLSAxXSA6IEUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIENyKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0ID8gdC5sZW5ndGggOiAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHJldHVybiAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSByOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIm51bWJlciIgPT0gdHlwZW9mIG4pIGkgPSAoMCA+IG4gPyBfYShyICsgbiwgMCkgOiBrYShuIHx8IDAsIHIgLSAxKSkgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gcm4odCwgZSwgITApIC0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdFtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSA9PT0gZSA/IGUgPT09IG8gOiBvICE9PSBvKSA/IGkgOiAtMQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlICE9PSBlKSByZXR1cm4gdih0LCBpLCAhMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBpLS07KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRbaV0gPT09IGUpIHJldHVybiBpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFNyKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGFyZ3VtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB0WzBdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUgfHwgIWUubGVuZ3RoKSByZXR1cm4gZTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIHIgPSBVbigpLCBpID0gdC5sZW5ndGg7ICsrbiA8IGk7KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbyA9IDAsIGEgPSB0W25dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvID0gcihlLCBhLCBvKSkgPiAtMTspIGhhLmNhbGwoZSwgbywgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBBcih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdCB8fCAhdC5sZW5ndGgpIHJldHVybiByOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSBGbihlLCBuLCAzKTsgKytpIDwgYTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gdFtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUocywgaSwgdCkgJiYgKHIucHVzaChzKSwgby5wdXNoKGkpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB6ZSh0LCBvKSwgcgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTnIodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdnIodCwgMSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFJyKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0ID8gdC5sZW5ndGggOiAwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciA/IChuICYmICJudW1iZXIiICE9IHR5cGVvZiBuICYmIFpuKHQsIGUsIG4pICYmIChlID0gMCwgbiA9IHIpLCBYZSh0LCBlLCBuKSkgOiBbXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gSXIodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQgPyB0Lmxlbmd0aCA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID8gKChuID8gWm4odCwgZSwgbikgOiBudWxsID09IGUpICYmIChlID0gMSksIFhlKHQsIDAsIDAgPiBlID8gMCA6IGUpKSA6IFtdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBPcih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdCA/IHQubGVuZ3RoIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPyAoKG4gPyBabih0LCBlLCBuKSA6IG51bGwgPT0gZSkgJiYgKGUgPSAxKSwgZSA9IHIgLSAoK2UgfHwgMCksIFhlKHQsIDAgPiBlID8gMCA6IGUpKSA6IFtdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBMcih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ICYmIHQubGVuZ3RoID8gZW4odCwgRm4oZSwgbiwgMyksICExLCAhMCkgOiBbXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRHIodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCAmJiB0Lmxlbmd0aCA/IGVuKHQsIEZuKGUsIG4sIDMpKSA6IFtdCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBQcih0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdCA/IHQubGVuZ3RoIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpKSByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gZSAmJiAiYm9vbGVhbiIgIT0gdHlwZW9mIGUgJiYgKHIgPSBuLCBuID0gWm4odCwgZSwgcikgPyBFIDogZSwgZSA9ICExKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBGbigpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG51bGwgIT0gbiB8fCBhICE9PSB4ZSkgJiYgKG4gPSBhKG4sIHIsIDMpKSwgZSAmJiBVbigpID09IG8gPyB4KHQsIG4pIDogWmUodCwgbikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICRyKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0IHx8ICF0Lmxlbmd0aCkgcmV0dXJuIFtdOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBzZSh0LCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUW4odCkgPyAobiA9IF9hKHQubGVuZ3RoLCBuKSwgITApIDogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gRm8obik7ICsrZSA8IG47KSByW2VdID0gdWUodCwgVWUoZSkpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcXIodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQgPyB0Lmxlbmd0aCA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcikgcmV0dXJuIFtdOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9ICRyKHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBlID8gaSA6IChlID0gYW4oZSwgbiwgNCksIHVlKGksIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsZSh0LCBlLCBFLCAhMCkKICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBIcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IC0xLCBlID0gYXJndW1lbnRzLmxlbmd0aDsgKyt0IDwgZTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFFuKG4pKSB2YXIgciA9IHIgPyBjZShrZShyLCBuKSwga2UobiwgcikpIDogbgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID8gWmUocikgOiBbXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTXIodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQgPyB0Lmxlbmd0aCA6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIXIgfHwgZSB8fCBBcyh0WzBdKSB8fCAoZSA9IFtdKTsgKytuIDwgcjspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdFtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPyBpW29dID0gZVtuXSA6IG8gJiYgKGlbb1swXV0gPSBvWzFdKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBGcih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZSh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uX19jaGFpbl9fID0gITAsIG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEJyKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuY2FsbChuLCB0KSwgdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gVXIodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5jYWxsKG4sIHQpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBXcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZyKHRoaXMpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB6cigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBtKHRoaXMudmFsdWUoKSwgdGhpcy5fX2NoYWluX18pCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBWcih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUsIHIgPSB0aGlzOyByIGluc3RhbmNlb2YgbjspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gaHIocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID8gby5fX3dyYXBwZWRfXyA9IGkgOiBlID0gaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSByLl9fd3JhcHBlZF9fCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8uX193cmFwcGVkX18gPSB0LCBlCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBHcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLl9fd3JhcHBlZF9fLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiAmJiBuLl9fZGlyX18gPCAwID8gdCA6IHQucmV2ZXJzZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9fYWN0aW9uc19fLmxlbmd0aCAmJiAobiA9IG5ldyBRKHRoaXMpKSwgbiA9IG4ucmV2ZXJzZSgpLCBuLl9fYWN0aW9uc19fLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmM6IFVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IFtlXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQXJnOiBFCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgbmV3IG0obiwgdGhpcy5fX2NoYWluX18pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGhydShlKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gWHIoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlKCkgKyAiIgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gSnIoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBubih0aGlzLl9fd3JhcHBlZF9fLCB0aGlzLl9fYWN0aW9uc19fKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gWXIodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IEFzKHQpID8gb2UgOiBUZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gJiYgWm4odCwgZSwgbikgJiYgKGUgPSBFKSwgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGUgfHwgbiAhPT0gRSkgJiYgKGUgPSBGbihlLCBuLCAzKSksIHIodCwgZSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFFyKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBBcyh0KSA/IHNlIDogQ2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID0gRm4oZSwgbiwgMyksIHIodCwgZSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEtyKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzKHQsIEhlKGUpKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gWnIodCwgZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHQgPyBCYSh0KSA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBucihpKSB8fCAodCA9IG9vKHQpLCBpID0gdC5sZW5ndGgpLCBuID0gIm51bWJlciIgIT0gdHlwZW9mIG4gfHwgciAmJiBabihlLCBuLCByKSA/IDAgOiAwID4gbiA/IF9hKGkgKyBuLCAwKSA6IG4gfHwgMCwgInN0cmluZyIgPT0gdHlwZW9mIHQgfHwgIUFzKHQpICYmIEJpKHQpID8gaSA+PSBuICYmIHQuaW5kZXhPZihlLCBuKSA+IC0xIDogISFpICYmIFVuKHQsIGUsIG4pID4gLTEKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRpKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBBcyh0KSA/IHVlIDogcWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID0gRm4oZSwgbiwgMyksIHIodCwgZSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVpKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRpKHQsIExvKGUpKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbmkodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IEFzKHQpID8gc2UgOiBDZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPSBGbihlLCBuLCAzKSwgcih0LCBmdW5jdGlvbih0LCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWUodCwgbiwgcikKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJpKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPyBabih0LCBlLCBuKSA6IG51bGwgPT0gZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGxyKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID4gMCA/IHRbVmUoMCwgciAtIDEpXSA6IEUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IEdpKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG8ubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHIgLSAxOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSBrYSgwID4gZSA/IDAgOiArZSB8fCAwLCByKTsgKytpIDwgZTspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gVmUoaSwgYSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IG9bc107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvW3NdID0gb1tpXSwgb1tpXSA9IHUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5sZW5ndGggPSBlLCBvCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByaSh0LCBTYSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9pKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0ID8gQmEodCkgOiAwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnIoZSkgPyBlIDogTXModCkubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBhaSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gQXModCkgPyBwZSA6IEplOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiAmJiBabih0LCBlLCBuKSAmJiAoZSA9IEUpLCAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgZSB8fCBuICE9PSBFKSAmJiAoZSA9IEZuKGUsIG4sIDMpKSwgcih0LCBlKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2kodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0KSByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgICAgIG4gJiYgWm4odCwgZSwgbikgJiYgKGUgPSBFKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IEZuKGUsIG4sIDMpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHFlKHQsIGZ1bmN0aW9uKHQsIG4sIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JpdGVyaWE6IGUodCwgbiwgaSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6ICsrciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFllKGksIGwpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1aSh0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyBbXSA6IChyICYmIFpuKGUsIG4sIHIpICYmIChuID0gRSksIEFzKGUpIHx8IChlID0gbnVsbCA9PSBlID8gW10gOiBbZV0pLCBBcyhuKSB8fCAobiA9IG51bGwgPT0gbiA/IFtdIDogW25dKSwgUWUodCwgZSwgbikpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjaSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRcih0LCBIZShlKSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGxpKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiB0KSB0aHJvdyBuZXcgWW8oVSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gZSwgZSA9IG4KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IHhhKHQgPSArdCkgPyB0IDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtLXQgPCAxID8gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBmaSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuICYmIFpuKHQsIGUsIG4pICYmIChlID0gRSksIGUgPSB0ICYmIG51bGwgPT0gZSA/IHQubGVuZ3RoIDogX2EoK2UgfHwgMCwgMCksICRuKHQsIEwsIEUsIEUsIEUsIEUsIGUpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBwaSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHQpIHRocm93IG5ldyBZbyhVKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBlLCBlID0gcgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtLXQgPiAwICYmIChuID0gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSwgMSA+PSB0ICYmIChlID0gRSksIG4KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaGkodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiByKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaCAmJiBzYShoKSwgYyAmJiBzYShjKSwgZyA9IDAsIGMgPSBoID0gZCA9IEUKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaShlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICYmIHNhKG4pLCBjID0gaCA9IGQgPSBFLCBlICYmIChnID0gZ3MoKSwgbCA9IHQuYXBwbHkocCwgdSksIGggfHwgYyB8fCAodSA9IHAgPSBFKSkKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbygpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZSAtIChncygpIC0gZik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID49IHQgfHwgdCA+IGUgPyBpKGQsIGMpIDogaCA9IHBhKG8sIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGEoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKHksIGgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHMoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodSA9IGFyZ3VtZW50cywgZiA9IGdzKCksIHAgPSB0aGlzLCBkID0geSAmJiAoaCB8fCAhbSksIHYgPT09ICExKSB2YXIgbiA9IG0gJiYgIWg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjIHx8IG0gfHwgKGcgPSBmKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHYgLSAoZiAtIGcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gMCA+PSByIHx8IHIgPiB2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPyAoYyAmJiAoYyA9IHNhKGMpKSwgZyA9IGYsIGwgPSB0LmFwcGx5KHAsIHUpKSA6IGMgfHwgKGMgPSBwYShhLCByKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpICYmIGggPyBoID0gc2EoaCkgOiBoIHx8IGUgPT09IHYgfHwgKGggPSBwYShvLCBlKSksIG4gJiYgKGkgPSAhMCwgbCA9IHQuYXBwbHkocCwgdSkpLCAhaSB8fCBoIHx8IGMgfHwgKHUgPSBwID0gRSksIGwKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSwgYywgbCwgZiwgcCwgaCwgZCwgZyA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gITA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiB0KSB0aHJvdyBuZXcgWW8oVSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlID0gMCA+IGUgPyAwIDogK2UgfHwgMCwgbiA9PT0gITApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gITA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gITEKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIExpKG4pICYmIChtID0gISFuLmxlYWRpbmcsIHYgPSAibWF4V2FpdCIgaW4gbiAmJiBfYSgrbi5tYXhXYWl0IHx8IDAsIGUpLCB5ID0gInRyYWlsaW5nIiBpbiBuID8gISFuLnRyYWlsaW5nIDogeSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzLmNhbmNlbCA9IHIsIHMKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRpKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHQgfHwgZSAmJiAiZnVuY3Rpb24iICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgWW8oVSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGFyZ3VtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZSA/IGUuYXBwbHkodGhpcywgcikgOiByWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLmNhY2hlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uaGFzKGkpKSByZXR1cm4gby5nZXQoaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHQuYXBwbHkodGhpcywgcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5jYWNoZSA9IG8uc2V0KGksIGEpLCBhCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmNhY2hlID0gbmV3IGRpLkNhY2hlLCBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiB0KSB0aHJvdyBuZXcgWW8oVSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHZpKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBpKDIsIHQpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB5aSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiB0KSB0aHJvdyBuZXcgWW8oVSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID0gX2EoZSA9PT0gRSA/IHQubGVuZ3RoIC0gMSA6ICtlIHx8IDAsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IGFyZ3VtZW50cywgciA9IC0xLCBpID0gX2Eobi5sZW5ndGggLSBlLCAwKSwgbyA9IEZvKGkpOyArK3IgPCBpOykgb1tyXSA9IG5bZSArIHJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5jYWxsKHRoaXMsIG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5jYWxsKHRoaXMsIG5bMF0sIG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5jYWxsKHRoaXMsIG5bMF0sIG5bMV0sIG8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gRm8oZSArIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAociA9IC0xOyArK3IgPCBlOykgYVtyXSA9IG5bcl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFbZV0gPSBvLCB0LmFwcGx5KHRoaXMsIGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBtaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiB0KSB0aHJvdyBuZXcgWW8oVSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseSh0aGlzLCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBiaSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gITA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiB0KSB0aHJvdyBuZXcgWW8oVSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID09PSAhMSA/IHIgPSAhMSA6IExpKG4pICYmIChyID0gImxlYWRpbmciIGluIG4gPyAhIW4ubGVhZGluZyA6IHIsIGkgPSAidHJhaWxpbmciIGluIG4gPyAhIW4udHJhaWxpbmcgOiBpKSwgaGkodCwgZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhZGluZzogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFdhaXQ6ICtlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhaWxpbmc6IGkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHhpKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPSBudWxsID09IGUgPyBTbyA6IGUsICRuKGUsIEksIEUsIFt0XSwgW10pCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB3aSh0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlICYmICJib29sZWFuIiAhPSB0eXBlb2YgZSAmJiBabih0LCBlLCBuKSA/IGUgPSAhMSA6ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgKHIgPSBuLCBuID0gZSwgZSA9ICExKSwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgbiA/IHdlKHQsIGUsIGFuKG4sIHIsIDEpKSA6IHdlKHQsIGUpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBfaSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlID8gd2UodCwgITAsIGFuKGUsIG4sIDEpKSA6IHdlKHQsICEwKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ga2kodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA+IGUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFRpKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPj0gZQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRWkodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geSh0KSAmJiBRbih0KSAmJiBlYS5jYWxsKHQsICJjYWxsZWUiKSAmJiAhbGEuY2FsbCh0LCAiY2FsbGVlIikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGppKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09ICEwIHx8IHQgPT09ICExIHx8IHkodCkgJiYgcmEuY2FsbCh0KSA9PSBHOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQ2kodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geSh0KSAmJiByYS5jYWxsKHQpID09IFgKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFNpKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhdCAmJiAxID09PSB0Lm5vZGVUeXBlICYmIHkodCkgJiYgIU1pKHQpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBBaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyAhMCA6IFFuKHQpICYmIChBcyh0KSB8fCBCaSh0KSB8fCBFaSh0KSB8fCB5KHQpICYmIE9pKHQuc3BsaWNlKSkgPyAhdC5sZW5ndGggOiAhTXModCkubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBOaSh0LCBlLCBuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAiZnVuY3Rpb24iID09IHR5cGVvZiBuID8gYW4obiwgciwgMykgOiBFOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG4gPyBuKHQsIGUpIDogRTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgPT09IEUgPyBEZSh0LCBlLCBuKSA6ICEhaQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUmkodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geSh0KSAmJiAic3RyaW5nIiA9PSB0eXBlb2YgdC5tZXNzYWdlICYmIHJhLmNhbGwodCkgPT0gSgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gSWkodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIm51bWJlciIgPT0gdHlwZW9mIHQgJiYgeGEodCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE9pKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIExpKHQpICYmIHJhLmNhbGwodCkgPT0gWQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTGkodCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHR5cGVvZiB0OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISF0ICYmICgib2JqZWN0IiA9PSBlIHx8ICJmdW5jdGlvbiIgPT0gZSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIERpKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPSAiZnVuY3Rpb24iID09IHR5cGVvZiBuID8gYW4obiwgciwgMykgOiBFLCAkZSh0LCBXbihlKSwgbikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFBpKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEhpKHQpICYmIHQgIT0gK3QKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICRpKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCA/ICExIDogT2kodCkgPyBvYS50ZXN0KHRhLmNhbGwodCkpIDogeSh0KSAmJiBMdC50ZXN0KHQpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBxaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09PSB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBIaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAibnVtYmVyIiA9PSB0eXBlb2YgdCB8fCB5KHQpICYmIHJhLmNhbGwodCkgPT0gSwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTWkodCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF5KHQpIHx8IHJhLmNhbGwodCkgIT0gWiB8fCBFaSh0KSB8fCAhZWEuY2FsbCh0LCAiY29uc3RydWN0b3IiKSAmJiAoZSA9IHQuY29uc3RydWN0b3IsICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgIShlIGluc3RhbmNlb2YgZSkpKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTmUodCwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSksIG4gPT09IEUgfHwgZWEuY2FsbCh0LCBuKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRmkodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTGkodCkgJiYgcmEuY2FsbCh0KSA9PSB0dAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQmkodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gInN0cmluZyIgPT0gdHlwZW9mIHQgfHwgeSh0KSAmJiByYS5jYWxsKHQpID09IG50CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBVaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KHQpICYmIG5yKHQubGVuZ3RoKSAmJiAhIUJ0W3JhLmNhbGwodCldCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBXaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSBFCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB6aSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID4gdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gVmkodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA+PSB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBHaSh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdCA/IEJhKHQpIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5yKGUpID8gZSA/IHRlKHQpIDogW10gOiBvbyh0KQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gWGkodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmUodCwgdG8odCkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBKaSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gRGEodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuICYmIFpuKHQsIGUsIG4pICYmIChlID0gRSksIGUgPyB5ZShyLCBlKSA6IHIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFlpKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9lKHQsIHRvKHQpKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUWkodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG51bGwgPT0gdCA/IEUgOiBMZSh0LCBwcihlKSwgZSArICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPT09IEUgPyBuIDogcgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gS2kodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0KSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZWEuY2FsbCh0LCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuICYmICF0cihlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPSBwcihlKSwgdCA9IDEgPT0gZS5sZW5ndGggPyB0IDogTGUodCwgWGUoZSwgMCwgLTEpKSwgbnVsbCA9PSB0KSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0ganIoZSksIG4gPSBlYS5jYWxsKHQsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gfHwgbnIodC5sZW5ndGgpICYmIEtuKGUsIHQubGVuZ3RoKSAmJiAoQXModCkgfHwgRWkodCkpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBaaSh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4gJiYgWm4odCwgZSwgbikgJiYgKGUgPSBFKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IC0xLCBpID0gTXModCksIG8gPSBpLmxlbmd0aCwgYSA9IHt9OyArK3IgPCBvOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBpW3JdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB0W3NdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA/IGVhLmNhbGwoYSwgdSkgPyBhW3VdLnB1c2gocykgOiBhW3VdID0gW3NdIDogYVt1XSA9IHMKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdG8odCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0KSByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgICAgIExpKHQpIHx8ICh0ID0gR28odCkpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBlID0gZSAmJiBucihlKSAmJiAoQXModCkgfHwgRWkodCkpICYmIGUgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IHQuY29uc3RydWN0b3IsIHIgPSAtMSwgaSA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIG4gJiYgbi5wcm90b3R5cGUgPT09IHQsIG8gPSBGbyhlKSwgYSA9IGUgPiAwOyArK3IgPCBlOykgb1tyXSA9IHIgKyAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcyBpbiB0KSBhICYmIEtuKHMsIGUpIHx8ICJjb25zdHJ1Y3RvciIgPT0gcyAmJiAoaSB8fCAhZWEuY2FsbCh0LCBzKSkgfHwgby5wdXNoKHMpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZW8odCkgewogICAgICAgICAgICAgICAgICAgICAgICB0ID0gZnIodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAtMSwgbiA9IE1zKHQpLCByID0gbi5sZW5ndGgsIGkgPSBGbyhyKTsgKytlIDwgcjspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gbltlXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlbZV0gPSBbbywgdFtvXV0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbm8odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG51bGwgPT0gdCA/IEUgOiB0W2VdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciA9PT0gRSAmJiAobnVsbCA9PSB0IHx8IHRyKGUsIHQpIHx8IChlID0gcHIoZSksIHQgPSAxID09IGUubGVuZ3RoID8gdCA6IExlKHQsIFhlKGUsIDAsIC0xKSksIHIgPSBudWxsID09IHQgPyBFIDogdFtqcihlKV0pLCByID0gciA9PT0gRSA/IG4gOiByKSwgT2kocikgPyByLmNhbGwodCkgOiByCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBybyh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQpIHJldHVybiB0OwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUgKyAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IG51bGwgIT0gdFtyXSB8fCB0cihlLCB0KSA/IFtyXSA6IHByKGUpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gLTEsIG8gPSBlLmxlbmd0aCwgYSA9IG8gLSAxLCBzID0gdDsgbnVsbCAhPSBzICYmICsraSA8IG87KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IGVbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMaShzKSAmJiAoaSA9PSBhID8gc1t1XSA9IG4gOiBudWxsID09IHNbdV0gJiYgKHNbdV0gPSBLbihlW2kgKyAxXSkgPyBbXSA6IHt9KSksIHMgPSBzW3VdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGlvKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBBcyh0KSB8fCBVaSh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPSBGbihlLCByLCA0KSwgbnVsbCA9PSBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgfHwgTGkodCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHQuY29uc3RydWN0b3I7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGkgPyBBcyh0KSA/IG5ldyBvIDogW10gOiBEYShPaShvKSA/IG8ucHJvdG90eXBlIDogRSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBuID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaSA/IGVlIDogUmUpKHQsIGZ1bmN0aW9uKHQsIHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlKG4sIHQsIHIsIGkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBuCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbyh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0bih0LCBNcyh0KSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFvKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRuKHQsIHRvKHQpKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc28odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9ICtlIHx8IDAsIG4gPT09IEUgPyAobiA9IGUsIGUgPSAwKSA6IG4gPSArbiB8fCAwLCB0ID49IGthKGUsIG4pICYmIHQgPCBfYShlLCBuKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdW8odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBuICYmIFpuKHQsIGUsIG4pICYmIChlID0gbiA9IEUpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG51bGwgPT0gdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBudWxsID09IGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IG4gJiYgKGkgJiYgImJvb2xlYW4iID09IHR5cGVvZiB0ID8gKG4gPSB0LCB0ID0gMSkgOiAiYm9vbGVhbiIgPT0gdHlwZW9mIGUgJiYgKG4gPSBlLCBpID0gITApKSwgciAmJiBpICYmIChlID0gMSwgaSA9ICExKSwgdCA9ICt0IHx8IDAsIGkgPyAoZSA9IHQsIHQgPSAwKSA6IGUgPSArZSB8fCAwLCBuIHx8IHQgJSAxIHx8IGUgJSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGphKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2EodCArIG8gKiAoZSAtIHQgKyB1YSgiMWUtIiArICgobyArICIiKS5sZW5ndGggLSAxKSkpLCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBWZSh0LCBlKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY28odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IHModCksIHQgJiYgdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHQuc2xpY2UoMSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGxvKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBzKHQpLCB0ICYmIHQucmVwbGFjZShQdCwgcCkucmVwbGFjZShBdCwgIiIpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBmbyh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBzKHQpLCBlICs9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA9IG4gPT09IEUgPyByIDoga2EoMCA+IG4gPyAwIDogK24gfHwgMCwgciksIG4gLT0gZS5sZW5ndGgsIG4gPj0gMCAmJiB0LmluZGV4T2YoZSwgbikgPT0gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcG8odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IHModCksIHQgJiYgeHQudGVzdCh0KSA/IHQucmVwbGFjZShtdCwgaCkgOiB0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBobyh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gcyh0KSwgdCAmJiBTdC50ZXN0KHQpID8gdC5yZXBsYWNlKEN0LCBkKSA6IHQgfHwgIig/OikiCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnbyh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBzKHQpLCBlID0gK2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyID49IGUgfHwgIXhhKGUpKSByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAoZSAtIHIpIC8gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBtYShpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB2YShpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPSBPbigiIiwgYSwgbiksIG4uc2xpY2UoMCwgbykgKyB0ICsgbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdm8odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG4gPyBabih0LCBlLCBuKSA6IG51bGwgPT0gZSkgPyBlID0gMCA6IGUgJiYgKGUgPSArZSksIHQgPSB4byh0KSwgRWEodCwgZSB8fCAoT3QudGVzdCh0KSA/IDE2IDogMTApKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24geW8odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA9IHModCksIGUgPSArZSwgMSA+IGUgfHwgIXQgfHwgIXhhKGUpKSByZXR1cm4gbjsKICAgICAgICAgICAgICAgICAgICAgICAgZG8gZSAlIDIgJiYgKG4gKz0gdCksIGUgPSBtYShlIC8gMiksIHQgKz0gdDsgd2hpbGUgKGUpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbW8odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IHModCksIG4gPSBudWxsID09IG4gPyAwIDoga2EoMCA+IG4gPyAwIDogK24gfHwgMCwgdC5sZW5ndGgpLCB0Lmxhc3RJbmRleE9mKGUsIG4pID09IG4KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGJvKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBlLnRlbXBsYXRlU2V0dGluZ3M7CiAgICAgICAgICAgICAgICAgICAgICAgIHIgJiYgWm4odCwgbiwgcikgJiYgKG4gPSByID0gRSksIHQgPSBzKHQpLCBuID0gdmUoeWUoe30sIHIgfHwgbiksIGksIGdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8sIGEsIHUgPSB2ZSh5ZSh7fSwgbi5pbXBvcnRzKSwgaS5pbXBvcnRzLCBnZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gTXModSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gdG4odSwgYyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBuLmludGVycG9sYXRlIHx8ICR0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9ICJfX3AgKz0gJyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gWG8oKG4uZXNjYXBlIHx8ICR0KS5zb3VyY2UgKyAifCIgKyBwLnNvdXJjZSArICJ8IiArIChwID09PSBrdCA/IFJ0IDogJHQpLnNvdXJjZSArICJ8IiArIChuLmV2YWx1YXRlIHx8ICR0KS5zb3VyY2UgKyAifCQiLCAiZyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9ICIvLyMgc291cmNlVVJMPSIgKyAoInNvdXJjZVVSTCIgaW4gbiA/IG4uc291cmNlVVJMIDogImxvZGFzaC50ZW1wbGF0ZVNvdXJjZXNbIiArICsrRnQgKyAiXSIpICsgIlxuIjsKICAgICAgICAgICAgICAgICAgICAgICAgdC5yZXBsYWNlKGQsIGZ1bmN0aW9uKGUsIG4sIHIsIGksIHMsIHUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByIHx8IChyID0gaSksIGggKz0gdC5zbGljZShmLCB1KS5yZXBsYWNlKHF0LCBnKSwgbiAmJiAobyA9ICEwLCBoICs9ICInICtcbl9fZSgiICsgbiArICIpICtcbiciKSwgcyAmJiAoYSA9ICEwLCBoICs9ICInO1xuIiArIHMgKyAiO1xuX19wICs9ICciKSwgciAmJiAoaCArPSAiJyArXG4oKF9fdCA9ICgiICsgciArICIpKSA9PSBudWxsID8gJycgOiBfX3QpICtcbiciKSwgZiA9IHUgKyBlLmxlbmd0aCwgZQogICAgICAgICAgICAgICAgICAgICAgICB9KSwgaCArPSAiJztcbiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0gbi52YXJpYWJsZTsKICAgICAgICAgICAgICAgICAgICAgICAgeSB8fCAoaCA9ICJ3aXRoIChvYmopIHtcbiIgKyBoICsgIlxufVxuIiksIGggPSAoYSA/IGgucmVwbGFjZShkdCwgIiIpIDogaCkucmVwbGFjZShndCwgIiQxIikucmVwbGFjZSh2dCwgIiQxOyIpLCBoID0gImZ1bmN0aW9uKCIgKyAoeSB8fCAib2JqIikgKyAiKSB7XG4iICsgKHkgPyAiIiA6ICJvYmogfHwgKG9iaiA9IHt9KTtcbiIpICsgInZhciBfX3QsIF9fcCA9ICcnIiArIChvID8gIiwgX19lID0gXy5lc2NhcGUiIDogIiIpICsgKGEgPyAiLCBfX2ogPSBBcnJheS5wcm90b3R5cGUuam9pbjtcbmZ1bmN0aW9uIHByaW50KCkgeyBfX3AgKz0gX19qLmNhbGwoYXJndW1lbnRzLCAnJykgfVxuIiA6ICI7XG4iKSArIGggKyAicmV0dXJuIF9fcFxufSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gUXMoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV28oYywgdiArICJyZXR1cm4gIiArIGgpLmFwcGx5KEUsIGwpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobS5zb3VyY2UgPSBoLCBSaShtKSkgdGhyb3cgbTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHhvKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHQgPSBzKHQpKSA/IChuID8gWm4ociwgZSwgbikgOiBudWxsID09IGUpID8gdC5zbGljZSh3KHQpLCBfKHQpICsgMSkgOiAoZSArPSAiIiwgdC5zbGljZSh1KHQsIGUpLCBjKHQsIGUpICsgMSkpIDogdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gd28odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gcyh0KSwgdCA/IChuID8gWm4ociwgZSwgbikgOiBudWxsID09IGUpID8gdC5zbGljZSh3KHQpKSA6IHQuc2xpY2UodSh0LCBlICsgIiIpKSA6IHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9vKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IHModCksIHQgPyAobiA/IFpuKHIsIGUsIG4pIDogbnVsbCA9PSBlKSA/IHQuc2xpY2UoMCwgXyh0KSArIDEpIDogdC5zbGljZSgwLCBjKHQsIGUgKyAiIikgKyAxKSA6IHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGtvKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiBabih0LCBlLCBuKSAmJiAoZSA9IEUpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IFAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gJDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChMaShlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gInNlcGFyYXRvciIgaW4gZSA/IGUuc2VwYXJhdG9yIDogbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gImxlbmd0aCIgaW4gZSA/ICtlLmxlbmd0aCB8fCAwIDogciwgaSA9ICJvbWlzc2lvbiIgaW4gZSA/IHMoZS5vbWlzc2lvbikgOiBpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgciA9ICtlIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID0gcyh0KSwgciA+PSB0Lmxlbmd0aCkgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gciAtIGkubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA+IGEpIHJldHVybiBpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IHQuc2xpY2UoMCwgYSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IG8pIHJldHVybiB1ICsgaTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpKG8pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5zbGljZShhKS5zZWFyY2gobykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYywgbCwgZiA9IHQuc2xpY2UoMCwgYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvLmdsb2JhbCB8fCAobyA9IFhvKG8uc291cmNlLCAoSXQuZXhlYyhvKSB8fCAiIikgKyAiZyIpKSwgby5sYXN0SW5kZXggPSAwOyBjID0gby5leGVjKGYpOykgbCA9IGMuaW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHUuc2xpY2UoMCwgbnVsbCA9PSBsID8gYSA6IGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodC5pbmRleE9mKG8sIGEpICE9IGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gdS5sYXN0SW5kZXhPZihvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPiAtMSAmJiAodSA9IHUuc2xpY2UoMCwgcCkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUgKyBpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBUbyh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gcyh0KSwgdCAmJiBidC50ZXN0KHQpID8gdC5yZXBsYWNlKHl0LCBrKSA6IHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEVvKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gJiYgWm4odCwgZSwgbikgJiYgKGUgPSBFKSwgdCA9IHModCksIHQubWF0Y2goZSB8fCBIdCkgfHwgW10KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGpvKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gJiYgWm4odCwgZSwgbikgJiYgKGUgPSBFKSwgeSh0KSA/IEFvKHQpIDogeGUodCwgZSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIENvKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gU28odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQW8odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSGUod2UodCwgITApKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTm8odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWUodCwgd2UoZSwgITApKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUm8odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IExpKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByID8gTXMoZSkgOiBFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBpICYmIGkubGVuZ3RoID8gT2UoZSwgaSkgOiBFOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8gPyBvLmxlbmd0aCA6IHIpIHx8IChvID0gITEsIG4gPSBlLCBlID0gdCwgdCA9IHRoaXMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbyB8fCAobyA9IE9lKGUsIE1zKGUpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gT2kodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gby5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIG4gPT09ICExID8gYSA9ICExIDogTGkobikgJiYgImNoYWluIiBpbiBuICYmIChhID0gbi5jaGFpbik7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyArK3MgPCBjOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBvW3NdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBlW2xdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtsXSA9IGYsIHUgJiYgKHQucHJvdG90eXBlW2xdID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLl9fY2hhaW5fXzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgfHwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0KHRoaXMuX193cmFwcGVkX18pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByLl9fYWN0aW9uc19fID0gdGUodGhpcy5fX2FjdGlvbnNfXyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jOiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IGFyZ3VtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQXJnOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgci5fX2NoYWluX18gPSBuLCByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuYXBwbHkodCwgY2UoW3RoaXMudmFsdWUoKV0sIGFyZ3VtZW50cykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfShmKSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gSW8oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZS5fID0gaWEsIHRoaXMKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE9vKCkge30KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gTG8odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHIodCkgPyBVZSh0KSA6IFdlKHQpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBEbyh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTGUodCwgcHIoZSksIGUgKyAiIikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gUG8odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBuICYmIFpuKHQsIGUsIG4pICYmIChlID0gbiA9IEUpLCB0ID0gK3QgfHwgMCwgbiA9IG51bGwgPT0gbiA/IDEgOiArbiB8fCAwLCBudWxsID09IGUgPyAoZSA9IHQsIHQgPSAwKSA6IGUgPSArZSB8fCAwOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gLTEsIGkgPSBfYSh2YSgoZSAtIHQpIC8gKG4gfHwgMSkpLCAwKSwgbyA9IEZvKGkpOyArK3IgPCBpOykgb1tyXSA9IHQsIHQgKz0gbjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICRvKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPSBtYSh0KSwgMSA+IHQgfHwgIXhhKHQpKSByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gRm8oa2EodCwgQWEpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChlID0gYW4oZSwgbiwgMSk7ICsrciA8IHQ7KSBBYSA+IHIgPyBpW3JdID0gZShyKSA6IGUocik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBxbyh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gKytuYTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHModCkgKyBlCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBIbyh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoK3QgfHwgMCkgKyAoK2UgfHwgMCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE1vKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gJiYgWm4odCwgZSwgbikgJiYgKGUgPSBFKSwgZSA9IEZuKGUsIG4sIDMpLCAxID09IGUubGVuZ3RoID8gaGUoQXModCkgPyB0IDogbHIodCksIGUpIDogS2UodCwgZSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdCA9IHQgPyByZS5kZWZhdWx0cyhuZS5PYmplY3QoKSwgdCwgcmUucGljayhuZSwgTXQpKSA6IG5lOwogICAgICAgICAgICAgICAgICAgIHZhciBGbyA9IHQuQXJyYXksCiAgICAgICAgICAgICAgICAgICAgICAgIEJvID0gdC5EYXRlLAogICAgICAgICAgICAgICAgICAgICAgICBVbyA9IHQuRXJyb3IsCiAgICAgICAgICAgICAgICAgICAgICAgIFdvID0gdC5GdW5jdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgem8gPSB0Lk1hdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIFZvID0gdC5OdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIEdvID0gdC5PYmplY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIFhvID0gdC5SZWdFeHAsCiAgICAgICAgICAgICAgICAgICAgICAgIEpvID0gdC5TdHJpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgIFlvID0gdC5UeXBlRXJyb3IsCiAgICAgICAgICAgICAgICAgICAgICAgIFFvID0gRm8ucHJvdG90eXBlLAogICAgICAgICAgICAgICAgICAgICAgICBLbyA9IEdvLnByb3RvdHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgWm8gPSBKby5wcm90b3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRhID0gV28ucHJvdG90eXBlLnRvU3RyaW5nLAogICAgICAgICAgICAgICAgICAgICAgICBlYSA9IEtvLmhhc093blByb3BlcnR5LAogICAgICAgICAgICAgICAgICAgICAgICBuYSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHJhID0gS28udG9TdHJpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgIGlhID0gbmUuXywKICAgICAgICAgICAgICAgICAgICAgICAgb2EgPSBYbygiXiIgKyB0YS5jYWxsKGVhKS5yZXBsYWNlKC9bXFxeJC4qKz8oKVtcXXt9fF0vZywgIlxcJCYiKS5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcKCl8IGZvciAuKz8oPz1cXFxdKS9nLCAiJDEuKj8iKSArICIkIiksCiAgICAgICAgICAgICAgICAgICAgICAgIGFhID0gdC5BcnJheUJ1ZmZlciwKICAgICAgICAgICAgICAgICAgICAgICAgc2EgPSB0LmNsZWFyVGltZW91dCwKICAgICAgICAgICAgICAgICAgICAgICAgdWEgPSB0LnBhcnNlRmxvYXQsCiAgICAgICAgICAgICAgICAgICAgICAgIGNhID0gem8ucG93LAogICAgICAgICAgICAgICAgICAgICAgICBsYSA9IEtvLnByb3BlcnR5SXNFbnVtZXJhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICBmYSA9IHpuKHQsICJTZXQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgcGEgPSB0LnNldFRpbWVvdXQsCiAgICAgICAgICAgICAgICAgICAgICAgIGhhID0gUW8uc3BsaWNlLAogICAgICAgICAgICAgICAgICAgICAgICBkYSA9IHQuVWludDhBcnJheSwKICAgICAgICAgICAgICAgICAgICAgICAgZ2EgPSB6bih0LCAiV2Vha01hcCIpLAogICAgICAgICAgICAgICAgICAgICAgICB2YSA9IHpvLmNlaWwsCiAgICAgICAgICAgICAgICAgICAgICAgIHlhID0gem4oR28sICJjcmVhdGUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgbWEgPSB6by5mbG9vciwKICAgICAgICAgICAgICAgICAgICAgICAgYmEgPSB6bihGbywgImlzQXJyYXkiKSwKICAgICAgICAgICAgICAgICAgICAgICAgeGEgPSB0LmlzRmluaXRlLAogICAgICAgICAgICAgICAgICAgICAgICB3YSA9IHpuKEdvLCAia2V5cyIpLAogICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHpvLm1heCwKICAgICAgICAgICAgICAgICAgICAgICAga2EgPSB6by5taW4sCiAgICAgICAgICAgICAgICAgICAgICAgIFRhID0gem4oQm8sICJub3ciKSwKICAgICAgICAgICAgICAgICAgICAgICAgRWEgPSB0LnBhcnNlSW50LAogICAgICAgICAgICAgICAgICAgICAgICBqYSA9IHpvLnJhbmRvbSwKICAgICAgICAgICAgICAgICAgICAgICAgQ2EgPSBWby5ORUdBVElWRV9JTkZJTklUWSwKICAgICAgICAgICAgICAgICAgICAgICAgU2EgPSBWby5QT1NJVElWRV9JTkZJTklUWSwKICAgICAgICAgICAgICAgICAgICAgICAgQWEgPSA0Mjk0OTY3Mjk1LAogICAgICAgICAgICAgICAgICAgICAgICBOYSA9IEFhIC0gMSwKICAgICAgICAgICAgICAgICAgICAgICAgUmEgPSBBYSA+Pj4gMSwKICAgICAgICAgICAgICAgICAgICAgICAgSWEgPSA5MDA3MTk5MjU0NzQwOTkxLAogICAgICAgICAgICAgICAgICAgICAgICBPYSA9IGdhICYmIG5ldyBnYSwKICAgICAgICAgICAgICAgICAgICAgICAgTGEgPSB7fTsKICAgICAgICAgICAgICAgICAgICBlLnN1cHBvcnQgPSB7fTsKICAgICAgICAgICAgICAgICAgICBlLnRlbXBsYXRlU2V0dGluZ3MgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVzY2FwZTogd3QsCiAgICAgICAgICAgICAgICAgICAgICAgIGV2YWx1YXRlOiBfdCwKICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJwb2xhdGU6IGt0LAogICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZTogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydHM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF86IGUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdmFyIERhID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB0KCkge30KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKExpKGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHJvdG90eXBlID0gZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBuZXcgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wcm90b3R5cGUgPSBFCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuIHx8IHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgUGEgPSBwbihSZSksCiAgICAgICAgICAgICAgICAgICAgICAgICRhID0gcG4oSWUsICEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgcWEgPSBobigpLAogICAgICAgICAgICAgICAgICAgICAgICBIYSA9IGhuKCEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgTWEgPSBPYSA/IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYS5zZXQodCwgZSksIHQKICAgICAgICAgICAgICAgICAgICAgICAgfSA6IFNvLAogICAgICAgICAgICAgICAgICAgICAgICBGYSA9IE9hID8gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9hLmdldCh0KQogICAgICAgICAgICAgICAgICAgICAgICB9IDogT28sCiAgICAgICAgICAgICAgICAgICAgICAgIEJhID0gVWUoImxlbmd0aCIpLAogICAgICAgICAgICAgICAgICAgICAgICBVYSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGdzKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBIIC0gKGkgLSBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9IGksIG8gPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgrK3QgPj0gcSkgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgdCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hKG4sIHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgV2EgPSB5aShmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geSh0KSAmJiBRbih0KSA/IGtlKHQsIEFlKGUsICExLCAhMCkpIDogW10KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIHphID0gX24oKSwKICAgICAgICAgICAgICAgICAgICAgICAgVmEgPSBfbighMCksCiAgICAgICAgICAgICAgICAgICAgICAgIEdhID0geWkoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IHQubGVuZ3RoLCBuID0gZSwgciA9IEZvKGYpLCBpID0gVW4oKSwgYSA9IGkgPT0gbywgcyA9IFtdOyBuLS07KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSB0W25dID0gUW4odSA9IHRbbl0pID8gdSA6IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbbl0gPSBhICYmIHUubGVuZ3RoID49IDEyMCA/IGduKG4gJiYgdSkgOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHRbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IC0xLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBjID8gYy5sZW5ndGggOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSByWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdDogZm9yICg7ICsrbCA8IGY7KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1ID0gY1tsXSwgKHAgPyBRdChwLCB1KSA6IGkocywgdSwgMCkpIDwgMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gZTsgLS1uOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGggPSByW25dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChoID8gUXQoaCwgdSkgOiBpKHRbbl0sIHUsIDApKSA8IDApIGNvbnRpbnVlIHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwICYmIHAucHVzaCh1KSwgcy5wdXNoKHUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFhhID0geWkoZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IEFlKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBtZSh0LCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB6ZSh0LCBlLnNvcnQocikpLCBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBKYSA9IFBuKCksCiAgICAgICAgICAgICAgICAgICAgICAgIFlhID0gUG4oITApLAogICAgICAgICAgICAgICAgICAgICAgICBRYSA9IHlpKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBaZShBZSh0LCAhMSwgITApKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgS2EgPSB5aShmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUW4odCkgPyBrZSh0LCBlKSA6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBaYSA9IHlpKCRyKSwKICAgICAgICAgICAgICAgICAgICAgICAgdHMgPSB5aShmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlID4gMiA/IHRbZSAtIDJdIDogRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZSA+IDEgPyB0W2UgLSAxXSA6IEU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA+IDIgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgbiA/IGUgLT0gMiA6IChuID0gZSA+IDEgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgciA/ICgtLWUsIHIpIDogRSwgciA9IEUpLCB0Lmxlbmd0aCA9IGUsIHFyKHQsIG4sIHIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBlcyA9IHlpKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gQWUodCksIHRoaXMudGhydShmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFp0KEFzKGUpID8gZSA6IFtmcihlKV0sIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgbnMgPSB5aShmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWUodCwgQWUoZSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBycyA9IGxuKGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhLmNhbGwodCwgbikgPyArK3Rbbl0gOiB0W25dID0gMQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgaXMgPSB3bihQYSksCiAgICAgICAgICAgICAgICAgICAgICAgIG9zID0gd24oJGEsICEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgYXMgPSBFbihlZSwgUGEpLAogICAgICAgICAgICAgICAgICAgICAgICBzcyA9IEVuKGllLCAkYSksCiAgICAgICAgICAgICAgICAgICAgICAgIHVzID0gbG4oZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWEuY2FsbCh0LCBuKSA/IHRbbl0ucHVzaChlKSA6IHRbbl0gPSBbZV0KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGNzID0gbG4oZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtuXSA9IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGxzID0geWkoZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAtMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdHIoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFFuKHQpID8gRm8odC5sZW5ndGgpIDogW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGEodCwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gaSA/IGUgOiBvICYmIG51bGwgIT0gdCA/IHRbZV0gOiBFOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFbKytyXSA9IHMgPyBzLmFwcGx5KHQsIG4pIDogWW4odCwgZSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBhCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBmcyA9IGxuKGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbbiA/IDAgOiAxXS5wdXNoKGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgcHMgPSBSbihsZSwgUGEpLAogICAgICAgICAgICAgICAgICAgICAgICBocyA9IFJuKGZlLCAkYSksCiAgICAgICAgICAgICAgICAgICAgICAgIGRzID0geWkoZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuIFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlWzJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gJiYgWm4oZVswXSwgZVsxXSwgbikgJiYgKGUubGVuZ3RoID0gMSksIFFlKHQsIEFlKGUpLCBbXSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGdzID0gVGEgfHwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG5ldyBCbykuZ2V0VGltZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHZzID0geWkoZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBDOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4ubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBiKG4sIHZzLnBsYWNlaG9sZGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByIHw9IEkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkbih0LCByLCBlLCBuLCBpKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgeXMgPSB5aShmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gZS5sZW5ndGggPyBBZShlKSA6IFlpKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IC0xLCByID0gZS5sZW5ndGg7ICsrbiA8IHI7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBlW25dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbaV0gPSAkbih0W2ldLCBDLCB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIG1zID0geWkoZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBDIHwgUzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gYihuLCBtcy5wbGFjZWhvbGRlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciB8PSBJCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJG4oZSwgciwgdCwgbiwgaSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGJzID0gbW4oTiksCiAgICAgICAgICAgICAgICAgICAgICAgIHhzID0gbW4oUiksCiAgICAgICAgICAgICAgICAgICAgICAgIHdzID0geWkoZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9lKHQsIDEsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBfcyA9IHlpKGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfZSh0LCBlLCBuKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAga3MgPSBUbigpLAogICAgICAgICAgICAgICAgICAgICAgICBUcyA9IFRuKCEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgRXMgPSB5aShmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9IEFlKGUpLCAiZnVuY3Rpb24iICE9IHR5cGVvZiB0IHx8ICFvZShlLCBhKSkgdGhyb3cgbmV3IFlvKFUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5aShmdW5jdGlvbihyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGthKHIubGVuZ3RoLCBuKTsgaS0tOykgcltpXSA9IGVbaV0ocltpXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYXBwbHkodGhpcywgcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBqcyA9IE5uKEkpLAogICAgICAgICAgICAgICAgICAgICAgICBDcyA9IE5uKE8pLAogICAgICAgICAgICAgICAgICAgICAgICBTcyA9IHlpKGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkbih0LCBELCBFLCBFLCBFLCBBZShlKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIEFzID0gYmEgfHwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkodCkgJiYgbnIodC5sZW5ndGgpICYmIHJhLmNhbGwodCkgPT0gVgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBOcyA9IGZuKEZlKSwKICAgICAgICAgICAgICAgICAgICAgICAgUnMgPSBmbihmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA/IHZlKHQsIGUsIG4pIDogeWUodCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIElzID0gYm4oUnMsIGRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgT3MgPSBibihOcywgb3IpLAogICAgICAgICAgICAgICAgICAgICAgICBMcyA9IGtuKFJlKSwKICAgICAgICAgICAgICAgICAgICAgICAgRHMgPSBrbihJZSksCiAgICAgICAgICAgICAgICAgICAgICAgIFBzID0gam4ocWEpLAogICAgICAgICAgICAgICAgICAgICAgICAkcyA9IGpuKEhhKSwKICAgICAgICAgICAgICAgICAgICAgICAgcXMgPSBDbihSZSksCiAgICAgICAgICAgICAgICAgICAgICAgIEhzID0gQ24oSWUpLAogICAgICAgICAgICAgICAgICAgICAgICBNcyA9IHdhID8gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBudWxsID09IHQgPyBFIDogdC5jb25zdHJ1Y3RvcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlICYmIGUucHJvdG90eXBlID09PSB0IHx8ICJmdW5jdGlvbiIgIT0gdHlwZW9mIHQgJiYgUW4odCkgPyBjcih0KSA6IExpKHQpID8gd2EodCkgOiBbXQogICAgICAgICAgICAgICAgICAgICAgICB9IDogY3IsCiAgICAgICAgICAgICAgICAgICAgICAgIEZzID0gU24oITApLAogICAgICAgICAgICAgICAgICAgICAgICBCcyA9IFNuKCksCiAgICAgICAgICAgICAgICAgICAgICAgIFVzID0geWkoZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuIHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGVbMF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHVlKEFlKGUpLCBKbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyKHQsIGtlKHRvKHQpLCBlKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gYW4oZVswXSwgZVsxXSwgMyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3IodCwgZnVuY3Rpb24odCwgZSwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhbih0LCBlLCByKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFdzID0geWkoZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCA/IHt9IDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgZVswXSA/IHNyKHQsIGFuKGVbMF0sIGVbMV0sIDMpKSA6IGFyKHQsIEFlKGUpKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgenMgPSB2bihmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9IGUudG9Mb3dlckNhc2UoKSwgdCArIChuID8gZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGUuc2xpY2UoMSkgOiBlKQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgVnMgPSB2bihmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCArIChuID8gIi0iIDogIiIpICsgZS50b0xvd2VyQ2FzZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBHcyA9IEFuKCksCiAgICAgICAgICAgICAgICAgICAgICAgIFhzID0gQW4oITApLAogICAgICAgICAgICAgICAgICAgICAgICBKcyA9IHZuKGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ICsgKG4gPyAiXyIgOiAiIikgKyBlLnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFlzID0gdm4oZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgKyAobiA/ICIgIiA6ICIiKSArIChlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZS5zbGljZSgxKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFFzID0geWkoZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseShFLCBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAobikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaShuKSA/IG4gOiBuZXcgVW8obikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIEtzID0geWkoZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWW4obiwgdCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFpzID0geWkoZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWW4odCwgbiwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIHR1ID0gRG4oImNlaWwiKSwKICAgICAgICAgICAgICAgICAgICAgICAgZXUgPSBEbigiZmxvb3IiKSwKICAgICAgICAgICAgICAgICAgICAgICAgbnUgPSB4bihraSwgQ2EpLAogICAgICAgICAgICAgICAgICAgICAgICBydSA9IHhuKHppLCBTYSksCiAgICAgICAgICAgICAgICAgICAgICAgIGl1ID0gRG4oInJvdW5kIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucHJvdG90eXBlID0gbi5wcm90b3R5cGUsIG0ucHJvdG90eXBlID0gRGEobi5wcm90b3R5cGUpLCBtLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IG0sIFEucHJvdG90eXBlID0gRGEobi5wcm90b3R5cGUpLCBRLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFEsIHp0LnByb3RvdHlwZVsiZGVsZXRlIl0gPSBWdCwgenQucHJvdG90eXBlLmdldCA9IEd0LCB6dC5wcm90b3R5cGUuaGFzID0gWHQsIHp0LnByb3RvdHlwZS5zZXQgPSBKdCwgWXQucHJvdG90eXBlLnB1c2ggPSBLdCwgZGkuQ2FjaGUgPSB6dCwgZS5hZnRlciA9IGxpLCBlLmFyeSA9IGZpLCBlLmFzc2lnbiA9IFJzLCBlLmF0ID0gbnMsIGUuYmVmb3JlID0gcGksIGUuYmluZCA9IHZzLCBlLmJpbmRBbGwgPSB5cywgZS5iaW5kS2V5ID0gbXMsIGUuY2FsbGJhY2sgPSBqbywgZS5jaGFpbiA9IEZyLCBlLmNodW5rID0gZHIsIGUuY29tcGFjdCA9IGdyLCBlLmNvbnN0YW50ID0gQ28sIGUuY291bnRCeSA9IHJzLCBlLmNyZWF0ZSA9IEppLCBlLmN1cnJ5ID0gYnMsIGUuY3VycnlSaWdodCA9IHhzLCBlLmRlYm91bmNlID0gaGksIGUuZGVmYXVsdHMgPSBJcywgZS5kZWZhdWx0c0RlZXAgPSBPcywgZS5kZWZlciA9IHdzLCBlLmRlbGF5ID0gX3MsIGUuZGlmZmVyZW5jZSA9IFdhLCBlLmRyb3AgPSB2ciwgZS5kcm9wUmlnaHQgPSB5ciwgZS5kcm9wUmlnaHRXaGlsZSA9IG1yLCBlLmRyb3BXaGlsZSA9IGJyLCBlLmZpbGwgPSB4ciwgZS5maWx0ZXIgPSBRciwgZS5mbGF0dGVuID0gX3IsIGUuZmxhdHRlbkRlZXAgPSBrciwgZS5mbG93ID0ga3MsIGUuZmxvd1JpZ2h0ID0gVHMsIGUuZm9yRWFjaCA9IGFzLCBlLmZvckVhY2hSaWdodCA9IHNzLCBlLmZvckluID0gUHMsIGUuZm9ySW5SaWdodCA9ICRzLCBlLmZvck93biA9IHFzLCBlLmZvck93blJpZ2h0ID0gSHMsIGUuZnVuY3Rpb25zID0gWWksIGUuZ3JvdXBCeSA9IHVzLCBlLmluZGV4QnkgPSBjcywgZS5pbml0aWFsID0gRXIsIGUuaW50ZXJzZWN0aW9uID0gR2EsIGUuaW52ZXJ0ID0gWmksIGUuaW52b2tlID0gbHMsIGUua2V5cyA9IE1zLCBlLmtleXNJbiA9IHRvLCBlLm1hcCA9IHRpLCBlLm1hcEtleXMgPSBGcywgZS5tYXBWYWx1ZXMgPSBCcywgZS5tYXRjaGVzID0gQW8sIGUubWF0Y2hlc1Byb3BlcnR5ID0gTm8sIGUubWVtb2l6ZSA9IGRpLCBlLm1lcmdlID0gTnMsIGUubWV0aG9kID0gS3MsIGUubWV0aG9kT2YgPSBacywgZS5taXhpbiA9IFJvLCBlLm1vZEFyZ3MgPSBFcywgZS5uZWdhdGUgPSBnaSwgZS5vbWl0ID0gVXMsIGUub25jZSA9IHZpLCBlLnBhaXJzID0gZW8sIGUucGFydGlhbCA9IGpzLCBlLnBhcnRpYWxSaWdodCA9IENzLCBlLnBhcnRpdGlvbiA9IGZzLCBlLnBpY2sgPSBXcywgZS5wbHVjayA9IGVpLCBlLnByb3BlcnR5ID0gTG8sIGUucHJvcGVydHlPZiA9IERvLCBlLnB1bGwgPSBTciwgZS5wdWxsQXQgPSBYYSwgZS5yYW5nZSA9IFBvLCBlLnJlYXJnID0gU3MsIGUucmVqZWN0ID0gbmksIGUucmVtb3ZlID0gQXIsIGUucmVzdCA9IE5yLCBlLnJlc3RQYXJhbSA9IHlpLCBlLnNldCA9IHJvLCBlLnNodWZmbGUgPSBpaSwgZS5zbGljZSA9IFJyLCBlLnNvcnRCeSA9IHNpLCBlLnNvcnRCeUFsbCA9IGRzLCBlLnNvcnRCeU9yZGVyID0gdWksIGUuc3ByZWFkID0gbWksIGUudGFrZSA9IElyLCBlLnRha2VSaWdodCA9IE9yLCBlLnRha2VSaWdodFdoaWxlID0gTHIsIGUudGFrZVdoaWxlID0gRHIsIGUudGFwID0gQnIsIGUudGhyb3R0bGUgPSBiaSwgZS50aHJ1ID0gVXIsIGUudGltZXMgPSAkbywgZS50b0FycmF5ID0gR2ksIGUudG9QbGFpbk9iamVjdCA9IFhpLCBlLnRyYW5zZm9ybSA9IGlvLCBlLnVuaW9uID0gUWEsIGUudW5pcSA9IFByLCBlLnVuemlwID0gJHIsIGUudW56aXBXaXRoID0gcXIsIGUudmFsdWVzID0gb28sIGUudmFsdWVzSW4gPSBhbywgZS53aGVyZSA9IGNpLCBlLndpdGhvdXQgPSBLYSwgZS53cmFwID0geGksIGUueG9yID0gSHIsIGUuemlwID0gWmEsIGUuemlwT2JqZWN0ID0gTXIsIGUuemlwV2l0aCA9IHRzLCBlLmJhY2tmbG93ID0gVHMsIGUuY29sbGVjdCA9IHRpLCBlLmNvbXBvc2UgPSBUcywgZS5lYWNoID0gYXMsIGUuZWFjaFJpZ2h0ID0gc3MsIGUuZXh0ZW5kID0gUnMsIGUuaXRlcmF0ZWUgPSBqbywgZS5tZXRob2RzID0gWWksIGUub2JqZWN0ID0gTXIsIGUuc2VsZWN0ID0gUXIsIGUudGFpbCA9IE5yLCBlLnVuaXF1ZSA9IFByLCBSbyhlLCBlKSwgZS5hZGQgPSBIbywgZS5hdHRlbXB0ID0gUXMsIGUuY2FtZWxDYXNlID0genMsIGUuY2FwaXRhbGl6ZSA9IGNvLCBlLmNlaWwgPSB0dSwgZS5jbG9uZSA9IHdpLCBlLmNsb25lRGVlcCA9IF9pLCBlLmRlYnVyciA9IGxvLCBlLmVuZHNXaXRoID0gZm8sIGUuZXNjYXBlID0gcG8sIGUuZXNjYXBlUmVnRXhwID0gaG8sIGUuZXZlcnkgPSBZciwgZS5maW5kID0gaXMsIGUuZmluZEluZGV4ID0gemEsIGUuZmluZEtleSA9IExzLCBlLmZpbmRMYXN0ID0gb3MsIGUuZmluZExhc3RJbmRleCA9IFZhLCBlLmZpbmRMYXN0S2V5ID0gRHMsIGUuZmluZFdoZXJlID0gS3IsIGUuZmlyc3QgPSB3ciwgZS5mbG9vciA9IGV1LCBlLmdldCA9IFFpLCBlLmd0ID0ga2ksIGUuZ3RlID0gVGksIGUuaGFzID0gS2ksIGUuaWRlbnRpdHkgPSBTbywgZS5pbmNsdWRlcyA9IFpyLCBlLmluZGV4T2YgPSBUciwgZS5pblJhbmdlID0gc28sIGUuaXNBcmd1bWVudHMgPSBFaSwgZS5pc0FycmF5ID0gQXMsIGUuaXNCb29sZWFuID0gamksIGUuaXNEYXRlID0gQ2ksIGUuaXNFbGVtZW50ID0gU2ksIGUuaXNFbXB0eSA9IEFpLCBlLmlzRXF1YWwgPSBOaSwgZS5pc0Vycm9yID0gUmksIGUuaXNGaW5pdGUgPSBJaSwgZS5pc0Z1bmN0aW9uID0gT2ksIGUuaXNNYXRjaCA9IERpLCBlLmlzTmFOID0gUGksIGUuaXNOYXRpdmUgPSAkaSwgZS5pc051bGwgPSBxaSwgZS5pc051bWJlciA9IEhpLCBlLmlzT2JqZWN0ID0gTGksIGUuaXNQbGFpbk9iamVjdCA9IE1pLCBlLmlzUmVnRXhwID0gRmksIGUuaXNTdHJpbmcgPSBCaSwgZS5pc1R5cGVkQXJyYXkgPSBVaSwgZS5pc1VuZGVmaW5lZCA9IFdpLCBlLmtlYmFiQ2FzZSA9IFZzLCBlLmxhc3QgPSBqciwgZS5sYXN0SW5kZXhPZiA9IENyLCBlLmx0ID0gemksIGUubHRlID0gVmksIGUubWF4ID0gbnUsIGUubWluID0gcnUsIGUubm9Db25mbGljdCA9IElvLCBlLm5vb3AgPSBPbywgZS5ub3cgPSBncywgZS5wYWQgPSBnbywgZS5wYWRMZWZ0ID0gR3MsIGUucGFkUmlnaHQgPSBYcywgZS5wYXJzZUludCA9IHZvLCBlLnJhbmRvbSA9IHVvLCBlLnJlZHVjZSA9IHBzLCBlLnJlZHVjZVJpZ2h0ID0gaHMsIGUucmVwZWF0ID0geW8sIGUucmVzdWx0ID0gbm8sIGUucm91bmQgPSBpdSwgZS5ydW5JbkNvbnRleHQgPSBULCBlLnNpemUgPSBvaSwgZS5zbmFrZUNhc2UgPSBKcywgZS5zb21lID0gYWksIGUuc29ydGVkSW5kZXggPSBKYSwgZS5zb3J0ZWRMYXN0SW5kZXggPSBZYSwgZS5zdGFydENhc2UgPSBZcywgZS5zdGFydHNXaXRoID0gbW8sIGUuc3VtID0gTW8sIGUudGVtcGxhdGUgPSBibywgZS50cmltID0geG8sIGUudHJpbUxlZnQgPSB3bywgZS50cmltUmlnaHQgPSBfbywgZS50cnVuYyA9IGtvLCBlLnVuZXNjYXBlID0gVG8sIGUudW5pcXVlSWQgPSBxbywgZS53b3JkcyA9IEVvLCBlLmFsbCA9IFlyLCBlLmFueSA9IGFpLCBlLmNvbnRhaW5zID0gWnIsIGUuZXEgPSBOaSwgZS5kZXRlY3QgPSBpcywgZS5mb2xkbCA9IHBzLCBlLmZvbGRyID0gaHMsIGUuaGVhZCA9IHdyLCBlLmluY2x1ZGUgPSBaciwgZS5pbmplY3QgPSBwcywgUm8oZSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSZShlLCBmdW5jdGlvbihuLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByb3RvdHlwZVtyXSB8fCAodFtyXSA9IG4pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB0CiAgICAgICAgICAgICAgICAgICAgfSgpLCAhMSksIGUuc2FtcGxlID0gcmksIGUucHJvdG90eXBlLnNhbXBsZSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19jaGFpbl9fIHx8IG51bGwgIT0gdCA/IHRoaXMudGhydShmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmkoZSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiByaSh0aGlzLnZhbHVlKCkpCiAgICAgICAgICAgICAgICAgICAgfSwgZS5WRVJTSU9OID0gaiwgZWUoWyJiaW5kIiwgImJpbmRLZXkiLCAiY3VycnkiLCAiY3VycnlSaWdodCIsICJwYXJ0aWFsIiwgInBhcnRpYWxSaWdodCJdLCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVbdF0ucGxhY2Vob2xkZXIgPSBlCiAgICAgICAgICAgICAgICAgICAgfSksIGVlKFsiZHJvcCIsICJ0YWtlIl0sIGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgUS5wcm90b3R5cGVbdF0gPSBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXMuX19maWx0ZXJlZF9fOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgJiYgIWUpIHJldHVybiBuZXcgUSh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBudWxsID09IG4gPyAxIDogX2EobWEobikgfHwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuY2xvbmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByID8gaS5fX3Rha2VDb3VudF9fID0ga2EoaS5fX3Rha2VDb3VudF9fLCBuKSA6IGkuX192aWV3c19fLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdCArIChpLl9fZGlyX18gPCAwID8gIlJpZ2h0IiA6ICIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgUS5wcm90b3R5cGVbdCArICJSaWdodCJdID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV2ZXJzZSgpW3RdKGUpLnJldmVyc2UoKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksIGVlKFsiZmlsdGVyIiwgIm1hcCIsICJ0YWtlV2hpbGUiXSwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGUgKyAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IG4gIT0gQjsKICAgICAgICAgICAgICAgICAgICAgICAgUS5wcm90b3R5cGVbdF0gPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuY2xvbmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLl9faXRlcmF0ZWVzX18ucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmF0ZWU6IEZuKHQsIGUsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBpLl9fZmlsdGVyZWRfXyA9IGkuX19maWx0ZXJlZF9fIHx8IHIsIGkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCBlZShbImZpcnN0IiwgImxhc3QiXSwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9ICJ0YWtlIiArIChlID8gIlJpZ2h0IiA6ICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgUS5wcm90b3R5cGVbdF0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW25dKDEpLnZhbHVlKClbMF0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCBlZShbImluaXRpYWwiLCAicmVzdCJdLCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gImRyb3AiICsgKGUgPyAiIiA6ICJSaWdodCIpOwogICAgICAgICAgICAgICAgICAgICAgICBRLnByb3RvdHlwZVt0XSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19maWx0ZXJlZF9fID8gbmV3IFEodGhpcykgOiB0aGlzW25dKDEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KSwgZWUoWyJwbHVjayIsICJ3aGVyZSJdLCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZSA/ICJmaWx0ZXIiIDogIm1hcCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZSA/IEhlIDogTG87CiAgICAgICAgICAgICAgICAgICAgICAgIFEucHJvdG90eXBlW3RdID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbbl0ocih0KSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCBRLnByb3RvdHlwZS5jb21wYWN0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcihTbykKICAgICAgICAgICAgICAgICAgICB9LCBRLnByb3RvdHlwZS5yZWplY3QgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID0gRm4odCwgZSwgMSksIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhdChlKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0sIFEucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0ID0gbnVsbCA9PSB0ID8gMCA6ICt0IHx8IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uX19maWx0ZXJlZF9fICYmICh0ID4gMCB8fCAwID4gZSkgPyBuZXcgUShuKSA6ICgwID4gdCA/IG4gPSBuLnRha2VSaWdodCgtdCkgOiB0ICYmIChuID0gbi5kcm9wKHQpKSwgZSAhPT0gRSAmJiAoZSA9ICtlIHx8IDAsIG4gPSAwID4gZSA/IG4uZHJvcFJpZ2h0KC1lKSA6IG4udGFrZShlIC0gdCkpLCBuKQogICAgICAgICAgICAgICAgICAgIH0sIFEucHJvdG90eXBlLnRha2VSaWdodFdoaWxlID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKCkudGFrZVdoaWxlKHQsIGUpLnJldmVyc2UoKQogICAgICAgICAgICAgICAgICAgIH0sIFEucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFrZShTYSkKICAgICAgICAgICAgICAgICAgICB9LCBSZShRLnByb3RvdHlwZSwgZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IC9eKD86ZmlsdGVyfG1hcHxyZWplY3QpfFdoaWxlJC8udGVzdChuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAvXig/OmZpcnN0fGxhc3QpJC8udGVzdChuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlW2kgPyAidGFrZSIgKyAoImxhc3QiID09IG4gPyAiUmlnaHQiIDogIiIpIDogbl07CiAgICAgICAgICAgICAgICAgICAgICAgIG8gJiYgKGUucHJvdG90eXBlW25dID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGkgPyBbMV0gOiBhcmd1bWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHRoaXMuX19jaGFpbl9fLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLl9fd3JhcHBlZF9fLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAhIXRoaXMuX19hY3Rpb25zX18ubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBhIGluc3RhbmNlb2YgUSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gZVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gdSB8fCBBcyhhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgJiYgciAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBjICYmIDEgIT0gYy5sZW5ndGggJiYgKHUgPSBsID0gITEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpICYmIG4gPyBvKHQsIDEpWzBdIDogby5hcHBseShFLCBjZShbdF0sIGUpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYzogVXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IFtmXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0FyZzogRQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IHUgJiYgIXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAmJiAhbikgcmV0dXJuIGggPyAoYSA9IGEuY2xvbmUoKSwgYS5fX2FjdGlvbnNfXy5wdXNoKHApLCB0LmNhbGwoYSkpIDogby5jYWxsKEUsIHRoaXMudmFsdWUoKSlbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWkgJiYgbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBoID8gYSA6IG5ldyBRKHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gdC5hcHBseShhLCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5fX2FjdGlvbnNfXy5wdXNoKHApLCBuZXcgbShkLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGhydShmKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0pLCBlZShbImpvaW4iLCAicG9wIiwgInB1c2giLCAicmVwbGFjZSIsICJzaGlmdCIsICJzb3J0IiwgInNwbGljZSIsICJzcGxpdCIsICJ1bnNoaWZ0Il0sIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSAoL14oPzpyZXBsYWNlfHNwbGl0KSQvLnRlc3QodCkgPyBabyA6IFFvKVt0XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAvXig/OnB1c2h8c29ydHx1bnNoaWZ0KSQvLnRlc3QodCkgPyAidGFwIiA6ICJ0aHJ1IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAvXig/OmpvaW58cG9wfHJlcGxhY2V8c2hpZnQpJC8udGVzdCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZS5wcm90b3R5cGVbdF0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gYXJndW1lbnRzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgJiYgIXRoaXMuX19jaGFpbl9fID8gbi5hcHBseSh0aGlzLnZhbHVlKCksIHQpIDogdGhpc1tyXShmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uYXBwbHkoZSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KSwgUmUoUS5wcm90b3R5cGUsIGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlW25dOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSByLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IExhW2ldIHx8IChMYVtpXSA9IFtdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jOiByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSksIExhW0luKEUsIFMpLm5hbWVdID0gW3sKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogIndyYXBwZXIiLAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jOiBFCiAgICAgICAgICAgICAgICAgICAgfV0sIFEucHJvdG90eXBlLmNsb25lID0gZXQsIFEucHJvdG90eXBlLnJldmVyc2UgPSBydCwgUS5wcm90b3R5cGUudmFsdWUgPSBXdCwgZS5wcm90b3R5cGUuY2hhaW4gPSBXciwgZS5wcm90b3R5cGUuY29tbWl0ID0genIsIGUucHJvdG90eXBlLmNvbmNhdCA9IGVzLCBlLnByb3RvdHlwZS5wbGFudCA9IFZyLCBlLnByb3RvdHlwZS5yZXZlcnNlID0gR3IsIGUucHJvdG90eXBlLnRvU3RyaW5nID0gWHIsIGUucHJvdG90eXBlLnJ1biA9IGUucHJvdG90eXBlLnRvSlNPTiA9IGUucHJvdG90eXBlLnZhbHVlT2YgPSBlLnByb3RvdHlwZS52YWx1ZSA9IEpyLCBlLnByb3RvdHlwZS5jb2xsZWN0ID0gZS5wcm90b3R5cGUubWFwLCBlLnByb3RvdHlwZS5oZWFkID0gZS5wcm90b3R5cGUuZmlyc3QsIGUucHJvdG90eXBlLnNlbGVjdCA9IGUucHJvdG90eXBlLmZpbHRlciwgZS5wcm90b3R5cGUudGFpbCA9IGUucHJvdG90eXBlLnJlc3QsIGUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBFLCBqID0gIjMuMTAuMSIsCiAgICAgICAgICAgICAgICAgICAgQyA9IDEsCiAgICAgICAgICAgICAgICAgICAgUyA9IDIsCiAgICAgICAgICAgICAgICAgICAgQSA9IDQsCiAgICAgICAgICAgICAgICAgICAgTiA9IDgsCiAgICAgICAgICAgICAgICAgICAgUiA9IDE2LAogICAgICAgICAgICAgICAgICAgIEkgPSAzMiwKICAgICAgICAgICAgICAgICAgICBPID0gNjQsCiAgICAgICAgICAgICAgICAgICAgTCA9IDEyOCwKICAgICAgICAgICAgICAgICAgICBEID0gMjU2LAogICAgICAgICAgICAgICAgICAgIFAgPSAzMCwKICAgICAgICAgICAgICAgICAgICAkID0gIi4uLiIsCiAgICAgICAgICAgICAgICAgICAgcSA9IDE1MCwKICAgICAgICAgICAgICAgICAgICBIID0gMTYsCiAgICAgICAgICAgICAgICAgICAgTSA9IDIwMCwKICAgICAgICAgICAgICAgICAgICBGID0gMSwKICAgICAgICAgICAgICAgICAgICBCID0gMiwKICAgICAgICAgICAgICAgICAgICBVID0gIkV4cGVjdGVkIGEgZnVuY3Rpb24iLAogICAgICAgICAgICAgICAgICAgIFcgPSAiX19sb2Rhc2hfcGxhY2Vob2xkZXJfXyIsCiAgICAgICAgICAgICAgICAgICAgeiA9ICJbb2JqZWN0IEFyZ3VtZW50c10iLAogICAgICAgICAgICAgICAgICAgIFYgPSAiW29iamVjdCBBcnJheV0iLAogICAgICAgICAgICAgICAgICAgIEcgPSAiW29iamVjdCBCb29sZWFuXSIsCiAgICAgICAgICAgICAgICAgICAgWCA9ICJbb2JqZWN0IERhdGVdIiwKICAgICAgICAgICAgICAgICAgICBKID0gIltvYmplY3QgRXJyb3JdIiwKICAgICAgICAgICAgICAgICAgICBZID0gIltvYmplY3QgRnVuY3Rpb25dIiwKICAgICAgICAgICAgICAgICAgICBRID0gIltvYmplY3QgTWFwXSIsCiAgICAgICAgICAgICAgICAgICAgSyA9ICJbb2JqZWN0IE51bWJlcl0iLAogICAgICAgICAgICAgICAgICAgIFogPSAiW29iamVjdCBPYmplY3RdIiwKICAgICAgICAgICAgICAgICAgICB0dCA9ICJbb2JqZWN0IFJlZ0V4cF0iLAogICAgICAgICAgICAgICAgICAgIGV0ID0gIltvYmplY3QgU2V0XSIsCiAgICAgICAgICAgICAgICAgICAgbnQgPSAiW29iamVjdCBTdHJpbmddIiwKICAgICAgICAgICAgICAgICAgICBydCA9ICJbb2JqZWN0IFdlYWtNYXBdIiwKICAgICAgICAgICAgICAgICAgICBpdCA9ICJbb2JqZWN0IEFycmF5QnVmZmVyXSIsCiAgICAgICAgICAgICAgICAgICAgb3QgPSAiW29iamVjdCBGbG9hdDMyQXJyYXldIiwKICAgICAgICAgICAgICAgICAgICBhdCA9ICJbb2JqZWN0IEZsb2F0NjRBcnJheV0iLAogICAgICAgICAgICAgICAgICAgIHN0ID0gIltvYmplY3QgSW50OEFycmF5XSIsCiAgICAgICAgICAgICAgICAgICAgdXQgPSAiW29iamVjdCBJbnQxNkFycmF5XSIsCiAgICAgICAgICAgICAgICAgICAgY3QgPSAiW29iamVjdCBJbnQzMkFycmF5XSIsCiAgICAgICAgICAgICAgICAgICAgbHQgPSAiW29iamVjdCBVaW50OEFycmF5XSIsCiAgICAgICAgICAgICAgICAgICAgZnQgPSAiW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0iLAogICAgICAgICAgICAgICAgICAgIHB0ID0gIltvYmplY3QgVWludDE2QXJyYXldIiwKICAgICAgICAgICAgICAgICAgICBodCA9ICJbb2JqZWN0IFVpbnQzMkFycmF5XSIsCiAgICAgICAgICAgICAgICAgICAgZHQgPSAvXGJfX3AgXCs9ICcnOy9nLAogICAgICAgICAgICAgICAgICAgIGd0ID0gL1xiKF9fcCBcKz0pICcnIFwrL2csCiAgICAgICAgICAgICAgICAgICAgdnQgPSAvKF9fZVwoLio/XCl8XGJfX3RcKSkgXCtcbicnOy9nLAogICAgICAgICAgICAgICAgICAgIHl0ID0gLyYoPzphbXB8bHR8Z3R8cXVvdHwjMzl8Izk2KTsvZywKICAgICAgICAgICAgICAgICAgICBtdCA9IC9bJjw+IidgXS9nLAogICAgICAgICAgICAgICAgICAgIGJ0ID0gUmVnRXhwKHl0LnNvdXJjZSksCiAgICAgICAgICAgICAgICAgICAgeHQgPSBSZWdFeHAobXQuc291cmNlKSwKICAgICAgICAgICAgICAgICAgICB3dCA9IC88JS0oW1xzXFNdKz8pJT4vZywKICAgICAgICAgICAgICAgICAgICBfdCA9IC88JShbXHNcU10rPyklPi9nLAogICAgICAgICAgICAgICAgICAgIGt0ID0gLzwlPShbXHNcU10rPyklPi9nLAogICAgICAgICAgICAgICAgICAgIFR0ID0gL1wufFxbKD86W15bXF1dKnwoWyInXSkoPzooPyFcMSlbXlxuXFxdfFxcLikqP1wxKVxdLywKICAgICAgICAgICAgICAgICAgICBFdCA9IC9eXHcqJC8sCiAgICAgICAgICAgICAgICAgICAganQgPSAvW14uW1xdXSt8XFsoPzooLT9cZCsoPzpcLlxkKyk/KXwoWyInXSkoKD86KD8hXDIpW15cblxcXXxcXC4pKj8pXDIpXF0vZywKICAgICAgICAgICAgICAgICAgICBDdCA9IC9eWzohLF18W1xcXiQuKis/KClbXF17fXxcL118KF5bMC05YS1mQS1GbnJ0dXZ4XSl8KFtcblxyXHUyMDI4XHUyMDI5XSkvZywKICAgICAgICAgICAgICAgICAgICBTdCA9IFJlZ0V4cChDdC5zb3VyY2UpLAogICAgICAgICAgICAgICAgICAgIEF0ID0gL1tcdTAzMDAtXHUwMzZmXHVmZTIwLVx1ZmUyM10vZywKICAgICAgICAgICAgICAgICAgICBOdCA9IC9cXChcXCk/L2csCiAgICAgICAgICAgICAgICAgICAgUnQgPSAvXCRceyhbXlxcfV0qKD86XFwuW15cXH1dKikqKVx9L2csCiAgICAgICAgICAgICAgICAgICAgSXQgPSAvXHcqJC8sCiAgICAgICAgICAgICAgICAgICAgT3QgPSAvXjBbeFhdLywKICAgICAgICAgICAgICAgICAgICBMdCA9IC9eXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXSQvLAogICAgICAgICAgICAgICAgICAgIER0ID0gL15cZCskLywKICAgICAgICAgICAgICAgICAgICBQdCA9IC9bXHhjMC1ceGQ2XHhkOC1ceGRlXHhkZi1ceGY2XHhmOC1ceGZmXS9nLAogICAgICAgICAgICAgICAgICAgICR0ID0gLygkXikvLAogICAgICAgICAgICAgICAgICAgIHF0ID0gL1snXG5cclx1MjAyOFx1MjAyOVxcXS9nLAogICAgICAgICAgICAgICAgICAgIEh0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gIltBLVpcXHhjMC1cXHhkNlxceGQ4LVxceGRlXSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gIlthLXpcXHhkZi1cXHhmNlxceGY4LVxceGZmXSsiOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVnRXhwKHQgKyAiKyg/PSIgKyB0ICsgZSArICIpfCIgKyB0ICsgIj8iICsgZSArICJ8IiArIHQgKyAiK3xbMC05XSsiLCAiZyIpCiAgICAgICAgICAgICAgICAgICAgfSgpLAogICAgICAgICAgICAgICAgICAgIE10ID0gWyJBcnJheSIsICJBcnJheUJ1ZmZlciIsICJEYXRlIiwgIkVycm9yIiwgIkZsb2F0MzJBcnJheSIsICJGbG9hdDY0QXJyYXkiLCAiRnVuY3Rpb24iLCAiSW50OEFycmF5IiwgIkludDE2QXJyYXkiLCAiSW50MzJBcnJheSIsICJNYXRoIiwgIk51bWJlciIsICJPYmplY3QiLCAiUmVnRXhwIiwgIlNldCIsICJTdHJpbmciLCAiXyIsICJjbGVhclRpbWVvdXQiLCAiaXNGaW5pdGUiLCAicGFyc2VGbG9hdCIsICJwYXJzZUludCIsICJzZXRUaW1lb3V0IiwgIlR5cGVFcnJvciIsICJVaW50OEFycmF5IiwgIlVpbnQ4Q2xhbXBlZEFycmF5IiwgIlVpbnQxNkFycmF5IiwgIlVpbnQzMkFycmF5IiwgIldlYWtNYXAiXSwKICAgICAgICAgICAgICAgICAgICBGdCA9IC0xLAogICAgICAgICAgICAgICAgICAgIEJ0ID0ge307CiAgICAgICAgICAgICAgICBCdFtvdF0gPSBCdFthdF0gPSBCdFtzdF0gPSBCdFt1dF0gPSBCdFtjdF0gPSBCdFtsdF0gPSBCdFtmdF0gPSBCdFtwdF0gPSBCdFtodF0gPSAhMCwgQnRbel0gPSBCdFtWXSA9IEJ0W2l0XSA9IEJ0W0ddID0gQnRbWF0gPSBCdFtKXSA9IEJ0W1ldID0gQnRbUV0gPSBCdFtLXSA9IEJ0W1pdID0gQnRbdHRdID0gQnRbZXRdID0gQnRbbnRdID0gQnRbcnRdID0gITE7CiAgICAgICAgICAgICAgICB2YXIgVXQgPSB7fTsKICAgICAgICAgICAgICAgIFV0W3pdID0gVXRbVl0gPSBVdFtpdF0gPSBVdFtHXSA9IFV0W1hdID0gVXRbb3RdID0gVXRbYXRdID0gVXRbc3RdID0gVXRbdXRdID0gVXRbY3RdID0gVXRbS10gPSBVdFtaXSA9IFV0W3R0XSA9IFV0W250XSA9IFV0W2x0XSA9IFV0W2Z0XSA9IFV0W3B0XSA9IFV0W2h0XSA9ICEwLCBVdFtKXSA9IFV0W1ldID0gVXRbUV0gPSBVdFtldF0gPSBVdFtydF0gPSAhMTsKICAgICAgICAgICAgICAgIHZhciBXdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgIsOAIjogIkEiLAogICAgICAgICAgICAgICAgICAgICAgICAiw4EiOiAiQSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDgiI6ICJBIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsODIjogIkEiLAogICAgICAgICAgICAgICAgICAgICAgICAiw4QiOiAiQSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDhSI6ICJBIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOgIjogImEiLAogICAgICAgICAgICAgICAgICAgICAgICAiw6EiOiAiYSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDoiI6ICJhIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOjIjogImEiLAogICAgICAgICAgICAgICAgICAgICAgICAiw6QiOiAiYSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDpSI6ICJhIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOHIjogIkMiLAogICAgICAgICAgICAgICAgICAgICAgICAiw6ciOiAiYyIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDkCI6ICJEIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOwIjogImQiLAogICAgICAgICAgICAgICAgICAgICAgICAiw4giOiAiRSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDiSI6ICJFIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOKIjogIkUiLAogICAgICAgICAgICAgICAgICAgICAgICAiw4siOiAiRSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDqCI6ICJlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOpIjogImUiLAogICAgICAgICAgICAgICAgICAgICAgICAiw6oiOiAiZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDqyI6ICJlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOMIjogIkkiLAogICAgICAgICAgICAgICAgICAgICAgICAiw40iOiAiSSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDjiI6ICJJIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOPIjogIkkiLAogICAgICAgICAgICAgICAgICAgICAgICAiw6wiOiAiaSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDrSI6ICJpIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOuIjogImkiLAogICAgICAgICAgICAgICAgICAgICAgICAiw68iOiAiaSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDkSI6ICJOIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOxIjogIm4iLAogICAgICAgICAgICAgICAgICAgICAgICAiw5IiOiAiTyIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDkyI6ICJPIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOUIjogIk8iLAogICAgICAgICAgICAgICAgICAgICAgICAiw5UiOiAiTyIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDliI6ICJPIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOYIjogIk8iLAogICAgICAgICAgICAgICAgICAgICAgICAiw7IiOiAibyIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDsyI6ICJvIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsO0IjogIm8iLAogICAgICAgICAgICAgICAgICAgICAgICAiw7UiOiAibyIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDtiI6ICJvIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsO4IjogIm8iLAogICAgICAgICAgICAgICAgICAgICAgICAiw5kiOiAiVSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDmiI6ICJVIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsObIjogIlUiLAogICAgICAgICAgICAgICAgICAgICAgICAiw5wiOiAiVSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDuSI6ICJ1IiwKICAgICAgICAgICAgICAgICAgICAgICAgIsO6IjogInUiLAogICAgICAgICAgICAgICAgICAgICAgICAiw7siOiAidSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDvCI6ICJ1IiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOdIjogIlkiLAogICAgICAgICAgICAgICAgICAgICAgICAiw70iOiAieSIsCiAgICAgICAgICAgICAgICAgICAgICAgICLDvyI6ICJ5IiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOGIjogIkFlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOmIjogImFlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOeIjogIlRoIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsO+IjogInRoIiwKICAgICAgICAgICAgICAgICAgICAgICAgIsOfIjogInNzIgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgenQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICImIjogIiZhbXA7IiwKICAgICAgICAgICAgICAgICAgICAgICAgIjwiOiAiJmx0OyIsCiAgICAgICAgICAgICAgICAgICAgICAgICI+IjogIiZndDsiLAogICAgICAgICAgICAgICAgICAgICAgICAnIic6ICImcXVvdDsiLAogICAgICAgICAgICAgICAgICAgICAgICAiJyI6ICImIzM5OyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJgIjogIiYjOTY7IgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgVnQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICImYW1wOyI6ICImIiwKICAgICAgICAgICAgICAgICAgICAgICAgIiZsdDsiOiAiPCIsCiAgICAgICAgICAgICAgICAgICAgICAgICImZ3Q7IjogIj4iLAogICAgICAgICAgICAgICAgICAgICAgICAiJnF1b3Q7IjogJyInLAogICAgICAgICAgICAgICAgICAgICAgICAiJiMzOTsiOiAiJyIsCiAgICAgICAgICAgICAgICAgICAgICAgICImIzk2OyI6ICJgIgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgR3QgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICJmdW5jdGlvbiI6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q6ICEwCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBYdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgMDogIngzMCIsCiAgICAgICAgICAgICAgICAgICAgICAgIDE6ICJ4MzEiLAogICAgICAgICAgICAgICAgICAgICAgICAyOiAieDMyIiwKICAgICAgICAgICAgICAgICAgICAgICAgMzogIngzMyIsCiAgICAgICAgICAgICAgICAgICAgICAgIDQ6ICJ4MzQiLAogICAgICAgICAgICAgICAgICAgICAgICA1OiAieDM1IiwKICAgICAgICAgICAgICAgICAgICAgICAgNjogIngzNiIsCiAgICAgICAgICAgICAgICAgICAgICAgIDc6ICJ4MzciLAogICAgICAgICAgICAgICAgICAgICAgICA4OiAieDM4IiwKICAgICAgICAgICAgICAgICAgICAgICAgOTogIngzOSIsCiAgICAgICAgICAgICAgICAgICAgICAgIEE6ICJ4NDEiLAogICAgICAgICAgICAgICAgICAgICAgICBCOiAieDQyIiwKICAgICAgICAgICAgICAgICAgICAgICAgQzogIng0MyIsCiAgICAgICAgICAgICAgICAgICAgICAgIEQ6ICJ4NDQiLAogICAgICAgICAgICAgICAgICAgICAgICBFOiAieDQ1IiwKICAgICAgICAgICAgICAgICAgICAgICAgRjogIng0NiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGE6ICJ4NjEiLAogICAgICAgICAgICAgICAgICAgICAgICBiOiAieDYyIiwKICAgICAgICAgICAgICAgICAgICAgICAgYzogIng2MyIsCiAgICAgICAgICAgICAgICAgICAgICAgIGQ6ICJ4NjQiLAogICAgICAgICAgICAgICAgICAgICAgICBlOiAieDY1IiwKICAgICAgICAgICAgICAgICAgICAgICAgZjogIng2NiIsCiAgICAgICAgICAgICAgICAgICAgICAgIG46ICJ4NmUiLAogICAgICAgICAgICAgICAgICAgICAgICByOiAieDcyIiwKICAgICAgICAgICAgICAgICAgICAgICAgdDogIng3NCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHU6ICJ4NzUiLAogICAgICAgICAgICAgICAgICAgICAgICB2OiAieDc2IiwKICAgICAgICAgICAgICAgICAgICAgICAgeDogIng3OCIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIEp0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAiXFwiOiAiXFwiLAogICAgICAgICAgICAgICAgICAgICAgICAiJyI6ICInIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlxuIjogIm4iLAogICAgICAgICAgICAgICAgICAgICAgICAiXHIiOiAiciIsCiAgICAgICAgICAgICAgICAgICAgICAgICJcdTIwMjgiOiAidTIwMjgiLAogICAgICAgICAgICAgICAgICAgICAgICAiXHUyMDI5IjogInUyMDI5IgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgWXQgPSBHdFt0eXBlb2Ygbl0gJiYgbiAmJiAhbi5ub2RlVHlwZSAmJiBuLAogICAgICAgICAgICAgICAgICAgIFF0ID0gR3RbdHlwZW9mIGVdICYmIGUgJiYgIWUubm9kZVR5cGUgJiYgZSwKICAgICAgICAgICAgICAgICAgICBLdCA9IFl0ICYmIFF0ICYmICJvYmplY3QiID09IHR5cGVvZiB0ICYmIHQgJiYgdC5PYmplY3QgJiYgdCwKICAgICAgICAgICAgICAgICAgICBadCA9IEd0W3R5cGVvZiBzZWxmXSAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ICYmIHNlbGYsCiAgICAgICAgICAgICAgICAgICAgdGUgPSBHdFt0eXBlb2Ygd2luZG93XSAmJiB3aW5kb3cgJiYgd2luZG93Lk9iamVjdCAmJiB3aW5kb3csCiAgICAgICAgICAgICAgICAgICAgZWUgPSBRdCAmJiBRdC5leHBvcnRzID09PSBZdCAmJiBZdCwKICAgICAgICAgICAgICAgICAgICBuZSA9IEt0IHx8IHRlICE9PSAodGhpcyAmJiB0aGlzLndpbmRvdykgJiYgdGUgfHwgWnQgfHwgdGhpcywKICAgICAgICAgICAgICAgICAgICByZSA9IFQoKTsKICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiAib2JqZWN0IiA9PSB0eXBlb2YgZGVmaW5lLmFtZCAmJiBkZWZpbmUuYW1kID8gKG5lLl8gPSByZSwgZGVmaW5lKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByZQogICAgICAgICAgICAgICAgfSkpIDogWXQgJiYgUXQgPyBlZSA/IChRdC5leHBvcnRzID0gcmUpLl8gPSByZSA6IFl0Ll8gPSByZSA6IG5lLl8gPSByZQogICAgICAgICAgICB9KS5jYWxsKHRoaXMpCiAgICAgICAgfSkuY2FsbCh0aGlzLCAidW5kZWZpbmVkIiAhPSB0eXBlb2YgZ2xvYmFsID8gZ2xvYmFsIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIHNlbGYgPyBzZWxmIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IHt9KQogICAgfSwge31dLAogICAgMTc6IFtmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgISBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgYm9vdHN0cmFwKSBib290c3RyYXAoInByb21pc2UiLCB0KTsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKCJvYmplY3QiID09IHR5cGVvZiBuICYmICJvYmplY3QiID09IHR5cGVvZiBlKSBlLmV4cG9ydHMgPSB0KCk7CiAgICAgICAgICAgICAgICBlbHNlIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCkgZGVmaW5lKHQpOwogICAgICAgICAgICAgICAgZWxzZSBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIHNlcykgewogICAgICAgICAgICAgICAgICAgIGlmICghc2VzLm9rKCkpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBzZXMubWFrZVEgPSB0CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmICgidW5kZWZpbmVkIiA9PSB0eXBlb2Ygd2luZG93ICYmICJ1bmRlZmluZWQiID09IHR5cGVvZiBzZWxmKSB0aHJvdyBuZXcgRXJyb3IoIlRoaXMgZW52aXJvbm1lbnQgd2FzIG5vdCBhbnRpY2lwYXRlZCBieSBRLiBQbGVhc2UgZmlsZSBhIGJ1Zy4iKTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cgOiBzZWxmLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gci5ROwogICAgICAgICAgICAgICAgICAgIHIuUSA9IHQoKSwgci5RLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuUSA9IGksIHRoaXMKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZSh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSi5hcHBseSh0LCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG4odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSBPYmplY3QodCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiByKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIltvYmplY3QgU3RvcEl0ZXJhdGlvbl0iID09PSBydCh0KSB8fCB0IGluc3RhbmNlb2YgegogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGkodCwgZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChCICYmIGUuc3RhY2sgJiYgIm9iamVjdCIgPT0gdHlwZW9mIHQgJiYgbnVsbCAhPT0gdCAmJiB0LnN0YWNrICYmIC0xID09PSB0LnN0YWNrLmluZGV4T2YoaXQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSBbXSwgciA9IGU7IHI7IHIgPSByLnNvdXJjZSkgci5zdGFjayAmJiBuLnVuc2hpZnQoci5zdGFjayk7CiAgICAgICAgICAgICAgICAgICAgICAgIG4udW5zaGlmdCh0LnN0YWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBuLmpvaW4oIlxuIiArIGl0ICsgIlxuIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHQuc3RhY2sgPSBvKGkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG8odCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSB0LnNwbGl0KCJcbiIpLCBuID0gW10sIHIgPSAwOyByIDwgZS5sZW5ndGg7ICsrcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGVbcl07CiAgICAgICAgICAgICAgICAgICAgICAgIHUoaSkgfHwgYShpKSB8fCAhaSB8fCBuLnB1c2goaSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uam9pbigiXG4iKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGEodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMSAhPT0gdC5pbmRleE9mKCIobW9kdWxlLmpzOiIpIHx8IC0xICE9PSB0LmluZGV4T2YoIihub2RlLmpzOiIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcyh0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAvYXQgLisgXCgoLispOihcZCspOig/OlxkKylcKSQvLmV4ZWModCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiBbZVsxXSwgTnVtYmVyKGVbMl0pXTsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IC9hdCAoW14gXSspOihcZCspOig/OlxkKykkLy5leGVjKHQpOwogICAgICAgICAgICAgICAgICAgIGlmIChuKSByZXR1cm4gW25bMV0sIE51bWJlcihuWzJdKV07CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAvLipAKC4rKTooXGQrKSQvLmV4ZWModCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPyBbclsxXSwgTnVtYmVyKHJbMl0pXSA6IHZvaWQgMAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHUodCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gcyh0KTsKICAgICAgICAgICAgICAgICAgICBpZiAoIWUpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGVbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlWzFdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuID09PSBXICYmIHIgPj0gViAmJiBjdCA+PSByCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gYygpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoQikgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQuc3RhY2suc3BsaXQoIlxuIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZVswXS5pbmRleE9mKCJAIikgPiAwID8gZVsxXSA6IGVbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gcyhuKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBXID0gclswXSwgclsxXQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBsKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgY29uc29sZSAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBjb25zb2xlLndhcm4gJiYgY29uc29sZS53YXJuKGUgKyAiIGlzIGRlcHJlY2F0ZWQsIHVzZSAiICsgbiArICIgaW5zdGVhZC4iLCBuZXcgRXJyb3IoIiIpLnN0YWNrKSwgdC5hcHBseSh0LCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGYodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgZyA/IHQgOiBiKHQpID8gUyh0KSA6IEModCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBwKCkgewogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHQodCkgewogICAgICAgICAgICAgICAgICAgICAgICBlID0gdCwgby5zb3VyY2UgPSB0LCBRKG4sIGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYubmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wcm9taXNlRGlzcGF0Y2guYXBwbHkodCwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHZvaWQgMCksIG4gPSB2b2lkIDAsIHIgPSB2b2lkIDAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIG4gPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gdHQocC5wcm90b3R5cGUpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gdHQoZy5wcm90b3R5cGUpOwogICAgICAgICAgICAgICAgICAgIGlmIChvLnByb21pc2VEaXNwYXRjaCA9IGZ1bmN0aW9uKHQsIGksIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gWShhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA/IChuLnB1c2goYSksICJ3aGVuIiA9PT0gaSAmJiBvWzFdICYmIHIucHVzaChvWzFdKSkgOiBmLm5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJvbWlzZURpc3BhdGNoLmFwcGx5KGUsIGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9LCBvLnZhbHVlT2YgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuKSByZXR1cm4gbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0geShlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtKHQpICYmIChlID0gdCksIHQKICAgICAgICAgICAgICAgICAgICAgICAgfSwgby5pbnNwZWN0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA/IGUuaW5zcGVjdCgpIDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiAicGVuZGluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgZi5sb25nU3RhY2tTdXBwb3J0ICYmIEIpIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcgogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgby5zdGFjayA9IGEuc3RhY2suc3Vic3RyaW5nKGEuc3RhY2suaW5kZXhPZigiXG4iKSArIDEpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBpLnByb21pc2UgPSBvLCBpLnJlc29sdmUgPSBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgfHwgdChmKG4pKQogICAgICAgICAgICAgICAgICAgIH0sIGkuZnVsZmlsbCA9IGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSB8fCB0KEMobikpCiAgICAgICAgICAgICAgICAgICAgfSwgaS5yZWplY3QgPSBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgfHwgdChqKG4pKQogICAgICAgICAgICAgICAgICAgIH0sIGkubm90aWZ5ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICBlIHx8IFEociwgZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5uZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9LCB2b2lkIDApCiAgICAgICAgICAgICAgICAgICAgfSwgaQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGgodCkgewogICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiB0KSB0aHJvdyBuZXcgVHlwZUVycm9yKCJyZXNvbHZlciBtdXN0IGJlIGEgZnVuY3Rpb24uIik7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBwKCk7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdChlLnJlc29sdmUsIGUucmVqZWN0LCBlLm5vdGlmeSkKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUucmVqZWN0KG4pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnByb21pc2UKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAwLCBpID0gdC5sZW5ndGg7IGkgPiByOyByKyspIGYodFtyXSkudGhlbihlLCBuKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZyh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaihuZXcgRXJyb3IoIlByb21pc2UgZG9lcyBub3Qgc3VwcG9ydCBvcGVyYXRpb246ICIgKyB0KSkKICAgICAgICAgICAgICAgICAgICB9KSwgdm9pZCAwID09PSBuICYmIChuID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogInVua25vd24iCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHR0KGcucHJvdG90eXBlKTsKICAgICAgICAgICAgICAgICAgICBpZiAoci5wcm9taXNlRGlzcGF0Y2ggPSBmdW5jdGlvbihuLCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHRbaV0gPyB0W2ldLmFwcGx5KHIsIG8pIDogZS5jYWxsKHIsIGksIG8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGoocykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gJiYgbihhKQogICAgICAgICAgICAgICAgICAgICAgICB9LCByLmluc3BlY3QgPSBuLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gbigpOwogICAgICAgICAgICAgICAgICAgICAgICAicmVqZWN0ZWQiID09PSBpLnN0YXRlICYmIChyLmV4Y2VwdGlvbiA9IGkucmVhc29uKSwgci52YWx1ZU9mID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IG4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAicGVuZGluZyIgPT09IHQuc3RhdGUgfHwgInJlamVjdGVkIiA9PT0gdC5zdGF0ZSA/IHIgOiB0LnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB2KHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KS50aGVuKGUsIG4sIHIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24geSh0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG0odCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0Lmluc3BlY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdWxmaWxsZWQiID09PSBlLnN0YXRlKSByZXR1cm4gZS52YWx1ZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG0odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgZwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGIodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuKHQpICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIHQudGhlbgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHgodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBtKHQpICYmICJwZW5kaW5nIiA9PT0gdC5pbnNwZWN0KCkuc3RhdGUKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB3KHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIW0odCkgfHwgImZ1bGZpbGxlZCIgPT09IHQuaW5zcGVjdCgpLnN0YXRlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gXyh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0odCkgJiYgInJlamVjdGVkIiA9PT0gdC5pbnNwZWN0KCkuc3RhdGUKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBrKCkgewogICAgICAgICAgICAgICAgICAgIG90Lmxlbmd0aCA9IDAsIGF0Lmxlbmd0aCA9IDAsIHV0IHx8ICh1dCA9ICEwKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFQoZSwgbikgewogICAgICAgICAgICAgICAgICAgIHV0ICYmICgib2JqZWN0IiA9PSB0eXBlb2YgdCAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiB0LmVtaXQgJiYgZi5uZXh0VGljay5ydW5BZnRlcihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLTEgIT09IEsoYXQsIGUpICYmICh0LmVtaXQoInVuaGFuZGxlZFJlamVjdGlvbiIsIG4sIGUpLCBzdC5wdXNoKGUpKQogICAgICAgICAgICAgICAgICAgIH0pLCBhdC5wdXNoKGUpLCBuICYmICJ1bmRlZmluZWQiICE9IHR5cGVvZiBuLnN0YWNrID8gb3QucHVzaChuLnN0YWNrKSA6IG90LnB1c2goIihubyBzdGFjaykgIiArIG4pKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEUoZSkgewogICAgICAgICAgICAgICAgICAgIGlmICh1dCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IEsoYXQsIGUpOyAtIDEgIT09IG4gJiYgKCJvYmplY3QiID09IHR5cGVvZiB0ICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIHQuZW1pdCAmJiBmLm5leHRUaWNrLnJ1bkFmdGVyKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBLKHN0LCBlKTsgLSAxICE9PSByICYmICh0LmVtaXQoInJlamVjdGlvbkhhbmRsZWQiLCBvdFtuXSwgZSksIHN0LnNwbGljZShyLCAxKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksIGF0LnNwbGljZShuLCAxKSwgb3Quc3BsaWNlKG4sIDEpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBqKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGcoewogICAgICAgICAgICAgICAgICAgICAgICB3aGVuOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSAmJiBFKHRoaXMpLCBlID8gZSh0KSA6IHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6ICJyZWplY3RlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IHQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBUKGUsIHQpLCBlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gQyh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGcoewogICAgICAgICAgICAgICAgICAgICAgICB3aGVuOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRbZV0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W2VdID0gbgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAiZGVsZXRlIjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRbZV0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcG9zdDogZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT09IGUgfHwgdm9pZCAwID09PSBlID8gdC5hcHBseSh2b2lkIDAsIG4pIDogdFtlXS5hcHBseSh0LCBuKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYXBwbHkoZSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnQodCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIHZvaWQgMCwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogImZ1bGZpbGxlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBTKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHAoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZi5uZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQudGhlbihlLnJlc29sdmUsIGUucmVqZWN0LCBlLm5vdGlmeSkKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAobikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZWplY3QobikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLCBlLnByb21pc2UKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBBKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZyh7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVmOiBmdW5jdGlvbigpIHt9CiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRCh0LCBlLCBuKQogICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KS5pbnNwZWN0KCkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE4odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLnNwcmVhZChlLCBuKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFIodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZSh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgidW5kZWZpbmVkIiA9PSB0eXBlb2YgU3RvcEl0ZXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuW3RdKGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaihzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5kb25lID8gZihhLnZhbHVlKSA6IHYoYS52YWx1ZSwgaSwgbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG5bdF0oZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcihzKSA/IGYocy52YWx1ZSkgOiBqKHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdihhLCBpLCBvKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGUuYmluZChlLCAibmV4dCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUuYmluZChlLCAidGhyb3ciKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBJKHQpIHsKICAgICAgICAgICAgICAgICAgICBmLmRvbmUoZi5hc3luYyh0KSgpKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE8odCkgewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyB6KHQpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gTCh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTihbdGhpcywgUChhcmd1bWVudHMpXSwgZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYXBwbHkoZSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gRCh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkuZGlzcGF0Y2goZSwgbikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBQKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdih0LCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRKHQsIGZ1bmN0aW9uKHIsIGksIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbShpKSAmJiAiZnVsZmlsbGVkIiA9PT0gKGEgPSBpLmluc3BlY3QoKSkuc3RhdGUgPyB0W29dID0gYS52YWx1ZSA6ICgrK2UsIHYoaSwgZnVuY3Rpb24ocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbb10gPSByLCAwID09PSAtLWUgJiYgbi5yZXNvbHZlKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBuLnJlamVjdCwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ubm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICB9LCB2b2lkIDApLCAwID09PSBlICYmIG4ucmVzb2x2ZSh0KSwgbi5wcm9taXNlCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiAkKHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHJldHVybiBmLnJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGYuZGVmZXIoKSwKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IDA7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFEodCwgZnVuY3Rpb24ociwgaSwgbykgewogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBhKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucmVzb2x2ZSh0KQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi0tLCAwID09PSBuICYmIGUucmVqZWN0KG5ldyBFcnJvcigiQ2FuJ3QgZ2V0IGZ1bGZpbGxtZW50IHZhbHVlIGZyb20gYW55IHByb21pc2UsIGFsbCBwcm9taXNlcyB3ZXJlIHJlamVjdGVkLiIpKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1KHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHRbb107CiAgICAgICAgICAgICAgICAgICAgICAgIG4rKywgdihjLCBhLCBzLCB1KQogICAgICAgICAgICAgICAgICAgIH0sIHZvaWQgMCksIGUucHJvbWlzZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHEodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB2KHQsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBaKHQsIGYpLCB2KFAoWih0LCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdih0LCBHLCBHKQogICAgICAgICAgICAgICAgICAgICAgICB9KSksIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEgodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLmFsbFNldHRsZWQoKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE0odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLnRoZW4odm9pZCAwLCB2b2lkIDAsIGUpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gRih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkubm9kZWlmeShlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIEIgPSAhMTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yCiAgICAgICAgICAgICAgICB9IGNhdGNoIChVKSB7CiAgICAgICAgICAgICAgICAgICAgQiA9ICEhVS5zdGFjawogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIFcsIHosIFYgPSBjKCksCiAgICAgICAgICAgICAgICAgICAgRyA9IGZ1bmN0aW9uKCkge30sCiAgICAgICAgICAgICAgICAgICAgWCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBlKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCwgZTsgci5uZXh0OykgciA9IHIubmV4dCwgdCA9IHIudGFzaywgci50YXNrID0gdm9pZCAwLCBlID0gci5kb21haW4sIGUgJiYgKHIuZG9tYWluID0gdm9pZCAwLCBlLmVudGVyKCkpLCBuKHQsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IHUubGVuZ3RoOykgdCA9IHUucG9wKCksIG4odCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gITEKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzKSB0aHJvdyBuICYmIG4uZXhpdCgpLCBzZXRUaW1lb3V0KGUsIDApLCBuICYmIG4uZW50ZXIoKSwgcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gJiYgbi5leGl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrOiB2b2lkIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHZvaWQgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFggPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGkubmV4dCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzazogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBzICYmIHQuZG9tYWluLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgbyB8fCAobyA9ICEwLCBhKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAib2JqZWN0IiA9PSB0eXBlb2YgdCAmJiAiW29iamVjdCBwcm9jZXNzXSIgPT09IHQudG9TdHJpbmcoKSAmJiB0Lm5leHRUaWNrKSBzID0gITAsIGEgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQubmV4dFRpY2soZSkKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2Ygc2V0SW1tZWRpYXRlKSBhID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyA/IHNldEltbWVkaWF0ZS5iaW5kKHdpbmRvdywgZSkgOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEltbWVkaWF0ZShlKQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgTWVzc2FnZUNoYW5uZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gbmV3IE1lc3NhZ2VDaGFubmVsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gbCwgYy5wb3J0MS5vbm1lc3NhZ2UgPSBlLCBlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMucG9ydDIucG9zdE1lc3NhZ2UoMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChlLCAwKSwgbCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBhID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGUsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBYLnJ1bkFmdGVyID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5wdXNoKHQpLCBvIHx8IChvID0gITAsIGEoKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgWAogICAgICAgICAgICAgICAgICAgIH0oKSwKICAgICAgICAgICAgICAgICAgICBKID0gRnVuY3Rpb24uY2FsbCwKICAgICAgICAgICAgICAgICAgICBZID0gZShBcnJheS5wcm90b3R5cGUuc2xpY2UpLAogICAgICAgICAgICAgICAgICAgIFEgPSBlKEFycmF5LnByb3RvdHlwZS5yZWR1Y2UgfHwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdGhpcy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxID09PSBhcmd1bWVudHMubGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7OykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuIGluIHRoaXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHRoaXNbbisrXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCsrbiA+PSByKSB0aHJvdyBuZXcgVHlwZUVycm9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyByID4gbjsgbisrKSBuIGluIHRoaXMgJiYgKGUgPSB0KGUsIHRoaXNbbl0sIG4pKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBLID0gZShBcnJheS5wcm90b3R5cGUuaW5kZXhPZiB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgdGhpcy5sZW5ndGg7IGUrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzW2VdID09PSB0KSByZXR1cm4gZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgWiA9IGUoQXJyYXkucHJvdG90eXBlLm1hcCB8fCBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFEobiwgZnVuY3Rpb24oaSwgbywgYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgci5wdXNoKHQuY2FsbChlLCBvLCBhLCBuKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdm9pZCAwKSwgcgogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIHR0ID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUoKSB7fQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wcm90b3R5cGUgPSB0LCBuZXcgZQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZXQgPSBlKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkpLAogICAgICAgICAgICAgICAgICAgIG50ID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuIGluIHQpIGV0KHQsIG4pICYmIGUucHVzaChuKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJ0ID0gZShPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKTsKICAgICAgICAgICAgICAgIHogPSAidW5kZWZpbmVkIiAhPSB0eXBlb2YgUmV0dXJuVmFsdWUgPyBSZXR1cm5WYWx1ZSA6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBpdCA9ICJGcm9tIHByZXZpb3VzIGV2ZW50OiI7CiAgICAgICAgICAgICAgICBmLnJlc29sdmUgPSBmLCBmLm5leHRUaWNrID0gWCwgZi5sb25nU3RhY2tTdXBwb3J0ID0gITEsICJvYmplY3QiID09IHR5cGVvZiB0ICYmIHQgJiYgdC5lbnYgJiYgdC5lbnYuUV9ERUJVRyAmJiAoZi5sb25nU3RhY2tTdXBwb3J0ID0gITApLCBmLmRlZmVyID0gcCwgcC5wcm90b3R5cGUubWFrZU5vZGVSZXNvbHZlciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpczsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBlID8gdC5yZWplY3QoZSkgOiBhcmd1bWVudHMubGVuZ3RoID4gMiA/IHQucmVzb2x2ZShZKGFyZ3VtZW50cywgMSkpIDogdC5yZXNvbHZlKG4pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgZi5Qcm9taXNlID0gaCwgZi5wcm9taXNlID0gaCwgaC5yYWNlID0gZCwgaC5hbGwgPSBQLCBoLnJlamVjdCA9IGosIGgucmVzb2x2ZSA9IGYsIGYucGFzc0J5Q29weSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgfSwgZy5wcm90b3R5cGUucGFzc0J5Q29weSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICB9LCBmLmpvaW4gPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkuam9pbihlKQogICAgICAgICAgICAgICAgfSwgZy5wcm90b3R5cGUuam9pbiA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZihbdGhpcywgdF0pLnNwcmVhZChmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID09PSBlKSByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW4ndCBqb2luOiBub3QgdGhlIHNhbWU6ICIgKyB0ICsgIiAiICsgZSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgZi5yYWNlID0gZCwgZy5wcm90b3R5cGUucmFjZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4oZi5yYWNlKQogICAgICAgICAgICAgICAgfSwgZi5tYWtlUHJvbWlzZSA9IGcsIGcucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJbb2JqZWN0IFByb21pc2VdIgogICAgICAgICAgICAgICAgfSwgZy5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiByKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiB0ID8gdChlKSA6IGUKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAobikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGoobikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbyh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKHQsIHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAobikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqKG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGoodCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGEodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgbiA/IG4odCkgOiB0CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHAoKSwKICAgICAgICAgICAgICAgICAgICAgICAgYyA9ICExOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmLm5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBzLnByb21pc2VEaXNwYXRjaChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjIHx8IChjID0gITAsIHUucmVzb2x2ZShyKHQpKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgIndoZW4iLCBbZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyB8fCAoYyA9ICEwLCB1LnJlc29sdmUobyh0KSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH1dKQogICAgICAgICAgICAgICAgICAgIH0pLCBzLnByb21pc2VEaXNwYXRjaCh2b2lkIDAsICJ3aGVuIiwgW3ZvaWQgMCwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSwgbiA9ICExOwogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGEodCkKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPSAhMCwgIWYub25lcnJvcikgdGhyb3cgcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYub25lcnJvcihyKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG4gfHwgdS5ub3RpZnkoZSkKICAgICAgICAgICAgICAgICAgICB9XSksIHUucHJvbWlzZQogICAgICAgICAgICAgICAgfSwgZi50YXAgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkudGFwKGUpCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS50YXAgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBmKHQpLCB0aGlzLnRoZW4oZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5mY2FsbChlKS50aGVuUmVzb2x2ZShlKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCBmLndoZW4gPSB2LCBnLnByb3RvdHlwZS50aGVuUmVzb2x2ZSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LCBmLnRoZW5SZXNvbHZlID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLnRoZW5SZXNvbHZlKGUpCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS50aGVuUmVqZWN0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHQKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgZi50aGVuUmVqZWN0ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLnRoZW5SZWplY3QoZSkKICAgICAgICAgICAgICAgIH0sIGYubmVhcmVyID0geSwgZi5pc1Byb21pc2UgPSBtLCBmLmlzUHJvbWlzZUFsaWtlID0gYiwgZi5pc1BlbmRpbmcgPSB4LCBnLnByb3RvdHlwZS5pc1BlbmRpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gInBlbmRpbmciID09PSB0aGlzLmluc3BlY3QoKS5zdGF0ZQogICAgICAgICAgICAgICAgfSwgZi5pc0Z1bGZpbGxlZCA9IHcsIGcucHJvdG90eXBlLmlzRnVsZmlsbGVkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJmdWxmaWxsZWQiID09PSB0aGlzLmluc3BlY3QoKS5zdGF0ZQogICAgICAgICAgICAgICAgfSwgZi5pc1JlamVjdGVkID0gXywgZy5wcm90b3R5cGUuaXNSZWplY3RlZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAicmVqZWN0ZWQiID09PSB0aGlzLmluc3BlY3QoKS5zdGF0ZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBvdCA9IFtdLAogICAgICAgICAgICAgICAgICAgIGF0ID0gW10sCiAgICAgICAgICAgICAgICAgICAgc3QgPSBbXSwKICAgICAgICAgICAgICAgICAgICB1dCA9ICEwOwogICAgICAgICAgICAgICAgZi5yZXNldFVuaGFuZGxlZFJlamVjdGlvbnMgPSBrLCBmLmdldFVuaGFuZGxlZFJlYXNvbnMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3Quc2xpY2UoKQogICAgICAgICAgICAgICAgfSwgZi5zdG9wVW5oYW5kbGVkUmVqZWN0aW9uVHJhY2tpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBrKCksIHV0ID0gITEKICAgICAgICAgICAgICAgIH0sIGsoKSwgZi5yZWplY3QgPSBqLCBmLmZ1bGZpbGwgPSBDLCBmLm1hc3RlciA9IEEsIGYuc3ByZWFkID0gTiwgZy5wcm90b3R5cGUuc3ByZWFkID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFsbCgpLnRoZW4oZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseSh2b2lkIDAsIGUpCiAgICAgICAgICAgICAgICAgICAgfSwgZSkKICAgICAgICAgICAgICAgIH0sIGYuYXN5bmMgPSBSLCBmLnNwYXduID0gSSwgZlsicmV0dXJuIl0gPSBPLCBmLnByb21pc2VkID0gTCwgZi5kaXNwYXRjaCA9IEQsIGcucHJvdG90eXBlLmRpc3BhdGNoID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHAoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZi5uZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbi5wcm9taXNlRGlzcGF0Y2goci5yZXNvbHZlLCB0LCBlKQogICAgICAgICAgICAgICAgICAgIH0pLCByLnByb21pc2UKICAgICAgICAgICAgICAgIH0sIGYuZ2V0ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLmRpc3BhdGNoKCJnZXQiLCBbZV0pCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goImdldCIsIFt0XSkKICAgICAgICAgICAgICAgIH0sIGYuc2V0ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLmRpc3BhdGNoKCJzZXQiLCBbZSwgbl0pCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goInNldCIsIFt0LCBlXSkKICAgICAgICAgICAgICAgIH0sIGYuZGVsID0gZlsiZGVsZXRlIl0gPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkuZGlzcGF0Y2goImRlbGV0ZSIsIFtlXSkKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLmRlbCA9IGcucHJvdG90eXBlWyJkZWxldGUiXSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNwYXRjaCgiZGVsZXRlIiwgW3RdKQogICAgICAgICAgICAgICAgfSwgZi5tYXBwbHkgPSBmLnBvc3QgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkuZGlzcGF0Y2goInBvc3QiLCBbZSwgbl0pCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5tYXBwbHkgPSBnLnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKCJwb3N0IiwgW3QsIGVdKQogICAgICAgICAgICAgICAgfSwgZi5zZW5kID0gZi5tY2FsbCA9IGYuaW52b2tlID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLmRpc3BhdGNoKCJwb3N0IiwgW2UsIFkoYXJndW1lbnRzLCAyKV0pCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5zZW5kID0gZy5wcm90b3R5cGUubWNhbGwgPSBnLnByb3RvdHlwZS5pbnZva2UgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goInBvc3QiLCBbdCwgWShhcmd1bWVudHMsIDEpXSkKICAgICAgICAgICAgICAgIH0sIGYuZmFwcGx5ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLmRpc3BhdGNoKCJhcHBseSIsIFt2b2lkIDAsIGVdKQogICAgICAgICAgICAgICAgfSwgZy5wcm90b3R5cGUuZmFwcGx5ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKCJhcHBseSIsIFt2b2lkIDAsIHRdKQogICAgICAgICAgICAgICAgfSwgZlsidHJ5Il0gPSBmLmZjYWxsID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLmRpc3BhdGNoKCJhcHBseSIsIFt2b2lkIDAsIFkoYXJndW1lbnRzLCAxKV0pCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5mY2FsbCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKCJhcHBseSIsIFt2b2lkIDAsIFkoYXJndW1lbnRzKV0pCiAgICAgICAgICAgICAgICB9LCBmLmZiaW5kID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gZih0KSwKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IFkoYXJndW1lbnRzLCAxKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmRpc3BhdGNoKCJhcHBseSIsIFt0aGlzLCBuLmNvbmNhdChZKGFyZ3VtZW50cykpXSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5mYmluZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IFkoYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmRpc3BhdGNoKCJhcHBseSIsIFt0aGlzLCBlLmNvbmNhdChZKGFyZ3VtZW50cykpXSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBmLmtleXMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodCkuZGlzcGF0Y2goImtleXMiLCBbXSkKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNwYXRjaCgia2V5cyIsIFtdKQogICAgICAgICAgICAgICAgfSwgZi5hbGwgPSBQLCBnLnByb3RvdHlwZS5hbGwgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gUCh0aGlzKQogICAgICAgICAgICAgICAgfSwgZi5hbnkgPSAkLCBnLnByb3RvdHlwZS5hbnkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKQogICAgICAgICAgICAgICAgfSwgZi5hbGxSZXNvbHZlZCA9IGwocSwgImFsbFJlc29sdmVkIiwgImFsbFNldHRsZWQiKSwgZy5wcm90b3R5cGUuYWxsUmVzb2x2ZWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcSh0aGlzKQogICAgICAgICAgICAgICAgfSwgZi5hbGxTZXR0bGVkID0gSCwgZy5wcm90b3R5cGUuYWxsU2V0dGxlZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUChaKHQsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaW5zcGVjdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IGYodCksIHQudGhlbihlLCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgZi5mYWlsID0gZlsiY2F0Y2giXSA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KS50aGVuKHZvaWQgMCwgZSkKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLmZhaWwgPSBnLnByb3RvdHlwZVsiY2F0Y2giXSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKHZvaWQgMCwgdCkKICAgICAgICAgICAgICAgIH0sIGYucHJvZ3Jlc3MgPSBNLCBnLnByb3RvdHlwZS5wcm9ncmVzcyA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKHZvaWQgMCwgdm9pZCAwLCB0KQogICAgICAgICAgICAgICAgfSwgZi5maW4gPSBmWyJmaW5hbGx5Il0gPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYodClbImZpbmFsbHkiXShlKQogICAgICAgICAgICAgICAgfSwgZy5wcm90b3R5cGUuZmluID0gZy5wcm90b3R5cGVbImZpbmFsbHkiXSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9IGYodCksIHRoaXMudGhlbihmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmZjYWxsKCkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5mY2FsbCgpLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sIGYuZG9uZSA9IGZ1bmN0aW9uKHQsIGUsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KS5kb25lKGUsIG4sIHIpCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5kb25lID0gZnVuY3Rpb24oZSwgbiwgcikgewogICAgICAgICAgICAgICAgICAgIHZhciBvID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5uZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSh0LCBhKSwgIWYub25lcnJvcikgdGhyb3cgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLm9uZXJyb3IodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlIHx8IG4gfHwgciA/IHRoaXMudGhlbihlLCBuLCByKSA6IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgIm9iamVjdCIgPT0gdHlwZW9mIHQgJiYgdCAmJiB0LmRvbWFpbiAmJiAobyA9IHQuZG9tYWluLmJpbmQobykpLCBhLnRoZW4odm9pZCAwLCBvKQogICAgICAgICAgICAgICAgfSwgZi50aW1lb3V0ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLnRpbWVvdXQoZSwgbikKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLnRpbWVvdXQgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBwKCksCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSAmJiAic3RyaW5nIiAhPSB0eXBlb2YgZSB8fCAoZSA9IG5ldyBFcnJvcihlIHx8ICJUaW1lZCBvdXQgYWZ0ZXIgIiArIHQgKyAiIG1zIiksIGUuY29kZSA9ICJFVElNRURPVVQiKSwgbi5yZWplY3QoZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgdCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChyKSwgbi5yZXNvbHZlKHQpCiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQociksIG4ucmVqZWN0KHQpCiAgICAgICAgICAgICAgICAgICAgfSwgbi5ub3RpZnkpLCBuLnByb21pc2UKICAgICAgICAgICAgICAgIH0sIGYuZGVsYXkgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZSAmJiAoZSA9IHQsIHQgPSB2b2lkIDApLCBmKHQpLmRlbGF5KGUpCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5kZWxheSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5yZXNvbHZlKGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHQpLCBuLnByb21pc2UKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgZi5uZmFwcGx5ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQpLm5mYXBwbHkoZSkKICAgICAgICAgICAgICAgIH0sIGcucHJvdG90eXBlLm5mYXBwbHkgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBwKCksCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBZKHQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnB1c2goZS5tYWtlTm9kZVJlc29sdmVyKCkpLCB0aGlzLmZhcHBseShuKS5mYWlsKGUucmVqZWN0KSwgZS5wcm9taXNlCiAgICAgICAgICAgICAgICB9LCBmLm5mY2FsbCA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IFkoYXJndW1lbnRzLCAxKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KS5uZmFwcGx5KGUpCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5uZmNhbGwgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IFkoYXJndW1lbnRzKSwKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHAoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5wdXNoKGUubWFrZU5vZGVSZXNvbHZlcigpKSwgdGhpcy5mYXBwbHkodCkuZmFpbChlLnJlamVjdCksIGUucHJvbWlzZQogICAgICAgICAgICAgICAgfSwgZi5uZmJpbmQgPSBmLmRlbm9kZWlmeSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IFkoYXJndW1lbnRzLCAxKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS5jb25jYXQoWShhcmd1bWVudHMpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnB1c2goci5tYWtlTm9kZVJlc29sdmVyKCkpLCBmKHQpLmZhcHBseShuKS5mYWlsKHIucmVqZWN0KSwgci5wcm9taXNlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgZy5wcm90b3R5cGUubmZiaW5kID0gZy5wcm90b3R5cGUuZGVub2RlaWZ5ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBZKGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQudW5zaGlmdCh0aGlzKSwgZi5kZW5vZGVpZnkuYXBwbHkodm9pZCAwLCB0KQogICAgICAgICAgICAgICAgfSwgZi5uYmluZCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IFkoYXJndW1lbnRzLCAyKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseShlLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBuLmNvbmNhdChZKGFyZ3VtZW50cykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkucHVzaChvLm1ha2VOb2RlUmVzb2x2ZXIoKSksIGYocikuZmFwcGx5KGkpLmZhaWwoby5yZWplY3QpLCBvLnByb21pc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5uYmluZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gWShhcmd1bWVudHMsIDApOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnVuc2hpZnQodGhpcyksIGYubmJpbmQuYXBwbHkodm9pZCAwLCB0KQogICAgICAgICAgICAgICAgfSwgZi5ubWFwcGx5ID0gZi5ucG9zdCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0KS5ucG9zdChlLCBuKQogICAgICAgICAgICAgICAgfSwgZy5wcm90b3R5cGUubm1hcHBseSA9IGcucHJvdG90eXBlLm5wb3N0ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gWShlIHx8IFtdKSwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHAoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5wdXNoKHIubWFrZU5vZGVSZXNvbHZlcigpKSwgdGhpcy5kaXNwYXRjaCgicG9zdCIsIFt0LCBuXSkuZmFpbChyLnJlamVjdCksIHIucHJvbWlzZQogICAgICAgICAgICAgICAgfSwgZi5uc2VuZCA9IGYubm1jYWxsID0gZi5uaW52b2tlID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gWShhcmd1bWVudHMsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICByID0gcCgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnB1c2goci5tYWtlTm9kZVJlc29sdmVyKCkpLCBmKHQpLmRpc3BhdGNoKCJwb3N0IiwgW2UsIG5dKS5mYWlsKHIucmVqZWN0KSwgci5wcm9taXNlCiAgICAgICAgICAgICAgICB9LCBnLnByb3RvdHlwZS5uc2VuZCA9IGcucHJvdG90eXBlLm5tY2FsbCA9IGcucHJvdG90eXBlLm5pbnZva2UgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBZKGFyZ3VtZW50cywgMSksCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBwKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucHVzaChuLm1ha2VOb2RlUmVzb2x2ZXIoKSksIHRoaXMuZGlzcGF0Y2goInBvc3QiLCBbdCwgZV0pLmZhaWwobi5yZWplY3QpLCBuLnByb21pc2UKICAgICAgICAgICAgICAgIH0sIGYubm9kZWlmeSA9IEYsIGcucHJvdG90eXBlLm5vZGVpZnkgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPyB2b2lkIHRoaXMudGhlbihmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGYubmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0KG51bGwsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmLm5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdChlKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0pIDogdGhpcwogICAgICAgICAgICAgICAgfSwgZi5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJRLm5vQ29uZmxpY3Qgb25seSB3b3JrcyB3aGVuIFEgaXMgdXNlZCBhcyBhIGdsb2JhbCIpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIGN0ID0gYygpOwogICAgICAgICAgICAgICAgcmV0dXJuIGYKICAgICAgICAgICAgfSkKICAgICAgICB9KS5jYWxsKHRoaXMsIHQoIl9wcm9jZXNzIikpCiAgICB9LCB7CiAgICAgICAgX3Byb2Nlc3M6IDExCiAgICB9XSwKICAgIDE4OiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgIGZ1bmN0aW9uIHIoKSB7fQoKICAgICAgICBmdW5jdGlvbiBpKHQpIHsKICAgICAgICAgICAgdmFyIGUgPSB7fS50b1N0cmluZy5jYWxsKHQpOwogICAgICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgIltvYmplY3QgRmlsZV0iOgogICAgICAgICAgICAgICAgY2FzZSAiW29iamVjdCBCbG9iXSI6CiAgICAgICAgICAgICAgICBjYXNlICJbb2JqZWN0IEZvcm1EYXRhXSI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbygpIHsKICAgICAgICAgICAgaWYgKHkuWE1MSHR0cFJlcXVlc3QgJiYgKCJmaWxlOiIgIT0geS5sb2NhdGlvbi5wcm90b2NvbCB8fCAheS5BY3RpdmVYT2JqZWN0KSkgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKQogICAgICAgICAgICB9IGNhdGNoICh0KSB7fQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCJNc3htbDIuWE1MSFRUUC42LjAiKQogICAgICAgICAgICB9IGNhdGNoICh0KSB7fQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCJNc3htbDIuWE1MSFRUUC4zLjAiKQogICAgICAgICAgICB9IGNhdGNoICh0KSB7fQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCJNc3htbDIuWE1MSFRUUCIpCiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHt9CiAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYSh0KSB7CiAgICAgICAgICAgIHJldHVybiB0ID09PSBPYmplY3QodCkKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHModCkgewogICAgICAgICAgICBpZiAoIWEodCkpIHJldHVybiB0OwogICAgICAgICAgICB2YXIgZSA9IFtdOwogICAgICAgICAgICBmb3IgKHZhciBuIGluIHQpIG51bGwgIT0gdFtuXSAmJiBlLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KG4pICsgIj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHRbbl0pKTsKICAgICAgICAgICAgcmV0dXJuIGUuam9pbigiJiIpCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1KHQpIHsKICAgICAgICAgICAgZm9yICh2YXIgZSwgbiwgciA9IHt9LCBpID0gdC5zcGxpdCgiJiIpLCBvID0gMCwgYSA9IGkubGVuZ3RoOyBhID4gbzsgKytvKSBuID0gaVtvXSwgZSA9IG4uc3BsaXQoIj0iKSwgcltkZWNvZGVVUklDb21wb25lbnQoZVswXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KGVbMV0pOwogICAgICAgICAgICByZXR1cm4gcgogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYyh0KSB7CiAgICAgICAgICAgIHZhciBlLCBuLCByLCBpLCBvID0gdC5zcGxpdCgvXHI/XG4vKSwKICAgICAgICAgICAgICAgIGEgPSB7fTsKICAgICAgICAgICAgby5wb3AoKTsKICAgICAgICAgICAgZm9yICh2YXIgcyA9IDAsIHUgPSBvLmxlbmd0aDsgdSA+IHM7ICsrcykgbiA9IG9bc10sIGUgPSBuLmluZGV4T2YoIjoiKSwgciA9IG4uc2xpY2UoMCwgZSkudG9Mb3dlckNhc2UoKSwgaSA9IG0obi5zbGljZShlICsgMSkpLCBhW3JdID0gaTsKICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGwodCkgewogICAgICAgICAgICByZXR1cm4gdC5zcGxpdCgvICo7ICovKS5zaGlmdCgpCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmKHQpIHsKICAgICAgICAgICAgcmV0dXJuIHYodC5zcGxpdCgvICo7ICovKSwgZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBlLnNwbGl0KC8gKj0gKi8pLAogICAgICAgICAgICAgICAgICAgIHIgPSBuLnNoaWZ0KCksCiAgICAgICAgICAgICAgICAgICAgaSA9IG4uc2hpZnQoKTsKICAgICAgICAgICAgICAgIHJldHVybiByICYmIGkgJiYgKHRbcl0gPSBpKSwgdAogICAgICAgICAgICB9LCB7fSkKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHAodCwgZSkgewogICAgICAgICAgICBlID0gZSB8fCB7fSwgdGhpcy5yZXEgPSB0LCB0aGlzLnhociA9IHRoaXMucmVxLnhociwgdGhpcy50ZXh0ID0gIkhFQUQiICE9IHRoaXMucmVxLm1ldGhvZCA/IHRoaXMueGhyLnJlc3BvbnNlVGV4dCA6IG51bGwsIHRoaXMuc2V0U3RhdHVzUHJvcGVydGllcyh0aGlzLnhoci5zdGF0dXMpLCB0aGlzLmhlYWRlciA9IHRoaXMuaGVhZGVycyA9IGModGhpcy54aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpLCB0aGlzLmhlYWRlclsiY29udGVudC10eXBlIl0gPSB0aGlzLnhoci5nZXRSZXNwb25zZUhlYWRlcigiY29udGVudC10eXBlIiksIHRoaXMuc2V0SGVhZGVyUHJvcGVydGllcyh0aGlzLmhlYWRlciksIHRoaXMuYm9keSA9ICJIRUFEIiAhPSB0aGlzLnJlcS5tZXRob2QgPyB0aGlzLnBhcnNlQm9keSh0aGlzLnRleHQpIDogbnVsbAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaCh0LCBlKSB7CiAgICAgICAgICAgIHZhciBuID0gdGhpczsKICAgICAgICAgICAgZy5jYWxsKHRoaXMpLCB0aGlzLl9xdWVyeSA9IHRoaXMuX3F1ZXJ5IHx8IFtdLCB0aGlzLm1ldGhvZCA9IHQsIHRoaXMudXJsID0gZSwgdGhpcy5oZWFkZXIgPSB7fSwgdGhpcy5faGVhZGVyID0ge30sIHRoaXMub24oImVuZCIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIHQgPSBudWxsLAogICAgICAgICAgICAgICAgICAgIGUgPSBudWxsOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBlID0gbmV3IHAobikKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHsKICAgICAgICAgICAgICAgICAgICB0ID0gbmV3IEVycm9yKCJQYXJzZXIgaXMgdW5hYmxlIHRvIHBhcnNlIHRoZSByZXNwb25zZSIpLCB0LnBhcnNlID0gITAsIHQub3JpZ2luYWwgPSByCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBuLmNhbGxiYWNrKHQsIGUpCiAgICAgICAgICAgIH0pCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkKHQsIGUpIHsKICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgPyBuZXcgaCgiR0VUIiwgdCkuZW5kKGUpIDogMSA9PSBhcmd1bWVudHMubGVuZ3RoID8gbmV3IGgoIkdFVCIsIHQpIDogbmV3IGgodCwgZSkKICAgICAgICB9CiAgICAgICAgdmFyIGcgPSB0KCJlbWl0dGVyIiksCiAgICAgICAgICAgIHYgPSB0KCJyZWR1Y2UiKSwKICAgICAgICAgICAgeSA9ICJ1bmRlZmluZWQiID09IHR5cGVvZiB3aW5kb3cgPyB0aGlzIDogd2luZG93LAogICAgICAgICAgICBtID0gIiIudHJpbSA/IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0LnRyaW0oKQogICAgICAgICAgICB9IDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQucmVwbGFjZSgvKF5ccyp8XHMqJCkvZywgIiIpCiAgICAgICAgICAgIH07CiAgICAgICAgZC5zZXJpYWxpemVPYmplY3QgPSBzLCBkLnBhcnNlU3RyaW5nID0gdSwgZC50eXBlcyA9IHsKICAgICAgICAgICAgaHRtbDogInRleHQvaHRtbCIsCiAgICAgICAgICAgIGpzb246ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgeG1sOiAiYXBwbGljYXRpb24veG1sIiwKICAgICAgICAgICAgdXJsZW5jb2RlZDogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsCiAgICAgICAgICAgIGZvcm06ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLAogICAgICAgICAgICAiZm9ybS1kYXRhIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIKICAgICAgICB9LCBkLnNlcmlhbGl6ZSA9IHsKICAgICAgICAgICAgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCI6IHMsCiAgICAgICAgICAgICJhcHBsaWNhdGlvbi9qc29uIjogSlNPTi5zdHJpbmdpZnkKICAgICAgICB9LCBkLnBhcnNlID0gewogICAgICAgICAgICAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIjogdSwKICAgICAgICAgICAgImFwcGxpY2F0aW9uL2pzb24iOiBKU09OLnBhcnNlCiAgICAgICAgfSwgcC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJbdC50b0xvd2VyQ2FzZSgpXQogICAgICAgIH0sIHAucHJvdG90eXBlLnNldEhlYWRlclByb3BlcnRpZXMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHZhciBlID0gdGhpcy5oZWFkZXJbImNvbnRlbnQtdHlwZSJdIHx8ICIiOwogICAgICAgICAgICB0aGlzLnR5cGUgPSBsKGUpOwogICAgICAgICAgICB2YXIgbiA9IGYoZSk7CiAgICAgICAgICAgIGZvciAodmFyIHIgaW4gbikgdGhpc1tyXSA9IG5bcl0KICAgICAgICB9LCBwLnByb3RvdHlwZS5wYXJzZUJvZHkgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHZhciBlID0gZC5wYXJzZVt0aGlzLnR5cGVdOwogICAgICAgICAgICByZXR1cm4gZSAmJiB0ICYmIHQubGVuZ3RoID8gZSh0KSA6IG51bGwKICAgICAgICB9LCBwLnByb3RvdHlwZS5zZXRTdGF0dXNQcm9wZXJ0aWVzID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICB2YXIgZSA9IHQgLyAxMDAgfCAwOwogICAgICAgICAgICB0aGlzLnN0YXR1cyA9IHQsIHRoaXMuc3RhdHVzVHlwZSA9IGUsIHRoaXMuaW5mbyA9IDEgPT0gZSwgdGhpcy5vayA9IDIgPT0gZSwgdGhpcy5jbGllbnRFcnJvciA9IDQgPT0gZSwgdGhpcy5zZXJ2ZXJFcnJvciA9IDUgPT0gZSwgdGhpcy5lcnJvciA9IDQgPT0gZSB8fCA1ID09IGUgPyB0aGlzLnRvRXJyb3IoKSA6ICExLCB0aGlzLmFjY2VwdGVkID0gMjAyID09IHQsIHRoaXMubm9Db250ZW50ID0gMjA0ID09IHQgfHwgMTIyMyA9PSB0LCB0aGlzLmJhZFJlcXVlc3QgPSA0MDAgPT0gdCwgdGhpcy51bmF1dGhvcml6ZWQgPSA0MDEgPT0gdCwgdGhpcy5ub3RBY2NlcHRhYmxlID0gNDA2ID09IHQsIHRoaXMubm90Rm91bmQgPSA0MDQgPT0gdCwgdGhpcy5mb3JiaWRkZW4gPSA0MDMgPT0gdAogICAgICAgIH0sIHAucHJvdG90eXBlLnRvRXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzLnJlcSwKICAgICAgICAgICAgICAgIGUgPSB0Lm1ldGhvZCwKICAgICAgICAgICAgICAgIG4gPSB0LnVybCwKICAgICAgICAgICAgICAgIHIgPSAiY2Fubm90ICIgKyBlICsgIiAiICsgbiArICIgKCIgKyB0aGlzLnN0YXR1cyArICIpIiwKICAgICAgICAgICAgICAgIGkgPSBuZXcgRXJyb3Iocik7CiAgICAgICAgICAgIHJldHVybiBpLnN0YXR1cyA9IHRoaXMuc3RhdHVzLCBpLm1ldGhvZCA9IGUsIGkudXJsID0gbiwgaQogICAgICAgIH0sIGQuUmVzcG9uc2UgPSBwLCBnKGgucHJvdG90eXBlKSwgaC5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICByZXR1cm4gdCh0aGlzKSwgdGhpcwogICAgICAgIH0sIGgucHJvdG90eXBlLnRpbWVvdXQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aW1lb3V0ID0gdCwgdGhpcwogICAgICAgIH0sIGgucHJvdG90eXBlLmNsZWFyVGltZW91dCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fdGltZW91dCA9IDAsIGNsZWFyVGltZW91dCh0aGlzLl90aW1lciksIHRoaXMKICAgICAgICB9LCBoLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5hYm9ydGVkID8gdm9pZCAwIDogKHRoaXMuYWJvcnRlZCA9ICEwLCB0aGlzLnhoci5hYm9ydCgpLCB0aGlzLmNsZWFyVGltZW91dCgpLCB0aGlzLmVtaXQoImFib3J0IiksIHRoaXMpCiAgICAgICAgfSwgaC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICBpZiAoYSh0KSkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiB0KSB0aGlzLnNldChuLCB0W25dKTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hlYWRlclt0LnRvTG93ZXJDYXNlKCldID0gZSwgdGhpcy5oZWFkZXJbdF0gPSBlLCB0aGlzCiAgICAgICAgfSwgaC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHJldHVybiBkZWxldGUgdGhpcy5faGVhZGVyW3QudG9Mb3dlckNhc2UoKV0sIGRlbGV0ZSB0aGlzLmhlYWRlclt0XSwgdGhpcwogICAgICAgIH0sIGgucHJvdG90eXBlLmdldEhlYWRlciA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hlYWRlclt0LnRvTG93ZXJDYXNlKCldCiAgICAgICAgfSwgaC5wcm90b3R5cGUudHlwZSA9IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0KCJDb250ZW50LVR5cGUiLCBkLnR5cGVzW3RdIHx8IHQpLCB0aGlzCiAgICAgICAgfSwgaC5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5zZXQoIkFjY2VwdCIsIGQudHlwZXNbdF0gfHwgdCksIHRoaXMKICAgICAgICB9LCBoLnByb3RvdHlwZS5hdXRoID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICB2YXIgbiA9IGJ0b2EodCArICI6IiArIGUpOwogICAgICAgICAgICByZXR1cm4gdGhpcy5zZXQoIkF1dGhvcml6YXRpb24iLCAiQmFzaWMgIiArIG4pLCB0aGlzCiAgICAgICAgfSwgaC5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHJldHVybiAic3RyaW5nIiAhPSB0eXBlb2YgdCAmJiAodCA9IHModCkpLCB0ICYmIHRoaXMuX3F1ZXJ5LnB1c2godCksIHRoaXMKICAgICAgICB9LCBoLnByb3RvdHlwZS5maWVsZCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1EYXRhIHx8ICh0aGlzLl9mb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSksIHRoaXMuX2Zvcm1EYXRhLmFwcGVuZCh0LCBlKSwgdGhpcwogICAgICAgIH0sIGgucHJvdG90eXBlLmF0dGFjaCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1EYXRhIHx8ICh0aGlzLl9mb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSksIHRoaXMuX2Zvcm1EYXRhLmFwcGVuZCh0LCBlLCBuKSwgdGhpcwogICAgICAgIH0sIGgucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHZhciBlID0gYSh0KSwKICAgICAgICAgICAgICAgIG4gPSB0aGlzLmdldEhlYWRlcigiQ29udGVudC1UeXBlIik7CiAgICAgICAgICAgIGlmIChlICYmIGEodGhpcy5fZGF0YSkpCiAgICAgICAgICAgICAgICBmb3IgKHZhciByIGluIHQpIHRoaXMuX2RhdGFbcl0gPSB0W3JdOwogICAgICAgICAgICBlbHNlICJzdHJpbmciID09IHR5cGVvZiB0ID8gKG4gfHwgdGhpcy50eXBlKCJmb3JtIiksIG4gPSB0aGlzLmdldEhlYWRlcigiQ29udGVudC1UeXBlIiksICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiID09IG4gPyB0aGlzLl9kYXRhID0gdGhpcy5fZGF0YSA/IHRoaXMuX2RhdGEgKyAiJiIgKyB0IDogdCA6IHRoaXMuX2RhdGEgPSAodGhpcy5fZGF0YSB8fCAiIikgKyB0KSA6IHRoaXMuX2RhdGEgPSB0OwogICAgICAgICAgICByZXR1cm4gZSA/IChuIHx8IHRoaXMudHlwZSgianNvbiIpLCB0aGlzKSA6IHRoaXMKICAgICAgICB9LCBoLnByb3RvdHlwZS5jYWxsYmFjayA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgdmFyIG4gPSB0aGlzLl9jYWxsYmFjazsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xlYXJUaW1lb3V0KCksIDIgPT0gbi5sZW5ndGggPyBuKHQsIGUpIDogdCA/IHRoaXMuZW1pdCgiZXJyb3IiLCB0KSA6IHZvaWQgbihlKQogICAgICAgIH0sIGgucHJvdG90eXBlLmNyb3NzRG9tYWluRXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIHQgPSBuZXcgRXJyb3IoIk9yaWdpbiBpcyBub3QgYWxsb3dlZCBieSBBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4iKTsKICAgICAgICAgICAgdC5jcm9zc0RvbWFpbiA9ICEwLCB0aGlzLmNhbGxiYWNrKHQpCiAgICAgICAgfSwgaC5wcm90b3R5cGUudGltZW91dEVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5fdGltZW91dCwKICAgICAgICAgICAgICAgIGUgPSBuZXcgRXJyb3IoInRpbWVvdXQgb2YgIiArIHQgKyAibXMgZXhjZWVkZWQiKTsKICAgICAgICAgICAgZS50aW1lb3V0ID0gdCwgdGhpcy5jYWxsYmFjayhlKQogICAgICAgIH0sIGgucHJvdG90eXBlLndpdGhDcmVkZW50aWFscyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fd2l0aENyZWRlbnRpYWxzID0gITAsIHRoaXMKICAgICAgICB9LCBoLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHZhciBlID0gdGhpcywKICAgICAgICAgICAgICAgIG4gPSB0aGlzLnhociA9IG8oKSwKICAgICAgICAgICAgICAgIGEgPSB0aGlzLl9xdWVyeS5qb2luKCImIiksCiAgICAgICAgICAgICAgICBzID0gdGhpcy5fdGltZW91dCwKICAgICAgICAgICAgICAgIHUgPSB0aGlzLl9mb3JtRGF0YSB8fCB0aGlzLl9kYXRhOwogICAgICAgICAgICBpZiAodGhpcy5fY2FsbGJhY2sgPSB0IHx8IHIsIG4ub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQgPT0gbi5yZWFkeVN0YXRlID8gMCA9PSBuLnN0YXR1cyA/IGUuYWJvcnRlZCA/IGUudGltZW91dEVycm9yKCkgOiBlLmNyb3NzRG9tYWluRXJyb3IoKSA6IHZvaWQgZS5lbWl0KCJlbmQiKSA6IHZvaWQgMAogICAgICAgICAgICAgICAgfSwgbi51cGxvYWQgJiYgKG4udXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdC5wZXJjZW50ID0gdC5sb2FkZWQgLyB0LnRvdGFsICogMTAwLCBlLmVtaXQoInByb2dyZXNzIiwgdCkKICAgICAgICAgICAgICAgIH0pLCBzICYmICF0aGlzLl90aW1lciAmJiAodGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGUuYWJvcnQoKQogICAgICAgICAgICAgICAgfSwgcykpLCBhICYmIChhID0gZC5zZXJpYWxpemVPYmplY3QoYSksIHRoaXMudXJsICs9IH50aGlzLnVybC5pbmRleE9mKCI/IikgPyAiJiIgKyBhIDogIj8iICsgYSksIG4ub3Blbih0aGlzLm1ldGhvZCwgdGhpcy51cmwsICEwKSwgdGhpcy5fd2l0aENyZWRlbnRpYWxzICYmIChuLndpdGhDcmVkZW50aWFscyA9ICEwKSwgIkdFVCIgIT0gdGhpcy5tZXRob2QgJiYgIkhFQUQiICE9IHRoaXMubWV0aG9kICYmICJzdHJpbmciICE9IHR5cGVvZiB1ICYmICFpKHUpKSB7CiAgICAgICAgICAgICAgICB2YXIgYyA9IGQuc2VyaWFsaXplW3RoaXMuZ2V0SGVhZGVyKCJDb250ZW50LVR5cGUiKV07CiAgICAgICAgICAgICAgICBjICYmICh1ID0gYyh1KSkKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKHZhciBsIGluIHRoaXMuaGVhZGVyKSBudWxsICE9IHRoaXMuaGVhZGVyW2xdICYmIG4uc2V0UmVxdWVzdEhlYWRlcihsLCB0aGlzLmhlYWRlcltsXSk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmVtaXQoInJlcXVlc3QiLCB0aGlzKSwgbi5zZW5kKHUpLCB0aGlzCiAgICAgICAgfSwgZC5SZXF1ZXN0ID0gaCwgZC5nZXQgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgIHZhciByID0gZCgiR0VUIiwgdCk7CiAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlICYmIChuID0gZSwgZSA9IG51bGwpLCBlICYmIHIucXVlcnkoZSksIG4gJiYgci5lbmQobiksIHIKICAgICAgICB9LCBkLmhlYWQgPSBmdW5jdGlvbih0LCBlLCBuKSB7CiAgICAgICAgICAgIHZhciByID0gZCgiSEVBRCIsIHQpOwogICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSAmJiAobiA9IGUsIGUgPSBudWxsKSwgZSAmJiByLnNlbmQoZSksIG4gJiYgci5lbmQobiksIHIKICAgICAgICB9LCBkLmRlbCA9IGZ1bmN0aW9uKHQsIGUpIHsKICAgICAgICAgICAgdmFyIG4gPSBkKCJERUxFVEUiLCB0KTsKICAgICAgICAgICAgcmV0dXJuIGUgJiYgbi5lbmQoZSksIG4KICAgICAgICB9LCBkLnBhdGNoID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICB2YXIgciA9IGQoIlBBVENIIiwgdCk7CiAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlICYmIChuID0gZSwgZSA9IG51bGwpLCBlICYmIHIuc2VuZChlKSwgbiAmJiByLmVuZChuKSwgcgogICAgICAgIH0sIGQucG9zdCA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgdmFyIHIgPSBkKCJQT1NUIiwgdCk7CiAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlICYmIChuID0gZSwgZSA9IG51bGwpLCBlICYmIHIuc2VuZChlKSwgbiAmJiByLmVuZChuKSwgcgogICAgICAgIH0sIGQucHV0ID0gZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgICAgICB2YXIgciA9IGQoIlBVVCIsIHQpOwogICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSAmJiAobiA9IGUsIGUgPSBudWxsKSwgZSAmJiByLnNlbmQoZSksIG4gJiYgci5lbmQobiksIHIKICAgICAgICB9LCBlLmV4cG9ydHMgPSBkCiAgICB9LCB7CiAgICAgICAgZW1pdHRlcjogMTksCiAgICAgICAgcmVkdWNlOiAyMAogICAgfV0sCiAgICAxOTogW2Z1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICBmdW5jdGlvbiByKHQpIHsKICAgICAgICAgICAgcmV0dXJuIHQgPyBpKHQpIDogdm9pZCAwCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpKHQpIHsKICAgICAgICAgICAgZm9yICh2YXIgZSBpbiByLnByb3RvdHlwZSkgdFtlXSA9IHIucHJvdG90eXBlW2VdOwogICAgICAgICAgICByZXR1cm4gdAogICAgICAgIH0KICAgICAgICBlLmV4cG9ydHMgPSByLCByLnByb3RvdHlwZS5vbiA9IHIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge30sICh0aGlzLl9jYWxsYmFja3NbdF0gPSB0aGlzLl9jYWxsYmFja3NbdF0gfHwgW10pLnB1c2goZSksIHRoaXMKICAgICAgICB9LCByLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24odCwgZSkgewogICAgICAgICAgICBmdW5jdGlvbiBuKCkgewogICAgICAgICAgICAgICAgci5vZmYodCwgbiksIGUuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciByID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fSwgbi5mbiA9IGUsIHRoaXMub24odCwgbiksIHRoaXMKICAgICAgICB9LCByLnByb3RvdHlwZS5vZmYgPSByLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IHIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IHIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbih0LCBlKSB7CiAgICAgICAgICAgIGlmICh0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge30sIDAgPT0gYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRoaXMuX2NhbGxiYWNrcyA9IHt9LCB0aGlzOwogICAgICAgICAgICB2YXIgbiA9IHRoaXMuX2NhbGxiYWNrc1t0XTsKICAgICAgICAgICAgaWYgKCFuKSByZXR1cm4gdGhpczsKICAgICAgICAgICAgaWYgKDEgPT0gYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbdF0sIHRoaXM7CiAgICAgICAgICAgIGZvciAodmFyIHIsIGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIGlmIChyID0gbltpXSwgciA9PT0gZSB8fCByLmZuID09PSBlKSB7CiAgICAgICAgICAgICAgICAgICAgbi5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICB9LCByLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307CiAgICAgICAgICAgIHZhciBlID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLAogICAgICAgICAgICAgICAgbiA9IHRoaXMuX2NhbGxiYWNrc1t0XTsKICAgICAgICAgICAgaWYgKG4pIHsKICAgICAgICAgICAgICAgIG4gPSBuLnNsaWNlKDApOwogICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDAsIGkgPSBuLmxlbmd0aDsgaSA+IHI7ICsrcikgbltyXS5hcHBseSh0aGlzLCBlKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgfSwgci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9LCB0aGlzLl9jYWxsYmFja3NbdF0gfHwgW10KICAgICAgICB9LCByLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHJldHVybiAhIXRoaXMubGlzdGVuZXJzKHQpLmxlbmd0aAogICAgICAgIH0KICAgIH0sIHt9XSwKICAgIDIwOiBbZnVuY3Rpb24odCwgZSwgbikgewogICAgICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHQsIGUsIG4pIHsKICAgICAgICAgICAgZm9yICh2YXIgciA9IDAsIGkgPSB0Lmxlbmd0aCwgbyA9IDMgPT0gYXJndW1lbnRzLmxlbmd0aCA/IG4gOiB0W3IrK107IGkgPiByOykgbyA9IGUuY2FsbChudWxsLCBvLCB0W3JdLCArK3IsIHQpOwogICAgICAgICAgICByZXR1cm4gbwogICAgICAgIH0KICAgIH0sIHt9XQp9LCB7fSwgWzFdKTsK]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 09:48:49 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/js/s_code.js.pagespeed.jm.I78cfHQpbQ.js]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/js/s_code.js.pagespeed.jm.I78cfHQpbQ.js]]></path>
    <extension>js</extension>
    <request base64="true"><![CDATA[R0VUIC9qcy9zX2NvZGUuanMucGFnZXNwZWVkLmptLkk3OGNmSFFwYlEuanMgSFRUUC8xLjENCkhvc3Q6IDEwLjEwLjEwLjE4DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBydjo2OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzY4LjANCkFjY2VwdDogKi8qDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC41DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkROVDogMQ0KQ29ubmVjdGlvbjogY2xvc2UNClJlZmVyZXI6IGh0dHA6Ly8xMC4xMC4xMC4xOC8NCkNvb2tpZTogc19jYz10cnVlOyBzX2ZpZD0xRDg3QzRDNUYxRkRENTE5LTIxODlGN0FEMDhCODVDMkU7IHNfbnI9MTU5MDYzNzEzOTAwMDsgc19zcT0lNUIlNUJCJTVEJTVEDQoNCg==]]></request>
    <status>200</status>
    <responselength>50918</responselength>
    <mimetype>script</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA0OjE4OjQ4IEdNVA0KU2VydmVyOiBBcGFjaGUNClgtRnJhbWUtT3B0aW9uczogU0FNRU9SSUdJTg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkV4cGlyZXM6IEZyaSwgMjggTWF5IDIwMjEgMDQ6MTg6NDggR01UDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTMxNTM2MDAwDQpFdGFnOiBXLyIwLWd6aXAiDQpMYXN0LU1vZGlmaWVkOiBUaHUsIDI4IE1heSAyMDIwIDA0OjE4OjQ4IEdNVA0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpDb250ZW50LUxlbmd0aDogNTA1NTUNCkNvbm5lY3Rpb246IGNsb3NlDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCg0KZnVuY3Rpb24gdXNhX2RldGVjdEN1cnJlbnREZXZpY2UoKXt2YXIgYWdlbnQ9bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO3ZhciBzY3JXaWR0aD1zY3JlZW4ud2lkdGg7dmFyIHNjckhlaWdodD1zY3JlZW4uaGVpZ2h0O3ZhciBlbGVtV2lkdGg9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO3ZhciBlbGVtSGVpZ2h0PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7dmFyIG90aGVyQnJvd3Nlcj0oYWdlbnQuaW5kZXhPZigic2VyaWVzNjAiKSE9LTEpfHwoYWdlbnQuaW5kZXhPZigic3ltYmlhbiIpIT0tMSl8fChhZ2VudC5pbmRleE9mKCJ3aW5kb3dzIGNlIikhPS0xKXx8KGFnZW50LmluZGV4T2YoImJsYWNrYmVycnkiKSE9LTEpO3ZhciBtb2JpbGVPUz10eXBlb2Ygb3JpZW50YXRpb24hPSd1bmRlZmluZWQnP3RydWU6ZmFsc2U7dmFyIHRvdWNoT1M9KCdvbnRvdWNoc3RhcnQnaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KT90cnVlOmZhbHNlO3ZhciBpT1M9KChuYXZpZ2F0b3IucGxhdGZvcm0pLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiaXBob25lIikhPS0xKXx8KChuYXZpZ2F0b3IucGxhdGZvcm0pLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiaXBhZCIpIT0tMSl8fCgobmF2aWdhdG9yLnBsYXRmb3JtKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImlwb2QiKSE9LTEpfHwoKGFnZW50KS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImlwaG9uZSIpIT0tMSl8fCgoYWdlbnQpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiaXBvZCIpIT0tMSl8fCgoYWdlbnQpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiaXBhZCIpIT0tMSk/dHJ1ZTpmYWxzZTt2YXIgYW5kcm9pZD0oYWdlbnQuaW5kZXhPZigiYW5kcm9pZCIpIT0tMSl8fCghaU9TJiYhb3RoZXJCcm93c2VyJiZ0b3VjaE9TJiZtb2JpbGVPUyk/dHJ1ZTpmYWxzZTt2YXIgc21hcnRwaG9uZT1mYWxzZTt2YXIgbW9iaWxlRGV2aWNlPShpT1N8fGFuZHJvaWR8fG1vYmlsZU9TfHx0b3VjaE9TfHxvdGhlckJyb3dzZXIpP3RydWU6ZmFsc2U7dmFyIHNtYXJ0cGhvbmVXaWR0aFRocmVzaG9sZD03Njg7dmFyIGJXPXdpbmRvdy5pbm5lcldpZHRoO3ZhciBiSD13aW5kb3cuaW5uZXJIZWlnaHQ7aWYod2luZG93LmlubmVyV2lkdGgmJndpbmRvdy5pbm5lckhlaWdodCkKe2lmKGJXPHNtYXJ0cGhvbmVXaWR0aFRocmVzaG9sZCYmbW9iaWxlRGV2aWNlKQp7c21hcnRwaG9uZT10cnVlO319CnJldHVybntvdGhlckJyb3dzZXI6b3RoZXJCcm93c2VyLG1vYmlsZU9TOm1vYmlsZU9TLHRvdWNoT1M6dG91Y2hPUyxpT1M6aU9TLGFuZHJvaWQ6YW5kcm9pZCxtb2JpbGVEZXZpY2U6bW9iaWxlRGV2aWNlLHNtYXJ0cGhvbmU6c21hcnRwaG9uZX19CnZhciB1c2FfZGV2aWNlSW5mbz11c2FfZGV0ZWN0Q3VycmVudERldmljZSgpO3ZhciBzX2RvbWFpbj13aW5kb3cuZG9jdW1lbnQubG9jYXRpb24uaG9zdDtpZigoc19kb21haW4uaW5kZXhPZigiZGV2IikhPS0xKXx8KHNfZG9tYWluLmluZGV4T2YoImJldGEiKSE9LTEpfHwoc19kb21haW4uaW5kZXhPZigidGVzdCIpIT0tMSl8fChzX2RvbWFpbi5pbmRleE9mKCJzdGFnZSIpIT0tMSl8fChzX2RvbWFpbi5pbmRleE9mKCJsb2NhbCIpIT0tMSl8fChzX2RvbWFpbi5pbmRleE9mKCJlZGl0IikhPS0xKXx8KHNfZG9tYWluLmluZGV4T2YoInFhIikhPS0xKXx8KHNfZG9tYWluLmluZGV4T2YoInNlY29uZHNjcmVlbnRyaXZpYSIpIT0tMSkpe3NfYWNjb3VudD0ibmJjdXVzYW5ldHdvcmtkZGV2Ijt9CmVsc2V7c19hY2NvdW50PSJuYmN1Z2xvYmFsLG5iY3V1c2FuZXR3b3JrZCI7fQp2YXIgcz1zX2dpKHNfYWNjb3VudCwxKQpzLmNoYXJTZXQ9IklTTy04ODU5LTEiCnMuY3VycmVuY3lDb2RlPSJVU0QiCnMudHJhY2tEb3dubG9hZExpbmtzPXRydWUKcy50cmFja0V4dGVybmFsTGlua3M9dHJ1ZQpzLnRyYWNrSW5saW5lU3RhdHM9dHJ1ZQpzLmxpbmtJbnRlcm5hbEZpbHRlcnM9ImphdmFzY3JpcHQ6LHVzYW5ldHdvcmsuY29tLGNoYXJhY3RlcmJyYW5kd29ya3MuY29tLGNoYXJhY3RlcnN1bml0ZS5jb20sY2hhcmFjdGVyYmxvZy5jb20sc3VpdHNvbmNhbXB1cy5jb20sd2VzdG1pbnN0ZXJrZW5uZWxjbHViLm9yZyxodGsyLnRoZWF0cmljcy5jb20sc2Ftc3VuZy5jb20sdHdpdHRlci5jb20vaW50ZW50LHdob2lzbXJyb2JvdCI7cy5saW5rRG93bmxvYWRGaWxlVHlwZXM9ImV4ZSx6aXAsd2F2LG1wMyxtb3YsbXBnLGF2aSx3bXYsZG9jLHBkZix4bHMsZ2lmLGpwZyIKcy5saW5rTGVhdmVRdWVyeVN0cmluZz10cnVlCnMubGlua1RyYWNrVmFycz0iTm9uZSIKcy5saW5rVHJhY2tFdmVudHM9Ik5vbmUiCnMuZGVmYXVsdFBhZ2U9ImluZGV4Lmh0bWwiCnMudXNlUGx1Z2lucz10cnVlCmZ1bmN0aW9uIHNfZG9QbHVnaW5zKHMpe2lmKHMuZ2V0UXVlcnlQYXJhbSgnYXBwdmknKSl7cy5uZXdfdmlfZGF0ZT1uZXcgRGF0ZTtzLm5ld192aV9kYXRlLnNldEZ1bGxZZWFyKHMubmV3X3ZpX2RhdGUuZ2V0RnVsbFllYXIoKSs1KTtzLmNfdygnYXBwX3ZpJyxzLmdldFF1ZXJ5UGFyYW0oJ2FwcHZpJykscy5uZXdfdmlfZGF0ZSk7cy52aXNpdG9ySUQ9cy5jX3IoJ2FwcF92aScpO30KZWxzZSBpZihzLmNfcignYXBwX3ZpJykpe3MudmlzaXRvcklEPXMuY19yKCdhcHBfdmknKTt9CmlmKHMub3VuLm1hdGNoKCduYmN1Y2FibGVkJyl8fHMub3VuLm1hdGNoKCduYmN1dXNhbmV0YnUnKSl7cy5zYSgnbmJjdWdsb2JhbCxuYmN1dXNhbmV0d29ya2QnKTt9CmlmKGRvY3VtZW50LlVSTC5tYXRjaCgnY2hhcmFjdGVyYnJhbmR3b3Jrcy5jb20nKSl7cy50cmFja0Rvd25sb2FkTGlua3M9ZmFsc2V9CmlmKHR5cGVvZihidW5jaGJhbGxfbml0cm9faWQpIT0ndW5kZWZpbmVkJyl7cy52aXNpdG9ySUQ9YnVuY2hiYWxsX25pdHJvX2lkO30Kcy5jYW1wYWlnbj1zLmdldFF1ZXJ5UGFyYW0oJ2NpZCcpO3MuY2FtcGFpZ249cy5nZXRWYWxPbmNlKHMuY2FtcGFpZ24sJ3NfY2FtcGFpZ25fZ3ZvJyk7cy5lVmFyMzA9cy5nZXRRdWVyeVBhcmFtKCdjaWQsY2FtcGFpZ24sX19zb3VyY2UnLCc6Jyk7cy5lVmFyMzA9cy5nZXRWYWxPbmNlKHMuZVZhcjMwLCdzX2VWYXIzMF9ndm8nKTtzLmVWYXI3PXMuZ2V0UXVlcnlQYXJhbSgnaWNpZCcpO3MuZVZhcjc9cy5nZXRWYWxPbmNlKHMuZVZhcjcsJ3NfZVZhcjdfZ3ZvJyk7cy5zZXJ2ZXI9d2luZG93LmxvY2F0aW9uLmhvc3QudG9Mb3dlckNhc2UoKTtpZighcy5wYWdlVHlwZSYmIXMucGFnZU5hbWUpe3MucGFnZU5hbWU9cy5nZXRQYWdlTmFtZSgpO30KaWYodHlwZW9mKHVzYV9jbHViT21uaXR1cmVQcm9wMSkhPSd1bmRlZmluZWQnKXtzLnByb3AxPXVzYV9jbHViT21uaXR1cmVQcm9wMX0Kcy5wcm9wMT1zLmdldEFuZFBlcnNpc3RWYWx1ZShzLnByb3AxLCdzX3BycDEnKTtzLnByb3A2PXVuZXNjYXBlKHVuZXNjYXBlKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSk7cy5wcm9wMTE9cy5wcm9wMTArIiB8ICIrcy5wYWdlTmFtZTtzLnByb3AxMj1zLnByb3A5KyIgfCAiK3MucHJvcDEwO3MucHJvcDEzPXMuZ2V0TmV3UmVwZWF0KCk7aWYocy5lVmFyNjgpe3MucHJvcDMyPSJOZXcgU2l0ZSJ9O2lmKHMucHJvcDYubWF0Y2goJ2lmcmFtZScpKXtzLnByb3AzMj0iTmV3IFNpdGUifTtzLmVWYXIxNj1zLmdldFF1ZXJ5UGFyYW0oImhjb3JlZiIpO3MuZVZhcjIwPXMuZ2V0UXVlcnlQYXJhbSgiZHN0Iik7cy5lVmFyMjM9cy5nZXRRdWVyeVBhcmFtKCJwYXIiKTtzLmVWYXIyND1zLmdldFF1ZXJ5UGFyYW0oIm8iKTtpZihzLnByb3AzKXtzLmVWYXIzMj1zLnByb3AzO30KaWYocy5wcm9wNCl7cy5lVmFyND0iRD1jNCI7fQppZihzLnByb3AxMCl7cy5lVmFyMTA9IkQ9YzEwIjt9CmlmKHMucHJvcDYpe3MuZVZhcjQzPXMucHJvcDY7fQppZihzLnByb3A4KXtzLmVWYXI4PXMucHJvcDg7fQppZihzLnByb3A5KXtzLmVWYXI0NT1zLnByb3A5O30KaWYocy5wYWdlTmFtZSl7cy5lVmFyOT1zLnBhZ2VOYW1lO30KaWYocy5lVmFyNTUpe3MucHJvcDU1PSJEPXY1NSI7fQppZihzLmVWYXI1Nil7cy5wcm9wNTY9IkQ9djU2Ijt9CmlmKHMuZVZhcjU3KXtzLnByb3A1Nz0iRD12NTciO30Kcy5ldmVudHM9cy5hcGwocy5ldmVudHMsJ2V2ZW50NicsJywnLDEpO2lmKCh0eXBlb2Yocy5wcm9wMik9PSd1bmRlZmluZWQnKXx8KHMucHJvcDI9PScnKSl7c3Byb3AyPSdtaXNjZWxsYW5lb3VzJ31lbHNle3Nwcm9wMj1zLnByb3AyfQppZigodHlwZW9mKHMucHJvcDMpPT0ndW5kZWZpbmVkJyl8fChzLnByb3AzPT0nJykpe3Nwcm9wMz0nbWlzY2VsbGFuZW91cyd9ZWxzZXtzcHJvcDM9cy5wcm9wM30KaWYoKHR5cGVvZihzLnByb3A0KT09J3VuZGVmaW5lZCcpfHwocy5wcm9wND09JycpKXtzcHJvcDQ9J21pc2NlbGxhbmVvdXMnfWVsc2V7c3Byb3A0PXMucHJvcDR9CmlmKCh0eXBlb2Yocy5wcm9wMTApPT0ndW5kZWZpbmVkJyl8fChzLnByb3AxMD09JycpKXtzcHJvcDEwPSdtaXNjZWxsYW5lb3VzJ31lbHNle3Nwcm9wMTA9cy5wcm9wMTB9CnMuaGllcjE9cy5wcm9wOCsnfCcrcy5wcm9wOSsnfCcrcy5wcm9wMTA7cy5oaWVyMj1zcHJvcDIrJ3wnK3Nwcm9wMTArJ3wnK3Nwcm9wMysnfCcrc3Byb3A0O3MuaGllcjM9c2V0X2gzKCk7cy5leGl0PXMuZXhpdExpbmtIYW5kbGVyKCk7aWYoKHMuZXhpdC5pbmRleE9mKCJkb3VibGUiKT4tMSkmJmRvY3VtZW50LlVSTC5tYXRjaCgnY2xhc3NhY3Rpb24nKSkKe2NvbnNvbGUubG9nKCdkb3VibGUgZXhpdCBvbiBjbGFzc2FjdGlvbicpO3MudHJhY2tFeHRlcm5hbExpbmtzPWZhbHNlO30KaWYocy5leGl0LmluZGV4T2YoImV2ci5zdCIpPi0xKXtzLmxpbmtUcmFja1ZhcnM9InByb3AzMSI7cy5wcm9wMzE9IkV2ZXJlc3QgRXhpdCBMaW5rIjtzLmxpbmtOYW1lPSJFdmVyZXN0IEV4aXQgTGluayI7fQppZihzLmV4aXQuaW5kZXhPZigiZmFjZWJvb2suY29tL1RoZU1vbWVudFVTQSIpPi0xKXtzLmxpbmtUcmFja1ZhcnM9ImV2ZW50cyxlVmFyNzQiO3MubGlua1RyYWNrRXZlbnRzPXMuZXZlbnRzPSJldmVudDQxIjtzLmVWYXI3ND0iRmFjZWJvb2siO3MubGlua05hbWU9IlNvY2lhbCBTaGFyZSI7fQppZihzLmV4aXQuaW5kZXhPZigidHdpdHRlci5jb20vVGhlTW9tZW50X1VTQSIpPi0xKXtzLmxpbmtUcmFja1ZhcnM9ImV2ZW50cyxlVmFyNzQiO3MubGlua1RyYWNrRXZlbnRzPXMuZXZlbnRzPSJldmVudDQxIjtzLmVWYXI3ND0iVHdpdHRlciI7cy5saW5rTmFtZT0iU29jaWFsIFNoYXJlIjt9CmlmKHMuZXhpdC5pbmRleE9mKCIyNzY0NiIpPi0xKXtzLmxpbmtUcmFja1ZhcnM9InByb3AzMSI7cy5wcm9wMzE9Ik1vZGVybiBGYW1pbHkgOiBGYW1DYW0gOiBUYXJnZXQgRXhpdCBMaW5rIjtzLmxpbmtOYW1lPSJNb2Rlcm4gRmFtaWx5IDogRmFtQ2FtIDogVGFyZ2V0IEV4aXQgTGluayI7fQppZihzLmV4aXQuaW5kZXhPZigic2hhcmU/Y2hhbm5lbD1mYWNlYm9vay1zaGFyZSIpPi0xKXtzLmxpbmtUcmFja1ZhcnM9J2V2ZW50cyxlVmFyNzQnO3MubGlua1RyYWNrRXZlbnRzPXMuZXZlbnRzPSdldmVudDQxJztzLmVWYXI3ND0nRmFjZWJvb2snO3MubWFuYWdlVmFycygnY2xlYXJWYXJzJyxzLmxpbmtUcmFja1ZhcnMsMSk7fQppZihzLmV4aXQuaW5kZXhPZigic2hhcmU/Y2hhbm5lbD10d2l0dGVyIik+LTEpe3MubGlua1RyYWNrVmFycz0nZXZlbnRzLGVWYXI3NCc7cy5saW5rVHJhY2tFdmVudHM9cy5ldmVudHM9J2V2ZW50NDEnO3MuZVZhcjc0PSdUd2l0dGVyJztzLm1hbmFnZVZhcnMoJ2NsZWFyVmFycycscy5saW5rVHJhY2tWYXJzLDEpO30KaWYocy5leGl0LmluZGV4T2YoIjI3NDIwODk1NTs5OTk4NDE0MjtiIik+LTEpe3MubGlua1RyYWNrVmFycz0ncHJvcDMxJztzLnByb3AzMT0nTGV4dXMgRXhpdCBMaW5rJzt9CmlmKHR5cGVvZiBzIT0ndW5kZWZpbmVkJyl7aWYodHlwZW9mKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCkhPSd1bmRlZmluZWQnKXt1c2FfY3c9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO2lmKHVzYV9jdzw9NjQ0KXtzLmVWYXI2OD11c2FfZGV2aWNlSW5mby5tb2JpbGVEZXZpY2U/J1NtYXJ0cGhvbmUgUG9ydHJhaXQnOidEZXNrdG9wJzt9ZWxzZSBpZih1c2FfY3c+PTY0NSYmdXNhX2N3PD05NTkpe3MuZVZhcjY4PXVzYV9kZXZpY2VJbmZvLm1vYmlsZURldmljZT8nVGFibGV0IFBvcnRyYWl0JzonRGVza3RvcCc7fWVsc2UgaWYodXNhX2N3Pj05NjAmJnVzYV9jdzw9MTI3NCl7cy5lVmFyNjg9dXNhX2RldmljZUluZm8ubW9iaWxlRGV2aWNlPydUYWJsZXQgTGFuZHNjYXBlJzonRGVza3RvcCc7fWVsc2UgaWYodXNhX2N3Pj0xMjc1KXtzLmVWYXI2OD0nRGVza3RvcCBMYXJnZSc7fX0Kcy5lVmFyNjk9dHlwZW9mKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpIT0ndW5kZWZpbmVkJz9kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OicnO3MuZVZhcjcwPXR5cGVvZihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpIT0ndW5kZWZpbmVkJz9kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg6Jyc7aWYodXNhX2RldmljZUluZm8ubW9iaWxlRGV2aWNlJiZ1c2FfZGV2aWNlSW5mby5zbWFydHBob25lKXtzLmVWYXI3MT0nU21hcnRwaG9uZSc7fWVsc2UgaWYodXNhX2RldmljZUluZm8ubW9iaWxlRGV2aWNlJiYhdXNhX2RldmljZUluZm8uc21hcnRwaG9uZSl7cy5lVmFyNzE9J1RhYmxldCc7fWVsc2V7cy5lVmFyNzE9J0Rlc2t0b3AnO319CnZhciBrcj1kb2N1bWVudC5yZWZlcnJlcixraz1zLmdldFF1ZXJ5UGFyYW0oInEiLCIiLGtyKSxrcz1zLmdldFF1ZXJ5UGFyYW0oImVzcmMiLCIiLGtyKTtpZihrci5pbmRleE9mKCJ3d3cuZ29vZ2xlLmNvbSIpJiYha2smJmtzPT0icyIpe3ZhciBrc3I9a3Iuc3BsaXQoInE9Iiksa3E9InE9R29vZ2xlJTIwU2VjdXJlJTIwU2VhcmNoIjtzLnJlZmVycmVyPWtzclswXStrcStrc3JbMV19O2lmKHMuZVZhcjY4KXtzLnByb3A2OD0iRD12NjgifTtpZihzLmVWYXI2OSl7cy5wcm9wNjk9IkQ9djY5In07aWYocy5lVmFyNzApe3MucHJvcDcwPSJEPXY3MCJ9O2lmKHMuZVZhcjcxKXtzLnByb3A3MT0iRD12NzEifTtpZihzLmVWYXI3Mil7cy5wcm9wNzI9IkQ9djcyIn07fQpzLmRvUGx1Z2lucz1zX2RvUGx1Z2lucwpzLmdldFF1ZXJ5UGFyYW09bmV3IEZ1bmN0aW9uKCJwIiwiZCIsInUiLCIiKyJ2YXIgcz10aGlzLHY9JycsaSx0O2Q9ZD9kOicnO3U9dT91OihzLnBhZ2VVUkw/cy5wYWdlVVJMOnMud2QubG9jYXRpIisib24pO2lmKHU9PSdmJyl1PXMuZ3RmcygpLmxvY2F0aW9uO3doaWxlKHApe2k9cC5pbmRleE9mKCcsJyk7aT1pPDA/cCIrIi5sZW5ndGg6aTt0PXMucF9ncHYocC5zdWJzdHJpbmcoMCxpKSx1KycnKTtpZih0KXt0PXQuaW5kZXhPZignIycpPi0iKyIxP3Quc3Vic3RyaW5nKDAsdC5pbmRleE9mKCcjJykpOnQ7fWlmKHQpdis9dj9kK3Q6dDtwPXAuc3Vic3RyaW5nKGk9IisiPXAubGVuZ3RoP2k6aSsxKX1yZXR1cm4gdiIpO3MucF9ncHY9bmV3IEZ1bmN0aW9uKCJrIiwidSIsIiIrInZhciBzPXRoaXMsdj0nJyxpPXUuaW5kZXhPZignPycpLHE7aWYoayYmaT4tMSl7cT11LnN1YnN0cmluZyhpKzEpO3YiKyI9cy5wdChxLCcmJywncF9ndmYnLGspfXJldHVybiB2Iik7cy5wX2d2Zj1uZXcgRnVuY3Rpb24oInQiLCJrIiwiIisiaWYodCl7dmFyIHM9dGhpcyxpPXQuaW5kZXhPZignPScpLHA9aTwwP3Q6dC5zdWJzdHJpbmcoMCxpKSx2PWk8MD8nVCIrInJ1ZSc6dC5zdWJzdHJpbmcoaSsxKTtpZihwLnRvTG93ZXJDYXNlKCk9PWsudG9Mb3dlckNhc2UoKSlyZXR1cm4gcy4iKyJlcGEodil9cmV0dXJuICcnIik7cy5nZXRWYWxPbmNlPW5ldyBGdW5jdGlvbigidiIsImMiLCJlIiwidCIsIiIrInZhciBzPXRoaXMsYT1uZXcgRGF0ZSx2PXY/djonJyxjPWM/Yzonc19ndm8nLGU9ZT9lOjAsaT10PT0nbSc/NjAwMCIrIjA6ODY0MDAwMDAsaz1zLmNfcihjKTtpZih2KXthLnNldFRpbWUoYS5nZXRUaW1lKCkrZSppKTtzLmNfdyhjLHYsZSIrIj09MD8wOmEpO31yZXR1cm4gdj09az8nJzp2Iik7cy5nZXROZXdSZXBlYXQ9bmV3IEZ1bmN0aW9uKCIiKyJ2YXIgcz10aGlzLGU9bmV3IERhdGUoKSxjdmFsLGN0PWUuZ2V0VGltZSgpLHk9ZS5nZXRZZWFyKCk7ZS5zZXRUaW1lIisiKGN0KzMwKjI0KjYwKjYwKjEwMDApO2N2YWw9cy5jX3IoJ3NfbnInKTtpZihjdmFsLmxlbmd0aD09MCl7cy5jX3coIisiJ3NfbnInLGN0LGUpO3JldHVybiAnTmV3Jzt9aWYoY3ZhbC5sZW5ndGghPTAmJmN0LWN2YWw8MzAqNjAqMTAwMCl7cyIrIi5jX3coJ3NfbnInLGN0LGUpO3JldHVybiAnTmV3Jzt9aWYoY3ZhbDwxMTIzOTE2NDAwMDAxKXtlLnNldFRpbWUoY3YiKyJhbCszMCoyNCo2MCo2MCoxMDAwKTtzLmNfdygnc19ucicsY3QsZSk7cmV0dXJuICdSZXBlYXQnO31lbHNlIHJldHVyIisibiAnUmVwZWF0JzsiKTtzLmlhPW5ldyBGdW5jdGlvbigiYXIiLCJ2IiwiIisiZm9yKHZhciBpPTA7aTxhci5sZW5ndGg7aSsrKXtpZihhcltpXT09dilyZXR1cm4gaX1yZXR1cm4gLTEiKTtzLmdldFBhZ2VOYW1lPW5ldyBGdW5jdGlvbigidSIsIiIrInZhciBzPXRoaXMsdj11P3U6Jycrcy53ZC5sb2NhdGlvbix4PXYuaW5kZXhPZignOicpLHk9di5pbmRleE9mKCcvJywiKyJ4KzQpLHo9di5pbmRleE9mKCc/JyksYz1zLnBhdGhDb25jYXREZWxpbSxlPXMucGF0aEV4Y2x1ZGVEZWxpbSxnPXMuIisicXVlcnlWYXJzTGlzdCxkPXMuc2l0ZUlELG49ZD9kOicnLHE9ejwwPycnOnYuc3Vic3RyaW5nKHorMSkscD12LnN1YiIrInN0cmluZyh5KzEscT96OnYubGVuZ3RoKTt6PXAuaW5kZXhPZignIycpO3A9ejwwP3A6cy5mbChwLHopO3g9ZT9wLmkiKyJuZGV4T2YoZSk6LTE7cD14PDA/cDpzLmZsKHAseCk7cCs9IXB8fHAuY2hhckF0KHAubGVuZ3RoLTEpPT0nLyc/cy5kIisiZWZhdWx0UGFnZTonJzt5PWM/YzonLyc7d2hpbGUocCl7eD1wLmluZGV4T2YoJy8nKTt4PXg8MD9wLmxlbmd0aDp4OyIrIno9cy5mbChwLHgpO2lmKCFzLnB0KHMucGF0aEV4Y2x1ZGVMaXN0LCcsJywncF9jJyx6KSluKz1uP3krejp6O3A9cC4iKyJzdWJzdHJpbmcoeCsxKX15PWM/YzonPyc7d2hpbGUoZyl7eD1nLmluZGV4T2YoJywnKTt4PXg8MD9nLmxlbmd0aDp4IisiO3o9cy5mbChnLHgpO3o9cy5wdChxLCcmJywncF9jJyx6KTtpZih6KXtuKz1uP3krejp6O3k9Yz9jOicmJ31nPWcucyIrInVic3RyaW5nKHgrMSl9cmV0dXJuIG4iKTtzLmxpbmtIYW5kbGVyPW5ldyBGdW5jdGlvbigicCIsInQiLCIiKyJ2YXIgcz10aGlzLGg9cy5wX2doKCksaSxsO3Q9dD90OidvJztpZighaHx8KHMubGlua1R5cGUmJihofHxzLmxpbmtOIisiYW1lKSkpcmV0dXJuICcnO2k9aC5pbmRleE9mKCc/Jyk7aD1zLmxpbmtMZWF2ZVF1ZXJ5U3RyaW5nfHxpPDA/aDpoLiIrInN1YnN0cmluZygwLGkpO2w9cy5wdChwLCd8JywncF9nbicsaC50b0xvd2VyQ2FzZSgpKTtpZihsKXtzLmxpbmtOYW0iKyJlPWw9PSdbWyc/Jyc6bDtzLmxpbmtUeXBlPXQ7cmV0dXJuIGg7fXJldHVybiAnJzsiKTtzLnBfZ249bmV3IEZ1bmN0aW9uKCJ0IiwiaCIsIiIrInZhciBpPXQ/dC5pbmRleE9mKCd+Jyk6LTEsbix4O2lmKHQmJmgpe249aTwwPycnOnQuc3Vic3RyaW5nKDAsaSk7eD0iKyJ0LnN1YnN0cmluZyhpKzEpO2lmKGguaW5kZXhPZih4LnRvTG93ZXJDYXNlKCkpPi0xKXJldHVybiBuP246J1tbJzt9IisicmV0dXJuIDA7Iik7cy5leGl0TGlua0hhbmRsZXI9bmV3IEZ1bmN0aW9uKCJwIiwiZSIsIiIrInZhciBzPXRoaXMsbz1zLnBfZ2goKSxoPW8uaHJlZixuPSdsaW5rSW50ZXJuYWxGaWx0ZXJzJyxpLHQ7aWYoIWh8fCgiKyJzLmxpbmtUeXBlJiYoaHx8cy5saW5rTmFtZSkpKXJldHVybicnO2k9aC5pbmRleE9mKCc/Jyk7dD1zW25dO3Nbbl09IisicD9wOnQ7aD1zLmxpbmtMZWF2ZVF1ZXJ5U3RyaW5nfHxpPDA/aDpoLnN1YnN0cmluZygwLGkpO2lmKHMubHQoaCk9PSIrIidlJylzLmxpbmtUeXBlPSdlJztlbHNlIGg9Jyc7c1tuXT10O3JldHVybiBlP286aDsiKTtzLnBfZ2g9bmV3IEZ1bmN0aW9uKCIiLCIiKyJ2YXIgcz10aGlzO2lmKCFzLmVvJiYhcy5sbmspcmV0dXJuJyc7dmFyIG89cy5lbz9zLmVvOnMubG5rLHk9cy5vdChvIisiKSxuPXMub2lkKG8pLHg9by5zX29pZHQ7aWYocy5lbyYmbz09cy5lbyl7d2hpbGUobyYmIW4mJnkhPSdCT0RZJyl7byIrIj1vLnBhcmVudEVsZW1lbnQ/by5wYXJlbnRFbGVtZW50Om8ucGFyZW50Tm9kZTtpZighbylyZXR1cm4nJzt5PXMub3QiKyIobyk7bj1zLm9pZChvKTt4PW8uc19vaWR0O319cmV0dXJuIG8/bzonJzsiKTtzLm1hbmFnZVZhcnM9bmV3IEZ1bmN0aW9uKCJjIiwibCIsImYiLCIiKyJ2YXIgcz10aGlzLHZsLGxhLHZsYTtsPWw/bDonJztmPWY/ZjoxIDtpZighc1tjXSlyZXR1cm4gZmFsc2U7dmw9J3BhIisiZ2VOYW1lLHB1cmNoYXNlSUQsY2hhbm5lbCxzZXJ2ZXIscGFnZVR5cGUsY2FtcGFpZ24sc3RhdGUsemlwLGV2ZW50cyIrIixwcm9kdWN0cyx0cmFuc2FjdGlvbklEJztmb3IodmFyIG49MTtuPDc2O24rKyl7dmwrPScscHJvcCcrbisnLGVWYXIiKyInK24rJyxoaWVyJytuO31pZihsJiYoZj09MXx8Zj09Mikpe2lmKGY9PTEpe3ZsPWw7fWlmKGY9PTIpe2xhPXMuc3BsIisiaXQobCwnLCcpO3ZsYT1zLnNwbGl0KHZsLCcsJyk7dmw9Jyc7Zm9yKHggaW4gbGEpe2Zvcih5IGluIHZsYSl7aWYobCIrImFbeF09PXZsYVt5XSl7dmxhW3ldPScnO319fWZvcih5IGluIHZsYSl7dmwrPXZsYVt5XT8nLCcrdmxhW3ldOicnO30iKyJ9cy5wdCh2bCwnLCcsYywwKTtyZXR1cm4gdHJ1ZTt9ZWxzZSBpZihsPT0nJyYmZj09MSl7cy5wdCh2bCwnLCcsYywwIisiKTtyZXR1cm4gdHJ1ZTt9ZWxzZXtyZXR1cm4gZmFsc2U7fSIpO3MuY2xlYXJWYXJzPW5ldyBGdW5jdGlvbigidCIsInZhciBzPXRoaXM7c1t0XT0nJzsiKTtzLmxvd2VyY2FzZVZhcnM9bmV3IEZ1bmN0aW9uKCJ0IiwiIisidmFyIHM9dGhpcztpZihzW3RdJiZ0IT0nZXZlbnRzJyl7c1t0XT1zW3RdLnRvU3RyaW5nKCk7aWYoc1t0XS5pbmRleCIrIk9mKCdEPScpIT0wKXtzW3RdPXNbdF0udG9Mb3dlckNhc2UoKTt9fSIpO3Muc3BsaXQ9bmV3IEZ1bmN0aW9uKCJsIiwiZCIsIiIrInZhciBpLHg9MCxhPW5ldyBBcnJheTt3aGlsZShsKXtpPWwuaW5kZXhPZihkKTtpPWk+LTE/aTpsLmxlbmd0aDthW3giKyIrK109bC5zdWJzdHJpbmcoMCxpKTtsPWwuc3Vic3RyaW5nKGkrZC5sZW5ndGgpO31yZXR1cm4gYSIpO3MuYXBsPW5ldyBGdW5jdGlvbigiTCIsInYiLCJkIiwidSIsIiIrInZhciBzPXRoaXMsbT0wO2lmKCFMKUw9Jyc7aWYodSl7dmFyIGksbixhPXMuc3BsaXQoTCxkKTtmb3IoaT0wO2k8YS4iKyJsZW5ndGg7aSsrKXtuPWFbaV07bT1tfHwodT09MT8obj09dik6KG4udG9Mb3dlckNhc2UoKT09di50b0xvd2VyQ2FzIisiZSgpKSk7fX1pZighbSlMPUw/TCtkK3Y6djtyZXR1cm4gTCIpO3MuZ2V0QW5kUGVyc2lzdFZhbHVlPW5ldyBGdW5jdGlvbigidiIsImMiLCJlIiwiIisidmFyIHM9dGhpcyxhPW5ldyBEYXRlO2U9ZT9lOjA7YS5zZXRUaW1lKGEuZ2V0VGltZSgpK2UqODY0MDAwMDApO2lmKCIrInYpcy5jX3coYyx2LGU/YTowKTtyZXR1cm4gcy5jX3IoYyk7Iik7ZnVuY3Rpb24gc2V0X2gzKCl7aDM9bmV3IFN0cmluZyhkb2N1bWVudC5sb2NhdGlvbi5ob3N0K2RvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lKTtpZihoMy5jaGFyQXQoaDMubGVuZ3RoLTEpPT0iLyIpe3ZhciB0ZW1wPW5ldyBTdHJpbmcoKTtmb3IodmFyIGk9MDtpPGgzLmxlbmd0aC0xO2krKyl7dGVtcCs9aDMuY2hhckF0KGkpO30KaDM9dGVtcDt9CnZhciBpbnRJbmRleE9mTWF0Y2g9aDMuaW5kZXhPZigiLyIpO3doaWxlKGludEluZGV4T2ZNYXRjaCE9LTEpe2gzPWgzLnJlcGxhY2UoIi8iLCJ8Iik7aW50SW5kZXhPZk1hdGNoPWgzLmluZGV4T2YoIi8iKTt9CnJldHVybiBoMzt9CnMudmlzaXRvck5hbWVzcGFjZT0ibmJjdW5pdmVyc2FsIgpzLnRyYWNraW5nU2VydmVyPSJvaW1nLm5iY3VuaS5jb20iCnMudHJhY2tpbmdTZXJ2ZXJTZWN1cmU9Im9zaW1nLm5iY3VuaS5jb20iCnZhciBzX2NvZGU9Jycsc19vYmplY3RJRDtmdW5jdGlvbiBzX2dpKHVuLHBnLHNzKXt2YXIgYz0icy52ZXJzaW9uPSdILjI3LjUnO3MuYW49c19hbjtzLmxvZ0RlYnVnPWZ1bmN0aW9uKG0pe3ZhciBzPXRoaXMsdGNmPW5ldyBGdW5jdGlvbigndmFyIGU7dHJ5e2NvbnNvbGUubG9nKFwiJytzLnJlcChzLnJlcChzLnJlcChtLFwiXFxcXFwiLFwiXFxcXCIrIlxcXFxcIiksXCJcXG5cIixcIlxcXFxuXCIpLFwiXFxcIlwiLFwiXFxcXFxcXCJcIikrJ1wiKTt9Y2F0Y2goZSl7fScpO3RjZigpfTtzLmNscz1mdW5jdGlvbih4LGMpe3ZhciBpLHk9Jyc7aWYoIWMpYz10aGlzLmFuO2ZvcihpPTA7aTx4Lmxlbmd0aDtpKyspe249eC5zdWJzdHJpbmcoaSxpKzEpO2lmKGMuaW5kZXhPZihuKT49MCl5Kz1ufXJldHVyIisibiB5fTtzLmZsPWZ1bmN0aW9uKHgsbCl7cmV0dXJuIHg/KCcnK3gpLnN1YnN0cmluZygwLGwpOnh9O3MuY289ZnVuY3Rpb24obyl7cmV0dXJuIG99O3MubnVtPWZ1bmN0aW9uKHgpe3g9JycreDtmb3IodmFyIHA9MDtwPHgubGVuZ3RoO3ArKylpZigoJzAxMjM0NTY3ODknKS5pbmRleE9mKHguc3Vic3RyaW5nKHAscCsxKSk8MClyZXR1cm4gMDtyZXQiKyJ1cm4gMX07cy5yZXA9c19yZXA7cy5zcD1zX3NwO3Muam49c19qbjtzLmFwZT1mdW5jdGlvbih4KXt2YXIgcz10aGlzLGg9JzAxMjM0NTY3ODlBQkNERUYnLGY9XCIrfiEqKCknXCIsaSxjPXMuY2hhclNldCxuLGwsZSx5PScnO2M9Yz9jLnRvVXBwZXJDYXNlKCk6Jyc7aWYoeCl7eD0nJyt4O2lmKHMuZW09PTMpe3g9ZW5jb2RlVVJJQ29tcG9uZW50KCIrIngpO2ZvcihpPTA7aTxmLmxlbmd0aDtpKyspIHtuPWYuc3Vic3RyaW5nKGksaSsxKTtpZih4LmluZGV4T2Yobik+PTApeD1zLnJlcCh4LG4sXCIlXCIrbi5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpKX19ZWxzZSBpZihjPT0nQVVUTycmJignJykuY2hhckNvZGVBdCl7Zm9yKGk9MDtpPHgubGVuZ3RoO2krKyl7Yz14LnN1IisiYnN0cmluZyhpLGkrMSk7bj14LmNoYXJDb2RlQXQoaSk7aWYobj4xMjcpe2w9MDtlPScnO3doaWxlKG58fGw8NCl7ZT1oLnN1YnN0cmluZyhuJTE2LG4lMTYrMSkrZTtuPShuLW4lMTYpLzE2O2wrK315Kz0nJXUnK2V9ZWxzZSBpZihjPT0nKycpeSs9JyUyQic7ZWxzZSB5Kz1lc2NhcGUoYyl9eD15fWVsc2UgeD1zLnJlcChlc2NhcGUoJycreCksJysiKyInLCclMkInKTtpZihjJiZjIT0nQVVUTycmJnMuZW09PTEmJnguaW5kZXhPZignJXUnKTwwJiZ4LmluZGV4T2YoJyVVJyk8MCl7aT14LmluZGV4T2YoJyUnKTt3aGlsZShpPj0wKXtpKys7aWYoaC5zdWJzdHJpbmcoOCkuaW5kZXhPZih4LnN1YnN0cmluZyhpLGkrMSkudG9VcHBlckNhc2UoKSk+PTApcmV0dXJuIHguc3Vic3RyaW5nKDAsaSkrJ3UwMCIrIicreC5zdWJzdHJpbmcoaSk7aT14LmluZGV4T2YoJyUnLGkpfX19cmV0dXJuIHh9O3MuZXBhPWZ1bmN0aW9uKHgpe3ZhciBzPXRoaXMseSx0Y2Y7aWYoeCl7eD1zLnJlcCgnJyt4LCcrJywnICcpO2lmKHMuZW09PTMpe3RjZj1uZXcgRnVuY3Rpb24oJ3gnLCd2YXIgeSxlO3RyeXt5PWRlY29kZVVSSUNvbXBvbmVudCh4KX1jYXRjaChlKXt5PXVuZXNjIisiYXBlKHgpfXJldHVybiB5Jyk7cmV0dXJuIHRjZih4KX1lbHNlIHJldHVybiB1bmVzY2FwZSh4KX1yZXR1cm4geX07cy5wdD1mdW5jdGlvbih4LGQsZixhKXt2YXIgcz10aGlzLHQ9eCx6PTAseSxyO3doaWxlKHQpe3k9dC5pbmRleE9mKGQpO3k9eTwwP3QubGVuZ3RoOnk7dD10LnN1YnN0cmluZygwLHkpO3I9c1tmXSh0LGEpO2lmKHIpcmV0dXJuIHIiKyI7eis9eStkLmxlbmd0aDt0PXguc3Vic3RyaW5nKHoseC5sZW5ndGgpO3Q9ejx4Lmxlbmd0aD90OicnfXJldHVybiAnJ307cy5pc2Y9ZnVuY3Rpb24odCxhKXt2YXIgYz1hLmluZGV4T2YoJzonKTtpZihjPj0wKWE9YS5zdWJzdHJpbmcoMCxjKTtjPWEuaW5kZXhPZignPScpO2lmKGM+PTApYT1hLnN1YnN0cmluZygwLGMpO2lmKHQuc3Vic3RyaW5nKCIrIjAsMik9PSdzXycpdD10LnN1YnN0cmluZygyKTtyZXR1cm4gKHQhPScnJiZ0PT1hKX07cy5mc2Y9ZnVuY3Rpb24odCxhKXt2YXIgcz10aGlzO2lmKHMucHQoYSwnLCcsJ2lzZicsdCkpcy5mc2crPShzLmZzZyE9Jyc/JywnOicnKSt0O3JldHVybiAwfTtzLmZzPWZ1bmN0aW9uKHgsZil7dmFyIHM9dGhpcztzLmZzZz0nJztzLnB0KHgsJywnLCdmc2YnIisiLGYpO3JldHVybiBzLmZzZ307cy5tcGM9ZnVuY3Rpb24obSxhKXt2YXIgcz10aGlzLGMsbCxuLHY7dj1zLmQudmlzaWJpbGl0eVN0YXRlO2lmKCF2KXY9cy5kLndlYmtpdFZpc2liaWxpdHlTdGF0ZTtpZih2JiZ2PT0ncHJlcmVuZGVyJyl7aWYoIXMubXBxKXtzLm1wcT1uZXcgQXJyYXk7bD1zLnNwKCd3ZWJraXR2aXNpYmlsaXR5Y2hhbmdlLHZpc2kiKyJiaWxpdHljaGFuZ2UnLCcsJyk7Zm9yKG49MDtuPGwubGVuZ3RoO24rKyl7cy5kLmFkZEV2ZW50TGlzdGVuZXIobFtuXSxuZXcgRnVuY3Rpb24oJ3ZhciBzPXNfY19pbFsnK3MuX2luKyddLGMsdjt2PXMuZC52aXNpYmlsaXR5U3RhdGU7aWYoIXYpdj1zLmQud2Via2l0VmlzaWJpbGl0eVN0YXRlO2lmKHMubXBxJiZ2PT1cInZpc2libGVcIil7d2hpbCIrImUocy5tcHEubGVuZ3RoPjApe2M9cy5tcHEuc2hpZnQoKTtzW2MubV0uYXBwbHkocyxjLmEpfXMubXBxPTB9JyksZmFsc2UpfX1jPW5ldyBPYmplY3Q7Yy5tPW07Yy5hPWE7cy5tcHEucHVzaChjKTtyZXR1cm4gMX1yZXR1cm4gMH07cy5zaT1mdW5jdGlvbigpe3ZhciBzPXRoaXMsaSxrLHYsYz1zX2dpKyd2YXIgcz1zX2dpKFwiJytzLm91bisnXCIpIisiO3Muc2EoXCInK3MudW4rJ1wiKTsnO2ZvcihpPTA7aTxzLnZhX2cubGVuZ3RoO2krKyl7az1zLnZhX2dbaV07dj1zW2tdO2lmKHYhPXVuZGVmaW5lZCl7aWYodHlwZW9mKHYpIT0nbnVtYmVyJyljKz0ncy4nK2srJz1cIicrc19mZSh2KSsnXCI7JztlbHNlIGMrPSdzLicraysnPScrdisnOyd9fWMrPVwicy5sbms9cy5lbz1zLmxpbmtOYW1lPXMubGkiKyJua1R5cGU9cy53ZC5zX29iamVjdElEPXMucHB1PXMucGU9cy5wZXYxPXMucGV2Mj1zLnBldjM9Jyc7XCI7cmV0dXJuIGN9O3MuY19kPScnO3MuY19nZGY9ZnVuY3Rpb24odCxhKXt2YXIgcz10aGlzO2lmKCFzLm51bSh0KSlyZXR1cm4gMTtyZXR1cm4gMH07cy5jX2dkPWZ1bmN0aW9uKCl7dmFyIHM9dGhpcyxkPXMud2QubG9jYXRpb24uaG9zdG5hbSIrImUsbj1zLmZwQ29va2llRG9tYWluUGVyaW9kcyxwO2lmKCFuKW49cy5jb29raWVEb21haW5QZXJpb2RzO2lmKGQmJiFzLmNfZCl7bj1uP3BhcnNlSW50KG4pOjI7bj1uPjI/bjoyO3A9ZC5sYXN0SW5kZXhPZignLicpO2lmKHA+PTApe3doaWxlKHA+PTAmJm4+MSl7cD1kLmxhc3RJbmRleE9mKCcuJyxwLTEpO24tLX1zLmNfZD1wPjAmJnMucHQoZCwnIisiLicsJ2NfZ2RmJywwKT9kLnN1YnN0cmluZyhwKTpkfX1yZXR1cm4gcy5jX2R9O3MuY19yPWZ1bmN0aW9uKGspe3ZhciBzPXRoaXM7az1zLmFwZShrKTt2YXIgYz0nICcrcy5kLmNvb2tpZSxpPWMuaW5kZXhPZignICcraysnPScpLGU9aTwwP2k6Yy5pbmRleE9mKCc7JyxpKSx2PWk8MD8nJzpzLmVwYShjLnN1YnN0cmluZyhpKzIray5sZW5ndGgsZTwiKyIwP2MubGVuZ3RoOmUpKTtyZXR1cm4gdiE9J1tbQl1dJz92OicnfTtzLmNfdz1mdW5jdGlvbihrLHYsZSl7dmFyIHM9dGhpcyxkPXMuY19nZCgpLGw9cy5jb29raWVMaWZldGltZSx0O3Y9JycrdjtsPWw/KCcnK2wpLnRvVXBwZXJDYXNlKCk6Jyc7aWYoZSYmbCE9J1NFU1NJT04nJiZsIT0nTk9ORScpe3Q9KHYhPScnP3BhcnNlSW50KGw/bDowKTotNiIrIjApO2lmKHQpe2U9bmV3IERhdGU7ZS5zZXRUaW1lKGUuZ2V0VGltZSgpKyh0KjEwMDApKX19aWYoayYmbCE9J05PTkUnKXtzLmQuY29va2llPWsrJz0nK3MuYXBlKHYhPScnP3Y6J1tbQl1dJykrJzsgcGF0aD0vOycrKGUmJmwhPSdTRVNTSU9OJz8nIGV4cGlyZXM9JytlLnRvR01UU3RyaW5nKCkrJzsnOicnKSsoZD8nIGRvbWFpbj0nK2QrJzsnOicnIisiKTtyZXR1cm4gcy5jX3Ioayk9PXZ9cmV0dXJuIDB9O3MuZWg9ZnVuY3Rpb24obyxlLHIsZil7dmFyIHM9dGhpcyxiPSdzXycrZSsnXycrcy5faW4sbj0tMSxsLGkseDtpZighcy5laGwpcy5laGw9bmV3IEFycmF5O2w9cy5laGw7Zm9yKGk9MDtpPGwubGVuZ3RoJiZuPDA7aSsrKXtpZihsW2ldLm89PW8mJmxbaV0uZT09ZSluPWl9aWYobjwwKXtuPWkiKyI7bFtuXT1uZXcgT2JqZWN0fXg9bFtuXTt4Lm89bzt4LmU9ZTtmPXI/eC5iOmY7aWYocnx8Zil7eC5iPXI/MDpvW2VdO3gub1tlXT1mfWlmKHguYil7eC5vW2JdPXguYjtyZXR1cm4gYn1yZXR1cm4gMH07cy5jZXQ9ZnVuY3Rpb24oZixhLHQsbyxiKXt2YXIgcz10aGlzLHIsdGNmO2lmKHMuYXB2Pj01JiYoIXMuaXNvcGVyYXx8cy5hcHY+PTcpKXt0YyIrImY9bmV3IEZ1bmN0aW9uKCdzJywnZicsJ2EnLCd0JywndmFyIGUscjt0cnl7cj1zW2ZdKGEpfWNhdGNoKGUpe3I9c1t0XShlKX1yZXR1cm4gcicpO3I9dGNmKHMsZixhLHQpfWVsc2V7aWYocy5pc21hYyYmcy51LmluZGV4T2YoJ01TSUUgNCcpPj0wKXI9c1tiXShhKTtlbHNle3MuZWgocy53ZCwnb25lcnJvcicsMCxvKTtyPXNbZl0oYSk7cy5laChzIisiLndkLCdvbmVycm9yJywxKX19cmV0dXJuIHJ9O3MuZ3Rmc2V0PWZ1bmN0aW9uKGUpe3ZhciBzPXRoaXM7cmV0dXJuIHMudGZzfTtzLmd0ZnNvZT1uZXcgRnVuY3Rpb24oJ2UnLCd2YXIgcz1zX2NfaWxbJytzLl9pbisnXSxjO3MuZWgod2luZG93LFwib25lcnJvclwiLDEpO3MuZXRmcz0xO2M9cy50KCk7aWYoYylzLmQud3JpdGUoYyk7cy5ldGZzPTAiKyI7cmV0dXJuIHRydWUnKTtzLmd0ZnNmYj1mdW5jdGlvbihhKXtyZXR1cm4gd2luZG93fTtzLmd0ZnNmPWZ1bmN0aW9uKHcpe3ZhciBzPXRoaXMscD13LnBhcmVudCxsPXcubG9jYXRpb247cy50ZnM9dztpZihwJiZwLmxvY2F0aW9uIT1sJiZwLmxvY2F0aW9uLmhvc3Q9PWwuaG9zdCl7cy50ZnM9cDtyZXR1cm4gcy5ndGZzZihzLnRmcyl9cmV0dXJuICIrInMudGZzfTtzLmd0ZnM9ZnVuY3Rpb24oKXt2YXIgcz10aGlzO2lmKCFzLnRmcyl7cy50ZnM9cy53ZDtpZighcy5ldGZzKXMudGZzPXMuY2V0KCdndGZzZicscy50ZnMsJ2d0ZnNldCcscy5ndGZzb2UsJ2d0ZnNmYicpfXJldHVybiBzLnRmc307cy5tcnE9ZnVuY3Rpb24odSl7dmFyIHM9dGhpcyxsPXMucmxbdV0sbixyO3MucmxbdV09MDtpZihsKWZvIisicihuPTA7bjxsLmxlbmd0aDtuKyspe3I9bFtuXTtzLm1yKDAsMCxyLnIsci50LHIudSl9fTtzLmZsdXNoQnVmZmVyZWRSZXF1ZXN0cz1mdW5jdGlvbigpe307cy50YWdDb250YWluZXJNYXJrZXI9Jyc7cy5tcj1mdW5jdGlvbihzZXNzLHEscnMsdGEsdSl7dmFyIHM9dGhpcyxkYz1zLmRjLHQxPXMudHJhY2tpbmdTZXJ2ZXIsdDI9cy50cmFja2luZ1MiKyJlcnZlclNlY3VyZSx0Yj1zLnRyYWNraW5nU2VydmVyQmFzZSxwPScuc2MnLG5zPXMudmlzaXRvck5hbWVzcGFjZSx1bj1zLmNscyh1P3U6KG5zP25zOnMuZnVuKSkscj1uZXcgT2JqZWN0LGwsaW1uPSdzX2lfJytzLl9pbisnXycrdW4saW0sYixlO2lmKCFycyl7aWYodDEpe2lmKHQyJiZzLnNzbCl0MT10Mn1lbHNle2lmKCF0Yil0Yj0nMm83Lm5ldCIrIic7aWYoZGMpZGM9KCcnK2RjKS50b0xvd2VyQ2FzZSgpO2Vsc2UgZGM9J2QxJztpZih0Yj09JzJvNy5uZXQnKXtpZihkYz09J2QxJylkYz0nMTEyJztlbHNlIGlmKGRjPT0nZDInKWRjPScxMjInO3A9Jyd9dDE9dW4rJy4nK2RjKycuJytwK3RifXJzPSdodHRwJysocy5zc2w/J3MnOicnKSsnOi8vJyt0MSsnL2Ivc3MvJytzLnVuKycvJysocy5tb2JpIisibGU/JzUuMSc6JzEnKSsnLycrcy52ZXJzaW9uKyhzLnRjbj8nVCc6JycpKyhzLnRhZ0NvbnRhaW5lck1hcmtlcj9cIi1cIitzLnRhZ0NvbnRhaW5lck1hcmtlcjpcIlwiKSsnLycrc2VzcysnP0FRQj0xJm5kaD0xJysocT9xOicnKSsnJkFRRT0xJztpZihzLmlzaWUmJiFzLmlzbWFjKXJzPXMuZmwocnMsMjA0Nyl9aWYocy5kLmltYWdlcyYmcy5hcHYiKyI+PTMmJighcy5pc29wZXJhfHxzLmFwdj49NykmJihzLm5zNjwwfHxzLmFwdj49Ni4xKSl7aWYoIXMucmMpcy5yYz1uZXcgT2JqZWN0O2lmKCFzLnJjW3VuXSl7cy5yY1t1bl09MTtpZighcy5ybClzLnJsPW5ldyBPYmplY3Q7cy5ybFt1bl09bmV3IEFycmF5O3NldFRpbWVvdXQoJ2lmKHdpbmRvdy5zX2NfaWwpd2luZG93LnNfY19pbFsnK3MuX2luKyIrIiddLm1ycShcIicrdW4rJ1wiKScsNzUwKX1lbHNle2w9cy5ybFt1bl07aWYobCl7ci50PXRhO3IudT11bjtyLnI9cnM7bFtsLmxlbmd0aF09cjtyZXR1cm4gJyd9aW1uKz0nXycrcy5yY1t1bl07cy5yY1t1bl0rK31pZihzLmRlYnVnVHJhY2tpbmcpe3ZhciBkPSdBcHBNZWFzdXJlbWVudCBEZWJ1ZzogJytycyxkbD1zLnNwKHJzLCcmJyksZGxuO2ZvIisicihkbG49MDtkbG48ZGwubGVuZ3RoO2RsbisrKWQrPVwiXFxuXFx0XCIrcy5lcGEoZGxbZGxuXSk7cy5sb2dEZWJ1ZyhkKX1pbT1zLndkW2ltbl07aWYoIWltKWltPXMud2RbaW1uXT1uZXcgSW1hZ2U7aW0uYWx0PVwiXCI7aW0uc19sPTA7aW0ub25sb2FkPWltLm9uZXJyb3I9bmV3IEZ1bmN0aW9uKCdlJywndGhpcy5zX2w9MTt2YXIgd2Q9d2luZG8iKyJ3LHM7aWYod2Quc19jX2lsKXtzPXdkLnNfY19pbFsnK3MuX2luKyddO3MuYmNyKCk7cy5tcnEoXCInK3VuKydcIik7cy5ucnMtLTtpZighcy5ucnMpcy5tX20oXCJyclwiKX0nKTtpZighcy5ucnMpe3MubnJzPTE7cy5tX20oJ3JzJyl9ZWxzZSBzLm5ycysrO2ltLnNyYz1ycztpZihzLnVzZUZvcmNlZExpbmtUcmFja2luZ3x8cy5iY2Ype2lmKCFzLiIrImZvcmNlZExpbmtUcmFja2luZ1RpbWVvdXQpcy5mb3JjZWRMaW5rVHJhY2tpbmdUaW1lb3V0PTI1MDtzZXRUaW1lb3V0KCdpZih3aW5kb3cuc19jX2lsKXdpbmRvdy5zX2NfaWxbJytzLl9pbisnXS5iY3IoKScscy5mb3JjZWRMaW5rVHJhY2tpbmdUaW1lb3V0KTt9ZWxzZSBpZigocy5sbmt8fHMuZW8pJiYoIXRhfHx0YT09J19zZWxmJ3x8dGE9PSdfIisidG9wJ3x8dGE9PSdfcGFyZW50J3x8KHMud2QubmFtZSYmdGE9PXMud2QubmFtZSkpKXtiPWU9bmV3IERhdGU7d2hpbGUoIWltLnNfbCYmZS5nZXRUaW1lKCktYi5nZXRUaW1lKCk8NTAwKWU9bmV3IERhdGV9cmV0dXJuICcnfXJldHVybiAnPGltJysnZyBzcicrJ2M9XCInK3JzKydcIiB3aWR0aD0xIGhlaWdodD0xIGJvcmRlcj0wIGFsdD1cIlwiPiciKyJ9O3MuZ2c9ZnVuY3Rpb24odil7dmFyIHM9dGhpcztpZighcy53ZFsnc18nK3ZdKXMud2RbJ3NfJyt2XT0nJztyZXR1cm4gcy53ZFsnc18nK3ZdfTtzLmdsZj1mdW5jdGlvbih0LGEpe2lmKHQuc3Vic3RyaW5nKDAsMik9PSdzXycpdD10LnN1YnN0cmluZygyKTt2YXIgcz10aGlzLHY9cy5nZyh0KTtpZih2KXNbdF09dn07cy5nbD1mdW5jdGlvbih2KSIrInt2YXIgcz10aGlzO2lmKHMucGcpcy5wdCh2LCcsJywnZ2xmJywwKX07cy5yZj1mdW5jdGlvbih4KXt2YXIgcz10aGlzLHksaSxqLGgscCxsPTAscSxhLGI9JycsYz0nJyx0O2lmKHgmJngubGVuZ3RoPjI1NSl7eT0nJyt4O2k9eS5pbmRleE9mKCc/Jyk7aWYoaT4wKXtxPXkuc3Vic3RyaW5nKGkrMSk7eT15LnN1YnN0cmluZygwLGkpO2g9eS50b0xvIisid2VyQ2FzZSgpO2o9MDtpZihoLnN1YnN0cmluZygwLDcpPT0naHR0cDovLycpais9NztlbHNlIGlmKGguc3Vic3RyaW5nKDAsOCk9PSdodHRwczovLycpais9ODtpPWguaW5kZXhPZihcIi9cIixqKTtpZihpPjApe2g9aC5zdWJzdHJpbmcoaixpKTtwPXkuc3Vic3RyaW5nKGkpO3k9eS5zdWJzdHJpbmcoMCxpKTtpZihoLmluZGV4T2YoJ2dvb2dsZSciKyIpPj0wKWw9JyxxLGllLHN0YXJ0LHNlYXJjaF9rZXksd29yZCxrdyxjZCwnO2Vsc2UgaWYoaC5pbmRleE9mKCd5YWhvby5jbycpPj0wKWw9JyxwLGVpLCc7aWYobCYmcSl7YT1zLnNwKHEsJyYnKTtpZihhJiZhLmxlbmd0aD4xKXtmb3Ioaj0wO2o8YS5sZW5ndGg7aisrKXt0PWFbal07aT10LmluZGV4T2YoJz0nKTtpZihpPjAmJmwuaW5kZXhPZignLCIrIicrdC5zdWJzdHJpbmcoMCxpKSsnLCcpPj0wKWIrPShiPycmJzonJykrdDtlbHNlIGMrPShjPycmJzonJykrdH1pZihiJiZjKXE9YisnJicrYztlbHNlIGM9Jyd9aT0yNTMtKHEubGVuZ3RoLWMubGVuZ3RoKS15Lmxlbmd0aDt4PXkrKGk+MD9wLnN1YnN0cmluZygwLGkpOicnKSsnPycrcX19fX1yZXR1cm4geH07cy5zMnE9ZnVuY3Rpb24oayx2LHZmIisiLHZmcCxmKXt2YXIgcz10aGlzLHFzPScnLHNrLHN2LHNwLHNzLG5rZSxuayxuZixuZmw9MCxuZm4sbmZtO2lmKGs9PVwiY29udGV4dERhdGFcIilrPVwiY1wiO2lmKHYpe2ZvcihzayBpbiB2KWlmKCghZnx8c2suc3Vic3RyaW5nKDAsZi5sZW5ndGgpPT1mKSYmdltza10mJighdmZ8fHZmLmluZGV4T2YoJywnKyh2ZnA/dmZwKycuJzonJykrc2srJywiKyInKT49MCkmJighT2JqZWN0fHwhT2JqZWN0LnByb3RvdHlwZXx8IU9iamVjdC5wcm90b3R5cGVbc2tdKSl7bmZtPTA7aWYobmZsKWZvcihuZm49MDtuZm48bmZsLmxlbmd0aDtuZm4rKylpZihzay5zdWJzdHJpbmcoMCxuZmxbbmZuXS5sZW5ndGgpPT1uZmxbbmZuXSluZm09MTtpZighbmZtKXtpZihxcz09JycpcXMrPScmJytrKycuJztzdj12W3NrXSIrIjtpZihmKXNrPXNrLnN1YnN0cmluZyhmLmxlbmd0aCk7aWYoc2subGVuZ3RoPjApe25rZT1zay5pbmRleE9mKCcuJyk7aWYobmtlPjApe25rPXNrLnN1YnN0cmluZygwLG5rZSk7bmY9KGY/ZjonJykrbmsrJy4nO2lmKCFuZmwpbmZsPW5ldyBBcnJheTtuZmxbbmZsLmxlbmd0aF09bmY7cXMrPXMuczJxKG5rLHYsdmYsdmZwLG5mKX1lbHNle2lmKHR5IisicGVvZihzdik9PSdib29sZWFuJyl7aWYoc3Ypc3Y9J3RydWUnO2Vsc2Ugc3Y9J2ZhbHNlJ31pZihzdil7aWYodmZwPT0ncmV0cmlldmVMaWdodERhdGEnJiZmLmluZGV4T2YoJy5jb250ZXh0RGF0YS4nKTwwKXtzcD1zay5zdWJzdHJpbmcoMCw0KTtzcz1zay5zdWJzdHJpbmcoNCk7aWYoc2s9PSd0cmFuc2FjdGlvbklEJylzaz0neGFjdCc7ZWxzZSAiKyJpZihzaz09J2NoYW5uZWwnKXNrPSdjaCc7ZWxzZSBpZihzaz09J2NhbXBhaWduJylzaz0ndjAnO2Vsc2UgaWYocy5udW0oc3MpKXtpZihzcD09J3Byb3AnKXNrPSdjJytzcztlbHNlIGlmKHNwPT0nZVZhcicpc2s9J3YnK3NzO2Vsc2UgaWYoc3A9PSdsaXN0Jylzaz0nbCcrc3M7ZWxzZSBpZihzcD09J2hpZXInKXtzaz0naCcrc3M7c3Y9c3Yuc3VicyIrInRyaW5nKDAsMjU1KX19fXFzKz0nJicrcy5hcGUoc2spKyc9JytzLmFwZShzdil9fX19fWlmKHFzIT0nJylxcys9JyYuJytrfXJldHVybiBxc307cy5oYXY9ZnVuY3Rpb24oKXt2YXIgcz10aGlzLHFzPScnLGwsZnY9JycsZmU9JycsbW4saSxlO2lmKHMubGlnaHRQcm9maWxlSUQpe2w9cy52YV9tO2Z2PXMubGlnaHRUcmFja1ZhcnM7aWYoZnYpZnY9IisiJywnK2Z2KycsJytzLnZsX21yKycsJ31lbHNle2w9cy52YV90O2lmKHMucGV8fHMubGlua1R5cGUpe2Z2PXMubGlua1RyYWNrVmFycztmZT1zLmxpbmtUcmFja0V2ZW50cztpZihzLnBlKXttbj1zLnBlLnN1YnN0cmluZygwLDEpLnRvVXBwZXJDYXNlKCkrcy5wZS5zdWJzdHJpbmcoMSk7aWYoc1ttbl0pe2Z2PXNbbW5dLnRyYWNrVmFycztmZT1zW20iKyJuXS50cmFja0V2ZW50c319fWlmKGZ2KWZ2PScsJytmdisnLCcrcy52bF9sKycsJytzLnZsX2wyO2lmKGZlKXtmZT0nLCcrZmUrJywnO2lmKGZ2KWZ2Kz0nLGV2ZW50cywnfWlmIChzLmV2ZW50czIpZT0oZT8nLCc6JycpK3MuZXZlbnRzMn1mb3IoaT0wO2k8bC5sZW5ndGg7aSsrKXt2YXIgaz1sW2ldLHY9c1trXSxiPWsuc3Vic3RyaW5nKDAsNCkseCIrIj1rLnN1YnN0cmluZyg0KSxuPXBhcnNlSW50KHgpLHE9aztpZighdilpZihrPT0nZXZlbnRzJyYmZSl7dj1lO2U9Jyd9aWYodiYmKCFmdnx8ZnYuaW5kZXhPZignLCcraysnLCcpPj0wKSYmayE9J2xpbmtOYW1lJyYmayE9J2xpbmtUeXBlJyl7aWYoaz09J3N1cHBsZW1lbnRhbERhdGFJRCcpcT0nc2RpZCc7ZWxzZSBpZihrPT0ndGltZXN0YW1wJylxIisiPSd0cyc7ZWxzZSBpZihrPT0nZHluYW1pY1ZhcmlhYmxlUHJlZml4JylxPSdEJztlbHNlIGlmKGs9PSd2aXNpdG9ySUQnKXE9J3ZpZCc7ZWxzZSBpZihrPT0nbWFya2V0aW5nQ2xvdWRWaXNpdG9ySUQnKXE9J21pZCc7ZWxzZSBpZihrPT0nYW5hbHl0aWNzVmlzaXRvcklEJylxPSdhaWQnO2Vsc2UgaWYoaz09J2F1ZGllbmNlTWFuYWdlckxvY2F0aW8iKyJuSGludCcpcT0nYWFtbGgnO2Vsc2UgaWYoaz09J2F1ZGllbmNlTWFuYWdlckJsb2InKXE9J2FhbWInO2Vsc2UgaWYoaz09J2F1dGhTdGF0ZScpcT0nYXMnO2Vsc2UgaWYoaz09J3BhZ2VVUkwnKXtxPSdnJztpZih2Lmxlbmd0aD4yNTUpe3MucGFnZVVSTFJlc3Q9di5zdWJzdHJpbmcoMjU1KTt2PXYuc3Vic3RyaW5nKDAsMjU1KTt9fWVsc2UgaWYoayIrIj09J3BhZ2VVUkxSZXN0JylxPSctZyc7ZWxzZSBpZihrPT0ncmVmZXJyZXInKXtxPSdyJzt2PXMuZmwocy5yZih2KSwyNTUpfWVsc2UgaWYoaz09J3Ztayd8fGs9PSd2aXNpdG9yTWlncmF0aW9uS2V5JylxPSd2bXQnO2Vsc2UgaWYoaz09J3Zpc2l0b3JNaWdyYXRpb25TZXJ2ZXInKXtxPSd2bWYnO2lmKHMuc3NsJiZzLnZpc2l0b3JNaWdyYXRpb25TIisiZXJ2ZXJTZWN1cmUpdj0nJ31lbHNlIGlmKGs9PSd2aXNpdG9yTWlncmF0aW9uU2VydmVyU2VjdXJlJyl7cT0ndm1mJztpZighcy5zc2wmJnMudmlzaXRvck1pZ3JhdGlvblNlcnZlcil2PScnfWVsc2UgaWYoaz09J2NoYXJTZXQnKXtxPSdjZSc7aWYodi50b1VwcGVyQ2FzZSgpPT0nQVVUTycpdj0nSVNPODg1OS0xJztlbHNlIGlmKHMuZW09PTJ8fHMiKyIuZW09PTMpdj0nVVRGLTgnfWVsc2UgaWYoaz09J3Zpc2l0b3JOYW1lc3BhY2UnKXE9J25zJztlbHNlIGlmKGs9PSdjb29raWVEb21haW5QZXJpb2RzJylxPSdjZHAnO2Vsc2UgaWYoaz09J2Nvb2tpZUxpZmV0aW1lJylxPSdjbCc7ZWxzZSBpZihrPT0ndmFyaWFibGVQcm92aWRlcicpcT0ndnZwJztlbHNlIGlmKGs9PSdjdXJyZW5jeUNvZGUnKXE9JyIrImNjJztlbHNlIGlmKGs9PSdjaGFubmVsJylxPSdjaCc7ZWxzZSBpZihrPT0ndHJhbnNhY3Rpb25JRCcpcT0neGFjdCc7ZWxzZSBpZihrPT0nY2FtcGFpZ24nKXE9J3YwJztlbHNlIGlmKGs9PSdyZXNvbHV0aW9uJylxPSdzJztlbHNlIGlmKGs9PSdjb2xvckRlcHRoJylxPSdjJztlbHNlIGlmKGs9PSdqYXZhc2NyaXB0VmVyc2lvbicpcT0naic7ZWxzIisiZSBpZihrPT0namF2YUVuYWJsZWQnKXE9J3YnO2Vsc2UgaWYoaz09J2Nvb2tpZXNFbmFibGVkJylxPSdrJztlbHNlIGlmKGs9PSdicm93c2VyV2lkdGgnKXE9J2J3JztlbHNlIGlmKGs9PSdicm93c2VySGVpZ2h0JylxPSdiaCc7ZWxzZSBpZihrPT0nY29ubmVjdGlvblR5cGUnKXE9J2N0JztlbHNlIGlmKGs9PSdob21lcGFnZScpcT0naHAnO2Vsc2UiKyIgaWYoaz09J3BsdWdpbnMnKXE9J3AnO2Vsc2UgaWYoaz09J2V2ZW50cycpe2lmKGUpdis9KHY/JywnOicnKStlO2lmKGZlKXY9cy5mcyh2LGZlKX1lbHNlIGlmKGs9PSdldmVudHMyJyl2PScnO2Vsc2UgaWYoaz09J2NvbnRleHREYXRhJyl7cXMrPXMuczJxKCdjJyxzW2tdLGZ2LGssMCk7dj0nJ31lbHNlIGlmKGs9PSdsaWdodFByb2ZpbGVJRCcpcSIrIj0nbXRwJztlbHNlIGlmKGs9PSdsaWdodFN0b3JlRm9yU2Vjb25kcycpe3E9J210c3MnO2lmKCFzLmxpZ2h0UHJvZmlsZUlEKXY9Jyd9ZWxzZSBpZihrPT0nbGlnaHRJbmNyZW1lbnRCeScpe3E9J210aSc7aWYoIXMubGlnaHRQcm9maWxlSUQpdj0nJ31lbHNlIGlmKGs9PSdyZXRyaWV2ZUxpZ2h0UHJvZmlsZXMnKXE9J210c3InO2Vsc2UgaWYoaz09IisiJ2RlbGV0ZUxpZ2h0UHJvZmlsZXMnKXE9J210c2QnO2Vsc2UgaWYoaz09J3JldHJpZXZlTGlnaHREYXRhJyl7aWYocy5yZXRyaWV2ZUxpZ2h0UHJvZmlsZXMpcXMrPXMuczJxKCdtdHMnLHNba10sZnYsaywwKTt2PScnfWVsc2UgaWYocy5udW0oeCkpe2lmKGI9PSdwcm9wJylxPSdjJytuO2Vsc2UgaWYoYj09J2VWYXInKXE9J3YnK247ZWxzZSBpZigiKyJiPT0nbGlzdCcpcT0nbCcrbjtlbHNlIGlmKGI9PSdoaWVyJyl7cT0naCcrbjt2PXMuZmwodiwyNTUpfX1pZih2KXFzKz0nJicrcy5hcGUocSkrJz0nKyhrLnN1YnN0cmluZygwLDMpIT0ncGV2Jz9zLmFwZSh2KTp2KX19cmV0dXJuIHFzfTtzLmx0ZGY9ZnVuY3Rpb24odCxoKXt0PXQ/dC50b0xvd2VyQ2FzZSgpOicnO2g9aD9oLnRvTG93ZXJDYXNlKCIrIik6Jyc7dmFyIHFpPWguaW5kZXhPZignPycpLGhpPWguaW5kZXhPZignIycpO2lmKHFpPj0wKXtpZihoaT49MCYmaGk8cWkpcWk9aGk7fWVsc2UgcWk9aGk7aD1xaT49MD9oLnN1YnN0cmluZygwLHFpKTpoO2lmKHQmJmguc3Vic3RyaW5nKGgubGVuZ3RoLSh0Lmxlbmd0aCsxKSk9PScuJyt0KXJldHVybiAxO3JldHVybiAwfTtzLmx0ZWY9ZnVuY3RpIisib24odCxoKXt0PXQ/dC50b0xvd2VyQ2FzZSgpOicnO2g9aD9oLnRvTG93ZXJDYXNlKCk6Jyc7aWYodCYmaC5pbmRleE9mKHQpPj0wKXJldHVybiAxO3JldHVybiAwfTtzLmx0PWZ1bmN0aW9uKGgpe3ZhciBzPXRoaXMsbGZ0PXMubGlua0Rvd25sb2FkRmlsZVR5cGVzLGxlZj1zLmxpbmtFeHRlcm5hbEZpbHRlcnMsbGlmPXMubGlua0ludGVybmFsRmkiKyJsdGVycztsaWY9bGlmP2xpZjpzLndkLmxvY2F0aW9uLmhvc3RuYW1lO2g9aC50b0xvd2VyQ2FzZSgpO2lmKHMudHJhY2tEb3dubG9hZExpbmtzJiZsZnQmJnMucHQobGZ0LCcsJywnbHRkZicsaCkpcmV0dXJuICdkJztpZihzLnRyYWNrRXh0ZXJuYWxMaW5rcyYmaC5pbmRleE9mKCcjJykhPTAmJmguaW5kZXhPZignYWJvdXQ6JykhPTAmJmguaW5kZSIrInhPZignamF2YXNjcmlwdDonKSE9MCYmKGxlZnx8bGlmKSYmKCFsZWZ8fHMucHQobGVmLCcsJywnbHRlZicsaCkpJiYoIWxpZnx8IXMucHQobGlmLCcsJywnbHRlZicsaCkpKXJldHVybiAnZSc7cmV0dXJuICcnfTtzLmxjPW5ldyBGdW5jdGlvbignZScsJ3ZhciBzPXNfY19pbFsnK3MuX2luKyddLGI9cy5laCh0aGlzLFwib25jbGlja1wiKTtzLmxuIisiaz10aGlzO3MudCgpO3MubG5rPTA7aWYoYilyZXR1cm4gdGhpc1tiXShlKTtyZXR1cm4gdHJ1ZScpO3MuYmNyPWZ1bmN0aW9uKCl7dmFyIHM9dGhpcztpZihzLmJjdCYmcy5iY2Upcy5iY3QuZGlzcGF0Y2hFdmVudChzLmJjZSk7aWYocy5iY2Ype2lmKHR5cGVvZihzLmJjZik9PSdmdW5jdGlvbicpcy5iY2YoKTtlbHNlIGlmKHMuYmN0JiZzLmJjdC4iKyJocmVmKXMuZC5sb2NhdGlvbj1zLmJjdC5ocmVmfXMuYmN0PXMuYmNlPXMuYmNmPTB9O3MuYmM9bmV3IEZ1bmN0aW9uKCdlJywnaWYoZSYmZS5zX2ZlKXJldHVybjt2YXIgcz1zX2NfaWxbJytzLl9pbisnXSxmLHRjZix0LG4sbnJzLGEsaDtpZihzLmQmJnMuZC5hbGwmJnMuZC5hbGwuY3BwWFljdG5yKXJldHVybjtpZighcy5iYmMpcy51c2VGb3JjZSIrImRMaW5rVHJhY2tpbmc9MDtlbHNlIGlmKCFzLnVzZUZvcmNlZExpbmtUcmFja2luZyl7cy5iLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHMuYmMsdHJ1ZSk7cy5iYmM9cy51c2VGb3JjZWRMaW5rVHJhY2tpbmc9MDtyZXR1cm59ZWxzZSBzLmIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIscy5iYyxmYWxzZSk7cy5lbz1lLnNyY0VsIisiZW1lbnQ/ZS5zcmNFbGVtZW50OmUudGFyZ2V0O25ycz1zLm5ycztzLnQoKTtzLmVvPTA7aWYocy5ucnM+bnJzJiZzLnVzZUZvcmNlZExpbmtUcmFja2luZyYmZS50YXJnZXQpe2E9ZS50YXJnZXQ7d2hpbGUoYSYmYSE9cy5iJiZhLnRhZ05hbWUudG9VcHBlckNhc2UoKSE9XCJBXCImJmEudGFnTmFtZS50b1VwcGVyQ2FzZSgpIT1cIkFSRUFcIilhPWEiKyIucGFyZW50Tm9kZTtpZihhKXtoPWEuaHJlZjtpZihoLmluZGV4T2YoXCIjXCIpPT0wfHxoLmluZGV4T2YoXCJhYm91dDpcIik9PTB8fGguaW5kZXhPZihcImphdmFzY3JpcHQ6XCIpPT0wKWg9MDt0PWEudGFyZ2V0O2lmKGUudGFyZ2V0LmRpc3BhdGNoRXZlbnQmJmgmJighdHx8dD09XCJfc2VsZlwifHx0PT1cIl90b3BcInx8dD09XCJfcGFyZW50IisiXCJ8fChzLndkLm5hbWUmJnQ9PXMud2QubmFtZSkpKXt0Y2Y9bmV3IEZ1bmN0aW9uKFwic1wiLFwidmFyIHg7dHJ5e249cy5kLmNyZWF0ZUV2ZW50KFxcXFxcIk1vdXNlRXZlbnRzXFxcXFwiKX1jYXRjaCh4KXtuPW5ldyBNb3VzZUV2ZW50fXJldHVybiBuXCIpO249dGNmKHMpO2lmKG4pe3RjZj1uZXcgRnVuY3Rpb24oXCJuXCIsXCJlXCIsXCJ2YXIiKyIgeDt0cnl7bi5pbml0TW91c2VFdmVudChcXFxcXCJjbGlja1xcXFxcIixlLmJ1YmJsZXMsZS5jYW5jZWxhYmxlLGUudmlldyxlLmRldGFpbCxlLnNjcmVlblgsZS5zY3JlZW5ZLGUuY2xpZW50WCxlLmNsaWVudFksZS5jdHJsS2V5LGUuYWx0S2V5LGUuc2hpZnRLZXksZS5tZXRhS2V5LGUuYnV0dG9uLGUucmVsYXRlZFRhcmdldCl9Y2F0Y2goeCl7biIrIj0wfXJldHVybiBuXCIpO249dGNmKG4sZSk7aWYobil7bi5zX2ZlPTE7ZS5zdG9wUHJvcGFnYXRpb24oKTtpZiAoZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24pIHtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO31lLnByZXZlbnREZWZhdWx0KCk7cy5iY3Q9ZS50YXJnZXQ7cy5iY2U9bn19fX19Jyk7cy5vaD1mdW5jdGlvbihvKXt2YXIgcz10IisiaGlzLGw9cy53ZC5sb2NhdGlvbixoPW8uaHJlZj9vLmhyZWY6JycsaSxqLGsscDtpPWguaW5kZXhPZignOicpO2o9aC5pbmRleE9mKCc/Jyk7az1oLmluZGV4T2YoJy8nKTtpZihoJiYoaTwwfHwoaj49MCYmaT5qKXx8KGs+PTAmJmk+aykpKXtwPW8ucHJvdG9jb2wmJm8ucHJvdG9jb2wubGVuZ3RoPjE/by5wcm90b2NvbDoobC5wcm90b2NvbD9sLnAiKyJyb3RvY29sOicnKTtpPWwucGF0aG5hbWUubGFzdEluZGV4T2YoJy8nKTtoPShwP3ArJy8vJzonJykrKG8uaG9zdD9vLmhvc3Q6KGwuaG9zdD9sLmhvc3Q6JycpKSsoaC5zdWJzdHJpbmcoMCwxKSE9Jy8nP2wucGF0aG5hbWUuc3Vic3RyaW5nKDAsaTwwPzA6aSkrJy8nOicnKStofXJldHVybiBofTtzLm90PWZ1bmN0aW9uKG8pe3ZhciB0PW8udGFnTiIrImFtZTtpZihvLnRhZ1Vybnx8KG8uc2NvcGVOYW1lJiZvLnNjb3BlTmFtZS50b1VwcGVyQ2FzZSgpIT0nSFRNTCcpKXJldHVybiAnJzt0PXQmJnQudG9VcHBlckNhc2U/dC50b1VwcGVyQ2FzZSgpOicnO2lmKHQ9PSdTSEFQRScpdD0nJztpZih0KXtpZigodD09J0lOUFVUJ3x8dD09J0JVVFRPTicpJiZvLnR5cGUmJm8udHlwZS50b1VwcGVyQ2FzZSl0IisiPW8udHlwZS50b1VwcGVyQ2FzZSgpO2Vsc2UgaWYoIXQmJm8uaHJlZil0PSdBJzt9cmV0dXJuIHR9O3Mub2lkPWZ1bmN0aW9uKG8pe3ZhciBzPXRoaXMsdD1zLm90KG8pLHAsYyxuPScnLHg9MDtpZih0JiYhby5zX29pZCl7cD1vLnByb3RvY29sO2M9by5vbmNsaWNrO2lmKG8uaHJlZiYmKHQ9PSdBJ3x8dD09J0FSRUEnKSYmKCFjfHwhcHx8cC50b0wiKyJvd2VyQ2FzZSgpLmluZGV4T2YoJ2phdmFzY3JpcHQnKTwwKSluPXMub2gobyk7ZWxzZSBpZihjKXtuPXMucmVwKHMucmVwKHMucmVwKHMucmVwKCcnK2MsXCJcXHJcIiwnJyksXCJcXG5cIiwnJyksXCJcXHRcIiwnJyksJyAnLCcnKTt4PTJ9ZWxzZSBpZih0PT0nSU5QVVQnfHx0PT0nU1VCTUlUJyl7aWYoby52YWx1ZSluPW8udmFsdWU7ZWxzZSBpZiIrIihvLmlubmVyVGV4dCluPW8uaW5uZXJUZXh0O2Vsc2UgaWYoby50ZXh0Q29udGVudCluPW8udGV4dENvbnRlbnQ7eD0zfWVsc2UgaWYoby5zcmMmJnQ9PSdJTUFHRScpbj1vLnNyYztpZihuKXtvLnNfb2lkPXMuZmwobiwxMDApO28uc19vaWR0PXh9fXJldHVybiBvLnNfb2lkfTtzLnJxZj1mdW5jdGlvbih0LHVuKXt2YXIgcz10aGlzLGU9dC5pbmRlIisieE9mKCc9JyksdT1lPj0wP3Quc3Vic3RyaW5nKDAsZSk6JycscT1lPj0wP3MuZXBhKHQuc3Vic3RyaW5nKGUrMSkpOicnO2lmKHUmJnEmJignLCcrdSsnLCcpLmluZGV4T2YoJywnK3VuKycsJyk+PTApe2lmKHUhPXMudW4mJnMudW4uaW5kZXhPZignLCcpPj0wKXE9JyZ1PScrdStxKycmdT0wJztyZXR1cm4gcX1yZXR1cm4gJyd9O3MucnE9ZnVuY3QiKyJpb24odW4pe2lmKCF1bil1bj10aGlzLnVuO3ZhciBzPXRoaXMsYz11bi5pbmRleE9mKCcsJyksdj1zLmNfcignc19zcScpLHE9Jyc7aWYoYzwwKXJldHVybiBzLnB0KHYsJyYnLCdycWYnLHVuKTtyZXR1cm4gcy5wdCh1biwnLCcsJ3JxJywwKX07cy5zcXA9ZnVuY3Rpb24odCxhKXt2YXIgcz10aGlzLGU9dC5pbmRleE9mKCc9JykscT1lPDA/Jyc6cyIrIi5lcGEodC5zdWJzdHJpbmcoZSsxKSk7cy5zcXFbcV09Jyc7aWYoZT49MClzLnB0KHQuc3Vic3RyaW5nKDAsZSksJywnLCdzcXMnLHEpO3JldHVybiAwfTtzLnNxcz1mdW5jdGlvbih1bixxKXt2YXIgcz10aGlzO3Muc3F1W3VuXT1xO3JldHVybiAwfTtzLnNxPWZ1bmN0aW9uKHEpe3ZhciBzPXRoaXMsaz0nc19zcScsdj1zLmNfcihrKSx4LGM9MDtzIisiLnNxcT1uZXcgT2JqZWN0O3Muc3F1PW5ldyBPYmplY3Q7cy5zcXFbcV09Jyc7cy5wdCh2LCcmJywnc3FwJywwKTtzLnB0KHMudW4sJywnLCdzcXMnLHEpO3Y9Jyc7Zm9yKHggaW4gcy5zcXUpaWYoeCYmKCFPYmplY3R8fCFPYmplY3QucHJvdG90eXBlfHwhT2JqZWN0LnByb3RvdHlwZVt4XSkpcy5zcXFbcy5zcXVbeF1dKz0ocy5zcXFbcy5zcXVbeF0iKyJdPycsJzonJykreDtmb3IoeCBpbiBzLnNxcSlpZih4JiYoIU9iamVjdHx8IU9iamVjdC5wcm90b3R5cGV8fCFPYmplY3QucHJvdG90eXBlW3hdKSYmcy5zcXFbeF0mJih4PT1xfHxjPDIpKXt2Kz0odj8nJic6JycpK3Muc3FxW3hdKyc9JytzLmFwZSh4KTtjKyt9cmV0dXJuIHMuY193KGssdiwwKX07cy53ZGw9bmV3IEZ1bmN0aW9uKCdlJywndmFyICIrInM9c19jX2lsWycrcy5faW4rJ10scj10cnVlLGI9cy5laChzLndkLFwib25sb2FkXCIpLGksbyxvYztpZihiKXI9dGhpc1tiXShlKTtmb3IoaT0wO2k8cy5kLmxpbmtzLmxlbmd0aDtpKyspe289cy5kLmxpbmtzW2ldO29jPW8ub25jbGljaz9cIlwiK28ub25jbGljazpcIlwiO2lmKChvYy5pbmRleE9mKFwic19ncyhcIik8MHx8b2MuaW5kZXhPZigiKyJcIi5zX29jKFwiKT49MCkmJm9jLmluZGV4T2YoXCIudGwoXCIpPDApcy5laChvLFwib25jbGlja1wiLDAscy5sYyk7fXJldHVybiByJyk7cy53ZHM9ZnVuY3Rpb24oKXt2YXIgcz10aGlzO2lmKHMuYXB2PjMmJighcy5pc2llfHwhcy5pc21hY3x8cy5hcHY+PTUpKXtpZihzLmImJnMuYi5hdHRhY2hFdmVudClzLmIuYXR0YWNoRXZlbnQoJ29uY2xpYyIrImsnLHMuYmMpO2Vsc2UgaWYocy5iJiZzLmIuYWRkRXZlbnRMaXN0ZW5lcil7aWYocy5uJiYoKHMubi51c2VyQWdlbnQuaW5kZXhPZignV2ViS2l0Jyk+PTAmJnMuZC5jcmVhdGVFdmVudCl8fChzLm4udXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gvMicpPj0wJiZzLndkLk1vdXNlRXZlbnQpKSl7cy5iYmM9MTtzLnVzZUZvcmNlZExpbmtUcmFja2luIisiZz0xO3MuYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycscy5iYyx0cnVlKX1zLmIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHMuYmMsZmFsc2UpfWVsc2Ugcy5laChzLndkLCdvbmxvYWQnLDAscy53ZGwpfX07cy52cz1mdW5jdGlvbih4KXt2YXIgcz10aGlzLHY9cy52aXNpdG9yU2FtcGxpbmcsZz1zLnZpc2l0b3JTYW1wbGluZ0dyb3VwLGs9J3MiKyJfdnNuXycrcy51bisoZz8nXycrZzonJyksbj1zLmNfcihrKSxlPW5ldyBEYXRlLHk9ZS5nZXRZZWFyKCk7ZS5zZXRZZWFyKHkrMTArKHk8MTkwMD8xOTAwOjApKTtpZih2KXt2Kj0xMDA7aWYoIW4pe2lmKCFzLmNfdyhrLHgsZSkpcmV0dXJuIDA7bj14fWlmKG4lMTAwMDA+dilyZXR1cm4gMH1yZXR1cm4gMX07cy5keWFzbWY9ZnVuY3Rpb24odCxtKSIrIntpZih0JiZtJiZtLmluZGV4T2YodCk+PTApcmV0dXJuIDE7cmV0dXJuIDB9O3MuZHlhc2Y9ZnVuY3Rpb24odCxtKXt2YXIgcz10aGlzLGk9dD90LmluZGV4T2YoJz0nKTotMSxuLHg7aWYoaT49MCYmbSl7dmFyIG49dC5zdWJzdHJpbmcoMCxpKSx4PXQuc3Vic3RyaW5nKGkrMSk7aWYocy5wdCh4LCcsJywnZHlhc21mJyxtKSlyZXR1cm4gbn1yZXR1Iisicm4gMH07cy51bnM9ZnVuY3Rpb24oKXt2YXIgcz10aGlzLHg9cy5keW5hbWljQWNjb3VudFNlbGVjdGlvbixsPXMuZHluYW1pY0FjY291bnRMaXN0LG09cy5keW5hbWljQWNjb3VudE1hdGNoLG4saTtzLnVuPXMudW4udG9Mb3dlckNhc2UoKTtpZih4JiZsKXtpZighbSltPXMud2QubG9jYXRpb24uaG9zdDtpZighbS50b0xvd2VyQ2FzZSltPScnK20iKyI7bD1sLnRvTG93ZXJDYXNlKCk7bT1tLnRvTG93ZXJDYXNlKCk7bj1zLnB0KGwsJzsnLCdkeWFzZicsbSk7aWYobilzLnVuPW59aT1zLnVuLmluZGV4T2YoJywnKTtzLmZ1bj1pPDA/cy51bjpzLnVuLnN1YnN0cmluZygwLGkpfTtzLnNhPWZ1bmN0aW9uKHVuKXt2YXIgcz10aGlzO2lmKHMudW4mJnMubXBjKCdzYScsYXJndW1lbnRzKSlyZXR1cm47cyIrIi51bj11bjtpZighcy5vdW4pcy5vdW49dW47ZWxzZSBpZigoJywnK3Mub3VuKycsJykuaW5kZXhPZignLCcrdW4rJywnKTwwKXMub3VuKz0nLCcrdW47cy51bnMoKX07cy5tX2k9ZnVuY3Rpb24obixhKXt2YXIgcz10aGlzLG0sZj1uLnN1YnN0cmluZygwLDEpLHIsbCxpO2lmKCFzLm1fbClzLm1fbD1uZXcgT2JqZWN0O2lmKCFzLm1fbmwpcy5tX25sIisiPW5ldyBBcnJheTttPXMubV9sW25dO2lmKCFhJiZtJiZtLl9lJiYhbS5faSlzLm1fYShuKTtpZighbSl7bT1uZXcgT2JqZWN0LG0uX2M9J3NfbSc7bS5faW49cy53ZC5zX2NfaW47bS5faWw9cy5faWw7bS5faWxbbS5faW5dPW07cy53ZC5zX2NfaW4rKzttLnM9czttLl9uPW47bS5fbD1uZXcgQXJyYXkoJ19jJywnX2luJywnX2lsJywnX2knLCdfZSciKyIsJ19kJywnX2RsJywncycsJ24nLCdfcicsJ19nJywnX2cxJywnX3QnLCdfdDEnLCdfeCcsJ194MScsJ19ycycsJ19ycicsJ19sJyk7cy5tX2xbbl09bTtzLm1fbmxbcy5tX25sLmxlbmd0aF09bn1lbHNlIGlmKG0uX3ImJiFtLl9tKXtyPW0uX3I7ci5fbT1tO2w9bS5fbDtmb3IoaT0wO2k8bC5sZW5ndGg7aSsrKWlmKG1bbFtpXV0pcltsW2ldXT1tWyIrImxbaV1dO3IuX2lsW3IuX2luXT1yO209cy5tX2xbbl09cn1pZihmPT1mLnRvVXBwZXJDYXNlKCkpc1tuXT1tO3JldHVybiBtfTtzLm1fYT1uZXcgRnVuY3Rpb24oJ24nLCdnJywnZScsJ2lmKCFnKWc9XCJtX1wiK247dmFyIHM9c19jX2lsWycrcy5faW4rJ10sYz1zW2crXCJfY1wiXSxtLHgsZj0wO2lmKHMubXBjKFwibV9hXCIsYXJndW1lbnRzKSlyIisiZXR1cm47aWYoIWMpYz1zLndkW1wic19cIitnK1wiX2NcIl07aWYoYyYmc19kKXNbZ109bmV3IEZ1bmN0aW9uKFwic1wiLHNfZnQoc19kKGMpKSk7eD1zW2ddO2lmKCF4KXg9cy53ZFtcXCdzX1xcJytnXTtpZigheCl4PXMud2RbZ107bT1zLm1faShuLDEpO2lmKHgmJighbS5faXx8ZyE9XCJtX1wiK24pKXttLl9pPWY9MTtpZigoXCJcIit4KS5pbmQiKyJleE9mKFwiZnVuY3Rpb25cIik+PTApeChzKTtlbHNlIHMubV9tKFwieFwiLG4seCxlKX1tPXMubV9pKG4sMSk7aWYobS5fZGwpbS5fZGw9bS5fZD0wO3MuZGx0KCk7cmV0dXJuIGYnKTtzLm1fbT1mdW5jdGlvbih0LG4sZCxlKXt0PSdfJyt0O3ZhciBzPXRoaXMsaSx4LG0sZj0nXycrdCxyPTAsdTtpZihzLm1fbCYmcy5tX25sKWZvcihpPTA7aTxzLiIrIm1fbmwubGVuZ3RoO2krKyl7eD1zLm1fbmxbaV07aWYoIW58fHg9PW4pe209cy5tX2koeCk7dT1tW3RdO2lmKHUpe2lmKCgnJyt1KS5pbmRleE9mKCdmdW5jdGlvbicpPj0wKXtpZihkJiZlKXU9bVt0XShkLGUpO2Vsc2UgaWYoZCl1PW1bdF0oZCk7ZWxzZSB1PW1bdF0oKX19aWYodSlyPTE7dT1tW3QrMV07aWYodSYmIW1bZl0pe2lmKCgnJyt1KS5pIisibmRleE9mKCdmdW5jdGlvbicpPj0wKXtpZihkJiZlKXU9bVt0KzFdKGQsZSk7ZWxzZSBpZihkKXU9bVt0KzFdKGQpO2Vsc2UgdT1tW3QrMV0oKX19bVtmXT0xO2lmKHUpcj0xfX1yZXR1cm4gcn07cy5tX2xsPWZ1bmN0aW9uKCl7dmFyIHM9dGhpcyxnPXMubV9kbCxpLG87aWYoZylmb3IoaT0wO2k8Zy5sZW5ndGg7aSsrKXtvPWdbaV07aWYobylzLmwiKyJvYWRNb2R1bGUoby5uLG8udSxvLmQsby5sLG8uZSwxKTtnW2ldPTB9fTtzLmxvYWRNb2R1bGU9ZnVuY3Rpb24obix1LGQsbCxlLGxuKXt2YXIgcz10aGlzLG09MCxpLGcsbz0wLGYxLGYyLGM9cy5oP3MuaDpzLmIsYix0Y2Y7aWYobil7aT1uLmluZGV4T2YoJzonKTtpZihpPj0wKXtnPW4uc3Vic3RyaW5nKGkrMSk7bj1uLnN1YnN0cmluZygwLGkpfSIrImVsc2UgZz1cIm1fXCIrbjttPXMubV9pKG4pfWlmKChsfHwobiYmIXMubV9hKG4sZykpKSYmdSYmcy5kJiZjJiZzLmQuY3JlYXRlRWxlbWVudCl7aWYoZCl7bS5fZD0xO20uX2RsPTF9aWYobG4pe2lmKHMuc3NsKXU9cy5yZXAodSwnaHR0cDonLCdodHRwczonKTtpPSdzX3M6JytzLl9pbisnOicrbisnOicrZztiPSd2YXIgcz1zX2NfaWxbJytzLl9pIisibisnXSxvPXMuZC5nZXRFbGVtZW50QnlJZChcIicraSsnXCIpO2lmKHMmJm8pe2lmKCFvLmwmJnMud2QuJytnKycpe28ubD0xO2lmKG8uaSljbGVhclRpbWVvdXQoby5pKTtvLmk9MDtzLm1fYShcIicrbisnXCIsXCInK2crJ1wiJysoZT8nLFwiJytlKydcIic6JycpKycpfSc7ZjI9Yisnby5jKys7aWYoIXMubWF4RGVsYXkpcy5tYXhEZWxheT0yNTAiKyI7aWYoIW8ubCYmby5jPChzLm1heERlbGF5KjIpLzEwMClvLmk9c2V0VGltZW91dChvLmYyLDEwMCl9JztmMT1uZXcgRnVuY3Rpb24oJ2UnLGIrJ30nKTt0Y2Y9bmV3IEZ1bmN0aW9uKCdzJywnYycsJ2knLCd1JywnZjEnLCdmMicsJ3ZhciBlLG89MDt0cnl7bz1zLmQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtpZihvKXtvLnR5cGU9XCJ0ZXh0LyIrImphdmFzY3JpcHRcIjsnKyhuPydvLmlkPWk7by5kZWZlcj10cnVlO28ub25sb2FkPW8ub25yZWFkeXN0YXRlY2hhbmdlPWYxO28uZjI9ZjI7by5sPTA7JzonJykrJ28uc3JjPXU7Yy5hcHBlbmRDaGlsZChvKTsnKyhuPydvLmM9MDtvLmk9c2V0VGltZW91dChmMiwxMDApJzonJykrJ319Y2F0Y2goZSl7bz0wfXJldHVybiBvJyk7bz10Y2YocyxjLGksIisidSxmMSxmMil9ZWxzZXtvPW5ldyBPYmplY3Q7by5uPW4rJzonK2c7by51PXU7by5kPWQ7by5sPWw7by5lPWU7Zz1zLm1fZGw7aWYoIWcpZz1zLm1fZGw9bmV3IEFycmF5O2k9MDt3aGlsZShpPGcubGVuZ3RoJiZnW2ldKWkrKztnW2ldPW99fWVsc2UgaWYobil7bT1zLm1faShuKTttLl9lPTF9cmV0dXJuIG19O3Mudm9hPWZ1bmN0aW9uKHZvLHIpe3YiKyJhciBzPXRoaXMsbD1zLnZhX2csaSxrLHYseDtmb3IoaT0wO2k8bC5sZW5ndGg7aSsrKXtrPWxbaV07dj12b1trXTtpZih2fHx2b1snIScra10pe2lmKCFyJiYoaz09XCJjb250ZXh0RGF0YVwifHxrPT1cInJldHJpZXZlTGlnaHREYXRhXCIpJiZzW2tdKWZvcih4IGluIHNba10paWYoIXZbeF0pdlt4XT1zW2tdW3hdO3Nba109dn19fTtzLnZvYj1mdSIrIm5jdGlvbih2byxvbmx5U2V0KXt2YXIgcz10aGlzLGw9cy52YV9nLGksaztmb3IoaT0wO2k8bC5sZW5ndGg7aSsrKXtrPWxbaV07dm9ba109c1trXTtpZighb25seVNldCYmIXZvW2tdKXZvWychJytrXT0xfX07cy5kbHQ9bmV3IEZ1bmN0aW9uKCd2YXIgcz1zX2NfaWxbJytzLl9pbisnXSxkPW5ldyBEYXRlLGksdm8sZj0wO2lmKHMuZGxsKWZvcihpIisiPTA7aTxzLmRsbC5sZW5ndGg7aSsrKXt2bz1zLmRsbFtpXTtpZih2byl7aWYoIXMubV9tKFwiZFwiKXx8ZC5nZXRUaW1lKCktdm8uX3Q+PXMubWF4RGVsYXkpe3MuZGxsW2ldPTA7cy50KHZvKX1lbHNlIGY9MX19aWYocy5kbGkpY2xlYXJUaW1lb3V0KHMuZGxpKTtzLmRsaT0wO2lmKGYpe2lmKCFzLmRsaSlzLmRsaT1zZXRUaW1lb3V0KHMuZGx0LHMiKyIubWF4RGVsYXkpfWVsc2Ugcy5kbGw9MCcpO3MuZGw9ZnVuY3Rpb24odm8pe3ZhciBzPXRoaXMsZD1uZXcgRGF0ZTtpZighdm8pdm89bmV3IE9iamVjdDtzLnZvYih2byk7dm8uX3Q9ZC5nZXRUaW1lKCk7aWYoIXMuZGxsKXMuZGxsPW5ldyBBcnJheTtzLmRsbFtzLmRsbC5sZW5ndGhdPXZvO2lmKCFzLm1heERlbGF5KXMubWF4RGVsYXk9MjUwO3MuZCIrImx0KCl9O3MuX3dhaXRpbmdGb3JNYXJrZXRpbmdDbG91ZFZpc2l0b3JJRCA9IGZhbHNlO3MuX2RvbmVXYWl0aW5nRm9yTWFya2V0aW5nQ2xvdWRWaXNpdG9ySUQgPSBmYWxzZTtzLl9tYXJrZXRpbmdDbG91ZFZpc2l0b3JJRENhbGxiYWNrPWZ1bmN0aW9uKG1hcmtldGluZ0Nsb3VkVmlzaXRvcklEKSB7dmFyIHM9dGhpcztzLm1hcmtldGluZ0Nsb3VkIisiVmlzaXRvcklEID0gbWFya2V0aW5nQ2xvdWRWaXNpdG9ySUQ7cy5fZG9uZVdhaXRpbmdGb3JNYXJrZXRpbmdDbG91ZFZpc2l0b3JJRCA9IHRydWU7cy5fY2FsbGJhY2tXaGVuUmVhZHlUb1RyYWNrQ2hlY2soKTt9O3MuX3dhaXRpbmdGb3JBbmFseXRpY3NWaXNpdG9ySUQgPSBmYWxzZTtzLl9kb25lV2FpdGluZ0ZvckFuYWx5dGljc1Zpc2l0b3JJRCAiKyI9IGZhbHNlO3MuX2FuYWx5dGljc1Zpc2l0b3JJRENhbGxiYWNrPWZ1bmN0aW9uKGFuYWx5dGljc1Zpc2l0b3JJRCkge3ZhciBzPXRoaXM7cy5hbmFseXRpY3NWaXNpdG9ySUQgPSBhbmFseXRpY3NWaXNpdG9ySUQ7cy5fZG9uZVdhaXRpbmdGb3JBbmFseXRpY3NWaXNpdG9ySUQgPSB0cnVlO3MuX2NhbGxiYWNrV2hlblJlYWR5VG9UcmFja0NoZWNrKCIrIik7fTtzLl93YWl0aW5nRm9yQXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50ID0gZmFsc2U7cy5fZG9uZVdhaXRpbmdGb3JBdWRpZW5jZU1hbmFnZXJMb2NhdGlvbkhpbnQgPSBmYWxzZTtzLl9hdWRpZW5jZU1hbmFnZXJMb2NhdGlvbkhpbnRDYWxsYmFjaz1mdW5jdGlvbihhdWRpZW5jZU1hbmFnZXJMb2NhdGlvbkhpbnQpIHt2YXIgcz10aGlzO3MuIisiYXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50ID0gYXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50O3MuX2RvbmVXYWl0aW5nRm9yQXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50ID0gdHJ1ZTtzLl9jYWxsYmFja1doZW5SZWFkeVRvVHJhY2tDaGVjaygpO307cy5fd2FpdGluZ0ZvckF1ZGllbmNlTWFuYWdlckJsb2IgPSBmYWxzZTtzLl9kb25lV2EiKyJpdGluZ0ZvckF1ZGllbmNlTWFuYWdlckJsb2IgPSBmYWxzZTtzLl9hdWRpZW5jZU1hbmFnZXJCbG9iQ2FsbGJhY2s9ZnVuY3Rpb24oYXVkaWVuY2VNYW5hZ2VyQmxvYikge3ZhciBzPXRoaXM7cy5hdWRpZW5jZU1hbmFnZXJCbG9iID0gYXVkaWVuY2VNYW5hZ2VyQmxvYjtzLl9kb25lV2FpdGluZ0ZvckF1ZGllbmNlTWFuYWdlckJsb2IgPSB0cnVlOyIrInMuX2NhbGxiYWNrV2hlblJlYWR5VG9UcmFja0NoZWNrKCk7fTtzLmlzUmVhZHlUb1RyYWNrPWZ1bmN0aW9uKCkge3ZhciBzPXRoaXMscmVhZHlUb1RyYWNrID0gdHJ1ZSx2aXNpdG9yID0gcy52aXNpdG9yO2lmICgodmlzaXRvcikgJiYgKHZpc2l0b3IuaXNBbGxvd2VkKCkpKSB7aWYgKCghcy5fd2FpdGluZ0Zvck1hcmtldGluZ0Nsb3VkVmlzaXRvIisicklEKSAmJiAoIXMubWFya2V0aW5nQ2xvdWRWaXNpdG9ySUQpICYmICh2aXNpdG9yLmdldE1hcmtldGluZ0Nsb3VkVmlzaXRvcklEKSkge3MuX3dhaXRpbmdGb3JNYXJrZXRpbmdDbG91ZFZpc2l0b3JJRCA9IHRydWU7cy5tYXJrZXRpbmdDbG91ZFZpc2l0b3JJRCA9IHZpc2l0b3IuZ2V0TWFya2V0aW5nQ2xvdWRWaXNpdG9ySUQoW3Mscy5fbWFya2UiKyJ0aW5nQ2xvdWRWaXNpdG9ySURDYWxsYmFja10pO2lmIChzLm1hcmtldGluZ0Nsb3VkVmlzaXRvcklEKSB7cy5fZG9uZVdhaXRpbmdGb3JNYXJrZXRpbmdDbG91ZFZpc2l0b3JJRCA9IHRydWU7fX1pZiAoKCFzLl93YWl0aW5nRm9yQW5hbHl0aWNzVmlzaXRvcklEKSAmJiAoIXMuYW5hbHl0aWNzVmlzaXRvcklEKSAmJiAodmlzaXRvci5nZXRBbmFseSIrInRpY3NWaXNpdG9ySUQpKSB7cy5fd2FpdGluZ0ZvckFuYWx5dGljc1Zpc2l0b3JJRCA9IHRydWU7cy5hbmFseXRpY3NWaXNpdG9ySUQgPSB2aXNpdG9yLmdldEFuYWx5dGljc1Zpc2l0b3JJRChbcyxzLl9hbmFseXRpY3NWaXNpdG9ySURDYWxsYmFja10pO2lmIChzLmFuYWx5dGljc1Zpc2l0b3JJRCkge3MuX2RvbmVXYWl0aW5nRm9yQW5hbHl0aWNzIisiVmlzaXRvcklEID0gdHJ1ZTt9fWlmICgoIXMuX3dhaXRpbmdGb3JBdWRpZW5jZU1hbmFnZXJMb2NhdGlvbkhpbnQpICYmICghcy5hdWRpZW5jZU1hbmFnZXJMb2NhdGlvbkhpbnQpICYmICh2aXNpdG9yLmdldEF1ZGllbmNlTWFuYWdlckxvY2F0aW9uSGludCkpIHtzLl93YWl0aW5nRm9yQXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50ID0gdHJ1ZTsiKyJzLmF1ZGllbmNlTWFuYWdlckxvY2F0aW9uSGludCA9IHZpc2l0b3IuZ2V0QXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50KFtzLHMuX2F1ZGllbmNlTWFuYWdlckxvY2F0aW9uSGludENhbGxiYWNrXSk7aWYgKHMuYXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50KSB7cy5fZG9uZVdhaXRpbmdGb3JBdWRpZW5jZU1hbmFnZXJMb2NhdGlvbkhpbnQgPSIrIiB0cnVlO319aWYgKCghcy5fd2FpdGluZ0ZvckF1ZGllbmNlTWFuYWdlckJsb2IpICYmICghcy5hdWRpZW5jZU1hbmFnZXJCbG9iKSAmJiAodmlzaXRvci5nZXRBdWRpZW5jZU1hbmFnZXJCbG9iKSkge3MuX3dhaXRpbmdGb3JBdWRpZW5jZU1hbmFnZXJCbG9iID0gdHJ1ZTtzLmF1ZGllbmNlTWFuYWdlckJsb2IgPSB2aXNpdG9yLmdldEF1ZGllbmNlIisiTWFuYWdlckJsb2IoW3Mscy5fYXVkaWVuY2VNYW5hZ2VyQmxvYkNhbGxiYWNrXSk7aWYgKHMuYXVkaWVuY2VNYW5hZ2VyQmxvYikge3MuX2RvbmVXYWl0aW5nRm9yQXVkaWVuY2VNYW5hZ2VyQmxvYiA9IHRydWU7fX1pZiAoKChzLl93YWl0aW5nRm9yTWFya2V0aW5nQ2xvdWRWaXNpdG9ySUQpICAgICAmJiAoIXMuX2RvbmVXYWl0aW5nRm9yTWFya2UiKyJ0aW5nQ2xvdWRWaXNpdG9ySUQpICAgICAmJiAoIXMubWFya2V0aW5nQ2xvdWRWaXNpdG9ySUQpKSB8fCgocy5fd2FpdGluZ0ZvckFuYWx5dGljc1Zpc2l0b3JJRCkgICAgICAgICAgJiYgKCFzLl9kb25lV2FpdGluZ0ZvckFuYWx5dGljc1Zpc2l0b3JJRCkgICAgICAgICAgJiYgKCFzLmFuYWx5dGljc1Zpc2l0b3JJRCkpIHx8KChzLl93YWl0aW5nRiIrIm9yQXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50KSAmJiAoIXMuX2RvbmVXYWl0aW5nRm9yQXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50KSAmJiAoIXMuYXVkaWVuY2VNYW5hZ2VyTG9jYXRpb25IaW50KSkgfHwoKHMuX3dhaXRpbmdGb3JBdWRpZW5jZU1hbmFnZXJCbG9iKSAgICAgICAgICYmICghcy5fZG9uZVdhaXRpbmdGb3JBdWRpZW5jZU1hIisibmFnZXJCbG9iKSAgICAgICAgICYmICghcy5hdWRpZW5jZU1hbmFnZXJCbG9iKSkpIHtyZWFkeVRvVHJhY2sgPSBmYWxzZTt9fXJldHVybiByZWFkeVRvVHJhY2s7fTtzLl9jYWxsYmFja1doZW5SZWFkeVRvVHJhY2tRdWV1ZSA9IG51bGw7cy5fY2FsbGJhY2tXaGVuUmVhZHlUb1RyYWNrSW50ZXJ2YWwgPSAwO3MuY2FsbGJhY2tXaGVuUmVhZHlUb1QiKyJyYWNrPWZ1bmN0aW9uKGNhbGxiYWNrVGhpcyxjYWxsYmFjayxhcmdzKSB7dmFyIHM9dGhpcyxjYWxsYmFja0luZm87Y2FsbGJhY2tJbmZvID0ge307Y2FsbGJhY2tJbmZvLmNhbGxiYWNrVGhpcyA9IGNhbGxiYWNrVGhpcztjYWxsYmFja0luZm8uY2FsbGJhY2sgICAgID0gY2FsbGJhY2s7Y2FsbGJhY2tJbmZvLmFyZ3MgICAgICAgICA9IGFyZ3M7aSIrImYgKHMuX2NhbGxiYWNrV2hlblJlYWR5VG9UcmFja1F1ZXVlID09IG51bGwpIHtzLl9jYWxsYmFja1doZW5SZWFkeVRvVHJhY2tRdWV1ZSA9IFtdO31zLl9jYWxsYmFja1doZW5SZWFkeVRvVHJhY2tRdWV1ZS5wdXNoKGNhbGxiYWNrSW5mbyk7aWYgKHMuX2NhbGxiYWNrV2hlblJlYWR5VG9UcmFja0ludGVydmFsID09IDApIHtzLl9jYWxsYmFja1doIisiZW5SZWFkeVRvVHJhY2tJbnRlcnZhbCA9IHNldEludGVydmFsKHMuX2NhbGxiYWNrV2hlblJlYWR5VG9UcmFja0NoZWNrLDEwMCk7fX07cy5fY2FsbGJhY2tXaGVuUmVhZHlUb1RyYWNrQ2hlY2s9bmV3IEZ1bmN0aW9uKCd2YXIgcz1zX2NfaWxbJytzLl9pbisnXSxjYWxsYmFja051bSxjYWxsYmFja0luZm87aWYgKHMuaXNSZWFkeVRvVHJhY2soKSkiKyIge2lmIChzLl9jYWxsYmFja1doZW5SZWFkeVRvVHJhY2tJbnRlcnZhbCkge2NsZWFySW50ZXJ2YWwocy5fY2FsbGJhY2tXaGVuUmVhZHlUb1RyYWNrSW50ZXJ2YWwpO3MuX2NhbGxiYWNrV2hlblJlYWR5VG9UcmFja0ludGVydmFsID0gMDt9aWYgKHMuX2NhbGxiYWNrV2hlblJlYWR5VG9UcmFja1F1ZXVlICE9IG51bGwpIHt3aGlsZSAocy5fY2FsbCIrImJhY2tXaGVuUmVhZHlUb1RyYWNrUXVldWUubGVuZ3RoID4gMCkge2NhbGxiYWNrSW5mbyA9IHMuX2NhbGxiYWNrV2hlblJlYWR5VG9UcmFja1F1ZXVlLnNoaWZ0KCk7Y2FsbGJhY2tJbmZvLmNhbGxiYWNrLmFwcGx5KGNhbGxiYWNrSW5mby5jYWxsYmFja1RoaXMsY2FsbGJhY2tJbmZvLmFyZ3MpO319fScpO3MuX2hhbmRsZU5vdFJlYWR5VG9UcmFjIisiaz1mdW5jdGlvbih2YXJpYWJsZU92ZXJyaWRlcykge3ZhciBzPXRoaXMsYXJncyx2YXJLZXksdmFyaWFibGVPdmVycmlkZXNDb3B5ID0gbnVsbCxzZXRWYXJpYWJsZXMgPSBudWxsO2lmICghcy5pc1JlYWR5VG9UcmFjaygpKSB7YXJncyA9IFtdO2lmICh2YXJpYWJsZU92ZXJyaWRlcyAhPSBudWxsKSB7dmFyaWFibGVPdmVycmlkZXNDb3B5ID0ge30iKyI7Zm9yICh2YXJLZXkgaW4gdmFyaWFibGVPdmVycmlkZXMpIHt2YXJpYWJsZU92ZXJyaWRlc0NvcHlbdmFyS2V5XSA9IHZhcmlhYmxlT3ZlcnJpZGVzW3ZhcktleV07fX1zZXRWYXJpYWJsZXMgPSB7fTtzLnZvYihzZXRWYXJpYWJsZXMsdHJ1ZSk7YXJncy5wdXNoKHZhcmlhYmxlT3ZlcnJpZGVzQ29weSk7YXJncy5wdXNoKHNldFZhcmlhYmxlcyk7cyIrIi5jYWxsYmFja1doZW5SZWFkeVRvVHJhY2socyxzLnRyYWNrLGFyZ3MpO3JldHVybiB0cnVlO31yZXR1cm4gZmFsc2U7fTtzLmdmaWQ9ZnVuY3Rpb24oKXt2YXIgcz10aGlzLGQ9JzAxMjM0NTY3ODlBQkNERUYnLGs9J3NfZmlkJyxmaWQ9cy5jX3IoayksaD0nJyxsPScnLGksaixtPTgsbj00LGU9bmV3IERhdGUseTtpZighZmlkfHxmaWQuaW5kZXhPIisiZignLScpPDApe2ZvcihpPTA7aTwxNjtpKyspe2o9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKm0pO2grPWQuc3Vic3RyaW5nKGosaisxKTtqPU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpuKTtsKz1kLnN1YnN0cmluZyhqLGorMSk7bT1uPTE2fWZpZD1oKyctJytsO315PWUuZ2V0WWVhcigpO2Uuc2V0WWVhcih5KzIrKHk8MTkwMD8xOTAwOjApKTsiKyJpZighcy5jX3coayxmaWQsZSkpZmlkPTA7cmV0dXJuIGZpZH07cy50cmFjaz1zLnQ9ZnVuY3Rpb24odm8sc2V0VmFyaWFibGVzKXt2YXIgcz10aGlzLG5vdFJlYWR5VG9UcmFjayx0cms9MSx0bT1uZXcgRGF0ZSxzZWQ9TWF0aCYmTWF0aC5yYW5kb20/TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMDAwMDAwMDAwMDAwKTp0bS5nZXRUaW1lKCkscyIrImVzcz0ncycrTWF0aC5mbG9vcih0bS5nZXRUaW1lKCkvMTA4MDAwMDApJTEwK3NlZCx5PXRtLmdldFllYXIoKSx2dD10bS5nZXREYXRlKCkrJy8nK3RtLmdldE1vbnRoKCkrJy8nKyh5PDE5MDA/eSsxOTAwOnkpKycgJyt0bS5nZXRIb3VycygpKyc6Jyt0bS5nZXRNaW51dGVzKCkrJzonK3RtLmdldFNlY29uZHMoKSsnICcrdG0uZ2V0RGF5KCkrJyAnIisiK3RtLmdldFRpbWV6b25lT2Zmc2V0KCksdGNmLHRmcz1zLmd0ZnMoKSx0YT0tMSxxPScnLHFzPScnLGNvZGU9JycsdmI9bmV3IE9iamVjdDtpZiAocy52aXNpdG9yKSB7aWYgKHMudmlzaXRvci5nZXRBdXRoU3RhdGUpIHtzLmF1dGhTdGF0ZSA9IHMudmlzaXRvci5nZXRBdXRoU3RhdGUoKTt9aWYgKCghcy5zdXBwbGVtZW50YWxEYXRhSUQpICYmICgiKyJzLnZpc2l0b3IuZ2V0U3VwcGxlbWVudGFsRGF0YUlEKSkge3Muc3VwcGxlbWVudGFsRGF0YUlEID0gcy52aXNpdG9yLmdldFN1cHBsZW1lbnRhbERhdGFJRChcIkFwcE1lYXN1cmVtZW50OlwiICsgcy5faW4sKHMuZXhwZWN0U3VwcGxlbWVudGFsRGF0YSA/IGZhbHNlIDogdHJ1ZSkpO319aWYocy5tcGMoJ3QnLGFyZ3VtZW50cykpcmV0dXJuO3MuZyIrImwocy52bF9nKTtzLnVucygpO3MubV9sbCgpO25vdFJlYWR5VG9UcmFjayA9IHMuX2hhbmRsZU5vdFJlYWR5VG9UcmFjayh2byk7aWYgKCFub3RSZWFkeVRvVHJhY2spIHtpZiAoc2V0VmFyaWFibGVzKSB7cy52b2Eoc2V0VmFyaWFibGVzKTt9aWYoIXMudGQpe3ZhciB0bD10ZnMubG9jYXRpb24sYSxvLGkseD0nJyxjPScnLHY9JycscD0nJyxidz0nIisiJyxiaD0nJyxqPScxLjAnLGs9cy5jX3coJ3NfY2MnLCd0cnVlJywwKT8nWSc6J04nLGhwPScnLGN0PScnLHBuPTAscHM7aWYoU3RyaW5nJiZTdHJpbmcucHJvdG90eXBlKXtqPScxLjEnO2lmKGoubWF0Y2gpe2o9JzEuMic7aWYodG0uc2V0VVRDRGF0ZSl7aj0nMS4zJztpZihzLmlzaWUmJnMuaXNtYWMmJnMuYXB2Pj01KWo9JzEuNCc7aWYocG4udG8iKyJQcmVjaXNpb24pe2o9JzEuNSc7YT1uZXcgQXJyYXk7aWYoYS5mb3JFYWNoKXtqPScxLjYnO2k9MDtvPW5ldyBPYmplY3Q7dGNmPW5ldyBGdW5jdGlvbignbycsJ3ZhciBlLGk9MDt0cnl7aT1uZXcgSXRlcmF0b3Iobyl9Y2F0Y2goZSl7fXJldHVybiBpJyk7aT10Y2Yobyk7aWYoaSYmaS5uZXh0KXtqPScxLjcnO2lmKGEucmVkdWNlKXtqPScxLjgnOyIrImlmKGoudHJpbSl7aj0nMS44LjEnO2lmKERhdGUucGFyc2Upe2o9JzEuOC4yJztpZihPYmplY3QuY3JlYXRlKWo9JzEuOC41J319fX19fX19fWlmKHMuYXB2Pj00KXg9c2NyZWVuLndpZHRoKyd4JytzY3JlZW4uaGVpZ2h0O2lmKHMuaXNuc3x8cy5pc29wZXJhKXtpZihzLmFwdj49Myl7dj1zLm4uamF2YUVuYWJsZWQoKT8nWSc6J04nO2lmKHMuYXB2IisiPj00KXtjPXNjcmVlbi5waXhlbERlcHRoO2J3PXMud2QuaW5uZXJXaWR0aDtiaD1zLndkLmlubmVySGVpZ2h0fX1zLnBsPXMubi5wbHVnaW5zfWVsc2UgaWYocy5pc2llKXtpZihzLmFwdj49NCl7dj1zLm4uamF2YUVuYWJsZWQoKT8nWSc6J04nO2M9c2NyZWVuLmNvbG9yRGVwdGg7aWYocy5hcHY+PTUpe2J3PXMuZC5kb2N1bWVudEVsZW1lbnQub2YiKyJmc2V0V2lkdGg7Ymg9cy5kLmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQ7aWYoIXMuaXNtYWMmJnMuYil7dGNmPW5ldyBGdW5jdGlvbigncycsJ3RsJywndmFyIGUsaHA9MDt0cnl7cy5iLmFkZEJlaGF2aW9yKFwiI2RlZmF1bHQjaG9tZVBhZ2VcIik7aHA9cy5iLmlzSG9tZVBhZ2UodGwpP1wiWVwiOlwiTlwifWNhdGNoKGUpe31yZXR1cm4gaCIrInAnKTtocD10Y2Yocyx0bCk7dGNmPW5ldyBGdW5jdGlvbigncycsJ3ZhciBlLGN0PTA7dHJ5e3MuYi5hZGRCZWhhdmlvcihcIiNkZWZhdWx0I2NsaWVudENhcHNcIik7Y3Q9cy5iLmNvbm5lY3Rpb25UeXBlfWNhdGNoKGUpe31yZXR1cm4gY3QnKTtjdD10Y2Yocyl9fX1lbHNlIHI9Jyd9aWYocy5wbCl3aGlsZShwbjxzLnBsLmxlbmd0aCYmcG48MzApIisie3BzPXMuZmwocy5wbFtwbl0ubmFtZSwxMDApKyc7JztpZihwLmluZGV4T2YocHMpPDApcCs9cHM7cG4rK31zLnJlc29sdXRpb249eDtzLmNvbG9yRGVwdGg9YztzLmphdmFzY3JpcHRWZXJzaW9uPWo7cy5qYXZhRW5hYmxlZD12O3MuY29va2llc0VuYWJsZWQ9aztzLmJyb3dzZXJXaWR0aD1idztzLmJyb3dzZXJIZWlnaHQ9Ymg7cy5jb25uZWN0aW8iKyJuVHlwZT1jdDtzLmhvbWVwYWdlPWhwO3MucGx1Z2lucz1wO3MudGQ9MX1pZih2byl7cy52b2IodmIpO3Mudm9hKHZvKX1pZighcy5hbmFseXRpY3NWaXNpdG9ySUQmJiFzLm1hcmtldGluZ0Nsb3VkVmlzaXRvcklEKXMuZmlkPXMuZ2ZpZCgpO2lmKCh2byYmdm8uX3QpfHwhcy5tX20oJ2QnKSl7aWYocy51c2VQbHVnaW5zKXMuZG9QbHVnaW5zKHMpOyIrImlmKCFzLmFib3J0KXt2YXIgbD1zLndkLmxvY2F0aW9uLHI9dGZzLmRvY3VtZW50LnJlZmVycmVyO2lmKCFzLnBhZ2VVUkwpcy5wYWdlVVJMPWwuaHJlZj9sLmhyZWY6bDtpZighcy5yZWZlcnJlciYmIXMuXzFfcmVmZXJyZXIpcy5yZWZlcnJlcj1yO3MuXzFfcmVmZXJyZXI9MTtzLm1fbSgnZycpO2lmKHMubG5rfHxzLmVvKXt2YXIgbz1zLmVvP3MuIisiZW86cy5sbmsscD1zLnBhZ2VOYW1lLHc9MSx0PXMub3Qobyksbj1zLm9pZChvKSx4PW8uc19vaWR0LGgsbCxpLG9jO2lmKHMuZW8mJm89PXMuZW8pe3doaWxlKG8mJiFuJiZ0IT0nQk9EWScpe289by5wYXJlbnRFbGVtZW50P28ucGFyZW50RWxlbWVudDpvLnBhcmVudE5vZGU7aWYobyl7dD1zLm90KG8pO249cy5vaWQobyk7eD1vLnNfb2lkdH19aWYiKyIoIW58fHQ9PSdCT0RZJylvPScnO2lmKG8pe29jPW8ub25jbGljaz8nJytvLm9uY2xpY2s6Jyc7aWYoKG9jLmluZGV4T2YoJ3NfZ3MoJyk+PTAmJm9jLmluZGV4T2YoJy5zX29jKCcpPDApfHxvYy5pbmRleE9mKCcudGwoJyk+PTApbz0wfX1pZihvKXtpZihuKXRhPW8udGFyZ2V0O2g9cy5vaChvKTtpPWguaW5kZXhPZignPycpO2g9cy5saW5rTGVhdiIrImVRdWVyeVN0cmluZ3x8aTwwP2g6aC5zdWJzdHJpbmcoMCxpKTtsPXMubGlua05hbWU7dD1zLmxpbmtUeXBlP3MubGlua1R5cGUudG9Mb3dlckNhc2UoKTpzLmx0KGgpO2lmKHQmJihofHxsKSl7cy5wZT0nbG5rXycrKHQ9PSdkJ3x8dD09J2UnP3Q6J28nKTtzLnBldjE9KGg/cy5hcGUoaCk6JycpO3MucGV2Mj0obD9zLmFwZShsKTonJyl9ZWxzZSB0Iisicms9MDtpZihzLnRyYWNrSW5saW5lU3RhdHMpe2lmKCFwKXtwPXMucGFnZVVSTDt3PTB9dD1zLm90KG8pO2k9by5zb3VyY2VJbmRleDtpZihvLmRhdGFzZXQmJm8uZGF0YXNldC5zT2JqZWN0SWQpe3Mud2Quc19vYmplY3RJRD1vLmRhdGFzZXQuc09iamVjdElkO31lbHNlIGlmKG8uZ2V0QXR0cmlidXRlJiZvLmdldEF0dHJpYnV0ZSgnZGF0YS1zLW8iKyJiamVjdC1pZCcpKXtzLndkLnNfb2JqZWN0SUQ9by5nZXRBdHRyaWJ1dGUoJ2RhdGEtcy1vYmplY3QtaWQnKTt9ZWxzZSBpZihzLnVzZUZvcmNlZExpbmtUcmFja2luZyl7cy53ZC5zX29iamVjdElEPScnO29jPW8ub25jbGljaz8nJytvLm9uY2xpY2s6Jyc7aWYob2Mpe3ZhciBvY2I9b2MuaW5kZXhPZignc19vYmplY3RJRCcpLG9jZSxvY3Esb2N4OyIrImlmKG9jYj49MCl7b2NiKz0xMDt3aGlsZShvY2I8b2MubGVuZ3RoJiYoXCI9IFxcdFxcclxcblwiKS5pbmRleE9mKG9jLmNoYXJBdChvY2IpKT49MClvY2IrKztpZihvY2I8b2MubGVuZ3RoKXtvY2U9b2NiO29jcT1vY3g9MDt3aGlsZShvY2U8b2MubGVuZ3RoJiYob2MuY2hhckF0KG9jZSkhPSc7J3x8b2NxKSl7aWYob2NxKXtpZihvYy5jaGFyQXQoIisib2NlKT09b2NxJiYhb2N4KW9jcT0wO2Vsc2UgaWYob2MuY2hhckF0KG9jZSk9PVwiXFxcXFwiKW9jeD0hb2N4O2Vsc2Ugb2N4PTA7fWVsc2V7b2NxPW9jLmNoYXJBdChvY2UpO2lmKG9jcSE9J1wiJyYmb2NxIT1cIidcIilvY3E9MH1vY2UrKzt9b2M9b2Muc3Vic3RyaW5nKG9jYixvY2UpO2lmKG9jKXtvLnNfc29pZD1uZXcgRnVuY3Rpb24oJ3MnLCciKyJ2YXIgZTt0cnl7cy53ZC5zX29iamVjdElEPScrb2MrJ31jYXRjaChlKXt9Jyk7by5zX3NvaWQocyl9fX19fWlmKHMuZ2coJ29iamVjdElEJykpe249cy5nZygnb2JqZWN0SUQnKTt4PTE7aT0xfWlmKHAmJm4mJnQpcXM9JyZwaWQ9JytzLmFwZShzLmZsKHAsMjU1KSkrKHc/JyZwaWR0PScrdzonJykrJyZvaWQ9JytzLmFwZShzLmZsKG4sMTAwKSkrKCIrIng/JyZvaWR0PScreDonJykrJyZvdD0nK3MuYXBlKHQpKyhpPycmb2k9JytpOicnKX19ZWxzZSB0cms9MH1pZih0cmt8fHFzKXtzLnNhbXBsZWQ9cy52cyhzZWQpO2lmKHRyayl7aWYocy5zYW1wbGVkKWNvZGU9cy5tcihzZXNzLCh2dD8nJnQ9JytzLmFwZSh2dCk6JycpK3MuaGF2KCkrcSsocXM/cXM6cy5ycSgpKSwwLHRhKTtxcz0nJztzLm1fbSgnIisidCcpO2lmKHMucF9yKXMucF9yKCk7cy5yZWZlcnJlcj1zLmxpZ2h0UHJvZmlsZUlEPXMucmV0cmlldmVMaWdodFByb2ZpbGVzPXMuZGVsZXRlTGlnaHRQcm9maWxlcz0nJ31zLnNxKHFzKX19fWVsc2Ugcy5kbCh2byk7aWYodm8pcy52b2EodmIsMSk7fXMuYWJvcnQ9MDtzLnN1cHBsZW1lbnRhbERhdGFJRD1zLnBhZ2VVUkxSZXN0PXMubG5rPXMuZW8iKyI9cy5saW5rTmFtZT1zLmxpbmtUeXBlPXMud2Quc19vYmplY3RJRD1zLnBwdT1zLnBlPXMucGV2MT1zLnBldjI9cy5wZXYzPScnO2lmKHMucGcpcy53ZC5zX2xuaz1zLndkLnNfZW89cy53ZC5zX2xpbmtOYW1lPXMud2Quc19saW5rVHlwZT0nJztyZXR1cm4gY29kZX07cy50cmFja0xpbms9cy50bD1mdW5jdGlvbihvLHQsbix2byxmKXt2YXIgcz10aCIrImlzO3MubG5rPW87cy5saW5rVHlwZT10O3MubGlua05hbWU9bjtpZihmKXtzLmJjdD1vO3MuYmNmPWZ9cy50KHZvKX07cy50cmFja0xpZ2h0PWZ1bmN0aW9uKHAsc3MsaSx2byl7dmFyIHM9dGhpcztzLmxpZ2h0UHJvZmlsZUlEPXA7cy5saWdodFN0b3JlRm9yU2Vjb25kcz1zcztzLmxpZ2h0SW5jcmVtZW50Qnk9aTtzLnQodm8pfTtzLnNldFRhZ0NvIisibnRhaW5lcj1mdW5jdGlvbihuKXt2YXIgcz10aGlzLGw9cy53ZC5zX2NfaWwsaSx0LHgseTtzLnRjbj1uO2lmKGwpZm9yKGk9MDtpPGwubGVuZ3RoO2krKyl7dD1sW2ldO2lmKHQmJnQuX2M9PSdzX2wnJiZ0LnRhZ0NvbnRhaW5lck5hbWU9PW4pe3Mudm9hKHQpO2lmKHQubG1xKWZvcihpPTA7aTx0LmxtcS5sZW5ndGg7aSsrKXt4PXQubG1xW2ldO3kiKyI9J21fJyt4Lm47aWYoIXNbeV0mJiFzW3krJ19jJ10pe3NbeV09dFt5XTtzW3krJ19jJ109dFt5KydfYyddfXMubG9hZE1vZHVsZSh4Lm4seC51LHguZCl9aWYodC5tbClmb3IoeCBpbiB0Lm1sKWlmKHNbeF0pe3k9c1t4XTt4PXQubWxbeF07Zm9yKGkgaW4geClpZighT2JqZWN0LnByb3RvdHlwZVtpXSl7aWYodHlwZW9mKHhbaV0pIT0nZnVuY3RpbyIrIm4nfHwoJycreFtpXSkuaW5kZXhPZignc19jX2lsJyk8MCl5W2ldPXhbaV19fWlmKHQubW1xKWZvcihpPTA7aTx0Lm1tcS5sZW5ndGg7aSsrKXt4PXQubW1xW2ldO2lmKHNbeC5tXSl7eT1zW3gubV07aWYoeVt4LmZdJiZ0eXBlb2YoeVt4LmZdKT09J2Z1bmN0aW9uJyl7aWYoeC5hKXlbeC5mXS5hcHBseSh5LHguYSk7ZWxzZSB5W3guZl0uYXBwbHkoIisieSl9fX1pZih0LnRxKWZvcihpPTA7aTx0LnRxLmxlbmd0aDtpKyspcy50KHQudHFbaV0pO3Qucz1zO3JldHVybn19fTtzLndkPXdpbmRvdztzLnNzbD0ocy53ZC5sb2NhdGlvbi5wcm90b2NvbC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2h0dHBzJyk+PTApO3MuZD1kb2N1bWVudDtzLmI9cy5kLmJvZHk7aWYocy5kLmdldEVsZW1lbnRzQnlUYWdOYW0iKyJlKXtzLmg9cy5kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdIRUFEJyk7aWYocy5oKXMuaD1zLmhbMF19cy5uPW5hdmlnYXRvcjtzLnU9cy5uLnVzZXJBZ2VudDtzLm5zNj1zLnUuaW5kZXhPZignTmV0c2NhcGU2LycpO3ZhciBhcG49cy5uLmFwcE5hbWUsdj1zLm4uYXBwVmVyc2lvbixpZT12LmluZGV4T2YoJ01TSUUgJyksbz1zLnUuaW5kZXhPZignTyIrInBlcmEgJyksaTtpZih2LmluZGV4T2YoJ09wZXJhJyk+PTB8fG8+MClhcG49J09wZXJhJztzLmlzaWU9KGFwbj09J01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicpO3MuaXNucz0oYXBuPT0nTmV0c2NhcGUnKTtzLmlzb3BlcmE9KGFwbj09J09wZXJhJyk7cy5pc21hYz0ocy51LmluZGV4T2YoJ01hYycpPj0wKTtpZihvPjApcy5hcHY9cGFyc2VGIisibG9hdChzLnUuc3Vic3RyaW5nKG8rNikpO2Vsc2UgaWYoaWU+MCl7cy5hcHY9cGFyc2VJbnQoaT12LnN1YnN0cmluZyhpZSs1KSk7aWYocy5hcHY+MylzLmFwdj1wYXJzZUZsb2F0KGkpfWVsc2UgaWYocy5uczY+MClzLmFwdj1wYXJzZUZsb2F0KHMudS5zdWJzdHJpbmcocy5uczYrMTApKTtlbHNlIHMuYXB2PXBhcnNlRmxvYXQodik7cy5lbT0wO2kiKyJmKHMuZW0udG9QcmVjaXNpb24pcy5lbT0zO2Vsc2UgaWYoU3RyaW5nLmZyb21DaGFyQ29kZSl7aT1lc2NhcGUoU3RyaW5nLmZyb21DaGFyQ29kZSgyNTYpKS50b1VwcGVyQ2FzZSgpO3MuZW09KGk9PSclQzQlODAnPzI6KGk9PSclVTAxMDAnPzE6MCkpfWlmKHMub3VuKXMuc2Eocy5vdW4pO3Muc2EodW4pO3MudmxfbD0nc3VwcGxlbWVudGFsRGF0YSIrIklELHRpbWVzdGFtcCxkeW5hbWljVmFyaWFibGVQcmVmaXgsdmlzaXRvcklELG1hcmtldGluZ0Nsb3VkVmlzaXRvcklELGFuYWx5dGljc1Zpc2l0b3JJRCxhdWRpZW5jZU1hbmFnZXJMb2NhdGlvbkhpbnQsZmlkLHZtayx2aXNpdG9yTWlncmF0aW9uS2V5LHZpc2l0b3JNaWdyYXRpb25TZXJ2ZXIsdmlzaXRvck1pZ3JhdGlvblNlcnZlclNlY3VyZSxwIisicHUsY2hhclNldCx2aXNpdG9yTmFtZXNwYWNlLGNvb2tpZURvbWFpblBlcmlvZHMsY29va2llTGlmZXRpbWUscGFnZU5hbWUscGFnZVVSTCxyZWZlcnJlcixjb250ZXh0RGF0YSxjdXJyZW5jeUNvZGUsbGlnaHRQcm9maWxlSUQsbGlnaHRTdG9yZUZvclNlY29uZHMsbGlnaHRJbmNyZW1lbnRCeSxyZXRyaWV2ZUxpZ2h0UHJvZmlsZXMsZGVsZXRlTGkiKyJnaHRQcm9maWxlcyxyZXRyaWV2ZUxpZ2h0RGF0YSc7cy52YV9sPXMuc3Aocy52bF9sLCcsJyk7cy52bF9tcj1zLnZsX209J3RpbWVzdGFtcCxjaGFyU2V0LHZpc2l0b3JOYW1lc3BhY2UsY29va2llRG9tYWluUGVyaW9kcyxjb29raWVMaWZldGltZSxjb250ZXh0RGF0YSxsaWdodFByb2ZpbGVJRCxsaWdodFN0b3JlRm9yU2Vjb25kcyxsaWdodEluYyIrInJlbWVudEJ5JztzLnZsX3Q9cy52bF9sKycsdmFyaWFibGVQcm92aWRlcixjaGFubmVsLHNlcnZlcixwYWdlVHlwZSx0cmFuc2FjdGlvbklELHB1cmNoYXNlSUQsY2FtcGFpZ24sc3RhdGUsemlwLGV2ZW50cyxldmVudHMyLHByb2R1Y3RzLGF1ZGllbmNlTWFuYWdlckJsb2IsYXV0aFN0YXRlLGxpbmtOYW1lLGxpbmtUeXBlJzt2YXIgbjtmb3Iobj0xIisiO248PTc1O24rKyl7cy52bF90Kz0nLHByb3AnK24rJyxlVmFyJytuO3MudmxfbSs9Jyxwcm9wJytuKycsZVZhcicrbn1mb3Iobj0xO248PTU7bisrKXMudmxfdCs9JyxoaWVyJytuO2ZvcihuPTE7bjw9MztuKyspcy52bF90Kz0nLGxpc3QnK247cy52YV9tPXMuc3Aocy52bF9tLCcsJyk7cy52bF9sMj0nLHRudCxwZSxwZXYxLHBldjIscGV2MyxyZXMiKyJvbHV0aW9uLGNvbG9yRGVwdGgsamF2YXNjcmlwdFZlcnNpb24samF2YUVuYWJsZWQsY29va2llc0VuYWJsZWQsYnJvd3NlcldpZHRoLGJyb3dzZXJIZWlnaHQsY29ubmVjdGlvblR5cGUsaG9tZXBhZ2UscGFnZVVSTFJlc3QscGx1Z2lucyc7cy52bF90Kz1zLnZsX2wyO3MudmFfdD1zLnNwKHMudmxfdCwnLCcpO3MudmxfZz1zLnZsX3QrJyx0cmFjayIrImluZ1NlcnZlcix0cmFja2luZ1NlcnZlclNlY3VyZSx0cmFja2luZ1NlcnZlckJhc2UsZnBDb29raWVEb21haW5QZXJpb2RzLGRpc2FibGVCdWZmZXJlZFJlcXVlc3RzLG1vYmlsZSx2aXNpdG9yU2FtcGxpbmcsdmlzaXRvclNhbXBsaW5nR3JvdXAsZHluYW1pY0FjY291bnRTZWxlY3Rpb24sZHluYW1pY0FjY291bnRMaXN0LGR5bmFtaWNBY2NvdW50IisiTWF0Y2gsdHJhY2tEb3dubG9hZExpbmtzLHRyYWNrRXh0ZXJuYWxMaW5rcyx0cmFja0lubGluZVN0YXRzLGxpbmtMZWF2ZVF1ZXJ5U3RyaW5nLGxpbmtEb3dubG9hZEZpbGVUeXBlcyxsaW5rRXh0ZXJuYWxGaWx0ZXJzLGxpbmtJbnRlcm5hbEZpbHRlcnMsbGlua1RyYWNrVmFycyxsaW5rVHJhY2tFdmVudHMsbGlua05hbWVzLGxuayxlbyxsaWdodFQiKyJyYWNrVmFycyxfMV9yZWZlcnJlcix1bic7cy52YV9nPXMuc3Aocy52bF9nLCcsJyk7cy5wZz1wZztzLmdsKHMudmxfZyk7cy5jb250ZXh0RGF0YT1uZXcgT2JqZWN0O3MucmV0cmlldmVMaWdodERhdGE9bmV3IE9iamVjdDtpZighc3Mpcy53ZHMoKTtpZihwZyl7cy53ZC5zX2NvPWZ1bmN0aW9uKG8pe3JldHVybiBvfTtzLndkLnNfZ3M9ZnVuY3RpbyIrIm4odW4pe3NfZ2kodW4sMSwxKS50KCl9O3Mud2Quc19kYz1mdW5jdGlvbih1bil7c19naSh1biwxKS50KCl9fSIsdz13aW5kb3csbD13LnNfY19pbCxuPW5hdmlnYXRvcix1PW4udXNlckFnZW50LHY9bi5hcHBWZXJzaW9uLGU9di5pbmRleE9mKCdNU0lFICcpLG09dS5pbmRleE9mKCdOZXRzY2FwZTYvJyksYSxpLGoseCxzO2lmKHVuKXt1bj11bi50b0xvd2VyQ2FzZSgpO2lmKGwpZm9yKGo9MDtqPDI7aisrKWZvcihpPTA7aTxsLmxlbmd0aDtpKyspe3M9bFtpXTt4PXMuX2M7aWYoKCF4fHx4PT0nc19jJ3x8KGo+MCYmeD09J3NfbCcpKSYmKHMub3VuPT11bnx8KHMuZnMmJnMuc2EmJnMuZnMocy5vdW4sdW4pKSkpe2lmKHMuc2Epcy5zYSh1bik7aWYoeD09J3NfYycpcmV0dXJuIHN9ZWxzZSBzPTB9fXcuc19hbj0nMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonO3cuc19zcD1uZXcgRnVuY3Rpb24oIngiLCJkIiwidmFyIGE9bmV3IEFycmF5LGk9MCxqO2lmKHgpe2lmKHguc3BsaXQpYT14LnNwbGl0KGQpO2Vsc2UgaWYoIWQpZm9yKGk9MDtpPHgubGVuZ3RoO2krKylhW2EubGVuZ3RoXT14LnN1YnN0cmluZyhpLGkrMSk7ZWxzZSB3aGlsZShpPj0wKXtqPXguaW5kZXhPZihkLGkpO2FbYS5sZW5ndGhdPXguc3Vic3QiKyJyaW5nKGksajwwP3gubGVuZ3RoOmopO2k9ajtpZihpPj0wKWkrPWQubGVuZ3RofX1yZXR1cm4gYSIpO3cuc19qbj1uZXcgRnVuY3Rpb24oImEiLCJkIiwidmFyIHg9JycsaSxqPWEubGVuZ3RoO2lmKGEmJmo+MCl7eD1hWzBdO2lmKGo+MSl7aWYoYS5qb2luKXg9YS5qb2luKGQpO2Vsc2UgZm9yKGk9MTtpPGo7aSsrKXgrPWQrYVtpXX19cmV0dXJuIHgiKTt3LnNfcmVwPW5ldyBGdW5jdGlvbigieCIsIm8iLCJuIiwicmV0dXJuIHNfam4oc19zcCh4LG8pLG4pIik7dy5zX2Q9bmV3IEZ1bmN0aW9uKCJ4IiwidmFyIHQ9J2BeQCQjJyxsPXNfYW4sbDI9bmV3IE9iamVjdCx4MixkLGI9MCxrLGk9eC5sYXN0SW5kZXhPZignfn4nKSxqLHYsdztpZihpPjApe2Q9eC5zdWJzdHJpbmcoMCxpKTt4PXguc3Vic3RyaW5nKGkrMik7bD1zX3NwKGwsJycpO2ZvcihpPTA7aTw2MjtpKyspbDJbbFtpXV09aTt0PXNfc3AodCwnJyk7ZCIrIj1zX3NwKGQsJ34nKTtpPTA7d2hpbGUoaTw1KXt2PTA7aWYoeC5pbmRleE9mKHRbaV0pPj0wKSB7eDI9c19zcCh4LHRbaV0pO2ZvcihqPTE7ajx4Mi5sZW5ndGg7aisrKXtrPXgyW2pdLnN1YnN0cmluZygwLDEpO3c9dFtpXStrO2lmKGshPScgJyl7dj0xO3c9ZFtiK2wyW2tdXX14MltqXT13K3gyW2pdLnN1YnN0cmluZygxKX19aWYodil4PXNfam4oIisieDIsJycpO2Vsc2V7dz10W2ldKycgJztpZih4LmluZGV4T2Yodyk+PTApeD1zX3JlcCh4LHcsdFtpXSk7aSsrO2IrPTYyfX19cmV0dXJuIHgiKTt3LnNfZmU9bmV3IEZ1bmN0aW9uKCJjIiwicmV0dXJuIHNfcmVwKHNfcmVwKHNfcmVwKGMsJ1xcXFwnLCdcXFxcXFxcXCcpLCdcIicsJ1xcXFxcIicpLFwiXFxuXCIsXCJcXFxcblwiKSIpO3cuc19mYT1uZXcgRnVuY3Rpb24oImYiLCJ2YXIgcz1mLmluZGV4T2YoJygnKSsxLGU9Zi5pbmRleE9mKCcpJyksYT0nJyxjO3doaWxlKHM+PTAmJnM8ZSl7Yz1mLnN1YnN0cmluZyhzLHMrMSk7aWYoYz09JywnKWErPSdcIixcIic7ZWxzZSBpZigoXCJcXG5cXHJcXHQgXCIpLmluZGV4T2YoYyk8MClhKz1jO3MrK31yZXR1cm4gYT8nXCInK2ErJ1wiJzoiKyJhIik7dy5zX2Z0PW5ldyBGdW5jdGlvbigiYyIsImMrPScnO3ZhciBzLGUsbyxhLGQscSxmLGgseDtzPWMuaW5kZXhPZignPWZ1bmN0aW9uKCcpO3doaWxlKHM+PTApe3MrKztkPTE7cT0nJzt4PTA7Zj1jLnN1YnN0cmluZyhzKTthPXNfZmEoZik7ZT1vPWMuaW5kZXhPZigneycscyk7ZSsrO3doaWxlKGQ+MCl7aD1jLnN1YnN0cmluZyhlLGUrMSk7aWYocSl7aSIrImYoaD09cSYmIXgpcT0nJztpZihoPT0nXFxcXCcpeD14PzA6MTtlbHNlIHg9MH1lbHNle2lmKGg9PSdcIid8fGg9PVwiJ1wiKXE9aDtpZihoPT0neycpZCsrO2lmKGg9PSd9JylkLS19aWYoZD4wKWUrK31jPWMuc3Vic3RyaW5nKDAscykrJ25ldyBGdW5jdGlvbignKyhhP2ErJywnOicnKSsnXCInK3NfZmUoYy5zdWJzdHJpbmcobysxLGUpKSsnXCIpIisiJytjLnN1YnN0cmluZyhlKzEpO3M9Yy5pbmRleE9mKCc9ZnVuY3Rpb24oJyl9cmV0dXJuIGM7Iik7Yz1zX2QoYyk7aWYoZT4wKXthPXBhcnNlSW50KGk9di5zdWJzdHJpbmcoZSs1KSk7aWYoYT4zKWE9cGFyc2VGbG9hdChpKX1lbHNlIGlmKG0+MClhPXBhcnNlRmxvYXQodS5zdWJzdHJpbmcobSsxMCkpO2Vsc2UgYT1wYXJzZUZsb2F0KHYpO2lmKGE8NXx8di5pbmRleE9mKCdPcGVyYScpPj0wfHx1LmluZGV4T2YoJ09wZXJhJyk+PTApYz1zX2Z0KGMpO2lmKCFzKXtzPW5ldyBPYmplY3Q7aWYoIXcuc19jX2luKXt3LnNfY19pbD1uZXcgQXJyYXk7dy5zX2NfaW49MH1zLl9pbD13LnNfY19pbDtzLl9pbj13LnNfY19pbjtzLl9pbFtzLl9pbl09czt3LnNfY19pbisrO31zLl9jPSdzX2MnOyhuZXcgRnVuY3Rpb24oInMiLCJ1biIsInBnIiwic3MiLGMpKShzLHVuLHBnLHNzKTtyZXR1cm4gc30KZnVuY3Rpb24gc19naXFmKCl7dmFyIHc9d2luZG93LHE9dy5zX2dpcSxpLHQscztpZihxKWZvcihpPTA7aTxxLmxlbmd0aDtpKyspe3Q9cVtpXTtzPXNfZ2kodC5vdW4pO3Muc2EodC51bik7cy5zZXRUYWdDb250YWluZXIodC50YWdDb250YWluZXJOYW1lKX13LnNfZ2lxPTB9c19naXFmKCk=]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 09:48:50 IST 2020</time>
    <url><![CDATA[http://10.10.10.18/js/vendor/vendor-48ca455c.js.pagespeed.jm.V7Qfw6bd5C.js]]></url>
    <host ip="10.10.10.18">10.10.10.18</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/js/vendor/vendor-48ca455c.js.pagespeed.jm.V7Qfw6bd5C.js]]></path>
    <extension>js</extension>
    <request base64="true"><![CDATA[R0VUIC9qcy92ZW5kb3IvdmVuZG9yLTQ4Y2E0NTVjLmpzLnBhZ2VzcGVlZC5qbS5WN1FmdzZiZDVDLmpzIEhUVFAvMS4xDQpIb3N0OiAxMC4xMC4xMC4xOA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgcnY6NjguMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC82OC4wDQpBY2NlcHQ6ICovKg0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuNQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpETlQ6IDENCkNvbm5lY3Rpb246IGNsb3NlDQpSZWZlcmVyOiBodHRwOi8vMTAuMTAuMTAuMTgvDQpDb29raWU6IHNfY2M9dHJ1ZTsgc19maWQ9MUQ4N0M0QzVGMUZERDUxOS0yMTg5RjdBRDA4Qjg1QzJFOyBzX25yPTE1OTA2MzcxMzkwMDA7IHNfc3E9JTVCJTVCQiU1RCU1RA0KDQo=]]></request>
    <status>200</status>
    <responselength>182358</responselength>
    <mimetype>script</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA0OjE4OjQ4IEdNVA0KU2VydmVyOiBBcGFjaGUNClgtRnJhbWUtT3B0aW9uczogU0FNRU9SSUdJTg0KTGFzdC1Nb2RpZmllZDogU2F0LCAxNCBOb3YgMjAxNSAxODoxMTo1MyBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNCkV4cGlyZXM6IFRodSwgMjggTWF5IDIwMjAgMDQ6MjM6MjggR01UDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTMwMCxwcml2YXRlDQpDb250ZW50LUxlbmd0aDogMTgyMDA5DQpDb25uZWN0aW9uOiBjbG9zZQ0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQoNCndpbmRvdy5Nb2Rlcm5penI9ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoZSl7Xy5jc3NUZXh0PWV9ZnVuY3Rpb24gcihlLHQpe3JldHVybiBpKHguam9pbihlKyI7IikrKHR8fCIiKSl9ZnVuY3Rpb24gcyhlLHQpe3JldHVybiB0eXBlb2YgZT09PXR9ZnVuY3Rpb24gbyhlLHQpe3JldHVybiEhfigiIitlKS5pbmRleE9mKHQpfWZ1bmN0aW9uIGEoZSx0KXtmb3IodmFyIGkgaW4gZSl7dmFyIHI9ZVtpXTtpZighbyhyLCItIikmJl9bcl0hPT1uKXJldHVybiJwZngiPT10P3I6ITB9cmV0dXJuITF9ZnVuY3Rpb24gbChlLHQsaSl7Zm9yKHZhciByIGluIGUpe3ZhciBvPXRbZVtyXV07aWYobyE9PW4pcmV0dXJuIGk9PT0hMT9lW3JdOnMobywiZnVuY3Rpb24iKT9vLmJpbmQoaXx8dCk6b31yZXR1cm4hMX1mdW5jdGlvbiBjKGUsdCxuKXt2YXIgaT1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSkscj0oZSsiICIrRS5qb2luKGkrIiAiKStpKS5zcGxpdCgiICIpO3JldHVybiBzKHQsInN0cmluZyIpfHxzKHQsInVuZGVmaW5lZCIpP2Eocix0KToocj0oZSsiICIray5qb2luKGkrIiAiKStpKS5zcGxpdCgiICIpLGwocix0LG4pKX1mdW5jdGlvbiB1KCl7Zi5pbnB1dD1mdW5jdGlvbihuKXtmb3IodmFyIGk9MCxyPW4ubGVuZ3RoO3I+aTtpKyspUFtuW2ldXT0hIShuW2ldaW4gYik7cmV0dXJuIFAubGlzdCYmKFAubGlzdD0hKCF0LmNyZWF0ZUVsZW1lbnQoImRhdGFsaXN0Iil8fCFlLkhUTUxEYXRhTGlzdEVsZW1lbnQpKSxQfSgiYXV0b2NvbXBsZXRlIGF1dG9mb2N1cyBsaXN0IHBsYWNlaG9sZGVyIG1heCBtaW4gbXVsdGlwbGUgcGF0dGVybiByZXF1aXJlZCBzdGVwIi5zcGxpdCgiICIpKSxmLmlucHV0dHlwZXM9ZnVuY3Rpb24oZSl7Zm9yKHZhciBpLHIscyxvPTAsYT1lLmxlbmd0aDthPm87bysrKWIuc2V0QXR0cmlidXRlKCJ0eXBlIixyPWVbb10pLGk9InRleHQiIT09Yi50eXBlLGkmJihiLnZhbHVlPVQsYi5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTt2aXNpYmlsaXR5OmhpZGRlbjsiLC9ecmFuZ2UkLy50ZXN0KHIpJiZiLnN0eWxlLldlYmtpdEFwcGVhcmFuY2UhPT1uPyh2LmFwcGVuZENoaWxkKGIpLHM9dC5kZWZhdWx0VmlldyxpPXMuZ2V0Q29tcHV0ZWRTdHlsZSYmInRleHRmaWVsZCIhPT1zLmdldENvbXB1dGVkU3R5bGUoYixudWxsKS5XZWJraXRBcHBlYXJhbmNlJiYwIT09Yi5vZmZzZXRIZWlnaHQsdi5yZW1vdmVDaGlsZChiKSk6L14oc2VhcmNofHRlbCkkLy50ZXN0KHIpfHwoaT0vXih1cmx8ZW1haWwpJC8udGVzdChyKT9iLmNoZWNrVmFsaWRpdHkmJmIuY2hlY2tWYWxpZGl0eSgpPT09ITE6Yi52YWx1ZSE9VCkpLEFbZVtvXV09ISFpO3JldHVybiBBfSgic2VhcmNoIHRlbCB1cmwgZW1haWwgZGF0ZXRpbWUgZGF0ZSBtb250aCB3ZWVrIHRpbWUgZGF0ZXRpbWUtbG9jYWwgbnVtYmVyIHJhbmdlIGNvbG9yIi5zcGxpdCgiICIpKX12YXIgZCxwLGg9IjIuOC4zIixmPXt9LGc9ITAsdj10LmRvY3VtZW50RWxlbWVudCxtPSJtb2Rlcm5penIiLHk9dC5jcmVhdGVFbGVtZW50KG0pLF89eS5zdHlsZSxiPXQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxUPSI6KSIsUz17fS50b1N0cmluZyx4PSIgLXdlYmtpdC0gLW1vei0gLW8tIC1tcy0gIi5zcGxpdCgiICIpLHc9IldlYmtpdCBNb3ogTyBtcyIsRT13LnNwbGl0KCIgIiksaz13LnRvTG93ZXJDYXNlKCkuc3BsaXQoIiAiKSxDPXtzdmc6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIn0saj17fSxBPXt9LFA9e30sTD1bXSxOPUwuc2xpY2UsRD1mdW5jdGlvbihlLG4saSxyKXt2YXIgcyxvLGEsbCxjPXQuY3JlYXRlRWxlbWVudCgiZGl2IiksdT10LmJvZHksZD11fHx0LmNyZWF0ZUVsZW1lbnQoImJvZHkiKTtpZihwYXJzZUludChpLDEwKSlmb3IoO2ktLTspYT10LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGEuaWQ9cj9yW2ldOm0rKGkrMSksYy5hcHBlbmRDaGlsZChhKTtyZXR1cm4gcz1bIiYjMTczOyIsJzxzdHlsZSBpZD0icycsbSwnIj4nLGUsIjwvc3R5bGU+Il0uam9pbigiIiksYy5pZD1tLCh1P2M6ZCkuaW5uZXJIVE1MKz1zLGQuYXBwZW5kQ2hpbGQoYyksdXx8KGQuc3R5bGUuYmFja2dyb3VuZD0iIixkLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iLGw9di5zdHlsZS5vdmVyZmxvdyx2LnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iLHYuYXBwZW5kQ2hpbGQoZCkpLG89bihjLGUpLHU/Yy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpOihkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZCksdi5zdHlsZS5vdmVyZmxvdz1sKSwhIW99LEg9ZnVuY3Rpb24odCl7dmFyIG49ZS5tYXRjaE1lZGlhfHxlLm1zTWF0Y2hNZWRpYTtpZihuKXJldHVybiBuKHQpJiZuKHQpLm1hdGNoZXN8fCExO3ZhciBpO3JldHVybiBEKCJAbWVkaWEgIit0KyIgeyAjIittKyIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IH0gfSIsZnVuY3Rpb24odCl7aT0iYWJzb2x1dGUiPT0oZS5nZXRDb21wdXRlZFN0eWxlP2dldENvbXB1dGVkU3R5bGUodCxudWxsKTp0LmN1cnJlbnRTdHlsZSkucG9zaXRpb259KSxpfSxSPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIpe3I9cnx8dC5jcmVhdGVFbGVtZW50KGlbZV18fCJkaXYiKSxlPSJvbiIrZTt2YXIgbz1lIGluIHI7cmV0dXJuIG98fChyLnNldEF0dHJpYnV0ZXx8KHI9dC5jcmVhdGVFbGVtZW50KCJkaXYiKSksci5zZXRBdHRyaWJ1dGUmJnIucmVtb3ZlQXR0cmlidXRlJiYoci5zZXRBdHRyaWJ1dGUoZSwiIiksbz1zKHJbZV0sImZ1bmN0aW9uIikscyhyW2VdLCJ1bmRlZmluZWQiKXx8KHJbZV09biksci5yZW1vdmVBdHRyaWJ1dGUoZSkpKSxyPW51bGwsb312YXIgaT17c2VsZWN0OiJpbnB1dCIsY2hhbmdlOiJpbnB1dCIsc3VibWl0OiJmb3JtIixyZXNldDoiZm9ybSIsZXJyb3I6ImltZyIsbG9hZDoiaW1nIixhYm9ydDoiaW1nIn07cmV0dXJuIGV9KCksTT17fS5oYXNPd25Qcm9wZXJ0eTtwPXMoTSwidW5kZWZpbmVkIil8fHMoTS5jYWxsLCJ1bmRlZmluZWQiKT9mdW5jdGlvbihlLHQpe3JldHVybiB0IGluIGUmJnMoZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGVbdF0sInVuZGVmaW5lZCIpfTpmdW5jdGlvbihlLHQpe3JldHVybiBNLmNhbGwoZSx0KX0sRnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fChGdW5jdGlvbi5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3I7dmFyIG49Ti5jYWxsKGFyZ3VtZW50cywxKSxpPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIGkpe3ZhciByPWZ1bmN0aW9uKCl7fTtyLnByb3RvdHlwZT10LnByb3RvdHlwZTt2YXIgcz1uZXcgcixvPXQuYXBwbHkocyxuLmNvbmNhdChOLmNhbGwoYXJndW1lbnRzKSkpO3JldHVybiBPYmplY3Qobyk9PT1vP286c31yZXR1cm4gdC5hcHBseShlLG4uY29uY2F0KE4uY2FsbChhcmd1bWVudHMpKSl9O3JldHVybiBpfSksai5mbGV4Ym94PWZ1bmN0aW9uKCl7cmV0dXJuIGMoImZsZXhXcmFwIil9LGouZmxleGJveGxlZ2FjeT1mdW5jdGlvbigpe3JldHVybiBjKCJib3hEaXJlY3Rpb24iKX0sai5jYW52YXM9ZnVuY3Rpb24oKXt2YXIgZT10LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO3JldHVybiEoIWUuZ2V0Q29udGV4dHx8IWUuZ2V0Q29udGV4dCgiMmQiKSl9LGouY2FudmFzdGV4dD1mdW5jdGlvbigpe3JldHVybiEoIWYuY2FudmFzfHwhcyh0LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLmdldENvbnRleHQoIjJkIikuZmlsbFRleHQsImZ1bmN0aW9uIikpfSxqLndlYmdsPWZ1bmN0aW9uKCl7cmV0dXJuISFlLldlYkdMUmVuZGVyaW5nQ29udGV4dH0sai50b3VjaD1mdW5jdGlvbigpe3ZhciBuO3JldHVybiJvbnRvdWNoc3RhcnQiaW4gZXx8ZS5Eb2N1bWVudFRvdWNoJiZ0IGluc3RhbmNlb2YgRG9jdW1lbnRUb3VjaD9uPSEwOkQoWyJAbWVkaWEgKCIseC5qb2luKCJ0b3VjaC1lbmFibGVkKSwoIiksbSwiKSIsInsjbW9kZXJuaXpye3RvcDo5cHg7cG9zaXRpb246YWJzb2x1dGV9fSJdLmpvaW4oIiIpLGZ1bmN0aW9uKGUpe249OT09PWUub2Zmc2V0VG9wfSksbn0sai5nZW9sb2NhdGlvbj1mdW5jdGlvbigpe3JldHVybiJnZW9sb2NhdGlvbiJpbiBuYXZpZ2F0b3J9LGoucG9zdG1lc3NhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4hIWUucG9zdE1lc3NhZ2V9LGoud2Vic3FsZGF0YWJhc2U9ZnVuY3Rpb24oKXtyZXR1cm4hIWUub3BlbkRhdGFiYXNlfSxqLmluZGV4ZWREQj1mdW5jdGlvbigpe3JldHVybiEhYygiaW5kZXhlZERCIixlKX0sai5oYXNoY2hhbmdlPWZ1bmN0aW9uKCl7cmV0dXJuIFIoImhhc2hjaGFuZ2UiLGUpJiYodC5kb2N1bWVudE1vZGU9PT1ufHx0LmRvY3VtZW50TW9kZT43KX0sai5oaXN0b3J5PWZ1bmN0aW9uKCl7cmV0dXJuISghZS5oaXN0b3J5fHwhaGlzdG9yeS5wdXNoU3RhdGUpfSxqLmRyYWdhbmRkcm9wPWZ1bmN0aW9uKCl7dmFyIGU9dC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4iZHJhZ2dhYmxlImluIGV8fCJvbmRyYWdzdGFydCJpbiBlJiYib25kcm9wImluIGV9LGoud2Vic29ja2V0cz1mdW5jdGlvbigpe3JldHVybiJXZWJTb2NrZXQiaW4gZXx8Ik1veldlYlNvY2tldCJpbiBlfSxqLnJnYmE9ZnVuY3Rpb24oKXtyZXR1cm4gaSgiYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDE1MCwyNTUsMTUwLC41KSIpLG8oXy5iYWNrZ3JvdW5kQ29sb3IsInJnYmEiKX0sai5oc2xhPWZ1bmN0aW9uKCl7cmV0dXJuIGkoImJhY2tncm91bmQtY29sb3I6aHNsYSgxMjAsNDAlLDEwMCUsLjUpIiksbyhfLmJhY2tncm91bmRDb2xvciwicmdiYSIpfHxvKF8uYmFja2dyb3VuZENvbG9yLCJoc2xhIil9LGoubXVsdGlwbGViZ3M9ZnVuY3Rpb24oKXtyZXR1cm4gaSgiYmFja2dyb3VuZDp1cmwoaHR0cHM6Ly8pLHVybChodHRwczovLykscmVkIHVybChodHRwczovLykiKSwvKHVybFxzKlwoLio/KXszfS8udGVzdChfLmJhY2tncm91bmQpfSxqLmJhY2tncm91bmRzaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGMoImJhY2tncm91bmRTaXplIil9LGouYm9yZGVyaW1hZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gYygiYm9yZGVySW1hZ2UiKX0sai5ib3JkZXJyYWRpdXM9ZnVuY3Rpb24oKXtyZXR1cm4gYygiYm9yZGVyUmFkaXVzIil9LGouYm94c2hhZG93PWZ1bmN0aW9uKCl7cmV0dXJuIGMoImJveFNoYWRvdyIpfSxqLnRleHRzaGFkb3c9ZnVuY3Rpb24oKXtyZXR1cm4iIj09PXQuY3JlYXRlRWxlbWVudCgiZGl2Iikuc3R5bGUudGV4dFNoYWRvd30sai5vcGFjaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHIoIm9wYWNpdHk6LjU1IiksL14wLjU1JC8udGVzdChfLm9wYWNpdHkpfSxqLmNzc2FuaW1hdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gYygiYW5pbWF0aW9uTmFtZSIpfSxqLmNzc2NvbHVtbnM9ZnVuY3Rpb24oKXtyZXR1cm4gYygiY29sdW1uQ291bnQiKX0sai5jc3NncmFkaWVudHM9ZnVuY3Rpb24oKXt2YXIgZT0iYmFja2dyb3VuZC1pbWFnZToiLHQ9ImdyYWRpZW50KGxpbmVhcixsZWZ0IHRvcCxyaWdodCBib3R0b20sZnJvbSgjOWY5KSx0byh3aGl0ZSkpOyIsbj0ibGluZWFyLWdyYWRpZW50KGxlZnQgdG9wLCM5ZjksIHdoaXRlKTsiO3JldHVybiBpKChlKyItd2Via2l0LSAiLnNwbGl0KCIgIikuam9pbih0K2UpK3guam9pbihuK2UpKS5zbGljZSgwLC1lLmxlbmd0aCkpLG8oXy5iYWNrZ3JvdW5kSW1hZ2UsImdyYWRpZW50Iil9LGouY3NzcmVmbGVjdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gYygiYm94UmVmbGVjdCIpfSxqLmNzc3RyYW5zZm9ybXM9ZnVuY3Rpb24oKXtyZXR1cm4hIWMoInRyYW5zZm9ybSIpfSxqLmNzc3RyYW5zZm9ybXMzZD1mdW5jdGlvbigpe3ZhciBlPSEhYygicGVyc3BlY3RpdmUiKTtyZXR1cm4gZSYmIndlYmtpdFBlcnNwZWN0aXZlImluIHYuc3R5bGUmJkQoIkBtZWRpYSAodHJhbnNmb3JtLTNkKSwoLXdlYmtpdC10cmFuc2Zvcm0tM2QpeyNtb2Rlcm5penJ7bGVmdDo5cHg7cG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0OjNweDt9fSIsZnVuY3Rpb24odCxuKXtlPTk9PT10Lm9mZnNldExlZnQmJjM9PT10Lm9mZnNldEhlaWdodH0pLGV9LGouY3NzdHJhbnNpdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gYygidHJhbnNpdGlvbiIpfSxqLmZvbnRmYWNlPWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIEQoJ0Bmb250LWZhY2Uge2ZvbnQtZmFtaWx5OiJmb250IjtzcmM6dXJsKCJodHRwczovLyIpfScsZnVuY3Rpb24obixpKXt2YXIgcj10LmdldEVsZW1lbnRCeUlkKCJzbW9kZXJuaXpyIikscz1yLnNoZWV0fHxyLnN0eWxlU2hlZXQsbz1zP3MuY3NzUnVsZXMmJnMuY3NzUnVsZXNbMF0/cy5jc3NSdWxlc1swXS5jc3NUZXh0OnMuY3NzVGV4dHx8IiI6IiI7ZT0vc3JjL2kudGVzdChvKSYmMD09PW8uaW5kZXhPZihpLnNwbGl0KCIgIilbMF0pfSksZX0sai5nZW5lcmF0ZWRjb250ZW50PWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIEQoWyIjIixtLCJ7Zm9udDowLzAgYX0jIixtLCc6YWZ0ZXJ7Y29udGVudDoiJyxULCciO3Zpc2liaWxpdHk6aGlkZGVuO2ZvbnQ6M3B4LzEgYX0nXS5qb2luKCIiKSxmdW5jdGlvbih0KXtlPXQub2Zmc2V0SGVpZ2h0Pj0zfSksZX0sai52aWRlbz1mdW5jdGlvbigpe3ZhciBlPXQuY3JlYXRlRWxlbWVudCgidmlkZW8iKSxuPSExO3RyeXsobj0hIWUuY2FuUGxheVR5cGUpJiYobj1uZXcgQm9vbGVhbihuKSxuLm9nZz1lLmNhblBsYXlUeXBlKCd2aWRlby9vZ2c7IGNvZGVjcz0idGhlb3JhIicpLnJlcGxhY2UoL15ubyQvLCIiKSxuLmgyNjQ9ZS5jYW5QbGF5VHlwZSgndmlkZW8vbXA0OyBjb2RlY3M9ImF2YzEuNDJFMDFFIicpLnJlcGxhY2UoL15ubyQvLCIiKSxuLndlYm09ZS5jYW5QbGF5VHlwZSgndmlkZW8vd2VibTsgY29kZWNzPSJ2cDgsIHZvcmJpcyInKS5yZXBsYWNlKC9ebm8kLywiIikpfWNhdGNoKGkpe31yZXR1cm4gbn0sai5hdWRpbz1mdW5jdGlvbigpe3ZhciBlPXQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSxuPSExO3RyeXsobj0hIWUuY2FuUGxheVR5cGUpJiYobj1uZXcgQm9vbGVhbihuKSxuLm9nZz1lLmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz0idm9yYmlzIicpLnJlcGxhY2UoL15ubyQvLCIiKSxuLm1wMz1lLmNhblBsYXlUeXBlKCJhdWRpby9tcGVnOyIpLnJlcGxhY2UoL15ubyQvLCIiKSxuLndhdj1lLmNhblBsYXlUeXBlKCdhdWRpby93YXY7IGNvZGVjcz0iMSInKS5yZXBsYWNlKC9ebm8kLywiIiksbi5tNGE9KGUuY2FuUGxheVR5cGUoImF1ZGlvL3gtbTRhOyIpfHxlLmNhblBsYXlUeXBlKCJhdWRpby9hYWM7IikpLnJlcGxhY2UoL15ubyQvLCIiKSl9Y2F0Y2goaSl7fXJldHVybiBufSxqLmxvY2Fsc3RvcmFnZT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbG9jYWxTdG9yYWdlLnNldEl0ZW0obSxtKSxsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShtKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19LGouc2Vzc2lvbnN0b3JhZ2U9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0obSxtKSxzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKG0pLCEwfWNhdGNoKGUpe3JldHVybiExfX0sai53ZWJ3b3JrZXJzPWZ1bmN0aW9uKCl7cmV0dXJuISFlLldvcmtlcn0sai5hcHBsaWNhdGlvbmNhY2hlPWZ1bmN0aW9uKCl7cmV0dXJuISFlLmFwcGxpY2F0aW9uQ2FjaGV9LGouc3ZnPWZ1bmN0aW9uKCl7cmV0dXJuISF0LmNyZWF0ZUVsZW1lbnROUyYmISF0LmNyZWF0ZUVsZW1lbnROUyhDLnN2Zywic3ZnIikuY3JlYXRlU1ZHUmVjdH0sai5pbmxpbmVzdmc9ZnVuY3Rpb24oKXt2YXIgZT10LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBlLmlubmVySFRNTD0iPHN2Zy8+IiwoZS5maXJzdENoaWxkJiZlLmZpcnN0Q2hpbGQubmFtZXNwYWNlVVJJKT09Qy5zdmd9LGouc21pbD1mdW5jdGlvbigpe3JldHVybiEhdC5jcmVhdGVFbGVtZW50TlMmJi9TVkdBbmltYXRlLy50ZXN0KFMuY2FsbCh0LmNyZWF0ZUVsZW1lbnROUyhDLnN2ZywiYW5pbWF0ZSIpKSl9LGouc3ZnY2xpcHBhdGhzPWZ1bmN0aW9uKCl7cmV0dXJuISF0LmNyZWF0ZUVsZW1lbnROUyYmL1NWR0NsaXBQYXRoLy50ZXN0KFMuY2FsbCh0LmNyZWF0ZUVsZW1lbnROUyhDLnN2ZywiY2xpcFBhdGgiKSkpfTtmb3IodmFyICQgaW4gailwKGosJCkmJihkPSQudG9Mb3dlckNhc2UoKSxmW2RdPWpbJF0oKSxMLnB1c2goKGZbZF0/IiI6Im5vLSIpK2QpKTtyZXR1cm4gZi5pbnB1dHx8dSgpLGYuYWRkVGVzdD1mdW5jdGlvbihlLHQpe2lmKCJvYmplY3QiPT10eXBlb2YgZSlmb3IodmFyIGkgaW4gZSlwKGUsaSkmJmYuYWRkVGVzdChpLGVbaV0pO2Vsc2V7aWYoZT1lLnRvTG93ZXJDYXNlKCksZltlXSE9PW4pcmV0dXJuIGY7dD0iZnVuY3Rpb24iPT10eXBlb2YgdD90KCk6dCwidW5kZWZpbmVkIiE9dHlwZW9mIGcmJmcmJih2LmNsYXNzTmFtZSs9IiAiKyh0PyIiOiJuby0iKStlKSxmW2VdPXR9cmV0dXJuIGZ9LGkoIiIpLHk9Yj1udWxsLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3ZhciBuPWUuY3JlYXRlRWxlbWVudCgicCIpLGk9ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdfHxlLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gbi5pbm5lckhUTUw9Ing8c3R5bGU+Iit0KyI8L3N0eWxlPiIsaS5pbnNlcnRCZWZvcmUobi5sYXN0Q2hpbGQsaS5maXJzdENoaWxkKX1mdW5jdGlvbiBpKCl7dmFyIGU9eS5lbGVtZW50cztyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/ZS5zcGxpdCgiICIpOmV9ZnVuY3Rpb24gcihlKXt2YXIgdD1tW2VbZ11dO3JldHVybiB0fHwodD17fSx2KyssZVtnXT12LG1bdl09dCksdH1mdW5jdGlvbiBzKGUsbixpKXtpZihufHwobj10KSx1KXJldHVybiBuLmNyZWF0ZUVsZW1lbnQoZSk7aXx8KGk9cihuKSk7dmFyIHM7cmV0dXJuIHM9aS5jYWNoZVtlXT9pLmNhY2hlW2VdLmNsb25lTm9kZSgpOmYudGVzdChlKT8oaS5jYWNoZVtlXT1pLmNyZWF0ZUVsZW0oZSkpLmNsb25lTm9kZSgpOmkuY3JlYXRlRWxlbShlKSwhcy5jYW5IYXZlQ2hpbGRyZW58fGgudGVzdChlKXx8cy50YWdVcm4/czppLmZyYWcuYXBwZW5kQ2hpbGQocyl9ZnVuY3Rpb24gbyhlLG4pe2lmKGV8fChlPXQpLHUpcmV0dXJuIGUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO249bnx8cihlKTtmb3IodmFyIHM9bi5mcmFnLmNsb25lTm9kZSgpLG89MCxhPWkoKSxsPWEubGVuZ3RoO2w+bztvKyspcy5jcmVhdGVFbGVtZW50KGFbb10pO3JldHVybiBzfWZ1bmN0aW9uIGEoZSx0KXt0LmNhY2hlfHwodC5jYWNoZT17fSx0LmNyZWF0ZUVsZW09ZS5jcmVhdGVFbGVtZW50LHQuY3JlYXRlRnJhZz1lLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQsdC5mcmFnPXQuY3JlYXRlRnJhZygpKSxlLmNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24obil7cmV0dXJuIHkuc2hpdk1ldGhvZHM/cyhuLGUsdCk6dC5jcmVhdGVFbGVtKG4pfSxlLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQ9RnVuY3Rpb24oImgsZiIsInJldHVybiBmdW5jdGlvbigpe3ZhciBuPWYuY2xvbmVOb2RlKCksYz1uLmNyZWF0ZUVsZW1lbnQ7aC5zaGl2TWV0aG9kcyYmKCIraSgpLmpvaW4oKS5yZXBsYWNlKC9bXHdcLV0rL2csZnVuY3Rpb24oZSl7cmV0dXJuIHQuY3JlYXRlRWxlbShlKSx0LmZyYWcuY3JlYXRlRWxlbWVudChlKSwnYygiJytlKyciKSd9KSsiKTtyZXR1cm4gbn0iKSh5LHQuZnJhZyl9ZnVuY3Rpb24gbChlKXtlfHwoZT10KTt2YXIgaT1yKGUpO3JldHVybiF5LnNoaXZDU1N8fGN8fGkuaGFzQ1NTfHwoaS5oYXNDU1M9ISFuKGUsImFydGljbGUsYXNpZGUsZGlhbG9nLGZpZ2NhcHRpb24sZmlndXJlLGZvb3RlcixoZWFkZXIsaGdyb3VwLG1haW4sbmF2LHNlY3Rpb257ZGlzcGxheTpibG9ja31tYXJre2JhY2tncm91bmQ6I0ZGMDtjb2xvcjojMDAwfXRlbXBsYXRle2Rpc3BsYXk6bm9uZX0iKSksdXx8YShlLGkpLGV9dmFyIGMsdSxkPSIzLjcuMCIscD1lLmh0bWw1fHx7fSxoPS9ePHxeKD86YnV0dG9ufG1hcHxzZWxlY3R8dGV4dGFyZWF8b2JqZWN0fGlmcmFtZXxvcHRpb258b3B0Z3JvdXApJC9pLGY9L14oPzphfGJ8Y29kZXxkaXZ8ZmllbGRzZXR8aDF8aDJ8aDN8aDR8aDV8aDZ8aXxsYWJlbHxsaXxvbHxwfHF8c3BhbnxzdHJvbmd8c3R5bGV8dGFibGV8dGJvZHl8dGR8dGh8dHJ8dWwpJC9pLGc9Il9odG1sNXNoaXYiLHY9MCxtPXt9OyFmdW5jdGlvbigpe3RyeXt2YXIgZT10LmNyZWF0ZUVsZW1lbnQoImEiKTtlLmlubmVySFRNTD0iPHh5ej48L3h5ej4iLGM9ImhpZGRlbiJpbiBlLHU9MT09ZS5jaGlsZE5vZGVzLmxlbmd0aHx8ZnVuY3Rpb24oKXt0LmNyZWF0ZUVsZW1lbnQoImEiKTt2YXIgZT10LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIGUuY2xvbmVOb2RlfHwidW5kZWZpbmVkIj09dHlwZW9mIGUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudHx8InVuZGVmaW5lZCI9PXR5cGVvZiBlLmNyZWF0ZUVsZW1lbnR9KCl9Y2F0Y2gobil7Yz0hMCx1PSEwfX0oKTt2YXIgeT17ZWxlbWVudHM6cC5lbGVtZW50c3x8ImFiYnIgYXJ0aWNsZSBhc2lkZSBhdWRpbyBiZGkgY2FudmFzIGRhdGEgZGF0YWxpc3QgZGV0YWlscyBkaWFsb2cgZmlnY2FwdGlvbiBmaWd1cmUgZm9vdGVyIGhlYWRlciBoZ3JvdXAgbWFpbiBtYXJrIG1ldGVyIG5hdiBvdXRwdXQgcHJvZ3Jlc3Mgc2VjdGlvbiBzdW1tYXJ5IHRlbXBsYXRlIHRpbWUgdmlkZW8iLHZlcnNpb246ZCxzaGl2Q1NTOnAuc2hpdkNTUyE9PSExLHN1cHBvcnRzVW5rbm93bkVsZW1lbnRzOnUsc2hpdk1ldGhvZHM6cC5zaGl2TWV0aG9kcyE9PSExLHR5cGU6ImRlZmF1bHQiLHNoaXZEb2N1bWVudDpsLGNyZWF0ZUVsZW1lbnQ6cyxjcmVhdGVEb2N1bWVudEZyYWdtZW50Om99O2UuaHRtbDU9eSxsKHQpfSh0aGlzLHQpLGYuX3ZlcnNpb249aCxmLl9wcmVmaXhlcz14LGYuX2RvbVByZWZpeGVzPWssZi5fY3Nzb21QcmVmaXhlcz1FLGYubXE9SCxmLmhhc0V2ZW50PVIsZi50ZXN0UHJvcD1mdW5jdGlvbihlKXtyZXR1cm4gYShbZV0pfSxmLnRlc3RBbGxQcm9wcz1jLGYudGVzdFN0eWxlcz1ELGYucHJlZml4ZWQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0P2MoZSx0LG4pOmMoZSwicGZ4Iil9LHYuY2xhc3NOYW1lPXYuY2xhc3NOYW1lLnJlcGxhY2UoLyhefFxzKW5vLWpzKFxzfCQpLywiJDEkMiIpKyhnPyIganMgIitMLmpvaW4oIiAiKToiIiksZn0odGhpcyx0aGlzLmRvY3VtZW50KSxmdW5jdGlvbihlLHQpeyJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUuZG9jdW1lbnQ/dChlLCEwKTpmdW5jdGlvbihlKXtpZighZS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKTtyZXR1cm4gdChlKX06dChlKX0oInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3ZhciB0PWUubGVuZ3RoLG49Wi50eXBlKGUpO3JldHVybiJmdW5jdGlvbiI9PT1ufHxaLmlzV2luZG93KGUpPyExOjE9PT1lLm5vZGVUeXBlJiZ0PyEwOiJhcnJheSI9PT1ufHwwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiZ0PjAmJnQtMSBpbiBlfWZ1bmN0aW9uIGkoZSx0LG4pe2lmKFouaXNGdW5jdGlvbih0KSlyZXR1cm4gWi5ncmVwKGUsZnVuY3Rpb24oZSxpKXtyZXR1cm4hIXQuY2FsbChlLGksZSkhPT1ufSk7aWYodC5ub2RlVHlwZSlyZXR1cm4gWi5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10IT09bn0pO2lmKCJzdHJpbmciPT10eXBlb2YgdCl7aWYoYWUudGVzdCh0KSlyZXR1cm4gWi5maWx0ZXIodCxlLG4pO3Q9Wi5maWx0ZXIodCxlKX1yZXR1cm4gWi5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIEIuY2FsbCh0LGUpPj0wIT09bn0pfWZ1bmN0aW9uIHIoZSx0KXtmb3IoOyhlPWVbdF0pJiYxIT09ZS5ub2RlVHlwZTspO3JldHVybiBlfWZ1bmN0aW9uIHMoZSl7dmFyIHQ9ZmVbZV09e307cmV0dXJuIFouZWFjaChlLm1hdGNoKGhlKXx8W10sZnVuY3Rpb24oZSxuKXt0W25dPSEwfSksdH1mdW5jdGlvbiBvKCl7Sy5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixvLCExKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLG8sITEpLFoucmVhZHkoKX1mdW5jdGlvbiBhKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuY2FjaGU9e30sMCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue319fSksdGhpcy5leHBhbmRvPVouZXhwYW5kbythLnVpZCsrfWZ1bmN0aW9uIGwoZSx0LG4pe3ZhciBpO2lmKHZvaWQgMD09PW4mJjE9PT1lLm5vZGVUeXBlKWlmKGk9ImRhdGEtIit0LnJlcGxhY2UoYmUsIi0kMSIpLnRvTG93ZXJDYXNlKCksbj1lLmdldEF0dHJpYnV0ZShpKSwic3RyaW5nIj09dHlwZW9mIG4pe3RyeXtuPSJ0cnVlIj09PW4/ITA6ImZhbHNlIj09PW4/ITE6Im51bGwiPT09bj9udWxsOituKyIiPT09bj8rbjpfZS50ZXN0KG4pP1oucGFyc2VKU09OKG4pOm59Y2F0Y2gocil7fXllLnNldChlLHQsbil9ZWxzZSBuPXZvaWQgMDtyZXR1cm4gbn1mdW5jdGlvbiBjKCl7cmV0dXJuITB9ZnVuY3Rpb24gdSgpe3JldHVybiExfWZ1bmN0aW9uIGQoKXt0cnl7cmV0dXJuIEsuYWN0aXZlRWxlbWVudH1jYXRjaChlKXt9fWZ1bmN0aW9uIHAoZSx0KXtyZXR1cm4gWi5ub2RlTmFtZShlLCJ0YWJsZSIpJiZaLm5vZGVOYW1lKDExIT09dC5ub2RlVHlwZT90OnQuZmlyc3RDaGlsZCwidHIiKT9lLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHxlLmFwcGVuZENoaWxkKGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTplfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGUudHlwZT0obnVsbCE9PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpKyIvIitlLnR5cGUsZX1mdW5jdGlvbiBmKGUpe3ZhciB0PU1lLmV4ZWMoZS50eXBlKTtyZXR1cm4gdD9lLnR5cGU9dFsxXTplLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpLGV9ZnVuY3Rpb24gZyhlLHQpe2Zvcih2YXIgbj0wLGk9ZS5sZW5ndGg7aT5uO24rKyltZS5zZXQoZVtuXSwiZ2xvYmFsRXZhbCIsIXR8fG1lLmdldCh0W25dLCJnbG9iYWxFdmFsIikpfWZ1bmN0aW9uIHYoZSx0KXt2YXIgbixpLHIscyxvLGEsbCxjO2lmKDE9PT10Lm5vZGVUeXBlKXtpZihtZS5oYXNEYXRhKGUpJiYocz1tZS5hY2Nlc3MoZSksbz1tZS5zZXQodCxzKSxjPXMuZXZlbnRzKSl7ZGVsZXRlIG8uaGFuZGxlLG8uZXZlbnRzPXt9O2ZvcihyIGluIGMpZm9yKG49MCxpPWNbcl0ubGVuZ3RoO2k+bjtuKyspWi5ldmVudC5hZGQodCxyLGNbcl1bbl0pfXllLmhhc0RhdGEoZSkmJihhPXllLmFjY2VzcyhlKSxsPVouZXh0ZW5kKHt9LGEpLHllLnNldCh0LGwpKX19ZnVuY3Rpb24gbShlLHQpe3ZhciBuPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0fHwiKiIpOmUucXVlcnlTZWxlY3RvckFsbD9lLnF1ZXJ5U2VsZWN0b3JBbGwodHx8IioiKTpbXTtyZXR1cm4gdm9pZCAwPT09dHx8dCYmWi5ub2RlTmFtZShlLHQpP1oubWVyZ2UoW2VdLG4pOm59ZnVuY3Rpb24geShlLHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsiaW5wdXQiPT09biYmd2UudGVzdChlLnR5cGUpP3QuY2hlY2tlZD1lLmNoZWNrZWQ6KCJpbnB1dCI9PT1ufHwidGV4dGFyZWEiPT09bikmJih0LmRlZmF1bHRWYWx1ZT1lLmRlZmF1bHRWYWx1ZSl9ZnVuY3Rpb24gXyh0LG4pe3ZhciBpLHI9WihuLmNyZWF0ZUVsZW1lbnQodCkpLmFwcGVuZFRvKG4uYm9keSkscz1lLmdldERlZmF1bHRDb21wdXRlZFN0eWxlJiYoaT1lLmdldERlZmF1bHRDb21wdXRlZFN0eWxlKHJbMF0pKT9pLmRpc3BsYXk6Wi5jc3MoclswXSwiZGlzcGxheSIpO3JldHVybiByLmRldGFjaCgpLHN9ZnVuY3Rpb24gYihlKXt2YXIgdD1LLG49cWVbZV07cmV0dXJuIG58fChuPV8oZSx0KSwibm9uZSIhPT1uJiZufHwoSWU9KEllfHxaKCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikpLmFwcGVuZFRvKHQuZG9jdW1lbnRFbGVtZW50KSx0PUllWzBdLmNvbnRlbnREb2N1bWVudCx0LndyaXRlKCksdC5jbG9zZSgpLG49XyhlLHQpLEllLmRldGFjaCgpKSxxZVtlXT1uKSxufWZ1bmN0aW9uIFQoZSx0LG4pe3ZhciBpLHIscyxvLGE9ZS5zdHlsZTtyZXR1cm4gbj1ufHxXZShlKSxuJiYobz1uLmdldFByb3BlcnR5VmFsdWUodCl8fG5bdF0pLG4mJigiIiE9PW98fFouY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfHwobz1aLnN0eWxlKGUsdCkpLFVlLnRlc3QobykmJkZlLnRlc3QodCkmJihpPWEud2lkdGgscj1hLm1pbldpZHRoLHM9YS5tYXhXaWR0aCxhLm1pbldpZHRoPWEubWF4V2lkdGg9YS53aWR0aD1vLG89bi53aWR0aCxhLndpZHRoPWksYS5taW5XaWR0aD1yLGEubWF4V2lkdGg9cykpLHZvaWQgMCE9PW8/bysiIjpvfWZ1bmN0aW9uIFMoZSx0KXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9dCkuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19ZnVuY3Rpb24geChlLHQpe2lmKHQgaW4gZSlyZXR1cm4gdDtmb3IodmFyIG49dFswXS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSksaT10LHI9R2UubGVuZ3RoO3ItLTspaWYodD1HZVtyXStuLHQgaW4gZSlyZXR1cm4gdDtyZXR1cm4gaX1mdW5jdGlvbiB3KGUsdCxuKXt2YXIgaT16ZS5leGVjKHQpO3JldHVybiBpP01hdGgubWF4KDAsaVsxXS0obnx8MCkpKyhpWzJdfHwicHgiKTp0fWZ1bmN0aW9uIEUoZSx0LG4saSxyKXtmb3IodmFyIHM9bj09PShpPyJib3JkZXIiOiJjb250ZW50Iik/NDoid2lkdGgiPT09dD8xOjAsbz0wOzQ+cztzKz0yKSJtYXJnaW4iPT09biYmKG8rPVouY3NzKGUsbitTZVtzXSwhMCxyKSksaT8oImNvbnRlbnQiPT09biYmKG8tPVouY3NzKGUsInBhZGRpbmciK1NlW3NdLCEwLHIpKSwibWFyZ2luIiE9PW4mJihvLT1aLmNzcyhlLCJib3JkZXIiK1NlW3NdKyJXaWR0aCIsITAscikpKToobys9Wi5jc3MoZSwicGFkZGluZyIrU2Vbc10sITAsciksInBhZGRpbmciIT09biYmKG8rPVouY3NzKGUsImJvcmRlciIrU2Vbc10rIldpZHRoIiwhMCxyKSkpO3JldHVybiBvfWZ1bmN0aW9uIGsoZSx0LG4pe3ZhciBpPSEwLHI9IndpZHRoIj09PXQ/ZS5vZmZzZXRXaWR0aDplLm9mZnNldEhlaWdodCxzPVdlKGUpLG89ImJvcmRlci1ib3giPT09Wi5jc3MoZSwiYm94U2l6aW5nIiwhMSxzKTtpZigwPj1yfHxudWxsPT1yKXtpZihyPVQoZSx0LHMpLCgwPnJ8fG51bGw9PXIpJiYocj1lLnN0eWxlW3RdKSxVZS50ZXN0KHIpKXJldHVybiByO2k9byYmKEouYm94U2l6aW5nUmVsaWFibGUoKXx8cj09PWUuc3R5bGVbdF0pLHI9cGFyc2VGbG9hdChyKXx8MH1yZXR1cm4gcitFKGUsdCxufHwobz8iYm9yZGVyIjoiY29udGVudCIpLGkscykrInB4In1mdW5jdGlvbiBDKGUsdCl7Zm9yKHZhciBuLGkscixzPVtdLG89MCxhPWUubGVuZ3RoO2E+bztvKyspaT1lW29dLGkuc3R5bGUmJihzW29dPW1lLmdldChpLCJvbGRkaXNwbGF5Iiksbj1pLnN0eWxlLmRpc3BsYXksdD8oc1tvXXx8Im5vbmUiIT09bnx8KGkuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1pLnN0eWxlLmRpc3BsYXkmJnhlKGkpJiYoc1tvXT1tZS5hY2Nlc3MoaSwib2xkZGlzcGxheSIsYihpLm5vZGVOYW1lKSkpKToocj14ZShpKSwibm9uZSI9PT1uJiZyfHxtZS5zZXQoaSwib2xkZGlzcGxheSIscj9uOlouY3NzKGksImRpc3BsYXkiKSkpKTtmb3Iobz0wO2E+bztvKyspaT1lW29dLGkuc3R5bGUmJih0JiYibm9uZSIhPT1pLnN0eWxlLmRpc3BsYXkmJiIiIT09aS5zdHlsZS5kaXNwbGF5fHwoaS5zdHlsZS5kaXNwbGF5PXQ/c1tvXXx8IiI6Im5vbmUiKSk7cmV0dXJuIGV9ZnVuY3Rpb24gaihlLHQsbixpLHIpe3JldHVybiBuZXcgai5wcm90b3R5cGUuaW5pdChlLHQsbixpLHIpfWZ1bmN0aW9uIEEoKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe0plPXZvaWQgMH0pLEplPVoubm93KCl9ZnVuY3Rpb24gUChlLHQpe3ZhciBuLGk9MCxyPXtoZWlnaHQ6ZX07Zm9yKHQ9dD8xOjA7ND5pO2krPTItdCluPVNlW2ldLHJbIm1hcmdpbiIrbl09clsicGFkZGluZyIrbl09ZTtyZXR1cm4gdCYmKHIub3BhY2l0eT1yLndpZHRoPWUpLHJ9ZnVuY3Rpb24gTChlLHQsbil7Zm9yKHZhciBpLHI9KG50W3RdfHxbXSkuY29uY2F0KG50WyIqIl0pLHM9MCxvPXIubGVuZ3RoO28+cztzKyspaWYoaT1yW3NdLmNhbGwobix0LGUpKXJldHVybiBpfWZ1bmN0aW9uIE4oZSx0LG4pe3ZhciBpLHIscyxvLGEsbCxjLHUsZD10aGlzLHA9e30saD1lLnN0eWxlLGY9ZS5ub2RlVHlwZSYmeGUoZSksZz1tZS5nZXQoZSwiZnhzaG93Iik7bi5xdWV1ZXx8KGE9Wi5fcXVldWVIb29rcyhlLCJmeCIpLG51bGw9PWEudW5xdWV1ZWQmJihhLnVucXVldWVkPTAsbD1hLmVtcHR5LmZpcmUsYS5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7YS51bnF1ZXVlZHx8bCgpfSksYS51bnF1ZXVlZCsrLGQuYWx3YXlzKGZ1bmN0aW9uKCl7ZC5hbHdheXMoZnVuY3Rpb24oKXthLnVucXVldWVkLS0sWi5xdWV1ZShlLCJmeCIpLmxlbmd0aHx8YS5lbXB0eS5maXJlKCl9KX0pKSwxPT09ZS5ub2RlVHlwZSYmKCJoZWlnaHQiaW4gdHx8IndpZHRoImluIHQpJiYobi5vdmVyZmxvdz1baC5vdmVyZmxvdyxoLm92ZXJmbG93WCxoLm92ZXJmbG93WV0sYz1aLmNzcyhlLCJkaXNwbGF5IiksdT0ibm9uZSI9PT1jP21lLmdldChlLCJvbGRkaXNwbGF5Iil8fGIoZS5ub2RlTmFtZSk6YywiaW5saW5lIj09PXUmJiJub25lIj09PVouY3NzKGUsImZsb2F0IikmJihoLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxuLm92ZXJmbG93JiYoaC5vdmVyZmxvdz0iaGlkZGVuIixkLmFsd2F5cyhmdW5jdGlvbigpe2gub3ZlcmZsb3c9bi5vdmVyZmxvd1swXSxoLm92ZXJmbG93WD1uLm92ZXJmbG93WzFdLGgub3ZlcmZsb3dZPW4ub3ZlcmZsb3dbMl19KSk7Zm9yKGkgaW4gdClpZihyPXRbaV0sUWUuZXhlYyhyKSl7aWYoZGVsZXRlIHRbaV0scz1zfHwidG9nZ2xlIj09PXIscj09PShmPyJoaWRlIjoic2hvdyIpKXtpZigic2hvdyIhPT1yfHwhZ3x8dm9pZCAwPT09Z1tpXSljb250aW51ZTtmPSEwfXBbaV09ZyYmZ1tpXXx8Wi5zdHlsZShlLGkpfWVsc2UgYz12b2lkIDA7aWYoWi5pc0VtcHR5T2JqZWN0KHApKSJpbmxpbmUiPT09KCJub25lIj09PWM/YihlLm5vZGVOYW1lKTpjKSYmKGguZGlzcGxheT1jKTtlbHNle2c/ImhpZGRlbiJpbiBnJiYoZj1nLmhpZGRlbik6Zz1tZS5hY2Nlc3MoZSwiZnhzaG93Iix7fSkscyYmKGcuaGlkZGVuPSFmKSxmP1ooZSkuc2hvdygpOmQuZG9uZShmdW5jdGlvbigpe1ooZSkuaGlkZSgpfSksZC5kb25lKGZ1bmN0aW9uKCl7dmFyIHQ7bWUucmVtb3ZlKGUsImZ4c2hvdyIpO2Zvcih0IGluIHApWi5zdHlsZShlLHQscFt0XSl9KTtmb3IoaSBpbiBwKW89TChmP2dbaV06MCxpLGQpLGkgaW4gZ3x8KGdbaV09by5zdGFydCxmJiYoby5lbmQ9by5zdGFydCxvLnN0YXJ0PSJ3aWR0aCI9PT1pfHwiaGVpZ2h0Ij09PWk/MTowKSl9fWZ1bmN0aW9uIEQoZSx0KXt2YXIgbixpLHIscyxvO2ZvcihuIGluIGUpaWYoaT1aLmNhbWVsQ2FzZShuKSxyPXRbaV0scz1lW25dLFouaXNBcnJheShzKSYmKHI9c1sxXSxzPWVbbl09c1swXSksbiE9PWkmJihlW2ldPXMsZGVsZXRlIGVbbl0pLG89Wi5jc3NIb29rc1tpXSxvJiYiZXhwYW5kImluIG8pe3M9by5leHBhbmQocyksZGVsZXRlIGVbaV07Zm9yKG4gaW4gcyluIGluIGV8fChlW25dPXNbbl0sdFtuXT1yKX1lbHNlIHRbaV09cn1mdW5jdGlvbiBIKGUsdCxuKXt2YXIgaSxyLHM9MCxvPXR0Lmxlbmd0aCxhPVouRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgbC5lbGVtfSksbD1mdW5jdGlvbigpe2lmKHIpcmV0dXJuITE7Zm9yKHZhciB0PUplfHxBKCksbj1NYXRoLm1heCgwLGMuc3RhcnRUaW1lK2MuZHVyYXRpb24tdCksaT1uL2MuZHVyYXRpb258fDAscz0xLWksbz0wLGw9Yy50d2VlbnMubGVuZ3RoO2w+bztvKyspYy50d2VlbnNbb10ucnVuKHMpO3JldHVybiBhLm5vdGlmeVdpdGgoZSxbYyxzLG5dKSwxPnMmJmw/bjooYS5yZXNvbHZlV2l0aChlLFtjXSksITEpfSxjPWEucHJvbWlzZSh7ZWxlbTplLHByb3BzOlouZXh0ZW5kKHt9LHQpLG9wdHM6Wi5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e319LG4pLG9yaWdpbmFsUHJvcGVydGllczp0LG9yaWdpbmFsT3B0aW9uczpuLHN0YXJ0VGltZTpKZXx8QSgpLGR1cmF0aW9uOm4uZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKHQsbil7dmFyIGk9Wi5Ud2VlbihlLGMub3B0cyx0LG4sYy5vcHRzLnNwZWNpYWxFYXNpbmdbdF18fGMub3B0cy5lYXNpbmcpO3JldHVybiBjLnR3ZWVucy5wdXNoKGkpLGl9LHN0b3A6ZnVuY3Rpb24odCl7dmFyIG49MCxpPXQ/Yy50d2VlbnMubGVuZ3RoOjA7aWYocilyZXR1cm4gdGhpcztmb3Iocj0hMDtpPm47bisrKWMudHdlZW5zW25dLnJ1bigxKTtyZXR1cm4gdD9hLnJlc29sdmVXaXRoKGUsW2MsdF0pOmEucmVqZWN0V2l0aChlLFtjLHRdKSx0aGlzfX0pLHU9Yy5wcm9wcztmb3IoRCh1LGMub3B0cy5zcGVjaWFsRWFzaW5nKTtvPnM7cysrKWlmKGk9dHRbc10uY2FsbChjLGUsdSxjLm9wdHMpKXJldHVybiBpO3JldHVybiBaLm1hcCh1LEwsYyksWi5pc0Z1bmN0aW9uKGMub3B0cy5zdGFydCkmJmMub3B0cy5zdGFydC5jYWxsKGUsYyksWi5meC50aW1lcihaLmV4dGVuZChsLHtlbGVtOmUsYW5pbTpjLHF1ZXVlOmMub3B0cy5xdWV1ZX0pKSxjLnByb2dyZXNzKGMub3B0cy5wcm9ncmVzcykuZG9uZShjLm9wdHMuZG9uZSxjLm9wdHMuY29tcGxldGUpLmZhaWwoYy5vcHRzLmZhaWwpLmFsd2F5cyhjLm9wdHMuYWx3YXlzKX1mdW5jdGlvbiBSKGUpe3JldHVybiBmdW5jdGlvbih0LG4peyJzdHJpbmciIT10eXBlb2YgdCYmKG49dCx0PSIqIik7dmFyIGkscj0wLHM9dC50b0xvd2VyQ2FzZSgpLm1hdGNoKGhlKXx8W107aWYoWi5pc0Z1bmN0aW9uKG4pKWZvcig7aT1zW3IrK107KSIrIj09PWlbMF0/KGk9aS5zbGljZSgxKXx8IioiLChlW2ldPWVbaV18fFtdKS51bnNoaWZ0KG4pKTooZVtpXT1lW2ldfHxbXSkucHVzaChuKX19ZnVuY3Rpb24gTShlLHQsbixpKXtmdW5jdGlvbiByKGEpe3ZhciBsO3JldHVybiBzW2FdPSEwLFouZWFjaChlW2FdfHxbXSxmdW5jdGlvbihlLGEpe3ZhciBjPWEodCxuLGkpO3JldHVybiJzdHJpbmciIT10eXBlb2YgY3x8b3x8c1tjXT9vPyEobD1jKTp2b2lkIDA6KHQuZGF0YVR5cGVzLnVuc2hpZnQoYykscihjKSwhMSl9KSxsfXZhciBzPXt9LG89ZT09PV90O3JldHVybiByKHQuZGF0YVR5cGVzWzBdKXx8IXNbIioiXSYmcigiKiIpfWZ1bmN0aW9uICQoZSx0KXt2YXIgbixpLHI9Wi5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihuIGluIHQpdm9pZCAwIT09dFtuXSYmKChyW25dP2U6aXx8KGk9e30pKVtuXT10W25dKTtyZXR1cm4gaSYmWi5leHRlbmQoITAsZSxpKSxlfWZ1bmN0aW9uIE8oZSx0LG4pe2Zvcih2YXIgaSxyLHMsbyxhPWUuY29udGVudHMsbD1lLmRhdGFUeXBlczsiKiI9PT1sWzBdOylsLnNoaWZ0KCksdm9pZCAwPT09aSYmKGk9ZS5taW1lVHlwZXx8dC5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIikpO2lmKGkpZm9yKHIgaW4gYSlpZihhW3JdJiZhW3JdLnRlc3QoaSkpe2wudW5zaGlmdChyKTticmVha31pZihsWzBdaW4gbilzPWxbMF07ZWxzZXtmb3IociBpbiBuKXtpZighbFswXXx8ZS5jb252ZXJ0ZXJzW3IrIiAiK2xbMF1dKXtzPXI7YnJlYWt9b3x8KG89cil9cz1zfHxvfXJldHVybiBzPyhzIT09bFswXSYmbC51bnNoaWZ0KHMpLG5bc10pOnZvaWQgMH1mdW5jdGlvbiBJKGUsdCxuLGkpe3ZhciByLHMsbyxhLGwsYz17fSx1PWUuZGF0YVR5cGVzLnNsaWNlKCk7aWYodVsxXSlmb3IobyBpbiBlLmNvbnZlcnRlcnMpY1tvLnRvTG93ZXJDYXNlKCldPWUuY29udmVydGVyc1tvXTtmb3Iocz11LnNoaWZ0KCk7czspaWYoZS5yZXNwb25zZUZpZWxkc1tzXSYmKG5bZS5yZXNwb25zZUZpZWxkc1tzXV09dCksIWwmJmkmJmUuZGF0YUZpbHRlciYmKHQ9ZS5kYXRhRmlsdGVyKHQsZS5kYXRhVHlwZSkpLGw9cyxzPXUuc2hpZnQoKSlpZigiKiI9PT1zKXM9bDtlbHNlIGlmKCIqIiE9PWwmJmwhPT1zKXtpZihvPWNbbCsiICIrc118fGNbIiogIitzXSwhbylmb3IociBpbiBjKWlmKGE9ci5zcGxpdCgiICIpLGFbMV09PT1zJiYobz1jW2wrIiAiK2FbMF1dfHxjWyIqICIrYVswXV0pKXtvPT09ITA/bz1jW3JdOmNbcl0hPT0hMCYmKHM9YVswXSx1LnVuc2hpZnQoYVsxXSkpO2JyZWFrfWlmKG8hPT0hMClpZihvJiZlWyJ0aHJvd3MiXSl0PW8odCk7ZWxzZSB0cnl7dD1vKHQpfWNhdGNoKGQpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOm8/ZDoiTm8gY29udmVyc2lvbiBmcm9tICIrbCsiIHRvICIrc319fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTp0fX1mdW5jdGlvbiBxKGUsdCxuLGkpe3ZhciByO2lmKFouaXNBcnJheSh0KSlaLmVhY2godCxmdW5jdGlvbih0LHIpe258fHd0LnRlc3QoZSk/aShlLHIpOnEoZSsiWyIrKCJvYmplY3QiPT10eXBlb2Ygcj90OiIiKSsiXSIscixuLGkpfSk7ZWxzZSBpZihufHwib2JqZWN0IiE9PVoudHlwZSh0KSlpKGUsdCk7ZWxzZSBmb3IociBpbiB0KXEoZSsiWyIrcisiXSIsdFtyXSxuLGkpfWZ1bmN0aW9uIEYoZSl7cmV0dXJuIFouaXNXaW5kb3coZSk/ZTo5PT09ZS5ub2RlVHlwZSYmZS5kZWZhdWx0Vmlld312YXIgVT1bXSxXPVUuc2xpY2UsWD1VLmNvbmNhdCx6PVUucHVzaCxCPVUuaW5kZXhPZixWPXt9LFk9Vi50b1N0cmluZyxHPVYuaGFzT3duUHJvcGVydHksSj17fSxLPWUuZG9jdW1lbnQsUT0iMi4xLjMiLFo9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IFouZm4uaW5pdChlLHQpfSxlZT0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csdGU9L14tbXMtLyxuZT0vLShbXGRhLXpdKS9naSxpZT1mdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9O1ouZm49Wi5wcm90b3R5cGU9e2pxdWVyeTpRLGNvbnN0cnVjdG9yOlosc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBXLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT8wPmU/dGhpc1tlK3RoaXMubGVuZ3RoXTp0aGlzW2VdOlcuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGUpe3ZhciB0PVoubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGUpO3JldHVybiB0LnByZXZPYmplY3Q9dGhpcyx0LmNvbnRleHQ9dGhpcy5jb250ZXh0LHR9LGVhY2g6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gWi5lYWNoKHRoaXMsZSx0KX0sbWFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhaLm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4sdCl9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKFcuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5sZW5ndGgsbj0rZSsoMD5lP3Q6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4+PTAmJnQ+bj9bdGhpc1tuXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKG51bGwpfSxwdXNoOnosc29ydDpVLnNvcnQsc3BsaWNlOlUuc3BsaWNlfSxaLmV4dGVuZD1aLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBlLHQsbixpLHIscyxvPWFyZ3VtZW50c1swXXx8e30sYT0xLGw9YXJndW1lbnRzLmxlbmd0aCxjPSExO2ZvcigiYm9vbGVhbiI9PXR5cGVvZiBvJiYoYz1vLG89YXJndW1lbnRzW2FdfHx7fSxhKyspLCJvYmplY3QiPT10eXBlb2Ygb3x8Wi5pc0Z1bmN0aW9uKG8pfHwobz17fSksYT09PWwmJihvPXRoaXMsYS0tKTtsPmE7YSsrKWlmKG51bGwhPShlPWFyZ3VtZW50c1thXSkpZm9yKHQgaW4gZSluPW9bdF0saT1lW3RdLG8hPT1pJiYoYyYmaSYmKFouaXNQbGFpbk9iamVjdChpKXx8KHI9Wi5pc0FycmF5KGkpKSk/KHI/KHI9ITEscz1uJiZaLmlzQXJyYXkobik/bjpbXSk6cz1uJiZaLmlzUGxhaW5PYmplY3Qobik/bjp7fSxvW3RdPVouZXh0ZW5kKGMscyxpKSk6dm9pZCAwIT09aSYmKG9bdF09aSkpO3JldHVybiBvfSxaLmV4dGVuZCh7ZXhwYW5kbzoialF1ZXJ5IisoUStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCIiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihlKX0sbm9vcDpmdW5jdGlvbigpe30saXNGdW5jdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT09Wi50eXBlKGUpfSxpc0FycmF5OkFycmF5LmlzQXJyYXksaXNXaW5kb3c6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUmJmU9PT1lLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGUpe3JldHVybiFaLmlzQXJyYXkoZSkmJmUtcGFyc2VGbG9hdChlKSsxPj0wfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiIT09Wi50eXBlKGUpfHxlLm5vZGVUeXBlfHxaLmlzV2luZG93KGUpPyExOmUuY29uc3RydWN0b3ImJiFHLmNhbGwoZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsImlzUHJvdG90eXBlT2YiKT8hMTohMH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP2UrIiI6Im9iamVjdCI9PXR5cGVvZiBlfHwiZnVuY3Rpb24iPT10eXBlb2YgZT9WW1kuY2FsbChlKV18fCJvYmplY3QiOnR5cGVvZiBlfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZXZhbDtlPVoudHJpbShlKSxlJiYoMT09PWUuaW5kZXhPZigidXNlIHN0cmljdCIpPyh0PUsuY3JlYXRlRWxlbWVudCgic2NyaXB0IiksdC50ZXh0PWUsSy5oZWFkLmFwcGVuZENoaWxkKHQpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCkpOm4oZSkpfSxjYW1lbENhc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSh0ZSwibXMtIikucmVwbGFjZShuZSxpZSl9LG5vZGVOYW1lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihlLHQsaSl7dmFyIHIscz0wLG89ZS5sZW5ndGgsYT1uKGUpO2lmKGkpe2lmKGEpZm9yKDtvPnMmJihyPXQuYXBwbHkoZVtzXSxpKSxyIT09ITEpO3MrKyk7ZWxzZSBmb3IocyBpbiBlKWlmKHI9dC5hcHBseShlW3NdLGkpLHI9PT0hMSlicmVha31lbHNlIGlmKGEpZm9yKDtvPnMmJihyPXQuY2FsbChlW3NdLHMsZVtzXSksciE9PSExKTtzKyspO2Vsc2UgZm9yKHMgaW4gZSlpZihyPXQuY2FsbChlW3NdLHMsZVtzXSkscj09PSExKWJyZWFrO3JldHVybiBlfSx0cmltOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOihlKyIiKS5yZXBsYWNlKGVlLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIGk9dHx8W107cmV0dXJuIG51bGwhPWUmJihuKE9iamVjdChlKSk/Wi5tZXJnZShpLCJzdHJpbmciPT10eXBlb2YgZT9bZV06ZSk6ei5jYWxsKGksZSkpLGl9LGluQXJyYXk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT10Py0xOkIuY2FsbCh0LGUsbil9LG1lcmdlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPSt0Lmxlbmd0aCxpPTAscj1lLmxlbmd0aDtuPmk7aSsrKWVbcisrXT10W2ldO3JldHVybiBlLmxlbmd0aD1yLGV9LGdyZXA6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgaSxyPVtdLHM9MCxvPWUubGVuZ3RoLGE9IW47bz5zO3MrKylpPSF0KGVbc10scyksaSE9PWEmJnIucHVzaChlW3NdKTtyZXR1cm4gcn0sbWFwOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcixzPTAsbz1lLmxlbmd0aCxhPW4oZSksbD1bXTtpZihhKWZvcig7bz5zO3MrKylyPXQoZVtzXSxzLGkpLG51bGwhPXImJmwucHVzaChyKTtlbHNlIGZvcihzIGluIGUpcj10KGVbc10scyxpKSxudWxsIT1yJiZsLnB1c2gocik7cmV0dXJuIFguYXBwbHkoW10sbCl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihlLHQpe3ZhciBuLGkscjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJihuPWVbdF0sdD1lLGU9biksWi5pc0Z1bmN0aW9uKGUpPyhpPVcuY2FsbChhcmd1bWVudHMsMikscj1mdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHR8fHRoaXMsaS5jb25jYXQoVy5jYWxsKGFyZ3VtZW50cykpKX0sci5ndWlkPWUuZ3VpZD1lLmd1aWR8fFouZ3VpZCsrLHIpOnZvaWQgMH0sbm93OkRhdGUubm93LHN1cHBvcnQ6Sn0pLFouZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe1ZbIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7dmFyIHJlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0LG4saSl7dmFyIHIscyxvLGEsbCxjLGQsaCxmLGc7aWYoKHQ/dC5vd25lckRvY3VtZW50fHx0OnEpIT09TiYmTCh0KSx0PXR8fE4sbj1ufHxbXSxhPXQubm9kZVR5cGUsInN0cmluZyIhPXR5cGVvZiBlfHwhZXx8MSE9PWEmJjkhPT1hJiYxMSE9PWEpcmV0dXJuIG47aWYoIWkmJkgpe2lmKDExIT09YSYmKHI9eWUuZXhlYyhlKSkpaWYobz1yWzFdKXtpZig5PT09YSl7aWYocz10LmdldEVsZW1lbnRCeUlkKG8pLCFzfHwhcy5wYXJlbnROb2RlKXJldHVybiBuO2lmKHMuaWQ9PT1vKXJldHVybiBuLnB1c2gocyksbn1lbHNlIGlmKHQub3duZXJEb2N1bWVudCYmKHM9dC5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG8pKSYmTyh0LHMpJiZzLmlkPT09bylyZXR1cm4gbi5wdXNoKHMpLG59ZWxzZXtpZihyWzJdKXJldHVybiBRLmFwcGx5KG4sdC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKSksbjtpZigobz1yWzNdKSYmVC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBRLmFwcGx5KG4sdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG8pKSxufWlmKFQucXNhJiYoIVJ8fCFSLnRlc3QoZSkpKXtpZihoPWQ9SSxmPXQsZz0xIT09YSYmZSwxPT09YSYmIm9iamVjdCIhPT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2ZvcihjPUUoZSksKGQ9dC5nZXRBdHRyaWJ1dGUoImlkIikpP2g9ZC5yZXBsYWNlKGJlLCJcXCQmIik6dC5zZXRBdHRyaWJ1dGUoImlkIixoKSxoPSJbaWQ9JyIraCsiJ10gIixsPWMubGVuZ3RoO2wtLTspY1tsXT1oK3AoY1tsXSk7Zj1fZS50ZXN0KGUpJiZ1KHQucGFyZW50Tm9kZSl8fHQsZz1jLmpvaW4oIiwiKX1pZihnKXRyeXtyZXR1cm4gUS5hcHBseShuLGYucXVlcnlTZWxlY3RvckFsbChnKSksbn1jYXRjaCh2KXt9ZmluYWxseXtkfHx0LnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fXJldHVybiBDKGUucmVwbGFjZShsZSwiJDEiKSx0LG4saSl9ZnVuY3Rpb24gbigpe2Z1bmN0aW9uIGUobixpKXtyZXR1cm4gdC5wdXNoKG4rIiAiKT5TLmNhY2hlTGVuZ3RoJiZkZWxldGUgZVt0LnNoaWZ0KCldLGVbbisiICJdPWl9dmFyIHQ9W107cmV0dXJuIGV9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZVtJXT0hMCxlfWZ1bmN0aW9uIHIoZSl7dmFyIHQ9Ti5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFlKHQpfWNhdGNoKG4pe3JldHVybiExfWZpbmFsbHl7dC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCksdD1udWxsfX1mdW5jdGlvbiBzKGUsdCl7Zm9yKHZhciBuPWUuc3BsaXQoInwiKSxpPWUubGVuZ3RoO2ktLTspUy5hdHRySGFuZGxlW25baV1dPXR9ZnVuY3Rpb24gbyhlLHQpe3ZhciBuPXQmJmUsaT1uJiYxPT09ZS5ub2RlVHlwZSYmMT09PXQubm9kZVR5cGUmJih+dC5zb3VyY2VJbmRleHx8ViktKH5lLnNvdXJjZUluZGV4fHxWKTtpZihpKXJldHVybiBpO2lmKG4pZm9yKDtuPW4ubmV4dFNpYmxpbmc7KWlmKG49PT10KXJldHVybi0xO3JldHVybiBlPzE6LTF9ZnVuY3Rpb24gYShlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1uJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBsKGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKCJpbnB1dCI9PT1ufHwiYnV0dG9uIj09PW4pJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBjKGUpe3JldHVybiBpKGZ1bmN0aW9uKHQpe3JldHVybiB0PSt0LGkoZnVuY3Rpb24obixpKXtmb3IodmFyIHIscz1lKFtdLG4ubGVuZ3RoLHQpLG89cy5sZW5ndGg7by0tOyluW3I9c1tvXV0mJihuW3JdPSEoaVtyXT1uW3JdKSl9KX0pfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIGUmJiJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZSYmZX1mdW5jdGlvbiBkKCl7fWZ1bmN0aW9uIHAoZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aCxpPSIiO24+dDt0KyspaSs9ZVt0XS52YWx1ZTtyZXR1cm4gaX1mdW5jdGlvbiBoKGUsdCxuKXt2YXIgaT10LmRpcixyPW4mJiJwYXJlbnROb2RlIj09PWkscz1VKys7cmV0dXJuIHQuZmlyc3Q/ZnVuY3Rpb24odCxuLHMpe2Zvcig7dD10W2ldOylpZigxPT09dC5ub2RlVHlwZXx8cilyZXR1cm4gZSh0LG4scyl9OmZ1bmN0aW9uKHQsbixvKXt2YXIgYSxsLGM9W0Ysc107aWYobyl7Zm9yKDt0PXRbaV07KWlmKCgxPT09dC5ub2RlVHlwZXx8cikmJmUodCxuLG8pKXJldHVybiEwfWVsc2UgZm9yKDt0PXRbaV07KWlmKDE9PT10Lm5vZGVUeXBlfHxyKXtpZihsPXRbSV18fCh0W0ldPXt9KSwoYT1sW2ldKSYmYVswXT09PUYmJmFbMV09PT1zKXJldHVybiBjWzJdPWFbMl07aWYobFtpXT1jLGNbMl09ZSh0LG4sbykpcmV0dXJuITB9fX1mdW5jdGlvbiBmKGUpe3JldHVybiBlLmxlbmd0aD4xP2Z1bmN0aW9uKHQsbixpKXtmb3IodmFyIHI9ZS5sZW5ndGg7ci0tOylpZighZVtyXSh0LG4saSkpcmV0dXJuITE7cmV0dXJuITB9OmVbMF19ZnVuY3Rpb24gZyhlLG4saSl7Zm9yKHZhciByPTAscz1uLmxlbmd0aDtzPnI7cisrKXQoZSxuW3JdLGkpO3JldHVybiBpfWZ1bmN0aW9uIHYoZSx0LG4saSxyKXtmb3IodmFyIHMsbz1bXSxhPTAsbD1lLmxlbmd0aCxjPW51bGwhPXQ7bD5hO2ErKykocz1lW2FdKSYmKCFufHxuKHMsaSxyKSkmJihvLnB1c2gocyksYyYmdC5wdXNoKGEpKTtyZXR1cm4gb31mdW5jdGlvbiBtKGUsdCxuLHIscyxvKXtyZXR1cm4gciYmIXJbSV0mJihyPW0ocikpLHMmJiFzW0ldJiYocz1tKHMsbykpLGkoZnVuY3Rpb24oaSxvLGEsbCl7dmFyIGMsdSxkLHA9W10saD1bXSxmPW8ubGVuZ3RoLG09aXx8Zyh0fHwiKiIsYS5ub2RlVHlwZT9bYV06YSxbXSkseT0hZXx8IWkmJnQ/bTp2KG0scCxlLGEsbCksXz1uP3N8fChpP2U6Znx8cik/W106bzp5O2lmKG4mJm4oeSxfLGEsbCkscilmb3IoYz12KF8saCkscihjLFtdLGEsbCksdT1jLmxlbmd0aDt1LS07KShkPWNbdV0pJiYoX1toW3VdXT0hKHlbaFt1XV09ZCkpO2lmKGkpe2lmKHN8fGUpe2lmKHMpe2ZvcihjPVtdLHU9Xy5sZW5ndGg7dS0tOykoZD1fW3VdKSYmYy5wdXNoKHlbdV09ZCk7cyhudWxsLF89W10sYyxsKX1mb3IodT1fLmxlbmd0aDt1LS07KShkPV9bdV0pJiYoYz1zP2VlKGksZCk6cFt1XSk+LTEmJihpW2NdPSEob1tjXT1kKSl9fWVsc2UgXz12KF89PT1vP18uc3BsaWNlKGYsXy5sZW5ndGgpOl8pLHM/cyhudWxsLG8sXyxsKTpRLmFwcGx5KG8sXyl9KX1mdW5jdGlvbiB5KGUpe2Zvcih2YXIgdCxuLGkscj1lLmxlbmd0aCxzPVMucmVsYXRpdmVbZVswXS50eXBlXSxvPXN8fFMucmVsYXRpdmVbIiAiXSxhPXM/MTowLGw9aChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LG8sITApLGM9aChmdW5jdGlvbihlKXtyZXR1cm4gZWUodCxlKT4tMX0sbywhMCksdT1bZnVuY3Rpb24oZSxuLGkpe3ZhciByPSFzJiYoaXx8biE9PWopfHwoKHQ9bikubm9kZVR5cGU/bChlLG4saSk6YyhlLG4saSkpO3JldHVybiB0PW51bGwscn1dO3I+YTthKyspaWYobj1TLnJlbGF0aXZlW2VbYV0udHlwZV0pdT1baChmKHUpLG4pXTtlbHNle2lmKG49Uy5maWx0ZXJbZVthXS50eXBlXS5hcHBseShudWxsLGVbYV0ubWF0Y2hlcyksbltJXSl7Zm9yKGk9KythO3I+aSYmIVMucmVsYXRpdmVbZVtpXS50eXBlXTtpKyspO3JldHVybiBtKGE+MSYmZih1KSxhPjEmJnAoZS5zbGljZSgwLGEtMSkuY29uY2F0KHt2YWx1ZToiICI9PT1lW2EtMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZShsZSwiJDEiKSxuLGk+YSYmeShlLnNsaWNlKGEsaSkpLHI+aSYmeShlPWUuc2xpY2UoaSkpLHI+aSYmcChlKSl9dS5wdXNoKG4pfXJldHVybiBmKHUpfWZ1bmN0aW9uIF8oZSxuKXt2YXIgcj1uLmxlbmd0aD4wLHM9ZS5sZW5ndGg+MCxvPWZ1bmN0aW9uKGksbyxhLGwsYyl7dmFyIHUsZCxwLGg9MCxmPSIwIixnPWkmJltdLG09W10seT1qLF89aXx8cyYmUy5maW5kLlRBRygiKiIsYyksYj1GKz1udWxsPT15PzE6TWF0aC5yYW5kb20oKXx8LjEsVD1fLmxlbmd0aDtmb3IoYyYmKGo9byE9PU4mJm8pO2YhPT1UJiZudWxsIT0odT1fW2ZdKTtmKyspe2lmKHMmJnUpe2ZvcihkPTA7cD1lW2QrK107KWlmKHAodSxvLGEpKXtsLnB1c2godSk7YnJlYWt9YyYmKEY9Yil9ciYmKCh1PSFwJiZ1KSYmaC0tLGkmJmcucHVzaCh1KSl9aWYoaCs9ZixyJiZmIT09aCl7Zm9yKGQ9MDtwPW5bZCsrXTspcChnLG0sbyxhKTtpZihpKXtpZihoPjApZm9yKDtmLS07KWdbZl18fG1bZl18fChtW2ZdPUouY2FsbChsKSk7bT12KG0pfVEuYXBwbHkobCxtKSxjJiYhaSYmbS5sZW5ndGg+MCYmaCtuLmxlbmd0aD4xJiZ0LnVuaXF1ZVNvcnQobCl9cmV0dXJuIGMmJihGPWIsaj15KSxnfTtyZXR1cm4gcj9pKG8pOm99dmFyIGIsVCxTLHgsdyxFLGssQyxqLEEsUCxMLE4sRCxILFIsTSwkLE8sST0ic2l6emxlIisxKm5ldyBEYXRlLHE9ZS5kb2N1bWVudCxGPTAsVT0wLFc9bigpLFg9bigpLHo9bigpLEI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQmJihQPSEwKSwwfSxWPTE8PDMxLFk9e30uaGFzT3duUHJvcGVydHksRz1bXSxKPUcucG9wLEs9Ry5wdXNoLFE9Ry5wdXNoLFo9Ry5zbGljZSxlZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wLGk9ZS5sZW5ndGg7aT5uO24rKylpZihlW25dPT09dClyZXR1cm4gbjtyZXR1cm4tMX0sdGU9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixuZT0iW1xceDIwXFx0XFxyXFxuXFxmXSIsaWU9Iig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIixyZT1pZS5yZXBsYWNlKCJ3IiwidyMiKSxzZT0iXFxbIituZSsiKigiK2llKyIpKD86IituZSsiKihbKl4kfCF+XT89KSIrbmUrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIityZSsiKSl8KSIrbmUrIipcXF0iLG9lPSI6KCIraWUrIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK3NlKyIpKil8LiopXFwpfCkiLGFlPW5ldyBSZWdFeHAobmUrIisiLCJnIiksbGU9bmV3IFJlZ0V4cCgiXiIrbmUrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrbmUrIiskIiwiZyIpLGNlPW5ldyBSZWdFeHAoIl4iK25lKyIqLCIrbmUrIioiKSx1ZT1uZXcgUmVnRXhwKCJeIituZSsiKihbPit+XXwiK25lKyIpIituZSsiKiIpLGRlPW5ldyBSZWdFeHAoIj0iK25lKyIqKFteXFxdJ1wiXSo/KSIrbmUrIipcXF0iLCJnIikscGU9bmV3IFJlZ0V4cChvZSksaGU9bmV3IFJlZ0V4cCgiXiIrcmUrIiQiKSxmZT17SUQ6bmV3IFJlZ0V4cCgiXiMoIitpZSsiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitpZSsiKSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIraWUucmVwbGFjZSgidyIsIncqIikrIikiKSxBVFRSOm5ldyBSZWdFeHAoIl4iK3NlKSxQU0VVRE86bmV3IFJlZ0V4cCgiXiIrb2UpLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrbmUrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK25lKyIqKD86KFsrLV18KSIrbmUrIiooXFxkKyl8KSkiK25lKyIqXFwpfCkiLCJpIiksYm9vbDpuZXcgUmVnRXhwKCJeKD86Iit0ZSsiKSQiLCJpIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoIl4iK25lKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK25lKyIqKCg/Oi1cXGQpP1xcZCopIituZSsiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sZ2U9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSx2ZT0vXmhcZCQvaSxtZT0vXltee10rXHtccypcW25hdGl2ZSBcdy8seWU9L14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLyxfZT0vWyt+XS8sYmU9Lyd8XFwvZyxUZT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK25lKyI/fCgiK25lKyIpfC4pIiwiaWciKSxTZT1mdW5jdGlvbihlLHQsbil7dmFyIGk9IjB4Iit0LTY1NTM2O3JldHVybiBpIT09aXx8bj90OjA+aT9TdHJpbmcuZnJvbUNoYXJDb2RlKGkrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoaT4+MTB8NTUyOTYsMTAyMyZpfDU2MzIwKX0seGU9ZnVuY3Rpb24oKXtMKCl9O3RyeXtRLmFwcGx5KEc9Wi5jYWxsKHEuY2hpbGROb2RlcykscS5jaGlsZE5vZGVzKSxHW3EuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKHdlKXtRPXthcHBseTpHLmxlbmd0aD9mdW5jdGlvbihlLHQpe0suYXBwbHkoZSxaLmNhbGwodCkpfTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1lLmxlbmd0aCxpPTA7ZVtuKytdPXRbaSsrXTspO2UubGVuZ3RoPW4tMX19fVQ9dC5zdXBwb3J0PXt9LHc9dC5pc1hNTD1mdW5jdGlvbihlKXt2YXIgdD1lJiYoZS5vd25lckRvY3VtZW50fHxlKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIHQ/IkhUTUwiIT09dC5ub2RlTmFtZTohMX0sTD10LnNldERvY3VtZW50PWZ1bmN0aW9uKGUpe3ZhciB0LG4saT1lP2Uub3duZXJEb2N1bWVudHx8ZTpxO3JldHVybiBpIT09TiYmOT09PWkubm9kZVR5cGUmJmkuZG9jdW1lbnRFbGVtZW50PyhOPWksRD1pLmRvY3VtZW50RWxlbWVudCxuPWkuZGVmYXVsdFZpZXcsbiYmbiE9PW4udG9wJiYobi5hZGRFdmVudExpc3RlbmVyP24uYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIix4ZSwhMSk6bi5hdHRhY2hFdmVudCYmbi5hdHRhY2hFdmVudCgib251bmxvYWQiLHhlKSksSD0hdyhpKSxULmF0dHJpYnV0ZXM9cihmdW5jdGlvbihlKXtyZXR1cm4gZS5jbGFzc05hbWU9ImkiLCFlLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxULmdldEVsZW1lbnRzQnlUYWdOYW1lPXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuYXBwZW5kQ2hpbGQoaS5jcmVhdGVDb21tZW50KCIiKSksIWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGh9KSxULmdldEVsZW1lbnRzQnlDbGFzc05hbWU9bWUudGVzdChpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLFQuZ2V0QnlJZD1yKGZ1bmN0aW9uKGUpe3JldHVybiBELmFwcGVuZENoaWxkKGUpLmlkPUksIWkuZ2V0RWxlbWVudHNCeU5hbWV8fCFpLmdldEVsZW1lbnRzQnlOYW1lKEkpLmxlbmd0aH0pLFQuZ2V0QnlJZD8oUy5maW5kLklEPWZ1bmN0aW9uKGUsdCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0LmdldEVsZW1lbnRCeUlkJiZIKXt2YXIgbj10LmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiBuJiZuLnBhcmVudE5vZGU/W25dOltdfX0sUy5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKFRlLFNlKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJpZCIpPT09dH19KTooZGVsZXRlIFMuZmluZC5JRCxTLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UoVGUsU2UpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj0idW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBuJiZuLnZhbHVlPT09dH19KSxTLmZpbmQuVEFHPVQuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oZSx0KXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudHNCeVRhZ05hbWU/dC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKTpULnFzYT90LnF1ZXJ5U2VsZWN0b3JBbGwoZSk6dm9pZCAwOwp9OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT1bXSxyPTAscz10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpO2lmKCIqIj09PWUpe2Zvcig7bj1zW3IrK107KTE9PT1uLm5vZGVUeXBlJiZpLnB1c2gobik7cmV0dXJuIGl9cmV0dXJuIHN9LFMuZmluZC5DTEFTUz1ULmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGUsdCl7cmV0dXJuIEg/dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpOnZvaWQgMH0sTT1bXSxSPVtdLChULnFzYT1tZS50ZXN0KGkucXVlcnlTZWxlY3RvckFsbCkpJiYocihmdW5jdGlvbihlKXtELmFwcGVuZENoaWxkKGUpLmlubmVySFRNTD0iPGEgaWQ9JyIrSSsiJz48L2E+PHNlbGVjdCBpZD0nIitJKyItXGZdJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsZS5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCYmUi5wdXNoKCJbKl4kXT0iK25lKyIqKD86Jyd8XCJcIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fFIucHVzaCgiXFxbIituZSsiKig/OnZhbHVlfCIrdGUrIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZH49IitJKyItXSIpLmxlbmd0aHx8Ui5wdXNoKCJ+PSIpLGUucXVlcnlTZWxlY3RvckFsbCgiOmNoZWNrZWQiKS5sZW5ndGh8fFIucHVzaCgiOmNoZWNrZWQiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoImEjIitJKyIrKiIpLmxlbmd0aHx8Ui5wdXNoKCIuIy4rWyt+XSIpfSkscihmdW5jdGlvbihlKXt2YXIgdD1pLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCJoaWRkZW4iKSxlLmFwcGVuZENoaWxkKHQpLnNldEF0dHJpYnV0ZSgibmFtZSIsIkQiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPWRdIikubGVuZ3RoJiZSLnB1c2goIm5hbWUiK25lKyIqWypeJHwhfl0/PSIpLGUucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGh8fFIucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSxSLnB1c2goIiwuKjoiKX0pKSwoVC5tYXRjaGVzU2VsZWN0b3I9bWUudGVzdCgkPUQubWF0Y2hlc3x8RC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fEQubW96TWF0Y2hlc1NlbGVjdG9yfHxELm9NYXRjaGVzU2VsZWN0b3J8fEQubXNNYXRjaGVzU2VsZWN0b3IpKSYmcihmdW5jdGlvbihlKXtULmRpc2Nvbm5lY3RlZE1hdGNoPSQuY2FsbChlLCJkaXYiKSwkLmNhbGwoZSwiW3MhPScnXTp4IiksTS5wdXNoKCIhPSIsb2UpfSksUj1SLmxlbmd0aCYmbmV3IFJlZ0V4cChSLmpvaW4oInwiKSksTT1NLmxlbmd0aCYmbmV3IFJlZ0V4cChNLmpvaW4oInwiKSksdD1tZS50ZXN0KEQuY29tcGFyZURvY3VtZW50UG9zaXRpb24pLE89dHx8bWUudGVzdChELmNvbnRhaW5zKT9mdW5jdGlvbihlLHQpe3ZhciBuPTk9PT1lLm5vZGVUeXBlP2UuZG9jdW1lbnRFbGVtZW50OmUsaT10JiZ0LnBhcmVudE5vZGU7cmV0dXJuIGU9PT1pfHwhKCFpfHwxIT09aS5ub2RlVHlwZXx8IShuLmNvbnRhaW5zP24uY29udGFpbnMoaSk6ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihpKSkpfTpmdW5jdGlvbihlLHQpe2lmKHQpZm9yKDt0PXQucGFyZW50Tm9kZTspaWYodD09PWUpcmV0dXJuITA7cmV0dXJuITF9LEI9dD9mdW5jdGlvbihlLHQpe2lmKGU9PT10KXJldHVybiBQPSEwLDA7dmFyIG49IWUuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIXQuY29tcGFyZURvY3VtZW50UG9zaXRpb247cmV0dXJuIG4/bjoobj0oZS5vd25lckRvY3VtZW50fHxlKT09PSh0Lm93bmVyRG9jdW1lbnR8fHQpP2UuY29tcGFyZURvY3VtZW50UG9zaXRpb24odCk6MSwxJm58fCFULnNvcnREZXRhY2hlZCYmdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKT09PW4/ZT09PWl8fGUub3duZXJEb2N1bWVudD09PXEmJk8ocSxlKT8tMTp0PT09aXx8dC5vd25lckRvY3VtZW50PT09cSYmTyhxLHQpPzE6QT9lZShBLGUpLWVlKEEsdCk6MDo0Jm4/LTE6MSl9OmZ1bmN0aW9uKGUsdCl7aWYoZT09PXQpcmV0dXJuIFA9ITAsMDt2YXIgbixyPTAscz1lLnBhcmVudE5vZGUsYT10LnBhcmVudE5vZGUsbD1bZV0sYz1bdF07aWYoIXN8fCFhKXJldHVybiBlPT09aT8tMTp0PT09aT8xOnM/LTE6YT8xOkE/ZWUoQSxlKS1lZShBLHQpOjA7aWYocz09PWEpcmV0dXJuIG8oZSx0KTtmb3Iobj1lO249bi5wYXJlbnROb2RlOylsLnVuc2hpZnQobik7Zm9yKG49dDtuPW4ucGFyZW50Tm9kZTspYy51bnNoaWZ0KG4pO2Zvcig7bFtyXT09PWNbcl07KXIrKztyZXR1cm4gcj9vKGxbcl0sY1tyXSk6bFtyXT09PXE/LTE6Y1tyXT09PXE/MTowfSxpKTpOfSx0Lm1hdGNoZXM9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdChlLG51bGwsbnVsbCxuKX0sdC5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oZSxuKXtpZigoZS5vd25lckRvY3VtZW50fHxlKSE9PU4mJkwoZSksbj1uLnJlcGxhY2UoZGUsIj0nJDEnXSIpLFQubWF0Y2hlc1NlbGVjdG9yJiZIJiYoIU18fCFNLnRlc3QobikpJiYoIVJ8fCFSLnRlc3QobikpKXRyeXt2YXIgaT0kLmNhbGwoZSxuKTtpZihpfHxULmRpc2Nvbm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIGl9Y2F0Y2gocil7fXJldHVybiB0KG4sTixudWxsLFtlXSkubGVuZ3RoPjB9LHQuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PU4mJkwoZSksTyhlLHQpfSx0LmF0dHI9ZnVuY3Rpb24oZSx0KXsoZS5vd25lckRvY3VtZW50fHxlKSE9PU4mJkwoZSk7dmFyIG49Uy5hdHRySGFuZGxlW3QudG9Mb3dlckNhc2UoKV0saT1uJiZZLmNhbGwoUy5hdHRySGFuZGxlLHQudG9Mb3dlckNhc2UoKSk/bihlLHQsIUgpOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09aT9pOlQuYXR0cmlidXRlc3x8IUg/ZS5nZXRBdHRyaWJ1dGUodCk6KGk9ZS5nZXRBdHRyaWJ1dGVOb2RlKHQpKSYmaS5zcGVjaWZpZWQ/aS52YWx1ZTpudWxsfSx0LmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitlKX0sdC51bmlxdWVTb3J0PWZ1bmN0aW9uKGUpe3ZhciB0LG49W10saT0wLHI9MDtpZihQPSFULmRldGVjdER1cGxpY2F0ZXMsQT0hVC5zb3J0U3RhYmxlJiZlLnNsaWNlKDApLGUuc29ydChCKSxQKXtmb3IoO3Q9ZVtyKytdOyl0PT09ZVtyXSYmKGk9bi5wdXNoKHIpKTtmb3IoO2ktLTspZS5zcGxpY2UobltpXSwxKX1yZXR1cm4gQT1udWxsLGV9LHg9dC5nZXRUZXh0PWZ1bmN0aW9uKGUpe3ZhciB0LG49IiIsaT0wLHI9ZS5ub2RlVHlwZTtpZihyKXtpZigxPT09cnx8OT09PXJ8fDExPT09cil7aWYoInN0cmluZyI9PXR5cGVvZiBlLnRleHRDb250ZW50KXJldHVybiBlLnRleHRDb250ZW50O2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyluKz14KGUpfWVsc2UgaWYoMz09PXJ8fDQ9PT1yKXJldHVybiBlLm5vZGVWYWx1ZX1lbHNlIGZvcig7dD1lW2krK107KW4rPXgodCk7cmV0dXJuIG59LFM9dC5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzppLG1hdGNoOmZlLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnJlcGxhY2UoVGUsU2UpLGVbM109KGVbM118fGVbNF18fGVbNV18fCIiKS5yZXBsYWNlKFRlLFNlKSwifj0iPT09ZVsyXSYmKGVbM109IiAiK2VbM10rIiAiKSxlLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGUpe3JldHVybiBlWzFdPWVbMV0udG9Mb3dlckNhc2UoKSwibnRoIj09PWVbMV0uc2xpY2UoMCwzKT8oZVszXXx8dC5lcnJvcihlWzBdKSxlWzRdPSsoZVs0XT9lWzVdKyhlWzZdfHwxKToyKigiZXZlbiI9PT1lWzNdfHwib2RkIj09PWVbM10pKSxlWzVdPSsoZVs3XStlWzhdfHwib2RkIj09PWVbM10pKTplWzNdJiZ0LmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzZdJiZlWzJdO3JldHVybiBmZS5DSElMRC50ZXN0KGVbMF0pP251bGw6KGVbM10/ZVsyXT1lWzRdfHxlWzVdfHwiIjpuJiZwZS50ZXN0KG4pJiYodD1FKG4sITApKSYmKHQ9bi5pbmRleE9mKCIpIixuLmxlbmd0aC10KS1uLmxlbmd0aCkmJihlWzBdPWVbMF0uc2xpY2UoMCx0KSxlWzJdPW4uc2xpY2UoMCx0KSksZS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShUZSxTZSkudG9Mb3dlckNhc2UoKTtyZXR1cm4iKiI9PT1lP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGUpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10fX0sQ0xBU1M6ZnVuY3Rpb24oZSl7dmFyIHQ9V1tlKyIgIl07cmV0dXJuIHR8fCh0PW5ldyBSZWdFeHAoIihefCIrbmUrIikiK2UrIigiK25lKyJ8JCkiKSkmJlcoZSxmdW5jdGlvbihlKXtyZXR1cm4gdC50ZXN0KCJzdHJpbmciPT10eXBlb2YgZS5jbGFzc05hbWUmJmUuY2xhc3NOYW1lfHwidW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0QXR0cmlidXRlJiZlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LEFUVFI6ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBmdW5jdGlvbihyKXt2YXIgcz10LmF0dHIocixlKTtyZXR1cm4gbnVsbD09cz8iIT0iPT09bjpuPyhzKz0iIiwiPSI9PT1uP3M9PT1pOiIhPSI9PT1uP3MhPT1pOiJePSI9PT1uP2kmJjA9PT1zLmluZGV4T2YoaSk6Iio9Ij09PW4/aSYmcy5pbmRleE9mKGkpPi0xOiIkPSI9PT1uP2kmJnMuc2xpY2UoLWkubGVuZ3RoKT09PWk6In49Ij09PW4/KCIgIitzLnJlcGxhY2UoYWUsIiAiKSsiICIpLmluZGV4T2YoaSk+LTE6Inw9Ij09PW4/cz09PWl8fHMuc2xpY2UoMCxpLmxlbmd0aCsxKT09PWkrIi0iOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGUsdCxuLGkscil7dmFyIHM9Im50aCIhPT1lLnNsaWNlKDAsMyksbz0ibGFzdCIhPT1lLnNsaWNlKC00KSxhPSJvZi10eXBlIj09PXQ7cmV0dXJuIDE9PT1pJiYwPT09cj9mdW5jdGlvbihlKXtyZXR1cm4hIWUucGFyZW50Tm9kZX06ZnVuY3Rpb24odCxuLGwpe3ZhciBjLHUsZCxwLGgsZixnPXMhPT1vPyJuZXh0U2libGluZyI6InByZXZpb3VzU2libGluZyIsdj10LnBhcmVudE5vZGUsbT1hJiZ0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkseT0hbCYmIWE7aWYodil7aWYocyl7Zm9yKDtnOyl7Zm9yKGQ9dDtkPWRbZ107KWlmKGE/ZC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09bToxPT09ZC5ub2RlVHlwZSlyZXR1cm4hMTtmPWc9Im9ubHkiPT09ZSYmIWYmJiJuZXh0U2libGluZyJ9cmV0dXJuITB9aWYoZj1bbz92LmZpcnN0Q2hpbGQ6di5sYXN0Q2hpbGRdLG8mJnkpe2Zvcih1PXZbSV18fCh2W0ldPXt9KSxjPXVbZV18fFtdLGg9Y1swXT09PUYmJmNbMV0scD1jWzBdPT09RiYmY1syXSxkPWgmJnYuY2hpbGROb2Rlc1toXTtkPSsraCYmZCYmZFtnXXx8KHA9aD0wKXx8Zi5wb3AoKTspaWYoMT09PWQubm9kZVR5cGUmJisrcCYmZD09PXQpe3VbZV09W0YsaCxwXTticmVha319ZWxzZSBpZih5JiYoYz0odFtJXXx8KHRbSV09e30pKVtlXSkmJmNbMF09PT1GKXA9Y1sxXTtlbHNlIGZvcig7KGQ9KytoJiZkJiZkW2ddfHwocD1oPTApfHxmLnBvcCgpKSYmKChhP2Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PW06MSE9PWQubm9kZVR5cGUpfHwhKytwfHwoeSYmKChkW0ldfHwoZFtJXT17fSkpW2VdPVtGLHBdKSxkIT09dCkpOyk7cmV0dXJuIHAtPXIscD09PWl8fHAlaT09PTAmJnAvaT49MH19fSxQU0VVRE86ZnVuY3Rpb24oZSxuKXt2YXIgcixzPVMucHNldWRvc1tlXXx8Uy5zZXRGaWx0ZXJzW2UudG9Mb3dlckNhc2UoKV18fHQuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitlKTtyZXR1cm4gc1tJXT9zKG4pOnMubGVuZ3RoPjE/KHI9W2UsZSwiIixuXSxTLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9pKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpLHI9cyhlLG4pLG89ci5sZW5ndGg7by0tOylpPWVlKGUscltvXSksZVtpXT0hKHRbaV09cltvXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gcyhlLDAscil9KTpzfX0scHNldWRvczp7bm90OmkoZnVuY3Rpb24oZSl7dmFyIHQ9W10sbj1bXSxyPWsoZS5yZXBsYWNlKGxlLCIkMSIpKTtyZXR1cm4gcltJXT9pKGZ1bmN0aW9uKGUsdCxuLGkpe2Zvcih2YXIgcyxvPXIoZSxudWxsLGksW10pLGE9ZS5sZW5ndGg7YS0tOykocz1vW2FdKSYmKGVbYV09ISh0W2FdPXMpKX0pOmZ1bmN0aW9uKGUsaSxzKXtyZXR1cm4gdFswXT1lLHIodCxudWxsLHMsbiksdFswXT1udWxsLCFuLnBvcCgpfX0pLGhhczppKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gdChlLG4pLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmkoZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5yZXBsYWNlKFRlLFNlKSxmdW5jdGlvbih0KXtyZXR1cm4odC50ZXh0Q29udGVudHx8dC5pbm5lclRleHR8fHgodCkpLmluZGV4T2YoZSk+LTF9fSksbGFuZzppKGZ1bmN0aW9uKGUpe3JldHVybiBoZS50ZXN0KGV8fCIiKXx8dC5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIitlKSxlPWUucmVwbGFjZShUZSxTZSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbih0KXt2YXIgbjtkbyBpZihuPUg/dC5sYW5nOnQuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHx0LmdldEF0dHJpYnV0ZSgibGFuZyIpKXJldHVybiBuPW4udG9Mb3dlckNhc2UoKSxuPT09ZXx8MD09PW4uaW5kZXhPZihlKyItIik7d2hpbGUoKHQ9dC5wYXJlbnROb2RlKSYmMT09PXQubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbih0KXt2YXIgbj1lLmxvY2F0aW9uJiZlLmxvY2F0aW9uLmhhc2g7cmV0dXJuIG4mJm4uc2xpY2UoMSk9PT10LmlkfSxyb290OmZ1bmN0aW9uKGUpe3JldHVybiBlPT09RH0sZm9jdXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1OLmFjdGl2ZUVsZW1lbnQmJighTi5oYXNGb2N1c3x8Ti5oYXNGb2N1cygpKSYmISEoZS50eXBlfHxlLmhyZWZ8fH5lLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmISFlLmNoZWNrZWR8fCJvcHRpb24iPT09dCYmISFlLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxlLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGUpe2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylpZihlLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4hUy5wc2V1ZG9zLmVtcHR5KGUpfSxoZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHZlLnRlc3QoZS5ub2RlTmFtZSl9LGlucHV0OmZ1bmN0aW9uKGUpe3JldHVybiBnZS50ZXN0KGUubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT10JiYiYnV0dG9uIj09PWUudHlwZXx8ImJ1dHRvbiI9PT10fSx0ZXh0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiJpbnB1dCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJiJ0ZXh0Ij09PWUudHlwZSYmKG51bGw9PSh0PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpfHwidGV4dCI9PT10LnRvTG93ZXJDYXNlKCkpfSxmaXJzdDpjKGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpjKGZ1bmN0aW9uKGUsdCl7cmV0dXJuW3QtMV19KSxlcTpjKGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5bMD5uP24rdDpuXX0pLGV2ZW46YyhmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wO3Q+bjtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLG9kZDpjKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTE7dD5uO24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksbHQ6YyhmdW5jdGlvbihlLHQsbil7Zm9yKHZhciBpPTA+bj9uK3Q6bjstLWk+PTA7KWUucHVzaChpKTtyZXR1cm4gZX0pLGd0OmMoZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgaT0wPm4/bit0Om47KytpPHQ7KWUucHVzaChpKTtyZXR1cm4gZX0pfX0sUy5wc2V1ZG9zLm50aD1TLnBzZXVkb3MuZXE7Zm9yKGIgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pUy5wc2V1ZG9zW2JdPWEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlTLnBzZXVkb3NbYl09bChiKTtyZXR1cm4gZC5wcm90b3R5cGU9Uy5maWx0ZXJzPVMucHNldWRvcyxTLnNldEZpbHRlcnM9bmV3IGQsRT10LnRva2VuaXplPWZ1bmN0aW9uKGUsbil7dmFyIGkscixzLG8sYSxsLGMsdT1YW2UrIiAiXTtpZih1KXJldHVybiBuPzA6dS5zbGljZSgwKTtmb3IoYT1lLGw9W10sYz1TLnByZUZpbHRlcjthOyl7KCFpfHwocj1jZS5leGVjKGEpKSkmJihyJiYoYT1hLnNsaWNlKHJbMF0ubGVuZ3RoKXx8YSksbC5wdXNoKHM9W10pKSxpPSExLChyPXVlLmV4ZWMoYSkpJiYoaT1yLnNoaWZ0KCkscy5wdXNoKHt2YWx1ZTppLHR5cGU6clswXS5yZXBsYWNlKGxlLCIgIil9KSxhPWEuc2xpY2UoaS5sZW5ndGgpKTtmb3IobyBpbiBTLmZpbHRlcikhKHI9ZmVbb10uZXhlYyhhKSl8fGNbb10mJiEocj1jW29dKHIpKXx8KGk9ci5zaGlmdCgpLHMucHVzaCh7dmFsdWU6aSx0eXBlOm8sbWF0Y2hlczpyfSksYT1hLnNsaWNlKGkubGVuZ3RoKSk7aWYoIWkpYnJlYWt9cmV0dXJuIG4/YS5sZW5ndGg6YT90LmVycm9yKGUpOlgoZSxsKS5zbGljZSgwKX0saz10LmNvbXBpbGU9ZnVuY3Rpb24oZSx0KXt2YXIgbixpPVtdLHI9W10scz16W2UrIiAiXTtpZighcyl7Zm9yKHR8fCh0PUUoZSkpLG49dC5sZW5ndGg7bi0tOylzPXkodFtuXSksc1tJXT9pLnB1c2gocyk6ci5wdXNoKHMpO3M9eihlLF8ocixpKSkscy5zZWxlY3Rvcj1lfXJldHVybiBzfSxDPXQuc2VsZWN0PWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLHMsbyxhLGwsYz0iZnVuY3Rpb24iPT10eXBlb2YgZSYmZSxkPSFpJiZFKGU9Yy5zZWxlY3Rvcnx8ZSk7aWYobj1ufHxbXSwxPT09ZC5sZW5ndGgpe2lmKHM9ZFswXT1kWzBdLnNsaWNlKDApLHMubGVuZ3RoPjImJiJJRCI9PT0obz1zWzBdKS50eXBlJiZULmdldEJ5SWQmJjk9PT10Lm5vZGVUeXBlJiZIJiZTLnJlbGF0aXZlW3NbMV0udHlwZV0pe2lmKHQ9KFMuZmluZC5JRChvLm1hdGNoZXNbMF0ucmVwbGFjZShUZSxTZSksdCl8fFtdKVswXSwhdClyZXR1cm4gbjtjJiYodD10LnBhcmVudE5vZGUpLGU9ZS5zbGljZShzLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1mb3Iocj1mZS5uZWVkc0NvbnRleHQudGVzdChlKT8wOnMubGVuZ3RoO3ItLSYmKG89c1tyXSwhUy5yZWxhdGl2ZVthPW8udHlwZV0pOylpZigobD1TLmZpbmRbYV0pJiYoaT1sKG8ubWF0Y2hlc1swXS5yZXBsYWNlKFRlLFNlKSxfZS50ZXN0KHNbMF0udHlwZSkmJnUodC5wYXJlbnROb2RlKXx8dCkpKXtpZihzLnNwbGljZShyLDEpLGU9aS5sZW5ndGgmJnAocyksIWUpcmV0dXJuIFEuYXBwbHkobixpKSxuO2JyZWFrfX1yZXR1cm4oY3x8ayhlLGQpKShpLHQsIUgsbixfZS50ZXN0KGUpJiZ1KHQucGFyZW50Tm9kZSl8fHQpLG59LFQuc29ydFN0YWJsZT1JLnNwbGl0KCIiKS5zb3J0KEIpLmpvaW4oIiIpPT09SSxULmRldGVjdER1cGxpY2F0ZXM9ISFQLEwoKSxULnNvcnREZXRhY2hlZD1yKGZ1bmN0aW9uKGUpe3JldHVybiAxJmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oTi5jcmVhdGVFbGVtZW50KCJkaXYiKSl9KSxyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fHMoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbj92b2lkIDA6ZS5nZXRBdHRyaWJ1dGUodCwidHlwZSI9PT10LnRvTG93ZXJDYXNlKCk/MToyKX0pLFQuYXR0cmlidXRlcyYmcihmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxpbnB1dC8+IixlLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIiIpLCIiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgidmFsdWUiKX0pfHxzKCJ2YWx1ZSIsZnVuY3Rpb24oZSx0LG4pe3JldHVybiBufHwiaW5wdXQiIT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDplLmRlZmF1bHRWYWx1ZX0pLHIoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWUuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fHModGUsZnVuY3Rpb24oZSx0LG4pe3ZhciBpO3JldHVybiBuP3ZvaWQgMDplW3RdPT09ITA/dC50b0xvd2VyQ2FzZSgpOihpPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJmkuc3BlY2lmaWVkP2kudmFsdWU6bnVsbH0pLHR9KGUpO1ouZmluZD1yZSxaLmV4cHI9cmUuc2VsZWN0b3JzLFouZXhwclsiOiJdPVouZXhwci5wc2V1ZG9zLFoudW5pcXVlPXJlLnVuaXF1ZVNvcnQsWi50ZXh0PXJlLmdldFRleHQsWi5pc1hNTERvYz1yZS5pc1hNTCxaLmNvbnRhaW5zPXJlLmNvbnRhaW5zO3ZhciBzZT1aLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LG9lPS9ePChcdyspXHMqXC8/Pig/OjxcL1wxPnwpJC8sYWU9L14uW146I1xbXC4sXSokLztaLmZpbHRlcj1mdW5jdGlvbihlLHQsbil7dmFyIGk9dFswXTtyZXR1cm4gbiYmKGU9Ijpub3QoIitlKyIpIiksMT09PXQubGVuZ3RoJiYxPT09aS5ub2RlVHlwZT9aLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGksZSk/W2ldOltdOlouZmluZC5tYXRjaGVzKGUsWi5ncmVwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlfSkpfSxaLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMubGVuZ3RoLGk9W10scj10aGlzO2lmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gdGhpcy5wdXNoU3RhY2soWihlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO24+dDt0KyspaWYoWi5jb250YWlucyhyW3RdLHRoaXMpKXJldHVybiEwfSkpO2Zvcih0PTA7bj50O3QrKylaLmZpbmQoZSxyW3RdLGkpO3JldHVybiBpPXRoaXMucHVzaFN0YWNrKG4+MT9aLnVuaXF1ZShpKTppKSxpLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrZTplLGl9LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaSh0aGlzLGV8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaSh0aGlzLGV8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGUpe3JldHVybiEhaSh0aGlzLCJzdHJpbmciPT10eXBlb2YgZSYmc2UudGVzdChlKT9aKGUpOmV8fFtdLCExKS5sZW5ndGh9fSk7dmFyIGxlLGNlPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKikpJC8sdWU9Wi5mbi5pbml0PWZ1bmN0aW9uKGUsdCl7dmFyIG4saTtpZighZSlyZXR1cm4gdGhpcztpZigic3RyaW5nIj09dHlwZW9mIGUpe2lmKG49IjwiPT09ZVswXSYmIj4iPT09ZVtlLmxlbmd0aC0xXSYmZS5sZW5ndGg+PTM/W251bGwsZSxudWxsXTpjZS5leGVjKGUpLCFufHwhblsxXSYmdClyZXR1cm4hdHx8dC5qcXVlcnk/KHR8fGxlKS5maW5kKGUpOnRoaXMuY29uc3RydWN0b3IodCkuZmluZChlKTtpZihuWzFdKXtpZih0PXQgaW5zdGFuY2VvZiBaP3RbMF06dCxaLm1lcmdlKHRoaXMsWi5wYXJzZUhUTUwoblsxXSx0JiZ0Lm5vZGVUeXBlP3Qub3duZXJEb2N1bWVudHx8dDpLLCEwKSksb2UudGVzdChuWzFdKSYmWi5pc1BsYWluT2JqZWN0KHQpKWZvcihuIGluIHQpWi5pc0Z1bmN0aW9uKHRoaXNbbl0pP3RoaXNbbl0odFtuXSk6dGhpcy5hdHRyKG4sdFtuXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGk9Sy5nZXRFbGVtZW50QnlJZChuWzJdKSxpJiZpLnBhcmVudE5vZGUmJih0aGlzLmxlbmd0aD0xLHRoaXNbMF09aSksdGhpcy5jb250ZXh0PUssdGhpcy5zZWxlY3Rvcj1lLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTpaLmlzRnVuY3Rpb24oZSk/InVuZGVmaW5lZCIhPXR5cGVvZiBsZS5yZWFkeT9sZS5yZWFkeShlKTplKFopOih2b2lkIDAhPT1lLnNlbGVjdG9yJiYodGhpcy5zZWxlY3Rvcj1lLnNlbGVjdG9yLHRoaXMuY29udGV4dD1lLmNvbnRleHQpLFoubWFrZUFycmF5KGUsdGhpcykpfTt1ZS5wcm90b3R5cGU9Wi5mbixsZT1aKEspO3ZhciBkZT0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxwZT17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTtaLmV4dGVuZCh7ZGlyOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIGk9W10scj12b2lkIDAhPT1uOyhlPWVbdF0pJiY5IT09ZS5ub2RlVHlwZTspaWYoMT09PWUubm9kZVR5cGUpe2lmKHImJlooZSkuaXMobikpYnJlYWs7aS5wdXNoKGUpfXJldHVybiBpfSxzaWJsaW5nOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPVtdO2U7ZT1lLm5leHRTaWJsaW5nKTE9PT1lLm5vZGVUeXBlJiZlIT09dCYmbi5wdXNoKGUpO3JldHVybiBufX0pLFouZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oZSl7dmFyIHQ9WihlLHRoaXMpLG49dC5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7bj5lO2UrKylpZihaLmNvbnRhaW5zKHRoaXMsdFtlXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixpPTAscj10aGlzLmxlbmd0aCxzPVtdLG89c2UudGVzdChlKXx8InN0cmluZyIhPXR5cGVvZiBlP1ooZSx0fHx0aGlzLmNvbnRleHQpOjA7cj5pO2krKylmb3Iobj10aGlzW2ldO24mJm4hPT10O249bi5wYXJlbnROb2RlKWlmKG4ubm9kZVR5cGU8MTEmJihvP28uaW5kZXgobik+LTE6MT09PW4ubm9kZVR5cGUmJlouZmluZC5tYXRjaGVzU2VsZWN0b3IobixlKSkpe3MucHVzaChuKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2socy5sZW5ndGg+MT9aLnVuaXF1ZShzKTpzKX0saW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/InN0cmluZyI9PXR5cGVvZiBlP0IuY2FsbChaKGUpLHRoaXNbMF0pOkIuY2FsbCh0aGlzLGUuanF1ZXJ5P2VbMF06ZSk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soWi51bmlxdWUoWi5tZXJnZSh0aGlzLmdldCgpLFooZSx0KSkpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09ZT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSksWi5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiYxMSE9PXQubm9kZVR5cGU/dDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiBaLmRpcihlLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFouZGlyKGUsInBhcmVudE5vZGUiLG4pfSxuZXh0OmZ1bmN0aW9uKGUpe3JldHVybiByKGUsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIFouZGlyKGUsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIFouZGlyKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBaLmRpcihlLCJuZXh0U2libGluZyIsbil9LHByZXZVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFouZGlyKGUsInByZXZpb3VzU2libGluZyIsbil9LHNpYmxpbmdzOmZ1bmN0aW9uKGUpe3JldHVybiBaLnNpYmxpbmcoKGUucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsZSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGUpe3JldHVybiBaLnNpYmxpbmcoZS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29udGVudERvY3VtZW50fHxaLm1lcmdlKFtdLGUuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihlLHQpe1ouZm5bZV09ZnVuY3Rpb24obixpKXt2YXIgcj1aLm1hcCh0aGlzLHQsbik7cmV0dXJuIlVudGlsIiE9PWUuc2xpY2UoLTUpJiYoaT1uKSxpJiYic3RyaW5nIj09dHlwZW9mIGkmJihyPVouZmlsdGVyKGkscikpLHRoaXMubGVuZ3RoPjEmJihwZVtlXXx8Wi51bmlxdWUociksZGUudGVzdChlKSYmci5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKHIpfX0pO3ZhciBoZT0vXFMrL2csZmU9e307Wi5DYWxsYmFja3M9ZnVuY3Rpb24oZSl7ZT0ic3RyaW5nIj09dHlwZW9mIGU/ZmVbZV18fHMoZSk6Wi5leHRlbmQoe30sZSk7dmFyIHQsbixpLHIsbyxhLGw9W10sYz0hZS5vbmNlJiZbXSx1PWZ1bmN0aW9uKHMpe2Zvcih0PWUubWVtb3J5JiZzLG49ITAsYT1yfHwwLHI9MCxvPWwubGVuZ3RoLGk9ITA7bCYmbz5hO2ErKylpZihsW2FdLmFwcGx5KHNbMF0sc1sxXSk9PT0hMSYmZS5zdG9wT25GYWxzZSl7dD0hMTticmVha31pPSExLGwmJihjP2MubGVuZ3RoJiZ1KGMuc2hpZnQoKSk6dD9sPVtdOmQuZGlzYWJsZSgpKX0sZD17YWRkOmZ1bmN0aW9uKCl7aWYobCl7dmFyIG49bC5sZW5ndGg7IWZ1bmN0aW9uIHModCl7Wi5lYWNoKHQsZnVuY3Rpb24odCxuKXt2YXIgaT1aLnR5cGUobik7ImZ1bmN0aW9uIj09PWk/ZS51bmlxdWUmJmQuaGFzKG4pfHxsLnB1c2gobik6biYmbi5sZW5ndGgmJiJzdHJpbmciIT09aSYmcyhuKX0pfShhcmd1bWVudHMpLGk/bz1sLmxlbmd0aDp0JiYocj1uLHUodCkpfXJldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gbCYmWi5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbjsobj1aLmluQXJyYXkodCxsLG4pKT4tMTspbC5zcGxpY2UobiwxKSxpJiYobz49biYmby0tLGE+PW4mJmEtLSl9KSx0aGlzfSxoYXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/Wi5pbkFycmF5KGUsbCk+LTE6ISghbHx8IWwubGVuZ3RoKX0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gbD1bXSxvPTAsdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBsPWM9dD12b2lkIDAsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hbH0sbG9jazpmdW5jdGlvbigpe3JldHVybiBjPXZvaWQgMCx0fHxkLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hY30sZmlyZVdpdGg6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hbHx8biYmIWN8fCh0PXR8fFtdLHQ9W2UsdC5zbGljZT90LnNsaWNlKCk6dF0saT9jLnB1c2godCk6dSh0KSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBkLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhbn19O3JldHVybiBkfSxaLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9W1sicmVzb2x2ZSIsImRvbmUiLFouQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsWi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsWi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sbj0icGVuZGluZyIsaT17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbn0sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIHIuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVybiBaLkRlZmVycmVkKGZ1bmN0aW9uKG4pe1ouZWFjaCh0LGZ1bmN0aW9uKHQscyl7dmFyIG89Wi5pc0Z1bmN0aW9uKGVbdF0pJiZlW3RdO3Jbc1sxXV0oZnVuY3Rpb24oKXt2YXIgZT1vJiZvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZaLmlzRnVuY3Rpb24oZS5wcm9taXNlKT9lLnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpOm5bc1swXSsiV2l0aCJdKHRoaXM9PT1pP24ucHJvbWlzZSgpOnRoaXMsbz9bZV06YXJndW1lbnRzKX0pfSksZT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lP1ouZXh0ZW5kKGUsaSk6aX19LHI9e307cmV0dXJuIGkucGlwZT1pLnRoZW4sWi5lYWNoKHQsZnVuY3Rpb24oZSxzKXt2YXIgbz1zWzJdLGE9c1szXTtpW3NbMV1dPW8uYWRkLGEmJm8uYWRkKGZ1bmN0aW9uKCl7bj1hfSx0WzFeZV1bMl0uZGlzYWJsZSx0WzJdWzJdLmxvY2spLHJbc1swXV09ZnVuY3Rpb24oKXtyZXR1cm4gcltzWzBdKyJXaXRoIl0odGhpcz09PXI/aTp0aGlzLGFyZ3VtZW50cyksdGhpc30scltzWzBdKyJXaXRoIl09by5maXJlV2l0aH0pLGkucHJvbWlzZShyKSxlJiZlLmNhbGwocixyKSxyfSx3aGVuOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPTAscz1XLmNhbGwoYXJndW1lbnRzKSxvPXMubGVuZ3RoLGE9MSE9PW98fGUmJlouaXNGdW5jdGlvbihlLnByb21pc2UpP286MCxsPTE9PT1hP2U6Wi5EZWZlcnJlZCgpLGM9ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBmdW5jdGlvbihyKXtuW2VdPXRoaXMsaVtlXT1hcmd1bWVudHMubGVuZ3RoPjE/Vy5jYWxsKGFyZ3VtZW50cyk6cixpPT09dD9sLm5vdGlmeVdpdGgobixpKTotLWF8fGwucmVzb2x2ZVdpdGgobixpKX19O2lmKG8+MSlmb3IodD1uZXcgQXJyYXkobyksbj1uZXcgQXJyYXkobyksaT1uZXcgQXJyYXkobyk7bz5yO3IrKylzW3JdJiZaLmlzRnVuY3Rpb24oc1tyXS5wcm9taXNlKT9zW3JdLnByb21pc2UoKS5kb25lKGMocixpLHMpKS5mYWlsKGwucmVqZWN0KS5wcm9ncmVzcyhjKHIsbix0KSk6LS1hO3JldHVybiBhfHxsLnJlc29sdmVXaXRoKGkscyksbC5wcm9taXNlKCl9fSk7dmFyIGdlO1ouZm4ucmVhZHk9ZnVuY3Rpb24oZSl7cmV0dXJuIFoucmVhZHkucHJvbWlzZSgpLmRvbmUoZSksdGhpc30sWi5leHRlbmQoe2lzUmVhZHk6ITEscmVhZHlXYWl0OjEsaG9sZFJlYWR5OmZ1bmN0aW9uKGUpe2U/Wi5yZWFkeVdhaXQrKzpaLnJlYWR5KCEwKX0scmVhZHk6ZnVuY3Rpb24oZSl7KGU9PT0hMD8tLVoucmVhZHlXYWl0OlouaXNSZWFkeSl8fChaLmlzUmVhZHk9ITAsZSE9PSEwJiYtLVoucmVhZHlXYWl0PjB8fChnZS5yZXNvbHZlV2l0aChLLFtaXSksWi5mbi50cmlnZ2VySGFuZGxlciYmKFooSykudHJpZ2dlckhhbmRsZXIoInJlYWR5IiksWihLKS5vZmYoInJlYWR5IikpKSl9fSksWi5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKHQpe3JldHVybiBnZXx8KGdlPVouRGVmZXJyZWQoKSwiY29tcGxldGUiPT09Sy5yZWFkeVN0YXRlP3NldFRpbWVvdXQoWi5yZWFkeSk6KEsuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsbywhMSksZS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixvLCExKSkpLGdlLnByb21pc2UodCl9LFoucmVhZHkucHJvbWlzZSgpO3ZhciB2ZT1aLmFjY2Vzcz1mdW5jdGlvbihlLHQsbixpLHIscyxvKXt2YXIgYT0wLGw9ZS5sZW5ndGgsYz1udWxsPT1uO2lmKCJvYmplY3QiPT09Wi50eXBlKG4pKXtyPSEwO2ZvcihhIGluIG4pWi5hY2Nlc3MoZSx0LGEsblthXSwhMCxzLG8pfWVsc2UgaWYodm9pZCAwIT09aSYmKHI9ITAsWi5pc0Z1bmN0aW9uKGkpfHwobz0hMCksYyYmKG8/KHQuY2FsbChlLGkpLHQ9bnVsbCk6KGM9dCx0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYy5jYWxsKFooZSksbil9KSksdCkpZm9yKDtsPmE7YSsrKXQoZVthXSxuLG8/aTppLmNhbGwoZVthXSxhLHQoZVthXSxuKSkpO3JldHVybiByP2U6Yz90LmNhbGwoZSk6bD90KGVbMF0sbik6c307Wi5hY2NlcHREYXRhPWZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZXx8OT09PWUubm9kZVR5cGV8fCErZS5ub2RlVHlwZX0sYS51aWQ9MSxhLmFjY2VwdHM9Wi5hY2NlcHREYXRhLGEucHJvdG90eXBlPXtrZXk6ZnVuY3Rpb24oZSl7aWYoIWEuYWNjZXB0cyhlKSlyZXR1cm4gMDt2YXIgdD17fSxuPWVbdGhpcy5leHBhbmRvXTtpZighbil7bj1hLnVpZCsrO3RyeXt0W3RoaXMuZXhwYW5kb109e3ZhbHVlOm59LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsdCl9Y2F0Y2goaSl7dFt0aGlzLmV4cGFuZG9dPW4sWi5leHRlbmQoZSx0KX19cmV0dXJuIHRoaXMuY2FjaGVbbl18fCh0aGlzLmNhY2hlW25dPXt9KSxufSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9dGhpcy5rZXkoZSkscz10aGlzLmNhY2hlW3JdO2lmKCJzdHJpbmciPT10eXBlb2YgdClzW3RdPW47ZWxzZSBpZihaLmlzRW1wdHlPYmplY3QocykpWi5leHRlbmQodGhpcy5jYWNoZVtyXSx0KTtlbHNlIGZvcihpIGluIHQpc1tpXT10W2ldO3JldHVybiBzfSxnZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmNhY2hlW3RoaXMua2V5KGUpXTtyZXR1cm4gdm9pZCAwPT09dD9uOm5bdF19LGFjY2VzczpmdW5jdGlvbihlLHQsbil7dmFyIGk7cmV0dXJuIHZvaWQgMD09PXR8fHQmJiJzdHJpbmciPT10eXBlb2YgdCYmdm9pZCAwPT09bj8oaT10aGlzLmdldChlLHQpLHZvaWQgMCE9PWk/aTp0aGlzLmdldChlLFouY2FtZWxDYXNlKHQpKSk6KHRoaXMuc2V0KGUsdCxuKSx2b2lkIDAhPT1uP246dCl9LHJlbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixzPXRoaXMua2V5KGUpLG89dGhpcy5jYWNoZVtzXTtpZih2b2lkIDA9PT10KXRoaXMuY2FjaGVbc109e307ZWxzZXtaLmlzQXJyYXkodCk/aT10LmNvbmNhdCh0Lm1hcChaLmNhbWVsQ2FzZSkpOihyPVouY2FtZWxDYXNlKHQpLHQgaW4gbz9pPVt0LHJdOihpPXIsaT1pIGluIG8/W2ldOmkubWF0Y2goaGUpfHxbXSkpLG49aS5sZW5ndGg7Zm9yKDtuLS07KWRlbGV0ZSBvW2lbbl1dfX0saGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4hWi5pc0VtcHR5T2JqZWN0KHRoaXMuY2FjaGVbZVt0aGlzLmV4cGFuZG9dXXx8e30pfSxkaXNjYXJkOmZ1bmN0aW9uKGUpe2VbdGhpcy5leHBhbmRvXSYmZGVsZXRlIHRoaXMuY2FjaGVbZVt0aGlzLmV4cGFuZG9dXX19O3ZhciBtZT1uZXcgYSx5ZT1uZXcgYSxfZT0vXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLGJlPS8oW0EtWl0pL2c7Wi5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHllLmhhc0RhdGEoZSl8fG1lLmhhc0RhdGEoZSl9LGRhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB5ZS5hY2Nlc3MoZSx0LG4pfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCl7eWUucmVtb3ZlKGUsdCl9LF9kYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbWUuYWNjZXNzKGUsdCxuKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXttZS5yZW1vdmUoZSx0KX19KSxaLmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixzPXRoaXNbMF0sbz1zJiZzLmF0dHJpYnV0ZXM7aWYodm9pZCAwPT09ZSl7aWYodGhpcy5sZW5ndGgmJihyPXllLmdldChzKSwxPT09cy5ub2RlVHlwZSYmIW1lLmdldChzLCJoYXNEYXRhQXR0cnMiKSkpe2ZvcihuPW8ubGVuZ3RoO24tLTspb1tuXSYmKGk9b1tuXS5uYW1lLDA9PT1pLmluZGV4T2YoImRhdGEtIikmJihpPVouY2FtZWxDYXNlKGkuc2xpY2UoNSkpLGwocyxpLHJbaV0pKSk7bWUuc2V0KHMsImhhc0RhdGFBdHRycyIsITApfXJldHVybiByfXJldHVybiJvYmplY3QiPT10eXBlb2YgZT90aGlzLmVhY2goZnVuY3Rpb24oKXt5ZS5zZXQodGhpcyxlKX0pOnZlKHRoaXMsZnVuY3Rpb24odCl7dmFyIG4saT1aLmNhbWVsQ2FzZShlKTtpZihzJiZ2b2lkIDA9PT10KXtpZihuPXllLmdldChzLGUpLHZvaWQgMCE9PW4pcmV0dXJuIG47aWYobj15ZS5nZXQocyxpKSx2b2lkIDAhPT1uKXJldHVybiBuO2lmKG49bChzLGksdm9pZCAwKSx2b2lkIDAhPT1uKXJldHVybiBufWVsc2UgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49eWUuZ2V0KHRoaXMsaSk7eWUuc2V0KHRoaXMsaSx0KSwtMSE9PWUuaW5kZXhPZigiLSIpJiZ2b2lkIDAhPT1uJiZ5ZS5zZXQodGhpcyxlLHQpfSl9LG51bGwsdCxhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3llLnJlbW92ZSh0aGlzLGUpfSl9fSksWi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaTtyZXR1cm4gZT8odD0odHx8ImZ4IikrInF1ZXVlIixpPW1lLmdldChlLHQpLG4mJighaXx8Wi5pc0FycmF5KG4pP2k9bWUuYWNjZXNzKGUsdCxaLm1ha2VBcnJheShuKSk6aS5wdXNoKG4pKSxpfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGUsdCl7dD10fHwiZngiO3ZhciBuPVoucXVldWUoZSx0KSxpPW4ubGVuZ3RoLHI9bi5zaGlmdCgpLHM9Wi5fcXVldWVIb29rcyhlLHQpLG89ZnVuY3Rpb24oKXtaLmRlcXVldWUoZSx0KX07ImlucHJvZ3Jlc3MiPT09ciYmKHI9bi5zaGlmdCgpLGktLSksciYmKCJmeCI9PT10JiZuLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgcy5zdG9wLHIuY2FsbChlLG8scykpLCFpJiZzJiZzLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10KyJxdWV1ZUhvb2tzIjtyZXR1cm4gbWUuZ2V0KGUsbil8fG1lLmFjY2VzcyhlLG4se2VtcHR5OlouQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe21lLnJlbW92ZShlLFt0KyJxdWV1ZSIsbl0pfSl9KX19KSxaLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPSJmeCIsbi0tKSxhcmd1bWVudHMubGVuZ3RoPG4/Wi5xdWV1ZSh0aGlzWzBdLGUpOnZvaWQgMD09PXQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1aLnF1ZXVlKHRoaXMsZSx0KTtaLl9xdWV1ZUhvb2tzKHRoaXMsZSksImZ4Ij09PWUmJiJpbnByb2dyZXNzIiE9PW5bMF0mJlouZGVxdWV1ZSh0aGlzLGUpfSl9LGRlcXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1ouZGVxdWV1ZSh0aGlzLGUpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucXVldWUoZXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPTEscj1aLkRlZmVycmVkKCkscz10aGlzLG89dGhpcy5sZW5ndGgsYT1mdW5jdGlvbigpey0taXx8ci5yZXNvbHZlV2l0aChzLFtzXSl9O2Zvcigic3RyaW5nIiE9dHlwZW9mIGUmJih0PWUsZT12b2lkIDApLGU9ZXx8ImZ4IjtvLS07KW49bWUuZ2V0KHNbb10sZSsicXVldWVIb29rcyIpLG4mJm4uZW1wdHkmJihpKyssbi5lbXB0eS5hZGQoYSkpO3JldHVybiBhKCksci5wcm9taXNlKHQpfX0pO3ZhciBUZT0vWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvLnNvdXJjZSxTZT1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLHhlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9dHx8ZSwibm9uZSI9PT1aLmNzcyhlLCJkaXNwbGF5Iil8fCFaLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKX0sd2U9L14oPzpjaGVja2JveHxyYWRpbykkL2k7IWZ1bmN0aW9uKCl7dmFyIGU9Sy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksdD1lLmFwcGVuZENoaWxkKEsuY3JlYXRlRWxlbWVudCgiZGl2IikpLG49Sy5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO24uc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSxuLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSxuLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSx0LmFwcGVuZENoaWxkKG4pLEouY2hlY2tDbG9uZT10LmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCx0LmlubmVySFRNTD0iPHRleHRhcmVhPng8L3RleHRhcmVhPiIsSi5ub0Nsb25lQ2hlY2tlZD0hIXQuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlfSgpO3ZhciBFZT0idW5kZWZpbmVkIjtKLmZvY3VzaW5CdWJibGVzPSJvbmZvY3VzaW4iaW4gZTt2YXIga2U9L15rZXkvLENlPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLGplPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxBZT0vXihbXi5dKikoPzpcLiguKyl8KSQvO1ouZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgcyxvLGEsbCxjLHUsZCxwLGgsZixnLHY9bWUuZ2V0KGUpO2lmKHYpZm9yKG4uaGFuZGxlciYmKHM9bixuPXMuaGFuZGxlcixyPXMuc2VsZWN0b3IpLG4uZ3VpZHx8KG4uZ3VpZD1aLmd1aWQrKyksKGw9di5ldmVudHMpfHwobD12LmV2ZW50cz17fSksKG89di5oYW5kbGUpfHwobz12LmhhbmRsZT1mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIFohPT1FZSYmWi5ldmVudC50cmlnZ2VyZWQhPT10LnR5cGU/Wi5ldmVudC5kaXNwYXRjaC5hcHBseShlLGFyZ3VtZW50cyk6dm9pZCAwfSksdD0odHx8IiIpLm1hdGNoKGhlKXx8WyIiXSxjPXQubGVuZ3RoO2MtLTspYT1BZS5leGVjKHRbY10pfHxbXSxoPWc9YVsxXSxmPShhWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksaCYmKGQ9Wi5ldmVudC5zcGVjaWFsW2hdfHx7fSxoPShyP2QuZGVsZWdhdGVUeXBlOmQuYmluZFR5cGUpfHxoLGQ9Wi5ldmVudC5zcGVjaWFsW2hdfHx7fSx1PVouZXh0ZW5kKHt0eXBlOmgsb3JpZ1R5cGU6ZyxkYXRhOmksaGFuZGxlcjpuLGd1aWQ6bi5ndWlkLHNlbGVjdG9yOnIsbmVlZHNDb250ZXh0OnImJlouZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChyKSxuYW1lc3BhY2U6Zi5qb2luKCIuIil9LHMpLChwPWxbaF0pfHwocD1sW2hdPVtdLHAuZGVsZWdhdGVDb3VudD0wLGQuc2V0dXAmJmQuc2V0dXAuY2FsbChlLGksZixvKSE9PSExfHxlLmFkZEV2ZW50TGlzdGVuZXImJmUuYWRkRXZlbnRMaXN0ZW5lcihoLG8sITEpKSxkLmFkZCYmKGQuYWRkLmNhbGwoZSx1KSx1LmhhbmRsZXIuZ3VpZHx8KHUuaGFuZGxlci5ndWlkPW4uZ3VpZCkpLHI/cC5zcGxpY2UocC5kZWxlZ2F0ZUNvdW50KyssMCx1KTpwLnB1c2godSksWi5ldmVudC5nbG9iYWxbaF09ITApfSxyZW1vdmU6ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgcyxvLGEsbCxjLHUsZCxwLGgsZixnLHY9bWUuaGFzRGF0YShlKSYmbWUuZ2V0KGUpO2lmKHYmJihsPXYuZXZlbnRzKSl7Zm9yKHQ9KHR8fCIiKS5tYXRjaChoZSl8fFsiIl0sYz10Lmxlbmd0aDtjLS07KWlmKGE9QWUuZXhlYyh0W2NdKXx8W10saD1nPWFbMV0sZj0oYVsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLGgpe2ZvcihkPVouZXZlbnQuc3BlY2lhbFtoXXx8e30saD0oaT9kLmRlbGVnYXRlVHlwZTpkLmJpbmRUeXBlKXx8aCxwPWxbaF18fFtdLGE9YVsyXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIrZi5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKSxvPXM9cC5sZW5ndGg7cy0tOyl1PXBbc10sIXImJmchPT11Lm9yaWdUeXBlfHxuJiZuLmd1aWQhPT11Lmd1aWR8fGEmJiFhLnRlc3QodS5uYW1lc3BhY2UpfHxpJiZpIT09dS5zZWxlY3RvciYmKCIqKiIhPT1pfHwhdS5zZWxlY3Rvcil8fChwLnNwbGljZShzLDEpLHUuc2VsZWN0b3ImJnAuZGVsZWdhdGVDb3VudC0tLGQucmVtb3ZlJiZkLnJlbW92ZS5jYWxsKGUsdSkpO28mJiFwLmxlbmd0aCYmKGQudGVhcmRvd24mJmQudGVhcmRvd24uY2FsbChlLGYsdi5oYW5kbGUpIT09ITF8fFoucmVtb3ZlRXZlbnQoZSxoLHYuaGFuZGxlKSxkZWxldGUgbFtoXSl9ZWxzZSBmb3IoaCBpbiBsKVouZXZlbnQucmVtb3ZlKGUsaCt0W2NdLG4saSwhMCk7Wi5pc0VtcHR5T2JqZWN0KGwpJiYoZGVsZXRlIHYuaGFuZGxlLG1lLnJlbW92ZShlLCJldmVudHMiKSl9fSx0cmlnZ2VyOmZ1bmN0aW9uKHQsbixpLHIpe3ZhciBzLG8sYSxsLGMsdSxkLHA9W2l8fEtdLGg9Ry5jYWxsKHQsInR5cGUiKT90LnR5cGU6dCxmPUcuY2FsbCh0LCJuYW1lc3BhY2UiKT90Lm5hbWVzcGFjZS5zcGxpdCgiLiIpOltdO2lmKG89YT1pPWl8fEssMyE9PWkubm9kZVR5cGUmJjghPT1pLm5vZGVUeXBlJiYhamUudGVzdChoK1ouZXZlbnQudHJpZ2dlcmVkKSYmKGguaW5kZXhPZigiLiIpPj0wJiYoZj1oLnNwbGl0KCIuIiksaD1mLnNoaWZ0KCksZi5zb3J0KCkpLGM9aC5pbmRleE9mKCI6Iik8MCYmIm9uIitoLHQ9dFtaLmV4cGFuZG9dP3Q6bmV3IFouRXZlbnQoaCwib2JqZWN0Ij09dHlwZW9mIHQmJnQpLHQuaXNUcmlnZ2VyPXI/MjozLHQubmFtZXNwYWNlPWYuam9pbigiLiIpLHQubmFtZXNwYWNlX3JlPXQubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK2Yuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCx0LnJlc3VsdD12b2lkIDAsdC50YXJnZXR8fCh0LnRhcmdldD1pKSxuPW51bGw9PW4/W3RdOloubWFrZUFycmF5KG4sW3RdKSxkPVouZXZlbnQuc3BlY2lhbFtoXXx8e30scnx8IWQudHJpZ2dlcnx8ZC50cmlnZ2VyLmFwcGx5KGksbikhPT0hMSkpe2lmKCFyJiYhZC5ub0J1YmJsZSYmIVouaXNXaW5kb3coaSkpe2ZvcihsPWQuZGVsZWdhdGVUeXBlfHxoLGplLnRlc3QobCtoKXx8KG89by5wYXJlbnROb2RlKTtvO289by5wYXJlbnROb2RlKXAucHVzaChvKSxhPW87YT09PShpLm93bmVyRG9jdW1lbnR8fEspJiZwLnB1c2goYS5kZWZhdWx0Vmlld3x8YS5wYXJlbnRXaW5kb3d8fGUpfWZvcihzPTA7KG89cFtzKytdKSYmIXQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKTspdC50eXBlPXM+MT9sOmQuYmluZFR5cGV8fGgsdT0obWUuZ2V0KG8sImV2ZW50cyIpfHx7fSlbdC50eXBlXSYmbWUuZ2V0KG8sImhhbmRsZSIpLHUmJnUuYXBwbHkobyxuKSx1PWMmJm9bY10sdSYmdS5hcHBseSYmWi5hY2NlcHREYXRhKG8pJiYodC5yZXN1bHQ9dS5hcHBseShvLG4pLHQucmVzdWx0PT09ITEmJnQucHJldmVudERlZmF1bHQoKSk7cmV0dXJuIHQudHlwZT1oLHJ8fHQuaXNEZWZhdWx0UHJldmVudGVkKCl8fGQuX2RlZmF1bHQmJmQuX2RlZmF1bHQuYXBwbHkocC5wb3AoKSxuKSE9PSExfHwhWi5hY2NlcHREYXRhKGkpfHxjJiZaLmlzRnVuY3Rpb24oaVtoXSkmJiFaLmlzV2luZG93KGkpJiYoYT1pW2NdLGEmJihpW2NdPW51bGwpLFouZXZlbnQudHJpZ2dlcmVkPWgsaVtoXSgpLFouZXZlbnQudHJpZ2dlcmVkPXZvaWQgMCxhJiYoaVtjXT1hKSksdC5yZXN1bHR9fSxkaXNwYXRjaDpmdW5jdGlvbihlKXtlPVouZXZlbnQuZml4KGUpO3ZhciB0LG4saSxyLHMsbz1bXSxhPVcuY2FsbChhcmd1bWVudHMpLGw9KG1lLmdldCh0aGlzLCJldmVudHMiKXx8e30pW2UudHlwZV18fFtdLGM9Wi5ldmVudC5zcGVjaWFsW2UudHlwZV18fHt9O2lmKGFbMF09ZSxlLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWMucHJlRGlzcGF0Y2h8fGMucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGUpIT09ITEpe2ZvcihvPVouZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGUsbCksdD0wOyhyPW9bdCsrXSkmJiFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCk7KWZvcihlLmN1cnJlbnRUYXJnZXQ9ci5lbGVtLG49MDsocz1yLmhhbmRsZXJzW24rK10pJiYhZS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpOykoIWUubmFtZXNwYWNlX3JlfHxlLm5hbWVzcGFjZV9yZS50ZXN0KHMubmFtZXNwYWNlKSkmJihlLmhhbmRsZU9iaj1zLGUuZGF0YT1zLmRhdGEsaT0oKFouZXZlbnQuc3BlY2lhbFtzLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8cy5oYW5kbGVyKS5hcHBseShyLmVsZW0sYSksdm9pZCAwIT09aSYmKGUucmVzdWx0PWkpPT09ITEmJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSkpO3JldHVybiBjLnBvc3REaXNwYXRjaCYmYy5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGUpLGUucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIscyxvPVtdLGE9dC5kZWxlZ2F0ZUNvdW50LGw9ZS50YXJnZXQ7aWYoYSYmbC5ub2RlVHlwZSYmKCFlLmJ1dHRvbnx8ImNsaWNrIiE9PWUudHlwZSkpZm9yKDtsIT09dGhpcztsPWwucGFyZW50Tm9kZXx8dGhpcylpZihsLmRpc2FibGVkIT09ITB8fCJjbGljayIhPT1lLnR5cGUpe2ZvcihpPVtdLG49MDthPm47bisrKXM9dFtuXSxyPXMuc2VsZWN0b3IrIiAiLHZvaWQgMD09PWlbcl0mJihpW3JdPXMubmVlZHNDb250ZXh0P1oocix0aGlzKS5pbmRleChsKT49MDpaLmZpbmQocix0aGlzLG51bGwsW2xdKS5sZW5ndGgpLGlbcl0mJmkucHVzaChzKTtpLmxlbmd0aCYmby5wdXNoKHtlbGVtOmwsaGFuZGxlcnM6aX0pfXJldHVybiBhPHQubGVuZ3RoJiZvLnB1c2goe2VsZW06dGhpcyxoYW5kbGVyczp0LnNsaWNlKGEpfSksb30scHJvcHM6ImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaCIuc3BsaXQoIiAiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6ImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGUiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGw9PWUud2hpY2gmJihlLndoaWNoPW51bGwhPXQuY2hhckNvZGU/dC5jaGFyQ29kZTp0LmtleUNvZGUpLGV9fSxtb3VzZUhvb2tzOntwcm9wczoiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50Ii5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixzPXQuYnV0dG9uO3JldHVybiBudWxsPT1lLnBhZ2VYJiZudWxsIT10LmNsaWVudFgmJihuPWUudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fEssaT1uLmRvY3VtZW50RWxlbWVudCxyPW4uYm9keSxlLnBhZ2VYPXQuY2xpZW50WCsoaSYmaS5zY3JvbGxMZWZ0fHxyJiZyLnNjcm9sbExlZnR8fDApLShpJiZpLmNsaWVudExlZnR8fHImJnIuY2xpZW50TGVmdHx8MCksZS5wYWdlWT10LmNsaWVudFkrKGkmJmkuc2Nyb2xsVG9wfHxyJiZyLnNjcm9sbFRvcHx8MCktKGkmJmkuY2xpZW50VG9wfHxyJiZyLmNsaWVudFRvcHx8MCkpLGUud2hpY2h8fHZvaWQgMD09PXN8fChlLndoaWNoPTEmcz8xOjImcz8zOjQmcz8yOjApLGV9fSxmaXg6ZnVuY3Rpb24oZSl7aWYoZVtaLmV4cGFuZG9dKXJldHVybiBlO3ZhciB0LG4saSxyPWUudHlwZSxzPWUsbz10aGlzLmZpeEhvb2tzW3JdO2ZvcihvfHwodGhpcy5maXhIb29rc1tyXT1vPUNlLnRlc3Qocik/dGhpcy5tb3VzZUhvb2tzOmtlLnRlc3Qocik/dGhpcy5rZXlIb29rczp7fSksaT1vLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KG8ucHJvcHMpOnRoaXMucHJvcHMsZT1uZXcgWi5FdmVudChzKSx0PWkubGVuZ3RoO3QtLTspbj1pW3RdLGVbbl09c1tuXTtyZXR1cm4gZS50YXJnZXR8fChlLnRhcmdldD1LKSwzPT09ZS50YXJnZXQubm9kZVR5cGUmJihlLnRhcmdldD1lLnRhcmdldC5wYXJlbnROb2RlKSxvLmZpbHRlcj9vLmZpbHRlcihlLHMpOmV9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzIT09ZCgpJiZ0aGlzLmZvY3VzPyh0aGlzLmZvY3VzKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09ZCgpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2smJloubm9kZU5hbWUodGhpcywiaW5wdXQiKT8odGhpcy5jbGljaygpLCExKTp2b2lkIDB9LF9kZWZhdWx0OmZ1bmN0aW9uKGUpe3JldHVybiBaLm5vZGVOYW1lKGUudGFyZ2V0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihlKXt2b2lkIDAhPT1lLnJlc3VsdCYmZS5vcmlnaW5hbEV2ZW50JiYoZS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWUucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihlLHQsbixpKXt2YXIgcj1aLmV4dGVuZChuZXcgWi5FdmVudCxuLHt0eXBlOmUsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO2k/Wi5ldmVudC50cmlnZ2VyKHIsbnVsbCx0KTpaLmV2ZW50LmRpc3BhdGNoLmNhbGwodCxyKSxyLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZuLnByZXZlbnREZWZhdWx0KCl9fSxaLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGUsdCxuKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXImJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LG4sITEpfSxaLkV2ZW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBaLkV2ZW50PyhlJiZlLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1lLHRoaXMudHlwZT1lLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1lLmRlZmF1bHRQcmV2ZW50ZWQmJmUucmV0dXJuVmFsdWU9PT0hMT9jOnUpOnRoaXMudHlwZT1lLHQmJlouZXh0ZW5kKHRoaXMsdCksdGhpcy50aW1lU3RhbXA9ZSYmZS50aW1lU3RhbXB8fFoubm93KCksdm9pZCh0aGlzW1ouZXhwYW5kb109ITApKTpuZXcgWi5FdmVudChlLHQpfSxaLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOnUsaXNQcm9wYWdhdGlvblN0b3BwZWQ6dSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDp1LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPWMsZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1jLGUmJmUuc3RvcFByb3BhZ2F0aW9uJiZlLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1jLGUmJmUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uJiZlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxaLmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQiLHBvaW50ZXJlbnRlcjoicG9pbnRlcm92ZXIiLHBvaW50ZXJsZWF2ZToicG9pbnRlcm91dCJ9LGZ1bmN0aW9uKGUsdCl7Wi5ldmVudC5zcGVjaWFsW2VdPXtkZWxlZ2F0ZVR5cGU6dCxiaW5kVHlwZTp0LGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXMscj1lLnJlbGF0ZWRUYXJnZXQscz1lLmhhbmRsZU9iajtyZXR1cm4oIXJ8fHIhPT1pJiYhWi5jb250YWlucyhpLHIpKSYmKGUudHlwZT1zLm9yaWdUeXBlLG49cy5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlLnR5cGU9dCksbn19fSksSi5mb2N1c2luQnViYmxlc3x8Wi5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihlLHQpe3ZhciBuPWZ1bmN0aW9uKGUpe1ouZXZlbnQuc2ltdWxhdGUodCxlLnRhcmdldCxaLmV2ZW50LmZpeChlKSwhMCl9O1ouZXZlbnQuc3BlY2lhbFt0XT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgaT10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMscj1tZS5hY2Nlc3MoaSx0KTtyfHxpLmFkZEV2ZW50TGlzdGVuZXIoZSxuLCEwKSxtZS5hY2Nlc3MoaSx0LChyfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgaT10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMscj1tZS5hY2Nlc3MoaSx0KS0xO3I/bWUuYWNjZXNzKGksdCxyKTooaS5yZW1vdmVFdmVudExpc3RlbmVyKGUsbiwhMCksbWUucmVtb3ZlKGksdCkpfX19KSxaLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgcyxvO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7InN0cmluZyIhPXR5cGVvZiB0JiYobj1ufHx0LHQ9dm9pZCAwKTtmb3IobyBpbiBlKXRoaXMub24obyx0LG4sZVtvXSxyKTtyZXR1cm4gdGhpc31pZihudWxsPT1uJiZudWxsPT1pPyhpPXQsbj10PXZvaWQgMCk6bnVsbD09aSYmKCJzdHJpbmciPT10eXBlb2YgdD8oaT1uLG49dm9pZCAwKTooaT1uLG49dCx0PXZvaWQgMCkpLGk9PT0hMSlpPXU7ZWxzZSBpZighaSlyZXR1cm4gdGhpcztyZXR1cm4gMT09PXImJihzPWksaT1mdW5jdGlvbihlKXtyZXR1cm4gWigpLm9mZihlKSxzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saS5ndWlkPXMuZ3VpZHx8KHMuZ3VpZD1aLmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe1ouZXZlbnQuYWRkKHRoaXMsZSxpLG4sdCl9KX0sb25lOmZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0aGlzLm9uKGUsdCxuLGksMSl9LG9mZjpmdW5jdGlvbihlLHQsbil7dmFyIGkscjtpZihlJiZlLnByZXZlbnREZWZhdWx0JiZlLmhhbmRsZU9iailyZXR1cm4gaT1lLmhhbmRsZU9iaixaKGUuZGVsZWdhdGVUYXJnZXQpLm9mZihpLm5hbWVzcGFjZT9pLm9yaWdUeXBlKyIuIitpLm5hbWVzcGFjZTppLm9yaWdUeXBlLGkuc2VsZWN0b3IsaS5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKHIgaW4gZSl0aGlzLm9mZihyLHQsZVtyXSk7cmV0dXJuIHRoaXN9cmV0dXJuKHQ9PT0hMXx8ImZ1bmN0aW9uIj09dHlwZW9mIHQpJiYobj10LHQ9dm9pZCAwKSxuPT09ITEmJihuPXUpLHRoaXMuZWFjaChmdW5jdGlvbigpe1ouZXZlbnQucmVtb3ZlKHRoaXMsZSxuLHQpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Wi5ldmVudC50cmlnZ2VyKGUsdCx0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXNbMF07cmV0dXJuIG4/Wi5ldmVudC50cmlnZ2VyKGUsdCxuLCEwKTp2b2lkIDB9fSk7dmFyIFBlPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzpdKylbXj5dKilcLz4vZ2ksTGU9LzwoW1x3Ol0rKS8sTmU9Lzx8JiM/XHcrOy8sRGU9LzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxIZT0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxSZT0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksTWU9L150cnVlXC8oLiopLywkZT0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2csT2U9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfTtPZS5vcHRncm91cD1PZS5vcHRpb24sT2UudGJvZHk9T2UudGZvb3Q9T2UuY29sZ3JvdXA9T2UuY2FwdGlvbj1PZS50aGVhZCxPZS50aD1PZS50ZCxaLmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIscyxvLGE9ZS5jbG9uZU5vZGUoITApLGw9Wi5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSk7aWYoIShKLm5vQ2xvbmVDaGVja2VkfHwxIT09ZS5ub2RlVHlwZSYmMTEhPT1lLm5vZGVUeXBlfHxaLmlzWE1MRG9jKGUpKSlmb3Iobz1tKGEpLHM9bShlKSxpPTAscj1zLmxlbmd0aDtyPmk7aSsrKXkoc1tpXSxvW2ldKTtpZih0KWlmKG4pZm9yKHM9c3x8bShlKSxvPW98fG0oYSksaT0wLHI9cy5sZW5ndGg7cj5pO2krKyl2KHNbaV0sb1tpXSk7ZWxzZSB2KGUsYSk7cmV0dXJuIG89bShhLCJzY3JpcHQiKSxvLmxlbmd0aD4wJiZnKG8sIWwmJm0oZSwic2NyaXB0IikpLGF9LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oZSx0LG4saSl7Zm9yKHZhciByLHMsbyxhLGwsYyx1PXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGQ9W10scD0wLGg9ZS5sZW5ndGg7aD5wO3ArKylpZihyPWVbcF0scnx8MD09PXIpaWYoIm9iamVjdCI9PT1aLnR5cGUocikpWi5tZXJnZShkLHIubm9kZVR5cGU/W3JdOnIpO2Vsc2UgaWYoTmUudGVzdChyKSl7Zm9yKHM9c3x8dS5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxvPShMZS5leGVjKHIpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLAphPU9lW29dfHxPZS5fZGVmYXVsdCxzLmlubmVySFRNTD1hWzFdK3IucmVwbGFjZShQZSwiPCQxPjwvJDI+IikrYVsyXSxjPWFbMF07Yy0tOylzPXMubGFzdENoaWxkO1oubWVyZ2UoZCxzLmNoaWxkTm9kZXMpLHM9dS5maXJzdENoaWxkLHMudGV4dENvbnRlbnQ9IiJ9ZWxzZSBkLnB1c2godC5jcmVhdGVUZXh0Tm9kZShyKSk7Zm9yKHUudGV4dENvbnRlbnQ9IiIscD0wO3I9ZFtwKytdOylpZigoIWl8fC0xPT09Wi5pbkFycmF5KHIsaSkpJiYobD1aLmNvbnRhaW5zKHIub3duZXJEb2N1bWVudCxyKSxzPW0odS5hcHBlbmRDaGlsZChyKSwic2NyaXB0IiksbCYmZyhzKSxuKSlmb3IoYz0wO3I9c1tjKytdOylSZS50ZXN0KHIudHlwZXx8IiIpJiZuLnB1c2gocik7cmV0dXJuIHV9LGNsZWFuRGF0YTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbixpLHIscz1aLmV2ZW50LnNwZWNpYWwsbz0wO3ZvaWQgMCE9PShuPWVbb10pO28rKyl7aWYoWi5hY2NlcHREYXRhKG4pJiYocj1uW21lLmV4cGFuZG9dLHImJih0PW1lLmNhY2hlW3JdKSkpe2lmKHQuZXZlbnRzKWZvcihpIGluIHQuZXZlbnRzKXNbaV0/Wi5ldmVudC5yZW1vdmUobixpKTpaLnJlbW92ZUV2ZW50KG4saSx0LmhhbmRsZSk7bWUuY2FjaGVbcl0mJmRlbGV0ZSBtZS5jYWNoZVtyXX1kZWxldGUgeWUuY2FjaGVbblt5ZS5leHBhbmRvXV19fX0pLFouZm4uZXh0ZW5kKHt0ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiB2ZSh0aGlzLGZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP1oudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpeygxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSkmJih0aGlzLnRleHRDb250ZW50PWUpfSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgdD1wKHRoaXMsZSk7dC5hcHBlbmRDaGlsZChlKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihlKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIHQ9cCh0aGlzLGUpO3QuaW5zZXJ0QmVmb3JlKGUsdC5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMubmV4dFNpYmxpbmcpfSl9LHJlbW92ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixpPWU/Wi5maWx0ZXIoZSx0aGlzKTp0aGlzLHI9MDtudWxsIT0obj1pW3JdKTtyKyspdHx8MSE9PW4ubm9kZVR5cGV8fFouY2xlYW5EYXRhKG0obikpLG4ucGFyZW50Tm9kZSYmKHQmJlouY29udGFpbnMobi5vd25lckRvY3VtZW50LG4pJiZnKG0obiwic2NyaXB0IikpLG4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9MDtudWxsIT0oZT10aGlzW3RdKTt0KyspMT09PWUubm9kZVR5cGUmJihaLmNsZWFuRGF0YShtKGUsITEpKSxlLnRleHRDb250ZW50PSIiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1udWxsPT1lPyExOmUsdD1udWxsPT10P2U6dCx0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBaLmNsb25lKHRoaXMsZSx0KX0pfSxodG1sOmZ1bmN0aW9uKGUpe3JldHVybiB2ZSh0aGlzLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXNbMF18fHt9LG49MCxpPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWUmJjE9PT10Lm5vZGVUeXBlKXJldHVybiB0LmlubmVySFRNTDtpZigic3RyaW5nIj09dHlwZW9mIGUmJiFEZS50ZXN0KGUpJiYhT2VbKExlLmV4ZWMoZSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKXtlPWUucmVwbGFjZShQZSwiPCQxPjwvJDI+Iik7dHJ5e2Zvcig7aT5uO24rKyl0PXRoaXNbbl18fHt9LDE9PT10Lm5vZGVUeXBlJiYoWi5jbGVhbkRhdGEobSh0LCExKSksdC5pbm5lckhUTUw9ZSk7dD0wfWNhdGNoKHIpe319dCYmdGhpcy5lbXB0eSgpLmFwcGVuZChlKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24odCl7ZT10aGlzLnBhcmVudE5vZGUsWi5jbGVhbkRhdGEobSh0aGlzKSksZSYmZS5yZXBsYWNlQ2hpbGQodCx0aGlzKX0pLGUmJihlLmxlbmd0aHx8ZS5ub2RlVHlwZSk/dGhpczp0aGlzLnJlbW92ZSgpfSxkZXRhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVtb3ZlKGUsITApfSxkb21NYW5pcDpmdW5jdGlvbihlLHQpe2U9WC5hcHBseShbXSxlKTt2YXIgbixpLHIscyxvLGEsbD0wLGM9dGhpcy5sZW5ndGgsdT10aGlzLGQ9Yy0xLHA9ZVswXSxnPVouaXNGdW5jdGlvbihwKTtpZihnfHxjPjEmJiJzdHJpbmciPT10eXBlb2YgcCYmIUouY2hlY2tDbG9uZSYmSGUudGVzdChwKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3ZhciBpPXUuZXEobik7ZyYmKGVbMF09cC5jYWxsKHRoaXMsbixpLmh0bWwoKSkpLGkuZG9tTWFuaXAoZSx0KX0pO2lmKGMmJihuPVouYnVpbGRGcmFnbWVudChlLHRoaXNbMF0ub3duZXJEb2N1bWVudCwhMSx0aGlzKSxpPW4uZmlyc3RDaGlsZCwxPT09bi5jaGlsZE5vZGVzLmxlbmd0aCYmKG49aSksaSkpe2ZvcihyPVoubWFwKG0obiwic2NyaXB0IiksaCkscz1yLmxlbmd0aDtjPmw7bCsrKW89bixsIT09ZCYmKG89Wi5jbG9uZShvLCEwLCEwKSxzJiZaLm1lcmdlKHIsbShvLCJzY3JpcHQiKSkpLHQuY2FsbCh0aGlzW2xdLG8sbCk7aWYocylmb3IoYT1yW3IubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsWi5tYXAocixmKSxsPTA7cz5sO2wrKylvPXJbbF0sUmUudGVzdChvLnR5cGV8fCIiKSYmIW1lLmFjY2VzcyhvLCJnbG9iYWxFdmFsIikmJlouY29udGFpbnMoYSxvKSYmKG8uc3JjP1ouX2V2YWxVcmwmJlouX2V2YWxVcmwoby5zcmMpOlouZ2xvYmFsRXZhbChvLnRleHRDb250ZW50LnJlcGxhY2UoJGUsIiIpKSl9cmV0dXJuIHRoaXN9fSksWi5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oZSx0KXtaLmZuW2VdPWZ1bmN0aW9uKGUpe2Zvcih2YXIgbixpPVtdLHI9WihlKSxzPXIubGVuZ3RoLTEsbz0wO3M+PW87bysrKW49bz09PXM/dGhpczp0aGlzLmNsb25lKCEwKSxaKHJbb10pW3RdKG4pLHouYXBwbHkoaSxuLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaSl9fSk7dmFyIEllLHFlPXt9LEZlPS9ebWFyZ2luLyxVZT1uZXcgUmVnRXhwKCJeKCIrVGUrIikoPyFweClbYS16JV0rJCIsImkiKSxXZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3Lm9wZW5lcj90Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0LG51bGwpOmUuZ2V0Q29tcHV0ZWRTdHlsZSh0LG51bGwpfTshZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7by5zdHlsZS5jc3NUZXh0PSItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjElO3RvcDoxJTtib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3dpZHRoOjRweDtwb3NpdGlvbjphYnNvbHV0ZSIsby5pbm5lckhUTUw9IiIsci5hcHBlbmRDaGlsZChzKTt2YXIgdD1lLmdldENvbXB1dGVkU3R5bGUobyxudWxsKTtuPSIxJSIhPT10LnRvcCxpPSI0cHgiPT09dC53aWR0aCxyLnJlbW92ZUNoaWxkKHMpfXZhciBuLGkscj1LLmRvY3VtZW50RWxlbWVudCxzPUsuY3JlYXRlRWxlbWVudCgiZGl2Iiksbz1LLmNyZWF0ZUVsZW1lbnQoImRpdiIpO28uc3R5bGUmJihvLnN0eWxlLmJhY2tncm91bmRDbGlwPSJjb250ZW50LWJveCIsby5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiLEouY2xlYXJDbG9uZVN0eWxlPSJjb250ZW50LWJveCI9PT1vLnN0eWxlLmJhY2tncm91bmRDbGlwLHMuc3R5bGUuY3NzVGV4dD0iYm9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7bWFyZ2luLXRvcDoxcHg7cG9zaXRpb246YWJzb2x1dGUiLHMuYXBwZW5kQ2hpbGQobyksZS5nZXRDb21wdXRlZFN0eWxlJiZaLmV4dGVuZChKLHtwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHQoKSxufSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1pJiZ0KCksaX0scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3ZhciB0LG49by5hcHBlbmRDaGlsZChLLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtyZXR1cm4gbi5zdHlsZS5jc3NUZXh0PW8uc3R5bGUuY3NzVGV4dD0iLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowIixuLnN0eWxlLm1hcmdpblJpZ2h0PW4uc3R5bGUud2lkdGg9IjAiLG8uc3R5bGUud2lkdGg9IjFweCIsci5hcHBlbmRDaGlsZChzKSx0PSFwYXJzZUZsb2F0KGUuZ2V0Q29tcHV0ZWRTdHlsZShuLG51bGwpLm1hcmdpblJpZ2h0KSxyLnJlbW92ZUNoaWxkKHMpLG8ucmVtb3ZlQ2hpbGQobiksdH19KSl9KCksWi5zd2FwPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLHMsbz17fTtmb3IocyBpbiB0KW9bc109ZS5zdHlsZVtzXSxlLnN0eWxlW3NdPXRbc107cj1uLmFwcGx5KGUsaXx8W10pO2ZvcihzIGluIHQpZS5zdHlsZVtzXT1vW3NdO3JldHVybiByfTt2YXIgWGU9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLHplPW5ldyBSZWdFeHAoIl4oIitUZSsiKSguKikkIiwiaSIpLEJlPW5ldyBSZWdFeHAoIl4oWystXSk9KCIrVGUrIikiLCJpIiksVmU9e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToiaGlkZGVuIixkaXNwbGF5OiJibG9jayJ9LFllPXtsZXR0ZXJTcGFjaW5nOiIwIixmb250V2VpZ2h0OiI0MDAifSxHZT1bIldlYmtpdCIsIk8iLCJNb3oiLCJtcyJdO1ouZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGUsdCl7aWYodCl7dmFyIG49VChlLCJvcGFjaXR5Iik7cmV0dXJuIiI9PT1uPyIxIjpufX19fSxjc3NOdW1iZXI6e2NvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnsiZmxvYXQiOiJjc3NGbG9hdCJ9LHN0eWxlOmZ1bmN0aW9uKGUsdCxuLGkpe2lmKGUmJjMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmZS5zdHlsZSl7dmFyIHIscyxvLGE9Wi5jYW1lbENhc2UodCksbD1lLnN0eWxlO3JldHVybiB0PVouY3NzUHJvcHNbYV18fChaLmNzc1Byb3BzW2FdPXgobCxhKSksbz1aLmNzc0hvb2tzW3RdfHxaLmNzc0hvb2tzW2FdLHZvaWQgMD09PW4/byYmImdldCJpbiBvJiZ2b2lkIDAhPT0ocj1vLmdldChlLCExLGkpKT9yOmxbdF06KHM9dHlwZW9mIG4sInN0cmluZyI9PT1zJiYocj1CZS5leGVjKG4pKSYmKG49KHJbMV0rMSkqclsyXStwYXJzZUZsb2F0KFouY3NzKGUsdCkpLHM9Im51bWJlciIpLG51bGwhPW4mJm49PT1uJiYoIm51bWJlciIhPT1zfHxaLmNzc051bWJlclthXXx8KG4rPSJweCIpLEouY2xlYXJDbG9uZVN0eWxlfHwiIiE9PW58fDAhPT10LmluZGV4T2YoImJhY2tncm91bmQiKXx8KGxbdF09ImluaGVyaXQiKSxvJiYic2V0ImluIG8mJnZvaWQgMD09PShuPW8uc2V0KGUsbixpKSl8fChsW3RdPW4pKSx2b2lkIDApfX0sY3NzOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLHMsbyxhPVouY2FtZWxDYXNlKHQpO3JldHVybiB0PVouY3NzUHJvcHNbYV18fChaLmNzc1Byb3BzW2FdPXgoZS5zdHlsZSxhKSksbz1aLmNzc0hvb2tzW3RdfHxaLmNzc0hvb2tzW2FdLG8mJiJnZXQiaW4gbyYmKHI9by5nZXQoZSwhMCxuKSksdm9pZCAwPT09ciYmKHI9VChlLHQsaSkpLCJub3JtYWwiPT09ciYmdCBpbiBZZSYmKHI9WWVbdF0pLCIiPT09bnx8bj8ocz1wYXJzZUZsb2F0KHIpLG49PT0hMHx8Wi5pc051bWVyaWMocyk/c3x8MDpyKTpyfX0pLFouZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oZSx0KXtaLmNzc0hvb2tzW3RdPXtnZXQ6ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuP1hlLnRlc3QoWi5jc3MoZSwiZGlzcGxheSIpKSYmMD09PWUub2Zmc2V0V2lkdGg/Wi5zd2FwKGUsVmUsZnVuY3Rpb24oKXtyZXR1cm4gayhlLHQsaSl9KTprKGUsdCxpKTp2b2lkIDB9LHNldDpmdW5jdGlvbihlLG4saSl7dmFyIHI9aSYmV2UoZSk7cmV0dXJuIHcoZSxuLGk/RShlLHQsaSwiYm9yZGVyLWJveCI9PT1aLmNzcyhlLCJib3hTaXppbmciLCExLHIpLHIpOjApfX19KSxaLmNzc0hvb2tzLm1hcmdpblJpZ2h0PVMoSi5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/Wi5zd2FwKGUse2Rpc3BsYXk6ImlubGluZS1ibG9jayJ9LFQsW2UsIm1hcmdpblJpZ2h0Il0pOnZvaWQgMH0pLFouZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKGUsdCl7Wi5jc3NIb29rc1tlK3RdPXtleHBhbmQ6ZnVuY3Rpb24obil7Zm9yKHZhciBpPTAscj17fSxzPSJzdHJpbmciPT10eXBlb2Ygbj9uLnNwbGl0KCIgIik6W25dOzQ+aTtpKyspcltlK1NlW2ldK3RdPXNbaV18fHNbaS0yXXx8c1swXTtyZXR1cm4gcn19LEZlLnRlc3QoZSl8fChaLmNzc0hvb2tzW2UrdF0uc2V0PXcpfSksWi5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihlLHQpe3JldHVybiB2ZSh0aGlzLGZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLHM9e30sbz0wO2lmKFouaXNBcnJheSh0KSl7Zm9yKGk9V2UoZSkscj10Lmxlbmd0aDtyPm87bysrKXNbdFtvXV09Wi5jc3MoZSx0W29dLCExLGkpO3JldHVybiBzfXJldHVybiB2b2lkIDAhPT1uP1ouc3R5bGUoZSx0LG4pOlouY3NzKGUsdCl9LGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIEModGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gQyh0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGU/ZT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXt4ZSh0aGlzKT9aKHRoaXMpLnNob3coKTpaKHRoaXMpLmhpZGUoKX0pfX0pLFouVHdlZW49aixqLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aixpbml0OmZ1bmN0aW9uKGUsdCxuLGkscixzKXt0aGlzLmVsZW09ZSx0aGlzLnByb3A9bix0aGlzLmVhc2luZz1yfHwic3dpbmciLHRoaXMub3B0aW9ucz10LHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1pLHRoaXMudW5pdD1zfHwoWi5jc3NOdW1iZXJbbl0/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBlPWoucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGUmJmUuZ2V0P2UuZ2V0KHRoaXMpOmoucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49ai5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPXQ9Wi5lYXNpbmdbdGhpcy5lYXNpbmddKGUsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmUsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9dD1lLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSp0K3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLG4mJm4uc2V0P24uc2V0KHRoaXMpOmoucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sai5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9ai5wcm90b3R5cGUsai5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIG51bGw9PWUuZWxlbVtlLnByb3BdfHxlLmVsZW0uc3R5bGUmJm51bGwhPWUuZWxlbS5zdHlsZVtlLnByb3BdPyh0PVouY3NzKGUuZWxlbSxlLnByb3AsIiIpLHQmJiJhdXRvIiE9PXQ/dDowKTplLmVsZW1bZS5wcm9wXX0sc2V0OmZ1bmN0aW9uKGUpe1ouZnguc3RlcFtlLnByb3BdP1ouZnguc3RlcFtlLnByb3BdKGUpOmUuZWxlbS5zdHlsZSYmKG51bGwhPWUuZWxlbS5zdHlsZVtaLmNzc1Byb3BzW2UucHJvcF1dfHxaLmNzc0hvb2tzW2UucHJvcF0pP1ouc3R5bGUoZS5lbGVtLGUucHJvcCxlLm5vdytlLnVuaXQpOmUuZWxlbVtlLnByb3BdPWUubm93fX19LGoucHJvcEhvb2tzLnNjcm9sbFRvcD1qLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oZSl7ZS5lbGVtLm5vZGVUeXBlJiZlLmVsZW0ucGFyZW50Tm9kZSYmKGUuZWxlbVtlLnByb3BdPWUubm93KX19LFouZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn19LFouZng9ai5wcm90b3R5cGUuaW5pdCxaLmZ4LnN0ZXA9e307dmFyIEplLEtlLFFlPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxaZT1uZXcgUmVnRXhwKCJeKD86KFsrLV0pPXwpKCIrVGUrIikoW2EteiVdKikkIiwiaSIpLGV0PS9xdWV1ZUhvb2tzJC8sdHQ9W05dLG50PXsiKiI6W2Z1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5jcmVhdGVUd2VlbihlLHQpLGk9bi5jdXIoKSxyPVplLmV4ZWModCkscz1yJiZyWzNdfHwoWi5jc3NOdW1iZXJbZV0/IiI6InB4Iiksbz0oWi5jc3NOdW1iZXJbZV18fCJweCIhPT1zJiYraSkmJlplLmV4ZWMoWi5jc3Mobi5lbGVtLGUpKSxhPTEsbD0yMDtpZihvJiZvWzNdIT09cyl7cz1zfHxvWzNdLHI9cnx8W10sbz0raXx8MTtkbyBhPWF8fCIuNSIsby89YSxaLnN0eWxlKG4uZWxlbSxlLG8rcyk7d2hpbGUoYSE9PShhPW4uY3VyKCkvaSkmJjEhPT1hJiYtLWwpfXJldHVybiByJiYobz1uLnN0YXJ0PStvfHwraXx8MCxuLnVuaXQ9cyxuLmVuZD1yWzFdP28rKHJbMV0rMSkqclsyXTorclsyXSksbn1dfTtaLkFuaW1hdGlvbj1aLmV4dGVuZChILHt0d2VlbmVyOmZ1bmN0aW9uKGUsdCl7Wi5pc0Z1bmN0aW9uKGUpPyh0PWUsZT1bIioiXSk6ZT1lLnNwbGl0KCIgIik7Zm9yKHZhciBuLGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspbj1lW2ldLG50W25dPW50W25dfHxbXSxudFtuXS51bnNoaWZ0KHQpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt0P3R0LnVuc2hpZnQoZSk6dHQucHVzaChlKX19KSxaLnNwZWVkPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1lJiYib2JqZWN0Ij09dHlwZW9mIGU/Wi5leHRlbmQoe30sZSk6e2NvbXBsZXRlOm58fCFuJiZ0fHxaLmlzRnVuY3Rpb24oZSkmJmUsZHVyYXRpb246ZSxlYXNpbmc6biYmdHx8dCYmIVouaXNGdW5jdGlvbih0KSYmdH07cmV0dXJuIGkuZHVyYXRpb249Wi5meC5vZmY/MDoibnVtYmVyIj09dHlwZW9mIGkuZHVyYXRpb24/aS5kdXJhdGlvbjppLmR1cmF0aW9uIGluIFouZnguc3BlZWRzP1ouZnguc3BlZWRzW2kuZHVyYXRpb25dOlouZnguc3BlZWRzLl9kZWZhdWx0LChudWxsPT1pLnF1ZXVlfHxpLnF1ZXVlPT09ITApJiYoaS5xdWV1ZT0iZngiKSxpLm9sZD1pLmNvbXBsZXRlLGkuY29tcGxldGU9ZnVuY3Rpb24oKXtaLmlzRnVuY3Rpb24oaS5vbGQpJiZpLm9sZC5jYWxsKHRoaXMpLGkucXVldWUmJlouZGVxdWV1ZSh0aGlzLGkucXVldWUpfSxpfSxaLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0aGlzLmZpbHRlcih4ZSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0fSxlLG4saSl9LGFuaW1hdGU6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9Wi5pc0VtcHR5T2JqZWN0KGUpLHM9Wi5zcGVlZCh0LG4saSksbz1mdW5jdGlvbigpe3ZhciB0PUgodGhpcyxaLmV4dGVuZCh7fSxlKSxzKTsocnx8bWUuZ2V0KHRoaXMsImZpbmlzaCIpKSYmdC5zdG9wKCEwKX07cmV0dXJuIG8uZmluaXNoPW8scnx8cy5xdWV1ZT09PSExP3RoaXMuZWFjaChvKTp0aGlzLnF1ZXVlKHMucXVldWUsbyl9LHN0b3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RvcDtkZWxldGUgZS5zdG9wLHQobil9O3JldHVybiJzdHJpbmciIT10eXBlb2YgZSYmKG49dCx0PWUsZT12b2lkIDApLHQmJmUhPT0hMSYmdGhpcy5xdWV1ZShlfHwiZngiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD0hMCxyPW51bGwhPWUmJmUrInF1ZXVlSG9va3MiLHM9Wi50aW1lcnMsbz1tZS5nZXQodGhpcyk7aWYocilvW3JdJiZvW3JdLnN0b3AmJmkob1tyXSk7ZWxzZSBmb3IociBpbiBvKW9bcl0mJm9bcl0uc3RvcCYmZXQudGVzdChyKSYmaShvW3JdKTtmb3Iocj1zLmxlbmd0aDtyLS07KXNbcl0uZWxlbSE9PXRoaXN8fG51bGwhPWUmJnNbcl0ucXVldWUhPT1lfHwoc1tyXS5hbmltLnN0b3AobiksdD0hMSxzLnNwbGljZShyLDEpKTsodHx8IW4pJiZaLmRlcXVldWUodGhpcyxlKX0pfSxmaW5pc2g6ZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT0hMSYmKGU9ZXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQsbj1tZS5nZXQodGhpcyksaT1uW2UrInF1ZXVlIl0scj1uW2UrInF1ZXVlSG9va3MiXSxzPVoudGltZXJzLG89aT9pLmxlbmd0aDowO2ZvcihuLmZpbmlzaD0hMCxaLnF1ZXVlKHRoaXMsZSxbXSksciYmci5zdG9wJiZyLnN0b3AuY2FsbCh0aGlzLCEwKSx0PXMubGVuZ3RoO3QtLTspc1t0XS5lbGVtPT09dGhpcyYmc1t0XS5xdWV1ZT09PWUmJihzW3RdLmFuaW0uc3RvcCghMCkscy5zcGxpY2UodCwxKSk7Zm9yKHQ9MDtvPnQ7dCsrKWlbdF0mJmlbdF0uZmluaXNoJiZpW3RdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSBuLmZpbmlzaH0pfX0pLFouZWFjaChbInRvZ2dsZSIsInNob3ciLCJoaWRlIl0sZnVuY3Rpb24oZSx0KXt2YXIgbj1aLmZuW3RdO1ouZm5bdF09ZnVuY3Rpb24oZSxpLHIpe3JldHVybiBudWxsPT1lfHwiYm9vbGVhbiI9PXR5cGVvZiBlP24uYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShQKHQsITApLGUsaSxyKX19KSxaLmVhY2goe3NsaWRlRG93bjpQKCJzaG93Iiksc2xpZGVVcDpQKCJoaWRlIiksc2xpZGVUb2dnbGU6UCgidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihlLHQpe1ouZm5bZV09ZnVuY3Rpb24oZSxuLGkpe3JldHVybiB0aGlzLmFuaW1hdGUodCxlLG4saSl9fSksWi50aW1lcnM9W10sWi5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGUsdD0wLG49Wi50aW1lcnM7Zm9yKEplPVoubm93KCk7dDxuLmxlbmd0aDt0KyspZT1uW3RdLGUoKXx8blt0XSE9PWV8fG4uc3BsaWNlKHQtLSwxKTtuLmxlbmd0aHx8Wi5meC5zdG9wKCksSmU9dm9pZCAwfSxaLmZ4LnRpbWVyPWZ1bmN0aW9uKGUpe1oudGltZXJzLnB1c2goZSksZSgpP1ouZnguc3RhcnQoKTpaLnRpbWVycy5wb3AoKX0sWi5meC5pbnRlcnZhbD0xMyxaLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7S2V8fChLZT1zZXRJbnRlcnZhbChaLmZ4LnRpY2ssWi5meC5pbnRlcnZhbCkpfSxaLmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKEtlKSxLZT1udWxsfSxaLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxaLmZuLmRlbGF5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9Wi5meD9aLmZ4LnNwZWVkc1tlXXx8ZTplLHQ9dHx8ImZ4Iix0aGlzLnF1ZXVlKHQsZnVuY3Rpb24odCxuKXt2YXIgaT1zZXRUaW1lb3V0KHQsZSk7bi5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGkpfX0pfSxmdW5jdGlvbigpe3ZhciBlPUsuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSx0PUsuY3JlYXRlRWxlbWVudCgic2VsZWN0Iiksbj10LmFwcGVuZENoaWxkKEsuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO2UudHlwZT0iY2hlY2tib3giLEouY2hlY2tPbj0iIiE9PWUudmFsdWUsSi5vcHRTZWxlY3RlZD1uLnNlbGVjdGVkLHQuZGlzYWJsZWQ9ITAsSi5vcHREaXNhYmxlZD0hbi5kaXNhYmxlZCxlPUsuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxlLnZhbHVlPSJ0IixlLnR5cGU9InJhZGlvIixKLnJhZGlvVmFsdWU9InQiPT09ZS52YWx1ZX0oKTt2YXIgaXQscnQsc3Q9Wi5leHByLmF0dHJIYW5kbGU7Wi5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdmUodGhpcyxaLmF0dHIsZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1oucmVtb3ZlQXR0cih0aGlzLGUpfSl9fSksWi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIscz1lLm5vZGVUeXBlO2lmKGUmJjMhPT1zJiY4IT09cyYmMiE9PXMpcmV0dXJuIHR5cGVvZiBlLmdldEF0dHJpYnV0ZT09PUVlP1oucHJvcChlLHQsbik6KDE9PT1zJiZaLmlzWE1MRG9jKGUpfHwodD10LnRvTG93ZXJDYXNlKCksaT1aLmF0dHJIb29rc1t0XXx8KFouZXhwci5tYXRjaC5ib29sLnRlc3QodCk/cnQ6aXQpKSx2b2lkIDA9PT1uP2kmJiJnZXQiaW4gaSYmbnVsbCE9PShyPWkuZ2V0KGUsdCkpP3I6KHI9Wi5maW5kLmF0dHIoZSx0KSxudWxsPT1yP3ZvaWQgMDpyKTpudWxsIT09bj9pJiYic2V0ImluIGkmJnZvaWQgMCE9PShyPWkuc2V0KGUsbix0KSk/cjooZS5zZXRBdHRyaWJ1dGUodCxuKyIiKSxuKTp2b2lkIFoucmVtb3ZlQXR0cihlLHQpKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj0wLHM9dCYmdC5tYXRjaChoZSk7aWYocyYmMT09PWUubm9kZVR5cGUpZm9yKDtuPXNbcisrXTspaT1aLnByb3BGaXhbbl18fG4sWi5leHByLm1hdGNoLmJvb2wudGVzdChuKSYmKGVbaV09ITEpLGUucmVtb3ZlQXR0cmlidXRlKG4pfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihlLHQpe2lmKCFKLnJhZGlvVmFsdWUmJiJyYWRpbyI9PT10JiZaLm5vZGVOYW1lKGUsImlucHV0Iikpe3ZhciBuPWUudmFsdWU7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJ0eXBlIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19fX0pLHJ0PXtzZXQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0PT09ITE/Wi5yZW1vdmVBdHRyKGUsbik6ZS5zZXRBdHRyaWJ1dGUobixuKSxufX0sWi5lYWNoKFouZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGUsdCl7dmFyIG49c3RbdF18fFouZmluZC5hdHRyO3N0W3RdPWZ1bmN0aW9uKGUsdCxpKXt2YXIgcixzO3JldHVybiBpfHwocz1zdFt0XSxzdFt0XT1yLHI9bnVsbCE9bihlLHQsaSk/dC50b0xvd2VyQ2FzZSgpOm51bGwsc3RbdF09cykscn19KTt2YXIgb3Q9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaTtaLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihlLHQpe3JldHVybiB2ZSh0aGlzLFoucHJvcCxlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbWi5wcm9wRml4W2VdfHxlXX0pfX0pLFouZXh0ZW5kKHtwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn0scHJvcDpmdW5jdGlvbihlLHQsbil7dmFyIGkscixzLG89ZS5ub2RlVHlwZTtpZihlJiYzIT09byYmOCE9PW8mJjIhPT1vKXJldHVybiBzPTEhPT1vfHwhWi5pc1hNTERvYyhlKSxzJiYodD1aLnByb3BGaXhbdF18fHQscj1aLnByb3BIb29rc1t0XSksdm9pZCAwIT09bj9yJiYic2V0ImluIHImJnZvaWQgMCE9PShpPXIuc2V0KGUsbix0KSk/aTplW3RdPW46ciYmImdldCJpbiByJiZudWxsIT09KGk9ci5nZXQoZSx0KSk/aTplW3RdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaGFzQXR0cmlidXRlKCJ0YWJpbmRleCIpfHxvdC50ZXN0KGUubm9kZU5hbWUpfHxlLmhyZWY/ZS50YWJJbmRleDotMX19fX0pLEoub3B0U2VsZWN0ZWR8fChaLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfX0pLFouZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7Wi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pO3ZhciBhdD0vW1x0XHJcblxmXS9nO1ouZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixzLG8sYT0ic3RyaW5nIj09dHlwZW9mIGUmJmUsbD0wLGM9dGhpcy5sZW5ndGg7aWYoWi5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7Wih0aGlzKS5hZGRDbGFzcyhlLmNhbGwodGhpcyx0LHRoaXMuY2xhc3NOYW1lKSl9KTtpZihhKWZvcih0PShlfHwiIikubWF0Y2goaGUpfHxbXTtjPmw7bCsrKWlmKG49dGhpc1tsXSxpPTE9PT1uLm5vZGVUeXBlJiYobi5jbGFzc05hbWU/KCIgIituLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoYXQsIiAiKToiICIpKXtmb3Iocz0wO3I9dFtzKytdOylpLmluZGV4T2YoIiAiK3IrIiAiKTwwJiYoaSs9cisiICIpO289Wi50cmltKGkpLG4uY2xhc3NOYW1lIT09byYmKG4uY2xhc3NOYW1lPW8pfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixzLG8sYT0wPT09YXJndW1lbnRzLmxlbmd0aHx8InN0cmluZyI9PXR5cGVvZiBlJiZlLGw9MCxjPXRoaXMubGVuZ3RoO2lmKFouaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe1oodGhpcykucmVtb3ZlQ2xhc3MoZS5jYWxsKHRoaXMsdCx0aGlzLmNsYXNzTmFtZSkpfSk7aWYoYSlmb3IodD0oZXx8IiIpLm1hdGNoKGhlKXx8W107Yz5sO2wrKylpZihuPXRoaXNbbF0saT0xPT09bi5ub2RlVHlwZSYmKG4uY2xhc3NOYW1lPygiICIrbi5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKGF0LCIgIik6IiIpKXtmb3Iocz0wO3I9dFtzKytdOylmb3IoO2kuaW5kZXhPZigiICIrcisiICIpPj0wOylpPWkucmVwbGFjZSgiICIrcisiICIsIiAiKTtvPWU/Wi50cmltKGkpOiIiLG4uY2xhc3NOYW1lIT09byYmKG4uY2xhc3NOYW1lPW8pfXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPXR5cGVvZiBlO3JldHVybiJib29sZWFuIj09dHlwZW9mIHQmJiJzdHJpbmciPT09bj90P3RoaXMuYWRkQ2xhc3MoZSk6dGhpcy5yZW1vdmVDbGFzcyhlKTpaLmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKG4pe1oodGhpcykudG9nZ2xlQ2xhc3MoZS5jYWxsKHRoaXMsbix0aGlzLmNsYXNzTmFtZSx0KSx0KX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe2lmKCJzdHJpbmciPT09bilmb3IodmFyIHQsaT0wLHI9Wih0aGlzKSxzPWUubWF0Y2goaGUpfHxbXTt0PXNbaSsrXTspci5oYXNDbGFzcyh0KT9yLnJlbW92ZUNsYXNzKHQpOnIuYWRkQ2xhc3ModCk7ZWxzZShuPT09RWV8fCJib29sZWFuIj09PW4pJiYodGhpcy5jbGFzc05hbWUmJm1lLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGU9PT0hMT8iIjptZS5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIil9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PSIgIitlKyIgIixuPTAsaT10aGlzLmxlbmd0aDtpPm47bisrKWlmKDE9PT10aGlzW25dLm5vZGVUeXBlJiYoIiAiK3RoaXNbbl0uY2xhc3NOYW1lKyIgIikucmVwbGFjZShhdCwiICIpLmluZGV4T2YodCk+PTApcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIGx0PS9cci9nO1ouZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gaT1aLmlzRnVuY3Rpb24oZSksdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3ZhciByOzE9PT10aGlzLm5vZGVUeXBlJiYocj1pP2UuY2FsbCh0aGlzLG4sWih0aGlzKS52YWwoKSk6ZSxudWxsPT1yP3I9IiI6Im51bWJlciI9PXR5cGVvZiByP3IrPSIiOlouaXNBcnJheShyKSYmKHI9Wi5tYXAocixmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjplKyIifSkpLHQ9Wi52YWxIb29rc1t0aGlzLnR5cGVdfHxaLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sdCYmInNldCJpbiB0JiZ2b2lkIDAhPT10LnNldCh0aGlzLHIsInZhbHVlIil8fCh0aGlzLnZhbHVlPXIpKX0pO2lmKHIpcmV0dXJuIHQ9Wi52YWxIb29rc1tyLnR5cGVdfHxaLnZhbEhvb2tzW3Iubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sdCYmImdldCJpbiB0JiZ2b2lkIDAhPT0obj10LmdldChyLCJ2YWx1ZSIpKT9uOihuPXIudmFsdWUsInN0cmluZyI9PXR5cGVvZiBuP24ucmVwbGFjZShsdCwiIik6bnVsbD09bj8iIjpuKX19fSksWi5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihlKXt2YXIgdD1aLmZpbmQuYXR0cihlLCJ2YWx1ZSIpO3JldHVybiBudWxsIT10P3Q6Wi50cmltKFoudGV4dChlKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihlKXtmb3IodmFyIHQsbixpPWUub3B0aW9ucyxyPWUuc2VsZWN0ZWRJbmRleCxzPSJzZWxlY3Qtb25lIj09PWUudHlwZXx8MD5yLG89cz9udWxsOltdLGE9cz9yKzE6aS5sZW5ndGgsbD0wPnI/YTpzP3I6MDthPmw7bCsrKWlmKG49aVtsXSwobi5zZWxlY3RlZHx8bD09PXIpJiYoSi5vcHREaXNhYmxlZD8hbi5kaXNhYmxlZDpudWxsPT09bi5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpJiYoIW4ucGFyZW50Tm9kZS5kaXNhYmxlZHx8IVoubm9kZU5hbWUobi5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7aWYodD1aKG4pLnZhbCgpLHMpcmV0dXJuIHQ7by5wdXNoKHQpfXJldHVybiBvfSxzZXQ6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4saSxyPWUub3B0aW9ucyxzPVoubWFrZUFycmF5KHQpLG89ci5sZW5ndGg7by0tOylpPXJbb10sKGkuc2VsZWN0ZWQ9Wi5pbkFycmF5KGkudmFsdWUscyk+PTApJiYobj0hMCk7cmV0dXJuIG58fChlLnNlbGVjdGVkSW5kZXg9LTEpLHN9fX19KSxaLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtaLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gWi5pc0FycmF5KHQpP2UuY2hlY2tlZD1aLmluQXJyYXkoWihlKS52YWwoKSx0KT49MDp2b2lkIDB9fSxKLmNoZWNrT258fChaLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09PWUuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6ZS52YWx1ZX0pfSksWi5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsdCl7Wi5mblt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbih0LG51bGwsZSxuKTp0aGlzLnRyaWdnZXIodCl9fSksWi5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfSxiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5vbihlLG51bGwsdCxuKX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub2ZmKGUsbnVsbCx0KX0sZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHRoaXMub24odCxlLG4saSl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihlLCIqKiIpOnRoaXMub2ZmKHQsZXx8IioqIixuKX19KTt2YXIgY3Q9Wi5ub3coKSx1dD0vXD8vO1oucGFyc2VKU09OPWZ1bmN0aW9uKGUpe3JldHVybiBKU09OLnBhcnNlKGUrIiIpfSxaLnBhcnNlWE1MPWZ1bmN0aW9uKGUpe3ZhciB0LG47aWYoIWV8fCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gbnVsbDt0cnl7bj1uZXcgRE9NUGFyc2VyLHQ9bi5wYXJzZUZyb21TdHJpbmcoZSwidGV4dC94bWwiKX1jYXRjaChpKXt0PXZvaWQgMH1yZXR1cm4oIXR8fHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoKSYmWi5lcnJvcigiSW52YWxpZCBYTUw6ICIrZSksdH07dmFyIGR0PS8jLiokLyxwdD0vKFs/Jl0pXz1bXiZdKi8saHQ9L14oLio/KTpbIFx0XSooW15cclxuXSopJC9nbSxmdD0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxndD0vXig/OkdFVHxIRUFEKSQvLHZ0PS9eXC9cLy8sbXQ9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8seXQ9e30sX3Q9e30sYnQ9IiovIi5jb25jYXQoIioiKSxUdD1lLmxvY2F0aW9uLmhyZWYsU3Q9bXQuZXhlYyhUdC50b0xvd2VyQ2FzZSgpKXx8W107Wi5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOlR0LHR5cGU6IkdFVCIsaXNMb2NhbDpmdC50ZXN0KFN0WzFdKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOmJ0LHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi94bWwvLGh0bWw6L2h0bWwvLGpzb246L2pzb24vfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6Wi5wYXJzZUpTT04sInRleHQgeG1sIjpaLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD8kKCQoZSxaLmFqYXhTZXR0aW5ncyksdCk6JChaLmFqYXhTZXR0aW5ncyxlKX0sYWpheFByZWZpbHRlcjpSKHl0KSxhamF4VHJhbnNwb3J0OlIoX3QpLGFqYXg6ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCxuLG8pe3ZhciBsLHUsbSx5LGIsUz10OzIhPT1fJiYoXz0yLGEmJmNsZWFyVGltZW91dChhKSxpPXZvaWQgMCxzPW98fCIiLFQucmVhZHlTdGF0ZT1lPjA/NDowLGw9ZT49MjAwJiYzMDA+ZXx8MzA0PT09ZSxuJiYoeT1PKGQsVCxuKSkseT1JKGQseSxULGwpLGw/KGQuaWZNb2RpZmllZCYmKGI9VC5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLGImJihaLmxhc3RNb2RpZmllZFtyXT1iKSxiPVQuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSxiJiYoWi5ldGFnW3JdPWIpKSwyMDQ9PT1lfHwiSEVBRCI9PT1kLnR5cGU/Uz0ibm9jb250ZW50IjozMDQ9PT1lP1M9Im5vdG1vZGlmaWVkIjooUz15LnN0YXRlLHU9eS5kYXRhLG09eS5lcnJvcixsPSFtKSk6KG09UywoZXx8IVMpJiYoUz0iZXJyb3IiLDA+ZSYmKGU9MCkpKSxULnN0YXR1cz1lLFQuc3RhdHVzVGV4dD0odHx8UykrIiIsbD9mLnJlc29sdmVXaXRoKHAsW3UsUyxUXSk6Zi5yZWplY3RXaXRoKHAsW1QsUyxtXSksVC5zdGF0dXNDb2RlKHYpLHY9dm9pZCAwLGMmJmgudHJpZ2dlcihsPyJhamF4U3VjY2VzcyI6ImFqYXhFcnJvciIsW1QsZCxsP3U6bV0pLGcuZmlyZVdpdGgocCxbVCxTXSksYyYmKGgudHJpZ2dlcigiYWpheENvbXBsZXRlIixbVCxkXSksLS1aLmFjdGl2ZXx8Wi5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpKSl9Im9iamVjdCI9PXR5cGVvZiBlJiYodD1lLGU9dm9pZCAwKSx0PXR8fHt9O3ZhciBpLHIscyxvLGEsbCxjLHUsZD1aLmFqYXhTZXR1cCh7fSx0KSxwPWQuY29udGV4dHx8ZCxoPWQuY29udGV4dCYmKHAubm9kZVR5cGV8fHAuanF1ZXJ5KT9aKHApOlouZXZlbnQsZj1aLkRlZmVycmVkKCksZz1aLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSx2PWQuc3RhdHVzQ29kZXx8e30sbT17fSx5PXt9LF89MCxiPSJjYW5jZWxlZCIsVD17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKDI9PT1fKXtpZighbylmb3Iobz17fTt0PWh0LmV4ZWMocyk7KW9bdFsxXS50b0xvd2VyQ2FzZSgpXT10WzJdO3Q9b1tlLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT10P251bGw6dH0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT1fP3M6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihlLHQpe3ZhciBuPWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gX3x8KGU9eVtuXT15W25dfHxlLG1bZV09dCksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gX3x8KGQubWltZVR5cGU9ZSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihlKXt2YXIgdDtpZihlKWlmKDI+Xylmb3IodCBpbiBlKXZbdF09W3ZbdF0sZVt0XV07ZWxzZSBULmFsd2F5cyhlW1Quc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGUpe3ZhciB0PWV8fGI7cmV0dXJuIGkmJmkuYWJvcnQodCksbigwLHQpLHRoaXN9fTtpZihmLnByb21pc2UoVCkuY29tcGxldGU9Zy5hZGQsVC5zdWNjZXNzPVQuZG9uZSxULmVycm9yPVQuZmFpbCxkLnVybD0oKGV8fGQudXJsfHxUdCkrIiIpLnJlcGxhY2UoZHQsIiIpLnJlcGxhY2UodnQsU3RbMV0rIi8vIiksZC50eXBlPXQubWV0aG9kfHx0LnR5cGV8fGQubWV0aG9kfHxkLnR5cGUsZC5kYXRhVHlwZXM9Wi50cmltKGQuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChoZSl8fFsiIl0sbnVsbD09ZC5jcm9zc0RvbWFpbiYmKGw9bXQuZXhlYyhkLnVybC50b0xvd2VyQ2FzZSgpKSxkLmNyb3NzRG9tYWluPSEoIWx8fGxbMV09PT1TdFsxXSYmbFsyXT09PVN0WzJdJiYobFszXXx8KCJodHRwOiI9PT1sWzFdPyI4MCI6IjQ0MyIpKT09PShTdFszXXx8KCJodHRwOiI9PT1TdFsxXT8iODAiOiI0NDMiKSkpKSxkLmRhdGEmJmQucHJvY2Vzc0RhdGEmJiJzdHJpbmciIT10eXBlb2YgZC5kYXRhJiYoZC5kYXRhPVoucGFyYW0oZC5kYXRhLGQudHJhZGl0aW9uYWwpKSxNKHl0LGQsdCxUKSwyPT09XylyZXR1cm4gVDtjPVouZXZlbnQmJmQuZ2xvYmFsLGMmJjA9PT1aLmFjdGl2ZSsrJiZaLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLGQudHlwZT1kLnR5cGUudG9VcHBlckNhc2UoKSxkLmhhc0NvbnRlbnQ9IWd0LnRlc3QoZC50eXBlKSxyPWQudXJsLGQuaGFzQ29udGVudHx8KGQuZGF0YSYmKHI9ZC51cmwrPSh1dC50ZXN0KHIpPyImIjoiPyIpK2QuZGF0YSxkZWxldGUgZC5kYXRhKSxkLmNhY2hlPT09ITEmJihkLnVybD1wdC50ZXN0KHIpP3IucmVwbGFjZShwdCwiJDFfPSIrY3QrKyk6cisodXQudGVzdChyKT8iJiI6Ij8iKSsiXz0iK2N0KyspKSxkLmlmTW9kaWZpZWQmJihaLmxhc3RNb2RpZmllZFtyXSYmVC5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsWi5sYXN0TW9kaWZpZWRbcl0pLFouZXRhZ1tyXSYmVC5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixaLmV0YWdbcl0pKSwoZC5kYXRhJiZkLmhhc0NvbnRlbnQmJmQuY29udGVudFR5cGUhPT0hMXx8dC5jb250ZW50VHlwZSkmJlQuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixkLmNvbnRlbnRUeXBlKSxULnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsZC5kYXRhVHlwZXNbMF0mJmQuYWNjZXB0c1tkLmRhdGFUeXBlc1swXV0/ZC5hY2NlcHRzW2QuZGF0YVR5cGVzWzBdXSsoIioiIT09ZC5kYXRhVHlwZXNbMF0/IiwgIitidCsiOyBxPTAuMDEiOiIiKTpkLmFjY2VwdHNbIioiXSk7Zm9yKHUgaW4gZC5oZWFkZXJzKVQuc2V0UmVxdWVzdEhlYWRlcih1LGQuaGVhZGVyc1t1XSk7aWYoZC5iZWZvcmVTZW5kJiYoZC5iZWZvcmVTZW5kLmNhbGwocCxULGQpPT09ITF8fDI9PT1fKSlyZXR1cm4gVC5hYm9ydCgpO2I9ImFib3J0Ijtmb3IodSBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSlUW3VdKGRbdV0pO2lmKGk9TShfdCxkLHQsVCkpe1QucmVhZHlTdGF0ZT0xLGMmJmgudHJpZ2dlcigiYWpheFNlbmQiLFtULGRdKSxkLmFzeW5jJiZkLnRpbWVvdXQ+MCYmKGE9c2V0VGltZW91dChmdW5jdGlvbigpe1QuYWJvcnQoInRpbWVvdXQiKX0sZC50aW1lb3V0KSk7dHJ5e189MSxpLnNlbmQobSxuKX1jYXRjaChTKXtpZighKDI+XykpdGhyb3cgUztuKC0xLFMpfX1lbHNlIG4oLTEsIk5vIFRyYW5zcG9ydCIpO3JldHVybiBUfSxnZXRKU09OOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gWi5nZXQoZSx0LG4sImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFouZ2V0KGUsdm9pZCAwLHQsInNjcmlwdCIpfX0pLFouZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihlLHQpe1pbdF09ZnVuY3Rpb24oZSxuLGkscil7cmV0dXJuIFouaXNGdW5jdGlvbihuKSYmKHI9cnx8aSxpPW4sbj12b2lkIDApLFouYWpheCh7dXJsOmUsdHlwZTp0LGRhdGFUeXBlOnIsZGF0YTpuLHN1Y2Nlc3M6aX0pfX0pLFouX2V2YWxVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIFouYWpheCh7dXJsOmUsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0Iixhc3luYzohMSxnbG9iYWw6ITEsInRocm93cyI6ITB9KX0sWi5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIFouaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24odCl7Wih0aGlzKS53cmFwQWxsKGUuY2FsbCh0aGlzLHQpKX0pOih0aGlzWzBdJiYodD1aKGUsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCksdGhpc1swXS5wYXJlbnROb2RlJiZ0Lmluc2VydEJlZm9yZSh0aGlzWzBdKSx0Lm1hcChmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzO2UuZmlyc3RFbGVtZW50Q2hpbGQ7KWU9ZS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gZX0pLmFwcGVuZCh0aGlzKSksdGhpcyl9LHdyYXBJbm5lcjpmdW5jdGlvbihlKXtyZXR1cm4gWi5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbih0KXtaKHRoaXMpLndyYXBJbm5lcihlLmNhbGwodGhpcyx0KSl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1aKHRoaXMpLG49dC5jb250ZW50cygpO24ubGVuZ3RoP24ud3JhcEFsbChlKTp0LmFwcGVuZChlKX0pfSx3cmFwOmZ1bmN0aW9uKGUpe3ZhciB0PVouaXNGdW5jdGlvbihlKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe1oodGhpcykud3JhcEFsbCh0P2UuY2FsbCh0aGlzLG4pOmUpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtaLm5vZGVOYW1lKHRoaXMsImJvZHkiKXx8Wih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSkuZW5kKCl9fSksWi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGUpe3JldHVybiBlLm9mZnNldFdpZHRoPD0wJiZlLm9mZnNldEhlaWdodDw9MH0sWi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4hWi5leHByLmZpbHRlcnMuaGlkZGVuKGUpfTt2YXIgeHQ9LyUyMC9nLHd0PS9cW1xdJC8sRXQ9L1xyP1xuL2csa3Q9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLEN0PS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtaLnBhcmFtPWZ1bmN0aW9uKGUsdCl7dmFyIG4saT1bXSxyPWZ1bmN0aW9uKGUsdCl7dD1aLmlzRnVuY3Rpb24odCk/dCgpOm51bGw9PXQ/IiI6dCxpW2kubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoZSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh0KX07aWYodm9pZCAwPT09dCYmKHQ9Wi5hamF4U2V0dGluZ3MmJlouYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKSxaLmlzQXJyYXkoZSl8fGUuanF1ZXJ5JiYhWi5pc1BsYWluT2JqZWN0KGUpKVouZWFjaChlLGZ1bmN0aW9uKCl7cih0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihuIGluIGUpcShuLGVbbl0sdCxyKTtyZXR1cm4gaS5qb2luKCImIikucmVwbGFjZSh4dCwiKyIpfSxaLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIFoucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT1aLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gZT9aLm1ha2VBcnJheShlKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFaKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmQ3QudGVzdCh0aGlzLm5vZGVOYW1lKSYmIWt0LnRlc3QoZSkmJih0aGlzLmNoZWNrZWR8fCF3ZS50ZXN0KGUpKX0pLm1hcChmdW5jdGlvbihlLHQpe3ZhciBuPVoodGhpcykudmFsKCk7cmV0dXJuIG51bGw9PW4/bnVsbDpaLmlzQXJyYXkobik/Wi5tYXAobixmdW5jdGlvbihlKXtyZXR1cm57bmFtZTp0Lm5hbWUsdmFsdWU6ZS5yZXBsYWNlKEV0LCJcclxuIil9fSk6e25hbWU6dC5uYW1lLHZhbHVlOm4ucmVwbGFjZShFdCwiXHJcbiIpfX0pLmdldCgpfX0pLFouYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fWNhdGNoKGUpe319O3ZhciBqdD0wLEF0PXt9LFB0PXswOjIwMCwxMjIzOjIwNH0sTHQ9Wi5hamF4U2V0dGluZ3MueGhyKCk7ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIEF0KUF0W2VdKCl9KSxKLmNvcnM9ISFMdCYmIndpdGhDcmVkZW50aWFscyJpbiBMdCxKLmFqYXg9THQ9ISFMdCxaLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIEouY29yc3x8THQmJiFlLmNyb3NzRG9tYWluP3tzZW5kOmZ1bmN0aW9uKG4saSl7dmFyIHIscz1lLnhocigpLG89KytqdDtpZihzLm9wZW4oZS50eXBlLGUudXJsLGUuYXN5bmMsZS51c2VybmFtZSxlLnBhc3N3b3JkKSxlLnhockZpZWxkcylmb3IociBpbiBlLnhockZpZWxkcylzW3JdPWUueGhyRmllbGRzW3JdO2UubWltZVR5cGUmJnMub3ZlcnJpZGVNaW1lVHlwZSYmcy5vdmVycmlkZU1pbWVUeXBlKGUubWltZVR5cGUpLGUuY3Jvc3NEb21haW58fG5bIlgtUmVxdWVzdGVkLVdpdGgiXXx8KG5bIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IociBpbiBuKXMuc2V0UmVxdWVzdEhlYWRlcihyLG5bcl0pO3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dCYmKGRlbGV0ZSBBdFtvXSx0PXMub25sb2FkPXMub25lcnJvcj1udWxsLCJhYm9ydCI9PT1lP3MuYWJvcnQoKToiZXJyb3IiPT09ZT9pKHMuc3RhdHVzLHMuc3RhdHVzVGV4dCk6aShQdFtzLnN0YXR1c118fHMuc3RhdHVzLHMuc3RhdHVzVGV4dCwic3RyaW5nIj09dHlwZW9mIHMucmVzcG9uc2VUZXh0P3t0ZXh0OnMucmVzcG9uc2VUZXh0fTp2b2lkIDAscy5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0scy5vbmxvYWQ9dCgpLHMub25lcnJvcj10KCJlcnJvciIpLHQ9QXRbb109dCgiYWJvcnQiKTt0cnl7cy5zZW5kKGUuaGFzQ29udGVudCYmZS5kYXRhfHxudWxsKX1jYXRjaChhKXtpZih0KXRocm93IGF9fSxhYm9ydDpmdW5jdGlvbigpe3QmJnQoKX19OnZvaWQgMH0pLFouYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovKD86amF2YXxlY21hKXNjcmlwdC99LGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oZSl7cmV0dXJuIFouZ2xvYmFsRXZhbChlKSxlfX19KSxaLmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24oZSl7dm9pZCAwPT09ZS5jYWNoZSYmKGUuY2FjaGU9ITEpLGUuY3Jvc3NEb21haW4mJihlLnR5cGU9IkdFVCIpfSksWi5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKGUpe2lmKGUuY3Jvc3NEb21haW4pe3ZhciB0LG47cmV0dXJue3NlbmQ6ZnVuY3Rpb24oaSxyKXt0PVooIjxzY3JpcHQ+IikucHJvcCh7YXN5bmM6ITAsY2hhcnNldDplLnNjcmlwdENoYXJzZXQsc3JjOmUudXJsfSkub24oImxvYWQgZXJyb3IiLG49ZnVuY3Rpb24oZSl7dC5yZW1vdmUoKSxuPW51bGwsZSYmcigiZXJyb3IiPT09ZS50eXBlPzQwNDoyMDAsZS50eXBlKX0pLEsuaGVhZC5hcHBlbmRDaGlsZCh0WzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtuJiZuKCl9fX19KTt2YXIgTnQ9W10sRHQ9Lyg9KVw/KD89JnwkKXxcP1w/LztaLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGU9TnQucG9wKCl8fFouZXhwYW5kbysiXyIrY3QrKztyZXR1cm4gdGhpc1tlXT0hMCxlfX0pLFouYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24odCxuLGkpe3ZhciByLHMsbyxhPXQuanNvbnAhPT0hMSYmKER0LnRlc3QodC51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgdC5kYXRhJiYhKHQuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmRHQudGVzdCh0LmRhdGEpJiYiZGF0YSIpO3JldHVybiBhfHwianNvbnAiPT09dC5kYXRhVHlwZXNbMF0/KHI9dC5qc29ucENhbGxiYWNrPVouaXNGdW5jdGlvbih0Lmpzb25wQ2FsbGJhY2spP3QuanNvbnBDYWxsYmFjaygpOnQuanNvbnBDYWxsYmFjayxhP3RbYV09dFthXS5yZXBsYWNlKER0LCIkMSIrcik6dC5qc29ucCE9PSExJiYodC51cmwrPSh1dC50ZXN0KHQudXJsKT8iJiI6Ij8iKSt0Lmpzb25wKyI9IityKSx0LmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gb3x8Wi5lcnJvcihyKyIgd2FzIG5vdCBjYWxsZWQiKSxvWzBdfSx0LmRhdGFUeXBlc1swXT0ianNvbiIscz1lW3JdLGVbcl09ZnVuY3Rpb24oKXtvPWFyZ3VtZW50c30saS5hbHdheXMoZnVuY3Rpb24oKXtlW3JdPXMsdFtyXSYmKHQuanNvbnBDYWxsYmFjaz1uLmpzb25wQ2FsbGJhY2ssTnQucHVzaChyKSksbyYmWi5pc0Z1bmN0aW9uKHMpJiZzKG9bMF0pLG89cz12b2lkIDB9KSwic2NyaXB0Iik6dm9pZCAwfSksWi5wYXJzZUhUTUw9ZnVuY3Rpb24oZSx0LG4pe2lmKCFlfHwic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgdCYmKG49dCx0PSExKSx0PXR8fEs7dmFyIGk9b2UuZXhlYyhlKSxyPSFuJiZbXTtyZXR1cm4gaT9bdC5jcmVhdGVFbGVtZW50KGlbMV0pXTooaT1aLmJ1aWxkRnJhZ21lbnQoW2VdLHQsciksciYmci5sZW5ndGgmJloocikucmVtb3ZlKCksWi5tZXJnZShbXSxpLmNoaWxkTm9kZXMpKX07dmFyIEh0PVouZm4ubG9hZDtaLmZuLmxvYWQ9ZnVuY3Rpb24oZSx0LG4pe2lmKCJzdHJpbmciIT10eXBlb2YgZSYmSHQpcmV0dXJuIEh0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgaSxyLHMsbz10aGlzLGE9ZS5pbmRleE9mKCIgIik7cmV0dXJuIGE+PTAmJihpPVoudHJpbShlLnNsaWNlKGEpKSxlPWUuc2xpY2UoMCxhKSksWi5pc0Z1bmN0aW9uKHQpPyhuPXQsdD12b2lkIDApOnQmJiJvYmplY3QiPT10eXBlb2YgdCYmKHI9IlBPU1QiKSxvLmxlbmd0aD4wJiZaLmFqYXgoe3VybDplLHR5cGU6cixkYXRhVHlwZToiaHRtbCIsZGF0YTp0fSkuZG9uZShmdW5jdGlvbihlKXtzPWFyZ3VtZW50cyxvLmh0bWwoaT9aKCI8ZGl2PiIpLmFwcGVuZChaLnBhcnNlSFRNTChlKSkuZmluZChpKTplKX0pLmNvbXBsZXRlKG4mJmZ1bmN0aW9uKGUsdCl7by5lYWNoKG4sc3x8W2UucmVzcG9uc2VUZXh0LHQsZV0pfSksdGhpc30sWi5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oZSx0KXtaLmZuW3RdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9uKHQsZSl9fSksWi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIFouZ3JlcChaLnRpbWVycyxmdW5jdGlvbih0KXtyZXR1cm4gZT09PXQuZWxlbX0pLmxlbmd0aH07dmFyIFJ0PWUuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1oub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIscyxvLGEsbCxjLHU9Wi5jc3MoZSwicG9zaXRpb24iKSxkPVooZSkscD17fTsic3RhdGljIj09PXUmJihlLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSIpLGE9ZC5vZmZzZXQoKSxzPVouY3NzKGUsInRvcCIpLGw9Wi5jc3MoZSwibGVmdCIpLGM9KCJhYnNvbHV0ZSI9PT11fHwiZml4ZWQiPT09dSkmJihzK2wpLmluZGV4T2YoImF1dG8iKT4tMSxjPyhpPWQucG9zaXRpb24oKSxvPWkudG9wLHI9aS5sZWZ0KToobz1wYXJzZUZsb2F0KHMpfHwwLHI9cGFyc2VGbG9hdChsKXx8MCksWi5pc0Z1bmN0aW9uKHQpJiYodD10LmNhbGwoZSxuLGEpKSxudWxsIT10LnRvcCYmKHAudG9wPXQudG9wLWEudG9wK28pLG51bGwhPXQubGVmdCYmKHAubGVmdD10LmxlZnQtYS5sZWZ0K3IpLCJ1c2luZyJpbiB0P3QudXNpbmcuY2FsbChlLHApOmQuY3NzKHApfX0sWi5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihlKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1lP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe1oub2Zmc2V0LnNldE9mZnNldCh0aGlzLGUsdCl9KTt2YXIgdCxuLGk9dGhpc1swXSxyPXt0b3A6MCxsZWZ0OjB9LHM9aSYmaS5vd25lckRvY3VtZW50O2lmKHMpcmV0dXJuIHQ9cy5kb2N1bWVudEVsZW1lbnQsWi5jb250YWlucyh0LGkpPyh0eXBlb2YgaS5nZXRCb3VuZGluZ0NsaWVudFJlY3QhPT1FZSYmKHI9aS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksbj1GKHMpLHt0b3A6ci50b3Arbi5wYWdlWU9mZnNldC10LmNsaWVudFRvcCxsZWZ0OnIubGVmdCtuLnBhZ2VYT2Zmc2V0LXQuY2xpZW50TGVmdH0pOnJ9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGUsdCxuPXRoaXNbMF0saT17dG9wOjAsbGVmdDowfTtyZXR1cm4iZml4ZWQiPT09Wi5jc3MobiwicG9zaXRpb24iKT90PW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGU9dGhpcy5vZmZzZXRQYXJlbnQoKSx0PXRoaXMub2Zmc2V0KCksWi5ub2RlTmFtZShlWzBdLCJodG1sIil8fChpPWUub2Zmc2V0KCkpLGkudG9wKz1aLmNzcyhlWzBdLCJib3JkZXJUb3BXaWR0aCIsITApLGkubGVmdCs9Wi5jc3MoZVswXSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpLHt0b3A6dC50b3AtaS50b3AtWi5jc3MobiwibWFyZ2luVG9wIiwhMCksbGVmdDp0LmxlZnQtaS5sZWZ0LVouY3NzKG4sIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5vZmZzZXRQYXJlbnR8fFJ0O2UmJiFaLm5vZGVOYW1lKGUsImh0bWwiKSYmInN0YXRpYyI9PT1aLmNzcyhlLCJwb3NpdGlvbiIpOyllPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxSdH0pfX0pLFouZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbih0LG4pe3ZhciBpPSJwYWdlWU9mZnNldCI9PT1uO1ouZm5bdF09ZnVuY3Rpb24ocil7cmV0dXJuIHZlKHRoaXMsZnVuY3Rpb24odCxyLHMpe3ZhciBvPUYodCk7cmV0dXJuIHZvaWQgMD09PXM/bz9vW25dOnRbcl06dm9pZChvP28uc2Nyb2xsVG8oaT9lLnBhZ2VYT2Zmc2V0OnMsaT9zOmUucGFnZVlPZmZzZXQpOnRbcl09cyl9LHQscixhcmd1bWVudHMubGVuZ3RoLG51bGwpfX0pLFouZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihlLHQpe1ouY3NzSG9va3NbdF09UyhKLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oZSxuKXtyZXR1cm4gbj8obj1UKGUsdCksVWUudGVzdChuKT9aKGUpLnBvc2l0aW9uKClbdF0rInB4IjpuKTp2b2lkIDB9KX0pLFouZWFjaCh7SGVpZ2h0OiJoZWlnaHQiLFdpZHRoOiJ3aWR0aCJ9LGZ1bmN0aW9uKGUsdCl7Wi5lYWNoKHtwYWRkaW5nOiJpbm5lciIrZSxjb250ZW50OnQsIiI6Im91dGVyIitlfSxmdW5jdGlvbihuLGkpe1ouZm5baV09ZnVuY3Rpb24oaSxyKXt2YXIgcz1hcmd1bWVudHMubGVuZ3RoJiYobnx8ImJvb2xlYW4iIT10eXBlb2YgaSksbz1ufHwoaT09PSEwfHxyPT09ITA/Im1hcmdpbiI6ImJvcmRlciIpO3JldHVybiB2ZSh0aGlzLGZ1bmN0aW9uKHQsbixpKXt2YXIgcjtyZXR1cm4gWi5pc1dpbmRvdyh0KT90LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IitlXTo5PT09dC5ub2RlVHlwZT8ocj10LmRvY3VtZW50RWxlbWVudCxNYXRoLm1heCh0LmJvZHlbInNjcm9sbCIrZV0sclsic2Nyb2xsIitlXSx0LmJvZHlbIm9mZnNldCIrZV0sclsib2Zmc2V0IitlXSxyWyJjbGllbnQiK2VdKSk6dm9pZCAwPT09aT9aLmNzcyh0LG4sbyk6Wi5zdHlsZSh0LG4saSxvKX0sdCxzP2k6dm9pZCAwLHMsbnVsbCl9fSl9KSxaLmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LFouZm4uYW5kU2VsZj1aLmZuLmFkZEJhY2ssImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIFp9KTt2YXIgTXQ9ZS5qUXVlcnksJHQ9ZS4kO3JldHVybiBaLm5vQ29uZmxpY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGUuJD09PVomJihlLiQ9JHQpLHQmJmUualF1ZXJ5PT09WiYmKGUualF1ZXJ5PU10KSxafSx0eXBlb2YgdD09PUVlJiYoZS5qUXVlcnk9ZS4kPVopLFp9KSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGZ1bmN0aW9uKCl7dmFyIGU9Y3JlYXRlanMuU291bmRKUz1jcmVhdGVqcy5Tb3VuZEpTfHx7fTtlLnZlcnNpb249IjAuNi4wIixlLmJ1aWxkRGF0ZT0iVGh1LCAxMSBEZWMgMjAxNCAyMzozMjowOSBHTVQifSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sY3JlYXRlanMuZXh0ZW5kPWZ1bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9cmV0dXJuIG4ucHJvdG90eXBlPXQucHJvdG90eXBlLGUucHJvdG90eXBlPW5ldyBufSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGNyZWF0ZWpzLnByb21vdGU9ZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7dmFyIG49ZS5wcm90b3R5cGUsaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YmJk9iamVjdC5nZXRQcm90b3R5cGVPZihuKXx8bi5fX3Byb3RvX187aWYoaSl7blsodCs9Il8iKSsiY29uc3RydWN0b3IiXT1pLmNvbnN0cnVjdG9yO2Zvcih2YXIgciBpbiBpKW4uaGFzT3duUHJvcGVydHkocikmJiJmdW5jdGlvbiI9PXR5cGVvZiBpW3JdJiYoblt0K3JdPWlbcl0pfXJldHVybiBlfSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGNyZWF0ZWpzLmluZGV4T2Y9ZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7Zm9yKHZhciBuPTAsaT1lLmxlbmd0aDtpPm47bisrKWlmKHQ9PT1lW25dKXJldHVybiBuO3JldHVybi0xfSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LApmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtjcmVhdGVqcy5wcm94eT1mdW5jdGlvbihlLHQpe3ZhciBuPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKS5jb25jYXQobikpfX19KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QuZGVmaW5lUHJvcGVydHk/ITA6ITEsdD17fTt0cnl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsImJhciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXJ9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9iYXI9ZX19KX1jYXRjaChuKXtlPSExfWNyZWF0ZWpzLmRlZmluZVByb3BlcnR5U3VwcG9ydGVkPWV9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKCl7dGhyb3ciQnJvd3NlckRldGVjdCBjYW5ub3QgYmUgaW5zdGFudGlhdGVkIn12YXIgdD1lLmFnZW50PXdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O2UuaXNXaW5kb3dQaG9uZT10LmluZGV4T2YoIklFTW9iaWxlIik+LTF8fHQuaW5kZXhPZigiV2luZG93cyBQaG9uZSIpPi0xLGUuaXNGaXJlZm94PXQuaW5kZXhPZigiRmlyZWZveCIpPi0xLGUuaXNPcGVyYT1udWxsIT13aW5kb3cub3BlcmEsZS5pc0Nocm9tZT10LmluZGV4T2YoIkNocm9tZSIpPi0xLGUuaXNJT1M9KHQuaW5kZXhPZigiaVBvZCIpPi0xfHx0LmluZGV4T2YoImlQaG9uZSIpPi0xfHx0LmluZGV4T2YoImlQYWQiKT4tMSkmJiFlLmlzV2luZG93UGhvbmUsZS5pc0FuZHJvaWQ9dC5pbmRleE9mKCJBbmRyb2lkIik+LTEmJiFlLmlzV2luZG93UGhvbmUsZS5pc0JsYWNrYmVycnk9dC5pbmRleE9mKCJCbGFja2JlcnJ5Iik+LTEsY3JlYXRlanMuQnJvd3NlckRldGVjdD1lfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSgpe3RoaXMuX2xpc3RlbmVycz1udWxsLHRoaXMuX2NhcHR1cmVMaXN0ZW5lcnM9bnVsbH12YXIgdD1lLnByb3RvdHlwZTtlLmluaXRpYWxpemU9ZnVuY3Rpb24oZSl7ZS5hZGRFdmVudExpc3RlbmVyPXQuYWRkRXZlbnRMaXN0ZW5lcixlLm9uPXQub24sZS5yZW1vdmVFdmVudExpc3RlbmVyPWUub2ZmPXQucmVtb3ZlRXZlbnRMaXN0ZW5lcixlLnJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzPXQucmVtb3ZlQWxsRXZlbnRMaXN0ZW5lcnMsZS5oYXNFdmVudExpc3RlbmVyPXQuaGFzRXZlbnRMaXN0ZW5lcixlLmRpc3BhdGNoRXZlbnQ9dC5kaXNwYXRjaEV2ZW50LGUuX2Rpc3BhdGNoRXZlbnQ9dC5fZGlzcGF0Y2hFdmVudCxlLndpbGxUcmlnZ2VyPXQud2lsbFRyaWdnZXJ9LHQuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihlLHQsbil7dmFyIGk7aT1uP3RoaXMuX2NhcHR1cmVMaXN0ZW5lcnM9dGhpcy5fY2FwdHVyZUxpc3RlbmVyc3x8e306dGhpcy5fbGlzdGVuZXJzPXRoaXMuX2xpc3RlbmVyc3x8e307dmFyIHI9aVtlXTtyZXR1cm4gciYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGUsdCxuKSxyPWlbZV0scj9yLnB1c2godCk6aVtlXT1bdF0sdH0sdC5vbj1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIHQuaGFuZGxlRXZlbnQmJihuPW58fHQsdD10LmhhbmRsZUV2ZW50KSxuPW58fHRoaXMsdGhpcy5hZGRFdmVudExpc3RlbmVyKGUsZnVuY3Rpb24oZSl7dC5jYWxsKG4sZSxyKSxpJiZlLnJlbW92ZSgpfSxzKX0sdC5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uP3RoaXMuX2NhcHR1cmVMaXN0ZW5lcnM6dGhpcy5fbGlzdGVuZXJzO2lmKGkpe3ZhciByPWlbZV07aWYocilmb3IodmFyIHM9MCxvPXIubGVuZ3RoO28+cztzKyspaWYocltzXT09dCl7MT09bz9kZWxldGUgaVtlXTpyLnNwbGljZShzLDEpO2JyZWFrfX19LHQub2ZmPXQucmVtb3ZlRXZlbnRMaXN0ZW5lcix0LnJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe2U/KHRoaXMuX2xpc3RlbmVycyYmZGVsZXRlIHRoaXMuX2xpc3RlbmVyc1tlXSx0aGlzLl9jYXB0dXJlTGlzdGVuZXJzJiZkZWxldGUgdGhpcy5fY2FwdHVyZUxpc3RlbmVyc1tlXSk6dGhpcy5fbGlzdGVuZXJzPXRoaXMuX2NhcHR1cmVMaXN0ZW5lcnM9bnVsbH0sdC5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSl7dmFyIHQ9dGhpcy5fbGlzdGVuZXJzO2lmKCF0fHwhdFtlXSlyZXR1cm4hMTtlPW5ldyBjcmVhdGVqcy5FdmVudChlKX1lbHNlIGUudGFyZ2V0JiZlLmNsb25lJiYoZT1lLmNsb25lKCkpO3RyeXtlLnRhcmdldD10aGlzfWNhdGNoKG4pe31pZihlLmJ1YmJsZXMmJnRoaXMucGFyZW50KXtmb3IodmFyIGk9dGhpcyxyPVtpXTtpLnBhcmVudDspci5wdXNoKGk9aS5wYXJlbnQpO3ZhciBzLG89ci5sZW5ndGg7Zm9yKHM9by0xO3M+PTAmJiFlLnByb3BhZ2F0aW9uU3RvcHBlZDtzLS0pcltzXS5fZGlzcGF0Y2hFdmVudChlLDErKDA9PXMpKTtmb3Iocz0xO28+cyYmIWUucHJvcGFnYXRpb25TdG9wcGVkO3MrKylyW3NdLl9kaXNwYXRjaEV2ZW50KGUsMyl9ZWxzZSB0aGlzLl9kaXNwYXRjaEV2ZW50KGUsMik7cmV0dXJuIGUuZGVmYXVsdFByZXZlbnRlZH0sdC5oYXNFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2xpc3RlbmVycyxuPXRoaXMuX2NhcHR1cmVMaXN0ZW5lcnM7cmV0dXJuISEodCYmdFtlXXx8biYmbltlXSl9LHQud2lsbFRyaWdnZXI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXM7dDspe2lmKHQuaGFzRXZlbnRMaXN0ZW5lcihlKSlyZXR1cm4hMDt0PXQucGFyZW50fXJldHVybiExfSx0LnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltFdmVudERpc3BhdGNoZXJdIn0sdC5fZGlzcGF0Y2hFdmVudD1mdW5jdGlvbihlLHQpe3ZhciBuLGk9MT09dD90aGlzLl9jYXB0dXJlTGlzdGVuZXJzOnRoaXMuX2xpc3RlbmVycztpZihlJiZpKXt2YXIgcj1pW2UudHlwZV07aWYoIXJ8fCEobj1yLmxlbmd0aCkpcmV0dXJuO3RyeXtlLmN1cnJlbnRUYXJnZXQ9dGhpc31jYXRjaChzKXt9dHJ5e2UuZXZlbnRQaGFzZT10fWNhdGNoKHMpe31lLnJlbW92ZWQ9ITEscj1yLnNsaWNlKCk7Zm9yKHZhciBvPTA7bj5vJiYhZS5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ7bysrKXt2YXIgYT1yW29dO2EuaGFuZGxlRXZlbnQ/YS5oYW5kbGVFdmVudChlKTphKGUpLGUucmVtb3ZlZCYmKHRoaXMub2ZmKGUudHlwZSxhLDE9PXQpLGUucmVtb3ZlZD0hMSl9fX0sY3JlYXRlanMuRXZlbnREaXNwYXRjaGVyPWV9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLnR5cGU9ZSx0aGlzLnRhcmdldD1udWxsLHRoaXMuY3VycmVudFRhcmdldD1udWxsLHRoaXMuZXZlbnRQaGFzZT0wLHRoaXMuYnViYmxlcz0hIXQsdGhpcy5jYW5jZWxhYmxlPSEhbix0aGlzLnRpbWVTdGFtcD0obmV3IERhdGUpLmdldFRpbWUoKSx0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITEsdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQ9ITEsdGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9ITEsdGhpcy5yZW1vdmVkPSExfXZhciB0PWUucHJvdG90eXBlO3QucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9dGhpcy5jYW5jZWxhYmxlJiYhMH0sdC5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZD0hMH0sdC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt0aGlzLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD10aGlzLnByb3BhZ2F0aW9uU3RvcHBlZD0hMH0sdC5yZW1vdmU9ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZWQ9ITB9LHQuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcy50eXBlLHRoaXMuYnViYmxlcyx0aGlzLmNhbmNlbGFibGUpfSx0LnNldD1mdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzW3RdPWVbdF07cmV0dXJuIHRoaXN9LHQudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW0V2ZW50ICh0eXBlPSIrdGhpcy50eXBlKyIpXSJ9LGNyZWF0ZWpzLkV2ZW50PWV9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLkV2ZW50X2NvbnN0cnVjdG9yKCJlcnJvciIpLHRoaXMudGl0bGU9ZSx0aGlzLm1lc3NhZ2U9dCx0aGlzLmRhdGE9bn12YXIgdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5FdmVudCk7dC5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgY3JlYXRlanMuRXJyb3JFdmVudCh0aGlzLnRpdGxlLHRoaXMubWVzc2FnZSx0aGlzLmRhdGEpfSxjcmVhdGVqcy5FcnJvckV2ZW50PWNyZWF0ZWpzLnByb21vdGUoZSwiRXZlbnQiKX0oKSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoZSx0KXt0aGlzLkV2ZW50X2NvbnN0cnVjdG9yKCJwcm9ncmVzcyIpLHRoaXMubG9hZGVkPWUsdGhpcy50b3RhbD1udWxsPT10PzE6dCx0aGlzLnByb2dyZXNzPTA9PXQ/MDp0aGlzLmxvYWRlZC90aGlzLnRvdGFsfXZhciB0PWNyZWF0ZWpzLmV4dGVuZChlLGNyZWF0ZWpzLkV2ZW50KTt0LmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBjcmVhdGVqcy5Qcm9ncmVzc0V2ZW50KHRoaXMubG9hZGVkLHRoaXMudG90YWwpfSxjcmVhdGVqcy5Qcm9ncmVzc0V2ZW50PWNyZWF0ZWpzLnByb21vdGUoZSwiRXZlbnQiKX0od2luZG93KSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoKXt0aGlzLnNyYz1udWxsLHRoaXMudHlwZT1udWxsLHRoaXMuaWQ9bnVsbCx0aGlzLm1haW50YWluT3JkZXI9ITEsdGhpcy5jYWxsYmFjaz1udWxsLHRoaXMuZGF0YT1udWxsLHRoaXMubWV0aG9kPWNyZWF0ZWpzLkxvYWRJdGVtLkdFVCx0aGlzLnZhbHVlcz1udWxsLHRoaXMuaGVhZGVycz1udWxsLHRoaXMud2l0aENyZWRlbnRpYWxzPSExLHRoaXMubWltZVR5cGU9bnVsbCx0aGlzLmNyb3NzT3JpZ2luPSJBbm9ueW1vdXMiLHRoaXMubG9hZFRpbWVvdXQ9OGUzfXZhciB0PWUucHJvdG90eXBlPXt9LG49ZTtuLmNyZWF0ZT1mdW5jdGlvbih0KXtpZigic3RyaW5nIj09dHlwZW9mIHQpe3ZhciBpPW5ldyBlO3JldHVybiBpLnNyYz10LGl9aWYodCBpbnN0YW5jZW9mIG4pcmV0dXJuIHQ7aWYodCBpbnN0YW5jZW9mIE9iamVjdClyZXR1cm4gdDt0aHJvdyBuZXcgRXJyb3IoIlR5cGUgbm90IHJlY29nbml6ZWQuIil9LHQuc2V0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXRoaXNbdF09ZVt0XTtyZXR1cm4gdGhpc30sY3JlYXRlanMuTG9hZEl0ZW09bn0oKSxmdW5jdGlvbigpe3ZhciBlPXt9O2UuQUJTT0xVVEVfUEFUVD0vXig/Olx3KzopP1wvezJ9L2ksZS5SRUxBVElWRV9QQVRUPS9eWy5cL10qP1wvL2ksZS5FWFRFTlNJT05fUEFUVD0vXC8/W15cL10rXC4oXHd7MSw1fSkkL2ksZS5wYXJzZVVSST1mdW5jdGlvbih0KXt2YXIgbj17YWJzb2x1dGU6ITEscmVsYXRpdmU6ITF9O2lmKG51bGw9PXQpcmV0dXJuIG47dmFyIGk9dC5pbmRleE9mKCI/Iik7aT4tMSYmKHQ9dC5zdWJzdHIoMCxpKSk7dmFyIHI7cmV0dXJuIGUuQUJTT0xVVEVfUEFUVC50ZXN0KHQpP24uYWJzb2x1dGU9ITA6ZS5SRUxBVElWRV9QQVRULnRlc3QodCkmJihuLnJlbGF0aXZlPSEwKSwocj10Lm1hdGNoKGUuRVhURU5TSU9OX1BBVFQpKSYmKG4uZXh0ZW5zaW9uPXJbMV0udG9Mb3dlckNhc2UoKSksbn0sZS5mb3JtYXRRdWVyeVN0cmluZz1mdW5jdGlvbihlLHQpe2lmKG51bGw9PWUpdGhyb3cgbmV3IEVycm9yKCJZb3UgbXVzdCBzcGVjaWZ5IGRhdGEuIik7dmFyIG49W107Zm9yKHZhciBpIGluIGUpbi5wdXNoKGkrIj0iK2VzY2FwZShlW2ldKSk7cmV0dXJuIHQmJihuPW4uY29uY2F0KHQpKSxuLmpvaW4oIiYiKX0sZS5idWlsZFBhdGg9ZnVuY3Rpb24oZSx0KXtpZihudWxsPT10KXJldHVybiBlO3ZhciBuPVtdLGk9ZS5pbmRleE9mKCI/Iik7aWYoLTEhPWkpe3ZhciByPWUuc2xpY2UoaSsxKTtuPW4uY29uY2F0KHIuc3BsaXQoIiYiKSl9cmV0dXJuLTEhPWk/ZS5zbGljZSgwLGkpKyI/Iit0aGlzLl9mb3JtYXRRdWVyeVN0cmluZyh0LG4pOmUrIj8iK3RoaXMuX2Zvcm1hdFF1ZXJ5U3RyaW5nKHQsbil9LGUuaXNDcm9zc0RvbWFpbj1mdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7dC5ocmVmPWUuc3JjO3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTtuLmhyZWY9bG9jYXRpb24uaHJlZjt2YXIgaT0iIiE9dC5ob3N0bmFtZSYmKHQucG9ydCE9bi5wb3J0fHx0LnByb3RvY29sIT1uLnByb3RvY29sfHx0Lmhvc3RuYW1lIT1uLmhvc3RuYW1lKTtyZXR1cm4gaX0sZS5pc0xvY2FsPWZ1bmN0aW9uKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTtyZXR1cm4gdC5ocmVmPWUuc3JjLCIiPT10Lmhvc3RuYW1lJiYiZmlsZToiPT10LnByb3RvY29sfSxlLmlzQmluYXJ5PWZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLklNQUdFOmNhc2UgY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuQklOQVJZOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fSxlLmlzSW1hZ2VUYWc9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50fSxlLmlzQXVkaW9UYWc9ZnVuY3Rpb24oZSl7cmV0dXJuIHdpbmRvdy5IVE1MQXVkaW9FbGVtZW50P2UgaW5zdGFuY2VvZiBIVE1MQXVkaW9FbGVtZW50OiExfSxlLmlzVmlkZW9UYWc9ZnVuY3Rpb24oZSl7cmV0dXJuIHdpbmRvdy5IVE1MVmlkZW9FbGVtZW50P2UgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50OnZvaWQgMH0sZS5pc1RleHQ9ZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2UgY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuVEVYVDpjYXNlIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkpTT046Y2FzZSBjcmVhdGVqcy5BYnN0cmFjdExvYWRlci5NQU5JRkVTVDpjYXNlIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLlhNTDpjYXNlIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkNTUzpjYXNlIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLlNWRzpjYXNlIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkpBVkFTQ1JJUFQ6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LGUuZ2V0VHlwZUJ5RXh0ZW5zaW9uPWZ1bmN0aW9uKGUpe2lmKG51bGw9PWUpcmV0dXJuIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLlRFWFQ7c3dpdGNoKGUudG9Mb3dlckNhc2UoKSl7Y2FzZSJqcGVnIjpjYXNlImpwZyI6Y2FzZSJnaWYiOmNhc2UicG5nIjpjYXNlIndlYnAiOmNhc2UiYm1wIjpyZXR1cm4gY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuSU1BR0U7Y2FzZSJvZ2ciOmNhc2UibXAzIjpjYXNlIndlYm0iOnJldHVybiBjcmVhdGVqcy5BYnN0cmFjdExvYWRlci5TT1VORDtjYXNlIm1wNCI6Y2FzZSJ3ZWJtIjpjYXNlInRzIjpyZXR1cm4gY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuVklERU87Y2FzZSJqc29uIjpyZXR1cm4gY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuSlNPTjtjYXNlInhtbCI6cmV0dXJuIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLlhNTDtjYXNlImNzcyI6cmV0dXJuIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkNTUztjYXNlImpzIjpyZXR1cm4gY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuSkFWQVNDUklQVDtjYXNlInN2ZyI6cmV0dXJuIGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLlNWRztkZWZhdWx0OnJldHVybiBjcmVhdGVqcy5BYnN0cmFjdExvYWRlci5URVhUfX0sY3JlYXRlanMuUmVxdWVzdFV0aWxzPWV9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLkV2ZW50RGlzcGF0Y2hlcl9jb25zdHJ1Y3RvcigpLHRoaXMubG9hZGVkPSExLHRoaXMuY2FuY2VsZWQ9ITEsdGhpcy5wcm9ncmVzcz0wLHRoaXMudHlwZT1uLHRoaXMucmVzdWx0Rm9ybWF0dGVyPW51bGwsdGhpcy5faXRlbT1lP2NyZWF0ZWpzLkxvYWRJdGVtLmNyZWF0ZShlKTpudWxsLHRoaXMuX3ByZWZlclhIUj10LHRoaXMuX3Jlc3VsdD1udWxsLHRoaXMuX3Jhd1Jlc3VsdD1udWxsLHRoaXMuX2xvYWRlZEl0ZW1zPW51bGwsdGhpcy5fdGFnU3JjQXR0cmlidXRlPW51bGwsdGhpcy5fdGFnPW51bGx9dmFyIHQ9Y3JlYXRlanMuZXh0ZW5kKGUsY3JlYXRlanMuRXZlbnREaXNwYXRjaGVyKSxuPWU7bi5QT1NUPSJQT1NUIixuLkdFVD0iR0VUIixuLkJJTkFSWT0iYmluYXJ5IixuLkNTUz0iY3NzIixuLklNQUdFPSJpbWFnZSIsbi5KQVZBU0NSSVBUPSJqYXZhc2NyaXB0IixuLkpTT049Impzb24iLG4uSlNPTlA9Impzb25wIixuLk1BTklGRVNUPSJtYW5pZmVzdCIsbi5TT1VORD0ic291bmQiLG4uVklERU89InZpZGVvIixuLlNQUklURVNIRUVUPSJzcHJpdGVzaGVldCIsbi5TVkc9InN2ZyIsbi5URVhUPSJ0ZXh0IixuLlhNTD0ieG1sIix0LmdldEl0ZW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXRlbX0sdC5nZXRSZXN1bHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5fcmF3UmVzdWx0OnRoaXMuX3Jlc3VsdH0sdC5nZXRUYWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFnfSx0LnNldFRhZz1mdW5jdGlvbihlKXt0aGlzLl90YWc9ZX0sdC5sb2FkPWZ1bmN0aW9uKCl7dGhpcy5fY3JlYXRlUmVxdWVzdCgpLHRoaXMuX3JlcXVlc3Qub24oImNvbXBsZXRlIix0aGlzLHRoaXMpLHRoaXMuX3JlcXVlc3Qub24oInByb2dyZXNzIix0aGlzLHRoaXMpLHRoaXMuX3JlcXVlc3Qub24oImxvYWRTdGFydCIsdGhpcyx0aGlzKSx0aGlzLl9yZXF1ZXN0Lm9uKCJhYm9ydCIsdGhpcyx0aGlzKSx0aGlzLl9yZXF1ZXN0Lm9uKCJ0aW1lb3V0Iix0aGlzLHRoaXMpLHRoaXMuX3JlcXVlc3Qub24oImVycm9yIix0aGlzLHRoaXMpO3ZhciBlPW5ldyBjcmVhdGVqcy5FdmVudCgiaW5pdGlhbGl6ZSIpO2UubG9hZGVyPXRoaXMuX3JlcXVlc3QsdGhpcy5kaXNwYXRjaEV2ZW50KGUpLHRoaXMuX3JlcXVlc3QubG9hZCgpfSx0LmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuY2FuY2VsZWQ9ITAsdGhpcy5kZXN0cm95KCl9LHQuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuX3JlcXVlc3QmJih0aGlzLl9yZXF1ZXN0LnJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzKCksdGhpcy5fcmVxdWVzdC5kZXN0cm95KCkpLHRoaXMuX3JlcXVlc3Q9bnVsbCx0aGlzLl9pdGVtPW51bGwsdGhpcy5fcmF3UmVzdWx0PW51bGwsdGhpcy5fcmVzdWx0PW51bGwsdGhpcy5fbG9hZEl0ZW1zPW51bGwsdGhpcy5yZW1vdmVBbGxFdmVudExpc3RlbmVycygpfSx0LmdldExvYWRlZEl0ZW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRlZEl0ZW1zfSx0Ll9jcmVhdGVSZXF1ZXN0PWZ1bmN0aW9uKCl7dGhpcy5fcmVxdWVzdD10aGlzLl9wcmVmZXJYSFI/bmV3IGNyZWF0ZWpzLlhIUlJlcXVlc3QodGhpcy5faXRlbSk6bmV3IGNyZWF0ZWpzLlRhZ1JlcXVlc3QodGhpcy5faXRlbSx0aGlzLl90YWd8fHRoaXMuX2NyZWF0ZVRhZygpLHRoaXMuX3RhZ1NyY0F0dHJpYnV0ZSl9LHQuX2NyZWF0ZVRhZz1mdW5jdGlvbigpe3JldHVybiBudWxsfSx0Ll9zZW5kTG9hZFN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5faXNDYW5jZWxlZCgpfHx0aGlzLmRpc3BhdGNoRXZlbnQoImxvYWRzdGFydCIpfSx0Ll9zZW5kUHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2lzQ2FuY2VsZWQoKSl7dmFyIHQ9bnVsbDsibnVtYmVyIj09dHlwZW9mIGU/KHRoaXMucHJvZ3Jlc3M9ZSx0PW5ldyBjcmVhdGVqcy5Qcm9ncmVzc0V2ZW50KHRoaXMucHJvZ3Jlc3MpKToodD1lLHRoaXMucHJvZ3Jlc3M9ZS5sb2FkZWQvZS50b3RhbCx0LnByb2dyZXNzPXRoaXMucHJvZ3Jlc3MsKGlzTmFOKHRoaXMucHJvZ3Jlc3MpfHwxLzA9PXRoaXMucHJvZ3Jlc3MpJiYodGhpcy5wcm9ncmVzcz0wKSksdGhpcy5oYXNFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIpJiZ0aGlzLmRpc3BhdGNoRXZlbnQodCl9fSx0Ll9zZW5kQ29tcGxldGU9ZnVuY3Rpb24oKXtpZighdGhpcy5faXNDYW5jZWxlZCgpKXt0aGlzLmxvYWRlZD0hMDt2YXIgZT1uZXcgY3JlYXRlanMuRXZlbnQoImNvbXBsZXRlIik7ZS5yYXdSZXN1bHQ9dGhpcy5fcmF3UmVzdWx0LG51bGwhPXRoaXMuX3Jlc3VsdCYmKGUucmVzdWx0PXRoaXMuX3Jlc3VsdCksdGhpcy5kaXNwYXRjaEV2ZW50KGUpfX0sdC5fc2VuZEVycm9yPWZ1bmN0aW9uKGUpeyF0aGlzLl9pc0NhbmNlbGVkKCkmJnRoaXMuaGFzRXZlbnRMaXN0ZW5lcigiZXJyb3IiKSYmKG51bGw9PWUmJihlPW5ldyBjcmVhdGVqcy5FcnJvckV2ZW50KCJQUkVMT0FEX0VSUk9SX0VNUFRZIikpLHRoaXMuZGlzcGF0Y2hFdmVudChlKSl9LHQuX2lzQ2FuY2VsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09d2luZG93LmNyZWF0ZWpzfHx0aGlzLmNhbmNlbGVkPyEwOiExfSx0LnJlc3VsdEZvcm1hdHRlcj1udWxsLHQuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24oZSl7c3dpdGNoKGUudHlwZSl7Y2FzZSJjb21wbGV0ZSI6dGhpcy5fcmF3UmVzdWx0PWUudGFyZ2V0Ll9yZXNwb25zZTt2YXIgdD10aGlzLnJlc3VsdEZvcm1hdHRlciYmdGhpcy5yZXN1bHRGb3JtYXR0ZXIodGhpcyksbj10aGlzO3QgaW5zdGFuY2VvZiBGdW5jdGlvbj90KGZ1bmN0aW9uKGUpe24uX3Jlc3VsdD1lLG4uX3NlbmRDb21wbGV0ZSgpfSk6KHRoaXMuX3Jlc3VsdD10fHx0aGlzLl9yYXdSZXN1bHQsdGhpcy5fc2VuZENvbXBsZXRlKCkpO2JyZWFrO2Nhc2UicHJvZ3Jlc3MiOnRoaXMuX3NlbmRQcm9ncmVzcyhlKTticmVhaztjYXNlImVycm9yIjp0aGlzLl9zZW5kRXJyb3IoZSk7YnJlYWs7Y2FzZSJsb2Fkc3RhcnQiOnRoaXMuX3NlbmRMb2FkU3RhcnQoKTticmVhaztjYXNlImFib3J0IjpjYXNlInRpbWVvdXQiOnRoaXMuX2lzQ2FuY2VsZWQoKXx8dGhpcy5kaXNwYXRjaEV2ZW50KGUudHlwZSl9fSx0LmJ1aWxkUGF0aD1mdW5jdGlvbihlLHQpe3JldHVybiBjcmVhdGVqcy5SZXF1ZXN0VXRpbHMuYnVpbGRQYXRoKGUsdCl9LHQudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW1ByZWxvYWRKUyBBYnN0cmFjdExvYWRlcl0ifSxjcmVhdGVqcy5BYnN0cmFjdExvYWRlcj1jcmVhdGVqcy5wcm9tb3RlKGUsIkV2ZW50RGlzcGF0Y2hlciIpfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlLHQsbil7dGhpcy5BYnN0cmFjdExvYWRlcl9jb25zdHJ1Y3RvcihlLHQsbiksdGhpcy5yZXN1bHRGb3JtYXR0ZXI9dGhpcy5fZm9ybWF0UmVzdWx0LHRoaXMuX3RhZ1NyY0F0dHJpYnV0ZT0ic3JjIn12YXIgdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5BYnN0cmFjdExvYWRlcik7dC5sb2FkPWZ1bmN0aW9uKCl7dGhpcy5fdGFnfHwodGhpcy5fdGFnPXRoaXMuX2NyZWF0ZVRhZyh0aGlzLl9pdGVtLnNyYykpLHRoaXMuX3RhZy5wcmVsb2FkPSJhdXRvIix0aGlzLl90YWcubG9hZCgpLHRoaXMuQWJzdHJhY3RMb2FkZXJfbG9hZCgpfSx0Ll9jcmVhdGVUYWc9ZnVuY3Rpb24oKXt9LHQuX2NyZWF0ZVJlcXVlc3Q9ZnVuY3Rpb24oKXt0aGlzLl9yZXF1ZXN0PXRoaXMuX3ByZWZlclhIUj9uZXcgY3JlYXRlanMuWEhSUmVxdWVzdCh0aGlzLl9pdGVtKTpuZXcgY3JlYXRlanMuTWVkaWFUYWdSZXF1ZXN0KHRoaXMuX2l0ZW0sdGhpcy5fdGFnfHx0aGlzLl9jcmVhdGVUYWcoKSx0aGlzLl90YWdTcmNBdHRyaWJ1dGUpfSx0Ll9mb3JtYXRSZXN1bHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3RhZy5yZW1vdmVFdmVudExpc3RlbmVyJiZ0aGlzLl90YWcucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2FucGxheXRocm91Z2giLHRoaXMuX2xvYWRlZEhhbmRsZXIpLHRoaXMuX3RhZy5vbnN0YWxsZWQ9bnVsbCx0aGlzLl9wcmVmZXJYSFImJihlLmdldFRhZygpLnNyYz1lLmdldFJlc3VsdCghMCkpLGUuZ2V0VGFnKCl9LGNyZWF0ZWpzLkFic3RyYWN0TWVkaWFMb2FkZXI9Y3JlYXRlanMucHJvbW90ZShlLCJBYnN0cmFjdExvYWRlciIpfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9ZnVuY3Rpb24oZSl7dGhpcy5faXRlbT1lfSx0PWNyZWF0ZWpzLmV4dGVuZChlLGNyZWF0ZWpzLkV2ZW50RGlzcGF0Y2hlcik7dC5sb2FkPWZ1bmN0aW9uKCl7fSx0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt9LHQuY2FuY2VsPWZ1bmN0aW9uKCl7fSxjcmVhdGVqcy5BYnN0cmFjdFJlcXVlc3Q9Y3JlYXRlanMucHJvbW90ZShlLCJFdmVudERpc3BhdGNoZXIiKX0oKSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoZSx0LG4pe3RoaXMuQWJzdHJhY3RSZXF1ZXN0X2NvbnN0cnVjdG9yKGUpLHRoaXMuX3RhZz10LHRoaXMuX3RhZ1NyY0F0dHJpYnV0ZT1uLHRoaXMuX2xvYWRlZEhhbmRsZXI9Y3JlYXRlanMucHJveHkodGhpcy5faGFuZGxlVGFnQ29tcGxldGUsdGhpcyksdGhpcy5fYWRkZWRUb0RPTT0hMSx0aGlzLl9zdGFydFRhZ1Zpc2liaWxpdHk9bnVsbH12YXIgdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5BYnN0cmFjdFJlcXVlc3QpO3QubG9hZD1mdW5jdGlvbigpe251bGw9PXRoaXMuX3RhZy5wYXJlbnROb2RlJiYod2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5fdGFnKSx0aGlzLl9hZGRlZFRvRE9NPSEwKSx0aGlzLl90YWcub25sb2FkPWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVRhZ0NvbXBsZXRlLHRoaXMpLHRoaXMuX3RhZy5vbnJlYWR5c3RhdGVjaGFuZ2U9Y3JlYXRlanMucHJveHkodGhpcy5faGFuZGxlUmVhZHlTdGF0ZUNoYW5nZSx0aGlzKTt2YXIgZT1uZXcgY3JlYXRlanMuRXZlbnQoImluaXRpYWxpemUiKTtlLmxvYWRlcj10aGlzLl90YWcsdGhpcy5kaXNwYXRjaEV2ZW50KGUpLHRoaXMuX2hpZGVUYWcoKSx0aGlzLl90YWdbdGhpcy5fdGFnU3JjQXR0cmlidXRlXT10aGlzLl9pdGVtLnNyY30sdC5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5fY2xlYW4oKSx0aGlzLl90YWc9bnVsbCx0aGlzLkFic3RyYWN0UmVxdWVzdF9kZXN0cm95KCl9LHQuX2hhbmRsZVJlYWR5U3RhdGVDaGFuZ2U9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fbG9hZFRpbWVvdXQpO3ZhciBlPXRoaXMuX3RhZzsoImxvYWRlZCI9PWUucmVhZHlTdGF0ZXx8ImNvbXBsZXRlIj09ZS5yZWFkeVN0YXRlKSYmdGhpcy5faGFuZGxlVGFnQ29tcGxldGUoKX0sdC5faGFuZGxlVGFnQ29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLl9yYXdSZXN1bHQ9dGhpcy5fdGFnLHRoaXMuX3Jlc3VsdD10aGlzLnJlc3VsdEZvcm1hdHRlciYmdGhpcy5yZXN1bHRGb3JtYXR0ZXIodGhpcyl8fHRoaXMuX3Jhd1Jlc3VsdCx0aGlzLl9jbGVhbigpLHRoaXMuX3Nob3dUYWcoKSx0aGlzLmRpc3BhdGNoRXZlbnQoImNvbXBsZXRlIil9LHQuX2NsZWFuPWZ1bmN0aW9uKCl7dGhpcy5fdGFnLm9ubG9hZD1udWxsLHRoaXMuX3RhZy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCx0aGlzLl9hZGRlZFRvRE9NJiZudWxsIT10aGlzLl90YWcucGFyZW50Tm9kZSYmdGhpcy5fdGFnLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5fdGFnKX0sdC5faGlkZVRhZz1mdW5jdGlvbigpe3RoaXMuX3N0YXJ0VGFnVmlzaWJpbGl0eT10aGlzLl90YWcuc3R5bGUudmlzaWJpbGl0eSx0aGlzLl90YWcuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIn0sdC5fc2hvd1RhZz1mdW5jdGlvbigpe3RoaXMuX3RhZy5zdHlsZS52aXNpYmlsaXR5PXRoaXMuX3N0YXJ0VGFnVmlzaWJpbGl0eX0sdC5faGFuZGxlU3RhbGxlZD1mdW5jdGlvbigpe30sY3JlYXRlanMuVGFnUmVxdWVzdD1jcmVhdGVqcy5wcm9tb3RlKGUsIkFic3RyYWN0UmVxdWVzdCIpfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlLHQsbil7dGhpcy5BYnN0cmFjdFJlcXVlc3RfY29uc3RydWN0b3IoZSksdGhpcy5fdGFnPXQsdGhpcy5fdGFnU3JjQXR0cmlidXRlPW4sdGhpcy5fbG9hZGVkSGFuZGxlcj1jcmVhdGVqcy5wcm94eSh0aGlzLl9oYW5kbGVUYWdDb21wbGV0ZSx0aGlzKX12YXIgdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5UYWdSZXF1ZXN0KTt0LmxvYWQ9ZnVuY3Rpb24oKXt0aGlzLl90YWcub25zdGFsbGVkPWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVN0YWxsZWQsdGhpcyksdGhpcy5fdGFnLm9ucHJvZ3Jlc3M9Y3JlYXRlanMucHJveHkodGhpcy5faGFuZGxlUHJvZ3Jlc3MsdGhpcyksdGhpcy5fdGFnLmFkZEV2ZW50TGlzdGVuZXImJnRoaXMuX3RhZy5hZGRFdmVudExpc3RlbmVyKCJjYW5wbGF5dGhyb3VnaCIsdGhpcy5fbG9hZGVkSGFuZGxlciwhMSksdGhpcy5UYWdSZXF1ZXN0X2xvYWQoKX0sdC5faGFuZGxlUmVhZHlTdGF0ZUNoYW5nZT1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl9sb2FkVGltZW91dCk7dmFyIGU9dGhpcy5fdGFnOygibG9hZGVkIj09ZS5yZWFkeVN0YXRlfHwiY29tcGxldGUiPT1lLnJlYWR5U3RhdGUpJiZ0aGlzLl9oYW5kbGVUYWdDb21wbGV0ZSgpfSx0Ll9oYW5kbGVTdGFsbGVkPWZ1bmN0aW9uKCl7fSx0Ll9oYW5kbGVQcm9ncmVzcz1mdW5jdGlvbihlKXtpZihlJiYhKGUubG9hZGVkPjAmJjA9PWUudG90YWwpKXt2YXIgdD1uZXcgY3JlYXRlanMuUHJvZ3Jlc3NFdmVudChlLmxvYWRlZCxlLnRvdGFsKTt0aGlzLmRpc3BhdGNoRXZlbnQodCl9fSx0Ll9jbGVhbj1mdW5jdGlvbigpe3RoaXMuX3RhZy5yZW1vdmVFdmVudExpc3RlbmVyJiZ0aGlzLl90YWcucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2FucGxheXRocm91Z2giLHRoaXMuX2xvYWRlZEhhbmRsZXIpLHRoaXMuX3RhZy5vbnN0YWxsZWQ9bnVsbCx0aGlzLl90YWcub25wcm9ncmVzcz1udWxsLHRoaXMuVGFnUmVxdWVzdF9fY2xlYW4oKX0sY3JlYXRlanMuTWVkaWFUYWdSZXF1ZXN0PWNyZWF0ZWpzLnByb21vdGUoZSwiVGFnUmVxdWVzdCIpfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlKXt0aGlzLkFic3RyYWN0UmVxdWVzdF9jb25zdHJ1Y3RvcihlKSx0aGlzLl9yZXF1ZXN0PW51bGwsdGhpcy5fbG9hZFRpbWVvdXQ9bnVsbCx0aGlzLl94aHJMZXZlbD0xLHRoaXMuX3Jlc3BvbnNlPW51bGwsdGhpcy5fcmF3UmVzcG9uc2U9bnVsbCx0aGlzLl9jYW5jZWxlZD0hMSx0aGlzLl9oYW5kbGVMb2FkU3RhcnRQcm94eT1jcmVhdGVqcy5wcm94eSh0aGlzLl9oYW5kbGVMb2FkU3RhcnQsdGhpcyksdGhpcy5faGFuZGxlUHJvZ3Jlc3NQcm94eT1jcmVhdGVqcy5wcm94eSh0aGlzLl9oYW5kbGVQcm9ncmVzcyx0aGlzKSx0aGlzLl9oYW5kbGVBYm9ydFByb3h5PWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZUFib3J0LHRoaXMpLHRoaXMuX2hhbmRsZUVycm9yUHJveHk9Y3JlYXRlanMucHJveHkodGhpcy5faGFuZGxlRXJyb3IsdGhpcyksdGhpcy5faGFuZGxlVGltZW91dFByb3h5PWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVRpbWVvdXQsdGhpcyksdGhpcy5faGFuZGxlTG9hZFByb3h5PWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZUxvYWQsdGhpcyksdGhpcy5faGFuZGxlUmVhZHlTdGF0ZUNoYW5nZVByb3h5PWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVJlYWR5U3RhdGVDaGFuZ2UsdGhpcyksIXRoaXMuX2NyZWF0ZVhIUihlKX12YXIgdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5BYnN0cmFjdFJlcXVlc3QpO2UuQUNUSVZFWF9WRVJTSU9OUz1bIk1zeG1sMi5YTUxIVFRQLjYuMCIsIk1zeG1sMi5YTUxIVFRQLjUuMCIsIk1zeG1sMi5YTUxIVFRQLjQuMCIsIk1TWE1MMi5YTUxIVFRQLjMuMCIsIk1TWE1MMi5YTUxIVFRQIiwiTWljcm9zb2Z0LlhNTEhUVFAiXSx0LmdldFJlc3VsdD1mdW5jdGlvbihlKXtyZXR1cm4gZSYmdGhpcy5fcmF3UmVzcG9uc2U/dGhpcy5fcmF3UmVzcG9uc2U6dGhpcy5fcmVzcG9uc2V9LHQuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxlZD0hMCx0aGlzLl9jbGVhbigpLHRoaXMuX3JlcXVlc3QuYWJvcnQoKX0sdC5sb2FkPWZ1bmN0aW9uKCl7aWYobnVsbD09dGhpcy5fcmVxdWVzdClyZXR1cm4gdm9pZCB0aGlzLl9oYW5kbGVFcnJvcigpO3RoaXMuX3JlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigibG9hZHN0YXJ0Iix0aGlzLl9oYW5kbGVMb2FkU3RhcnRQcm94eSwhMSksdGhpcy5fcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIsdGhpcy5faGFuZGxlUHJvZ3Jlc3NQcm94eSwhMSksdGhpcy5fcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsdGhpcy5faGFuZGxlQWJvcnRQcm94eSwhMSksdGhpcy5fcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsdGhpcy5faGFuZGxlRXJyb3JQcm94eSwhMSksdGhpcy5fcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCJ0aW1lb3V0Iix0aGlzLl9oYW5kbGVUaW1lb3V0UHJveHksITEpLHRoaXMuX3JlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsdGhpcy5faGFuZGxlTG9hZFByb3h5LCExKSx0aGlzLl9yZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLHRoaXMuX2hhbmRsZVJlYWR5U3RhdGVDaGFuZ2VQcm94eSwhMSksMT09dGhpcy5feGhyTGV2ZWwmJih0aGlzLl9sb2FkVGltZW91dD1zZXRUaW1lb3V0KGNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZVRpbWVvdXQsdGhpcyksdGhpcy5faXRlbS5sb2FkVGltZW91dCkpO3RyeXt0aGlzLl9pdGVtLnZhbHVlcyYmdGhpcy5faXRlbS5tZXRob2QhPWNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkdFVD90aGlzLl9pdGVtLm1ldGhvZD09Y3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuUE9TVCYmdGhpcy5fcmVxdWVzdC5zZW5kKGNyZWF0ZWpzLlJlcXVlc3RVdGlscy5mb3JtYXRRdWVyeVN0cmluZyh0aGlzLl9pdGVtLnZhbHVlcykpOnRoaXMuX3JlcXVlc3Quc2VuZCgpfWNhdGNoKGUpe3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgY3JlYXRlanMuRXJyb3JFdmVudCgiWEhSX1NFTkQiLG51bGwsZSkpfX0sdC5zZXRSZXNwb25zZVR5cGU9ZnVuY3Rpb24oZSl7dGhpcy5fcmVxdWVzdC5yZXNwb25zZVR5cGU9ZX0sdC5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMgaW5zdGFuY2VvZiBGdW5jdGlvbj90aGlzLl9yZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpOm51bGx9LHQuZ2V0UmVzcG9uc2VIZWFkZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3JlcXVlc3QuZ2V0UmVzcG9uc2VIZWFkZXIgaW5zdGFuY2VvZiBGdW5jdGlvbj90aGlzLl9yZXF1ZXN0LmdldFJlc3BvbnNlSGVhZGVyKGUpOm51bGx9LHQuX2hhbmRsZVByb2dyZXNzPWZ1bmN0aW9uKGUpe2lmKGUmJiEoZS5sb2FkZWQ+MCYmMD09ZS50b3RhbCkpe3ZhciB0PW5ldyBjcmVhdGVqcy5Qcm9ncmVzc0V2ZW50KGUubG9hZGVkLGUudG90YWwpO3RoaXMuZGlzcGF0Y2hFdmVudCh0KX19LHQuX2hhbmRsZUxvYWRTdGFydD1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl9sb2FkVGltZW91dCksdGhpcy5kaXNwYXRjaEV2ZW50KCJsb2Fkc3RhcnQiKX0sdC5faGFuZGxlQWJvcnQ9ZnVuY3Rpb24oZSl7dGhpcy5fY2xlYW4oKSx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IGNyZWF0ZWpzLkVycm9yRXZlbnQoIlhIUl9BQk9SVEVEIixudWxsLGUpKX0sdC5faGFuZGxlRXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5fY2xlYW4oKSx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IGNyZWF0ZWpzLkVycm9yRXZlbnQoZS5tZXNzYWdlKSl9LHQuX2hhbmRsZVJlYWR5U3RhdGVDaGFuZ2U9ZnVuY3Rpb24oKXs0PT10aGlzLl9yZXF1ZXN0LnJlYWR5U3RhdGUmJnRoaXMuX2hhbmRsZUxvYWQoKX0sdC5faGFuZGxlTG9hZD1mdW5jdGlvbigpe2lmKCF0aGlzLmxvYWRlZCl7dGhpcy5sb2FkZWQ9ITA7dmFyIGU9dGhpcy5fY2hlY2tFcnJvcigpO2lmKGUpcmV0dXJuIHZvaWQgdGhpcy5faGFuZGxlRXJyb3IoZSk7dGhpcy5fcmVzcG9uc2U9dGhpcy5fZ2V0UmVzcG9uc2UoKSx0aGlzLl9jbGVhbigpLHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgY3JlYXRlanMuRXZlbnQoImNvbXBsZXRlIikpfX0sdC5faGFuZGxlVGltZW91dD1mdW5jdGlvbihlKXt0aGlzLl9jbGVhbigpLHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgY3JlYXRlanMuRXJyb3JFdmVudCgiUFJFTE9BRF9USU1FT1VUIixudWxsLGUpKX0sdC5fY2hlY2tFcnJvcj1mdW5jdGlvbigpe3ZhciBlPXBhcnNlSW50KHRoaXMuX3JlcXVlc3Quc3RhdHVzKTtzd2l0Y2goZSl7Y2FzZSA0MDQ6Y2FzZSAwOnJldHVybiBuZXcgRXJyb3IoZSl9cmV0dXJuIG51bGx9LHQuX2dldFJlc3BvbnNlPWZ1bmN0aW9uKCl7aWYobnVsbCE9dGhpcy5fcmVzcG9uc2UpcmV0dXJuIHRoaXMuX3Jlc3BvbnNlO2lmKG51bGwhPXRoaXMuX3JlcXVlc3QucmVzcG9uc2UpcmV0dXJuIHRoaXMuX3JlcXVlc3QucmVzcG9uc2U7dHJ5e2lmKG51bGwhPXRoaXMuX3JlcXVlc3QucmVzcG9uc2VUZXh0KXJldHVybiB0aGlzLl9yZXF1ZXN0LnJlc3BvbnNlVGV4dH1jYXRjaChlKXt9dHJ5e2lmKG51bGwhPXRoaXMuX3JlcXVlc3QucmVzcG9uc2VYTUwpcmV0dXJuIHRoaXMuX3JlcXVlc3QucmVzcG9uc2VYTUx9Y2F0Y2goZSl7fXJldHVybiBudWxsfSx0Ll9jcmVhdGVYSFI9ZnVuY3Rpb24oZSl7dmFyIHQ9Y3JlYXRlanMuUmVxdWVzdFV0aWxzLmlzQ3Jvc3NEb21haW4oZSksbj17fSxpPW51bGw7aWYod2luZG93LlhNTEh0dHBSZXF1ZXN0KWk9bmV3IFhNTEh0dHBSZXF1ZXN0LHQmJnZvaWQgMD09PWkud2l0aENyZWRlbnRpYWxzJiZ3aW5kb3cuWERvbWFpblJlcXVlc3QmJihpPW5ldyBYRG9tYWluUmVxdWVzdCk7ZWxzZXtmb3IodmFyIHI9MCxvPXMuQUNUSVZFWF9WRVJTSU9OUy5sZW5ndGg7bz5yO3IrKyl7cy5BQ1RJVkVYX1ZFUlNJT05TW3JdO3RyeXtpPW5ldyBBY3RpdmVYT2JqZWN0KGF4VmVyc2lvbnMpO2JyZWFrfWNhdGNoKGEpe319aWYobnVsbD09aSlyZXR1cm4hMX1lLm1pbWVUeXBlJiZpLm92ZXJyaWRlTWltZVR5cGUmJmkub3ZlcnJpZGVNaW1lVHlwZShlLm1pbWVUeXBlKSx0aGlzLl94aHJMZXZlbD0ic3RyaW5nIj09dHlwZW9mIGkucmVzcG9uc2VUeXBlPzI6MTt2YXIgbD1udWxsO2lmKGw9ZS5tZXRob2Q9PWNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkdFVD9jcmVhdGVqcy5SZXF1ZXN0VXRpbHMuYnVpbGRQYXRoKGUuc3JjLGUudmFsdWVzKTplLnNyYyxpLm9wZW4oZS5tZXRob2R8fGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLkdFVCxsLCEwKSx0JiZpIGluc3RhbmNlb2YgWE1MSHR0cFJlcXVlc3QmJjE9PXRoaXMuX3hockxldmVsJiYobi5PcmlnaW49bG9jYXRpb24ub3JpZ2luKSxlLnZhbHVlcyYmZS5tZXRob2Q9PWNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyLlBPU1QmJihuWyJDb250ZW50LVR5cGUiXT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiksdHx8blsiWC1SZXF1ZXN0ZWQtV2l0aCJdfHwoblsiWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCIpLGUuaGVhZGVycylmb3IodmFyIGMgaW4gZS5oZWFkZXJzKW5bY109ZS5oZWFkZXJzW2NdO2ZvcihjIGluIG4paS5zZXRSZXF1ZXN0SGVhZGVyKGMsbltjXSk7cmV0dXJuIGkgaW5zdGFuY2VvZiBYTUxIdHRwUmVxdWVzdCYmdm9pZCAwIT09ZS53aXRoQ3JlZGVudGlhbHMmJihpLndpdGhDcmVkZW50aWFscz1lLndpdGhDcmVkZW50aWFscyksdGhpcy5fcmVxdWVzdD1pLCEwfSx0Ll9jbGVhbj1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl9sb2FkVGltZW91dCksdGhpcy5fcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2Fkc3RhcnQiLHRoaXMuX2hhbmRsZUxvYWRTdGFydFByb3h5KSx0aGlzLl9yZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoInByb2dyZXNzIix0aGlzLl9oYW5kbGVQcm9ncmVzc1Byb3h5KSx0aGlzLl9yZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoImFib3J0Iix0aGlzLl9oYW5kbGVBYm9ydFByb3h5KSx0aGlzLl9yZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoImVycm9yIix0aGlzLl9oYW5kbGVFcnJvclByb3h5KSx0aGlzLl9yZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoInRpbWVvdXQiLHRoaXMuX2hhbmRsZVRpbWVvdXRQcm94eSksdGhpcy5fcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIix0aGlzLl9oYW5kbGVMb2FkUHJveHkpLHRoaXMuX3JlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsdGhpcy5faGFuZGxlUmVhZHlTdGF0ZUNoYW5nZVByb3h5KX0sdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbUHJlbG9hZEpTIFhIUlJlcXVlc3RdIn0sY3JlYXRlanMuWEhSUmVxdWVzdD1jcmVhdGVqcy5wcm9tb3RlKGUsIkFic3RyYWN0UmVxdWVzdCIpfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlLHQpe3RoaXMuQWJzdHJhY3RNZWRpYUxvYWRlcl9jb25zdHJ1Y3RvcihlLHQsY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuU09VTkQpLGNyZWF0ZWpzLlJlcXVlc3RVdGlscy5pc0F1ZGlvVGFnKGUpP3RoaXMuX3RhZz1lOmNyZWF0ZWpzLlJlcXVlc3RVdGlscy5pc0F1ZGlvVGFnKGUuc3JjKT90aGlzLl90YWc9ZTpjcmVhdGVqcy5SZXF1ZXN0VXRpbHMuaXNBdWRpb1RhZyhlLnRhZykmJih0aGlzLl90YWc9Y3JlYXRlanMuUmVxdWVzdFV0aWxzLmlzQXVkaW9UYWcoZSk/ZTplLnNyYyksbnVsbCE9dGhpcy5fdGFnJiYodGhpcy5fcHJlZmVyWEhSPSExKX12YXIgdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5BYnN0cmFjdE1lZGlhTG9hZGVyKSxuPWU7bi5jYW5Mb2FkSXRlbT1mdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlPT1jcmVhdGVqcy5BYnN0cmFjdExvYWRlci5TT1VORH0sdC5fY3JlYXRlVGFnPWZ1bmN0aW9uKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIik7cmV0dXJuIHQuYXV0b3BsYXk9ITEsdC5wcmVsb2FkPSJub25lIix0LnNyYz1lLHR9LGNyZWF0ZWpzLlNvdW5kTG9hZGVyPWNyZWF0ZWpzLnByb21vdGUoZSwiQWJzdHJhY3RNZWRpYUxvYWRlciIpfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSgpe3Rocm93IlNvdW5kIGNhbm5vdCBiZSBpbnN0YW50aWF0ZWQifWZ1bmN0aW9uIHQoZSx0KXt0aGlzLmluaXQoZSx0KX12YXIgbj1lO24uSU5URVJSVVBUX0FOWT0iYW55IixuLklOVEVSUlVQVF9FQVJMWT0iZWFybHkiLG4uSU5URVJSVVBUX0xBVEU9ImxhdGUiLG4uSU5URVJSVVBUX05PTkU9Im5vbmUiLG4uUExBWV9JTklURUQ9InBsYXlJbml0ZWQiLG4uUExBWV9TVUNDRUVERUQ9InBsYXlTdWNjZWVkZWQiLG4uUExBWV9JTlRFUlJVUFRFRD0icGxheUludGVycnVwdGVkIixuLlBMQVlfRklOSVNIRUQ9InBsYXlGaW5pc2hlZCIsbi5QTEFZX0ZBSUxFRD0icGxheUZhaWxlZCIsbi5TVVBQT1JURURfRVhURU5TSU9OUz1bIm1wMyIsIm9nZyIsIm1wZWciLCJ3YXYiLCJtNGEiLCJtcDQiLCJhaWZmIiwid21hIiwibWlkIl0sbi5FWFRFTlNJT05fTUFQPXttNGE6Im1wNCJ9LG4uRklMRV9QQVRURVJOPS9eKD86KFx3KzopXC97Mn0oXHcrKD86XC5cdyspKlwvPykpPyhbXC8uXSo/KD86W14/XSspP1wvKT8oKD86W15cLz9dKylcLihcdyspKSg/Olw/KFxTKyk/KT8kLyxuLmRlZmF1bHRJbnRlcnJ1cHRCZWhhdmlvcj1uLklOVEVSUlVQVF9OT05FLG4uYWx0ZXJuYXRlRXh0ZW5zaW9ucz1bXSxuLmFjdGl2ZVBsdWdpbj1udWxsLG4uX3BsdWdpbnNSZWdpc3RlcmVkPSExLG4uX2xhc3RJRD0wLG4uX21hc3RlclZvbHVtZT0xLG4uX21hc3Rlck11dGU9ITEsbi5faW5zdGFuY2VzPVtdLG4uX2lkSGFzaD17fSxuLl9wcmVsb2FkSGFzaD17fSxuLmFkZEV2ZW50TGlzdGVuZXI9bnVsbCxuLnJlbW92ZUV2ZW50TGlzdGVuZXI9bnVsbCxuLnJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzPW51bGwsbi5kaXNwYXRjaEV2ZW50PW51bGwsbi5oYXNFdmVudExpc3RlbmVyPW51bGwsbi5fbGlzdGVuZXJzPW51bGwsY3JlYXRlanMuRXZlbnREaXNwYXRjaGVyLmluaXRpYWxpemUobiksbi5nZXRQcmVsb2FkSGFuZGxlcnM9ZnVuY3Rpb24oKXtyZXR1cm57Y2FsbGJhY2s6Y3JlYXRlanMucHJveHkobi5pbml0TG9hZCxuKSx0eXBlczpbInNvdW5kIl0sZXh0ZW5zaW9uczpuLlNVUFBPUlRFRF9FWFRFTlNJT05TfX0sbi5faGFuZGxlTG9hZENvbXBsZXRlPWZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0LmdldEl0ZW0oKS5zcmM7aWYobi5fcHJlbG9hZEhhc2hbdF0pZm9yKHZhciBpPTAscj1uLl9wcmVsb2FkSGFzaFt0XS5sZW5ndGg7cj5pO2krKyl7dmFyIHM9bi5fcHJlbG9hZEhhc2hbdF1baV07aWYobi5fcHJlbG9hZEhhc2hbdF1baV09ITAsbi5oYXNFdmVudExpc3RlbmVyKCJmaWxlbG9hZCIpKXt2YXIgZT1uZXcgY3JlYXRlanMuRXZlbnQoImZpbGVsb2FkIik7ZS5zcmM9cy5zcmMsZS5pZD1zLmlkLGUuZGF0YT1zLmRhdGEsZS5zcHJpdGU9cy5zcHJpdGUsbi5kaXNwYXRjaEV2ZW50KGUpfX19LG4uX2hhbmRsZUxvYWRFcnJvcj1mdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldC5nZXRJdGVtKCkuc3JjO2lmKG4uX3ByZWxvYWRIYXNoW3RdKWZvcih2YXIgaT0wLHI9bi5fcHJlbG9hZEhhc2hbdF0ubGVuZ3RoO3I+aTtpKyspe3ZhciBzPW4uX3ByZWxvYWRIYXNoW3RdW2ldO2lmKG4uX3ByZWxvYWRIYXNoW3RdW2ldPSExLG4uaGFzRXZlbnRMaXN0ZW5lcigiZmlsZWVycm9yIikpe3ZhciBlPW5ldyBjcmVhdGVqcy5FdmVudCgiZmlsZWVycm9yIik7ZS5zcmM9cy5zcmMsZS5pZD1zLmlkLGUuZGF0YT1zLmRhdGEsZS5zcHJpdGU9cy5zcHJpdGUsbi5kaXNwYXRjaEV2ZW50KGUpfX19LG4uX3JlZ2lzdGVyUGx1Z2luPWZ1bmN0aW9uKGUpe3JldHVybiBlLmlzU3VwcG9ydGVkKCk/KG4uYWN0aXZlUGx1Z2luPW5ldyBlLCEwKTohMX0sbi5yZWdpc3RlclBsdWdpbnM9ZnVuY3Rpb24oZSl7bi5fcGx1Z2luc1JlZ2lzdGVyZWQ9ITA7Zm9yKHZhciB0PTAsaT1lLmxlbmd0aDtpPnQ7dCsrKWlmKG4uX3JlZ2lzdGVyUGx1Z2luKGVbdF0pKXJldHVybiEwO3JldHVybiExfSxuLmluaXRpYWxpemVEZWZhdWx0UGx1Z2lucz1mdW5jdGlvbigpe3JldHVybiBudWxsIT1uLmFjdGl2ZVBsdWdpbj8hMDpuLl9wbHVnaW5zUmVnaXN0ZXJlZD8hMTpuLnJlZ2lzdGVyUGx1Z2lucyhbY3JlYXRlanMuV2ViQXVkaW9QbHVnaW4sY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luXSk/ITA6ITF9LG4uaXNSZWFkeT1mdW5jdGlvbigpe3JldHVybiBudWxsIT1uLmFjdGl2ZVBsdWdpbn0sbi5nZXRDYXBhYmlsaXRpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09bi5hY3RpdmVQbHVnaW4/bnVsbDpuLmFjdGl2ZVBsdWdpbi5fY2FwYWJpbGl0aWVzfSxuLmdldENhcGFiaWxpdHk9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PW4uYWN0aXZlUGx1Z2luP251bGw6bi5hY3RpdmVQbHVnaW4uX2NhcGFiaWxpdGllc1tlXX0sbi5pbml0TG9hZD1mdW5jdGlvbihlKXtyZXR1cm4gbi5fcmVnaXN0ZXJTb3VuZChlKX0sbi5fcmVnaXN0ZXJTb3VuZD1mdW5jdGlvbihlKXtpZighbi5pbml0aWFsaXplRGVmYXVsdFBsdWdpbnMoKSlyZXR1cm4hMTt2YXIgaT1uLl9wYXJzZVBhdGgoZS5zcmMpO2lmKG51bGw9PWkpcmV0dXJuITE7ZS5zcmM9aS5zcmMsZS50eXBlPSJzb3VuZCI7dmFyIHI9ZS5kYXRhLHM9bi5hY3RpdmVQbHVnaW4uZGVmYXVsdE51bUNoYW5uZWxzfHxudWxsO2lmKG51bGwhPXImJihpc05hTihyLmNoYW5uZWxzKT9pc05hTihyKXx8KHM9cGFyc2VJbnQocikpOnM9cGFyc2VJbnQoci5jaGFubmVscyksci5hdWRpb1Nwcml0ZSkpZm9yKHZhciBvLGE9ci5hdWRpb1Nwcml0ZS5sZW5ndGg7YS0tOylvPXIuYXVkaW9TcHJpdGVbYV0sbi5faWRIYXNoW28uaWRdPXtzcmM6ZS5zcmMsc3RhcnRUaW1lOnBhcnNlSW50KG8uc3RhcnRUaW1lKSxkdXJhdGlvbjpwYXJzZUludChvLmR1cmF0aW9uKX07bnVsbCE9ZS5pZCYmKG4uX2lkSGFzaFtlLmlkXT17c3JjOmUuc3JjfSk7dmFyIGw9bi5hY3RpdmVQbHVnaW4ucmVnaXN0ZXIoZSxzKTtyZXR1cm4gdC5jcmVhdGUoZS5zcmMscyksbnVsbCE9ciYmaXNOYU4ocik/ZS5kYXRhLmNoYW5uZWxzPXN8fHQubWF4UGVyQ2hhbm5lbCgpOmUuZGF0YT1zfHx0Lm1heFBlckNoYW5uZWwoKSxsLnR5cGUmJihlLnR5cGU9bC50eXBlKSxsfSxuLnJlZ2lzdGVyU291bmQ9ZnVuY3Rpb24oZSx0LGkscil7dmFyIHM9e3NyYzplLGlkOnQsZGF0YTppfTtlIGluc3RhbmNlb2YgT2JqZWN0JiYocj10LHM9ZSkscz1jcmVhdGVqcy5Mb2FkSXRlbS5jcmVhdGUocyksbnVsbCE9ciYmKHMuc3JjPXIrZSk7dmFyIG89bi5fcmVnaXN0ZXJTb3VuZChzKTtpZighbylyZXR1cm4hMTtpZihuLl9wcmVsb2FkSGFzaFtzLnNyY118fChuLl9wcmVsb2FkSGFzaFtzLnNyY109W10pLG4uX3ByZWxvYWRIYXNoW3Muc3JjXS5wdXNoKHMpLDE9PW4uX3ByZWxvYWRIYXNoW3Muc3JjXS5sZW5ndGgpby5vbigiY29tcGxldGUiLGNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZUxvYWRDb21wbGV0ZSx0aGlzKSksby5vbigiZXJyb3IiLGNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZUxvYWRFcnJvcix0aGlzKSksbi5hY3RpdmVQbHVnaW4ucHJlbG9hZChvKTtlbHNlIGlmKDE9PW4uX3ByZWxvYWRIYXNoW3Muc3JjXVswXSlyZXR1cm4hMDtyZXR1cm4gc30sbi5yZWdpc3RlclNvdW5kcz1mdW5jdGlvbihlLHQpe3ZhciBuPVtdO2UucGF0aCYmKHQ/dCs9ZS5wYXRoOnQ9ZS5wYXRoKTtmb3IodmFyIGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspbltpXT1jcmVhdGVqcy5Tb3VuZC5yZWdpc3RlclNvdW5kKGVbaV0uc3JjLGVbaV0uaWQsZVtpXS5kYXRhLHQpO3JldHVybiBufSxuLnJlZ2lzdGVyTWFuaWZlc3Q9ZnVuY3Rpb24oZSx0KXt0cnl7Y29uc29sZS5sb2coImNyZWF0ZWpzLlNvdW5kLnJlZ2lzdGVyTWFuaWZlc3QgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBjcmVhdGVqcy5Tb3VuZC5yZWdpc3RlclNvdW5kcy4iKX1jYXRjaChuKXt9cmV0dXJuIHRoaXMucmVnaXN0ZXJTb3VuZHMoZSx0KX0sbi5yZW1vdmVTb3VuZD1mdW5jdGlvbihlLGkpe2lmKG51bGw9PW4uYWN0aXZlUGx1Z2luKXJldHVybiExO2UgaW5zdGFuY2VvZiBPYmplY3QmJihlPWUuc3JjKSxlPW4uX2dldFNyY0J5SWQoZSkuc3JjLG51bGwhPWkmJihlPWkrZSk7dmFyIHI9bi5fcGFyc2VQYXRoKGUpO2lmKG51bGw9PXIpcmV0dXJuITE7ZT1yLnNyYztmb3IodmFyIHMgaW4gbi5faWRIYXNoKW4uX2lkSGFzaFtzXS5zcmM9PWUmJmRlbGV0ZSBuLl9pZEhhc2hbc107cmV0dXJuIHQucmVtb3ZlU3JjKGUpLGRlbGV0ZSBuLl9wcmVsb2FkSGFzaFtlXSxuLmFjdGl2ZVBsdWdpbi5yZW1vdmVTb3VuZChlKSwhMH0sbi5yZW1vdmVTb3VuZHM9ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXTtlLnBhdGgmJih0P3QrPWUucGF0aDp0PWUucGF0aCk7Zm9yKHZhciBpPTAscj1lLmxlbmd0aDtyPmk7aSsrKW5baV09Y3JlYXRlanMuU291bmQucmVtb3ZlU291bmQoZVtpXS5zcmMsdCk7cmV0dXJuIG59LG4ucmVtb3ZlTWFuaWZlc3Q9ZnVuY3Rpb24oZSx0KXt0cnl7Y29uc29sZS5sb2coImNyZWF0ZWpzLlNvdW5kLnJlbW92ZU1hbmlmZXN0IGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgY3JlYXRlanMuU291bmQucmVtb3ZlU291bmRzLiIpfWNhdGNoKGkpe31yZXR1cm4gbi5yZW1vdmVTb3VuZHMoZSx0KX0sbi5yZW1vdmVBbGxTb3VuZHM9ZnVuY3Rpb24oKXtuLl9pZEhhc2g9e30sbi5fcHJlbG9hZEhhc2g9e30sdC5yZW1vdmVBbGwoKSxuLmFjdGl2ZVBsdWdpbiYmbi5hY3RpdmVQbHVnaW4ucmVtb3ZlQWxsU291bmRzKCl9LG4ubG9hZENvbXBsZXRlPWZ1bmN0aW9uKGUpe2lmKCFuLmlzUmVhZHkoKSlyZXR1cm4hMTt2YXIgdD1uLl9wYXJzZVBhdGgoZSk7cmV0dXJuIGU9dD9uLl9nZXRTcmNCeUlkKHQuc3JjKS5zcmM6bi5fZ2V0U3JjQnlJZChlKS5zcmMsMT09bi5fcHJlbG9hZEhhc2hbZV1bMF19LG4uX3BhcnNlUGF0aD1mdW5jdGlvbihlKXsic3RyaW5nIiE9dHlwZW9mIGUmJihlPWUudG9TdHJpbmcoKSk7dmFyIHQ9ZS5tYXRjaChuLkZJTEVfUEFUVEVSTik7aWYobnVsbD09dClyZXR1cm4hMTtmb3IodmFyIGk9dFs0XSxyPXRbNV0scz1uLmdldENhcGFiaWxpdGllcygpLG89MDshc1tyXTspaWYocj1uLmFsdGVybmF0ZUV4dGVuc2lvbnNbbysrXSxvPm4uYWx0ZXJuYXRlRXh0ZW5zaW9ucy5sZW5ndGgpcmV0dXJuIG51bGw7ZT1lLnJlcGxhY2UoIi4iK3RbNV0sIi4iK3IpO3ZhciBhPXtuYW1lOmksc3JjOmUsZXh0ZW5zaW9uOnJ9O3JldHVybiBhfSxuLnBsYXk9ZnVuY3Rpb24oZSx0LGkscixzLG8sYSxsLGMpe3QgaW5zdGFuY2VvZiBPYmplY3QmJihpPXQuZGVsYXkscj10Lm9mZnNldCxzPXQubG9vcCxvPXQudm9sdW1lLGE9dC5wYW4sbD10LnN0YXJ0VGltZSxjPXQuZHVyYXRpb24sdD10LmludGVycnVwdCk7dmFyIHU9bi5jcmVhdGVJbnN0YW5jZShlLGwsYyksZD1uLl9wbGF5SW5zdGFuY2UodSx0LGkscixzLG8sYSk7cmV0dXJuIGR8fHUuX3BsYXlGYWlsZWQoKSx1fSxuLmNyZWF0ZUluc3RhbmNlPWZ1bmN0aW9uKGUsaSxyKXtpZighbi5pbml0aWFsaXplRGVmYXVsdFBsdWdpbnMoKSlyZXR1cm4gbmV3IGNyZWF0ZWpzLkRlZmF1bHRTb3VuZEluc3RhbmNlKGUsaSxyKTtlPW4uX2dldFNyY0J5SWQoZSk7dmFyIHM9bi5fcGFyc2VQYXRoKGUuc3JjKSxvPW51bGw7cmV0dXJuIG51bGwhPXMmJm51bGwhPXMuc3JjPyh0LmNyZWF0ZShzLnNyYyksbnVsbD09aSYmKGk9ZS5zdGFydFRpbWUpLG89bi5hY3RpdmVQbHVnaW4uY3JlYXRlKHMuc3JjLGkscnx8ZS5kdXJhdGlvbikpOm89bmV3IGNyZWF0ZWpzLkRlZmF1bHRTb3VuZEluc3RhbmNlKGUsaSxyKSxvLnVuaXF1ZUlkPW4uX2xhc3RJRCsrLG99LG4uc2V0Vm9sdW1lPWZ1bmN0aW9uKGUpe2lmKG51bGw9PU51bWJlcihlKSlyZXR1cm4hMTtpZihlPU1hdGgubWF4KDAsTWF0aC5taW4oMSxlKSksbi5fbWFzdGVyVm9sdW1lPWUsIXRoaXMuYWN0aXZlUGx1Z2lufHwhdGhpcy5hY3RpdmVQbHVnaW4uc2V0Vm9sdW1lfHwhdGhpcy5hY3RpdmVQbHVnaW4uc2V0Vm9sdW1lKGUpKWZvcih2YXIgdD10aGlzLl9pbnN0YW5jZXMsaT0wLHI9dC5sZW5ndGg7cj5pO2krKyl0W2ldLnNldE1hc3RlclZvbHVtZShlKX0sbi5nZXRWb2x1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gbi5fbWFzdGVyVm9sdW1lfSxuLnNldE11dGU9ZnVuY3Rpb24oZSl7aWYobnVsbD09ZSlyZXR1cm4hMTtpZih0aGlzLl9tYXN0ZXJNdXRlPWUsIXRoaXMuYWN0aXZlUGx1Z2lufHwhdGhpcy5hY3RpdmVQbHVnaW4uc2V0TXV0ZXx8IXRoaXMuYWN0aXZlUGx1Z2luLnNldE11dGUoZSkpZm9yKHZhciB0PXRoaXMuX2luc3RhbmNlcyxuPTAsaT10Lmxlbmd0aDtpPm47bisrKXRbbl0uc2V0TWFzdGVyTXV0ZShlKTtyZXR1cm4hMH0sbi5nZXRNdXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hc3Rlck11dGV9LG4uc3RvcD1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLl9pbnN0YW5jZXMsdD1lLmxlbmd0aDt0LS07KWVbdF0uc3RvcCgpfSxuLl9wbGF5SW5zdGFuY2U9ZnVuY3Rpb24oZSx0LGkscixzLG8sYSl7aWYodCBpbnN0YW5jZW9mIE9iamVjdCYmKGk9dC5kZWxheSxyPXQub2Zmc2V0LHM9dC5sb29wLG89dC52b2x1bWUsYT10LnBhbix0PXQuaW50ZXJydXB0KSx0PXR8fG4uZGVmYXVsdEludGVycnVwdEJlaGF2aW9yLG51bGw9PWkmJihpPTApLG51bGw9PXImJihyPWUuZ2V0UG9zaXRpb24oKSksbnVsbD09cyYmKHM9ZS5sb29wKSxudWxsPT1vJiYobz1lLnZvbHVtZSksbnVsbD09YSYmKGE9ZS5wYW4pLDA9PWkpe3ZhciBsPW4uX2JlZ2luUGxheWluZyhlLHQscixzLG8sYSk7aWYoIWwpcmV0dXJuITF9ZWxzZXt2YXIgYz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5fYmVnaW5QbGF5aW5nKGUsdCxyLHMsbyxhKX0saSk7ZS5kZWxheVRpbWVvdXRJZD1jfXJldHVybiB0aGlzLl9pbnN0YW5jZXMucHVzaChlKSwhMH0sbi5fYmVnaW5QbGF5aW5nPWZ1bmN0aW9uKGUsbixpLHIscyxvKXtpZighdC5hZGQoZSxuKSlyZXR1cm4hMTt2YXIgYT1lLl9iZWdpblBsYXlpbmcoaSxyLHMsbyk7aWYoIWEpe3ZhciBsPWNyZWF0ZWpzLmluZGV4T2YodGhpcy5faW5zdGFuY2VzLGUpO3JldHVybiBsPi0xJiZ0aGlzLl9pbnN0YW5jZXMuc3BsaWNlKGwsMSksITF9cmV0dXJuITB9LG4uX2dldFNyY0J5SWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uX2lkSGFzaFtlXXx8e3NyYzplfX0sbi5fcGxheUZpbmlzaGVkPWZ1bmN0aW9uKGUpe3QucmVtb3ZlKGUpO3ZhciBuPWNyZWF0ZWpzLmluZGV4T2YodGhpcy5faW5zdGFuY2VzLGUpO24+LTEmJnRoaXMuX2luc3RhbmNlcy5zcGxpY2UobiwxKX0sY3JlYXRlanMuU291bmQ9ZSx0LmNoYW5uZWxzPXt9LHQuY3JlYXRlPWZ1bmN0aW9uKGUsbil7dmFyIGk9dC5nZXQoZSk7cmV0dXJuIG51bGw9PWk/KHQuY2hhbm5lbHNbZV09bmV3IHQoZSxuKSwhMCk6ITF9LHQucmVtb3ZlU3JjPWZ1bmN0aW9uKGUpe3ZhciBuPXQuZ2V0KGUpO3JldHVybiBudWxsPT1uPyExOihuLl9yZW1vdmVBbGwoKSxkZWxldGUgdC5jaGFubmVsc1tlXSwhMCl9LHQucmVtb3ZlQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIHQuY2hhbm5lbHMpdC5jaGFubmVsc1tlXS5fcmVtb3ZlQWxsKCk7dC5jaGFubmVscz17fX0sdC5hZGQ9ZnVuY3Rpb24oZSxuKXt2YXIgaT10LmdldChlLnNyYyk7cmV0dXJuIG51bGw9PWk/ITE6aS5fYWRkKGUsbil9LHQucmVtb3ZlPWZ1bmN0aW9uKGUpe3ZhciBuPXQuZ2V0KGUuc3JjKTtyZXR1cm4gbnVsbD09bj8hMToobi5fcmVtb3ZlKGUpLCEwKX0sdC5tYXhQZXJDaGFubmVsPWZ1bmN0aW9uKCl7cmV0dXJuIGkubWF4RGVmYXVsdH0sdC5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuY2hhbm5lbHNbZV19O3ZhciBpPXQucHJvdG90eXBlO2kuY29uc3RydWN0b3I9dCxpLnNyYz1udWxsLGkubWF4PW51bGwsaS5tYXhEZWZhdWx0PTEwMCxpLmxlbmd0aD0wLGkuaW5pdD1mdW5jdGlvbihlLHQpe3RoaXMuc3JjPWUsdGhpcy5tYXg9dHx8dGhpcy5tYXhEZWZhdWx0LC0xPT10aGlzLm1heCYmKHRoaXMubWF4PXRoaXMubWF4RGVmYXVsdCksdGhpcy5faW5zdGFuY2VzPVtdfSxpLl9nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2luc3RhbmNlc1tlXX0saS5fYWRkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2dldFNsb3QodCxlKT8odGhpcy5faW5zdGFuY2VzLnB1c2goZSksdGhpcy5sZW5ndGgrKywhMCk6ITF9LGkuX3JlbW92ZT1mdW5jdGlvbihlKXt2YXIgdD1jcmVhdGVqcy5pbmRleE9mKHRoaXMuX2luc3RhbmNlcyxlKTtyZXR1cm4tMT09dD8hMToodGhpcy5faW5zdGFuY2VzLnNwbGljZSh0LDEpLHRoaXMubGVuZ3RoLS0sITApfSxpLl9yZW1vdmVBbGw9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5sZW5ndGgtMTtlPj0wO2UtLSl0aGlzLl9pbnN0YW5jZXNbZV0uc3RvcCgpfSxpLl9nZXRTbG90PWZ1bmN0aW9uKHQpe3ZhciBuLGk7aWYodCE9ZS5JTlRFUlJVUFRfTk9ORSYmKGk9dGhpcy5fZ2V0KDApLG51bGw9PWkpKXJldHVybiEwO2Zvcih2YXIgcj0wLHM9dGhpcy5tYXg7cz5yO3IrKyl7aWYobj10aGlzLl9nZXQociksbnVsbD09bilyZXR1cm4hMDtpZihuLnBsYXlTdGF0ZT09ZS5QTEFZX0ZJTklTSEVEfHxuLnBsYXlTdGF0ZT09ZS5QTEFZX0lOVEVSUlVQVEVEfHxuLnBsYXlTdGF0ZT09ZS5QTEFZX0ZBSUxFRCl7aT1uO2JyZWFrfXQhPWUuSU5URVJSVVBUX05PTkUmJih0PT1lLklOVEVSUlVQVF9FQVJMWSYmbi5nZXRQb3NpdGlvbigpPGkuZ2V0UG9zaXRpb24oKXx8dD09ZS5JTlRFUlJVUFRfTEFURSYmbi5nZXRQb3NpdGlvbigpPmkuZ2V0UG9zaXRpb24oKSkmJihpPW4pfXJldHVybiBudWxsIT1pPyhpLl9pbnRlcnJ1cHQoKSx0aGlzLl9yZW1vdmUoaSksITApOiExfSxpLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltTb3VuZCBTb3VuZENoYW5uZWxdIn19KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1mdW5jdGlvbihlLHQsbixpKXt0aGlzLkV2ZW50RGlzcGF0Y2hlcl9jb25zdHJ1Y3RvcigpLHRoaXMuc3JjPWUsdGhpcy51bmlxdWVJZD0tMSx0aGlzLnBsYXlTdGF0ZT1udWxsLHRoaXMuZGVsYXlUaW1lb3V0SWQ9bnVsbCx0aGlzLl9zdGFydFRpbWU9TWF0aC5tYXgoMCx0fHwwKSx0aGlzLl92b2x1bWU9MSxjcmVhdGVqcy5kZWZpbmVQcm9wZXJ0eVN1cHBvcnRlZCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInZvbHVtZSIse2dldDp0aGlzLmdldFZvbHVtZSxzZXQ6dGhpcy5zZXRWb2x1bWV9KSx0aGlzLl9wYW49MCxjcmVhdGVqcy5kZWZpbmVQcm9wZXJ0eVN1cHBvcnRlZCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInBhbiIse2dldDp0aGlzLmdldFBhbixzZXQ6dGhpcy5zZXRQYW59KSx0aGlzLl9kdXJhdGlvbj1NYXRoLm1heCgwLG58fDApLGNyZWF0ZWpzLmRlZmluZVByb3BlcnR5U3VwcG9ydGVkJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiZHVyYXRpb24iLHtnZXQ6dGhpcy5nZXREdXJhdGlvbixzZXQ6dGhpcy5zZXREdXJhdGlvbn0pLHRoaXMuX3BsYXliYWNrUmVzb3VyY2U9bnVsbCxjcmVhdGVqcy5kZWZpbmVQcm9wZXJ0eVN1cHBvcnRlZCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInBsYXliYWNrUmVzb3VyY2UiLHtnZXQ6dGhpcy5nZXRQbGF5YmFja1Jlc291cmNlLHNldDp0aGlzLnNldFBsYXliYWNrUmVzb3VyY2V9KSxpIT09ITEmJmkhPT0hMCYmdGhpcy5zZXRQbGF5YmFja1Jlc291cmNlKGkpLHRoaXMuX3Bvc2l0aW9uPTAsY3JlYXRlanMuZGVmaW5lUHJvcGVydHlTdXBwb3J0ZWQmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJwb3NpdGlvbiIse2dldDp0aGlzLmdldFBvc2l0aW9uLHNldDp0aGlzLnNldFBvc2l0aW9ufSksdGhpcy5fbG9vcD0wLGNyZWF0ZWpzLmRlZmluZVByb3BlcnR5U3VwcG9ydGVkJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywibG9vcCIse2dldDp0aGlzLmdldExvb3Asc2V0OnRoaXMuc2V0TG9vcH0pLHRoaXMuX211dGVkPSExLGNyZWF0ZWpzLmRlZmluZVByb3BlcnR5U3VwcG9ydGVkJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywibXV0ZWQiLHtnZXQ6dGhpcy5nZXRNdXRlZCxzZXQ6dGhpcy5zZXRNdXRlZH0pLHRoaXMuX3BhdXNlZD0hMSxjcmVhdGVqcy5kZWZpbmVQcm9wZXJ0eVN1cHBvcnRlZCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInBhdXNlZCIse2dldDp0aGlzLmdldFBhdXNlZCxzZXQ6dGhpcy5zZXRQYXVzZWR9KX0sdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5FdmVudERpc3BhdGNoZXIpO3QucGxheT1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIHRoaXMucGxheVN0YXRlPT1jcmVhdGVqcy5Tb3VuZC5QTEFZX1NVQ0NFRURFRD8oZSBpbnN0YW5jZW9mIE9iamVjdCYmKG49ZS5vZmZzZXQsaT1lLmxvb3Ascj1lLnZvbHVtZSxzPWUucGFuKSxudWxsIT1uJiZ0aGlzLnNldFBvc2l0aW9uKG4pLG51bGwhPWkmJnRoaXMuc2V0TG9vcChpKSxudWxsIT1yJiZ0aGlzLnNldFZvbHVtZShyKSxudWxsIT1zJiZ0aGlzLnNldFBhbihzKSx2b2lkKHRoaXMuX3BhdXNlZCYmdGhpcy5zZXRQYXVzZWQoITEpKSk6KHRoaXMuX2NsZWFuVXAoKSxjcmVhdGVqcy5Tb3VuZC5fcGxheUluc3RhbmNlKHRoaXMsZSx0LG4saSxyLHMpLHRoaXMpfSx0LnBhdXNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhdXNlZHx8dGhpcy5wbGF5U3RhdGUhPWNyZWF0ZWpzLlNvdW5kLlBMQVlfU1VDQ0VFREVEPyExOih0aGlzLnNldFBhdXNlZCghMCksITApfSx0LnJlc3VtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXVzZWQ/KHRoaXMuc2V0UGF1c2VkKCExKSwhMCk6ITF9LHQuc3RvcD1mdW5jdGlvbigpewpyZXR1cm4gdGhpcy5fcG9zaXRpb249MCx0aGlzLl9wYXVzZWQ9ITEsdGhpcy5faGFuZGxlU3RvcCgpLHRoaXMuX2NsZWFuVXAoKSx0aGlzLnBsYXlTdGF0ZT1jcmVhdGVqcy5Tb3VuZC5QTEFZX0ZJTklTSEVELHRoaXN9LHQuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuX2NsZWFuVXAoKSx0aGlzLnNyYz1udWxsLHRoaXMucGxheWJhY2tSZXNvdXJjZT1udWxsLHRoaXMucmVtb3ZlQWxsRXZlbnRMaXN0ZW5lcnMoKX0sdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbQWJzdHJhY3RTb3VuZEluc3RhbmNlXSJ9LHQuZ2V0UGF1c2VkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhdXNlZH0sdC5zZXRQYXVzZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT0hMCYmZSE9PSExfHx0aGlzLl9wYXVzZWQ9PWV8fDE9PWUmJnRoaXMucGxheVN0YXRlIT1jcmVhdGVqcy5Tb3VuZC5QTEFZX1NVQ0NFRURFRD92b2lkIDA6KHRoaXMuX3BhdXNlZD1lLGU/dGhpcy5fcGF1c2UoKTp0aGlzLl9yZXN1bWUoKSxjbGVhclRpbWVvdXQodGhpcy5kZWxheVRpbWVvdXRJZCksdGhpcyl9LHQuc2V0Vm9sdW1lPWZ1bmN0aW9uKGUpe3JldHVybiBlPT10aGlzLl92b2x1bWU/dGhpczoodGhpcy5fdm9sdW1lPU1hdGgubWF4KDAsTWF0aC5taW4oMSxlKSksdGhpcy5fbXV0ZWR8fHRoaXMuX3VwZGF0ZVZvbHVtZSgpLHRoaXMpfSx0LmdldFZvbHVtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl92b2x1bWV9LHQuc2V0TXV0ZT1mdW5jdGlvbihlKXt0aGlzLnNldE11dGVkKGUpfSx0LmdldE11dGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbXV0ZWR9LHQuc2V0TXV0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT0hMHx8ZT09PSExPyh0aGlzLl9tdXRlZD1lLHRoaXMuX3VwZGF0ZVZvbHVtZSgpLHRoaXMpOnZvaWQgMH0sdC5nZXRNdXRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tdXRlZH0sdC5zZXRQYW49ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PXRoaXMuX3Bhbj90aGlzOih0aGlzLl9wYW49TWF0aC5tYXgoLTEsTWF0aC5taW4oMSxlKSksdGhpcy5fdXBkYXRlUGFuKCksdGhpcyl9LHQuZ2V0UGFuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bhbn0sdC5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXVzZWR8fHRoaXMucGxheVN0YXRlIT1jcmVhdGVqcy5Tb3VuZC5QTEFZX1NVQ0NFRURFRD90aGlzLl9wb3NpdGlvbjp0aGlzLl9jYWxjdWxhdGVDdXJyZW50UG9zaXRpb24oKX0sdC5zZXRQb3NpdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcG9zaXRpb249TWF0aC5tYXgoMCxlKSx0aGlzLnBsYXlTdGF0ZT09Y3JlYXRlanMuU291bmQuUExBWV9TVUNDRUVERUQmJnRoaXMuX3VwZGF0ZVBvc2l0aW9uKCksdGhpc30sdC5nZXREdXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kdXJhdGlvbn0sdC5zZXREdXJhdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gZT09dGhpcy5fZHVyYXRpb24/dGhpczoodGhpcy5fZHVyYXRpb249TWF0aC5tYXgoMCxlfHwwKSx0aGlzLl91cGRhdGVEdXJhdGlvbigpLHRoaXMpfSx0LnNldFBsYXliYWNrUmVzb3VyY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3BsYXliYWNrUmVzb3VyY2U9ZSwwPT10aGlzLl9kdXJhdGlvbiYmdGhpcy5fc2V0RHVyYXRpb25Gcm9tU291cmNlKCksdGhpc30sdC5nZXRQbGF5YmFja1Jlc291cmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYXliYWNrUmVzb3VyY2V9LHQuZ2V0TG9vcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wfSx0LnNldExvb3A9ZnVuY3Rpb24oZSl7bnVsbCE9dGhpcy5fcGxheWJhY2tSZXNvdXJjZSYmKDAhPXRoaXMuX2xvb3AmJjA9PWUmJnRoaXMuX3JlbW92ZUxvb3BpbmcoZSksMD09dGhpcy5fbG9vcCYmMCE9ZSYmdGhpcy5fYWRkTG9vcGluZyhlKSksdGhpcy5fbG9vcD1lfSx0Ll9zZW5kRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGNyZWF0ZWpzLkV2ZW50KGUpO3RoaXMuZGlzcGF0Y2hFdmVudCh0KX0sdC5fY2xlYW5VcD1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLmRlbGF5VGltZW91dElkKSx0aGlzLl9oYW5kbGVDbGVhblVwKCksdGhpcy5fcGF1c2VkPSExLGNyZWF0ZWpzLlNvdW5kLl9wbGF5RmluaXNoZWQodGhpcyl9LHQuX2ludGVycnVwdD1mdW5jdGlvbigpe3RoaXMuX2NsZWFuVXAoKSx0aGlzLnBsYXlTdGF0ZT1jcmVhdGVqcy5Tb3VuZC5QTEFZX0lOVEVSUlVQVEVELHRoaXMuX3NlbmRFdmVudCgiaW50ZXJydXB0ZWQiKX0sdC5fYmVnaW5QbGF5aW5nPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0aGlzLnNldFBvc2l0aW9uKGUpLHRoaXMuc2V0TG9vcCh0KSx0aGlzLnNldFZvbHVtZShuKSx0aGlzLnNldFBhbihpKSxudWxsIT10aGlzLl9wbGF5YmFja1Jlc291cmNlJiZ0aGlzLl9wb3NpdGlvbjx0aGlzLl9kdXJhdGlvbj8odGhpcy5fcGF1c2VkPSExLHRoaXMuX2hhbmRsZVNvdW5kUmVhZHkoKSx0aGlzLnBsYXlTdGF0ZT1jcmVhdGVqcy5Tb3VuZC5QTEFZX1NVQ0NFRURFRCx0aGlzLl9zZW5kRXZlbnQoInN1Y2NlZWRlZCIpLCEwKToodGhpcy5fcGxheUZhaWxlZCgpLCExKX0sdC5fcGxheUZhaWxlZD1mdW5jdGlvbigpe3RoaXMuX2NsZWFuVXAoKSx0aGlzLnBsYXlTdGF0ZT1jcmVhdGVqcy5Tb3VuZC5QTEFZX0ZBSUxFRCx0aGlzLl9zZW5kRXZlbnQoImZhaWxlZCIpfSx0Ll9oYW5kbGVTb3VuZENvbXBsZXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bvc2l0aW9uPTAsMCE9dGhpcy5fbG9vcD8odGhpcy5fbG9vcC0tLHRoaXMuX2hhbmRsZUxvb3AoKSx2b2lkIHRoaXMuX3NlbmRFdmVudCgibG9vcCIpKToodGhpcy5fY2xlYW5VcCgpLHRoaXMucGxheVN0YXRlPWNyZWF0ZWpzLlNvdW5kLlBMQVlfRklOSVNIRUQsdm9pZCB0aGlzLl9zZW5kRXZlbnQoImNvbXBsZXRlIikpfSx0Ll9oYW5kbGVTb3VuZFJlYWR5PWZ1bmN0aW9uKCl7fSx0Ll91cGRhdGVWb2x1bWU9ZnVuY3Rpb24oKXt9LHQuX3VwZGF0ZVBhbj1mdW5jdGlvbigpe30sdC5fdXBkYXRlRHVyYXRpb249ZnVuY3Rpb24oKXt9LHQuX3NldER1cmF0aW9uRnJvbVNvdXJjZT1mdW5jdGlvbigpe30sdC5fY2FsY3VsYXRlQ3VycmVudFBvc2l0aW9uPWZ1bmN0aW9uKCl7fSx0Ll91cGRhdGVQb3NpdGlvbj1mdW5jdGlvbigpe30sdC5fcmVtb3ZlTG9vcGluZz1mdW5jdGlvbigpe30sdC5fYWRkTG9vcGluZz1mdW5jdGlvbigpe30sdC5fcGF1c2U9ZnVuY3Rpb24oKXt9LHQuX3Jlc3VtZT1mdW5jdGlvbigpe30sdC5faGFuZGxlU3RvcD1mdW5jdGlvbigpe30sdC5faGFuZGxlQ2xlYW5VcD1mdW5jdGlvbigpe30sdC5faGFuZGxlTG9vcD1mdW5jdGlvbigpe30sY3JlYXRlanMuQWJzdHJhY3RTb3VuZEluc3RhbmNlPWNyZWF0ZWpzLnByb21vdGUoZSwiRXZlbnREaXNwYXRjaGVyIiksY3JlYXRlanMuRGVmYXVsdFNvdW5kSW5zdGFuY2U9Y3JlYXRlanMuQWJzdHJhY3RTb3VuZEluc3RhbmNlfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9ZnVuY3Rpb24oKXt0aGlzLl9jYXBhYmlsaXRpZXM9bnVsbCx0aGlzLl9sb2FkZXJzPXt9LHRoaXMuX2F1ZGlvU291cmNlcz17fSx0aGlzLl9zb3VuZEluc3RhbmNlcz17fSx0aGlzLl9sb2FkZXJDbGFzcyx0aGlzLl9zb3VuZEluc3RhbmNlQ2xhc3N9LHQ9ZS5wcm90b3R5cGU7ZS5fY2FwYWJpbGl0aWVzPW51bGwsZS5pc1N1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiEwfSx0LnJlZ2lzdGVyPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2F1ZGlvU291cmNlc1tlLnNyY109ITAsdGhpcy5fc291bmRJbnN0YW5jZXNbZS5zcmNdPVtdLHRoaXMuX2xvYWRlcnNbZS5zcmNdKXJldHVybiB0aGlzLl9sb2FkZXJzW2Uuc3JjXTt2YXIgdD1uZXcgdGhpcy5fbG9hZGVyQ2xhc3MoZSk7cmV0dXJuIHQub24oImNvbXBsZXRlIixjcmVhdGVqcy5wcm94eSh0aGlzLl9oYW5kbGVQcmVsb2FkQ29tcGxldGUsdGhpcykpLHRoaXMuX2xvYWRlcnNbZS5zcmNdPXQsdH0sdC5wcmVsb2FkPWZ1bmN0aW9uKGUpe2Uub24oImVycm9yIixjcmVhdGVqcy5wcm94eSh0aGlzLl9oYW5kbGVQcmVsb2FkRXJyb3IsdGhpcykpLGUubG9hZCgpfSx0LmlzUHJlbG9hZFN0YXJ0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPXRoaXMuX2F1ZGlvU291cmNlc1tlXX0sdC5pc1ByZWxvYWRDb21wbGV0ZT1mdW5jdGlvbihlKXtyZXR1cm4hKG51bGw9PXRoaXMuX2F1ZGlvU291cmNlc1tlXXx8MT09dGhpcy5fYXVkaW9Tb3VyY2VzW2VdKX0sdC5yZW1vdmVTb3VuZD1mdW5jdGlvbihlKXtpZih0aGlzLl9zb3VuZEluc3RhbmNlc1tlXSl7Zm9yKHZhciB0PXRoaXMuX3NvdW5kSW5zdGFuY2VzW2VdLmxlbmd0aDt0LS07KXt2YXIgbj10aGlzLl9zb3VuZEluc3RhbmNlc1tlXVt0XTtuLmRlc3Ryb3koKX1kZWxldGUgdGhpcy5fc291bmRJbnN0YW5jZXNbZV0sZGVsZXRlIHRoaXMuX2F1ZGlvU291cmNlc1tlXSx0aGlzLl9sb2FkZXJzW2VdJiZ0aGlzLl9sb2FkZXJzW2VdLmRlc3Ryb3koKSxkZWxldGUgdGhpcy5fbG9hZGVyc1tlXX19LHQucmVtb3ZlQWxsU291bmRzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIHRoaXMuX2F1ZGlvU291cmNlcyl0aGlzLnJlbW92ZVNvdW5kKGUpfSx0LmNyZWF0ZT1mdW5jdGlvbihlLHQsbil7dGhpcy5pc1ByZWxvYWRTdGFydGVkKGUpfHx0aGlzLnByZWxvYWQodGhpcy5yZWdpc3RlcihlKSk7dmFyIGk9bmV3IHRoaXMuX3NvdW5kSW5zdGFuY2VDbGFzcyhlLHQsbix0aGlzLl9hdWRpb1NvdXJjZXNbZV0pO3JldHVybiB0aGlzLl9zb3VuZEluc3RhbmNlc1tlXS5wdXNoKGkpLGl9LHQuc2V0Vm9sdW1lPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl92b2x1bWU9ZSx0aGlzLl91cGRhdGVWb2x1bWUoKSwhMH0sdC5nZXRWb2x1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdm9sdW1lfSx0LnNldE11dGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXBkYXRlVm9sdW1lKCksITB9LHQudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW0Fic3RyYWN0UGx1Z2luXSJ9LHQuX2hhbmRsZVByZWxvYWRDb21wbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldC5nZXRJdGVtKCkuc3JjO3RoaXMuX2F1ZGlvU291cmNlc1t0XT1lLnJlc3VsdDtmb3IodmFyIG49MCxpPXRoaXMuX3NvdW5kSW5zdGFuY2VzW3RdLmxlbmd0aDtpPm47bisrKXt2YXIgcj10aGlzLl9zb3VuZEluc3RhbmNlc1t0XVtuXTtyLnNldFBsYXliYWNrUmVzb3VyY2UodGhpcy5fYXVkaW9Tb3VyY2VzW3RdKX19LHQuX2hhbmRsZVByZWxvYWRFcnJvcj1mdW5jdGlvbigpe30sdC5fdXBkYXRlVm9sdW1lPWZ1bmN0aW9uKCl7fSxjcmVhdGVqcy5BYnN0cmFjdFBsdWdpbj1lfSgpLHRoaXMuY3JlYXRlanM9dGhpcy5jcmVhdGVqc3x8e30sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlKXt0aGlzLkFic3RyYWN0TG9hZGVyX2NvbnN0cnVjdG9yKGUsITAsY3JlYXRlanMuQWJzdHJhY3RMb2FkZXIuU09VTkQpfXZhciB0PWNyZWF0ZWpzLmV4dGVuZChlLGNyZWF0ZWpzLkFic3RyYWN0TG9hZGVyKTtlLmNvbnRleHQ9bnVsbCx0LnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltXZWJBdWRpb0xvYWRlcl0ifSx0Ll9jcmVhdGVSZXF1ZXN0PWZ1bmN0aW9uKCl7dGhpcy5fcmVxdWVzdD1uZXcgY3JlYXRlanMuWEhSUmVxdWVzdCh0aGlzLl9pdGVtLCExKSx0aGlzLl9yZXF1ZXN0LnNldFJlc3BvbnNlVHlwZSgiYXJyYXlidWZmZXIiKX0sdC5fc2VuZENvbXBsZXRlPWZ1bmN0aW9uKCl7ZS5jb250ZXh0LmRlY29kZUF1ZGlvRGF0YSh0aGlzLl9yYXdSZXN1bHQsY3JlYXRlanMucHJveHkodGhpcy5faGFuZGxlQXVkaW9EZWNvZGVkLHRoaXMpLGNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZUVycm9yLHRoaXMpKX0sdC5faGFuZGxlQXVkaW9EZWNvZGVkPWZ1bmN0aW9uKGUpe3RoaXMuX3Jlc3VsdD1lLHRoaXMuQWJzdHJhY3RMb2FkZXJfX3NlbmRDb21wbGV0ZSgpfSxjcmVhdGVqcy5XZWJBdWRpb0xvYWRlcj1jcmVhdGVqcy5wcm9tb3RlKGUsIkFic3RyYWN0TG9hZGVyIil9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKGUsdCxpLHIpe3RoaXMuQWJzdHJhY3RTb3VuZEluc3RhbmNlX2NvbnN0cnVjdG9yKGUsdCxpLHIpLHRoaXMuZ2Fpbk5vZGU9bi5jb250ZXh0LmNyZWF0ZUdhaW4oKSx0aGlzLnBhbk5vZGU9bi5jb250ZXh0LmNyZWF0ZVBhbm5lcigpLHRoaXMucGFuTm9kZS5wYW5uaW5nTW9kZWw9bi5fcGFubmluZ01vZGVsLHRoaXMucGFuTm9kZS5jb25uZWN0KHRoaXMuZ2Fpbk5vZGUpLHRoaXMuc291cmNlTm9kZT1udWxsLHRoaXMuX3NvdW5kQ29tcGxldGVUaW1lb3V0PW51bGwsdGhpcy5fc291cmNlTm9kZU5leHQ9bnVsbCx0aGlzLl9wbGF5YmFja1N0YXJ0VGltZT0wLHRoaXMuX2VuZGVkSGFuZGxlcj1jcmVhdGVqcy5wcm94eSh0aGlzLl9oYW5kbGVTb3VuZENvbXBsZXRlLHRoaXMpfXZhciB0PWNyZWF0ZWpzLmV4dGVuZChlLGNyZWF0ZWpzLkFic3RyYWN0U291bmRJbnN0YW5jZSksbj1lO24uY29udGV4dD1udWxsLG4uZGVzdGluYXRpb25Ob2RlPW51bGwsbi5fcGFubmluZ01vZGVsPSJlcXVhbHBvd2VyIix0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLkFic3RyYWN0U291bmRJbnN0YW5jZV9kZXN0cm95KCksdGhpcy5wYW5Ob2RlLmRpc2Nvbm5lY3QoMCksdGhpcy5wYW5Ob2RlPW51bGwsdGhpcy5nYWluTm9kZS5kaXNjb25uZWN0KDApLHRoaXMuZ2Fpbk5vZGU9bnVsbH0sdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbV2ViQXVkaW9Tb3VuZEluc3RhbmNlXSJ9LHQuX3VwZGF0ZVBhbj1mdW5jdGlvbigpe3RoaXMucGFuTm9kZS5zZXRQb3NpdGlvbih0aGlzLl9wYW4sMCwtLjUpfSx0Ll9yZW1vdmVMb29waW5nPWZ1bmN0aW9uKCl7dGhpcy5fc291cmNlTm9kZU5leHQ9dGhpcy5fY2xlYW5VcEF1ZGlvTm9kZSh0aGlzLl9zb3VyY2VOb2RlTmV4dCl9LHQuX2FkZExvb3Bpbmc9ZnVuY3Rpb24oKXt0aGlzLnBsYXlTdGF0ZT09Y3JlYXRlanMuU291bmQuUExBWV9TVUNDRUVERUQmJih0aGlzLl9zb3VyY2VOb2RlTmV4dD10aGlzLl9jcmVhdGVBbmRQbGF5QXVkaW9Ob2RlKHRoaXMuX3BsYXliYWNrU3RhcnRUaW1lLDApKX0sdC5fc2V0RHVyYXRpb25Gcm9tU291cmNlPWZ1bmN0aW9uKCl7dGhpcy5fZHVyYXRpb249MWUzKnRoaXMucGxheWJhY2tSZXNvdXJjZS5kdXJhdGlvbn0sdC5faGFuZGxlQ2xlYW5VcD1mdW5jdGlvbigpe3RoaXMuc291cmNlTm9kZSYmdGhpcy5wbGF5U3RhdGU9PWNyZWF0ZWpzLlNvdW5kLlBMQVlfU1VDQ0VFREVEJiYodGhpcy5zb3VyY2VOb2RlPXRoaXMuX2NsZWFuVXBBdWRpb05vZGUodGhpcy5zb3VyY2VOb2RlKSx0aGlzLl9zb3VyY2VOb2RlTmV4dD10aGlzLl9jbGVhblVwQXVkaW9Ob2RlKHRoaXMuX3NvdXJjZU5vZGVOZXh0KSksMCE9dGhpcy5nYWluTm9kZS5udW1iZXJPZk91dHB1dHMmJnRoaXMuZ2Fpbk5vZGUuZGlzY29ubmVjdCgwKSxjbGVhclRpbWVvdXQodGhpcy5fc291bmRDb21wbGV0ZVRpbWVvdXQpLHRoaXMuX3BsYXliYWNrU3RhcnRUaW1lPTB9LHQuX2NsZWFuVXBBdWRpb05vZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJihlLnN0b3AoMCksZS5kaXNjb25uZWN0KDApLGU9bnVsbCksZX0sdC5faGFuZGxlU291bmRSZWFkeT1mdW5jdGlvbigpe3RoaXMuZ2Fpbk5vZGUuY29ubmVjdChuLmRlc3RpbmF0aW9uTm9kZSk7dmFyIGU9LjAwMSp0aGlzLl9kdXJhdGlvbix0PS4wMDEqdGhpcy5fcG9zaXRpb247dGhpcy5zb3VyY2VOb2RlPXRoaXMuX2NyZWF0ZUFuZFBsYXlBdWRpb05vZGUobi5jb250ZXh0LmN1cnJlbnRUaW1lLWUsdCksdGhpcy5fcGxheWJhY2tTdGFydFRpbWU9dGhpcy5zb3VyY2VOb2RlLnN0YXJ0VGltZS10LHRoaXMuX3NvdW5kQ29tcGxldGVUaW1lb3V0PXNldFRpbWVvdXQodGhpcy5fZW5kZWRIYW5kbGVyLDFlMyooZS10KSksMCE9dGhpcy5fbG9vcCYmKHRoaXMuX3NvdXJjZU5vZGVOZXh0PXRoaXMuX2NyZWF0ZUFuZFBsYXlBdWRpb05vZGUodGhpcy5fcGxheWJhY2tTdGFydFRpbWUsMCkpfSx0Ll9jcmVhdGVBbmRQbGF5QXVkaW9Ob2RlPWZ1bmN0aW9uKGUsdCl7dmFyIGk9bi5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO2kuYnVmZmVyPXRoaXMucGxheWJhY2tSZXNvdXJjZSxpLmNvbm5lY3QodGhpcy5wYW5Ob2RlKTt2YXIgcj0uMDAxKnRoaXMuX2R1cmF0aW9uO3JldHVybiBpLnN0YXJ0VGltZT1lK3IsaS5zdGFydChpLnN0YXJ0VGltZSx0Ky4wMDEqdGhpcy5fc3RhcnRUaW1lLHItdCksaX0sdC5fcGF1c2U9ZnVuY3Rpb24oKXt0aGlzLl9wb3NpdGlvbj0xZTMqKG4uY29udGV4dC5jdXJyZW50VGltZS10aGlzLl9wbGF5YmFja1N0YXJ0VGltZSksdGhpcy5zb3VyY2VOb2RlPXRoaXMuX2NsZWFuVXBBdWRpb05vZGUodGhpcy5zb3VyY2VOb2RlKSx0aGlzLl9zb3VyY2VOb2RlTmV4dD10aGlzLl9jbGVhblVwQXVkaW9Ob2RlKHRoaXMuX3NvdXJjZU5vZGVOZXh0KSwwIT10aGlzLmdhaW5Ob2RlLm51bWJlck9mT3V0cHV0cyYmdGhpcy5nYWluTm9kZS5kaXNjb25uZWN0KDApLGNsZWFyVGltZW91dCh0aGlzLl9zb3VuZENvbXBsZXRlVGltZW91dCl9LHQuX3Jlc3VtZT1mdW5jdGlvbigpe3RoaXMuX2hhbmRsZVNvdW5kUmVhZHkoKX0sdC5fdXBkYXRlVm9sdW1lPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbXV0ZWQ/MDp0aGlzLl92b2x1bWU7ZSE9dGhpcy5nYWluTm9kZS5nYWluLnZhbHVlJiYodGhpcy5nYWluTm9kZS5nYWluLnZhbHVlPWUpfSx0Ll9jYWxjdWxhdGVDdXJyZW50UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gMWUzKihuLmNvbnRleHQuY3VycmVudFRpbWUtdGhpcy5fcGxheWJhY2tTdGFydFRpbWUpfSx0Ll91cGRhdGVQb3NpdGlvbj1mdW5jdGlvbigpe3RoaXMuc291cmNlTm9kZT10aGlzLl9jbGVhblVwQXVkaW9Ob2RlKHRoaXMuc291cmNlTm9kZSksdGhpcy5fc291cmNlTm9kZU5leHQ9dGhpcy5fY2xlYW5VcEF1ZGlvTm9kZSh0aGlzLl9zb3VyY2VOb2RlTmV4dCksY2xlYXJUaW1lb3V0KHRoaXMuX3NvdW5kQ29tcGxldGVUaW1lb3V0KSx0aGlzLl9wYXVzZWR8fHRoaXMuX2hhbmRsZVNvdW5kUmVhZHkoKX0sdC5faGFuZGxlTG9vcD1mdW5jdGlvbigpe3RoaXMuX2NsZWFuVXBBdWRpb05vZGUodGhpcy5zb3VyY2VOb2RlKSx0aGlzLnNvdXJjZU5vZGU9dGhpcy5fc291cmNlTm9kZU5leHQsdGhpcy5fcGxheWJhY2tTdGFydFRpbWU9dGhpcy5zb3VyY2VOb2RlLnN0YXJ0VGltZSx0aGlzLl9zb3VyY2VOb2RlTmV4dD10aGlzLl9jcmVhdGVBbmRQbGF5QXVkaW9Ob2RlKHRoaXMuX3BsYXliYWNrU3RhcnRUaW1lLDApLHRoaXMuX3NvdW5kQ29tcGxldGVUaW1lb3V0PXNldFRpbWVvdXQodGhpcy5fZW5kZWRIYW5kbGVyLHRoaXMuX2R1cmF0aW9uKX0sdC5fdXBkYXRlRHVyYXRpb249ZnVuY3Rpb24oKXt0aGlzLl9wYXVzZSgpLHRoaXMuX3Jlc3VtZSgpfSxjcmVhdGVqcy5XZWJBdWRpb1NvdW5kSW5zdGFuY2U9Y3JlYXRlanMucHJvbW90ZShlLCJBYnN0cmFjdFNvdW5kSW5zdGFuY2UiKX0oKSx0aGlzLmNyZWF0ZWpzPXRoaXMuY3JlYXRlanN8fHt9LGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoKXt0aGlzLkFic3RyYWN0UGx1Z2luX2NvbnN0cnVjdG9yKCksdGhpcy5fcGFubmluZ01vZGVsPW4uX3Bhbm5pbmdNb2RlbCx0aGlzLl92b2x1bWU9MSx0aGlzLmNvbnRleHQ9bi5jb250ZXh0LHRoaXMuZHluYW1pY3NDb21wcmVzc29yTm9kZT10aGlzLmNvbnRleHQuY3JlYXRlRHluYW1pY3NDb21wcmVzc29yKCksdGhpcy5keW5hbWljc0NvbXByZXNzb3JOb2RlLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKSx0aGlzLmdhaW5Ob2RlPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5nYWluTm9kZS5jb25uZWN0KHRoaXMuZHluYW1pY3NDb21wcmVzc29yTm9kZSksY3JlYXRlanMuV2ViQXVkaW9Tb3VuZEluc3RhbmNlLmRlc3RpbmF0aW9uTm9kZT10aGlzLmdhaW5Ob2RlLHRoaXMuX2NhcGFiaWxpdGllcz1uLl9jYXBhYmlsaXRpZXMsdGhpcy5fbG9hZGVyQ2xhc3M9Y3JlYXRlanMuV2ViQXVkaW9Mb2FkZXIsdGhpcy5fc291bmRJbnN0YW5jZUNsYXNzPWNyZWF0ZWpzLldlYkF1ZGlvU291bmRJbnN0YW5jZSx0aGlzLl9hZGRQcm9wc1RvQ2xhc3NlcygpfXZhciB0PWNyZWF0ZWpzLmV4dGVuZChlLGNyZWF0ZWpzLkFic3RyYWN0UGx1Z2luKSxuPWU7bi5fY2FwYWJpbGl0aWVzPW51bGwsbi5fcGFubmluZ01vZGVsPSJlcXVhbHBvd2VyIixuLmNvbnRleHQ9bnVsbCxuLmlzU3VwcG9ydGVkPWZ1bmN0aW9uKCl7dmFyIGU9Y3JlYXRlanMuQnJvd3NlckRldGVjdC5pc0lPU3x8Y3JlYXRlanMuQnJvd3NlckRldGVjdC5pc0FuZHJvaWR8fGNyZWF0ZWpzLkJyb3dzZXJEZXRlY3QuaXNCbGFja2JlcnJ5O3JldHVybiJmaWxlOiIhPWxvY2F0aW9uLnByb3RvY29sfHxlfHx0aGlzLl9pc0ZpbGVYSFJTdXBwb3J0ZWQoKT8obi5fZ2VuZXJhdGVDYXBhYmlsaXRpZXMoKSxudWxsPT1uLmNvbnRleHQ/ITE6ITApOiExfSxuLnBsYXlFbXB0eVNvdW5kPWZ1bmN0aW9uKCl7dmFyIGU9bi5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO2UuYnVmZmVyPW4uY29udGV4dC5jcmVhdGVCdWZmZXIoMSwxLDIyMDUwKSxlLmNvbm5lY3Qobi5jb250ZXh0LmRlc3RpbmF0aW9uKSxlLnN0YXJ0KDAsMCwwKX0sbi5faXNGaWxlWEhSU3VwcG9ydGVkPWZ1bmN0aW9uKCl7dmFyIGU9ITAsdD1uZXcgWE1MSHR0cFJlcXVlc3Q7dHJ5e3Qub3BlbigiR0VUIiwiV2ViQXVkaW9QbHVnaW5UZXN0LmZhaWwiLCExKX1jYXRjaChuKXtyZXR1cm4gZT0hMX10Lm9uZXJyb3I9ZnVuY3Rpb24oKXtlPSExfSx0Lm9ubG9hZD1mdW5jdGlvbigpe2U9NDA0PT10aGlzLnN0YXR1c3x8MjAwPT10aGlzLnN0YXR1c3x8MD09dGhpcy5zdGF0dXMmJiIiIT10aGlzLnJlc3BvbnNlfTt0cnl7dC5zZW5kKCl9Y2F0Y2gobil7ZT0hMX1yZXR1cm4gZX0sbi5fZ2VuZXJhdGVDYXBhYmlsaXRpZXM9ZnVuY3Rpb24oKXtpZihudWxsPT1uLl9jYXBhYmlsaXRpZXMpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIik7aWYobnVsbD09ZS5jYW5QbGF5VHlwZSlyZXR1cm4gbnVsbDtpZihudWxsPT1uLmNvbnRleHQpaWYod2luZG93LkF1ZGlvQ29udGV4dCluLmNvbnRleHQ9bmV3IEF1ZGlvQ29udGV4dDtlbHNle2lmKCF3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KXJldHVybiBudWxsO24uY29udGV4dD1uZXcgd2Via2l0QXVkaW9Db250ZXh0fW4uX2NvbXBhdGliaWxpdHlTZXRVcCgpLG4ucGxheUVtcHR5U291bmQoKSxuLl9jYXBhYmlsaXRpZXM9e3Bhbm5pbmc6ITAsdm9sdW1lOiEwLHRyYWNrczotMX07Zm9yKHZhciB0PWNyZWF0ZWpzLlNvdW5kLlNVUFBPUlRFRF9FWFRFTlNJT05TLGk9Y3JlYXRlanMuU291bmQuRVhURU5TSU9OX01BUCxyPTAscz10Lmxlbmd0aDtzPnI7cisrKXt2YXIgbz10W3JdLGE9aVtvXXx8bztuLl9jYXBhYmlsaXRpZXNbb109Im5vIiE9ZS5jYW5QbGF5VHlwZSgiYXVkaW8vIitvKSYmIiIhPWUuY2FuUGxheVR5cGUoImF1ZGlvLyIrbyl8fCJubyIhPWUuY2FuUGxheVR5cGUoImF1ZGlvLyIrYSkmJiIiIT1lLmNhblBsYXlUeXBlKCJhdWRpby8iK2EpfW4uY29udGV4dC5kZXN0aW5hdGlvbi5udW1iZXJPZkNoYW5uZWxzPDImJihuLl9jYXBhYmlsaXRpZXMucGFubmluZz0hMSl9fSxuLl9jb21wYXRpYmlsaXR5U2V0VXA9ZnVuY3Rpb24oKXtpZihuLl9wYW5uaW5nTW9kZWw9ImVxdWFscG93ZXIiLCFuLmNvbnRleHQuY3JlYXRlR2Fpbil7bi5jb250ZXh0LmNyZWF0ZUdhaW49bi5jb250ZXh0LmNyZWF0ZUdhaW5Ob2RlO3ZhciBlPW4uY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtlLl9fcHJvdG9fXy5zdGFydD1lLl9fcHJvdG9fXy5ub3RlR3JhaW5PbixlLl9fcHJvdG9fXy5zdG9wPWUuX19wcm90b19fLm5vdGVPZmYsbi5fcGFubmluZ01vZGVsPTB9fSx0LnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltXZWJBdWRpb1BsdWdpbl0ifSx0Ll9hZGRQcm9wc1RvQ2xhc3Nlcz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3NvdW5kSW5zdGFuY2VDbGFzcztlLmNvbnRleHQ9dGhpcy5jb250ZXh0LGUuZGVzdGluYXRpb25Ob2RlPXRoaXMuZ2Fpbk5vZGUsZS5fcGFubmluZ01vZGVsPXRoaXMuX3Bhbm5pbmdNb2RlbCx0aGlzLl9sb2FkZXJDbGFzcy5jb250ZXh0PXRoaXMuY29udGV4dH0sdC5fdXBkYXRlVm9sdW1lPWZ1bmN0aW9uKCl7dmFyIGU9Y3JlYXRlanMuU291bmQuX21hc3Rlck11dGU/MDp0aGlzLl92b2x1bWU7ZSE9dGhpcy5nYWluTm9kZS5nYWluLnZhbHVlJiYodGhpcy5nYWluTm9kZS5nYWluLnZhbHVlPWUpfSxjcmVhdGVqcy5XZWJBdWRpb1BsdWdpbj1jcmVhdGVqcy5wcm9tb3RlKGUsIkFic3RyYWN0UGx1Z2luIil9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKGUpe3RoaXMuc3JjPWUsdGhpcy5sZW5ndGg9MCx0aGlzLmF2YWlsYWJsZT0wLHRoaXMudGFncz1bXSx0aGlzLmR1cmF0aW9uPTB9dmFyIHQ9ZS5wcm90b3R5cGU7dC5jb25zdHJ1Y3Rvcj1lO3ZhciBuPWU7bi50YWdzPXt9LG4uZ2V0PWZ1bmN0aW9uKHQpe3ZhciBpPW4udGFnc1t0XTtyZXR1cm4gbnVsbD09aSYmKGk9bi50YWdzW3RdPW5ldyBlKHQpKSxpfSxuLnJlbW92ZT1mdW5jdGlvbihlKXt2YXIgdD1uLnRhZ3NbZV07cmV0dXJuIG51bGw9PXQ/ITE6KHQucmVtb3ZlQWxsKCksZGVsZXRlIG4udGFnc1tlXSwhMCl9LG4uZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oZSl7dmFyIHQ9bi50YWdzW2VdO3JldHVybiBudWxsPT10P251bGw6dC5nZXQoKX0sbi5zZXRJbnN0YW5jZT1mdW5jdGlvbihlLHQpe3ZhciBpPW4udGFnc1tlXTtyZXR1cm4gbnVsbD09aT9udWxsOmkuc2V0KHQpfSxuLmdldER1cmF0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PW4udGFnc1tlXTtyZXR1cm4gbnVsbD09dD8wOnQuZ2V0RHVyYXRpb24oKX0sdC5hZGQ9ZnVuY3Rpb24oZSl7dGhpcy50YWdzLnB1c2goZSksdGhpcy5sZW5ndGgrKyx0aGlzLmF2YWlsYWJsZSsrfSx0LnJlbW92ZUFsbD1mdW5jdGlvbigpe2Zvcih2YXIgZTt0aGlzLmxlbmd0aC0tOyllPXRoaXMudGFnc1t0aGlzLmxlbmd0aF0sZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSksZGVsZXRlIHRoaXMudGFnc1t0aGlzLmxlbmd0aF07dGhpcy5zcmM9bnVsbCx0aGlzLnRhZ3MubGVuZ3RoPTB9LHQuZ2V0PWZ1bmN0aW9uKCl7aWYoMD09dGhpcy50YWdzLmxlbmd0aClyZXR1cm4gbnVsbDt0aGlzLmF2YWlsYWJsZT10aGlzLnRhZ3MubGVuZ3RoO3ZhciBlPXRoaXMudGFncy5wb3AoKTtyZXR1cm4gbnVsbD09ZS5wYXJlbnROb2RlJiZkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGUpLGV9LHQuc2V0PWZ1bmN0aW9uKGUpe3ZhciB0PWNyZWF0ZWpzLmluZGV4T2YodGhpcy50YWdzLGUpOy0xPT10JiZ0aGlzLnRhZ3MucHVzaChlKSx0aGlzLmF2YWlsYWJsZT10aGlzLnRhZ3MubGVuZ3RofSx0LmdldER1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHVyYXRpb258fCh0aGlzLmR1cmF0aW9uPTFlMyp0aGlzLnRhZ3NbdGhpcy50YWdzLmxlbmd0aC0xXS5kdXJhdGlvbiksdGhpcy5kdXJhdGlvbn0sdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbSFRNTEF1ZGlvVGFnUG9vbF0ifSxjcmVhdGVqcy5IVE1MQXVkaW9UYWdQb29sPWV9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKGUsdCxuLGkpe3RoaXMuQWJzdHJhY3RTb3VuZEluc3RhbmNlX2NvbnN0cnVjdG9yKGUsdCxuLGkpLHRoaXMuX2F1ZGlvU3ByaXRlU3RvcFRpbWU9bnVsbCx0aGlzLl9kZWxheVRpbWVvdXRJZD1udWxsLHRoaXMuX2VuZGVkSGFuZGxlcj1jcmVhdGVqcy5wcm94eSh0aGlzLl9oYW5kbGVTb3VuZENvbXBsZXRlLHRoaXMpLHRoaXMuX3JlYWR5SGFuZGxlcj1jcmVhdGVqcy5wcm94eSh0aGlzLl9oYW5kbGVUYWdSZWFkeSx0aGlzKSx0aGlzLl9zdGFsbGVkSGFuZGxlcj1jcmVhdGVqcy5wcm94eSh0aGlzLnBsYXlGYWlsZWQsdGhpcyksdGhpcy5fYXVkaW9TcHJpdGVFbmRIYW5kbGVyPWNyZWF0ZWpzLnByb3h5KHRoaXMuX2hhbmRsZUF1ZGlvU3ByaXRlTG9vcCx0aGlzKSx0aGlzLl9sb29wSGFuZGxlcj1jcmVhdGVqcy5wcm94eSh0aGlzLl9oYW5kbGVTb3VuZENvbXBsZXRlLHRoaXMpLG4/dGhpcy5fYXVkaW9TcHJpdGVTdG9wVGltZT0uMDAxKih0K24pOnRoaXMuX2R1cmF0aW9uPWNyZWF0ZWpzLkhUTUxBdWRpb1RhZ1Bvb2wuZ2V0RHVyYXRpb24odGhpcy5zcmMpfXZhciB0PWNyZWF0ZWpzLmV4dGVuZChlLGNyZWF0ZWpzLkFic3RyYWN0U291bmRJbnN0YW5jZSk7dC5zZXRNYXN0ZXJWb2x1bWU9ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVWb2x1bWUoKX0sdC5zZXRNYXN0ZXJNdXRlPWZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlVm9sdW1lKCl9LHQudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW0hUTUxBdWRpb1NvdW5kSW5zdGFuY2VdIn0sdC5fcmVtb3ZlTG9vcGluZz1mdW5jdGlvbigpe251bGwhPXRoaXMuX3BsYXliYWNrUmVzb3VyY2UmJih0aGlzLl9wbGF5YmFja1Jlc291cmNlLmxvb3A9ITEsdGhpcy5fcGxheWJhY2tSZXNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fQVVESU9fU0VFS0VELHRoaXMuX2xvb3BIYW5kbGVyLCExKSl9LHQuX2FkZExvb3Bpbmc9ZnVuY3Rpb24oKXtudWxsPT10aGlzLl9wbGF5YmFja1Jlc291cmNlfHx0aGlzLl9hdWRpb1Nwcml0ZVN0b3BUaW1lfHwodGhpcy5fcGxheWJhY2tSZXNvdXJjZS5hZGRFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fQVVESU9fU0VFS0VELHRoaXMuX2xvb3BIYW5kbGVyLCExKSx0aGlzLl9wbGF5YmFja1Jlc291cmNlLmxvb3A9ITApfSx0Ll9oYW5kbGVDbGVhblVwPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcGxheWJhY2tSZXNvdXJjZTtpZihudWxsIT1lKXtlLnBhdXNlKCksZS5sb29wPSExLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX0FVRElPX0VOREVELHRoaXMuX2VuZGVkSGFuZGxlciwhMSksZS5yZW1vdmVFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fQVVESU9fUkVBRFksdGhpcy5fcmVhZHlIYW5kbGVyLCExKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luLl9BVURJT19TVEFMTEVELHRoaXMuX3N0YWxsZWRIYW5kbGVyLCExKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luLl9BVURJT19TRUVLRUQsdGhpcy5fbG9vcEhhbmRsZXIsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX1RJTUVfVVBEQVRFLHRoaXMuX2F1ZGlvU3ByaXRlRW5kSGFuZGxlciwhMSk7dHJ5e2UuY3VycmVudFRpbWU9dGhpcy5fc3RhcnRUaW1lfWNhdGNoKHQpe31jcmVhdGVqcy5IVE1MQXVkaW9UYWdQb29sLnNldEluc3RhbmNlKHRoaXMuc3JjLGUpLHRoaXMuX3BsYXliYWNrUmVzb3VyY2U9bnVsbH19LHQuX2JlZ2luUGxheWluZz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdGhpcy5fcGxheWJhY2tSZXNvdXJjZT1jcmVhdGVqcy5IVE1MQXVkaW9UYWdQb29sLmdldEluc3RhbmNlKHRoaXMuc3JjKSx0aGlzLkFic3RyYWN0U291bmRJbnN0YW5jZV9fYmVnaW5QbGF5aW5nKGUsdCxuLGkpfSx0Ll9oYW5kbGVTb3VuZFJlYWR5PWZ1bmN0aW9uKCl7aWYoNCE9PXRoaXMuX3BsYXliYWNrUmVzb3VyY2UucmVhZHlTdGF0ZSl7dmFyIGU9dGhpcy5fcGxheWJhY2tSZXNvdXJjZTtyZXR1cm4gZS5hZGRFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fQVVESU9fUkVBRFksdGhpcy5fcmVhZHlIYW5kbGVyLCExKSxlLmFkZEV2ZW50TGlzdGVuZXIoY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luLl9BVURJT19TVEFMTEVELHRoaXMuX3N0YWxsZWRIYW5kbGVyLCExKSxlLnByZWxvYWQ9ImF1dG8iLHZvaWQgZS5sb2FkKCl9dGhpcy5fdXBkYXRlVm9sdW1lKCksdGhpcy5fcGxheWJhY2tSZXNvdXJjZS5jdXJyZW50VGltZT0uMDAxKih0aGlzLl9zdGFydFRpbWUrdGhpcy5fcG9zaXRpb24pLHRoaXMuX2F1ZGlvU3ByaXRlU3RvcFRpbWU/dGhpcy5fcGxheWJhY2tSZXNvdXJjZS5hZGRFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fVElNRV9VUERBVEUsdGhpcy5fYXVkaW9TcHJpdGVFbmRIYW5kbGVyLCExKToodGhpcy5fcGxheWJhY2tSZXNvdXJjZS5hZGRFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fQVVESU9fRU5ERUQsdGhpcy5fZW5kZWRIYW5kbGVyLCExKSwwIT10aGlzLl9sb29wJiYodGhpcy5fcGxheWJhY2tSZXNvdXJjZS5hZGRFdmVudExpc3RlbmVyKGNyZWF0ZWpzLkhUTUxBdWRpb1BsdWdpbi5fQVVESU9fU0VFS0VELHRoaXMuX2xvb3BIYW5kbGVyLCExKSx0aGlzLl9wbGF5YmFja1Jlc291cmNlLmxvb3A9ITApKSx0aGlzLl9wbGF5YmFja1Jlc291cmNlLnBsYXkoKX0sdC5faGFuZGxlVGFnUmVhZHk9ZnVuY3Rpb24oKXt0aGlzLl9wbGF5YmFja1Jlc291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luLl9BVURJT19SRUFEWSx0aGlzLl9yZWFkeUhhbmRsZXIsITEpLHRoaXMuX3BsYXliYWNrUmVzb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX0FVRElPX1NUQUxMRUQsdGhpcy5fc3RhbGxlZEhhbmRsZXIsITEpLHRoaXMuX2hhbmRsZVNvdW5kUmVhZHkoKX0sdC5fcGF1c2U9ZnVuY3Rpb24oKXt0aGlzLl9wbGF5YmFja1Jlc291cmNlLnBhdXNlKCl9LHQuX3Jlc3VtZT1mdW5jdGlvbigpe3RoaXMuX3BsYXliYWNrUmVzb3VyY2UucGxheSgpfSx0Ll91cGRhdGVWb2x1bWU9ZnVuY3Rpb24oKXtpZihudWxsIT10aGlzLl9wbGF5YmFja1Jlc291cmNlKXt2YXIgZT10aGlzLl9tdXRlZHx8Y3JlYXRlanMuU291bmQuX21hc3Rlck11dGU/MDp0aGlzLl92b2x1bWUqY3JlYXRlanMuU291bmQuX21hc3RlclZvbHVtZTtlIT10aGlzLl9wbGF5YmFja1Jlc291cmNlLnZvbHVtZSYmKHRoaXMuX3BsYXliYWNrUmVzb3VyY2Uudm9sdW1lPWUpfX0sdC5fY2FsY3VsYXRlQ3VycmVudFBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIDFlMyp0aGlzLl9wbGF5YmFja1Jlc291cmNlLmN1cnJlbnRUaW1lLXRoaXMuX3N0YXJ0VGltZX0sdC5fdXBkYXRlUG9zaXRpb249ZnVuY3Rpb24oKXt0aGlzLl9wbGF5YmFja1Jlc291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luLl9BVURJT19TRUVLRUQsdGhpcy5fbG9vcEhhbmRsZXIsITEpLHRoaXMuX3BsYXliYWNrUmVzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX0FVRElPX1NFRUtFRCx0aGlzLl9oYW5kbGVTZXRQb3NpdGlvblNlZWssITEpO3RyeXt0aGlzLl9wbGF5YmFja1Jlc291cmNlLmN1cnJlbnRUaW1lPS4wMDEqKHRoaXMuX3Bvc2l0aW9uK3RoaXMuX3N0YXJ0VGltZSl9Y2F0Y2goZSl7dGhpcy5faGFuZGxlU2V0UG9zaXRpb25TZWVrKG51bGwpfX0sdC5faGFuZGxlU2V0UG9zaXRpb25TZWVrPWZ1bmN0aW9uKCl7bnVsbCE9dGhpcy5fcGxheWJhY2tSZXNvdXJjZSYmKHRoaXMuX3BsYXliYWNrUmVzb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX0FVRElPX1NFRUtFRCx0aGlzLl9oYW5kbGVTZXRQb3NpdGlvblNlZWssITEpLHRoaXMuX3BsYXliYWNrUmVzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX0FVRElPX1NFRUtFRCx0aGlzLl9sb29wSGFuZGxlciwhMSkpfSx0Ll9oYW5kbGVBdWRpb1Nwcml0ZUxvb3A9ZnVuY3Rpb24oKXt0aGlzLl9wbGF5YmFja1Jlc291cmNlLmN1cnJlbnRUaW1lPD10aGlzLl9hdWRpb1Nwcml0ZVN0b3BUaW1lfHwodGhpcy5fcGxheWJhY2tSZXNvdXJjZS5wYXVzZSgpLDA9PXRoaXMuX2xvb3A/dGhpcy5faGFuZGxlU291bmRDb21wbGV0ZShudWxsKToodGhpcy5fcG9zaXRpb249MCx0aGlzLl9sb29wLS0sdGhpcy5fcGxheWJhY2tSZXNvdXJjZS5jdXJyZW50VGltZT0uMDAxKnRoaXMuX3N0YXJ0VGltZSx0aGlzLl9wYXVzZWR8fHRoaXMuX3BsYXliYWNrUmVzb3VyY2UucGxheSgpLHRoaXMuX3NlbmRFdmVudCgibG9vcCIpKSl9LHQuX2hhbmRsZUxvb3A9ZnVuY3Rpb24oKXswPT10aGlzLl9sb29wJiYodGhpcy5fcGxheWJhY2tSZXNvdXJjZS5sb29wPSExLHRoaXMuX3BsYXliYWNrUmVzb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX0FVRElPX1NFRUtFRCx0aGlzLl9sb29wSGFuZGxlciwhMSkpfSx0Ll91cGRhdGVEdXJhdGlvbj1mdW5jdGlvbigpe3RoaXMuX2F1ZGlvU3ByaXRlU3RvcFRpbWU9LjAwMSooc3RhcnRUaW1lK2R1cmF0aW9uKSx0aGlzLnBsYXlTdGF0ZT09Y3JlYXRlanMuU291bmQuUExBWV9TVUNDRUVERUQmJih0aGlzLl9wbGF5YmFja1Jlc291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luLl9BVURJT19FTkRFRCx0aGlzLl9lbmRlZEhhbmRsZXIsITEpLHRoaXMuX3BsYXliYWNrUmVzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihjcmVhdGVqcy5IVE1MQXVkaW9QbHVnaW4uX1RJTUVfVVBEQVRFLHRoaXMuX2F1ZGlvU3ByaXRlRW5kSGFuZGxlciwhMSkpfSxjcmVhdGVqcy5IVE1MQXVkaW9Tb3VuZEluc3RhbmNlPWNyZWF0ZWpzLnByb21vdGUoZSwiQWJzdHJhY3RTb3VuZEluc3RhbmNlIil9KCksdGhpcy5jcmVhdGVqcz10aGlzLmNyZWF0ZWpzfHx7fSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKCl7dGhpcy5BYnN0cmFjdFBsdWdpbl9jb25zdHJ1Y3RvcigpLHRoaXMuZGVmYXVsdE51bUNoYW5uZWxzPTIsdGhpcy5fY2FwYWJpbGl0aWVzPW4uX2NhcGFiaWxpdGllcyx0aGlzLl9sb2FkZXJDbGFzcz1jcmVhdGVqcy5Tb3VuZExvYWRlcix0aGlzLl9zb3VuZEluc3RhbmNlQ2xhc3M9Y3JlYXRlanMuSFRNTEF1ZGlvU291bmRJbnN0YW5jZX12YXIgdD1jcmVhdGVqcy5leHRlbmQoZSxjcmVhdGVqcy5BYnN0cmFjdFBsdWdpbiksbj1lO24uTUFYX0lOU1RBTkNFUz0zMCxuLl9BVURJT19SRUFEWT0iY2FucGxheXRocm91Z2giLG4uX0FVRElPX0VOREVEPSJlbmRlZCIsbi5fQVVESU9fU0VFS0VEPSJzZWVrZWQiLG4uX0FVRElPX1NUQUxMRUQ9InN0YWxsZWQiLG4uX1RJTUVfVVBEQVRFPSJ0aW1ldXBkYXRlIixuLl9jYXBhYmlsaXRpZXM9bnVsbCxuLmVuYWJsZUlPUz0hMSxuLmlzU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuIG4uX2dlbmVyYXRlQ2FwYWJpbGl0aWVzKCksbnVsbD09bi5fY2FwYWJpbGl0aWVzPyExOiEwfSxuLl9nZW5lcmF0ZUNhcGFiaWxpdGllcz1mdW5jdGlvbigpe2lmKG51bGw9PW4uX2NhcGFiaWxpdGllcyl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKTtpZihudWxsPT1lLmNhblBsYXlUeXBlKXJldHVybiBudWxsO24uX2NhcGFiaWxpdGllcz17cGFubmluZzohMCx2b2x1bWU6ITAsdHJhY2tzOi0xfTtmb3IodmFyIHQ9Y3JlYXRlanMuU291bmQuU1VQUE9SVEVEX0VYVEVOU0lPTlMsaT1jcmVhdGVqcy5Tb3VuZC5FWFRFTlNJT05fTUFQLHI9MCxzPXQubGVuZ3RoO3M+cjtyKyspe3ZhciBvPXRbcl0sYT1pW29dfHxvO24uX2NhcGFiaWxpdGllc1tvXT0ibm8iIT1lLmNhblBsYXlUeXBlKCJhdWRpby8iK28pJiYiIiE9ZS5jYW5QbGF5VHlwZSgiYXVkaW8vIitvKXx8Im5vIiE9ZS5jYW5QbGF5VHlwZSgiYXVkaW8vIithKSYmIiIhPWUuY2FuUGxheVR5cGUoImF1ZGlvLyIrYSl9fX0sdC5yZWdpc3Rlcj1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1jcmVhdGVqcy5IVE1MQXVkaW9UYWdQb29sLmdldChlLnNyYyksaT1udWxsLHI9MDt0PnI7cisrKWk9dGhpcy5fY3JlYXRlVGFnKGUuc3JjKSxuLmFkZChpKTt2YXIgcz10aGlzLkFic3RyYWN0UGx1Z2luX3JlZ2lzdGVyKGUsdCk7cmV0dXJuIHMuc2V0VGFnKGkpLHN9LHQucmVtb3ZlU291bmQ9ZnVuY3Rpb24oZSl7dGhpcy5BYnN0cmFjdFBsdWdpbl9yZW1vdmVTb3VuZChlKSxjcmVhdGVqcy5IVE1MQXVkaW9UYWdQb29sLnJlbW92ZShlKX0sdC5jcmVhdGU9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuQWJzdHJhY3RQbHVnaW5fY3JlYXRlKGUsdCxuKTtyZXR1cm4gaS5zZXRQbGF5YmFja1Jlc291cmNlKG51bGwpLGl9LHQudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW0hUTUxBdWRpb1BsdWdpbl0ifSx0LnNldFZvbHVtZT10LmdldFZvbHVtZT10LnNldE11dGU9bnVsbCx0Ll9jcmVhdGVUYWc9ZnVuY3Rpb24oZSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKTtyZXR1cm4gdC5hdXRvcGxheT0hMSx0LnByZWxvYWQ9Im5vbmUiLHQuc3JjPWUsdH0sY3JlYXRlanMuSFRNTEF1ZGlvUGx1Z2luPWNyZWF0ZWpzLnByb21vdGUoZSwiQWJzdHJhY3RQbHVnaW4iKX0oKSxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoWyJqcXVlcnkiXSxlKToidW5kZWZpbmVkIiE9dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKCJqcXVlcnkiKSk6ZShqUXVlcnkpfShmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9d2luZG93LlNsaWNrfHx7fTt0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGkpe3ZhciByLHMsbyxhPXRoaXM7aWYoYS5kZWZhdWx0cz17YWNjZXNzaWJpbGl0eTohMCxhZGFwdGl2ZUhlaWdodDohMSxhcHBlbmRBcnJvd3M6ZSh0KSxhcHBlbmREb3RzOmUodCksYXJyb3dzOiEwLGFzTmF2Rm9yOm51bGwscHJldkFycm93Oic8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgZGF0YS1yb2xlPSJub25lIiBjbGFzcz0ic2xpY2stcHJldiIgYXJpYS1sYWJlbD0icHJldmlvdXMiPlByZXZpb3VzPC9idXR0b24+JyxuZXh0QXJyb3c6JzxidXR0b24gdHlwZT0iYnV0dG9uIiBkYXRhLXJvbGU9Im5vbmUiIGNsYXNzPSJzbGljay1uZXh0IiBhcmlhLWxhYmVsPSJuZXh0Ij5OZXh0PC9idXR0b24+JyxhdXRvcGxheTohMSxhdXRvcGxheVNwZWVkOjNlMyxjZW50ZXJNb2RlOiExLGNlbnRlclBhZGRpbmc6IjUwcHgiLGNzc0Vhc2U6ImVhc2UiLGN1c3RvbVBhZ2luZzpmdW5jdGlvbihlLHQpe3JldHVybic8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgZGF0YS1yb2xlPSJub25lIj4nKyh0KzEpKyI8L2J1dHRvbj4ifSxkb3RzOiExLGRvdHNDbGFzczoic2xpY2stZG90cyIsZHJhZ2dhYmxlOiEwLGVhc2luZzoibGluZWFyIixlZGdlRnJpY3Rpb246LjM1LGZhZGU6ITEsZm9jdXNPblNlbGVjdDohMSxpbmZpbml0ZTohMCxpbml0aWFsU2xpZGU6MCxsYXp5TG9hZDoib25kZW1hbmQiLG1vYmlsZUZpcnN0OiExLHBhdXNlT25Ib3ZlcjohMCxwYXVzZU9uRG90c0hvdmVyOiExLHJlc3BvbmRUbzoid2luZG93IixyZXNwb25zaXZlOm51bGwscnRsOiExLHNsaWRlOiIiLHNsaWRlc1RvU2hvdzoxLHNsaWRlc1RvU2Nyb2xsOjEsc3BlZWQ6NTAwLHN3aXBlOiEwLHN3aXBlVG9TbGlkZTohMSx0b3VjaE1vdmU6ITAsdG91Y2hUaHJlc2hvbGQ6NSx1c2VDU1M6ITAsdmFyaWFibGVXaWR0aDohMSx2ZXJ0aWNhbDohMSx3YWl0Rm9yQW5pbWF0ZTohMH0sYS5pbml0aWFscz17YW5pbWF0aW5nOiExLGRyYWdnaW5nOiExLGF1dG9QbGF5VGltZXI6bnVsbCxjdXJyZW50RGlyZWN0aW9uOjAsY3VycmVudExlZnQ6bnVsbCxjdXJyZW50U2xpZGU6MCxkaXJlY3Rpb246MSwkZG90czpudWxsLGxpc3RXaWR0aDpudWxsLGxpc3RIZWlnaHQ6bnVsbCxsb2FkSW5kZXg6MCwkbmV4dEFycm93Om51bGwsJHByZXZBcnJvdzpudWxsLHNsaWRlQ291bnQ6bnVsbCxzbGlkZVdpZHRoOm51bGwsJHNsaWRlVHJhY2s6bnVsbCwkc2xpZGVzOm51bGwsc2xpZGluZzohMSxzbGlkZU9mZnNldDowLHN3aXBlTGVmdDpudWxsLCRsaXN0Om51bGwsdG91Y2hPYmplY3Q6e30sdHJhbnNmb3Jtc0VuYWJsZWQ6ITF9LGUuZXh0ZW5kKGEsYS5pbml0aWFscyksYS5hY3RpdmVCcmVha3BvaW50PW51bGwsYS5hbmltVHlwZT1udWxsLGEuYW5pbVByb3A9bnVsbCxhLmJyZWFrcG9pbnRzPVtdLGEuYnJlYWtwb2ludFNldHRpbmdzPVtdLGEuY3NzVHJhbnNpdGlvbnM9ITEsYS5oaWRkZW49ImhpZGRlbiIsYS5wYXVzZWQ9ITEsYS5wb3NpdGlvblByb3A9bnVsbCxhLnJlc3BvbmRUbz1udWxsLGEuc2hvdWxkQ2xpY2s9ITAsYS4kc2xpZGVyPWUodCksYS4kc2xpZGVzQ2FjaGU9bnVsbCxhLnRyYW5zZm9ybVR5cGU9bnVsbCxhLnRyYW5zaXRpb25UeXBlPW51bGwsYS52aXNpYmlsaXR5Q2hhbmdlPSJ2aXNpYmlsaXR5Y2hhbmdlIixhLndpbmRvd1dpZHRoPTAsYS53aW5kb3dUaW1lcj1udWxsLHI9ZSh0KS5kYXRhKCJzbGljayIpfHx7fSxhLm9wdGlvbnM9ZS5leHRlbmQoe30sYS5kZWZhdWx0cyxyLGkpLGEuY3VycmVudFNsaWRlPWEub3B0aW9ucy5pbml0aWFsU2xpZGUsYS5vcmlnaW5hbFNldHRpbmdzPWEub3B0aW9ucyxzPWEub3B0aW9ucy5yZXNwb25zaXZlfHxudWxsLHMmJnMubGVuZ3RoPi0xKXthLnJlc3BvbmRUbz1hLm9wdGlvbnMucmVzcG9uZFRvfHwid2luZG93Ijtmb3IobyBpbiBzKXMuaGFzT3duUHJvcGVydHkobykmJihhLmJyZWFrcG9pbnRzLnB1c2goc1tvXS5icmVha3BvaW50KSxhLmJyZWFrcG9pbnRTZXR0aW5nc1tzW29dLmJyZWFrcG9pbnRdPXNbb10uc2V0dGluZ3MpO2EuYnJlYWtwb2ludHMuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBhLm9wdGlvbnMubW9iaWxlRmlyc3Q9PT0hMD9lLXQ6dC1lfSl9InVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudC5tb3pIaWRkZW4/KGEuaGlkZGVuPSJtb3pIaWRkZW4iLGEudmlzaWJpbGl0eUNoYW5nZT0ibW96dmlzaWJpbGl0eWNoYW5nZSIpOiJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQubXNIaWRkZW4/KGEuaGlkZGVuPSJtc0hpZGRlbiIsYS52aXNpYmlsaXR5Q2hhbmdlPSJtc3Zpc2liaWxpdHljaGFuZ2UiKToidW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50LndlYmtpdEhpZGRlbiYmKGEuaGlkZGVuPSJ3ZWJraXRIaWRkZW4iLGEudmlzaWJpbGl0eUNoYW5nZT0id2Via2l0dmlzaWJpbGl0eWNoYW5nZSIpLGEuYXV0b1BsYXk9ZS5wcm94eShhLmF1dG9QbGF5LGEpLGEuYXV0b1BsYXlDbGVhcj1lLnByb3h5KGEuYXV0b1BsYXlDbGVhcixhKSxhLmNoYW5nZVNsaWRlPWUucHJveHkoYS5jaGFuZ2VTbGlkZSxhKSxhLmNsaWNrSGFuZGxlcj1lLnByb3h5KGEuY2xpY2tIYW5kbGVyLGEpLGEuc2VsZWN0SGFuZGxlcj1lLnByb3h5KGEuc2VsZWN0SGFuZGxlcixhKSxhLnNldFBvc2l0aW9uPWUucHJveHkoYS5zZXRQb3NpdGlvbixhKSxhLnN3aXBlSGFuZGxlcj1lLnByb3h5KGEuc3dpcGVIYW5kbGVyLGEpLGEuZHJhZ0hhbmRsZXI9ZS5wcm94eShhLmRyYWdIYW5kbGVyLGEpLGEua2V5SGFuZGxlcj1lLnByb3h5KGEua2V5SGFuZGxlcixhKSxhLmF1dG9QbGF5SXRlcmF0b3I9ZS5wcm94eShhLmF1dG9QbGF5SXRlcmF0b3IsYSksYS5pbnN0YW5jZVVpZD1uKyssYS5odG1sRXhwcj0vXig/OlxzKig8W1x3XFddKz4pW14+XSopJC8sYS5pbml0KCksYS5jaGVja1Jlc3BvbnNpdmUoITApfXZhciBuPTA7cmV0dXJuIHR9KCksdC5wcm90b3R5cGUuYWRkU2xpZGU9dC5wcm90b3R5cGUuc2xpY2tBZGQ9ZnVuY3Rpb24odCxuLGkpe3ZhciByPXRoaXM7aWYoImJvb2xlYW4iPT10eXBlb2YgbilpPW4sbj1udWxsO2Vsc2UgaWYoMD5ufHxuPj1yLnNsaWRlQ291bnQpcmV0dXJuITE7ci51bmxvYWQoKSwibnVtYmVyIj09dHlwZW9mIG4/MD09PW4mJjA9PT1yLiRzbGlkZXMubGVuZ3RoP2UodCkuYXBwZW5kVG8oci4kc2xpZGVUcmFjayk6aT9lKHQpLmluc2VydEJlZm9yZShyLiRzbGlkZXMuZXEobikpOmUodCkuaW5zZXJ0QWZ0ZXIoci4kc2xpZGVzLmVxKG4pKTppPT09ITA/ZSh0KS5wcmVwZW5kVG8oci4kc2xpZGVUcmFjayk6ZSh0KS5hcHBlbmRUbyhyLiRzbGlkZVRyYWNrKSxyLiRzbGlkZXM9ci4kc2xpZGVUcmFjay5jaGlsZHJlbih0aGlzLm9wdGlvbnMuc2xpZGUpLHIuJHNsaWRlVHJhY2suY2hpbGRyZW4odGhpcy5vcHRpb25zLnNsaWRlKS5kZXRhY2goKSxyLiRzbGlkZVRyYWNrLmFwcGVuZChyLiRzbGlkZXMpLHIuJHNsaWRlcy5lYWNoKGZ1bmN0aW9uKHQsbil7ZShuKS5hdHRyKCJkYXRhLXNsaWNrLWluZGV4Iix0KX0pLHIuJHNsaWRlc0NhY2hlPXIuJHNsaWRlcyxyLnJlaW5pdCgpfSx0LnByb3RvdHlwZS5hbmltYXRlSGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZigxPT09ZS5vcHRpb25zLnNsaWRlc1RvU2hvdyYmZS5vcHRpb25zLmFkYXB0aXZlSGVpZ2h0PT09ITAmJmUub3B0aW9ucy52ZXJ0aWNhbD09PSExKXt2YXIgdD1lLiRzbGlkZXMuZXEoZS5jdXJyZW50U2xpZGUpLm91dGVySGVpZ2h0KCEwKTtlLiRsaXN0LmFuaW1hdGUoe2hlaWdodDp0fSxlLm9wdGlvbnMuc3BlZWQpfX0sdC5wcm90b3R5cGUuYW5pbWF0ZVNsaWRlPWZ1bmN0aW9uKHQsbil7dmFyIGk9e30scj10aGlzO3IuYW5pbWF0ZUhlaWdodCgpLHIub3B0aW9ucy5ydGw9PT0hMCYmci5vcHRpb25zLnZlcnRpY2FsPT09ITEmJih0PS10KSxyLnRyYW5zZm9ybXNFbmFibGVkPT09ITE/ci5vcHRpb25zLnZlcnRpY2FsPT09ITE/ci4kc2xpZGVUcmFjay5hbmltYXRlKHtsZWZ0OnR9LHIub3B0aW9ucy5zcGVlZCxyLm9wdGlvbnMuZWFzaW5nLG4pOnIuJHNsaWRlVHJhY2suYW5pbWF0ZSh7dG9wOnR9LHIub3B0aW9ucy5zcGVlZCxyLm9wdGlvbnMuZWFzaW5nLG4pOnIuY3NzVHJhbnNpdGlvbnM9PT0hMT8oci5vcHRpb25zLnJ0bD09PSEwJiYoci5jdXJyZW50TGVmdD0tci5jdXJyZW50TGVmdCksZSh7YW5pbVN0YXJ0OnIuY3VycmVudExlZnR9KS5hbmltYXRlKHthbmltU3RhcnQ6dH0se2R1cmF0aW9uOnIub3B0aW9ucy5zcGVlZCxlYXNpbmc6ci5vcHRpb25zLmVhc2luZyxzdGVwOmZ1bmN0aW9uKGUpe2U9TWF0aC5jZWlsKGUpLHIub3B0aW9ucy52ZXJ0aWNhbD09PSExPyhpW3IuYW5pbVR5cGVdPSJ0cmFuc2xhdGUoIitlKyJweCwgMHB4KSIsci4kc2xpZGVUcmFjay5jc3MoaSkpOihpW3IuYW5pbVR5cGVdPSJ0cmFuc2xhdGUoMHB4LCIrZSsicHgpIixyLiRzbGlkZVRyYWNrLmNzcyhpKSl9LGNvbXBsZXRlOmZ1bmN0aW9uKCl7biYmbi5jYWxsKCl9fSkpOihyLmFwcGx5VHJhbnNpdGlvbigpLHQ9TWF0aC5jZWlsKHQpLHIub3B0aW9ucy52ZXJ0aWNhbD09PSExP2lbci5hbmltVHlwZV09InRyYW5zbGF0ZTNkKCIrdCsicHgsIDBweCwgMHB4KSI6aVtyLmFuaW1UeXBlXT0idHJhbnNsYXRlM2QoMHB4LCIrdCsicHgsIDBweCkiLHIuJHNsaWRlVHJhY2suY3NzKGkpLG4mJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLmRpc2FibGVUcmFuc2l0aW9uKCksbi5jYWxsKCl9LHIub3B0aW9ucy5zcGVlZCkpfSx0LnByb3RvdHlwZS5hc05hdkZvcj1mdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bnVsbCE9PW4ub3B0aW9ucy5hc05hdkZvcj9lKG4ub3B0aW9ucy5hc05hdkZvcikuc2xpY2soImdldFNsaWNrIik6bnVsbDtudWxsIT09aSYmaS5zbGlkZUhhbmRsZXIodCwhMCl9LHQucHJvdG90eXBlLmFwcGx5VHJhbnNpdGlvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49e307dC5vcHRpb25zLmZhZGU9PT0hMT9uW3QudHJhbnNpdGlvblR5cGVdPXQudHJhbnNmb3JtVHlwZSsiICIrdC5vcHRpb25zLnNwZWVkKyJtcyAiK3Qub3B0aW9ucy5jc3NFYXNlOm5bdC50cmFuc2l0aW9uVHlwZV09Im9wYWNpdHkgIit0Lm9wdGlvbnMuc3BlZWQrIm1zICIrdC5vcHRpb25zLmNzc0Vhc2UsdC5vcHRpb25zLmZhZGU9PT0hMT90LiRzbGlkZVRyYWNrLmNzcyhuKTp0LiRzbGlkZXMuZXEoZSkuY3NzKG4pfSx0LnByb3RvdHlwZS5hdXRvUGxheT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5hdXRvUGxheVRpbWVyJiZjbGVhckludGVydmFsKGUuYXV0b1BsYXlUaW1lciksZS5zbGlkZUNvdW50PmUub3B0aW9ucy5zbGlkZXNUb1Nob3cmJmUucGF1c2VkIT09ITAmJihlLmF1dG9QbGF5VGltZXI9c2V0SW50ZXJ2YWwoZS5hdXRvUGxheUl0ZXJhdG9yLGUub3B0aW9ucy5hdXRvcGxheVNwZWVkKSl9LHQucHJvdG90eXBlLmF1dG9QbGF5Q2xlYXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuYXV0b1BsYXlUaW1lciYmY2xlYXJJbnRlcnZhbChlLmF1dG9QbGF5VGltZXIpfSx0LnByb3RvdHlwZS5hdXRvUGxheUl0ZXJhdG9yPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLm9wdGlvbnMuaW5maW5pdGU9PT0hMT8xPT09ZS5kaXJlY3Rpb24/KGUuY3VycmVudFNsaWRlKzE9PT1lLnNsaWRlQ291bnQtMSYmKGUuZGlyZWN0aW9uPTApLGUuc2xpZGVIYW5kbGVyKGUuY3VycmVudFNsaWRlK2Uub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCkpOihlLmN1cnJlbnRTbGlkZS0xPT09MCYmKGUuZGlyZWN0aW9uPTEpLGUuc2xpZGVIYW5kbGVyKGUuY3VycmVudFNsaWRlLWUub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCkpOmUuc2xpZGVIYW5kbGVyKGUuY3VycmVudFNsaWRlK2Uub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCl9LHQucHJvdG90eXBlLmJ1aWxkQXJyb3dzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lm9wdGlvbnMuYXJyb3dzPT09ITAmJnQuc2xpZGVDb3VudD50Lm9wdGlvbnMuc2xpZGVzVG9TaG93JiYodC4kcHJldkFycm93PWUodC5vcHRpb25zLnByZXZBcnJvdyksdC4kbmV4dEFycm93PWUodC5vcHRpb25zLm5leHRBcnJvdyksdC5odG1sRXhwci50ZXN0KHQub3B0aW9ucy5wcmV2QXJyb3cpJiZ0LiRwcmV2QXJyb3cuYXBwZW5kVG8odC5vcHRpb25zLmFwcGVuZEFycm93cyksdC5odG1sRXhwci50ZXN0KHQub3B0aW9ucy5uZXh0QXJyb3cpJiZ0LiRuZXh0QXJyb3cuYXBwZW5kVG8odC5vcHRpb25zLmFwcGVuZEFycm93cyksdC5vcHRpb25zLmluZmluaXRlIT09ITAmJnQuJHByZXZBcnJvdy5hZGRDbGFzcygic2xpY2stZGlzYWJsZWQiKSl9LHQucHJvdG90eXBlLmJ1aWxkRG90cz1mdW5jdGlvbigpe3ZhciB0LG4saT10aGlzO2lmKGkub3B0aW9ucy5kb3RzPT09ITAmJmkuc2xpZGVDb3VudD5pLm9wdGlvbnMuc2xpZGVzVG9TaG93KXtmb3Iobj0nPHVsIGNsYXNzPSInK2kub3B0aW9ucy5kb3RzQ2xhc3MrJyI+Jyx0PTA7dDw9aS5nZXREb3RDb3VudCgpO3QrPTEpbis9IjxsaT4iK2kub3B0aW9ucy5jdXN0b21QYWdpbmcuY2FsbCh0aGlzLGksdCkrIjwvbGk+IjtuKz0iPC91bD4iLGkuJGRvdHM9ZShuKS5hcHBlbmRUbyhpLm9wdGlvbnMuYXBwZW5kRG90cyksaS4kZG90cy5maW5kKCJsaSIpLmZpcnN0KCkuYWRkQ2xhc3MoInNsaWNrLWFjdGl2ZSIpLmF0dHIoImFyaWEtaGlkZGVuIiwiZmFsc2UiKX19LHQucHJvdG90eXBlLmJ1aWxkT3V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LiRzbGlkZXM9dC4kc2xpZGVyLmNoaWxkcmVuKHQub3B0aW9ucy5zbGlkZSsiOm5vdCguc2xpY2stY2xvbmVkKSIpLmFkZENsYXNzKCJzbGljay1zbGlkZSIpLHQuc2xpZGVDb3VudD10LiRzbGlkZXMubGVuZ3RoLHQuJHNsaWRlcy5lYWNoKGZ1bmN0aW9uKHQsbil7ZShuKS5hdHRyKCJkYXRhLXNsaWNrLWluZGV4Iix0KX0pLHQuJHNsaWRlc0NhY2hlPXQuJHNsaWRlcyx0LiRzbGlkZXIuYWRkQ2xhc3MoInNsaWNrLXNsaWRlciIpLHQuJHNsaWRlVHJhY2s9MD09PXQuc2xpZGVDb3VudD9lKCc8ZGl2IGNsYXNzPSJzbGljay10cmFjayIvPicpLmFwcGVuZFRvKHQuJHNsaWRlcik6dC4kc2xpZGVzLndyYXBBbGwoJzxkaXYgY2xhc3M9InNsaWNrLXRyYWNrIi8+JykucGFyZW50KCksdC4kbGlzdD10LiRzbGlkZVRyYWNrLndyYXAoJzxkaXYgYXJpYS1saXZlPSJwb2xpdGUiIGNsYXNzPSJzbGljay1saXN0Ii8+JykucGFyZW50KCksdC4kc2xpZGVUcmFjay5jc3MoIm9wYWNpdHkiLDApLCh0Lm9wdGlvbnMuY2VudGVyTW9kZT09PSEwfHx0Lm9wdGlvbnMuc3dpcGVUb1NsaWRlPT09ITApJiYodC5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsPTEpLGUoImltZ1tkYXRhLWxhenldIix0LiRzbGlkZXIpLm5vdCgiW3NyY10iKS5hZGRDbGFzcygic2xpY2stbG9hZGluZyIpLHQuc2V0dXBJbmZpbml0ZSgpLHQuYnVpbGRBcnJvd3MoKSx0LmJ1aWxkRG90cygpLHQudXBkYXRlRG90cygpLHQub3B0aW9ucy5hY2Nlc3NpYmlsaXR5PT09ITAmJnQuJGxpc3QucHJvcCgidGFiSW5kZXgiLDApLHQuc2V0U2xpZGVDbGFzc2VzKCJudW1iZXIiPT10eXBlb2YgdGhpcy5jdXJyZW50U2xpZGU/dGhpcy5jdXJyZW50U2xpZGU6MCksdC5vcHRpb25zLmRyYWdnYWJsZT09PSEwJiZ0LiRsaXN0LmFkZENsYXNzKCJkcmFnZ2FibGUiKX0sdC5wcm90b3R5cGUuY2hlY2tSZXNwb25zaXZlPWZ1bmN0aW9uKHQpe3ZhciBuLGkscixzPXRoaXMsbz1zLiRzbGlkZXIud2lkdGgoKSxhPXdpbmRvdy5pbm5lcldpZHRofHxlKHdpbmRvdykud2lkdGgoKTtpZigid2luZG93Ij09PXMucmVzcG9uZFRvP3I9YToic2xpZGVyIj09PXMucmVzcG9uZFRvP3I9bzoibWluIj09PXMucmVzcG9uZFRvJiYocj1NYXRoLm1pbihhLG8pKSxzLm9yaWdpbmFsU2V0dGluZ3MucmVzcG9uc2l2ZSYmcy5vcmlnaW5hbFNldHRpbmdzLnJlc3BvbnNpdmUubGVuZ3RoPi0xJiZudWxsIT09cy5vcmlnaW5hbFNldHRpbmdzLnJlc3BvbnNpdmUpe2k9bnVsbDtmb3IobiBpbiBzLmJyZWFrcG9pbnRzKXMuYnJlYWtwb2ludHMuaGFzT3duUHJvcGVydHkobikmJihzLm9yaWdpbmFsU2V0dGluZ3MubW9iaWxlRmlyc3Q9PT0hMT9yPHMuYnJlYWtwb2ludHNbbl0mJihpPXMuYnJlYWtwb2ludHNbbl0pOnI+cy5icmVha3BvaW50c1tuXSYmKGk9cy5icmVha3BvaW50c1tuXSkpO251bGwhPT1pP251bGwhPT1zLmFjdGl2ZUJyZWFrcG9pbnQ/aSE9PXMuYWN0aXZlQnJlYWtwb2ludCYmKHMuYWN0aXZlQnJlYWtwb2ludD1pLCJ1bnNsaWNrIj09PXMuYnJlYWtwb2ludFNldHRpbmdzW2ldP3MudW5zbGljaygpOihzLm9wdGlvbnM9ZS5leHRlbmQoe30scy5vcmlnaW5hbFNldHRpbmdzLHMuYnJlYWtwb2ludFNldHRpbmdzW2ldKSx0PT09ITAmJihzLmN1cnJlbnRTbGlkZT1zLm9wdGlvbnMuaW5pdGlhbFNsaWRlKSxzLnJlZnJlc2goKSkpOihzLmFjdGl2ZUJyZWFrcG9pbnQ9aSwidW5zbGljayI9PT1zLmJyZWFrcG9pbnRTZXR0aW5nc1tpXT9zLnVuc2xpY2soKToocy5vcHRpb25zPWUuZXh0ZW5kKHt9LHMub3JpZ2luYWxTZXR0aW5ncyxzLmJyZWFrcG9pbnRTZXR0aW5nc1tpXSksdD09PSEwJiYocy5jdXJyZW50U2xpZGU9cy5vcHRpb25zLmluaXRpYWxTbGlkZSkscy5yZWZyZXNoKCkpKTpudWxsIT09cy5hY3RpdmVCcmVha3BvaW50JiYocy5hY3RpdmVCcmVha3BvaW50PW51bGwscy5vcHRpb25zPXMub3JpZ2luYWxTZXR0aW5ncyx0PT09ITAmJihzLmN1cnJlbnRTbGlkZT1zLm9wdGlvbnMuaW5pdGlhbFNsaWRlKSxzLnJlZnJlc2goKSl9fSx0LnByb3RvdHlwZS5jaGFuZ2VTbGlkZT1mdW5jdGlvbih0LG4pe3ZhciBpLHIscyxvPXRoaXMsYT1lKHQudGFyZ2V0KTtzd2l0Y2goYS5pcygiYSIpJiZ0LnByZXZlbnREZWZhdWx0KCkscz1vLnNsaWRlQ291bnQlby5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsIT09MCxpPXM/MDooby5zbGlkZUNvdW50LW8uY3VycmVudFNsaWRlKSVvLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwsdC5kYXRhLm1lc3NhZ2Upe2Nhc2UicHJldmlvdXMiOnI9MD09PWk/by5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsOm8ub3B0aW9ucy5zbGlkZXNUb1Nob3ctaSxvLnNsaWRlQ291bnQ+by5vcHRpb25zLnNsaWRlc1RvU2hvdyYmby5zbGlkZUhhbmRsZXIoby5jdXJyZW50U2xpZGUtciwhMSxuKTticmVhaztjYXNlIm5leHQiOnI9MD09PWk/by5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsOmksby5zbGlkZUNvdW50Pm8ub3B0aW9ucy5zbGlkZXNUb1Nob3cmJm8uc2xpZGVIYW5kbGVyKG8uY3VycmVudFNsaWRlK3IsITEsbik7YnJlYWs7Y2FzZSJpbmRleCI6dmFyIGw9MD09PXQuZGF0YS5pbmRleD8wOnQuZGF0YS5pbmRleHx8ZSh0LnRhcmdldCkucGFyZW50KCkuaW5kZXgoKSpvLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGw7by5zbGlkZUhhbmRsZXIoby5jaGVja05hdmlnYWJsZShsKSwhMSxuKTticmVhaztkZWZhdWx0OnJldHVybn19LHQucHJvdG90eXBlLmNoZWNrTmF2aWdhYmxlPWZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzO2lmKHQ9aS5nZXROYXZpZ2FibGVJbmRleGVzKCksbj0wLGU+dFt0Lmxlbmd0aC0xXSllPXRbdC5sZW5ndGgtMV07ZWxzZSBmb3IodmFyIHIgaW4gdCl7aWYoZTx0W3JdKXtlPW47YnJlYWt9bj10W3JdfXJldHVybiBlfSx0LnByb3RvdHlwZS5jbGlja0hhbmRsZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LnNob3VsZENsaWNrPT09ITEmJihlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUuc3RvcFByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpKX0sdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5hdXRvUGxheUNsZWFyKCksdC50b3VjaE9iamVjdD17fSxlKCIuc2xpY2stY2xvbmVkIix0LiRzbGlkZXIpLnJlbW92ZSgpLHQuJGRvdHMmJnQuJGRvdHMucmVtb3ZlKCksdC4kcHJldkFycm93JiYib2JqZWN0IiE9dHlwZW9mIHQub3B0aW9ucy5wcmV2QXJyb3cmJnQuJHByZXZBcnJvdy5yZW1vdmUoKSx0LiRuZXh0QXJyb3cmJiJvYmplY3QiIT10eXBlb2YgdC5vcHRpb25zLm5leHRBcnJvdyYmdC4kbmV4dEFycm93LnJlbW92ZSgpLHQuJHNsaWRlcy5yZW1vdmVDbGFzcygic2xpY2stc2xpZGUgc2xpY2stYWN0aXZlIHNsaWNrLWNlbnRlciBzbGljay12aXNpYmxlIikuYXR0cigiYXJpYS1oaWRkZW4iLCJ0cnVlIikucmVtb3ZlQXR0cigiZGF0YS1zbGljay1pbmRleCIpLmNzcyh7cG9zaXRpb246IiIsbGVmdDoiIix0b3A6IiIsekluZGV4OiIiLG9wYWNpdHk6IiIsd2lkdGg6IiJ9KSx0LiRzbGlkZXIucmVtb3ZlQ2xhc3MoInNsaWNrLXNsaWRlciIpLHQuJHNsaWRlci5yZW1vdmVDbGFzcygic2xpY2staW5pdGlhbGl6ZWQiKSx0LiRsaXN0Lm9mZigiLnNsaWNrIiksZSh3aW5kb3cpLm9mZigiLnNsaWNrLSIrdC5pbnN0YW5jZVVpZCksZShkb2N1bWVudCkub2ZmKCIuc2xpY2stIit0Lmluc3RhbmNlVWlkKSx0LiRzbGlkZXIuaHRtbCh0LiRzbGlkZXMpfSx0LnByb3RvdHlwZS5kaXNhYmxlVHJhbnNpdGlvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49e307blt0LnRyYW5zaXRpb25UeXBlXT0iIix0Lm9wdGlvbnMuZmFkZT09PSExP3QuJHNsaWRlVHJhY2suY3NzKG4pOnQuJHNsaWRlcy5lcShlKS5jc3Mobil9LHQucHJvdG90eXBlLmZhZGVTbGlkZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7bi5jc3NUcmFuc2l0aW9ucz09PSExPyhuLiRzbGlkZXMuZXEoZSkuY3NzKHt6SW5kZXg6MWUzfSksbi4kc2xpZGVzLmVxKGUpLmFuaW1hdGUoe29wYWNpdHk6MX0sbi5vcHRpb25zLnNwZWVkLG4ub3B0aW9ucy5lYXNpbmcsdCkpOihuLmFwcGx5VHJhbnNpdGlvbihlKSxuLiRzbGlkZXMuZXEoZSkuY3NzKHtvcGFjaXR5OjEsekluZGV4OjFlM30pLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLmRpc2FibGVUcmFuc2l0aW9uKGUpLHQuY2FsbCgpfSxuLm9wdGlvbnMuc3BlZWQpKX0sdC5wcm90b3R5cGUuZmlsdGVyU2xpZGVzPXQucHJvdG90eXBlLnNsaWNrRmlsdGVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7bnVsbCE9PWUmJih0LnVubG9hZCgpLHQuJHNsaWRlVHJhY2suY2hpbGRyZW4odGhpcy5vcHRpb25zLnNsaWRlKS5kZXRhY2goKSx0LiRzbGlkZXNDYWNoZS5maWx0ZXIoZSkuYXBwZW5kVG8odC4kc2xpZGVUcmFjayksdC5yZWluaXQoKSl9LHQucHJvdG90eXBlLmdldEN1cnJlbnQ9dC5wcm90b3R5cGUuc2xpY2tDdXJyZW50U2xpZGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBlLmN1cnJlbnRTbGlkZX0sdC5wcm90b3R5cGUuZ2V0RG90Q291bnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9MCxuPTAsaT0wO2lmKGUub3B0aW9ucy5pbmZpbml0ZT09PSEwKWk9TWF0aC5jZWlsKGUuc2xpZGVDb3VudC9lLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwpO2Vsc2UgaWYoZS5vcHRpb25zLmNlbnRlck1vZGU9PT0hMClpPWUuc2xpZGVDb3VudDtlbHNlIGZvcig7dDxlLnNsaWRlQ291bnQ7KSsraSwKdD1uK2Uub3B0aW9ucy5zbGlkZXNUb1Nob3csbis9ZS5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsPD1lLm9wdGlvbnMuc2xpZGVzVG9TaG93P2Uub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDplLm9wdGlvbnMuc2xpZGVzVG9TaG93O3JldHVybiBpLTF9LHQucHJvdG90eXBlLmdldExlZnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpcyxzPTA7cmV0dXJuIHIuc2xpZGVPZmZzZXQ9MCxuPXIuJHNsaWRlcy5maXJzdCgpLm91dGVySGVpZ2h0KCksci5vcHRpb25zLmluZmluaXRlPT09ITA/KHIuc2xpZGVDb3VudD5yLm9wdGlvbnMuc2xpZGVzVG9TaG93JiYoci5zbGlkZU9mZnNldD1yLnNsaWRlV2lkdGgqci5vcHRpb25zLnNsaWRlc1RvU2hvdyotMSxzPW4qci5vcHRpb25zLnNsaWRlc1RvU2hvdyotMSksci5zbGlkZUNvdW50JXIub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCE9PTAmJmUrci5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsPnIuc2xpZGVDb3VudCYmci5zbGlkZUNvdW50PnIub3B0aW9ucy5zbGlkZXNUb1Nob3cmJihlPnIuc2xpZGVDb3VudD8oci5zbGlkZU9mZnNldD0oci5vcHRpb25zLnNsaWRlc1RvU2hvdy0oZS1yLnNsaWRlQ291bnQpKSpyLnNsaWRlV2lkdGgqLTEscz0oci5vcHRpb25zLnNsaWRlc1RvU2hvdy0oZS1yLnNsaWRlQ291bnQpKSpuKi0xKTooci5zbGlkZU9mZnNldD1yLnNsaWRlQ291bnQlci5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKnIuc2xpZGVXaWR0aCotMSxzPXIuc2xpZGVDb3VudCVyLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwqbiotMSkpKTplK3Iub3B0aW9ucy5zbGlkZXNUb1Nob3c+ci5zbGlkZUNvdW50JiYoci5zbGlkZU9mZnNldD0oZStyLm9wdGlvbnMuc2xpZGVzVG9TaG93LXIuc2xpZGVDb3VudCkqci5zbGlkZVdpZHRoLHM9KGUrci5vcHRpb25zLnNsaWRlc1RvU2hvdy1yLnNsaWRlQ291bnQpKm4pLHIuc2xpZGVDb3VudDw9ci5vcHRpb25zLnNsaWRlc1RvU2hvdyYmKHIuc2xpZGVPZmZzZXQ9MCxzPTApLHIub3B0aW9ucy5jZW50ZXJNb2RlPT09ITAmJnIub3B0aW9ucy5pbmZpbml0ZT09PSEwP3Iuc2xpZGVPZmZzZXQrPXIuc2xpZGVXaWR0aCpNYXRoLmZsb29yKHIub3B0aW9ucy5zbGlkZXNUb1Nob3cvMiktci5zbGlkZVdpZHRoOnIub3B0aW9ucy5jZW50ZXJNb2RlPT09ITAmJihyLnNsaWRlT2Zmc2V0PTAsci5zbGlkZU9mZnNldCs9ci5zbGlkZVdpZHRoKk1hdGguZmxvb3Ioci5vcHRpb25zLnNsaWRlc1RvU2hvdy8yKSksdD1yLm9wdGlvbnMudmVydGljYWw9PT0hMT9lKnIuc2xpZGVXaWR0aCotMStyLnNsaWRlT2Zmc2V0OmUqbiotMStzLHIub3B0aW9ucy52YXJpYWJsZVdpZHRoPT09ITAmJihpPXIuc2xpZGVDb3VudDw9ci5vcHRpb25zLnNsaWRlc1RvU2hvd3x8ci5vcHRpb25zLmluZmluaXRlPT09ITE/ci4kc2xpZGVUcmFjay5jaGlsZHJlbigiLnNsaWNrLXNsaWRlIikuZXEoZSk6ci4kc2xpZGVUcmFjay5jaGlsZHJlbigiLnNsaWNrLXNsaWRlIikuZXEoZStyLm9wdGlvbnMuc2xpZGVzVG9TaG93KSx0PWlbMF0/LTEqaVswXS5vZmZzZXRMZWZ0OjAsci5vcHRpb25zLmNlbnRlck1vZGU9PT0hMCYmKGk9ci5vcHRpb25zLmluZmluaXRlPT09ITE/ci4kc2xpZGVUcmFjay5jaGlsZHJlbigiLnNsaWNrLXNsaWRlIikuZXEoZSk6ci4kc2xpZGVUcmFjay5jaGlsZHJlbigiLnNsaWNrLXNsaWRlIikuZXEoZStyLm9wdGlvbnMuc2xpZGVzVG9TaG93KzEpLHQ9aVswXT8tMSppWzBdLm9mZnNldExlZnQ6MCx0Kz0oci4kbGlzdC53aWR0aCgpLWkub3V0ZXJXaWR0aCgpKS8yKSksdH0sdC5wcm90b3R5cGUuZ2V0T3B0aW9uPXQucHJvdG90eXBlLnNsaWNrR2V0T3B0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHQub3B0aW9uc1tlXX0sdC5wcm90b3R5cGUuZ2V0TmF2aWdhYmxlSW5kZXhlcz1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPTAsaT0wLHI9W107Zm9yKHQub3B0aW9ucy5pbmZpbml0ZT09PSExPyhlPXQuc2xpZGVDb3VudC10Lm9wdGlvbnMuc2xpZGVzVG9TaG93KzEsdC5vcHRpb25zLmNlbnRlck1vZGU9PT0hMCYmKGU9dC5zbGlkZUNvdW50KSk6KG49LTEqdC5zbGlkZUNvdW50LGk9LTEqdC5zbGlkZUNvdW50LGU9Mip0LnNsaWRlQ291bnQpO2U+bjspci5wdXNoKG4pLG49aSt0Lm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwsaSs9dC5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsPD10Lm9wdGlvbnMuc2xpZGVzVG9TaG93P3Qub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDp0Lm9wdGlvbnMuc2xpZGVzVG9TaG93O3JldHVybiByfSx0LnByb3RvdHlwZS5nZXRTbGljaz1mdW5jdGlvbigpe3JldHVybiB0aGlzfSx0LnByb3RvdHlwZS5nZXRTbGlkZUNvdW50PWZ1bmN0aW9uKCl7dmFyIHQsbixpLHI9dGhpcztyZXR1cm4gaT1yLm9wdGlvbnMuY2VudGVyTW9kZT09PSEwP3Iuc2xpZGVXaWR0aCpNYXRoLmZsb29yKHIub3B0aW9ucy5zbGlkZXNUb1Nob3cvMik6MCxyLm9wdGlvbnMuc3dpcGVUb1NsaWRlPT09ITA/KHIuJHNsaWRlVHJhY2suZmluZCgiLnNsaWNrLXNsaWRlIikuZWFjaChmdW5jdGlvbih0LHMpe3JldHVybiBzLm9mZnNldExlZnQtaStlKHMpLm91dGVyV2lkdGgoKS8yPi0xKnIuc3dpcGVMZWZ0PyhuPXMsITEpOnZvaWQgMH0pLHQ9TWF0aC5hYnMoZShuKS5hdHRyKCJkYXRhLXNsaWNrLWluZGV4Iiktci5jdXJyZW50U2xpZGUpfHwxKTpyLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGx9LHQucHJvdG90eXBlLmdvVG89dC5wcm90b3R5cGUuc2xpY2tHb1RvPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztuLmNoYW5nZVNsaWRlKHtkYXRhOnttZXNzYWdlOiJpbmRleCIsaW5kZXg6cGFyc2VJbnQoZSl9fSx0KX0sdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7ZSh0LiRzbGlkZXIpLmhhc0NsYXNzKCJzbGljay1pbml0aWFsaXplZCIpfHwoZSh0LiRzbGlkZXIpLmFkZENsYXNzKCJzbGljay1pbml0aWFsaXplZCIpLHQuYnVpbGRPdXQoKSx0LnNldFByb3BzKCksdC5zdGFydExvYWQoKSx0LmxvYWRTbGlkZXIoKSx0LmluaXRpYWxpemVFdmVudHMoKSx0LnVwZGF0ZUFycm93cygpLHQudXBkYXRlRG90cygpKSx0LiRzbGlkZXIudHJpZ2dlcigiaW5pdCIsW3RdKX0sdC5wcm90b3R5cGUuaW5pdEFycm93RXZlbnRzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLm9wdGlvbnMuYXJyb3dzPT09ITAmJmUuc2xpZGVDb3VudD5lLm9wdGlvbnMuc2xpZGVzVG9TaG93JiYoZS4kcHJldkFycm93Lm9uKCJjbGljay5zbGljayIse21lc3NhZ2U6InByZXZpb3VzIn0sZS5jaGFuZ2VTbGlkZSksZS4kbmV4dEFycm93Lm9uKCJjbGljay5zbGljayIse21lc3NhZ2U6Im5leHQifSxlLmNoYW5nZVNsaWRlKSl9LHQucHJvdG90eXBlLmluaXREb3RFdmVudHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3Qub3B0aW9ucy5kb3RzPT09ITAmJnQuc2xpZGVDb3VudD50Lm9wdGlvbnMuc2xpZGVzVG9TaG93JiZlKCJsaSIsdC4kZG90cykub24oImNsaWNrLnNsaWNrIix7bWVzc2FnZToiaW5kZXgifSx0LmNoYW5nZVNsaWRlKSx0Lm9wdGlvbnMuZG90cz09PSEwJiZ0Lm9wdGlvbnMucGF1c2VPbkRvdHNIb3Zlcj09PSEwJiZ0Lm9wdGlvbnMuYXV0b3BsYXk9PT0hMCYmZSgibGkiLHQuJGRvdHMpLm9uKCJtb3VzZWVudGVyLnNsaWNrIixmdW5jdGlvbigpe3QucGF1c2VkPSEwLHQuYXV0b1BsYXlDbGVhcigpfSkub24oIm1vdXNlbGVhdmUuc2xpY2siLGZ1bmN0aW9uKCl7dC5wYXVzZWQ9ITEsdC5hdXRvUGxheSgpfSl9LHQucHJvdG90eXBlLmluaXRpYWxpemVFdmVudHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuaW5pdEFycm93RXZlbnRzKCksdC5pbml0RG90RXZlbnRzKCksdC4kbGlzdC5vbigidG91Y2hzdGFydC5zbGljayBtb3VzZWRvd24uc2xpY2siLHthY3Rpb246InN0YXJ0In0sdC5zd2lwZUhhbmRsZXIpLHQuJGxpc3Qub24oInRvdWNobW92ZS5zbGljayBtb3VzZW1vdmUuc2xpY2siLHthY3Rpb246Im1vdmUifSx0LnN3aXBlSGFuZGxlciksdC4kbGlzdC5vbigidG91Y2hlbmQuc2xpY2sgbW91c2V1cC5zbGljayIse2FjdGlvbjoiZW5kIn0sdC5zd2lwZUhhbmRsZXIpLHQuJGxpc3Qub24oInRvdWNoY2FuY2VsLnNsaWNrIG1vdXNlbGVhdmUuc2xpY2siLHthY3Rpb246ImVuZCJ9LHQuc3dpcGVIYW5kbGVyKSx0LiRsaXN0Lm9uKCJjbGljay5zbGljayIsdC5jbGlja0hhbmRsZXIpLHQub3B0aW9ucy5hdXRvcGxheT09PSEwJiYoZShkb2N1bWVudCkub24odC52aXNpYmlsaXR5Q2hhbmdlLGZ1bmN0aW9uKCl7dC52aXNpYmlsaXR5KCl9KSx0Lm9wdGlvbnMucGF1c2VPbkhvdmVyPT09ITAmJih0LiRsaXN0Lm9uKCJtb3VzZWVudGVyLnNsaWNrIixmdW5jdGlvbigpe3QucGF1c2VkPSEwLHQuYXV0b1BsYXlDbGVhcigpfSksdC4kbGlzdC5vbigibW91c2VsZWF2ZS5zbGljayIsZnVuY3Rpb24oKXt0LnBhdXNlZD0hMSx0LmF1dG9QbGF5KCl9KSkpLHQub3B0aW9ucy5hY2Nlc3NpYmlsaXR5PT09ITAmJnQuJGxpc3Qub24oImtleWRvd24uc2xpY2siLHQua2V5SGFuZGxlciksdC5vcHRpb25zLmZvY3VzT25TZWxlY3Q9PT0hMCYmZSh0LiRzbGlkZVRyYWNrKS5jaGlsZHJlbigpLm9uKCJjbGljay5zbGljayIsdC5zZWxlY3RIYW5kbGVyKSxlKHdpbmRvdykub24oIm9yaWVudGF0aW9uY2hhbmdlLnNsaWNrLnNsaWNrLSIrdC5pbnN0YW5jZVVpZCxmdW5jdGlvbigpe3QuY2hlY2tSZXNwb25zaXZlKCksdC5zZXRQb3NpdGlvbigpfSksZSh3aW5kb3cpLm9uKCJyZXNpemUuc2xpY2suc2xpY2stIit0Lmluc3RhbmNlVWlkLGZ1bmN0aW9uKCl7ZSh3aW5kb3cpLndpZHRoKCkhPT10LndpbmRvd1dpZHRoJiYoY2xlYXJUaW1lb3V0KHQud2luZG93RGVsYXkpLHQud2luZG93RGVsYXk9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LndpbmRvd1dpZHRoPWUod2luZG93KS53aWR0aCgpLHQuY2hlY2tSZXNwb25zaXZlKCksdC5zZXRQb3NpdGlvbigpfSw1MCkpfSksZSgiKltkcmFnZ2FibGUhPXRydWVdIix0LiRzbGlkZVRyYWNrKS5vbigiZHJhZ3N0YXJ0IixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9KSxlKHdpbmRvdykub24oImxvYWQuc2xpY2suc2xpY2stIit0Lmluc3RhbmNlVWlkLHQuc2V0UG9zaXRpb24pLGUoZG9jdW1lbnQpLm9uKCJyZWFkeS5zbGljay5zbGljay0iK3QuaW5zdGFuY2VVaWQsdC5zZXRQb3NpdGlvbil9LHQucHJvdG90eXBlLmluaXRVST1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5vcHRpb25zLmFycm93cz09PSEwJiZlLnNsaWRlQ291bnQ+ZS5vcHRpb25zLnNsaWRlc1RvU2hvdyYmKGUuJHByZXZBcnJvdy5zaG93KCksZS4kbmV4dEFycm93LnNob3coKSksZS5vcHRpb25zLmRvdHM9PT0hMCYmZS5zbGlkZUNvdW50PmUub3B0aW9ucy5zbGlkZXNUb1Nob3cmJmUuJGRvdHMuc2hvdygpLGUub3B0aW9ucy5hdXRvcGxheT09PSEwJiZlLmF1dG9QbGF5KCl9LHQucHJvdG90eXBlLmtleUhhbmRsZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczszNz09PWUua2V5Q29kZSYmdC5vcHRpb25zLmFjY2Vzc2liaWxpdHk9PT0hMD90LmNoYW5nZVNsaWRlKHtkYXRhOnttZXNzYWdlOiJwcmV2aW91cyJ9fSk6Mzk9PT1lLmtleUNvZGUmJnQub3B0aW9ucy5hY2Nlc3NpYmlsaXR5PT09ITAmJnQuY2hhbmdlU2xpZGUoe2RhdGE6e21lc3NhZ2U6Im5leHQifX0pfSx0LnByb3RvdHlwZS5sYXp5TG9hZD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7ZSgiaW1nW2RhdGEtbGF6eV0iLHQpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLG49ZSh0aGlzKS5hdHRyKCJkYXRhLWxhenkiKTt0LmxvYWQoZnVuY3Rpb24oKXt0LmFuaW1hdGUoe29wYWNpdHk6MX0sMjAwKX0pLmNzcyh7b3BhY2l0eTowfSkuYXR0cigic3JjIixuKS5yZW1vdmVBdHRyKCJkYXRhLWxhenkiKS5yZW1vdmVDbGFzcygic2xpY2stbG9hZGluZyIpfSl9dmFyIG4saSxyLHMsbz10aGlzO28ub3B0aW9ucy5jZW50ZXJNb2RlPT09ITA/by5vcHRpb25zLmluZmluaXRlPT09ITA/KHI9by5jdXJyZW50U2xpZGUrKG8ub3B0aW9ucy5zbGlkZXNUb1Nob3cvMisxKSxzPXIrby5vcHRpb25zLnNsaWRlc1RvU2hvdysyKToocj1NYXRoLm1heCgwLG8uY3VycmVudFNsaWRlLShvLm9wdGlvbnMuc2xpZGVzVG9TaG93LzIrMSkpLHM9Misoby5vcHRpb25zLnNsaWRlc1RvU2hvdy8yKzEpK28uY3VycmVudFNsaWRlKToocj1vLm9wdGlvbnMuaW5maW5pdGU/by5vcHRpb25zLnNsaWRlc1RvU2hvdytvLmN1cnJlbnRTbGlkZTpvLmN1cnJlbnRTbGlkZSxzPXIrby5vcHRpb25zLnNsaWRlc1RvU2hvdyxvLm9wdGlvbnMuZmFkZT09PSEwJiYocj4wJiZyLS0sczw9by5zbGlkZUNvdW50JiZzKyspKSxuPW8uJHNsaWRlci5maW5kKCIuc2xpY2stc2xpZGUiKS5zbGljZShyLHMpLHQobiksby5zbGlkZUNvdW50PD1vLm9wdGlvbnMuc2xpZGVzVG9TaG93PyhpPW8uJHNsaWRlci5maW5kKCIuc2xpY2stc2xpZGUiKSx0KGkpKTpvLmN1cnJlbnRTbGlkZT49by5zbGlkZUNvdW50LW8ub3B0aW9ucy5zbGlkZXNUb1Nob3c/KGk9by4kc2xpZGVyLmZpbmQoIi5zbGljay1jbG9uZWQiKS5zbGljZSgwLG8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpLHQoaSkpOjA9PT1vLmN1cnJlbnRTbGlkZSYmKGk9by4kc2xpZGVyLmZpbmQoIi5zbGljay1jbG9uZWQiKS5zbGljZSgtMSpvLm9wdGlvbnMuc2xpZGVzVG9TaG93KSx0KGkpKX0sdC5wcm90b3R5cGUubG9hZFNsaWRlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5zZXRQb3NpdGlvbigpLGUuJHNsaWRlVHJhY2suY3NzKHtvcGFjaXR5OjF9KSxlLiRzbGlkZXIucmVtb3ZlQ2xhc3MoInNsaWNrLWxvYWRpbmciKSxlLmluaXRVSSgpLCJwcm9ncmVzc2l2ZSI9PT1lLm9wdGlvbnMubGF6eUxvYWQmJmUucHJvZ3Jlc3NpdmVMYXp5TG9hZCgpfSx0LnByb3RvdHlwZS5uZXh0PXQucHJvdG90eXBlLnNsaWNrTmV4dD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5jaGFuZ2VTbGlkZSh7ZGF0YTp7bWVzc2FnZToibmV4dCJ9fSl9LHQucHJvdG90eXBlLnBhdXNlPXQucHJvdG90eXBlLnNsaWNrUGF1c2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuYXV0b1BsYXlDbGVhcigpLGUucGF1c2VkPSEwfSx0LnByb3RvdHlwZS5wbGF5PXQucHJvdG90eXBlLnNsaWNrUGxheT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5wYXVzZWQ9ITEsZS5hdXRvUGxheSgpfSx0LnByb3RvdHlwZS5wb3N0U2xpZGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LiRzbGlkZXIudHJpZ2dlcigiYWZ0ZXJDaGFuZ2UiLFt0LGVdKSx0LmFuaW1hdGluZz0hMSx0LnNldFBvc2l0aW9uKCksdC5zd2lwZUxlZnQ9bnVsbCx0Lm9wdGlvbnMuYXV0b3BsYXk9PT0hMCYmdC5wYXVzZWQ9PT0hMSYmdC5hdXRvUGxheSgpfSx0LnByb3RvdHlwZS5wcmV2PXQucHJvdG90eXBlLnNsaWNrUHJldj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5jaGFuZ2VTbGlkZSh7ZGF0YTp7bWVzc2FnZToicHJldmlvdXMifX0pfSx0LnByb3RvdHlwZS5wcm9ncmVzc2l2ZUxhenlMb2FkPWZ1bmN0aW9uKCl7dmFyIHQsbixpPXRoaXM7dD1lKCJpbWdbZGF0YS1sYXp5XSIsaS4kc2xpZGVyKS5sZW5ndGgsdD4wJiYobj1lKCJpbWdbZGF0YS1sYXp5XSIsaS4kc2xpZGVyKS5maXJzdCgpLG4uYXR0cigic3JjIixuLmF0dHIoImRhdGEtbGF6eSIpKS5yZW1vdmVDbGFzcygic2xpY2stbG9hZGluZyIpLmxvYWQoZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIoImRhdGEtbGF6eSIpLGkucHJvZ3Jlc3NpdmVMYXp5TG9hZCgpLGkub3B0aW9ucy5hZGFwdGl2ZUhlaWdodD09PSEwJiZpLnNldFBvc2l0aW9uKCl9KS5lcnJvcihmdW5jdGlvbigpe24ucmVtb3ZlQXR0cigiZGF0YS1sYXp5IiksaS5wcm9ncmVzc2l2ZUxhenlMb2FkKCl9KSl9LHQucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5jdXJyZW50U2xpZGU7dC5kZXN0cm95KCksZS5leHRlbmQodCx0LmluaXRpYWxzKSx0LmluaXQoKSx0LmNoYW5nZVNsaWRlKHtkYXRhOnttZXNzYWdlOiJpbmRleCIsaW5kZXg6bn19LCEwKX0sdC5wcm90b3R5cGUucmVpbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LiRzbGlkZXM9dC4kc2xpZGVUcmFjay5jaGlsZHJlbih0Lm9wdGlvbnMuc2xpZGUpLmFkZENsYXNzKCJzbGljay1zbGlkZSIpLHQuc2xpZGVDb3VudD10LiRzbGlkZXMubGVuZ3RoLHQuY3VycmVudFNsaWRlPj10LnNsaWRlQ291bnQmJjAhPT10LmN1cnJlbnRTbGlkZSYmKHQuY3VycmVudFNsaWRlPXQuY3VycmVudFNsaWRlLXQub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCksdC5zbGlkZUNvdW50PD10Lm9wdGlvbnMuc2xpZGVzVG9TaG93JiYodC5jdXJyZW50U2xpZGU9MCksdC5zZXRQcm9wcygpLHQuc2V0dXBJbmZpbml0ZSgpLHQuYnVpbGRBcnJvd3MoKSx0LnVwZGF0ZUFycm93cygpLHQuaW5pdEFycm93RXZlbnRzKCksdC5idWlsZERvdHMoKSx0LnVwZGF0ZURvdHMoKSx0LmluaXREb3RFdmVudHMoKSx0Lm9wdGlvbnMuZm9jdXNPblNlbGVjdD09PSEwJiZlKHQuJHNsaWRlVHJhY2spLmNoaWxkcmVuKCkub24oImNsaWNrLnNsaWNrIix0LnNlbGVjdEhhbmRsZXIpLHQuc2V0U2xpZGVDbGFzc2VzKDApLHQuc2V0UG9zaXRpb24oKSx0LiRzbGlkZXIudHJpZ2dlcigicmVJbml0IixbdF0pfSx0LnByb3RvdHlwZS5yZW1vdmVTbGlkZT10LnByb3RvdHlwZS5zbGlja1JlbW92ZT1mdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcztyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBlPyh0PWUsZT10PT09ITA/MDppLnNsaWRlQ291bnQtMSk6ZT10PT09ITA/LS1lOmUsaS5zbGlkZUNvdW50PDF8fDA+ZXx8ZT5pLnNsaWRlQ291bnQtMT8hMTooaS51bmxvYWQoKSxuPT09ITA/aS4kc2xpZGVUcmFjay5jaGlsZHJlbigpLnJlbW92ZSgpOmkuJHNsaWRlVHJhY2suY2hpbGRyZW4odGhpcy5vcHRpb25zLnNsaWRlKS5lcShlKS5yZW1vdmUoKSxpLiRzbGlkZXM9aS4kc2xpZGVUcmFjay5jaGlsZHJlbih0aGlzLm9wdGlvbnMuc2xpZGUpLGkuJHNsaWRlVHJhY2suY2hpbGRyZW4odGhpcy5vcHRpb25zLnNsaWRlKS5kZXRhY2goKSxpLiRzbGlkZVRyYWNrLmFwcGVuZChpLiRzbGlkZXMpLGkuJHNsaWRlc0NhY2hlPWkuJHNsaWRlcyx2b2lkIGkucmVpbml0KCkpfSx0LnByb3RvdHlwZS5zZXRDU1M9ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj17fTtpLm9wdGlvbnMucnRsPT09ITAmJihlPS1lKSx0PSJsZWZ0Ij09aS5wb3NpdGlvblByb3A/TWF0aC5jZWlsKGUpKyJweCI6IjBweCIsbj0idG9wIj09aS5wb3NpdGlvblByb3A/TWF0aC5jZWlsKGUpKyJweCI6IjBweCIscltpLnBvc2l0aW9uUHJvcF09ZSxpLnRyYW5zZm9ybXNFbmFibGVkPT09ITE/aS4kc2xpZGVUcmFjay5jc3Mocik6KHI9e30saS5jc3NUcmFuc2l0aW9ucz09PSExPyhyW2kuYW5pbVR5cGVdPSJ0cmFuc2xhdGUoIit0KyIsICIrbisiKSIsaS4kc2xpZGVUcmFjay5jc3MocikpOihyW2kuYW5pbVR5cGVdPSJ0cmFuc2xhdGUzZCgiK3QrIiwgIituKyIsIDBweCkiLGkuJHNsaWRlVHJhY2suY3NzKHIpKSl9LHQucHJvdG90eXBlLnNldERpbWVuc2lvbnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKGUub3B0aW9ucy52ZXJ0aWNhbD09PSExP2Uub3B0aW9ucy5jZW50ZXJNb2RlPT09ITAmJmUuJGxpc3QuY3NzKHtwYWRkaW5nOiIwcHggIitlLm9wdGlvbnMuY2VudGVyUGFkZGluZ30pOihlLiRsaXN0LmhlaWdodChlLiRzbGlkZXMuZmlyc3QoKS5vdXRlckhlaWdodCghMCkqZS5vcHRpb25zLnNsaWRlc1RvU2hvdyksZS5vcHRpb25zLmNlbnRlck1vZGU9PT0hMCYmZS4kbGlzdC5jc3Moe3BhZGRpbmc6ZS5vcHRpb25zLmNlbnRlclBhZGRpbmcrIiAwcHgifSkpLGUubGlzdFdpZHRoPWUuJGxpc3Qud2lkdGgoKSxlLmxpc3RIZWlnaHQ9ZS4kbGlzdC5oZWlnaHQoKSxlLm9wdGlvbnMudmVydGljYWw9PT0hMSYmZS5vcHRpb25zLnZhcmlhYmxlV2lkdGg9PT0hMSllLnNsaWRlV2lkdGg9TWF0aC5jZWlsKGUubGlzdFdpZHRoL2Uub3B0aW9ucy5zbGlkZXNUb1Nob3cpLGUuJHNsaWRlVHJhY2sud2lkdGgoTWF0aC5jZWlsKGUuc2xpZGVXaWR0aCplLiRzbGlkZVRyYWNrLmNoaWxkcmVuKCIuc2xpY2stc2xpZGUiKS5sZW5ndGgpKTtlbHNlIGlmKGUub3B0aW9ucy52YXJpYWJsZVdpZHRoPT09ITApe3ZhciB0PTA7ZS5zbGlkZVdpZHRoPU1hdGguY2VpbChlLmxpc3RXaWR0aC9lLm9wdGlvbnMuc2xpZGVzVG9TaG93KSxlLiRzbGlkZVRyYWNrLmNoaWxkcmVuKCIuc2xpY2stc2xpZGUiKS5lYWNoKGZ1bmN0aW9uKCl7dCs9ZS5saXN0V2lkdGh9KSxlLiRzbGlkZVRyYWNrLndpZHRoKE1hdGguY2VpbCh0KSsxKX1lbHNlIGUuc2xpZGVXaWR0aD1NYXRoLmNlaWwoZS5saXN0V2lkdGgpLGUuJHNsaWRlVHJhY2suaGVpZ2h0KE1hdGguY2VpbChlLiRzbGlkZXMuZmlyc3QoKS5vdXRlckhlaWdodCghMCkqZS4kc2xpZGVUcmFjay5jaGlsZHJlbigiLnNsaWNrLXNsaWRlIikubGVuZ3RoKSk7dmFyIG49ZS4kc2xpZGVzLmZpcnN0KCkub3V0ZXJXaWR0aCghMCktZS4kc2xpZGVzLmZpcnN0KCkud2lkdGgoKTtlLm9wdGlvbnMudmFyaWFibGVXaWR0aD09PSExJiZlLiRzbGlkZVRyYWNrLmNoaWxkcmVuKCIuc2xpY2stc2xpZGUiKS53aWR0aChlLnNsaWRlV2lkdGgtbil9LHQucHJvdG90eXBlLnNldEZhZGU9ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXM7bi4kc2xpZGVzLmVhY2goZnVuY3Rpb24oaSxyKXt0PW4uc2xpZGVXaWR0aCppKi0xLG4ub3B0aW9ucy5ydGw9PT0hMD9lKHIpLmNzcyh7cG9zaXRpb246InJlbGF0aXZlIixyaWdodDp0LHRvcDowLHpJbmRleDo4MDAsb3BhY2l0eTowfSk6ZShyKS5jc3Moe3Bvc2l0aW9uOiJyZWxhdGl2ZSIsbGVmdDp0LHRvcDowLHpJbmRleDo4MDAsb3BhY2l0eTowfSl9KSxuLiRzbGlkZXMuZXEobi5jdXJyZW50U2xpZGUpLmNzcyh7ekluZGV4OjkwMCxvcGFjaXR5OjF9KX0sdC5wcm90b3R5cGUuc2V0SGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZigxPT09ZS5vcHRpb25zLnNsaWRlc1RvU2hvdyYmZS5vcHRpb25zLmFkYXB0aXZlSGVpZ2h0PT09ITAmJmUub3B0aW9ucy52ZXJ0aWNhbD09PSExKXt2YXIgdD1lLiRzbGlkZXMuZXEoZS5jdXJyZW50U2xpZGUpLm91dGVySGVpZ2h0KCEwKTtlLiRsaXN0LmNzcygiaGVpZ2h0Iix0KX19LHQucHJvdG90eXBlLnNldE9wdGlvbj10LnByb3RvdHlwZS5zbGlja1NldE9wdGlvbj1mdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcztpLm9wdGlvbnNbZV09dCxuPT09ITAmJihpLnVubG9hZCgpLGkucmVpbml0KCkpfSx0LnByb3RvdHlwZS5zZXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5zZXREaW1lbnNpb25zKCksZS5zZXRIZWlnaHQoKSxlLm9wdGlvbnMuZmFkZT09PSExP2Uuc2V0Q1NTKGUuZ2V0TGVmdChlLmN1cnJlbnRTbGlkZSkpOmUuc2V0RmFkZSgpLGUuJHNsaWRlci50cmlnZ2VyKCJzZXRQb3NpdGlvbiIsW2VdKX0sdC5wcm90b3R5cGUuc2V0UHJvcHM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZG9jdW1lbnQuYm9keS5zdHlsZTtlLnBvc2l0aW9uUHJvcD1lLm9wdGlvbnMudmVydGljYWw9PT0hMD8idG9wIjoibGVmdCIsInRvcCI9PT1lLnBvc2l0aW9uUHJvcD9lLiRzbGlkZXIuYWRkQ2xhc3MoInNsaWNrLXZlcnRpY2FsIik6ZS4kc2xpZGVyLnJlbW92ZUNsYXNzKCJzbGljay12ZXJ0aWNhbCIpLCh2b2lkIDAhPT10LldlYmtpdFRyYW5zaXRpb258fHZvaWQgMCE9PXQuTW96VHJhbnNpdGlvbnx8dm9pZCAwIT09dC5tc1RyYW5zaXRpb24pJiZlLm9wdGlvbnMudXNlQ1NTPT09ITAmJihlLmNzc1RyYW5zaXRpb25zPSEwKSx2b2lkIDAhPT10Lk9UcmFuc2Zvcm0mJihlLmFuaW1UeXBlPSJPVHJhbnNmb3JtIixlLnRyYW5zZm9ybVR5cGU9Ii1vLXRyYW5zZm9ybSIsZS50cmFuc2l0aW9uVHlwZT0iT1RyYW5zaXRpb24iLHZvaWQgMD09PXQucGVyc3BlY3RpdmVQcm9wZXJ0eSYmdm9pZCAwPT09dC53ZWJraXRQZXJzcGVjdGl2ZSYmKGUuYW5pbVR5cGU9ITEpKSx2b2lkIDAhPT10Lk1velRyYW5zZm9ybSYmKGUuYW5pbVR5cGU9Ik1velRyYW5zZm9ybSIsZS50cmFuc2Zvcm1UeXBlPSItbW96LXRyYW5zZm9ybSIsZS50cmFuc2l0aW9uVHlwZT0iTW96VHJhbnNpdGlvbiIsdm9pZCAwPT09dC5wZXJzcGVjdGl2ZVByb3BlcnR5JiZ2b2lkIDA9PT10Lk1velBlcnNwZWN0aXZlJiYoZS5hbmltVHlwZT0hMSkpLHZvaWQgMCE9PXQud2Via2l0VHJhbnNmb3JtJiYoZS5hbmltVHlwZT0id2Via2l0VHJhbnNmb3JtIixlLnRyYW5zZm9ybVR5cGU9Ii13ZWJraXQtdHJhbnNmb3JtIixlLnRyYW5zaXRpb25UeXBlPSJ3ZWJraXRUcmFuc2l0aW9uIix2b2lkIDA9PT10LnBlcnNwZWN0aXZlUHJvcGVydHkmJnZvaWQgMD09PXQud2Via2l0UGVyc3BlY3RpdmUmJihlLmFuaW1UeXBlPSExKSksdm9pZCAwIT09dC5tc1RyYW5zZm9ybSYmKGUuYW5pbVR5cGU9Im1zVHJhbnNmb3JtIixlLnRyYW5zZm9ybVR5cGU9Ii1tcy10cmFuc2Zvcm0iLGUudHJhbnNpdGlvblR5cGU9Im1zVHJhbnNpdGlvbiIsdm9pZCAwPT09dC5tc1RyYW5zZm9ybSYmKGUuYW5pbVR5cGU9ITEpKSx2b2lkIDAhPT10LnRyYW5zZm9ybSYmZS5hbmltVHlwZSE9PSExJiYoZS5hbmltVHlwZT0idHJhbnNmb3JtIixlLnRyYW5zZm9ybVR5cGU9InRyYW5zZm9ybSIsZS50cmFuc2l0aW9uVHlwZT0idHJhbnNpdGlvbiIpLGUudHJhbnNmb3Jtc0VuYWJsZWQ9bnVsbCE9PWUuYW5pbVR5cGUmJmUuYW5pbVR5cGUhPT0hMX0sdC5wcm90b3R5cGUuc2V0U2xpZGVDbGFzc2VzPWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLHM9dGhpcztzLiRzbGlkZXIuZmluZCgiLnNsaWNrLXNsaWRlIikucmVtb3ZlQ2xhc3MoInNsaWNrLWFjdGl2ZSIpLmF0dHIoImFyaWEtaGlkZGVuIiwidHJ1ZSIpLnJlbW92ZUNsYXNzKCJzbGljay1jZW50ZXIiKSxuPXMuJHNsaWRlci5maW5kKCIuc2xpY2stc2xpZGUiKSxzLm9wdGlvbnMuY2VudGVyTW9kZT09PSEwPyh0PU1hdGguZmxvb3Iocy5vcHRpb25zLnNsaWRlc1RvU2hvdy8yKSxzLm9wdGlvbnMuaW5maW5pdGU9PT0hMCYmKGU+PXQmJmU8PXMuc2xpZGVDb3VudC0xLXQ/cy4kc2xpZGVzLnNsaWNlKGUtdCxlK3QrMSkuYWRkQ2xhc3MoInNsaWNrLWFjdGl2ZSIpLmF0dHIoImFyaWEtaGlkZGVuIiwiZmFsc2UiKTooaT1zLm9wdGlvbnMuc2xpZGVzVG9TaG93K2Usbi5zbGljZShpLXQrMSxpK3QrMikuYWRkQ2xhc3MoInNsaWNrLWFjdGl2ZSIpLmF0dHIoImFyaWEtaGlkZGVuIiwiZmFsc2UiKSksMD09PWU/bi5lcShuLmxlbmd0aC0xLXMub3B0aW9ucy5zbGlkZXNUb1Nob3cpLmFkZENsYXNzKCJzbGljay1jZW50ZXIiKTplPT09cy5zbGlkZUNvdW50LTEmJm4uZXEocy5vcHRpb25zLnNsaWRlc1RvU2hvdykuYWRkQ2xhc3MoInNsaWNrLWNlbnRlciIpKSxzLiRzbGlkZXMuZXEoZSkuYWRkQ2xhc3MoInNsaWNrLWNlbnRlciIpKTplPj0wJiZlPD1zLnNsaWRlQ291bnQtcy5vcHRpb25zLnNsaWRlc1RvU2hvdz9zLiRzbGlkZXMuc2xpY2UoZSxlK3Mub3B0aW9ucy5zbGlkZXNUb1Nob3cpLmFkZENsYXNzKCJzbGljay1hY3RpdmUiKS5hdHRyKCJhcmlhLWhpZGRlbiIsImZhbHNlIik6bi5sZW5ndGg8PXMub3B0aW9ucy5zbGlkZXNUb1Nob3c/bi5hZGRDbGFzcygic2xpY2stYWN0aXZlIikuYXR0cigiYXJpYS1oaWRkZW4iLCJmYWxzZSIpOihyPXMuc2xpZGVDb3VudCVzLm9wdGlvbnMuc2xpZGVzVG9TaG93LGk9cy5vcHRpb25zLmluZmluaXRlPT09ITA/cy5vcHRpb25zLnNsaWRlc1RvU2hvdytlOmUscy5vcHRpb25zLnNsaWRlc1RvU2hvdz09cy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsJiZzLnNsaWRlQ291bnQtZTxzLm9wdGlvbnMuc2xpZGVzVG9TaG93P24uc2xpY2UoaS0ocy5vcHRpb25zLnNsaWRlc1RvU2hvdy1yKSxpK3IpLmFkZENsYXNzKCJzbGljay1hY3RpdmUiKS5hdHRyKCJhcmlhLWhpZGRlbiIsImZhbHNlIik6bi5zbGljZShpLGkrcy5vcHRpb25zLnNsaWRlc1RvU2hvdykuYWRkQ2xhc3MoInNsaWNrLWFjdGl2ZSIpLmF0dHIoImFyaWEtaGlkZGVuIiwiZmFsc2UiKSksIm9uZGVtYW5kIj09PXMub3B0aW9ucy5sYXp5TG9hZCYmcy5sYXp5TG9hZCgpfSx0LnByb3RvdHlwZS5zZXR1cEluZmluaXRlPWZ1bmN0aW9uKCl7dmFyIHQsbixpLHI9dGhpcztpZihyLm9wdGlvbnMuZmFkZT09PSEwJiYoci5vcHRpb25zLmNlbnRlck1vZGU9ITEpLHIub3B0aW9ucy5pbmZpbml0ZT09PSEwJiZyLm9wdGlvbnMuZmFkZT09PSExJiYobj1udWxsLHIuc2xpZGVDb3VudD5yLm9wdGlvbnMuc2xpZGVzVG9TaG93KSl7Zm9yKGk9ci5vcHRpb25zLmNlbnRlck1vZGU9PT0hMD9yLm9wdGlvbnMuc2xpZGVzVG9TaG93KzE6ci5vcHRpb25zLnNsaWRlc1RvU2hvdyx0PXIuc2xpZGVDb3VudDt0PnIuc2xpZGVDb3VudC1pO3QtPTEpbj10LTEsZShyLiRzbGlkZXNbbl0pLmNsb25lKCEwKS5hdHRyKCJpZCIsIiIpLmF0dHIoImRhdGEtc2xpY2staW5kZXgiLG4tci5zbGlkZUNvdW50KS5wcmVwZW5kVG8oci4kc2xpZGVUcmFjaykuYWRkQ2xhc3MoInNsaWNrLWNsb25lZCIpO2Zvcih0PTA7aT50O3QrPTEpbj10LGUoci4kc2xpZGVzW25dKS5jbG9uZSghMCkuYXR0cigiaWQiLCIiKS5hdHRyKCJkYXRhLXNsaWNrLWluZGV4IixuK3Iuc2xpZGVDb3VudCkuYXBwZW5kVG8oci4kc2xpZGVUcmFjaykuYWRkQ2xhc3MoInNsaWNrLWNsb25lZCIpO3IuJHNsaWRlVHJhY2suZmluZCgiLnNsaWNrLWNsb25lZCIpLmZpbmQoIltpZF0iKS5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS5hdHRyKCJpZCIsIiIpfSl9fSx0LnByb3RvdHlwZS5zZWxlY3RIYW5kbGVyPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1wYXJzZUludChlKHQudGFyZ2V0KS5wYXJlbnRzKCIuc2xpY2stc2xpZGUiKS5hdHRyKCJkYXRhLXNsaWNrLWluZGV4IikpO3JldHVybiBpfHwoaT0wKSxuLnNsaWRlQ291bnQ8PW4ub3B0aW9ucy5zbGlkZXNUb1Nob3c/KG4uJHNsaWRlci5maW5kKCIuc2xpY2stc2xpZGUiKS5yZW1vdmVDbGFzcygic2xpY2stYWN0aXZlIikuYXR0cigiYXJpYS1oaWRkZW4iLCJ0cnVlIiksbi4kc2xpZGVzLmVxKGkpLmFkZENsYXNzKCJzbGljay1hY3RpdmUiKS5hdHRyKCJhcmlhLWhpZGRlbiIsImZhbHNlIiksbi5vcHRpb25zLmNlbnRlck1vZGU9PT0hMCYmKG4uJHNsaWRlci5maW5kKCIuc2xpY2stc2xpZGUiKS5yZW1vdmVDbGFzcygic2xpY2stY2VudGVyIiksbi4kc2xpZGVzLmVxKGkpLmFkZENsYXNzKCJzbGljay1jZW50ZXIiKSksdm9pZCBuLmFzTmF2Rm9yKGkpKTp2b2lkIG4uc2xpZGVIYW5kbGVyKGkpfSx0LnByb3RvdHlwZS5zbGlkZUhhbmRsZXI9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIscyxvLGE9bnVsbCxsPXRoaXM7cmV0dXJuIHQ9dHx8ITEsbC5hbmltYXRpbmc9PT0hMCYmbC5vcHRpb25zLndhaXRGb3JBbmltYXRlPT09ITB8fGwub3B0aW9ucy5mYWRlPT09ITAmJmwuY3VycmVudFNsaWRlPT09ZXx8bC5zbGlkZUNvdW50PD1sLm9wdGlvbnMuc2xpZGVzVG9TaG93P3ZvaWQgMDoodD09PSExJiZsLmFzTmF2Rm9yKGUpLGk9ZSxhPWwuZ2V0TGVmdChpKSxvPWwuZ2V0TGVmdChsLmN1cnJlbnRTbGlkZSksbC5jdXJyZW50TGVmdD1udWxsPT09bC5zd2lwZUxlZnQ/bzpsLnN3aXBlTGVmdCxsLm9wdGlvbnMuaW5maW5pdGU9PT0hMSYmbC5vcHRpb25zLmNlbnRlck1vZGU9PT0hMSYmKDA+ZXx8ZT5sLmdldERvdENvdW50KCkqbC5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKT92b2lkKGwub3B0aW9ucy5mYWRlPT09ITEmJihpPWwuY3VycmVudFNsaWRlLG4hPT0hMD9sLmFuaW1hdGVTbGlkZShvLGZ1bmN0aW9uKCl7bC5wb3N0U2xpZGUoaSl9KTpsLnBvc3RTbGlkZShpKSkpOmwub3B0aW9ucy5pbmZpbml0ZT09PSExJiZsLm9wdGlvbnMuY2VudGVyTW9kZT09PSEwJiYoMD5lfHxlPmwuc2xpZGVDb3VudC1sLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwpP3ZvaWQobC5vcHRpb25zLmZhZGU9PT0hMSYmKGk9bC5jdXJyZW50U2xpZGUsbiE9PSEwP2wuYW5pbWF0ZVNsaWRlKG8sZnVuY3Rpb24oKXtsLnBvc3RTbGlkZShpKX0pOmwucG9zdFNsaWRlKGkpKSk6KGwub3B0aW9ucy5hdXRvcGxheT09PSEwJiZjbGVhckludGVydmFsKGwuYXV0b1BsYXlUaW1lcikscj0wPmk/bC5zbGlkZUNvdW50JWwub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCE9PTA/bC5zbGlkZUNvdW50LWwuc2xpZGVDb3VudCVsLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGw6bC5zbGlkZUNvdW50K2k6aT49bC5zbGlkZUNvdW50P2wuc2xpZGVDb3VudCVsLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwhPT0wPzA6aS1sLnNsaWRlQ291bnQ6aSxsLmFuaW1hdGluZz0hMCxsLiRzbGlkZXIudHJpZ2dlcigiYmVmb3JlQ2hhbmdlIixbbCxsLmN1cnJlbnRTbGlkZSxyXSkscz1sLmN1cnJlbnRTbGlkZSxsLmN1cnJlbnRTbGlkZT1yLGwuc2V0U2xpZGVDbGFzc2VzKGwuY3VycmVudFNsaWRlKSxsLnVwZGF0ZURvdHMoKSxsLnVwZGF0ZUFycm93cygpLGwub3B0aW9ucy5mYWRlPT09ITA/KG4hPT0hMD9sLmZhZGVTbGlkZShyLGZ1bmN0aW9uKCl7bC5wb3N0U2xpZGUocil9KTpsLnBvc3RTbGlkZShyKSx2b2lkIGwuYW5pbWF0ZUhlaWdodCgpKTp2b2lkKG4hPT0hMD9sLmFuaW1hdGVTbGlkZShhLGZ1bmN0aW9uKCl7bC5wb3N0U2xpZGUocil9KTpsLnBvc3RTbGlkZShyKSkpKX0sdC5wcm90b3R5cGUuc3RhcnRMb2FkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLm9wdGlvbnMuYXJyb3dzPT09ITAmJmUuc2xpZGVDb3VudD5lLm9wdGlvbnMuc2xpZGVzVG9TaG93JiYoZS4kcHJldkFycm93LmhpZGUoKSxlLiRuZXh0QXJyb3cuaGlkZSgpKSxlLm9wdGlvbnMuZG90cz09PSEwJiZlLnNsaWRlQ291bnQ+ZS5vcHRpb25zLnNsaWRlc1RvU2hvdyYmZS4kZG90cy5oaWRlKCksZS4kc2xpZGVyLmFkZENsYXNzKCJzbGljay1sb2FkaW5nIil9LHQucHJvdG90eXBlLnN3aXBlRGlyZWN0aW9uPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzO3JldHVybiBlPXIudG91Y2hPYmplY3Quc3RhcnRYLXIudG91Y2hPYmplY3QuY3VyWCx0PXIudG91Y2hPYmplY3Quc3RhcnRZLXIudG91Y2hPYmplY3QuY3VyWSxuPU1hdGguYXRhbjIodCxlKSxpPU1hdGgucm91bmQoMTgwKm4vTWF0aC5QSSksMD5pJiYoaT0zNjAtTWF0aC5hYnMoaSkpLDQ1Pj1pJiZpPj0wP3Iub3B0aW9ucy5ydGw9PT0hMT8ibGVmdCI6InJpZ2h0IjozNjA+PWkmJmk+PTMxNT9yLm9wdGlvbnMucnRsPT09ITE/ImxlZnQiOiJyaWdodCI6aT49MTM1JiYyMjU+PWk/ci5vcHRpb25zLnJ0bD09PSExPyJyaWdodCI6ImxlZnQiOiJ2ZXJ0aWNhbCJ9LHQucHJvdG90eXBlLnN3aXBlRW5kPWZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcztpZihuLmRyYWdnaW5nPSExLG4uc2hvdWxkQ2xpY2s9bi50b3VjaE9iamVjdC5zd2lwZUxlbmd0aD4xMD8hMTohMCx2b2lkIDA9PT1uLnRvdWNoT2JqZWN0LmN1clgpcmV0dXJuITE7aWYobi50b3VjaE9iamVjdC5lZGdlSGl0PT09ITAmJm4uJHNsaWRlci50cmlnZ2VyKCJlZGdlIixbbixuLnN3aXBlRGlyZWN0aW9uKCldKSxuLnRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoPj1uLnRvdWNoT2JqZWN0Lm1pblN3aXBlKXN3aXRjaChuLnN3aXBlRGlyZWN0aW9uKCkpe2Nhc2UibGVmdCI6dD1uLm9wdGlvbnMuc3dpcGVUb1NsaWRlP24uY2hlY2tOYXZpZ2FibGUobi5jdXJyZW50U2xpZGUrbi5nZXRTbGlkZUNvdW50KCkpOm4uY3VycmVudFNsaWRlK24uZ2V0U2xpZGVDb3VudCgpLG4uc2xpZGVIYW5kbGVyKHQpLG4uY3VycmVudERpcmVjdGlvbj0wLG4udG91Y2hPYmplY3Q9e30sbi4kc2xpZGVyLnRyaWdnZXIoInN3aXBlIixbbiwibGVmdCJdKTticmVhaztjYXNlInJpZ2h0Ijp0PW4ub3B0aW9ucy5zd2lwZVRvU2xpZGU/bi5jaGVja05hdmlnYWJsZShuLmN1cnJlbnRTbGlkZS1uLmdldFNsaWRlQ291bnQoKSk6bi5jdXJyZW50U2xpZGUtbi5nZXRTbGlkZUNvdW50KCksbi5zbGlkZUhhbmRsZXIodCksbi5jdXJyZW50RGlyZWN0aW9uPTEsbi50b3VjaE9iamVjdD17fSxuLiRzbGlkZXIudHJpZ2dlcigic3dpcGUiLFtuLCJyaWdodCJdKX1lbHNlIG4udG91Y2hPYmplY3Quc3RhcnRYIT09bi50b3VjaE9iamVjdC5jdXJYJiYobi5zbGlkZUhhbmRsZXIobi5jdXJyZW50U2xpZGUpLG4udG91Y2hPYmplY3Q9e30pfSx0LnByb3RvdHlwZS5zd2lwZUhhbmRsZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighKHQub3B0aW9ucy5zd2lwZT09PSExfHwib250b3VjaGVuZCJpbiBkb2N1bWVudCYmdC5vcHRpb25zLnN3aXBlPT09ITF8fHQub3B0aW9ucy5kcmFnZ2FibGU9PT0hMSYmLTEhPT1lLnR5cGUuaW5kZXhPZigibW91c2UiKSkpc3dpdGNoKHQudG91Y2hPYmplY3QuZmluZ2VyQ291bnQ9ZS5vcmlnaW5hbEV2ZW50JiZ2b2lkIDAhPT1lLm9yaWdpbmFsRXZlbnQudG91Y2hlcz9lLm9yaWdpbmFsRXZlbnQudG91Y2hlcy5sZW5ndGg6MSx0LnRvdWNoT2JqZWN0Lm1pblN3aXBlPXQubGlzdFdpZHRoL3Qub3B0aW9ucy50b3VjaFRocmVzaG9sZCxlLmRhdGEuYWN0aW9uKXtjYXNlInN0YXJ0Ijp0LnN3aXBlU3RhcnQoZSk7YnJlYWs7Y2FzZSJtb3ZlIjp0LnN3aXBlTW92ZShlKTticmVhaztjYXNlImVuZCI6dC5zd2lwZUVuZChlKX19LHQucHJvdG90eXBlLnN3aXBlTW92ZT1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixzLG89dGhpcztyZXR1cm4gcz12b2lkIDAhPT1lLm9yaWdpbmFsRXZlbnQ/ZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXM6bnVsbCwhby5kcmFnZ2luZ3x8cyYmMSE9PXMubGVuZ3RoPyExOih0PW8uZ2V0TGVmdChvLmN1cnJlbnRTbGlkZSksby50b3VjaE9iamVjdC5jdXJYPXZvaWQgMCE9PXM/c1swXS5wYWdlWDplLmNsaWVudFgsby50b3VjaE9iamVjdC5jdXJZPXZvaWQgMCE9PXM/c1swXS5wYWdlWTplLmNsaWVudFksby50b3VjaE9iamVjdC5zd2lwZUxlbmd0aD1NYXRoLnJvdW5kKE1hdGguc3FydChNYXRoLnBvdyhvLnRvdWNoT2JqZWN0LmN1clgtby50b3VjaE9iamVjdC5zdGFydFgsMikpKSxuPW8uc3dpcGVEaXJlY3Rpb24oKSwidmVydGljYWwiIT09bj8odm9pZCAwIT09ZS5vcmlnaW5hbEV2ZW50JiZvLnRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoPjQmJmUucHJldmVudERlZmF1bHQoKSxyPShvLm9wdGlvbnMucnRsPT09ITE/MTotMSkqKG8udG91Y2hPYmplY3QuY3VyWD5vLnRvdWNoT2JqZWN0LnN0YXJ0WD8xOi0xKSxpPW8udG91Y2hPYmplY3Quc3dpcGVMZW5ndGgsby50b3VjaE9iamVjdC5lZGdlSGl0PSExLG8ub3B0aW9ucy5pbmZpbml0ZT09PSExJiYoMD09PW8uY3VycmVudFNsaWRlJiYicmlnaHQiPT09bnx8by5jdXJyZW50U2xpZGU+PW8uZ2V0RG90Q291bnQoKSYmImxlZnQiPT09bikmJihpPW8udG91Y2hPYmplY3Quc3dpcGVMZW5ndGgqby5vcHRpb25zLmVkZ2VGcmljdGlvbixvLnRvdWNoT2JqZWN0LmVkZ2VIaXQ9ITApLG8ub3B0aW9ucy52ZXJ0aWNhbD09PSExP28uc3dpcGVMZWZ0PXQraSpyOm8uc3dpcGVMZWZ0PXQraSooby4kbGlzdC5oZWlnaHQoKS9vLmxpc3RXaWR0aCkqcixvLm9wdGlvbnMuZmFkZT09PSEwfHxvLm9wdGlvbnMudG91Y2hNb3ZlPT09ITE/ITE6by5hbmltYXRpbmc9PT0hMD8oby5zd2lwZUxlZnQ9bnVsbCwhMSk6dm9pZCBvLnNldENTUyhvLnN3aXBlTGVmdCkpOnZvaWQgMCl9LHQucHJvdG90eXBlLnN3aXBlU3RhcnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzO3JldHVybiAxIT09bi50b3VjaE9iamVjdC5maW5nZXJDb3VudHx8bi5zbGlkZUNvdW50PD1uLm9wdGlvbnMuc2xpZGVzVG9TaG93PyhuLnRvdWNoT2JqZWN0PXt9LCExKToodm9pZCAwIT09ZS5vcmlnaW5hbEV2ZW50JiZ2b2lkIDAhPT1lLm9yaWdpbmFsRXZlbnQudG91Y2hlcyYmKHQ9ZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0pLG4udG91Y2hPYmplY3Quc3RhcnRYPW4udG91Y2hPYmplY3QuY3VyWD12b2lkIDAhPT10P3QucGFnZVg6ZS5jbGllbnRYLG4udG91Y2hPYmplY3Quc3RhcnRZPW4udG91Y2hPYmplY3QuY3VyWT12b2lkIDAhPT10P3QucGFnZVk6ZS5jbGllbnRZLHZvaWQobi5kcmFnZ2luZz0hMCkpfSx0LnByb3RvdHlwZS51bmZpbHRlclNsaWRlcz10LnByb3RvdHlwZS5zbGlja1VuZmlsdGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztudWxsIT09ZS4kc2xpZGVzQ2FjaGUmJihlLnVubG9hZCgpLGUuJHNsaWRlVHJhY2suY2hpbGRyZW4odGhpcy5vcHRpb25zLnNsaWRlKS5kZXRhY2goKSxlLiRzbGlkZXNDYWNoZS5hcHBlbmRUbyhlLiRzbGlkZVRyYWNrKSxlLnJlaW5pdCgpKX0sdC5wcm90b3R5cGUudW5sb2FkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztlKCIuc2xpY2stY2xvbmVkIix0LiRzbGlkZXIpLnJlbW92ZSgpLHQuJGRvdHMmJnQuJGRvdHMucmVtb3ZlKCksdC4kcHJldkFycm93JiYib2JqZWN0IiE9dHlwZW9mIHQub3B0aW9ucy5wcmV2QXJyb3cmJnQuJHByZXZBcnJvdy5yZW1vdmUoKSx0LiRuZXh0QXJyb3cmJiJvYmplY3QiIT10eXBlb2YgdC5vcHRpb25zLm5leHRBcnJvdyYmdC4kbmV4dEFycm93LnJlbW92ZSgpLHQuJHNsaWRlcy5yZW1vdmVDbGFzcygic2xpY2stc2xpZGUgc2xpY2stYWN0aXZlIHNsaWNrLXZpc2libGUiKS5hdHRyKCJhcmlhLWhpZGRlbiIsInRydWUiKS5jc3MoIndpZHRoIiwiIil9LHQucHJvdG90eXBlLnVuc2xpY2s9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZGVzdHJveSgpfSx0LnByb3RvdHlwZS51cGRhdGVBcnJvd3M9ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXM7ZT1NYXRoLmZsb29yKHQub3B0aW9ucy5zbGlkZXNUb1Nob3cvMiksdC5vcHRpb25zLmFycm93cz09PSEwJiZ0Lm9wdGlvbnMuaW5maW5pdGUhPT0hMCYmdC5zbGlkZUNvdW50PnQub3B0aW9ucy5zbGlkZXNUb1Nob3cmJih0LiRwcmV2QXJyb3cucmVtb3ZlQ2xhc3MoInNsaWNrLWRpc2FibGVkIiksdC4kbmV4dEFycm93LnJlbW92ZUNsYXNzKCJzbGljay1kaXNhYmxlZCIpLDA9PT10LmN1cnJlbnRTbGlkZT8odC4kcHJldkFycm93LmFkZENsYXNzKCJzbGljay1kaXNhYmxlZCIpLHQuJG5leHRBcnJvdy5yZW1vdmVDbGFzcygic2xpY2stZGlzYWJsZWQiKSk6dC5jdXJyZW50U2xpZGU+PXQuc2xpZGVDb3VudC10Lm9wdGlvbnMuc2xpZGVzVG9TaG93JiZ0Lm9wdGlvbnMuY2VudGVyTW9kZT09PSExPyh0LiRuZXh0QXJyb3cuYWRkQ2xhc3MoInNsaWNrLWRpc2FibGVkIiksdC4kcHJldkFycm93LnJlbW92ZUNsYXNzKCJzbGljay1kaXNhYmxlZCIpKTp0LmN1cnJlbnRTbGlkZT49dC5zbGlkZUNvdW50LTEmJnQub3B0aW9ucy5jZW50ZXJNb2RlPT09ITAmJih0LiRuZXh0QXJyb3cuYWRkQ2xhc3MoInNsaWNrLWRpc2FibGVkIiksdC4kcHJldkFycm93LnJlbW92ZUNsYXNzKCJzbGljay1kaXNhYmxlZCIpKSl9LHQucHJvdG90eXBlLnVwZGF0ZURvdHM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO251bGwhPT1lLiRkb3RzJiYoZS4kZG90cy5maW5kKCJsaSIpLnJlbW92ZUNsYXNzKCJzbGljay1hY3RpdmUiKS5hdHRyKCJhcmlhLWhpZGRlbiIsInRydWUiKSxlLiRkb3RzLmZpbmQoImxpIikuZXEoTWF0aC5mbG9vcihlLmN1cnJlbnRTbGlkZS9lLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwpKS5hZGRDbGFzcygic2xpY2stYWN0aXZlIikuYXR0cigiYXJpYS1oaWRkZW4iLCJmYWxzZSIpKX0sdC5wcm90b3R5cGUudmlzaWJpbGl0eT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZG9jdW1lbnRbZS5oaWRkZW5dPyhlLnBhdXNlZD0hMCxlLmF1dG9QbGF5Q2xlYXIoKSk6KGUucGF1c2VkPSExLGUuYXV0b1BsYXkoKSl9LGUuZm4uc2xpY2s9ZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXMsaT1hcmd1bWVudHNbMF0scj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkscz1uLmxlbmd0aCxvPTA7Zm9yKG87cz5vO28rKylpZigib2JqZWN0Ij09dHlwZW9mIGl8fCJ1bmRlZmluZWQiPT10eXBlb2YgaT9uW29dLnNsaWNrPW5ldyB0KG5bb10saSk6ZT1uW29dLnNsaWNrW2ldLmFwcGx5KG5bb10uc2xpY2ssciksInVuZGVmaW5lZCIhPXR5cGVvZiBlKXJldHVybiBlO3JldHVybiBufSxlKGZ1bmN0aW9uKCl7ZSgiW2RhdGEtc2xpY2tdIikuc2xpY2soKX0pfSk7]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 10:07:54 IST 2020</time>
    <url><![CDATA[http://detectportal.firefox.com/success.txt]]></url>
    <host ip="23.32.28.63">detectportal.firefox.com</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/success.txt]]></path>
    <extension>txt</extension>
    <request base64="true"><![CDATA[R0VUIC9zdWNjZXNzLnR4dCBIVFRQLzEuMQ0KSG9zdDogZGV0ZWN0cG9ydGFsLmZpcmVmb3guY29tDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBydjo2OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzY4LjANCkFjY2VwdDogKi8qDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC41DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkNhY2hlLUNvbnRyb2w6IG5vLWNhY2hlDQpQcmFnbWE6IG5vLWNhY2hlDQpETlQ6IDENCkNvbm5lY3Rpb246IGNsb3NlDQoNCg==]]></request>
    <status>200</status>
    <responselength>402</responselength>
    <mimetype>text</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvcGxhaW4NCkNvbnRlbnQtTGVuZ3RoOiA4DQpMYXN0LU1vZGlmaWVkOiBNb24sIDE1IE1heSAyMDE3IDE4OjA0OjQwIEdNVA0KRVRhZzogImFlNzgwNTg1ZjQ5Yjk0Y2UxNDQ0ZWI3ZDI4OTA2MTIzIg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNClNlcnZlcjogQW1hem9uUzMNClgtQW16LUNmLVBvcDogU0lOMi1DMQ0KWC1BbXotQ2YtSWQ6IGFFeXJ1ZjB1OHlQTTdJM1o4X25BNjlGQ3J0em04a3FuWWhmTDI3S3VhUFZEYnItbkJSbkRvZz09DQpDYWNoZS1Db250cm9sOiBuby1jYWNoZSwgbm8tc3RvcmUsIG11c3QtcmV2YWxpZGF0ZQ0KRGF0ZTogVGh1LCAyOCBNYXkgMjAyMCAwNDoyMTo1NCBHTVQNCkNvbm5lY3Rpb246IGNsb3NlDQoNCnN1Y2Nlc3MK]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 10:07:54 IST 2020</time>
    <url><![CDATA[http://detectportal.firefox.com/success.txt?ipv4]]></url>
    <host ip="23.32.28.63">detectportal.firefox.com</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/success.txt?ipv4]]></path>
    <extension>txt</extension>
    <request base64="true"><![CDATA[R0VUIC9zdWNjZXNzLnR4dD9pcHY0IEhUVFAvMS4xDQpIb3N0OiBkZXRlY3Rwb3J0YWwuZmlyZWZveC5jb20NClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IHJ2OjY4LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvNjguMA0KQWNjZXB0OiAqLyoNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KRE5UOiAxDQpDb25uZWN0aW9uOiBjbG9zZQ0KUHJhZ21hOiBuby1jYWNoZQ0KQ2FjaGUtQ29udHJvbDogbm8tY2FjaGUNCg0K]]></request>
    <status>200</status>
    <responselength>402</responselength>
    <mimetype>text</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvcGxhaW4NCkNvbnRlbnQtTGVuZ3RoOiA4DQpMYXN0LU1vZGlmaWVkOiBNb24sIDE1IE1heSAyMDE3IDE4OjA0OjQwIEdNVA0KRVRhZzogImFlNzgwNTg1ZjQ5Yjk0Y2UxNDQ0ZWI3ZDI4OTA2MTIzIg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNClNlcnZlcjogQW1hem9uUzMNClgtQW16LUNmLVBvcDogU0lOMi1DMQ0KWC1BbXotQ2YtSWQ6IGFFeXJ1ZjB1OHlQTTdJM1o4X25BNjlGQ3J0em04a3FuWWhmTDI3S3VhUFZEYnItbkJSbkRvZz09DQpDYWNoZS1Db250cm9sOiBuby1jYWNoZSwgbm8tc3RvcmUsIG11c3QtcmV2YWxpZGF0ZQ0KRGF0ZTogVGh1LCAyOCBNYXkgMjAyMCAwNDoyMTo1NyBHTVQNCkNvbm5lY3Rpb246IGNsb3NlDQoNCnN1Y2Nlc3MK]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 10:07:54 IST 2020</time>
    <url><![CDATA[http://detectportal.firefox.com/success.txt?ipv6]]></url>
    <host ip="23.32.28.63">detectportal.firefox.com</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/success.txt?ipv6]]></path>
    <extension>txt</extension>
    <request base64="true"><![CDATA[R0VUIC9zdWNjZXNzLnR4dD9pcHY2IEhUVFAvMS4xDQpIb3N0OiBkZXRlY3Rwb3J0YWwuZmlyZWZveC5jb20NClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IHJ2OjY4LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvNjguMA0KQWNjZXB0OiAqLyoNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KRE5UOiAxDQpDb25uZWN0aW9uOiBjbG9zZQ0KUHJhZ21hOiBuby1jYWNoZQ0KQ2FjaGUtQ29udHJvbDogbm8tY2FjaGUNCg0K]]></request>
    <status>200</status>
    <responselength>402</responselength>
    <mimetype>text</mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvcGxhaW4NCkNvbnRlbnQtTGVuZ3RoOiA4DQpMYXN0LU1vZGlmaWVkOiBNb24sIDE1IE1heSAyMDE3IDE4OjA0OjQwIEdNVA0KRVRhZzogImFlNzgwNTg1ZjQ5Yjk0Y2UxNDQ0ZWI3ZDI4OTA2MTIzIg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNClNlcnZlcjogQW1hem9uUzMNClgtQW16LUNmLVBvcDogU0lOMi1DMQ0KWC1BbXotQ2YtSWQ6IGFFeXJ1ZjB1OHlQTTdJM1o4X25BNjlGQ3J0em04a3FuWWhmTDI3S3VhUFZEYnItbkJSbkRvZz09DQpDYWNoZS1Db250cm9sOiBuby1jYWNoZSwgbm8tc3RvcmUsIG11c3QtcmV2YWxpZGF0ZQ0KRGF0ZTogVGh1LCAyOCBNYXkgMjAyMCAwNDoyMTo1NyBHTVQNCkNvbm5lY3Rpb246IGNsb3NlDQoNCnN1Y2Nlc3MK]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 09:48:54 IST 2020</time>
    <url><![CDATA[http://oimg.nbcuni.com/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s12471566572696?AQB=1&ndh=1&t=28%2F4%2F2020%204%3A18%3A50%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up%20%3A%20Loading%20Sequence&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Features&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up&c6=http%3A%2F%2F10.10.10.18%2F&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up%20%3A%20Loading%20Sequence&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up%20%3A%20Loading%20Sequence&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Features&v43=http%3A%2F%2F10.10.10.18%2F&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CFeatures%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&AQE=1]]></url>
    <host ip="3.6.119.69">oimg.nbcuni.com</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s12471566572696?AQB=1&ndh=1&t=28%2F4%2F2020%204%3A18%3A50%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up%20%3A%20Loading%20Sequence&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Features&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up&c6=http%3A%2F%2F10.10.10.18%2F&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up%20%3A%20Loading%20Sequence&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Email%20Sign-Up%20%3A%20Loading%20Sequence&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Features&v43=http%3A%2F%2F10.10.10.18%2F&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CFeatures%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&AQE=1]]></path>
    <extension>null</extension>
    <request base64="true"><![CDATA[R0VUIC9iL3NzL25iY3VnbG9iYWwsbmJjdXVzYW5ldHdvcmtkLzEvSC4yNy41L3MxMjQ3MTU2NjU3MjY5Nj9BUUI9MSZuZGg9MSZ0PTI4JTJGNCUyRjIwMjAlMjA0JTNBMTglM0E1MCUyMDQlMjAwJmZpZD0xRDg3QzRDNUYxRkRENTE5LTIxODlGN0FEMDhCODVDMkUmY2U9VVRGLTgmbnM9bmJjdW5pdmVyc2FsJnBhZ2VOYW1lPU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEVtYWlsJTIwU2lnbi1VcCUyMCUzQSUyMExvYWRpbmclMjBTZXF1ZW5jZSZnPWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRiZjYz1VU0Qmc2VydmVyPTEwLjEwLjEwLjE4JmV2ZW50cz1ldmVudDYmYzI9RHJhbWEmYzM9RmVhdHVyZXMmYzQ9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JnY0PUQlM0RjNCZjNT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBFbWFpbCUyMFNpZ24tVXAmYzY9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGJmM4PUNhYmxlJnY4PUNhYmxlJmM5PVVTQSUyME5ldHdvcmsmdjk9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwRW1haWwlMjBTaWduLVVwJTIwJTNBJTIwTG9hZGluZyUyMFNlcXVlbmNlJmMxMD1Nci4lMjBSb2JvdCZ2MTA9RCUzRGMxMCZjMTE9TXIuJTIwUm9ib3QlMjAlN0MlMjBNci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBFbWFpbCUyMFNpZ24tVXAlMjAlM0ElMjBMb2FkaW5nJTIwU2VxdWVuY2UmYzEyPVVTQSUyME5ldHdvcmslMjAlN0MlMjBNci4lMjBSb2JvdCZjMTM9UmVwZWF0JmMzMj1OZXclMjBTaXRlJnYzMj1GZWF0dXJlcyZ2NDM9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGJnY0NT1VU0ElMjBOZXR3b3JrJmM2MD1Ob3QlMjBTcG9uc29yZWQmYzY4PUQlM0R2NjgmdjY4PURlc2t0b3AlMjBMYXJnZSZjNjk9RCUzRHY2OSZ2Njk9NTg0JmM3MD1EJTNEdjcwJnY3MD0xMzQyJmM3MT1EJTNEdjcxJnY3MT1EZXNrdG9wJmgxPUNhYmxlJTdDVVNBJTIwTmV0d29yayU3Q01yLiUyMFJvYm90JmgyPURyYW1hJTdDTXIuJTIwUm9ib3QlN0NGZWF0dXJlcyU3Q01yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCZoMz0xMC4xMC4xMC4xOCZzPTEzNDJ4NTg0JmM9MjQmaj0xLjYmdj1OJms9WSZidz0xMzQyJmJoPTU4NCZBUUU9MSBIVFRQLzEuMQ0KSG9zdDogb2ltZy5uYmN1bmkuY29tDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBydjo2OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzY4LjANCkFjY2VwdDogaW1hZ2Uvd2VicCwqLyoNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KRE5UOiAxDQpDb25uZWN0aW9uOiBjbG9zZQ0KUmVmZXJlcjogaHR0cDovLzEwLjEwLjEwLjE4Lw0KDQo=]]></request>
    <status>302</status>
    <responselength>1983</responselength>
    <mimetype></mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMzAyIEZvdW5kDQp4c2VydmVyOiBhbmVkZ2UtNWQ4ZjU4ODRjYy1ocmxyaw0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQp4LWM6IG1hc3Rlci0xMjgxLkkzNGRhZWQuTTAtNDA2DQpkYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA0OjE4OjUyIEdNVA0KY29udGVudC10eXBlOiB0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgNCmV4cGlyZXM6IFdlZCwgMjcgTWF5IDIwMjAgMDQ6MTg6NTIgR01UDQpsYXN0LW1vZGlmaWVkOiBGcmksIDI5IE1heSAyMDIwIDA0OjE4OjUyIEdNVA0KcHJhZ21hOiBuby1jYWNoZQ0KcDNwOiBDUD0iVGhpcyBpcyBub3QgYSBQM1AgcG9saWN5Ig0Kc2VydmVyOiBqYWcNCnNldC1jb29raWU6IHNfdmk9W0NTXXYxfDJGNjc5REQ2MDUxNUI2RjYtNjAwMDBCMDNFQjA1MTU5NltDRV07IFBhdGg9LzsgRG9tYWluPW5iY3VuaS5jb207IE1heC1BZ2U9NjMwNzIwMDA7IEV4cGlyZXM9U2F0LCAyOCBNYXkgMjAyMiAwNDoxODoxOCBHTVQ7IA0KbG9jYXRpb246IGh0dHA6Ly9vaW1nLm5iY3VuaS5jb20vYi9zcy9uYmN1Z2xvYmFsLG5iY3V1c2FuZXR3b3JrZC8xL0guMjcuNS9zMTI0NzE1NjY1NzI2OTY/QVFCPTEmcGNjcj10cnVlJnZpZG49MkY2NzlERDYwNTE1QjZGNi02MDAwMEIwM0VCMDUxNTk2Jm5kaD0xJnQ9MjglMkY0JTJGMjAyMCUyMDQlM0ExOCUzQTUwJTIwNCUyMDAmZmlkPTFEODdDNEM1RjFGREQ1MTktMjE4OUY3QUQwOEI4NUMyRSZjZT1VVEYtOCZucz1uYmN1bml2ZXJzYWwmcGFnZU5hbWU9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwRW1haWwlMjBTaWduLVVwJTIwJTNBJTIwTG9hZGluZyUyMFNlcXVlbmNlJmc9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGJmNjPVVTRCZzZXJ2ZXI9MTAuMTAuMTAuMTgmZXZlbnRzPWV2ZW50NiZjMj1EcmFtYSZjMz1GZWF0dXJlcyZjND1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QmdjQ9RCUzRGM0JmM1PU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEVtYWlsJTIwU2lnbi1VcCZjNj1odHRwJTNBJTJGJTJGMTAuMTAuMTAuMTglMkYmYzg9Q2FibGUmdjg9Q2FibGUmYzk9VVNBJTIwTmV0d29yayZ2OT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBFbWFpbCUyMFNpZ24tVXAlMjAlM0ElMjBMb2FkaW5nJTIwU2VxdWVuY2UmYzEwPU1yLiUyMFJvYm90JnYxMD1EJTNEYzEwJmMxMT1Nci4lMjBSb2JvdCUyMCU3QyUyME1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEVtYWlsJTIwU2lnbi1VcCUyMCUzQSUyMExvYWRpbmclMjBTZXF1ZW5jZSZjMTI9VVNBJTIwTmV0d29yayUyMCU3QyUyME1yLiUyMFJvYm90JmMxMz1SZXBlYXQmYzMyPU5ldyUyMFNpdGUmdjMyPUZlYXR1cmVzJnY0Mz1odHRwJTNBJTJGJTJGMTAuMTAuMTAuMTglMkYmdjQ1PVVTQSUyME5ldHdvcmsmYzYwPU5vdCUyMFNwb25zb3JlZCZjNjg9RCUzRHY2OCZ2Njg9RGVza3RvcCUyMExhcmdlJmM2OT1EJTNEdjY5JnY2OT01ODQmYzcwPUQlM0R2NzAmdjcwPTEzNDImYzcxPUQlM0R2NzEmdjcxPURlc2t0b3AmaDE9Q2FibGUlN0NVU0ElMjBOZXR3b3JrJTdDTXIuJTIwUm9ib3QmaDI9RHJhbWElN0NNci4lMjBSb2JvdCU3Q0ZlYXR1cmVzJTdDTXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JmgzPTEwLjEwLjEwLjE4JnM9MTM0Mng1ODQmYz0yNCZqPTEuNiZ2PU4maz1ZJmJ3PTEzNDImYmg9NTg0JkFRRT0xDQpjb250ZW50LWxlbmd0aDogMA0KY2FjaGUtY29udHJvbDogbm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG5vLXRyYW5zZm9ybSwgcHJpdmF0ZQ0KeC14c3MtcHJvdGVjdGlvbjogMTsgbW9kZT1ibG9jaw0KeC1jb250ZW50LXR5cGUtb3B0aW9uczogbm9zbmlmZg0KY29ubmVjdGlvbjogY2xvc2UNCg0K]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 10:03:07 IST 2020</time>
    <url><![CDATA[http://oimg.nbcuni.com/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s12645878837148?AQB=1&ndh=1&t=28%2F4%2F2020%204%3A32%3A46%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20is%20Mr.%20Robot%20%3A%20Inform%20Gallery%20%3A%20Photo%201&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Gallery&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Inform%20Gallery&c6=http%3A%2F%2F10.10.10.18%2Finform&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20is%20Mr.%20Robot%20%3A%20Inform%20Gallery%20%3A%20Photo%201&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20is%20Mr.%20Robot%20%3A%20Inform%20Gallery%20%3A%20Photo%201&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Gallery&v43=http%3A%2F%2F10.10.10.18%2Finform&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CGallery%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18%7Cinform&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&AQE=1]]></url>
    <host ip="3.6.119.69">oimg.nbcuni.com</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s12645878837148?AQB=1&ndh=1&t=28%2F4%2F2020%204%3A32%3A46%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20is%20Mr.%20Robot%20%3A%20Inform%20Gallery%20%3A%20Photo%201&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Gallery&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Inform%20Gallery&c6=http%3A%2F%2F10.10.10.18%2Finform&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20is%20Mr.%20Robot%20%3A%20Inform%20Gallery%20%3A%20Photo%201&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20is%20Mr.%20Robot%20%3A%20Inform%20Gallery%20%3A%20Photo%201&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Gallery&v43=http%3A%2F%2F10.10.10.18%2Finform&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CGallery%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18%7Cinform&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&AQE=1]]></path>
    <extension>null</extension>
    <request base64="true"><![CDATA[R0VUIC9iL3NzL25iY3VnbG9iYWwsbmJjdXVzYW5ldHdvcmtkLzEvSC4yNy41L3MxMjY0NTg3ODgzNzE0OD9BUUI9MSZuZGg9MSZ0PTI4JTJGNCUyRjIwMjAlMjA0JTNBMzIlM0E0NiUyMDQlMjAwJmZpZD0xRDg3QzRDNUYxRkRENTE5LTIxODlGN0FEMDhCODVDMkUmY2U9VVRGLTgmbnM9bmJjdW5pdmVyc2FsJnBhZ2VOYW1lPU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwaXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEluZm9ybSUyMEdhbGxlcnklMjAlM0ElMjBQaG90byUyMDEmZz1odHRwJTNBJTJGJTJGMTAuMTAuMTAuMTglMkYmY2M9VVNEJnNlcnZlcj0xMC4xMC4xMC4xOCZldmVudHM9ZXZlbnQ2JmMyPURyYW1hJmMzPUdhbGxlcnkmYzQ9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JnY0PUQlM0RjNCZjNT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBJbmZvcm0lMjBHYWxsZXJ5JmM2PWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRmluZm9ybSZjOD1DYWJsZSZ2OD1DYWJsZSZjOT1VU0ElMjBOZXR3b3JrJnY5PU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwaXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEluZm9ybSUyMEdhbGxlcnklMjAlM0ElMjBQaG90byUyMDEmYzEwPU1yLiUyMFJvYm90JnYxMD1EJTNEYzEwJmMxMT1Nci4lMjBSb2JvdCUyMCU3QyUyME1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwaXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEluZm9ybSUyMEdhbGxlcnklMjAlM0ElMjBQaG90byUyMDEmYzEyPVVTQSUyME5ldHdvcmslMjAlN0MlMjBNci4lMjBSb2JvdCZjMTM9UmVwZWF0JmMzMj1OZXclMjBTaXRlJnYzMj1HYWxsZXJ5JnY0Mz1odHRwJTNBJTJGJTJGMTAuMTAuMTAuMTglMkZpbmZvcm0mdjQ1PVVTQSUyME5ldHdvcmsmYzYwPU5vdCUyMFNwb25zb3JlZCZjNjg9RCUzRHY2OCZ2Njg9RGVza3RvcCUyMExhcmdlJmM2OT1EJTNEdjY5JnY2OT01ODQmYzcwPUQlM0R2NzAmdjcwPTEzNDImYzcxPUQlM0R2NzEmdjcxPURlc2t0b3AmaDE9Q2FibGUlN0NVU0ElMjBOZXR3b3JrJTdDTXIuJTIwUm9ib3QmaDI9RHJhbWElN0NNci4lMjBSb2JvdCU3Q0dhbGxlcnklN0NNci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QmaDM9MTAuMTAuMTAuMTglN0NpbmZvcm0mcz0xMzQyeDU4NCZjPTI0Jmo9MS42JnY9TiZrPVkmYnc9MTM0MiZiaD01ODQmQVFFPTEgSFRUUC8xLjENCkhvc3Q6IG9pbWcubmJjdW5pLmNvbQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgcnY6NjguMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC82OC4wDQpBY2NlcHQ6IGltYWdlL3dlYnAsKi8qDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC41DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkROVDogMQ0KQ29ubmVjdGlvbjogY2xvc2UNClJlZmVyZXI6IGh0dHA6Ly8xMC4xMC4xMC4xOC8NCg0K]]></request>
    <status>302</status>
    <responselength>1978</responselength>
    <mimetype></mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMzAyIEZvdW5kDQp4c2VydmVyOiBhbmVkZ2UtNWQ4ZjU4ODRjYy13enh6Yw0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQp4LWM6IG1hc3Rlci0xMjgxLkkzNGRhZWQuTTAtNDA2DQpkYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA0OjMzOjA2IEdNVA0KY29udGVudC10eXBlOiB0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgNCmV4cGlyZXM6IFdlZCwgMjcgTWF5IDIwMjAgMDQ6MzM6MDYgR01UDQpsYXN0LW1vZGlmaWVkOiBGcmksIDI5IE1heSAyMDIwIDA0OjMzOjA2IEdNVA0KcHJhZ21hOiBuby1jYWNoZQ0KcDNwOiBDUD0iVGhpcyBpcyBub3QgYSBQM1AgcG9saWN5Ig0Kc2VydmVyOiBqYWcNCnNldC1jb29raWU6IHNfdmk9W0NTXXYxfDJGNjc5RjgxMDUxNUY4OTItNjAwMDA2MjlDQjE4QjcyNltDRV07IFBhdGg9LzsgRG9tYWluPW5iY3VuaS5jb207IE1heC1BZ2U9NjMwNzIwMDA7IEV4cGlyZXM9U2F0LCAyOCBNYXkgMjAyMiAwNDozMzozMyBHTVQ7IA0KbG9jYXRpb246IGh0dHA6Ly9vaW1nLm5iY3VuaS5jb20vYi9zcy9uYmN1Z2xvYmFsLG5iY3V1c2FuZXR3b3JrZC8xL0guMjcuNS9zMTI2NDU4Nzg4MzcxNDg/QVFCPTEmcGNjcj10cnVlJnZpZG49MkY2NzlGODEwNTE1Rjg5Mi02MDAwMDYyOUNCMThCNzI2Jm5kaD0xJnQ9MjglMkY0JTJGMjAyMCUyMDQlM0EzMiUzQTQ2JTIwNCUyMDAmZmlkPTFEODdDNEM1RjFGREQ1MTktMjE4OUY3QUQwOEI4NUMyRSZjZT1VVEYtOCZucz1uYmN1bml2ZXJzYWwmcGFnZU5hbWU9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBpcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwSW5mb3JtJTIwR2FsbGVyeSUyMCUzQSUyMFBob3RvJTIwMSZnPWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRiZjYz1VU0Qmc2VydmVyPTEwLjEwLjEwLjE4JmV2ZW50cz1ldmVudDYmYzI9RHJhbWEmYzM9R2FsbGVyeSZjND1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QmdjQ9RCUzRGM0JmM1PU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEluZm9ybSUyMEdhbGxlcnkmYzY9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGaW5mb3JtJmM4PUNhYmxlJnY4PUNhYmxlJmM5PVVTQSUyME5ldHdvcmsmdjk9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBpcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwSW5mb3JtJTIwR2FsbGVyeSUyMCUzQSUyMFBob3RvJTIwMSZjMTA9TXIuJTIwUm9ib3QmdjEwPUQlM0RjMTAmYzExPU1yLiUyMFJvYm90JTIwJTdDJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBpcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwSW5mb3JtJTIwR2FsbGVyeSUyMCUzQSUyMFBob3RvJTIwMSZjMTI9VVNBJTIwTmV0d29yayUyMCU3QyUyME1yLiUyMFJvYm90JmMxMz1SZXBlYXQmYzMyPU5ldyUyMFNpdGUmdjMyPUdhbGxlcnkmdjQzPWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRmluZm9ybSZ2NDU9VVNBJTIwTmV0d29yayZjNjA9Tm90JTIwU3BvbnNvcmVkJmM2OD1EJTNEdjY4JnY2OD1EZXNrdG9wJTIwTGFyZ2UmYzY5PUQlM0R2NjkmdjY5PTU4NCZjNzA9RCUzRHY3MCZ2NzA9MTM0MiZjNzE9RCUzRHY3MSZ2NzE9RGVza3RvcCZoMT1DYWJsZSU3Q1VTQSUyME5ldHdvcmslN0NNci4lMjBSb2JvdCZoMj1EcmFtYSU3Q01yLiUyMFJvYm90JTdDR2FsbGVyeSU3Q01yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCZoMz0xMC4xMC4xMC4xOCU3Q2luZm9ybSZzPTEzNDJ4NTg0JmM9MjQmaj0xLjYmdj1OJms9WSZidz0xMzQyJmJoPTU4NCZBUUU9MQ0KY29udGVudC1sZW5ndGg6IDANCmNhY2hlLWNvbnRyb2w6IG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBuby10cmFuc2Zvcm0sIHByaXZhdGUNCngteHNzLXByb3RlY3Rpb246IDE7IG1vZGU9YmxvY2sNCngtY29udGVudC10eXBlLW9wdGlvbnM6IG5vc25pZmYNCmNvbm5lY3Rpb246IGNsb3NlDQoNCg==]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 10:02:10 IST 2020</time>
    <url><![CDATA[http://oimg.nbcuni.com/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s13626800113345?AQB=1&ndh=1&t=28%2F4%2F2020%204%3A32%3A3%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20fsociety&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Video&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20fsociety&c6=http%3A%2F%2F10.10.10.18%2Ffsociety&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20fsociety&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20fsociety&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Video&v43=http%3A%2F%2F10.10.10.18%2Ffsociety&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CVideo%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18%7Cfsociety&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&AQE=1]]></url>
    <host ip="3.6.119.69">oimg.nbcuni.com</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s13626800113345?AQB=1&ndh=1&t=28%2F4%2F2020%204%3A32%3A3%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20fsociety&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Video&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20fsociety&c6=http%3A%2F%2F10.10.10.18%2Ffsociety&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20fsociety&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20fsociety&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Video&v43=http%3A%2F%2F10.10.10.18%2Ffsociety&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CVideo%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18%7Cfsociety&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&AQE=1]]></path>
    <extension>null</extension>
    <request base64="true"><![CDATA[R0VUIC9iL3NzL25iY3VnbG9iYWwsbmJjdXVzYW5ldHdvcmtkLzEvSC4yNy41L3MxMzYyNjgwMDExMzM0NT9BUUI9MSZuZGg9MSZ0PTI4JTJGNCUyRjIwMjAlMjA0JTNBMzIlM0EzJTIwNCUyMDAmZmlkPTFEODdDNEM1RjFGREQ1MTktMjE4OUY3QUQwOEI4NUMyRSZjZT1VVEYtOCZucz1uYmN1bml2ZXJzYWwmcGFnZU5hbWU9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwZnNvY2lldHkmZz1odHRwJTNBJTJGJTJGMTAuMTAuMTAuMTglMkYmY2M9VVNEJnNlcnZlcj0xMC4xMC4xMC4xOCZldmVudHM9ZXZlbnQ2JmMyPURyYW1hJmMzPVZpZGVvJmM0PU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCZ2ND1EJTNEYzQmYzU9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwZnNvY2lldHkmYzY9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGZnNvY2lldHkmYzg9Q2FibGUmdjg9Q2FibGUmYzk9VVNBJTIwTmV0d29yayZ2OT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBmc29jaWV0eSZjMTA9TXIuJTIwUm9ib3QmdjEwPUQlM0RjMTAmYzExPU1yLiUyMFJvYm90JTIwJTdDJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwZnNvY2lldHkmYzEyPVVTQSUyME5ldHdvcmslMjAlN0MlMjBNci4lMjBSb2JvdCZjMTM9UmVwZWF0JmMzMj1OZXclMjBTaXRlJnYzMj1WaWRlbyZ2NDM9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGZnNvY2lldHkmdjQ1PVVTQSUyME5ldHdvcmsmYzYwPU5vdCUyMFNwb25zb3JlZCZjNjg9RCUzRHY2OCZ2Njg9RGVza3RvcCUyMExhcmdlJmM2OT1EJTNEdjY5JnY2OT01ODQmYzcwPUQlM0R2NzAmdjcwPTEzNDImYzcxPUQlM0R2NzEmdjcxPURlc2t0b3AmaDE9Q2FibGUlN0NVU0ElMjBOZXR3b3JrJTdDTXIuJTIwUm9ib3QmaDI9RHJhbWElN0NNci4lMjBSb2JvdCU3Q1ZpZGVvJTdDTXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JmgzPTEwLjEwLjEwLjE4JTdDZnNvY2lldHkmcz0xMzQyeDU4NCZjPTI0Jmo9MS42JnY9TiZrPVkmYnc9MTM0MiZiaD01ODQmQVFFPTEgSFRUUC8xLjENCkhvc3Q6IG9pbWcubmJjdW5pLmNvbQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgcnY6NjguMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC82OC4wDQpBY2NlcHQ6IGltYWdlL3dlYnAsKi8qDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC41DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkROVDogMQ0KQ29ubmVjdGlvbjogY2xvc2UNClJlZmVyZXI6IGh0dHA6Ly8xMC4xMC4xMC4xOC8NCg0K]]></request>
    <status>302</status>
    <responselength>1891</responselength>
    <mimetype></mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMzAyIEZvdW5kDQp4c2VydmVyOiBhbmVkZ2UtNWQ4ZjU4ODRjYy1jbHZ2eg0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQp4LWM6IG1hc3Rlci0xMjgxLkkzNGRhZWQuTTAtNDA2DQpkYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA0OjMyOjA4IEdNVA0KY29udGVudC10eXBlOiB0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgNCmV4cGlyZXM6IFdlZCwgMjcgTWF5IDIwMjAgMDQ6MzI6MDkgR01UDQpsYXN0LW1vZGlmaWVkOiBGcmksIDI5IE1heSAyMDIwIDA0OjMyOjA5IEdNVA0KcHJhZ21hOiBuby1jYWNoZQ0KcDNwOiBDUD0iVGhpcyBpcyBub3QgYSBQM1AgcG9saWN5Ig0Kc2VydmVyOiBqYWcNCnNldC1jb29raWU6IHNfdmk9W0NTXXYxfDJGNjc5RjY0ODUxNUExNjAtNDAwMDA5OUE4QjBCNzQ2RVtDRV07IFBhdGg9LzsgRG9tYWluPW5iY3VuaS5jb207IE1heC1BZ2U9NjMwNzIwMDA7IEV4cGlyZXM9U2F0LCAyOCBNYXkgMjAyMiAwNDozMjozMiBHTVQ7IA0KbG9jYXRpb246IGh0dHA6Ly9vaW1nLm5iY3VuaS5jb20vYi9zcy9uYmN1Z2xvYmFsLG5iY3V1c2FuZXR3b3JrZC8xL0guMjcuNS9zMTM2MjY4MDAxMTMzNDU/QVFCPTEmcGNjcj10cnVlJnZpZG49MkY2NzlGNjQ4NTE1QTE2MC00MDAwMDk5QThCMEI3NDZFJm5kaD0xJnQ9MjglMkY0JTJGMjAyMCUyMDQlM0EzMiUzQTMlMjA0JTIwMCZmaWQ9MUQ4N0M0QzVGMUZERDUxOS0yMTg5RjdBRDA4Qjg1QzJFJmNlPVVURi04Jm5zPW5iY3VuaXZlcnNhbCZwYWdlTmFtZT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBmc29jaWV0eSZnPWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRiZjYz1VU0Qmc2VydmVyPTEwLjEwLjEwLjE4JmV2ZW50cz1ldmVudDYmYzI9RHJhbWEmYzM9VmlkZW8mYzQ9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JnY0PUQlM0RjNCZjNT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBmc29jaWV0eSZjNj1odHRwJTNBJTJGJTJGMTAuMTAuMTAuMTglMkZmc29jaWV0eSZjOD1DYWJsZSZ2OD1DYWJsZSZjOT1VU0ElMjBOZXR3b3JrJnY5PU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMGZzb2NpZXR5JmMxMD1Nci4lMjBSb2JvdCZ2MTA9RCUzRGMxMCZjMTE9TXIuJTIwUm9ib3QlMjAlN0MlMjBNci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBmc29jaWV0eSZjMTI9VVNBJTIwTmV0d29yayUyMCU3QyUyME1yLiUyMFJvYm90JmMxMz1SZXBlYXQmYzMyPU5ldyUyMFNpdGUmdjMyPVZpZGVvJnY0Mz1odHRwJTNBJTJGJTJGMTAuMTAuMTAuMTglMkZmc29jaWV0eSZ2NDU9VVNBJTIwTmV0d29yayZjNjA9Tm90JTIwU3BvbnNvcmVkJmM2OD1EJTNEdjY4JnY2OD1EZXNrdG9wJTIwTGFyZ2UmYzY5PUQlM0R2NjkmdjY5PTU4NCZjNzA9RCUzRHY3MCZ2NzA9MTM0MiZjNzE9RCUzRHY3MSZ2NzE9RGVza3RvcCZoMT1DYWJsZSU3Q1VTQSUyME5ldHdvcmslN0NNci4lMjBSb2JvdCZoMj1EcmFtYSU3Q01yLiUyMFJvYm90JTdDVmlkZW8lN0NNci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QmaDM9MTAuMTAuMTAuMTglN0Nmc29jaWV0eSZzPTEzNDJ4NTg0JmM9MjQmaj0xLjYmdj1OJms9WSZidz0xMzQyJmJoPTU4NCZBUUU9MQ0KY29udGVudC1sZW5ndGg6IDANCmNhY2hlLWNvbnRyb2w6IG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBuby10cmFuc2Zvcm0sIHByaXZhdGUNCngteHNzLXByb3RlY3Rpb246IDE7IG1vZGU9YmxvY2sNCngtY29udGVudC10eXBlLW9wdGlvbnM6IG5vc25pZmYNCmNvbm5lY3Rpb246IGNsb3NlDQoNCg==]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 10:02:10 IST 2020</time>
    <url><![CDATA[http://oimg.nbcuni.com/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s14321758627016?AQB=1&ndh=1&t=28%2F4%2F2020%204%3A32%3A8%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Features&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&c6=http%3A%2F%2F10.10.10.18%2Ffsociety&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Features&v43=http%3A%2F%2F10.10.10.18%2Ffsociety&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CFeatures%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18%7Cfsociety&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&AQE=1]]></url>
    <host ip="3.6.119.69">oimg.nbcuni.com</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s14321758627016?AQB=1&ndh=1&t=28%2F4%2F2020%204%3A32%3A8%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Features&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&c6=http%3A%2F%2F10.10.10.18%2Ffsociety&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Features&v43=http%3A%2F%2F10.10.10.18%2Ffsociety&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CFeatures%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18%7Cfsociety&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&AQE=1]]></path>
    <extension>null</extension>
    <request base64="true"><![CDATA[R0VUIC9iL3NzL25iY3VnbG9iYWwsbmJjdXVzYW5ldHdvcmtkLzEvSC4yNy41L3MxNDMyMTc1ODYyNzAxNj9BUUI9MSZuZGg9MSZ0PTI4JTJGNCUyRjIwMjAlMjA0JTNBMzIlM0E4JTIwNCUyMDAmZmlkPTFEODdDNEM1RjFGREQ1MTktMjE4OUY3QUQwOEI4NUMyRSZjZT1VVEYtOCZucz1uYmN1bml2ZXJzYWwmcGFnZU5hbWU9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwSGVscCZnPWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRiZjYz1VU0Qmc2VydmVyPTEwLjEwLjEwLjE4JmV2ZW50cz1ldmVudDYmYzI9RHJhbWEmYzM9RmVhdHVyZXMmYzQ9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JnY0PUQlM0RjNCZjNT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBIZWxwJmM2PWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRmZzb2NpZXR5JmM4PUNhYmxlJnY4PUNhYmxlJmM5PVVTQSUyME5ldHdvcmsmdjk9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwSGVscCZjMTA9TXIuJTIwUm9ib3QmdjEwPUQlM0RjMTAmYzExPU1yLiUyMFJvYm90JTIwJTdDJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwSGVscCZjMTI9VVNBJTIwTmV0d29yayUyMCU3QyUyME1yLiUyMFJvYm90JmMxMz1SZXBlYXQmYzMyPU5ldyUyMFNpdGUmdjMyPUZlYXR1cmVzJnY0Mz1odHRwJTNBJTJGJTJGMTAuMTAuMTAuMTglMkZmc29jaWV0eSZ2NDU9VVNBJTIwTmV0d29yayZjNjA9Tm90JTIwU3BvbnNvcmVkJmM2OD1EJTNEdjY4JnY2OD1EZXNrdG9wJTIwTGFyZ2UmYzY5PUQlM0R2NjkmdjY5PTU4NCZjNzA9RCUzRHY3MCZ2NzA9MTM0MiZjNzE9RCUzRHY3MSZ2NzE9RGVza3RvcCZoMT1DYWJsZSU3Q1VTQSUyME5ldHdvcmslN0NNci4lMjBSb2JvdCZoMj1EcmFtYSU3Q01yLiUyMFJvYm90JTdDRmVhdHVyZXMlN0NNci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QmaDM9MTAuMTAuMTAuMTglN0Nmc29jaWV0eSZzPTEzNDJ4NTg0JmM9MjQmaj0xLjYmdj1OJms9WSZidz0xMzQyJmJoPTU4NCZBUUU9MSBIVFRQLzEuMQ0KSG9zdDogb2ltZy5uYmN1bmkuY29tDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBydjo2OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzY4LjANCkFjY2VwdDogaW1hZ2Uvd2VicCwqLyoNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KRE5UOiAxDQpDb25uZWN0aW9uOiBjbG9zZQ0KUmVmZXJlcjogaHR0cDovLzEwLjEwLjEwLjE4Lw0KDQo=]]></request>
    <status>302</status>
    <responselength>1884</responselength>
    <mimetype></mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMzAyIEZvdW5kDQp4c2VydmVyOiBhbmVkZ2UtNWQ4ZjU4ODRjYy1oODViNQ0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQp4LWM6IG1hc3Rlci0xMjgxLkkzNGRhZWQuTTAtNDA2DQpkYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA0OjMyOjA4IEdNVA0KY29udGVudC10eXBlOiB0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgNCmV4cGlyZXM6IFdlZCwgMjcgTWF5IDIwMjAgMDQ6MzI6MDggR01UDQpsYXN0LW1vZGlmaWVkOiBGcmksIDI5IE1heSAyMDIwIDA0OjMyOjA4IEdNVA0KcHJhZ21hOiBuby1jYWNoZQ0KcDNwOiBDUD0iVGhpcyBpcyBub3QgYSBQM1AgcG9saWN5Ig0Kc2VydmVyOiBqYWcNCnNldC1jb29raWU6IHNfdmk9W0NTXXYxfDJGNjc5RjY0MDUxNTgwMjgtNDAwMDA3NERDQjE1Rjk4M1tDRV07IFBhdGg9LzsgRG9tYWluPW5iY3VuaS5jb207IE1heC1BZ2U9NjMwNzIwMDA7IEV4cGlyZXM9U2F0LCAyOCBNYXkgMjAyMiAwNDozMjozMiBHTVQ7IA0KbG9jYXRpb246IGh0dHA6Ly9vaW1nLm5iY3VuaS5jb20vYi9zcy9uYmN1Z2xvYmFsLG5iY3V1c2FuZXR3b3JrZC8xL0guMjcuNS9zMTQzMjE3NTg2MjcwMTY/QVFCPTEmcGNjcj10cnVlJnZpZG49MkY2NzlGNjQwNTE1ODAyOC00MDAwMDc0RENCMTVGOTgzJm5kaD0xJnQ9MjglMkY0JTJGMjAyMCUyMDQlM0EzMiUzQTglMjA0JTIwMCZmaWQ9MUQ4N0M0QzVGMUZERDUxOS0yMTg5RjdBRDA4Qjg1QzJFJmNlPVVURi04Jm5zPW5iY3VuaXZlcnNhbCZwYWdlTmFtZT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBIZWxwJmc9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGJmNjPVVTRCZzZXJ2ZXI9MTAuMTAuMTAuMTgmZXZlbnRzPWV2ZW50NiZjMj1EcmFtYSZjMz1GZWF0dXJlcyZjND1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QmdjQ9RCUzRGM0JmM1PU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEhlbHAmYzY9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGZnNvY2lldHkmYzg9Q2FibGUmdjg9Q2FibGUmYzk9VVNBJTIwTmV0d29yayZ2OT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBIZWxwJmMxMD1Nci4lMjBSb2JvdCZ2MTA9RCUzRGMxMCZjMTE9TXIuJTIwUm9ib3QlMjAlN0MlMjBNci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBIZWxwJmMxMj1VU0ElMjBOZXR3b3JrJTIwJTdDJTIwTXIuJTIwUm9ib3QmYzEzPVJlcGVhdCZjMzI9TmV3JTIwU2l0ZSZ2MzI9RmVhdHVyZXMmdjQzPWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRmZzb2NpZXR5JnY0NT1VU0ElMjBOZXR3b3JrJmM2MD1Ob3QlMjBTcG9uc29yZWQmYzY4PUQlM0R2NjgmdjY4PURlc2t0b3AlMjBMYXJnZSZjNjk9RCUzRHY2OSZ2Njk9NTg0JmM3MD1EJTNEdjcwJnY3MD0xMzQyJmM3MT1EJTNEdjcxJnY3MT1EZXNrdG9wJmgxPUNhYmxlJTdDVVNBJTIwTmV0d29yayU3Q01yLiUyMFJvYm90JmgyPURyYW1hJTdDTXIuJTIwUm9ib3QlN0NGZWF0dXJlcyU3Q01yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCZoMz0xMC4xMC4xMC4xOCU3Q2Zzb2NpZXR5JnM9MTM0Mng1ODQmYz0yNCZqPTEuNiZ2PU4maz1ZJmJ3PTEzNDImYmg9NTg0JkFRRT0xDQpjb250ZW50LWxlbmd0aDogMA0KY2FjaGUtY29udHJvbDogbm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG5vLXRyYW5zZm9ybSwgcHJpdmF0ZQ0KeC14c3MtcHJvdGVjdGlvbjogMTsgbW9kZT1ibG9jaw0KeC1jb250ZW50LXR5cGUtb3B0aW9uczogbm9zbmlmZg0KY29ubmVjdGlvbjogY2xvc2UNCg0K]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 09:51:55 IST 2020</time>
    <url><![CDATA[http://oimg.nbcuni.com/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s1548799882323?AQB=1&ndh=1&t=28%2F4%2F2020%204%3A20%3A44%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Features&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&c6=http%3A%2F%2F10.10.10.18%2Fjoin&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Features&v43=http%3A%2F%2F10.10.10.18%2Fjoin&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CFeatures%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18%7Cjoin&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&AQE=1]]></url>
    <host ip="3.6.119.69">oimg.nbcuni.com</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s1548799882323?AQB=1&ndh=1&t=28%2F4%2F2020%204%3A20%3A44%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Features&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&c6=http%3A%2F%2F10.10.10.18%2Fjoin&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20Help&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Features&v43=http%3A%2F%2F10.10.10.18%2Fjoin&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CFeatures%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18%7Cjoin&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&AQE=1]]></path>
    <extension>null</extension>
    <request base64="true"><![CDATA[R0VUIC9iL3NzL25iY3VnbG9iYWwsbmJjdXVzYW5ldHdvcmtkLzEvSC4yNy41L3MxNTQ4Nzk5ODgyMzIzP0FRQj0xJm5kaD0xJnQ9MjglMkY0JTJGMjAyMCUyMDQlM0EyMCUzQTQ0JTIwNCUyMDAmZmlkPTFEODdDNEM1RjFGREQ1MTktMjE4OUY3QUQwOEI4NUMyRSZjZT1VVEYtOCZucz1uYmN1bml2ZXJzYWwmcGFnZU5hbWU9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwSGVscCZnPWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRiZjYz1VU0Qmc2VydmVyPTEwLjEwLjEwLjE4JmV2ZW50cz1ldmVudDYmYzI9RHJhbWEmYzM9RmVhdHVyZXMmYzQ9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JnY0PUQlM0RjNCZjNT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBIZWxwJmM2PWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRmpvaW4mYzg9Q2FibGUmdjg9Q2FibGUmYzk9VVNBJTIwTmV0d29yayZ2OT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBIZWxwJmMxMD1Nci4lMjBSb2JvdCZ2MTA9RCUzRGMxMCZjMTE9TXIuJTIwUm9ib3QlMjAlN0MlMjBNci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBIZWxwJmMxMj1VU0ElMjBOZXR3b3JrJTIwJTdDJTIwTXIuJTIwUm9ib3QmYzEzPVJlcGVhdCZjMzI9TmV3JTIwU2l0ZSZ2MzI9RmVhdHVyZXMmdjQzPWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRmpvaW4mdjQ1PVVTQSUyME5ldHdvcmsmYzYwPU5vdCUyMFNwb25zb3JlZCZjNjg9RCUzRHY2OCZ2Njg9RGVza3RvcCUyMExhcmdlJmM2OT1EJTNEdjY5JnY2OT01ODQmYzcwPUQlM0R2NzAmdjcwPTEzNDImYzcxPUQlM0R2NzEmdjcxPURlc2t0b3AmaDE9Q2FibGUlN0NVU0ElMjBOZXR3b3JrJTdDTXIuJTIwUm9ib3QmaDI9RHJhbWElN0NNci4lMjBSb2JvdCU3Q0ZlYXR1cmVzJTdDTXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JmgzPTEwLjEwLjEwLjE4JTdDam9pbiZzPTEzNDJ4NTg0JmM9MjQmaj0xLjYmdj1OJms9WSZidz0xMzQyJmJoPTU4NCZBUUU9MSBIVFRQLzEuMQ0KSG9zdDogb2ltZy5uYmN1bmkuY29tDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBydjo2OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzY4LjANCkFjY2VwdDogaW1hZ2Uvd2VicCwqLyoNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KRE5UOiAxDQpDb25uZWN0aW9uOiBjbG9zZQ0KUmVmZXJlcjogaHR0cDovLzEwLjEwLjEwLjE4Lw0KDQo=]]></request>
    <status>302</status>
    <responselength>1872</responselength>
    <mimetype></mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMzAyIEZvdW5kDQp4c2VydmVyOiBhbmVkZ2UtNWQ4ZjU4ODRjYy04NWsydA0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQp4LWM6IG1hc3Rlci0xMjgxLkkzNGRhZWQuTTAtNDA2DQpkYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA0OjIxOjUzIEdNVA0KY29udGVudC10eXBlOiB0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgNCmV4cGlyZXM6IFdlZCwgMjcgTWF5IDIwMjAgMDQ6MjE6NTQgR01UDQpsYXN0LW1vZGlmaWVkOiBGcmksIDI5IE1heSAyMDIwIDA0OjIxOjU0IEdNVA0KcHJhZ21hOiBuby1jYWNoZQ0KcDNwOiBDUD0iVGhpcyBpcyBub3QgYSBQM1AgcG9saWN5Ig0Kc2VydmVyOiBqYWcNCnNldC1jb29raWU6IHNfdmk9W0NTXXYxfDJGNjc5RTMxMDUxNUI0QzctNjAwMDA4RTVFQjA5NjUwMVtDRV07IFBhdGg9LzsgRG9tYWluPW5iY3VuaS5jb207IE1heC1BZ2U9NjMwNzIwMDA7IEV4cGlyZXM9U2F0LCAyOCBNYXkgMjAyMiAwNDoyMToyMSBHTVQ7IA0KbG9jYXRpb246IGh0dHA6Ly9vaW1nLm5iY3VuaS5jb20vYi9zcy9uYmN1Z2xvYmFsLG5iY3V1c2FuZXR3b3JrZC8xL0guMjcuNS9zMTU0ODc5OTg4MjMyMz9BUUI9MSZwY2NyPXRydWUmdmlkbj0yRjY3OUUzMTA1MTVCNEM3LTYwMDAwOEU1RUIwOTY1MDEmbmRoPTEmdD0yOCUyRjQlMkYyMDIwJTIwNCUzQTIwJTNBNDQlMjA0JTIwMCZmaWQ9MUQ4N0M0QzVGMUZERDUxOS0yMTg5RjdBRDA4Qjg1QzJFJmNlPVVURi04Jm5zPW5iY3VuaXZlcnNhbCZwYWdlTmFtZT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBIZWxwJmc9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGJmNjPVVTRCZzZXJ2ZXI9MTAuMTAuMTAuMTgmZXZlbnRzPWV2ZW50NiZjMj1EcmFtYSZjMz1GZWF0dXJlcyZjND1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QmdjQ9RCUzRGM0JmM1PU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEhlbHAmYzY9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGam9pbiZjOD1DYWJsZSZ2OD1DYWJsZSZjOT1VU0ElMjBOZXR3b3JrJnY5PU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEhlbHAmYzEwPU1yLiUyMFJvYm90JnYxMD1EJTNEYzEwJmMxMT1Nci4lMjBSb2JvdCUyMCU3QyUyME1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMEhlbHAmYzEyPVVTQSUyME5ldHdvcmslMjAlN0MlMjBNci4lMjBSb2JvdCZjMTM9UmVwZWF0JmMzMj1OZXclMjBTaXRlJnYzMj1GZWF0dXJlcyZ2NDM9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGam9pbiZ2NDU9VVNBJTIwTmV0d29yayZjNjA9Tm90JTIwU3BvbnNvcmVkJmM2OD1EJTNEdjY4JnY2OD1EZXNrdG9wJTIwTGFyZ2UmYzY5PUQlM0R2NjkmdjY5PTU4NCZjNzA9RCUzRHY3MCZ2NzA9MTM0MiZjNzE9RCUzRHY3MSZ2NzE9RGVza3RvcCZoMT1DYWJsZSU3Q1VTQSUyME5ldHdvcmslN0NNci4lMjBSb2JvdCZoMj1EcmFtYSU3Q01yLiUyMFJvYm90JTdDRmVhdHVyZXMlN0NNci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QmaDM9MTAuMTAuMTAuMTglN0Nqb2luJnM9MTM0Mng1ODQmYz0yNCZqPTEuNiZ2PU4maz1ZJmJ3PTEzNDImYmg9NTg0JkFRRT0xDQpjb250ZW50LWxlbmd0aDogMA0KY2FjaGUtY29udHJvbDogbm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG5vLXRyYW5zZm9ybSwgcHJpdmF0ZQ0KeC14c3MtcHJvdGVjdGlvbjogMTsgbW9kZT1ibG9jaw0KeC1jb250ZW50LXR5cGUtb3B0aW9uczogbm9zbmlmZg0KY29ubmVjdGlvbjogY2xvc2UNCg0K]]></response>
    <comment></comment>
  </item>
  <item>
    <time>Thu May 28 09:50:14 IST 2020</time>
    <url><![CDATA[http://oimg.nbcuni.com/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s18646303549275?AQB=1&ndh=1&t=28%2F4%2F2020%204%3A20%3A9%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20prepare&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Video&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20prepare&c6=http%3A%2F%2F10.10.10.18%2Fjoin&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20prepare&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20prepare&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Video&v43=http%3A%2F%2F10.10.10.18%2Fjoin&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CVideo%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18%7Cjoin&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&AQE=1]]></url>
    <host ip="3.6.119.69">oimg.nbcuni.com</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/b/ss/nbcuglobal,nbcuusanetworkd/1/H.27.5/s18646303549275?AQB=1&ndh=1&t=28%2F4%2F2020%204%3A20%3A9%204%200&fid=1D87C4C5F1FDD519-2189F7AD08B85C2E&ce=UTF-8&ns=nbcuniversal&pageName=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20prepare&g=http%3A%2F%2F10.10.10.18%2F&cc=USD&server=10.10.10.18&events=event6&c2=Drama&c3=Video&c4=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&v4=D%3Dc4&c5=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20prepare&c6=http%3A%2F%2F10.10.10.18%2Fjoin&c8=Cable&v8=Cable&c9=USA%20Network&v9=Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20prepare&c10=Mr.%20Robot&v10=D%3Dc10&c11=Mr.%20Robot%20%7C%20Mr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot%20%3A%20prepare&c12=USA%20Network%20%7C%20Mr.%20Robot&c13=Repeat&c32=New%20Site&v32=Video&v43=http%3A%2F%2F10.10.10.18%2Fjoin&v45=USA%20Network&c60=Not%20Sponsored&c68=D%3Dv68&v68=Desktop%20Large&c69=D%3Dv69&v69=584&c70=D%3Dv70&v70=1342&c71=D%3Dv71&v71=Desktop&h1=Cable%7CUSA%20Network%7CMr.%20Robot&h2=Drama%7CMr.%20Robot%7CVideo%7CMr.%20Robot%20%3A%20Who%20Is%20Mr.%20Robot&h3=10.10.10.18%7Cjoin&s=1342x584&c=24&j=1.6&v=N&k=Y&bw=1342&bh=584&AQE=1]]></path>
    <extension>null</extension>
    <request base64="true"><![CDATA[R0VUIC9iL3NzL25iY3VnbG9iYWwsbmJjdXVzYW5ldHdvcmtkLzEvSC4yNy41L3MxODY0NjMwMzU0OTI3NT9BUUI9MSZuZGg9MSZ0PTI4JTJGNCUyRjIwMjAlMjA0JTNBMjAlM0E5JTIwNCUyMDAmZmlkPTFEODdDNEM1RjFGREQ1MTktMjE4OUY3QUQwOEI4NUMyRSZjZT1VVEYtOCZucz1uYmN1bml2ZXJzYWwmcGFnZU5hbWU9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JTIwJTNBJTIwcHJlcGFyZSZnPWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRiZjYz1VU0Qmc2VydmVyPTEwLjEwLjEwLjE4JmV2ZW50cz1ldmVudDYmYzI9RHJhbWEmYzM9VmlkZW8mYzQ9TXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JnY0PUQlM0RjNCZjNT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBwcmVwYXJlJmM2PWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRmpvaW4mYzg9Q2FibGUmdjg9Q2FibGUmYzk9VVNBJTIwTmV0d29yayZ2OT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBwcmVwYXJlJmMxMD1Nci4lMjBSb2JvdCZ2MTA9RCUzRGMxMCZjMTE9TXIuJTIwUm9ib3QlMjAlN0MlMjBNci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBwcmVwYXJlJmMxMj1VU0ElMjBOZXR3b3JrJTIwJTdDJTIwTXIuJTIwUm9ib3QmYzEzPVJlcGVhdCZjMzI9TmV3JTIwU2l0ZSZ2MzI9VmlkZW8mdjQzPWh0dHAlM0ElMkYlMkYxMC4xMC4xMC4xOCUyRmpvaW4mdjQ1PVVTQSUyME5ldHdvcmsmYzYwPU5vdCUyMFNwb25zb3JlZCZjNjg9RCUzRHY2OCZ2Njg9RGVza3RvcCUyMExhcmdlJmM2OT1EJTNEdjY5JnY2OT01ODQmYzcwPUQlM0R2NzAmdjcwPTEzNDImYzcxPUQlM0R2NzEmdjcxPURlc2t0b3AmaDE9Q2FibGUlN0NVU0ElMjBOZXR3b3JrJTdDTXIuJTIwUm9ib3QmaDI9RHJhbWElN0NNci4lMjBSb2JvdCU3Q1ZpZGVvJTdDTXIuJTIwUm9ib3QlMjAlM0ElMjBXaG8lMjBJcyUyME1yLiUyMFJvYm90JmgzPTEwLjEwLjEwLjE4JTdDam9pbiZzPTEzNDJ4NTg0JmM9MjQmaj0xLjYmdj1OJms9WSZidz0xMzQyJmJoPTU4NCZBUUU9MSBIVFRQLzEuMQ0KSG9zdDogb2ltZy5uYmN1bmkuY29tDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBydjo2OC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzY4LjANCkFjY2VwdDogaW1hZ2Uvd2VicCwqLyoNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjUNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KRE5UOiAxDQpDb25uZWN0aW9uOiBjbG9zZQ0KUmVmZXJlcjogaHR0cDovLzEwLjEwLjEwLjE4Lw0KDQo=]]></request>
    <status>302</status>
    <responselength>1875</responselength>
    <mimetype></mimetype>
    <response base64="true"><![CDATA[SFRUUC8xLjEgMzAyIEZvdW5kDQp4c2VydmVyOiBhbmVkZ2UtNWQ4ZjU4ODRjYy16Mm44dw0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQp4LWM6IG1hc3Rlci0xMjgxLkkzNGRhZWQuTTAtNDA2DQpkYXRlOiBUaHUsIDI4IE1heSAyMDIwIDA0OjIwOjEyIEdNVA0KY29udGVudC10eXBlOiB0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgNCmV4cGlyZXM6IFdlZCwgMjcgTWF5IDIwMjAgMDQ6MjA6MTMgR01UDQpsYXN0LW1vZGlmaWVkOiBGcmksIDI5IE1heSAyMDIwIDA0OjIwOjEzIEdNVA0KcHJhZ21hOiBuby1jYWNoZQ0KcDNwOiBDUD0iVGhpcyBpcyBub3QgYSBQM1AgcG9saWN5Ig0Kc2VydmVyOiBqYWcNCnNldC1jb29raWU6IHNfdmk9W0NTXXYxfDJGNjc5REZFODUxNUNDNjktNjAwMDBCREI0QjA4NjRGRVtDRV07IFBhdGg9LzsgRG9tYWluPW5iY3VuaS5jb207IE1heC1BZ2U9NjMwNzIwMDA7IEV4cGlyZXM9U2F0LCAyOCBNYXkgMjAyMiAwNDoyMDoyMCBHTVQ7IA0KbG9jYXRpb246IGh0dHA6Ly9vaW1nLm5iY3VuaS5jb20vYi9zcy9uYmN1Z2xvYmFsLG5iY3V1c2FuZXR3b3JrZC8xL0guMjcuNS9zMTg2NDYzMDM1NDkyNzU/QVFCPTEmcGNjcj10cnVlJnZpZG49MkY2NzlERkU4NTE1Q0M2OS02MDAwMEJEQjRCMDg2NEZFJm5kaD0xJnQ9MjglMkY0JTJGMjAyMCUyMDQlM0EyMCUzQTklMjA0JTIwMCZmaWQ9MUQ4N0M0QzVGMUZERDUxOS0yMTg5RjdBRDA4Qjg1QzJFJmNlPVVURi04Jm5zPW5iY3VuaXZlcnNhbCZwYWdlTmFtZT1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QlMjAlM0ElMjBwcmVwYXJlJmc9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGJmNjPVVTRCZzZXJ2ZXI9MTAuMTAuMTAuMTgmZXZlbnRzPWV2ZW50NiZjMj1EcmFtYSZjMz1WaWRlbyZjND1Nci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QmdjQ9RCUzRGM0JmM1PU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMHByZXBhcmUmYzY9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGam9pbiZjOD1DYWJsZSZ2OD1DYWJsZSZjOT1VU0ElMjBOZXR3b3JrJnY5PU1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMHByZXBhcmUmYzEwPU1yLiUyMFJvYm90JnYxMD1EJTNEYzEwJmMxMT1Nci4lMjBSb2JvdCUyMCU3QyUyME1yLiUyMFJvYm90JTIwJTNBJTIwV2hvJTIwSXMlMjBNci4lMjBSb2JvdCUyMCUzQSUyMHByZXBhcmUmYzEyPVVTQSUyME5ldHdvcmslMjAlN0MlMjBNci4lMjBSb2JvdCZjMTM9UmVwZWF0JmMzMj1OZXclMjBTaXRlJnYzMj1WaWRlbyZ2NDM9aHR0cCUzQSUyRiUyRjEwLjEwLjEwLjE4JTJGam9pbiZ2NDU9VVNBJTIwTmV0d29yayZjNjA9Tm90JTIwU3BvbnNvcmVkJmM2OD1EJTNEdjY4JnY2OD1EZXNrdG9wJTIwTGFyZ2UmYzY5PUQlM0R2NjkmdjY5PTU4NCZjNzA9RCUzRHY3MCZ2NzA9MTM0MiZjNzE9RCUzRHY3MSZ2NzE9RGVza3RvcCZoMT1DYWJsZSU3Q1VTQSUyME5ldHdvcmslN0NNci4lMjBSb2JvdCZoMj1EcmFtYSU3Q01yLiUyMFJvYm90JTdDVmlkZW8lN0NNci4lMjBSb2JvdCUyMCUzQSUyMFdobyUyMElzJTIwTXIuJTIwUm9ib3QmaDM9MTAuMTAuMTAuMTglN0Nqb2luJnM9MTM0Mng1ODQmYz0yNCZqPTEuNiZ2PU4maz1ZJmJ3PTEzNDImYmg9NTg0JkFRRT0xDQpjb250ZW50LWxlbmd0aDogMA0KY2FjaGUtY29udHJvbDogbm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG5vLXRyYW5zZm9ybSwgcHJpdmF0ZQ0KeC14c3MtcHJvdGVjdGlvbjogMTsgbW9kZT1ibG9jaw0KeC1jb250ZW50LXR5cGUtb3B0aW9uczogbm9zbmlmZg0KY29ubmVjdGlvbjogY2xvc2UNCg0K]]></response>
    <comment></comment>
  </item>
</items>
